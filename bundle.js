(()=>{var e,t,n,s,r,i,o,a={3975:(e,t,n)=>{"use strict";var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();e.exports=t=s.fetch,s.fetch&&(t.default=s.fetch.bind(s)),t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response},6687:e=>{var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},1074:e=>{var t=function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};t.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.init_by_array=function(e,t){var n,s,r;for(this.init_seed(19650218),n=1,s=0,r=this.N>t?this.N:t;r;r--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[s]+s,this.mt[n]>>>=0,s++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),s>=t&&(s=0)}for(r=this.N-1;r;r--){i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},t.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},e.exports=t},47:(e,t,n)=>{var s;if("object"==typeof globalThis)s=globalThis;else try{s=n(6687)}catch(e){}finally{if(s||"undefined"==typeof window||(s=window),!s)throw new Error("Could not determine global this")}var r=s.WebSocket||s.MozWebSocket,i=n(9763);function o(e,t){return t?new r(e,t):new r(e)}r&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return r[e]}})})),e.exports={w3cwebsocket:r?o:null,version:i}},9763:(e,t,n)=>{e.exports=n(2284).version},8099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(7117);function r(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function i(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function a(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function l(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function u(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function h(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function d(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),u(e/4294967296>>>0,t,n),u(e>>>0,t,n+4),t}function f(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),h(e>>>0,t,n),h(e/4294967296>>>0,t,n+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=r,t.writeInt16BE=r,t.writeUint16LE=i,t.writeInt16LE=i,t.readInt32BE=o,t.readUint32BE=a,t.readInt32LE=c,t.readUint32LE=l,t.writeUint32BE=u,t.writeInt32BE=u,t.writeUint32LE=h,t.writeInt32LE=h,t.readInt64BE=function(e,t){void 0===t&&(t=0);var n=o(e,t),s=o(e,t+4);return 4294967296*n+s-4294967296*(s>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*a(e,t)+a(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var n=c(e,t);return 4294967296*c(e,t+4)+n-4294967296*(n>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var n=l(e,t);return 4294967296*l(e,t+4)+n},t.writeUint64BE=d,t.writeInt64BE=d,t.writeUint64LE=f,t.writeInt64LE=f,t.readUintBE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,r=1,i=e/8+n-1;i>=n;i--)s+=t[i]*r,r*=256;return s},t.readUintLE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,r=1,i=n;i<n+e/8;i++)s+=t[i]*r,r*=256;return s},t.writeUintBE=function(e,t,n,r){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===r&&(r=0),e%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!s.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,o=e/8+r-1;o>=r;o--)n[o]=t/i&255,i*=256;return n},t.writeUintLE=function(e,t,n,r){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===r&&(r=0),e%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!s.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,o=r;o<r+e/8;o++)n[o]=t/i&255,i*=256;return n},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e),t},t.writeFloat32LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),t},t.writeFloat64BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e),t},t.writeFloat64LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),t}},5439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(8099),r=n(7309),i=20;function o(e,t,n){for(var r=1634760805,o=857760878,a=2036477234,c=1797285236,l=n[3]<<24|n[2]<<16|n[1]<<8|n[0],u=n[7]<<24|n[6]<<16|n[5]<<8|n[4],h=n[11]<<24|n[10]<<16|n[9]<<8|n[8],d=n[15]<<24|n[14]<<16|n[13]<<8|n[12],f=n[19]<<24|n[18]<<16|n[17]<<8|n[16],p=n[23]<<24|n[22]<<16|n[21]<<8|n[20],g=n[27]<<24|n[26]<<16|n[25]<<8|n[24],m=n[31]<<24|n[30]<<16|n[29]<<8|n[28],y=t[3]<<24|t[2]<<16|t[1]<<8|t[0],b=t[7]<<24|t[6]<<16|t[5]<<8|t[4],w=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],A=r,_=o,k=a,E=c,x=l,C=u,S=h,P=d,T=f,I=p,O=g,N=m,j=y,L=b,U=w,R=v,D=0;D<i;D+=2)x=(x^=T=T+(j=(j^=A=A+x|0)>>>16|j<<16)|0)>>>20|x<<12,C=(C^=I=I+(L=(L^=_=_+C|0)>>>16|L<<16)|0)>>>20|C<<12,S=(S^=O=O+(U=(U^=k=k+S|0)>>>16|U<<16)|0)>>>20|S<<12,P=(P^=N=N+(R=(R^=E=E+P|0)>>>16|R<<16)|0)>>>20|P<<12,S=(S^=O=O+(U=(U^=k=k+S|0)>>>24|U<<8)|0)>>>25|S<<7,P=(P^=N=N+(R=(R^=E=E+P|0)>>>24|R<<8)|0)>>>25|P<<7,C=(C^=I=I+(L=(L^=_=_+C|0)>>>24|L<<8)|0)>>>25|C<<7,x=(x^=T=T+(j=(j^=A=A+x|0)>>>24|j<<8)|0)>>>25|x<<7,C=(C^=O=O+(R=(R^=A=A+C|0)>>>16|R<<16)|0)>>>20|C<<12,S=(S^=N=N+(j=(j^=_=_+S|0)>>>16|j<<16)|0)>>>20|S<<12,P=(P^=T=T+(L=(L^=k=k+P|0)>>>16|L<<16)|0)>>>20|P<<12,x=(x^=I=I+(U=(U^=E=E+x|0)>>>16|U<<16)|0)>>>20|x<<12,P=(P^=T=T+(L=(L^=k=k+P|0)>>>24|L<<8)|0)>>>25|P<<7,x=(x^=I=I+(U=(U^=E=E+x|0)>>>24|U<<8)|0)>>>25|x<<7,S=(S^=N=N+(j=(j^=_=_+S|0)>>>24|j<<8)|0)>>>25|S<<7,C=(C^=O=O+(R=(R^=A=A+C|0)>>>24|R<<8)|0)>>>25|C<<7;s.writeUint32LE(A+r|0,e,0),s.writeUint32LE(_+o|0,e,4),s.writeUint32LE(k+a|0,e,8),s.writeUint32LE(E+c|0,e,12),s.writeUint32LE(x+l|0,e,16),s.writeUint32LE(C+u|0,e,20),s.writeUint32LE(S+h|0,e,24),s.writeUint32LE(P+d|0,e,28),s.writeUint32LE(T+f|0,e,32),s.writeUint32LE(I+p|0,e,36),s.writeUint32LE(O+g|0,e,40),s.writeUint32LE(N+m|0,e,44),s.writeUint32LE(j+y|0,e,48),s.writeUint32LE(L+b|0,e,52),s.writeUint32LE(U+w|0,e,56),s.writeUint32LE(R+v|0,e,60)}function a(e,t,n,s,i){if(void 0===i&&(i=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<n.length)throw new Error("ChaCha: destination is shorter than source");var a,l;if(0===i){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=(a=new Uint8Array(16)).length-t.length,a.set(t,l)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");a=t,l=i}for(var u=new Uint8Array(64),h=0;h<n.length;h+=64){o(u,a,e);for(var d=h;d<h+64&&d<n.length;d++)s[d]=n[d]^u[d-h];c(a,0,l)}return r.wipe(u),0===i&&r.wipe(a),s}function c(e,t,n){for(var s=1;n--;)s=s+(255&e[t])|0,e[t]=255&s,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=a,t.stream=function(e,t,n,s){return void 0===s&&(s=0),r.wipe(n),a(e,t,n,n,s)}},5501:(e,t,n)=>{"use strict";var s=n(5439),r=n(3027),i=n(7309),o=n(8099),a=n(4153);t.Cv=32,t.WH=12,t.pg=16;var c=new Uint8Array(16),l=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,n,r){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(e,o.length-e.length);var a=new Uint8Array(32);s.stream(this._key,o,a,4);var c,l=t.length+this.tagLength;if(r){if(r.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");c=r}else c=new Uint8Array(l);return s.streamXOR(this._key,o,t,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),n),i.wipe(o),c},e.prototype.open=function(e,t,n,r){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(e,o.length-e.length);var c=new Uint8Array(32);s.stream(this._key,o,c,4);var l=new Uint8Array(this.tagLength);if(this._authenticate(l,c,t.subarray(0,t.length-this.tagLength),n),!a.equal(l,t.subarray(t.length-this.tagLength,t.length)))return null;var u,h=t.length-this.tagLength;if(r){if(r.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");u=r}else u=new Uint8Array(h);return s.streamXOR(this._key,o,t.subarray(0,t.length-this.tagLength),u,4),i.wipe(o),u},e.prototype.clean=function(){return i.wipe(this._key),this},e.prototype._authenticate=function(e,t,n,s){var a=new r.Poly1305(t);s&&(a.update(s),s.length%16>0&&a.update(c.subarray(s.length%16))),a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16));var l=new Uint8Array(8);s&&o.writeUint64LE(s.length,l),a.update(l),o.writeUint64LE(n.length,l),a.update(l);for(var u=a.digest(),h=0;h<u.length;h++)e[h]=u[h];a.clean(),i.wipe(u),i.wipe(l)},e}();t.OK=l},4153:(e,t)=>{"use strict";function n(e,t){if(e.length!==t.length)return 0;for(var n=0,s=0;s<e.length;s++)n|=e[s]^t[s];return 1&n-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,n){return~(e-1)&t|e-1&n},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=n,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==n(e,t)}},9984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState}},512:(e,t,n)=>{"use strict";var s=n(5629),r=n(7309),i=function(){function e(e,t,n,r){void 0===n&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=r;var i=s.hmac(this._hash,n,t);this._hmac=new s.HMAC(e,i),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),r.wipe(this._buffer),r.wipe(this._counter),this._bufpos=0},e}();t.t=i},5629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(9984),r=n(4153),i=n(7309),o=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var r=0;r<n.length;r++)n[r]^=54;this._inner.update(n);for(r=0;r<n.length;r++)n[r]^=106;this._outer.update(n),s.isSerializableHash(this._inner)&&s.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),i.wipe(n)}return e.prototype.reset=function(){if(!s.isSerializableHash(this._inner)||!s.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){s.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),s.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!s.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!s.isSerializableHash(this._inner)||!s.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!s.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=o,t.hmac=function(e,t,n){var s=new o(e,t);s.update(n);var r=s.digest();return s.clean(),r},t.equal=r.equal},7117:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var n=65535&e,s=65535&t;return n*s+((e>>>16&65535)*s+n*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},3027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(4153),r=n(7309);t.DIGEST_LENGTH=16;var i=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var n=e[0]|e[1]<<8;this._r[0]=8191&n;var s=e[2]|e[3]<<8;this._r[1]=8191&(n>>>13|s<<3);var r=e[4]|e[5]<<8;this._r[2]=7939&(s>>>10|r<<6);var i=e[6]|e[7]<<8;this._r[3]=8191&(r>>>7|i<<9);var o=e[8]|e[9]<<8;this._r[4]=255&(i>>>4|o<<12),this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var c=e[12]|e[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var l=e[14]|e[15]<<8;this._r[8]=8191&(c>>>8|l<<8),this._r[9]=l>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,n){for(var s=this._fin?0:2048,r=this._h[0],i=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],l=this._h[5],u=this._h[6],h=this._h[7],d=this._h[8],f=this._h[9],p=this._r[0],g=this._r[1],m=this._r[2],y=this._r[3],b=this._r[4],w=this._r[5],v=this._r[6],A=this._r[7],_=this._r[8],k=this._r[9];n>=16;){var E=e[t+0]|e[t+1]<<8;r+=8191&E;var x=e[t+2]|e[t+3]<<8;i+=8191&(E>>>13|x<<3);var C=e[t+4]|e[t+5]<<8;o+=8191&(x>>>10|C<<6);var S=e[t+6]|e[t+7]<<8;a+=8191&(C>>>7|S<<9);var P=e[t+8]|e[t+9]<<8;c+=8191&(S>>>4|P<<12),l+=P>>>1&8191;var T=e[t+10]|e[t+11]<<8;u+=8191&(P>>>14|T<<2);var I=e[t+12]|e[t+13]<<8;h+=8191&(T>>>11|I<<5);var O=e[t+14]|e[t+15]<<8,N=0,j=N;j+=r*p,j+=i*(5*k),j+=o*(5*_),j+=a*(5*A),N=(j+=c*(5*v))>>>13,j&=8191,j+=l*(5*w),j+=u*(5*b),j+=h*(5*y),j+=(d+=8191&(I>>>8|O<<8))*(5*m);var L=N+=(j+=(f+=O>>>5|s)*(5*g))>>>13;L+=r*g,L+=i*p,L+=o*(5*k),L+=a*(5*_),N=(L+=c*(5*A))>>>13,L&=8191,L+=l*(5*v),L+=u*(5*w),L+=h*(5*b),L+=d*(5*y),N+=(L+=f*(5*m))>>>13,L&=8191;var U=N;U+=r*m,U+=i*g,U+=o*p,U+=a*(5*k),N=(U+=c*(5*_))>>>13,U&=8191,U+=l*(5*A),U+=u*(5*v),U+=h*(5*w),U+=d*(5*b);var R=N+=(U+=f*(5*y))>>>13;R+=r*y,R+=i*m,R+=o*g,R+=a*p,N=(R+=c*(5*k))>>>13,R&=8191,R+=l*(5*_),R+=u*(5*A),R+=h*(5*v),R+=d*(5*w);var D=N+=(R+=f*(5*b))>>>13;D+=r*b,D+=i*y,D+=o*m,D+=a*g,N=(D+=c*p)>>>13,D&=8191,D+=l*(5*k),D+=u*(5*_),D+=h*(5*A),D+=d*(5*v);var M=N+=(D+=f*(5*w))>>>13;M+=r*w,M+=i*b,M+=o*y,M+=a*m,N=(M+=c*g)>>>13,M&=8191,M+=l*p,M+=u*(5*k),M+=h*(5*_),M+=d*(5*A);var B=N+=(M+=f*(5*v))>>>13;B+=r*v,B+=i*w,B+=o*b,B+=a*y,N=(B+=c*m)>>>13,B&=8191,B+=l*g,B+=u*p,B+=h*(5*k),B+=d*(5*_);var F=N+=(B+=f*(5*A))>>>13;F+=r*A,F+=i*v,F+=o*w,F+=a*b,N=(F+=c*y)>>>13,F&=8191,F+=l*m,F+=u*g,F+=h*p,F+=d*(5*k);var $=N+=(F+=f*(5*_))>>>13;$+=r*_,$+=i*A,$+=o*v,$+=a*w,N=($+=c*b)>>>13,$&=8191,$+=l*y,$+=u*m,$+=h*g,$+=d*p;var G=N+=($+=f*(5*k))>>>13;G+=r*k,G+=i*_,G+=o*A,G+=a*v,N=(G+=c*w)>>>13,G&=8191,G+=l*b,G+=u*y,G+=h*m,G+=d*g,r=j=8191&(N=(N=((N+=(G+=f*p)>>>13)<<2)+N|0)+(j&=8191)|0),i=L+=N>>>=13,o=U&=8191,a=R&=8191,c=D&=8191,l=M&=8191,u=B&=8191,h=F&=8191,d=$&=8191,f=G&=8191,t+=16,n-=16}this._h[0]=r,this._h[1]=i,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=l,this._h[6]=u,this._h[7]=h,this._h[8]=d,this._h[9]=f},e.prototype.finish=function(e,t){void 0===t&&(t=0);var n,s,r,i,o=new Uint16Array(10);if(this._leftover){for(i=this._leftover,this._buffer[i++]=1;i<16;i++)this._buffer[i]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,i=2;i<10;i++)this._h[i]+=n,n=this._h[i]>>>13,this._h[i]&=8191;for(this._h[0]+=5*n,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,o[0]=this._h[0]+5,n=o[0]>>>13,o[0]&=8191,i=1;i<10;i++)o[i]=this._h[i]+n,n=o[i]>>>13,o[i]&=8191;for(o[9]-=8192,s=(1^n)-1,i=0;i<10;i++)o[i]&=s;for(s=~s,i=0;i<10;i++)this._h[i]=this._h[i]&s|o[i];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),r=this._h[0]+this._pad[0],this._h[0]=65535&r,i=1;i<8;i++)r=(this._h[i]+this._pad[i]|0)+(r>>>16)|0,this._h[i]=65535&r;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,n=0,s=e.length;if(this._leftover){(t=16-this._leftover)>s&&(t=s);for(var r=0;r<t;r++)this._buffer[this._leftover+r]=e[n+r];if(s-=t,n+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(s>=16&&(t=s-s%16,this._blocks(e,n,t),n+=t,s-=t),s){for(r=0;r<s;r++)this._buffer[this._leftover+r]=e[n+r];this._leftover+=s}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=i,t.oneTimeAuth=function(e,t){var n=new i(e);n.update(t);var s=n.digest();return n.clean(),s},t.equal=function(e,n){return e.length===t.DIGEST_LENGTH&&n.length===t.DIGEST_LENGTH&&s.equal(e,n)}},1416:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const s=n(6008),r=n(8099),i=n(7309);function o(e,n=t.defaultRandomSource){return n.randomBytes(e)}t.defaultRandomSource=new s.SystemRandomSource,t.randomBytes=o,t.randomUint32=function(e=t.defaultRandomSource){const n=o(4,e),s=(0,r.readUint32LE)(n);return(0,i.wipe)(n),s};const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e,n=a,s=t.defaultRandomSource){if(n.length<2)throw new Error("randomString charset is too short");if(n.length>256)throw new Error("randomString charset is too long");let r="";const c=n.length,l=256-256%c;for(;e>0;){const t=o(Math.ceil(256*e/l),s);for(let s=0;s<t.length&&e>0;s++){const i=t[s];i<l&&(r+=n.charAt(i%c),e--)}(0,i.wipe)(t)}return r}t.randomString=c,t.randomStringForEntropy=function(e,n=a,s=t.defaultRandomSource){return c(Math.ceil(e/(Math.log(n.length)/Math.LN2)),n,s)}},5455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;t.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}},8871:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const s=n(7309);t.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=n(5883);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let e=0;e<n.length;e++)n[e]=t[e];return(0,s.wipe)(t),n}}},6008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const s=n(5455),r=n(8871);t.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new s.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new r.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}},3294:(e,t,n)=>{"use strict";var s=n(8099),r=n(7309);t.k=32,t.cn=64;var i=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=a(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,n=this._bufferLength,r=t/536870912|0,i=t<<3,o=t%64<56?64:128;this._buffer[n]=128;for(var c=n+1;c<o-8;c++)this._buffer[c]=0;s.writeUint32BE(r,this._buffer,o-8),s.writeUint32BE(i,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/4;c++)s.writeUint32BE(this._state[c],e,4*c);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){r.wipe(e.state),e.buffer&&r.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=i;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(e,t,n,r,i){for(;i>=64;){for(var a=t[0],c=t[1],l=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=0;g<16;g++){var m=r+4*g;e[g]=s.readUint32BE(n,m)}for(g=16;g<64;g++){var y=e[g-2],b=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,w=((y=e[g-15])>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(b+e[g-7]|0)+(w+e[g-16]|0)}for(g=0;g<64;g++){b=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&f)|0)+(p+(o[g]+e[g]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&l^c&l)|0;p=f,f=d,d=h,h=u+b|0,u=l,l=c,c=a,a=b+w|0}t[0]+=a,t[1]+=c,t[2]+=l,t[3]+=u,t[4]+=h,t[5]+=d,t[6]+=f,t[7]+=p,r+=64,i-=64}return r}t.vp=function(e){var t=new i;t.update(e);var n=t.digest();return t.clean(),n}},7309:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},7664:(e,t,n)=>{"use strict";t.gi=t.Au=t.KS=t.kz=void 0;const s=n(1416),r=n(7309);function i(e){const t=new Float64Array(16);if(e)for(let n=0;n<e.length;n++)t[n]=e[n];return t}t.kz=32,t.KS=32;const o=new Uint8Array(32);o[0]=9;const a=i([56129,1]);function c(e){let t=1;for(let n=0;n<16;n++){let s=e[n]+t+65535;t=Math.floor(s/65536),e[n]=s-65536*t}e[0]+=t-1+37*(t-1)}function l(e,t,n){const s=~(n-1);for(let n=0;n<16;n++){const r=s&(e[n]^t[n]);e[n]^=r,t[n]^=r}}function u(e,t,n){for(let s=0;s<16;s++)e[s]=t[s]+n[s]}function h(e,t,n){for(let s=0;s<16;s++)e[s]=t[s]-n[s]}function d(e,t,n){let s,r,i=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0,y=0,b=0,w=0,v=0,A=0,_=0,k=0,E=0,x=0,C=0,S=0,P=0,T=0,I=0,O=0,N=0,j=0,L=0,U=0,R=n[0],D=n[1],M=n[2],B=n[3],F=n[4],$=n[5],G=n[6],H=n[7],z=n[8],W=n[9],q=n[10],K=n[11],V=n[12],J=n[13],Q=n[14],Y=n[15];s=t[0],i+=s*R,o+=s*D,a+=s*M,c+=s*B,l+=s*F,u+=s*$,h+=s*G,d+=s*H,f+=s*z,p+=s*W,g+=s*q,m+=s*K,y+=s*V,b+=s*J,w+=s*Q,v+=s*Y,s=t[1],o+=s*R,a+=s*D,c+=s*M,l+=s*B,u+=s*F,h+=s*$,d+=s*G,f+=s*H,p+=s*z,g+=s*W,m+=s*q,y+=s*K,b+=s*V,w+=s*J,v+=s*Q,A+=s*Y,s=t[2],a+=s*R,c+=s*D,l+=s*M,u+=s*B,h+=s*F,d+=s*$,f+=s*G,p+=s*H,g+=s*z,m+=s*W,y+=s*q,b+=s*K,w+=s*V,v+=s*J,A+=s*Q,_+=s*Y,s=t[3],c+=s*R,l+=s*D,u+=s*M,h+=s*B,d+=s*F,f+=s*$,p+=s*G,g+=s*H,m+=s*z,y+=s*W,b+=s*q,w+=s*K,v+=s*V,A+=s*J,_+=s*Q,k+=s*Y,s=t[4],l+=s*R,u+=s*D,h+=s*M,d+=s*B,f+=s*F,p+=s*$,g+=s*G,m+=s*H,y+=s*z,b+=s*W,w+=s*q,v+=s*K,A+=s*V,_+=s*J,k+=s*Q,E+=s*Y,s=t[5],u+=s*R,h+=s*D,d+=s*M,f+=s*B,p+=s*F,g+=s*$,m+=s*G,y+=s*H,b+=s*z,w+=s*W,v+=s*q,A+=s*K,_+=s*V,k+=s*J,E+=s*Q,x+=s*Y,s=t[6],h+=s*R,d+=s*D,f+=s*M,p+=s*B,g+=s*F,m+=s*$,y+=s*G,b+=s*H,w+=s*z,v+=s*W,A+=s*q,_+=s*K,k+=s*V,E+=s*J,x+=s*Q,C+=s*Y,s=t[7],d+=s*R,f+=s*D,p+=s*M,g+=s*B,m+=s*F,y+=s*$,b+=s*G,w+=s*H,v+=s*z,A+=s*W,_+=s*q,k+=s*K,E+=s*V,x+=s*J,C+=s*Q,S+=s*Y,s=t[8],f+=s*R,p+=s*D,g+=s*M,m+=s*B,y+=s*F,b+=s*$,w+=s*G,v+=s*H,A+=s*z,_+=s*W,k+=s*q,E+=s*K,x+=s*V,C+=s*J,S+=s*Q,P+=s*Y,s=t[9],p+=s*R,g+=s*D,m+=s*M,y+=s*B,b+=s*F,w+=s*$,v+=s*G,A+=s*H,_+=s*z,k+=s*W,E+=s*q,x+=s*K,C+=s*V,S+=s*J,P+=s*Q,T+=s*Y,s=t[10],g+=s*R,m+=s*D,y+=s*M,b+=s*B,w+=s*F,v+=s*$,A+=s*G,_+=s*H,k+=s*z,E+=s*W,x+=s*q,C+=s*K,S+=s*V,P+=s*J,T+=s*Q,I+=s*Y,s=t[11],m+=s*R,y+=s*D,b+=s*M,w+=s*B,v+=s*F,A+=s*$,_+=s*G,k+=s*H,E+=s*z,x+=s*W,C+=s*q,S+=s*K,P+=s*V,T+=s*J,I+=s*Q,O+=s*Y,s=t[12],y+=s*R,b+=s*D,w+=s*M,v+=s*B,A+=s*F,_+=s*$,k+=s*G,E+=s*H,x+=s*z,C+=s*W,S+=s*q,P+=s*K,T+=s*V,I+=s*J,O+=s*Q,N+=s*Y,s=t[13],b+=s*R,w+=s*D,v+=s*M,A+=s*B,_+=s*F,k+=s*$,E+=s*G,x+=s*H,C+=s*z,S+=s*W,P+=s*q,T+=s*K,I+=s*V,O+=s*J,N+=s*Q,j+=s*Y,s=t[14],w+=s*R,v+=s*D,A+=s*M,_+=s*B,k+=s*F,E+=s*$,x+=s*G,C+=s*H,S+=s*z,P+=s*W,T+=s*q,I+=s*K,O+=s*V,N+=s*J,j+=s*Q,L+=s*Y,s=t[15],v+=s*R,A+=s*D,_+=s*M,k+=s*B,E+=s*F,x+=s*$,C+=s*G,S+=s*H,P+=s*z,T+=s*W,I+=s*q,O+=s*K,N+=s*V,j+=s*J,L+=s*Q,U+=s*Y,i+=38*A,o+=38*_,a+=38*k,c+=38*E,l+=38*x,u+=38*C,h+=38*S,d+=38*P,f+=38*T,p+=38*I,g+=38*O,m+=38*N,y+=38*j,b+=38*L,w+=38*U,r=1,s=i+r+65535,r=Math.floor(s/65536),i=s-65536*r,s=o+r+65535,r=Math.floor(s/65536),o=s-65536*r,s=a+r+65535,r=Math.floor(s/65536),a=s-65536*r,s=c+r+65535,r=Math.floor(s/65536),c=s-65536*r,s=l+r+65535,r=Math.floor(s/65536),l=s-65536*r,s=u+r+65535,r=Math.floor(s/65536),u=s-65536*r,s=h+r+65535,r=Math.floor(s/65536),h=s-65536*r,s=d+r+65535,r=Math.floor(s/65536),d=s-65536*r,s=f+r+65535,r=Math.floor(s/65536),f=s-65536*r,s=p+r+65535,r=Math.floor(s/65536),p=s-65536*r,s=g+r+65535,r=Math.floor(s/65536),g=s-65536*r,s=m+r+65535,r=Math.floor(s/65536),m=s-65536*r,s=y+r+65535,r=Math.floor(s/65536),y=s-65536*r,s=b+r+65535,r=Math.floor(s/65536),b=s-65536*r,s=w+r+65535,r=Math.floor(s/65536),w=s-65536*r,s=v+r+65535,r=Math.floor(s/65536),v=s-65536*r,i+=r-1+37*(r-1),r=1,s=i+r+65535,r=Math.floor(s/65536),i=s-65536*r,s=o+r+65535,r=Math.floor(s/65536),o=s-65536*r,s=a+r+65535,r=Math.floor(s/65536),a=s-65536*r,s=c+r+65535,r=Math.floor(s/65536),c=s-65536*r,s=l+r+65535,r=Math.floor(s/65536),l=s-65536*r,s=u+r+65535,r=Math.floor(s/65536),u=s-65536*r,s=h+r+65535,r=Math.floor(s/65536),h=s-65536*r,s=d+r+65535,r=Math.floor(s/65536),d=s-65536*r,s=f+r+65535,r=Math.floor(s/65536),f=s-65536*r,s=p+r+65535,r=Math.floor(s/65536),p=s-65536*r,s=g+r+65535,r=Math.floor(s/65536),g=s-65536*r,s=m+r+65535,r=Math.floor(s/65536),m=s-65536*r,s=y+r+65535,r=Math.floor(s/65536),y=s-65536*r,s=b+r+65535,r=Math.floor(s/65536),b=s-65536*r,s=w+r+65535,r=Math.floor(s/65536),w=s-65536*r,s=v+r+65535,r=Math.floor(s/65536),v=s-65536*r,i+=r-1+37*(r-1),e[0]=i,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=m,e[12]=y,e[13]=b,e[14]=w,e[15]=v}function f(e,t){d(e,t,t)}function p(e,t){const n=new Uint8Array(32),s=new Float64Array(80),r=i(),o=i(),p=i(),g=i(),m=i(),y=i();for(let t=0;t<31;t++)n[t]=e[t];n[31]=127&e[31]|64,n[0]&=248,function(e,t){for(let n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(s,t);for(let e=0;e<16;e++)o[e]=s[e];r[0]=g[0]=1;for(let e=254;e>=0;--e){const t=n[e>>>3]>>>(7&e)&1;l(r,o,t),l(p,g,t),u(m,r,p),h(r,r,p),u(p,o,g),h(o,o,g),f(g,m),f(y,r),d(r,p,r),d(p,o,m),u(m,r,p),h(r,r,p),f(o,r),h(p,g,y),d(r,p,a),u(r,r,g),d(p,p,r),d(r,g,y),d(g,o,s),f(o,m),l(r,o,t),l(p,g,t)}for(let e=0;e<16;e++)s[e+16]=r[e],s[e+32]=p[e],s[e+48]=o[e],s[e+64]=g[e];const b=s.subarray(32),w=s.subarray(16);!function(e,t){const n=i();for(let e=0;e<16;e++)n[e]=t[e];for(let e=253;e>=0;e--)f(n,n),2!==e&&4!==e&&d(n,n,t);for(let t=0;t<16;t++)e[t]=n[t]}(b,b),d(w,w,b);const v=new Uint8Array(32);return function(e,t){const n=i(),s=i();for(let e=0;e<16;e++)s[e]=t[e];c(s),c(s),c(s);for(let e=0;e<2;e++){n[0]=s[0]-65517;for(let e=1;e<15;e++)n[e]=s[e]-65535-(n[e-1]>>16&1),n[e-1]&=65535;n[15]=s[15]-32767-(n[14]>>16&1);const e=n[15]>>16&1;n[14]&=65535,l(s,n,1-e)}for(let t=0;t<16;t++)e[2*t]=255&s[t],e[2*t+1]=s[t]>>8}(v,w),v}function g(e){return p(e,o)}function m(e){if(e.length!==t.KS)throw new Error(`x25519: seed must be ${t.KS} bytes`);const n=new Uint8Array(e);return{publicKey:g(n),secretKey:n}}t.Au=function(e){const t=(0,s.randomBytes)(32,e),n=m(t);return(0,r.wipe)(t),n},t.gi=function(e,n,s=!1){if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(n.length!==t.kz)throw new Error("X25519: incorrect public key length");const r=p(e,n);if(s){let e=0;for(let t=0;t<r.length;t++)e|=r[t];if(0===e)throw new Error("X25519: invalid shared key")}return r}},1882:()=>{},6900:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(4);s.__exportStar(n(6869),t),s.__exportStar(n(8033),t)},6869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},8033:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},6736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(4);s.__exportStar(n(4273),t),s.__exportStar(n(7001),t),s.__exportStar(n(2939),t),s.__exportStar(n(6900),t)},2939:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(4).__exportStar(n(8766),t)},8766:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;t.IWatch=class{}},3207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const s=n(6900);t.toMiliseconds=function(e){return e*s.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/s.ONE_THOUSAND)}},3873:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},4273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(4);s.__exportStar(n(3873),t),s.__exportStar(n(3207),t)},7001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const n=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:n})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=n,t.default=n},4:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__assign:()=>i,__asyncDelegator:()=>v,__asyncGenerator:()=>w,__asyncValues:()=>A,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>x,__classPrivateFieldSet:()=>C,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>f,__extends:()=>r,__generator:()=>h,__importDefault:()=>E,__importStar:()=>k,__makeTemplateObject:()=>_,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>m,__spreadArrays:()=>y,__values:()=>p});var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},s(e,t)};function r(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};function o(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}function a(e,t,n,s){var r,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(i<3?r(o):i>3?r(t,n,o):r(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function c(e,t){return function(n,s){t(n,s,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))}function h(e,t){var n,s,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,s&&(r=2&i[0]?s.return:i[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,s=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function d(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var s,r,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var s=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,r++)s[r]=i[o];return s}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=n.apply(e,t||[]),i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(e){r[e]&&(s[e]=function(t){return new Promise((function(n,s){i.push([e,t,n,s])>1||a(e,t)}))})}function a(e,t){try{(n=r[e](t)).value instanceof b?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function v(e){var t,n;return t={},s("next"),s("throw",(function(e){throw e})),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,r){t[s]=e[s]?function(t){return(n=!n)?{value:b(e[s](t)),done:"return"===s}:r?r(t):t}:r}}function A(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(n){t[n]=e[n]&&function(t){return new Promise((function(s,r){(function(e,t,n,s){Promise.resolve(s).then((function(t){e({value:t,done:n})}),t)})(s,r,(t=e[n](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},9795:(e,t,n)=>{"use strict";n.d(t,{AW:()=>L,O6:()=>Gt,rV:()=>M,gn:()=>Ce,H1:()=>ve,hF:()=>Ae,WG:()=>V,pe:()=>Q,m$:()=>W,vB:()=>Y,HI:()=>J,E0:()=>Pe,Gq:()=>Ee,$0:()=>me,Z4:()=>ke,Bv:()=>He,Au:()=>H,jd:()=>z,gu:()=>O,D:()=>pe,Z7:()=>ot,cO:()=>je,_H:()=>Ne,fc:()=>et,D6:()=>at,Hh:()=>Ie,Ym:()=>q,rj:()=>K,jU:()=>de,gp:()=>tt,rF:()=>Rt,Bw:()=>Se,UG:()=>ue,Gg:()=>Bt,xW:()=>mt,b$:()=>he,Ih:()=>ft,h1:()=>yt,Q8:()=>ee,o8:()=>ut,qt:()=>ct,Dd:()=>bt,$t:()=>Tt,nf:()=>Nt,Q0:()=>St,in:()=>Et,p8:()=>jt,sI:()=>Ut,al:()=>Lt,L5:()=>lt,EJ:()=>Pt,Z2:()=>xt,PM:()=>Ct,hH:()=>It,ON:()=>Mt,n:()=>kt,JT:()=>Ot,M_:()=>ht,jv:()=>gt,KC:()=>be,eG:()=>Te,fK:()=>st,IP:()=>we,DQ:()=>I,iP:()=>xe,M:()=>nt,he:()=>$e,uw:()=>Ft,Ll:()=>X,EN:()=>Z});var s=n(5501),r=n(512),i=n(1416),o=n(3294),a=n(7664),c=n(7466),l=n(4155),u=function(e,t,n){if(n||2===arguments.length)for(var s,r=0,i=t.length;r<i;r++)!s&&r in t||(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},h=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},d=function(e){this.version=e,this.type="node",this.name="node",this.os=l.platform},f=function(e,t,n,s){this.name=e,this.version=t,this.os=n,this.bot=s,this.type="bot-device"},p=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},g=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},m=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,y=3,b=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],w=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function v(e){return e?_(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new g:"undefined"!=typeof navigator?_(navigator.userAgent):void 0!==l&&l.version?new d(l.version.slice(1)):null}function A(e){return""!==e&&b.reduce((function(t,n){var s=n[0],r=n[1];if(t)return t;var i=r.exec(e);return!!i&&[s,i]}),!1)}function _(e){var t=A(e);if(!t)return null;var n=t[0],s=t[1];if("searchbot"===n)return new p;var r=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);r?r.length<y&&(r=u(u([],r,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(y-r.length),!0)):r=[];var i=r.join("."),o=function(e){for(var t=0,n=w.length;t<n;t++){var s=w[t],r=s[0];if(s[1].exec(e))return r}return null}(e),a=m.exec(e);return a&&a[1]?new f(n,i,o,a[1]):new h(n,i,o)}var k=n(6736),E=n(2873),x=n(5755),C=n(6151);n(1882);const S={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var P=n(4155);const T=":";function I(e){const[t,n]=e.split(T);return{namespace:t,reference:n}}function O(e,t=[]){const n=[];return Object.keys(e).forEach((s=>{if(t.length&&!t.includes(s))return;const r=e[s];n.push(...r.accounts)})),n}function N(e,t){return e.includes(":")?[e]:t.chains||[]}const j="base10",L="base16",U="base64pad",R="utf8",D=0,M=1,B=0,F=1,$=12,G=32;function H(){const e=a.Au();return{privateKey:(0,c.BB)(e.secretKey,L),publicKey:(0,c.BB)(e.publicKey,L)}}function z(){const e=(0,i.randomBytes)(G);return(0,c.BB)(e,L)}function W(e,t){const n=a.gi((0,c.mL)(e,L),(0,c.mL)(t,L),!0),s=new r.t(o.mE,n).expand(G);return(0,c.BB)(s,L)}function q(e){const t=(0,o.vp)((0,c.mL)(e,L));return(0,c.BB)(t,L)}function K(e){const t=(0,o.vp)((0,c.mL)(e,R));return(0,c.BB)(t,L)}function V(e){return Number((0,c.BB)(e,j))}function J(e){const t=function(e){return(0,c.mL)(`${e}`,j)}(typeof e.type<"u"?e.type:D);if(V(t)===M&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?(0,c.mL)(e.senderPublicKey,L):void 0,r=typeof e.iv<"u"?(0,c.mL)(e.iv,L):(0,i.randomBytes)($);return function(e){if(V(e.type)===M){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,c.BB)((0,c.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),U)}return(0,c.BB)((0,c.zo)([e.type,e.iv,e.sealed]),U)}({type:t,sealed:new s.OK((0,c.mL)(e.symKey,L)).seal(r,(0,c.mL)(e.message,R)),iv:r,senderPublicKey:n})}function Q(e){const t=new s.OK((0,c.mL)(e.symKey,L)),{sealed:n,iv:r}=Y(e.encoded),i=t.open(r,n);if(null===i)throw new Error("Failed to decrypt");return(0,c.BB)(i,R)}function Y(e){const t=(0,c.mL)(e,U),n=t.slice(B,F),s=F;if(V(n)===M){const e=s+G,r=e+$,i=t.slice(s,e),o=t.slice(e,r);return{type:n,sealed:t.slice(r),iv:o,senderPublicKey:i}}const r=s+$,i=t.slice(s,r);return{type:n,sealed:t.slice(r),iv:i}}function X(e,t){const n=Y(e);return Z({type:V(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,c.BB)(n.senderPublicKey,L):void 0,receiverPublicKey:t?.receiverPublicKey})}function Z(e){const t=e?.type||D;if(t===M){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function ee(e){return e.type===M&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var te=Object.defineProperty,ne=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ie=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oe=(e,t)=>{for(var n in t||(t={}))se.call(t,n)&&ie(e,n,t[n]);if(ne)for(var n of ne(t))re.call(t,n)&&ie(e,n,t[n]);return e};const ae="ReactNative",ce={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},le="js";function ue(){return typeof P<"u"&&typeof P.versions<"u"&&typeof P.versions.node<"u"}function he(){return!(0,E.getDocument)()&&!!(0,E.getNavigator)()&&navigator.product===ae}function de(){return!ue()&&!!(0,E.getNavigator)()}function fe(){return he()?ce.reactNative:ue()?ce.node:de()?ce.browser:ce.unknown}function pe(){return(0,x.D)()||{name:"",description:"",url:"",icons:[""]}}function ge(e,t,s){const r=function(){if(fe()===ce.reactNative&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"){const{OS:e,Version:t}=n.g.Platform;return[e,t].join("-")}const e=v();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),i=function(){var e;const t=fe();return t===ce.browser?[t,(null==(e=(0,E.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[le,s].join("-"),r,i].join("/")}function me({protocol:e,version:t,relayUrl:n,sdkVersion:s,auth:r,projectId:i,useOnCloseEvent:o}){const a=n.split("?"),c={auth:r,ua:ge(e,t,s),projectId:i,useOnCloseEvent:o||void 0},l=function(e,t){let n=C.parse(e);return n=oe(oe({},n),t),C.stringify(n)}(a[1]||"",c);return a[0]+"?"+l}function ye(e,t){return e.filter((e=>t.includes(e))).length===e.length}function be(e){return Object.fromEntries(e.entries())}function we(e){return new Map(Object.entries(e))}function ve(e=k.FIVE_MINUTES,t){const n=(0,k.toMiliseconds)(e||k.FIVE_MINUTES);let s,r,i;return{resolve:e=>{i&&s&&(clearTimeout(i),s(e))},reject:e=>{i&&r&&(clearTimeout(i),r(e))},done:()=>new Promise(((e,o)=>{i=setTimeout((()=>{o(new Error(t))}),n),s=e,r=o}))}}function Ae(e,t,n){return new Promise((async(s,r)=>{const i=setTimeout((()=>r(new Error(n))),t);try{s(await e)}catch(e){r(e)}clearTimeout(i)}))}function _e(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function ke(e){return _e("topic",e)}function Ee(e){return _e("id",e)}function xe(e){const[t,n]=e.split(":"),s={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof n)s.topic=n;else{if("id"!==t||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);s.id=Number(n)}return s}function Ce(e,t){return(0,k.fromMiliseconds)((t||Date.now())+(0,k.toMiliseconds)(e))}function Se(e){return Date.now()>=(0,k.toMiliseconds)(e)}function Pe(e,t){return`${e}${t?`:${t}`:""}`}function Te(e=[],t=[]){return[...new Set([...e,...t])]}async function Ie({id:e,topic:t,wcDeepLink:s}){try{if(!s)return;const r="string"==typeof s?JSON.parse(s):s;let i=r?.href;if("string"!=typeof i)return;i.endsWith("/")&&(i=i.slice(0,-1));const o=`${i}/wc?requestId=${e}&sessionTopic=${t}`,a=fe();a===ce.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):a===ce.reactNative&&typeof(null==n.g?void 0:n.g.Linking)<"u"&&await n.g.Linking.openURL(o)}catch(e){console.error(e)}}const Oe="irn";function Ne(e){return e?.relay||{protocol:Oe}}function je(e){const t=S[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Le=Object.defineProperty,Ue=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,Me=(e,t,n)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Be=(e,t)=>{for(var n in t||(t={}))Re.call(t,n)&&Me(e,n,t[n]);if(Ue)for(var n of Ue(t))De.call(t,n)&&Me(e,n,t[n]);return e};function Fe(e,t="-"){const n={},s="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(s)){const r=t.replace(s,""),i=e[t];n[r]=i}})),n}function $e(e){const t=e.indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,s=e.substring(0,t),r=e.substring(t+1,n).split("@"),i=typeof n<"u"?e.substring(n):"",o=C.parse(i);return{protocol:s,topic:Ge(r[0]),version:parseInt(r[1],10),symKey:o.symKey,relay:Fe(o)}}function Ge(e){return e.startsWith("//")?e.substring(2):e}function He(e){return`${e.protocol}:${e.topic}@${e.version}?`+C.stringify(Be({symKey:e.symKey},function(e,t="-"){const n={};return Object.keys(e).forEach((s=>{const r="relay"+t+s;e[s]&&(n[r]=e[s])})),n}(e.relay)))}var ze=Object.defineProperty,We=Object.defineProperties,qe=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Qe=(e,t,n)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ye=(e,t)=>{for(var n in t||(t={}))Ve.call(t,n)&&Qe(e,n,t[n]);if(Ke)for(var n of Ke(t))Je.call(t,n)&&Qe(e,n,t[n]);return e},Xe=(e,t)=>We(e,qe(t));function Ze(e){const t=[];return e.forEach((e=>{const[n,s]=e.split(":");t.push(`${n}:${s}`)})),t}function et(e,t){const n=Et(e,t);if(n)throw new Error(n.message);const s={};for(const[t,n]of Object.entries(e))s[t]={methods:n.methods,events:n.events,chains:n.accounts.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))};return s}function tt(e){return e.includes(":")}function nt(e){return tt(e)?e.split(":")[0]:e}function st(e){var t,n,s;const r={};if(!lt(e))return r;for(const[i,o]of Object.entries(e)){const e=tt(i)?[i]:o.chains,a=o.methods||[],c=o.events||[],l=nt(i);r[l]=Xe(Ye({},r[l]),{chains:Te(e,null==(t=r[l])?void 0:t.chains),methods:Te(a,null==(n=r[l])?void 0:n.methods),events:Te(c,null==(s=r[l])?void 0:s.events)})}return r}const rt={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},it={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ot(e,t){const{message:n,code:s}=it[e];return{message:t?`${n} ${t}`:n,code:s}}function at(e,t){const{message:n,code:s}=rt[e];return{message:t?`${n} ${t}`:n,code:s}}function ct(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function lt(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function ut(e){return typeof e>"u"}function ht(e,t){return!(!t||!ut(e))||"string"==typeof e&&!!e.trim().length}function dt(e,t){return!(!t||!ut(e))||"number"==typeof e&&!isNaN(e)}function ft(e,t){const{requiredNamespaces:n}=t,s=Object.keys(e.namespaces),r=Object.keys(n);let i=!0;return!!ye(r,s)&&(s.forEach((t=>{const{accounts:s,methods:r,events:o}=e.namespaces[t],a=Ze(s),c=n[t];ye(N(t,c),a)&&ye(c.methods,r)&&ye(c.events,o)||(i=!1)})),i)}function pt(e){return!(!ht(e,!1)||!e.includes(":"))&&2===e.split(":").length}function gt(e){if(ht(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function mt(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}function yt(e){return e?.topic}function bt(e,t){let n=null;return ht(e?.publicKey,!1)||(n=ot("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function wt(e){let t=!0;return ct(e)?e.length&&(t=e.every((e=>ht(e,!1)))):t=!1,t}function vt(e,t,n){let s=null;return Object.entries(e).forEach((([e,r])=>{if(s)return;const i=function(e,t,n){let s=null;return ct(t)&&t.length?t.forEach((e=>{s||pt(e)||(s=at("UNSUPPORTED_CHAINS",`${n}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):pt(e)||(s=at("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}(e,N(e,r),`${t} ${n}`);i&&(s=i)})),s}function At(e,t){let n=null;return ct(e)?e.forEach((e=>{n||function(e){if(ht(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&pt(e)}}return!1}(e)||(n=at("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):n=at("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function _t(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const s=function(e,t){let n=null;return wt(e?.methods)?wt(e?.events)||(n=at("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=at("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}(e,`${t}, namespace`);s&&(n=s)})),n}function kt(e,t,n){let s=null;if(e&&lt(e)){const r=_t(e,t);r&&(s=r);const i=vt(e,t,n);i&&(s=i)}else s=ot("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return s}function Et(e,t){let n=null;if(e&&lt(e)){const s=_t(e,t);s&&(n=s);const r=function(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const s=At(e?.accounts,`${t} namespace`);s&&(n=s)})),n}(e,t);r&&(n=r)}else n=ot("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function xt(e){return ht(e.protocol,!0)}function Ct(e,t){let n=!1;return t&&!e?n=!0:e&&ct(e)&&e.length&&e.forEach((e=>{n=xt(e)})),n}function St(e){return"number"==typeof e}function Pt(e){return typeof e<"u"&&null!==typeof e}function Tt(e){return!!(e&&"object"==typeof e&&e.code&&dt(e.code,!1)&&e.message&&ht(e.message,!1))}function It(e){return!(ut(e)||!ht(e.method,!1))}function Ot(e){return!(ut(e)||ut(e.result)&&ut(e.error)||!dt(e.id,!1)||!ht(e.jsonrpc,!1))}function Nt(e){return!(ut(e)||!ht(e.name,!1))}function jt(e,t){return!(!pt(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...Ze(e.accounts))})),t}(e).includes(t))}function Lt(e,t,n){return!!ht(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{Ze(e.accounts).includes(t)&&n.push(...e.methods)})),n}(e,t).includes(n)}function Ut(e,t,n){return!!ht(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{Ze(e.accounts).includes(t)&&n.push(...e.events)})),n}(e,t).includes(n)}function Rt(e,t,n){let s=null;const r=function(e){const t={};return Object.keys(e).forEach((n=>{var s;n.includes(":")?t[n]=e[n]:null==(s=e[n].chains)||s.forEach((s=>{t[s]={methods:e[n].methods,events:e[n].events}}))})),t}(e),i=function(e){const t={};return Object.keys(e).forEach((n=>{if(n.includes(":"))t[n]=e[n];else{const s=Ze(e[n].accounts);s?.forEach((s=>{t[s]={accounts:e[n].accounts.filter((e=>e.includes(`${s}:`))),methods:e[n].methods,events:e[n].events}}))}})),t}(t),o=Object.keys(r),a=Object.keys(i),c=Dt(Object.keys(e)),l=Dt(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(s=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),ye(o,a)||(s=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||s)return;const r=Ze(t[e].accounts);r.includes(e)||(s=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${r.toString()}`))})),o.forEach((e=>{s||(ye(r[e].methods,i[e].methods)?ye(r[e].events,i[e].events)||(s=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${e}`)):s=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${e}`))})),s}function Dt(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function Mt(e,t){return dt(e,!1)&&e<=t.max&&e>=t.min}function Bt(){const e=fe();return new Promise((t=>{switch(e){case ce.browser:t(de()&&navigator?.onLine);break;case ce.reactNative:t(async function(){if(he()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo){const e=await(null==n.g?void 0:n.g.NetInfo.fetch());return e?.isConnected}return!0}());break;case ce.node:default:t(!0)}}))}function Ft(e){switch(fe()){case ce.browser:!function(e){de()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case ce.reactNative:!function(e){he()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo&&n.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e);case ce.node:}}const $t={};class Gt{static get(e){return $t[e]}static set(e,t){$t[e]=t}static delete(e){delete $t[e]}}},6151:(e,t,n)=>{"use strict";const s=n(610),r=n(4020),i=n(500),o=n(2806),a=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function u(e,t){return t.decode?r(e):e}function h(e){return Array.isArray(e)?e.sort():"object"==typeof e?h(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,s)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===s[e]&&(s[e]={}),s[e][t[1]]=n):s[e]=n};case"bracket":return(e,n,s)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],n):s[e]=[n]:s[e]=n};case"colon-list-separator":return(e,n,s)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],n):s[e]=[n]:s[e]=n};case"comma":case"separator":return(t,n,s)=>{const r="string"==typeof n&&n.includes(e.arrayFormatSeparator),i="string"==typeof n&&!r&&u(n,e).includes(e.arrayFormatSeparator);n=i?u(n,e):n;const o=r||i?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);s[t]=o};case"bracket-separator":return(t,n,s)=>{const r=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!r)return void(s[t]=n?u(n,e):n);const i=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==s[t]?s[t]=[].concat(s[t],i):s[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const r of e.split("&")){if(""===r)continue;let[e,o]=i(t.decode?r.replace(/\+/g," "):r,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:u(o,t),n(u(e,t),o,s)}for(const e of Object.keys(s)){const n=s[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=p(n[e],t);else s[e]=p(n,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce(((e,t)=>{const n=s[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=h(n):e[t]=n,e}),Object.create(null))}t.extract=f,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],s=function(e){switch(e.arrayFormat){case"index":return t=>(n,s)=>{const r=n.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[l(t,e),"[",r,"]"].join("")]:[...n,[l(t,e),"[",l(r,e),"]=",l(s,e)].join("")]};case"bracket":return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[l(t,e),"[]"].join("")]:[...n,[l(t,e),"[]=",l(s,e)].join("")];case"colon-list-separator":return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[l(t,e),":list="].join("")]:[...n,[l(t,e),":list=",l(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(s,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?s:(r=null===r?"":r,0===s.length?[[l(n,e),t,l(r,e)].join("")]:[[s,l(r,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,l(t,e)]:[...n,[l(t,e),"=",l(s,e)].join("")]}}(t),r={};for(const t of Object.keys(e))n(t)||(r[t]=e[t]);const i=Object.keys(r);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const r=e[n];return void 0===r?"":null===r?l(n,t):Array.isArray(r)?0===r.length&&"bracket-separator"===t.arrayFormat?l(n,t)+"[]":r.reduce(s(n),[]).join("&"):l(n,t)+"="+l(r,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,s]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:g(f(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:u(s,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const s=d(e.url).split("?")[0]||"",r=t.extract(e.url),i=t.parse(r,{sort:!1}),o=Object.assign(i,e.query);let c=t.stringify(o,n);c&&(c=`?${c}`);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u=`#${n[a]?l(e.fragmentIdentifier,n):e.fragmentIdentifier}`),`${s}${c}${u}`},t.pick=(e,n,s)=>{s=Object.assign({parseFragmentIdentifier:!0,[a]:!1},s);const{url:r,query:i,fragmentIdentifier:c}=t.parseUrl(e,s);return t.stringifyUrl({url:r,query:o(i,n),fragmentIdentifier:c},s)},t.exclude=(e,n,s)=>{const r=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,r,s)}},2873:(e,t)=>{"use strict";function n(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function s(e){const t=n(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=n,t.getFromWindowOrThrow=s,t.getDocumentOrThrow=function(){return s("document")},t.getDocument=function(){return n("document")},t.getNavigatorOrThrow=function(){return s("navigator")},t.getNavigator=function(){return n("navigator")},t.getLocationOrThrow=function(){return s("location")},t.getLocation=function(){return n("location")},t.getCryptoOrThrow=function(){return s("crypto")},t.getCrypto=function(){return n("crypto")},t.getLocalStorageOrThrow=function(){return s("localStorage")},t.getLocalStorage=function(){return n("localStorage")}},5755:(e,t,n)=>{"use strict";t.D=void 0;const s=n(2873);t.D=function(){let e,t;try{e=s.getDocumentOrThrow(),t=s.getLocationOrThrow()}catch(e){return null}function n(...t){const n=e.getElementsByTagName("meta");for(let e=0;e<n.length;e++){const s=n[e],r=["itemprop","property","name"].map((e=>s.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(r.length&&r){const e=s.getAttribute("content");if(e)return e}}return""}const r=function(){let t=n("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:n("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const n=e.getElementsByTagName("link"),s=[];for(let e=0;e<n.length;e++){const r=n[e],i=r.getAttribute("rel");if(i&&i.toLowerCase().indexOf("icon")>-1){const e=r.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let n=t.protocol+"//"+t.host;if(0===e.indexOf("/"))n+=e;else{const s=t.pathname.split("/");s.pop();n+=s.join("/")+"/"+e}s.push(n)}else if(0===e.indexOf("//")){const n=t.protocol+e;s.push(n)}else s.push(e)}}return s}(),name:r}}},7484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,s="millisecond",r="second",i="minute",o="hour",a="day",c="week",l="month",u="quarter",h="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(n)+e},b={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),s=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+y(s,2,"0")+":"+y(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var s=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(s,l),i=n-r<0,o=t.clone().add(s+(i?-1:1),l);return+(-(s+(n-r)/(i?r-o:o-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:h,w:c,d:a,D:d,h:o,m:i,s:r,ms:s,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",v={};v[w]=m;var A="$isDayjsObject",_=function(e){return e instanceof C||!(!e||!e[A])},k=function e(t,n,s){var r;if(!t)return w;if("string"==typeof t){var i=t.toLowerCase();v[i]&&(r=i),n&&(v[i]=n,r=i);var o=t.split("-");if(!r&&o.length>1)return e(o[0])}else{var a=t.name;v[a]=t,r=a}return!s&&r&&(w=r),r||!s&&w},E=function(e,t){if(_(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new C(n)},x=b;x.l=k,x.i=_,x.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function m(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[A]=!0}var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(p);if(s){var r=s[2]-1||0,i=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return x},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return E(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<E(e)},y.$g=function(e,t,n){return x.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,s=!!x.u(t)||t,u=x.p(e),f=function(e,t){var r=x.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return s?r:r.endOf(a)},p=function(e,t){return x.w(n.toDate()[e].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,y=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case h:return s?f(1,0):f(31,11);case l:return s?f(1,m):f(0,m+1);case c:var w=this.$locale().weekStart||0,v=(g<w?g+7:g)-w;return f(s?y-v:y+(6-v),m);case a:case d:return p(b+"Hours",0);case o:return p(b+"Minutes",1);case i:return p(b+"Seconds",2);case r:return p(b+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,c=x.p(e),u="set"+(this.$u?"UTC":""),f=(n={},n[a]=u+"Date",n[d]=u+"Date",n[l]=u+"Month",n[h]=u+"FullYear",n[o]=u+"Hours",n[i]=u+"Minutes",n[r]=u+"Seconds",n[s]=u+"Milliseconds",n)[c],p=c===a?this.$D+(t-this.$W):t;if(c===l||c===h){var g=this.clone().set(d,1);g.$d[f](p),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[x.p(e)]()},y.add=function(s,u){var d,f=this;s=Number(s);var p=x.p(u),g=function(e){var t=E(f);return x.w(t.date(t.date()+Math.round(e*s)),f)};if(p===l)return this.set(l,this.$M+s);if(p===h)return this.set(h,this.$y+s);if(p===a)return g(1);if(p===c)return g(7);var m=(d={},d[i]=t,d[o]=n,d[r]=e,d)[p]||1,y=this.$d.getTime()+s*m;return x.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var s=e||"YYYY-MM-DDTHH:mm:ssZ",r=x.z(this),i=this.$H,o=this.$m,a=this.$M,c=n.weekdays,l=n.months,u=n.meridiem,h=function(e,n,r,i){return e&&(e[n]||e(t,s))||r[n].slice(0,i)},d=function(e){return x.s(i%12||12,e,"0")},p=u||function(e,t,n){var s=e<12?"AM":"PM";return n?s.toLowerCase():s};return s.replace(g,(function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return x.s(t.$y,4,"0");case"M":return a+1;case"MM":return x.s(a+1,2,"0");case"MMM":return h(n.monthsShort,a,l,3);case"MMMM":return h(l,a);case"D":return t.$D;case"DD":return x.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(n.weekdaysMin,t.$W,c,2);case"ddd":return h(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(i);case"HH":return x.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return p(i,o,!0);case"A":return p(i,o,!1);case"m":return String(o);case"mm":return x.s(o,2,"0");case"s":return String(t.$s);case"ss":return x.s(t.$s,2,"0");case"SSS":return x.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(s,d,f){var p,g=this,m=x.p(d),y=E(s),b=(y.utcOffset()-this.utcOffset())*t,w=this-y,v=function(){return x.m(g,y)};switch(m){case h:p=v()/12;break;case l:p=v();break;case u:p=v()/3;break;case c:p=(w-b)/6048e5;break;case a:p=(w-b)/864e5;break;case o:p=w/n;break;case i:p=w/t;break;case r:p=w/e;break;default:p=w}return f?p:x.a(p)},y.daysInMonth=function(){return this.endOf(l).$D},y.$locale=function(){return v[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),s=k(e,t,!0);return s&&(n.$L=s),n},y.clone=function(){return x.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),S=C.prototype;return E.prototype=S,[["$ms",s],["$s",r],["$m",i],["$H",o],["$W",a],["$M",l],["$y",h],["$D",d]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,C,E),e.$i=!0),E},E.locale=k,E.isDayjs=_,E.unix=function(e){return E(1e3*e)},E.en=v[w],E.Ls=v,E.p={},E}()},4110:function(e){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var s=t.prototype,r={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,n,r){return s.fromToBase(e,t,n,r)}n.en.relativeTime=r,s.fromToBase=function(t,s,i,o,a){for(var c,l,u,h=i.$locale().relativeTime||r,d=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=d.length,p=0;p<f;p+=1){var g=d[p];g.d&&(c=o?n(t).diff(i,g.d,!0):i.diff(t,g.d,!0));var m=(e.rounding||Math.round)(Math.abs(c));if(u=c>0,m<=g.r||!g.r){m<=1&&p>0&&(g=d[p-1]);var y=h[g.l];a&&(m=a(""+m)),l="string"==typeof y?y.replace("%d",m):y(m,s,g.l,u);break}}if(s)return l;var b=u?h.future:h.past;return"function"==typeof b?b(l):b.replace("%s",l)},s.to=function(e,t){return i(e,t,this,!0)},s.from=function(e,t){return i(e,t,this)};var o=function(e){return e.$u?n.utc():n()};s.toNow=function(e){return this.to(o(this),e)},s.fromNow=function(e){return this.from(o(this),e)}}}()},4020:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),s=new RegExp("("+t+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],r(n),r(s))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n)||[],s=1;s<t.length;s++)t=(e=r(t,s).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=s.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=s.exec(e)}t["%C2"]="";for(var o=Object.keys(t),a=0;a<o.length;a++){var c=o[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function s(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,s,i,o){if("function"!=typeof s)throw new TypeError("The listener must be a function");var a=new r(s,i||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,s,r=[];if(0===this._eventsCount)return r;for(s in e=this._events)t.call(e,s)&&r.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,i=s.length,o=new Array(i);r<i;r++)o[r]=s[r].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,r,i,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,s),!0;case 4:return u.fn.call(u.context,t,s,r),!0;case 5:return u.fn.call(u.context,t,s,r,i),!0;case 6:return u.fn.call(u.context,t,s,r,i,o),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,s);break;case 4:u[l].fn.call(u[l].context,t,s,r);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,s,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||s&&a.context!==s||o(this,i);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||r&&!a[c].once||s&&a[c].context!==s)&&l.push(a[c]);l.length?this._events[i]=1===l.length?l[0]:l:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},2806:e=>{"use strict";e.exports=function(e,t){for(var n={},s=Object.keys(e),r=Array.isArray(t),i=0;i<s.length;i++){var o=s[i],a=e[o];(r?-1!==t.indexOf(o):t(o,a,e))&&(n[o]=a)}return n}},4155:e=>{var t,n,s=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var a,c=[],l=!1,u=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=o(h);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},2478:(e,t,n)=>{"use strict";n.d(t,{jc:()=>c,o5:()=>a});Symbol();const s=Symbol();const r=Object.getPrototypeOf,i=new WeakMap,o=e=>e&&(i.has(e)?i.get(e):r(e)===Object.prototype||r(e)===Array.prototype),a=e=>o(e)&&e[s]||null,c=(e,t=!0)=>{i.set(e,t)}},500:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},610:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},3512:(e,t,n)=>{"use strict";n.d(t,{Z:()=>pS});class s{static parseWithUndefined(e){if(null!==e)return JSON.parse(e,((e,t)=>null===t?void 0:t))}}class r{name;constructor(e){this.name=e}selectStorage(e){return e?localStorage:sessionStorage}getKey(e){return`${this.name}/${e}`}set(e,t,n=!1){this.selectStorage(!n).removeItem(this.getKey(e));const s=this.selectStorage(n);try{s.setItem(this.getKey(e),JSON.stringify(t))}catch(e){if(!(e instanceof DOMException)||22!==e.code&&1014!==e.code&&"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name)throw e;s.clear(),location.reload()}}get(e,t){let n=sessionStorage.getItem(this.getKey(e))||localStorage.getItem(this.getKey(e));return null===n?t:s.parseWithUndefined(n)}getAll(){const e={};for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=s.parseWithUndefined(sessionStorage.getItem(n)))}for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=s.parseWithUndefined(localStorage.getItem(n)))}return e}checkPermanently(e){return null!==localStorage.getItem(this.getKey(e))}delete(e){sessionStorage.removeItem(this.getKey(e)),localStorage.removeItem(this.getKey(e))}clear(){for(let e=0;e<sessionStorage.length;e++){const t=sessionStorage.key(e);t&&t.startsWith(this.name)&&sessionStorage.removeItem(t)}for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(this.name)&&localStorage.removeItem(t)}}}class i{static pull(e,...t){const n=new Set(t);for(let t=e.length-1;t>=0;t--)n.has(e[t])&&e.splice(t,1)}static insert(e,t,n){e.splice(t,0,n)}static shuffle(e){let t=e.length;for(;0!==t;){const n=Math.floor(Math.random()*t);t-=1,[e[t],e[n]]=[e[n],e[t]]}return e}static checkSame(e,t){if(e.length!==t.length)return!1;const n=new Set(t);for(const t of e)if(!n.has(t))return!1;return!0}}class o{static NEXT_ID=0;id=o.NEXT_ID++;allowedEvents=["delete"];eventMap={};delegateEvents=[];deleted=!1;addAllowedEvents(...e){this.allowedEvents.push(...e)}addEventHandler(e,t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);void 0===this.eventMap[e]&&(this.eventMap[e]=[]),this.eventMap[e].push(t)}removeDelegateEvents(e){for(const[t,n]of Object.entries(e.events))for(const s of n)e.delegate.off(t,s);i.pull(this.delegateEvents,e)}on(e,t){if(Array.isArray(e))for(const n of e)this.addEventHandler(n,t);else this.addEventHandler(e,t);return this}once(e,t){const n=(...s)=>{this.off(e,n),t(...s)};this.addEventHandler(e,n)}off(e,t){void 0!==this.eventMap?.[e]&&(i.pull(this.eventMap[e],t),0===this.eventMap[e].length&&delete this.eventMap[e])}async fireEvent(e,...t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);const n=[],s=[],r=this.eventMap[e];if(void 0!==r)for(const e of[...r])if(r.includes(e)){const r=e(...t);r instanceof Promise?s.push(r):n.push(r)}return n.concat(await Promise.all(s))}onDelegate(e,t,n){let s=this.delegateEvents.find((t=>t.delegate===e));void 0===s&&(s={delegate:e,events:{}},this.delegateEvents.push(s)),"string"==typeof t&&(t=[t]);for(const r of t)void 0===s.events[r]&&(s.events[r]=[]),s.events[r].push(n),e.on(r,n)}offDelegate(e){const t=this.delegateEvents.find((t=>t.delegate===e));void 0!==t&&this.removeDelegateEvents(t)}offAll(){this.eventMap={};for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=[]}delete(){for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=void 0,this.fireEvent("delete"),this.allowedEvents=void 0,this.eventMap=void 0,this.deleted=!0}}class a extends o{parent;children=[];append(...e){for(const t of e)void 0!==t&&t.appendTo(this);return this}appendTo(e,t){return this.parent===e&&void 0!==t&&this.parent.children.indexOf(this)<t&&(t-=1),this.removeFromParent(),void 0!==t&&t<e.children.length?e.children.splice(t,0,this):e.children.push(this),this.parent=e,this}removeFromParent(){void 0!==this.parent&&(i.pull(this.parent.children,this),this.parent=void 0)}empty(){for(;this.children.length>0;)this.children[0].delete();return this}checkChild(e){const t=[...this.children];for(;t.length>0;){const n=t.pop();if(n===e)return!0;t.push(...n.children)}return!1}delete(){super.delete(),this.removeFromParent(),this.empty(),this.children=void 0}}class c extends a{static NUMBER_STYLE_KEY=["zIndex","opacity","flexGrow","flexShrink","gridGap","order","zoom"];static keyframesCount=0;static createElement(e){let t;const n=e.indexOf("#");if(-1!==n){t=e.substring(n+1),e=e.substring(0,n);const s=t.indexOf(".");-1!==s&&(e+=t.substring(s),t=t.substring(0,s))}let s;const r=e.indexOf(".");-1!==r&&(s=e.substring(r+1).replace(/\./g," "),e=e.substring(0,r)),""===e&&(e="div");const i=document.createElement(e);return void 0!==t&&(i.id=t),void 0!==s&&(i.className=s),i}children=[];domEventMap={};windowEventMap={};domElement;constructor(e,...t){super(),this.addAllowedEvents("visible"),e instanceof HTMLElement?this.domElement=e:this.domElement=c.createElement(e),this.append(...t)}style(e){for(const[t,n]of Object.entries(e))void 0===n?this.domElement.style[t]=null:"number"==typeof n&&!0!==c.NUMBER_STYLE_KEY.includes(t)?this.domElement.style[t]=`${n}px`:this.domElement.style[t]=n;return this}get rect(){return this.domElement.getBoundingClientRect()}get innerScrollPosition(){let e=0,t=0;if(this.domElement!==document.body){let n=this.domElement.parentNode;for(;n!==document.body&&null!==n;)n instanceof HTMLElement&&(e+=n.scrollLeft,t+=n.scrollTop),n=n.parentNode}return{left:e,top:t}}onDom(e,t){void 0===this.domEventMap[e]&&(this.domEventMap[e]=[]);const n=e=>t(e,this);this.domEventMap[e].push({eventHandler:t,domEventHandler:n}),this.domElement.addEventListener(e,n)}onWindow(e,t){void 0===this.windowEventMap[e]&&(this.windowEventMap[e]=[]);const n=e=>t(e,this);this.windowEventMap[e].push({eventHandler:t,domEventHandler:n}),window.addEventListener(e,n)}offDom(e,t){const n=this.domEventMap[e];if(void 0!==n){const s=n.find((e=>e.eventHandler===t));void 0!==s&&(this.domElement.removeEventListener(e,s.domEventHandler),i.pull(n,s),0===n.length&&delete this.domEventMap[e])}}fireDomEvent(e){this.domElement.dispatchEvent(new Event(e))}appendText(e){if("TEXTAREA"===this.domElement.tagName)this.domElement.append(e);else{const t=new DocumentFragment,n=e.split("\n");for(const[e,s]of n.entries())e>0&&t.append(document.createElement("br")),t.append(s);this.domElement.append(t)}return this}set text(e){this.empty().appendText(e)}append(...e){for(const t of e)if(void 0!==t)if("string"==typeof t)this.appendText(t);else if(t instanceof c)t.appendTo(this);else for(const[e,n]of Object.entries(t))"function"==typeof n?this.onDom(e,n):"style"===e&&"object"==typeof n?this.style(n):void 0===n?this.domElement.removeAttribute(e):this.domElement.setAttribute(e,String(n));return this}checkVisible(){return void 0!==this.parent&&(this.parent.domElement===document.body||this.parent.checkVisible())}fireVisible(){this.fireEvent("visible");for(const e of this.children)e.fireVisible()}appendTo(e,t){void 0!==t&&t<e.children.length?e.domElement.insertBefore(this.domElement,e.children[t].domElement):e.domElement.append(this.domElement);const n=super.appendTo(e,t);return!0===this.checkVisible()&&this.fireVisible(),n}empty(){for(super.empty();this.domElement.firstChild;)this.domElement.removeChild(this.domElement.firstChild);return this}addClass(e){return this.domElement.classList.add(e),this}deleteClass(e){this.domElement.classList.remove(e)}hasClass(e){return this.domElement.classList.contains(e)}toggleClass(e){this.domElement.classList.toggle(e)}clone(){return new c(this.domElement.cloneNode(!0))}delete(){this.domElement.remove(),this.domEventMap=void 0;for(const[e,t]of Object.entries(this.windowEventMap))for(const n of t)window.removeEventListener(e,n.domEventHandler);this.windowEventMap=void 0,super.delete(),this.domElement=void 0}animate({keyframes:e,duration:t=.5,timingFunction:n="ease",delay:s=0,iterationCount:r=1,direction:i="normal",onEnd:o=(()=>{})}){const a="__KEYFRAMES_"+c.keyframesCount++;let l="",u={};for(const[t,n]of Object.entries(e)){l+=`${t}{`;for(let[e,t]of Object.entries(n))"number"!=typeof t||["zIndex","opacity"].includes(e)||(t+="px"),l+=`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}:${t};`;l+="}","from"===t||"0%"===t?u={...u,...n}:"to"!==t&&"100%"!==t||(u={...u,...n})}const h=document.createElement("style");h.setAttribute("type","text/css"),h.appendChild(document.createTextNode(`@keyframes ${a}{${l}}`)),document.head.appendChild(h),u={...u,animation:`${a} ${t}s ${n} ${s}s ${r} ${i}`},this.style(u),1===r&&setTimeout((()=>{this.deleted||o(),h.remove()}),1e3*t)}}const l=new class extends c{constructor(){super(document.body)}};const u=new class{paramRegex=/{(.+)}/;match(e,t,n){for(let s=0;s<e.length;s++){const r=t[s];if(void 0===r)return!1;let i=e[s];if("**"===r)return!0;const o=this.paramRegex.exec(r);if(!r.startsWith("{")){const e=r.indexOf("{");if(i.substring(0,e)!==r.substring(0,e))return!1;i=i.substring(e)}if(i&&o)n&&(n[o[1]]=i);else if("*"!==r&&r!==i)return!1;if(s===e.length-1&&s<t.length-1&&""!==t[t.length-1])return!1}return!0}parse(e,t,n){const s=e.split("/"),r=t.split("/");return this.match(s,r,n)}},h=e=>decodeURIComponent(e.endsWith("/")?e.slice(0,-1).substring(1):e.substring(1)),d=(e,t,n,s)=>t.some((t=>u.match(e,t.split("/"),s)))&&!n.some((t=>u.match(e,t.split("/"))));const f=new class extends o{routes=[];redirects=[];openingViews=[];forwarding=!1;constructor(){super(),this.addAllowedEvents("go"),window.addEventListener("popstate",(e=>{if(!0===this.forwarding)this.forwarding=!1;else{const t=l.children.findLast((e=>e.hasClass("popup-background")));t?(this.forwarding=!0,window.history.forward(),t.delete()):this.check(e.state??void 0)}for(const e of l.children)e.hasClass("dropdown-menu")&&e.delete()}))}closeAllPopup(){for(const e of l.children)e.hasClass("popup-background")&&e.delete()}check(e){const t=h(location.pathname),n=t.split("/");let s=!1;const r=[];for(const{patterns:t,excludes:s,to:r}of this.redirects){const i=e?{...e}:{};if(d(n,t,s,i)){let e=r;for(const[t,n]of Object.entries(i))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");return void this.goNoHistory(`/${e}`)}}for(const{patterns:o,excludes:a,viewType:c}of this.routes){const l=e?{...e}:{},u=this.openingViews.find((e=>e instanceof c));d(n,o,a,l)?void 0===u?(this.openingViews.push(new c(l,t)),s=!0):u.changeParams(l,t):void 0!==u&&(r.push(u),i.pull(this.openingViews,u))}for(const e of r.reverse())e.close();!0===s&&this.fireEvent("go")}route(e,t,n=[]){"string"==typeof e&&(e=[e]),this.routes.push({patterns:e,excludes:n,viewType:t});const s=h(location.pathname),r=s.split("/"),i={};d(r,e,n,i)&&this.openingViews.push(new t(i,s))}redirect(e,t,n=[]){"string"==typeof e&&(e=[e]),this.redirects.push({patterns:e,excludes:n,to:t});const s=h(location.pathname).split("/"),r={};if(d(s,e,n,r)){let e=t;for(const[t,n]of Object.entries(r))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");this.goNoHistory(`/${e}`)}}go(e,t){location.pathname!==e&&(history.pushState(void 0,"",e),this.check(t),window.scrollTo(0,0))}goNoHistory(e,t){location.pathname!==e&&(history.replaceState(void 0,"",e),this.check(t),window.scrollTo(0,0))}waitAndGo(e,t){setTimeout((()=>this.go(e,t)))}refresh(){for(const e of this.openingViews.reverse())e.close();this.openingViews=[];const e=h(location.pathname),t=e.split("/");for(const{patterns:n,excludes:s,viewType:r}of this.routes){const i={};d(t,n,s,i)&&this.openingViews.push(new r(i,e))}}};const p=new class{store=new r("__BROWSER_INFO_STORE");normalizeLanguage(e){return-1!==e.indexOf("-")&&"zh-TC"!==e&&"zh-SC"!==e&&(e=e.substring(0,e.indexOf("-"))),e}get language(){let e=this.store.get("lang")||navigator.language;return this.normalizeLanguage(e)}set language(e){this.store.set("lang",this.normalizeLanguage(e))}changeLanguage(e){if(!e)throw new Error("Invalid language code.");this.language=e,f.refresh()}get isPhoneSize(){return window.innerWidth<=859}};class g extends c{constructor(e,...t){super(e+".component"),this.append(...t)}}const m=(e,...t)=>new c(c.createElement(e),...t);class y extends g{constructor(e){super("ul.dropdown-menu");for(const t of e.items)this.append(m("li",m("button",t.title,{click:e=>{e.stopPropagation(),t.click(),this.delete()}})));this.style({left:e.left,top:e.top}),l.append(this),window.addEventListener("click",this.windowClickHandler)}windowClickHandler=e=>{this.domElement.contains(e.target)||this.delete()};delete(){window.removeEventListener("click",this.windowClickHandler),super.delete()}}n(1074);class b extends g{constructor(e){super("span.material-icon.material-symbols-outlined"),this.text=e}}class w extends c{constructor(e){super(".popup-background"),this.onDom("click",(t=>{!0===e.barrierDismissible&&t.target===this.domElement&&this.delete()})),l.append(this)}}class v extends g{titleContainer;titleText;constructor(e){super("button"+(void 0!==e.type?"."+e.type:".contained")+(e.tag??"")),void 0!==e.icon&&this.append(e.icon),void 0!==e.title&&this.append(this.titleContainer=m("span.title",this.titleText=e.title)),void 0!==e.href&&(this.domElement.href=e.href,this.domElement.target="_blank"),!0===e.disabled&&this.disable(),void 0!==e.click&&this.onDom("click",(t=>{!0!==this.hasClass("disabled")&&e.click(t,this)}))}set title(e){void 0!==this.titleContainer?this.titleContainer.text=e:this.append(this.titleContainer=m("span.title",e)),this.titleText=e}disable(){return this.addClass("disabled"),this}enable(){return this.deleteClass("disabled"),this}}var A;!function(e){e.Contained="contained",e.Outlined="outlined",e.Text="text"}(A||(A={}));const _=A;class k extends g{timeoutId;constructor(e){super(".snackbar"),this.append(m("main",m("p",e.message),e.action?new v({tag:".action",type:_.Text,title:e.action.title,click:()=>{e.action?.click(),this.delete()}}):void 0,m("button.close",new b("close"),{click:()=>this.delete()}))),l.append(this),this.timeoutId=setTimeout((()=>this.delete()),5e3)}delete(){clearTimeout(this.timeoutId),super.delete()}}class E extends g{constructor(e){super(".splash-screen"),this.append(e),this.appendTo(l)}}class x extends w{content;constructor(e){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.alert",m("header",m("h1",e.title)),m("main",m("p",e.message)),m("footer",new v({type:_.Text,tag:".confirm-button",title:e.confirmTitle??"OK",click:()=>this.delete()}))))}}class C extends w{content;constructor(e,t,n){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.confirm",m("header",m("h1",e.title)),m("main",m("p",e.message)),m("footer",new v({type:_.Text,tag:".cancel-button",click:()=>{n&&n(),this.delete()},title:e.cancelTitle??"Cancel"}),new v({type:_.Contained,tag:".confirm-button",click:async(n,s)=>{s.domElement.setAttribute("disabled","disabled"),e.loadingTitle&&(s.text=e.loadingTitle),await t(),this.delete()},title:e.confirmTitle??"Confirm"}))))}}class S extends w{content;constructor(e){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.error-alert",m("header",m("h1",new b("error"),e.title)),m("main",m("p",e.message)),m("footer",new v({type:_.Text,tag:".confirm-button",title:e.confirmTitle??"OK",click:()=>this.delete()}))))}}class P extends g{_id;constructor(e,t){super("li.tab"),this._id=e,this.append(...Array.isArray(t)?t:[t])}set active(e){e?this.addClass("active"):this.deleteClass("active")}}class T extends g{children=[];store;constructor(e,t){super("ul.tabs"),this.addAllowedEvents("select"),this.store=new r(`tabs-${e}`);for(const e of t){const t=new P(e.id,e.label);t.onDom("click",(()=>this.select(e.id))),this.append(t)}}init(){if(this.store.get("selected"))this.select(this.store.get("selected"));else{const e=this.children[0]?._id;e&&this.select(e)}}select(e){for(const t of this.children)t.active=t._id===e;this.store.set("selected",e,!0),this.fireEvent("select",e)}}function I(e){return null==e}var O=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},N=function(e,t){var n,s,r,i;if(t)for(n=0,s=(i=Object.keys(t)).length;n<s;n+=1)e[r=i[n]]=t[r];return e},j={isNothing:I,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:I(e)?[]:[e]},repeat:function(e,t){var n,s="";for(n=0;n<t;n+=1)s+=e;return s},isNegativeZero:O,extend:N};function L(e,t){var n="",s=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),s+" "+n):s}function U(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=L(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}U.prototype=Object.create(Error.prototype),U.prototype.constructor=U,U.prototype.toString=function(e){return this.name+": "+L(this,e)};var R=U;function D(e,t,n,s,r){var i="",o="",a=Math.floor(r/2)-1;return s-t>a&&(t=s-a+(i=" ... ").length),n-s>a&&(n=s+a-(o=" ...").length),{str:i+e.slice(t,n).replace(/\t/g,"")+o,pos:s-t+i.length}}function M(e,t){return j.repeat(" ",t-e.length)+e}var B=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,s=/\r?\n|\r|\0/g,r=[0],i=[],o=-1;n=s.exec(e.buffer);)i.push(n.index),r.push(n.index+n[0].length),e.position<=n.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a,c,l="",u=Math.min(e.line+t.linesAfter,i.length).toString().length,h=t.maxLength-(t.indent+u+3);for(a=1;a<=t.linesBefore&&!(o-a<0);a++)c=D(e.buffer,r[o-a],i[o-a],e.position-(r[o]-r[o-a]),h),l=j.repeat(" ",t.indent)+M((e.line-a+1).toString(),u)+" | "+c.str+"\n"+l;for(c=D(e.buffer,r[o],i[o],e.position,h),l+=j.repeat(" ",t.indent)+M((e.line+1).toString(),u)+" | "+c.str+"\n",l+=j.repeat("-",t.indent+u+3+c.pos)+"^\n",a=1;a<=t.linesAfter&&!(o+a>=i.length);a++)c=D(e.buffer,r[o+a],i[o+a],e.position-(r[o]-r[o+a]),h),l+=j.repeat(" ",t.indent)+M((e.line+a+1).toString(),u)+" | "+c.str+"\n";return l.replace(/\n$/,"")},F=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$=["scalar","sequence","mapping"];var G=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===F.indexOf(t))throw new R('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===$.indexOf(this.kind))throw new R('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function H(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,s){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=s)})),n[t]=e})),n}function z(e){return this.extend(e)}z.prototype.extend=function(e){var t=[],n=[];if(e instanceof G)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new R("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof G))throw new R("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new R("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new R("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof G))throw new R("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var s=Object.create(z.prototype);return s.implicit=(this.implicit||[]).concat(t),s.explicit=(this.explicit||[]).concat(n),s.compiledImplicit=H(s,"implicit"),s.compiledExplicit=H(s,"explicit"),s.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function s(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(s);return n}(s.compiledImplicit,s.compiledExplicit),s};var W=z,q=new G("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),K=new G("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),V=new G("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),J=new W({explicit:[q,K,V]});var Q=new G("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var Y=new G("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function X(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Z(e){return 48<=e&&e<=55}function ee(e){return 48<=e&&e<=57}var te=new G("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,s=0,r=!1;if(!n)return!1;if("-"!==(t=e[s])&&"+"!==t||(t=e[++s]),"0"===t){if(s+1===n)return!0;if("b"===(t=e[++s])){for(s++;s<n;s++)if("_"!==(t=e[s])){if("0"!==t&&"1"!==t)return!1;r=!0}return r&&"_"!==t}if("x"===t){for(s++;s<n;s++)if("_"!==(t=e[s])){if(!X(e.charCodeAt(s)))return!1;r=!0}return r&&"_"!==t}if("o"===t){for(s++;s<n;s++)if("_"!==(t=e[s])){if(!Z(e.charCodeAt(s)))return!1;r=!0}return r&&"_"!==t}}if("_"===t)return!1;for(;s<n;s++)if("_"!==(t=e[s])){if(!ee(e.charCodeAt(s)))return!1;r=!0}return!(!r||"_"===t)},construct:function(e){var t,n=e,s=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(s=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return s*parseInt(n.slice(2),2);if("x"===n[1])return s*parseInt(n.slice(2),16);if("o"===n[1])return s*parseInt(n.slice(2),8)}return s*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!j.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ne=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var se=/^[-+]?[0-9]+e/;var re=new G("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!ne.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||j.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(j.isNegativeZero(e))return"-0.0";return n=e.toString(10),se.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),ie=J.extend({implicit:[Q,Y,te,re]}),oe=ie,ae=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ce=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var le=new G("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==ae.exec(e)||null!==ce.exec(e))},construct:function(e){var t,n,s,r,i,o,a,c,l=0,u=null;if(null===(t=ae.exec(e))&&(t=ce.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],s=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,s,r));if(i=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),c=new Date(Date.UTC(n,s,r,i,o,a,l)),u&&c.setTime(c.getTime()-u),c},instanceOf:Date,represent:function(e){return e.toISOString()}});var ue=new G("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var de=new G("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,s=0,r=e.length,i=he;for(n=0;n<r;n++)if(!((t=i.indexOf(e.charAt(n)))>64)){if(t<0)return!1;s+=6}return s%8==0},construct:function(e){var t,n,s=e.replace(/[\r\n=]/g,""),r=s.length,i=he,o=0,a=[];for(t=0;t<r;t++)t%4==0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|i.indexOf(s.charAt(t));return 0===(n=r%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18===n?(a.push(o>>10&255),a.push(o>>2&255)):12===n&&a.push(o>>4&255),new Uint8Array(a)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,s="",r=0,i=e.length,o=he;for(t=0;t<i;t++)t%3==0&&t&&(s+=o[r>>18&63],s+=o[r>>12&63],s+=o[r>>6&63],s+=o[63&r]),r=(r<<8)+e[t];return 0===(n=i%3)?(s+=o[r>>18&63],s+=o[r>>12&63],s+=o[r>>6&63],s+=o[63&r]):2===n?(s+=o[r>>10&63],s+=o[r>>4&63],s+=o[r<<2&63],s+=o[64]):1===n&&(s+=o[r>>2&63],s+=o[r<<4&63],s+=o[64],s+=o[64]),s}}),fe=Object.prototype.hasOwnProperty,pe=Object.prototype.toString;var ge=new G("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,s,r,i,o=[],a=e;for(t=0,n=a.length;t<n;t+=1){if(s=a[t],i=!1,"[object Object]"!==pe.call(s))return!1;for(r in s)if(fe.call(s,r)){if(i)return!1;i=!0}if(!i)return!1;if(-1!==o.indexOf(r))return!1;o.push(r)}return!0},construct:function(e){return null!==e?e:[]}}),me=Object.prototype.toString;var ye=new G("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,s,r,i,o=e;for(i=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(s=o[t],"[object Object]"!==me.call(s))return!1;if(1!==(r=Object.keys(s)).length)return!1;i[t]=[r[0],s[r[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,s,r,i,o=e;for(i=new Array(o.length),t=0,n=o.length;t<n;t+=1)s=o[t],r=Object.keys(s),i[t]=[r[0],s[r[0]]];return i}}),be=Object.prototype.hasOwnProperty;var we=new G("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(be.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),ve=oe.extend({implicit:[le,ue],explicit:[de,ge,ye,we]}),Ae=Object.prototype.hasOwnProperty,_e=1,ke=2,Ee=3,xe=4,Ce=1,Se=2,Pe=3,Te=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ie=/[\x85\u2028\u2029]/,Oe=/[,\[\]\{\}]/,Ne=/^(?:!|!!|![a-z\-]+!)$/i,je=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Le(e){return Object.prototype.toString.call(e)}function Ue(e){return 10===e||13===e}function Re(e){return 9===e||32===e}function De(e){return 9===e||32===e||10===e||13===e}function Me(e){return 44===e||91===e||93===e||123===e||125===e}function Be(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Fe(e){return 120===e?2:117===e?4:85===e?8:0}function $e(e){return 48<=e&&e<=57?e-48:-1}function Ge(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function He(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var ze=new Array(256),We=new Array(256),qe=0;qe<256;qe++)ze[qe]=Ge(qe)?1:0,We[qe]=Ge(qe);function Ke(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||ve,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ve(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=B(n),new R(t,n)}function Je(e,t){throw Ve(e,t)}function Qe(e,t){e.onWarning&&e.onWarning.call(null,Ve(e,t))}var Ye={YAML:function(e,t,n){var s,r,i;null!==e.version&&Je(e,"duplication of %YAML directive"),1!==n.length&&Je(e,"YAML directive accepts exactly one argument"),null===(s=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Je(e,"ill-formed argument of the YAML directive"),r=parseInt(s[1],10),i=parseInt(s[2],10),1!==r&&Je(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&Qe(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var s,r;2!==n.length&&Je(e,"TAG directive accepts exactly two arguments"),s=n[0],r=n[1],Ne.test(s)||Je(e,"ill-formed tag handle (first argument) of the TAG directive"),Ae.call(e.tagMap,s)&&Je(e,'there is a previously declared suffix for "'+s+'" tag handle'),je.test(r)||Je(e,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch(t){Je(e,"tag prefix is malformed: "+r)}e.tagMap[s]=r}};function Xe(e,t,n,s){var r,i,o,a;if(t<n){if(a=e.input.slice(t,n),s)for(r=0,i=a.length;r<i;r+=1)9===(o=a.charCodeAt(r))||32<=o&&o<=1114111||Je(e,"expected valid JSON character");else Te.test(a)&&Je(e,"the stream contains non-printable characters");e.result+=a}}function Ze(e,t,n,s){var r,i,o,a;for(j.isObject(n)||Je(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,a=(r=Object.keys(n)).length;o<a;o+=1)i=r[o],Ae.call(t,i)||(t[i]=n[i],s[i]=!0)}function et(e,t,n,s,r,i,o,a,c){var l,u;if(Array.isArray(r))for(l=0,u=(r=Array.prototype.slice.call(r)).length;l<u;l+=1)Array.isArray(r[l])&&Je(e,"nested arrays are not supported inside keys"),"object"==typeof r&&"[object Object]"===Le(r[l])&&(r[l]="[object Object]");if("object"==typeof r&&"[object Object]"===Le(r)&&(r="[object Object]"),r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===s)if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)Ze(e,t,i[l],n);else Ze(e,t,i,n);else e.json||Ae.call(n,r)||!Ae.call(t,r)||(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,Je(e,"duplicated mapping key")),"__proto__"===r?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[r]=i,delete n[r];return t}function tt(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):Je(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function nt(e,t,n){for(var s=0,r=e.input.charCodeAt(e.position);0!==r;){for(;Re(r);)9===r&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&35===r)do{r=e.input.charCodeAt(++e.position)}while(10!==r&&13!==r&&0!==r);if(!Ue(r))break;for(tt(e),r=e.input.charCodeAt(e.position),s++,e.lineIndent=0;32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position)}return-1!==n&&0!==s&&e.lineIndent<n&&Qe(e,"deficient indentation"),s}function st(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!De(t)))}function rt(e,t){1===t?e.result+=" ":t>1&&(e.result+=j.repeat("\n",t-1))}function it(e,t){var n,s,r=e.tag,i=e.anchor,o=[],a=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),s=e.input.charCodeAt(e.position);0!==s&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,Je(e,"tab characters must not be used in indentation")),45===s)&&De(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,nt(e,!0,-1)&&e.lineIndent<=t)o.push(null),s=e.input.charCodeAt(e.position);else if(n=e.line,ct(e,t,Ee,!1,!0),o.push(e.result),nt(e,!0,-1),s=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==s)Je(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0)}function ot(e){var t,n,s,r,i=!1,o=!1;if(33!==(r=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&Je(e,"duplication of a tag property"),60===(r=e.input.charCodeAt(++e.position))?(i=!0,r=e.input.charCodeAt(++e.position)):33===r?(o=!0,n="!!",r=e.input.charCodeAt(++e.position)):n="!",t=e.position,i){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&62!==r);e.position<e.length?(s=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):Je(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==r&&!De(r);)33===r&&(o?Je(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),Ne.test(n)||Je(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),Oe.test(s)&&Je(e,"tag suffix cannot contain flow indicator characters")}s&&!je.test(s)&&Je(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch(t){Je(e,"tag name is malformed: "+s)}return i?e.tag=s:Ae.call(e.tagMap,n)?e.tag=e.tagMap[n]+s:"!"===n?e.tag="!"+s:"!!"===n?e.tag="tag:yaml.org,2002:"+s:Je(e,'undeclared tag handle "'+n+'"'),!0}function at(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&Je(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!De(n)&&!Me(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Je(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function ct(e,t,n,s,r){var i,o,a,c,l,u,h,d,f,p=1,g=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=o=a=xe===n||Ee===n,s&&nt(e,!0,-1)&&(g=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;ot(e)||at(e);)nt(e,!0,-1)?(g=!0,a=i,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):a=!1;if(a&&(a=g||r),1!==p&&xe!==n||(d=_e===n||ke===n?t:t+1,f=e.position-e.lineStart,1===p?a&&(it(e,f)||function(e,t,n){var s,r,i,o,a,c,l,u=e.tag,h=e.anchor,d={},f=Object.create(null),p=null,g=null,m=null,y=!1,b=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),l=e.input.charCodeAt(e.position);0!==l;){if(y||-1===e.firstTabInLine||(e.position=e.firstTabInLine,Je(e,"tab characters must not be used in indentation")),s=e.input.charCodeAt(e.position+1),i=e.line,63!==l&&58!==l||!De(s)){if(o=e.line,a=e.lineStart,c=e.position,!ct(e,n,ke,!1,!0))break;if(e.line===i){for(l=e.input.charCodeAt(e.position);Re(l);)l=e.input.charCodeAt(++e.position);if(58===l)De(l=e.input.charCodeAt(++e.position))||Je(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(et(e,d,f,p,g,null,o,a,c),p=g=m=null),b=!0,y=!1,r=!1,p=e.tag,g=e.result;else{if(!b)return e.tag=u,e.anchor=h,!0;Je(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=u,e.anchor=h,!0;Je(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(y&&(et(e,d,f,p,g,null,o,a,c),p=g=m=null),b=!0,y=!0,r=!0):y?(y=!1,r=!0):Je(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=s;if((e.line===i||e.lineIndent>t)&&(y&&(o=e.line,a=e.lineStart,c=e.position),ct(e,t,xe,!0,r)&&(y?g=e.result:m=e.result),y||(et(e,d,f,p,g,m,o,a,c),p=g=m=null),nt(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&0!==l)Je(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&et(e,d,f,p,g,null,o,a,c),b&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),b}(e,f,d))||function(e,t){var n,s,r,i,o,a,c,l,u,h,d,f,p=!0,g=e.tag,m=e.anchor,y=Object.create(null);if(91===(f=e.input.charCodeAt(e.position)))o=93,l=!1,i=[];else{if(123!==f)return!1;o=125,l=!0,i={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),f=e.input.charCodeAt(++e.position);0!==f;){if(nt(e,!0,t),(f=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=g,e.anchor=m,e.kind=l?"mapping":"sequence",e.result=i,!0;p?44===f&&Je(e,"expected the node content, but found ','"):Je(e,"missed comma between flow collection entries"),d=null,a=c=!1,63===f&&De(e.input.charCodeAt(e.position+1))&&(a=c=!0,e.position++,nt(e,!0,t)),n=e.line,s=e.lineStart,r=e.position,ct(e,t,_e,!1,!0),h=e.tag,u=e.result,nt(e,!0,t),f=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==f||(a=!0,f=e.input.charCodeAt(++e.position),nt(e,!0,t),ct(e,t,_e,!1,!0),d=e.result),l?et(e,i,y,h,u,d,n,s,r):a?i.push(et(e,null,y,h,u,d,n,s,r)):i.push(u),nt(e,!0,t),44===(f=e.input.charCodeAt(e.position))?(p=!0,f=e.input.charCodeAt(++e.position)):p=!1}Je(e,"unexpected end of the stream within a flow collection")}(e,d)?m=!0:(o&&function(e,t){var n,s,r,i,o=Ce,a=!1,c=!1,l=t,u=0,h=!1;if(124===(i=e.input.charCodeAt(e.position)))s=!1;else{if(62!==i)return!1;s=!0}for(e.kind="scalar",e.result="";0!==i;)if(43===(i=e.input.charCodeAt(++e.position))||45===i)Ce===o?o=43===i?Pe:Se:Je(e,"repeat of a chomping mode identifier");else{if(!((r=$e(i))>=0))break;0===r?Je(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?Je(e,"repeat of an indentation width identifier"):(l=t+r-1,c=!0)}if(Re(i)){do{i=e.input.charCodeAt(++e.position)}while(Re(i));if(35===i)do{i=e.input.charCodeAt(++e.position)}while(!Ue(i)&&0!==i)}for(;0!==i;){for(tt(e),e.lineIndent=0,i=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),Ue(i))u++;else{if(e.lineIndent<l){o===Pe?e.result+=j.repeat("\n",a?1+u:u):o===Ce&&a&&(e.result+="\n");break}for(s?Re(i)?(h=!0,e.result+=j.repeat("\n",a?1+u:u)):h?(h=!1,e.result+=j.repeat("\n",u+1)):0===u?a&&(e.result+=" "):e.result+=j.repeat("\n",u):e.result+=j.repeat("\n",a?1+u:u),a=!0,c=!0,u=0,n=e.position;!Ue(i)&&0!==i;)i=e.input.charCodeAt(++e.position);Xe(e,n,e.position,!1)}}return!0}(e,d)||function(e,t){var n,s,r;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,s=r=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(Xe(e,s,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;s=e.position,e.position++,r=e.position}else Ue(n)?(Xe(e,s,r,!0),rt(e,nt(e,!1,t)),s=r=e.position):e.position===e.lineStart&&st(e)?Je(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);Je(e,"unexpected end of the stream within a single quoted scalar")}(e,d)||function(e,t){var n,s,r,i,o,a;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return Xe(e,n,e.position,!0),e.position++,!0;if(92===a){if(Xe(e,n,e.position,!0),Ue(a=e.input.charCodeAt(++e.position)))nt(e,!1,t);else if(a<256&&ze[a])e.result+=We[a],e.position++;else if((o=Fe(a))>0){for(r=o,i=0;r>0;r--)(o=Be(a=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+o:Je(e,"expected hexadecimal character");e.result+=He(i),e.position++}else Je(e,"unknown escape sequence");n=s=e.position}else Ue(a)?(Xe(e,n,s,!0),rt(e,nt(e,!1,t)),n=s=e.position):e.position===e.lineStart&&st(e)?Je(e,"unexpected end of the document within a double quoted scalar"):(e.position++,s=e.position)}Je(e,"unexpected end of the stream within a double quoted scalar")}(e,d)?m=!0:!function(e){var t,n,s;if(42!==(s=e.input.charCodeAt(e.position)))return!1;for(s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!De(s)&&!Me(s);)s=e.input.charCodeAt(++e.position);return e.position===t&&Je(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Ae.call(e.anchorMap,n)||Je(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],nt(e,!0,-1),!0}(e)?function(e,t,n){var s,r,i,o,a,c,l,u,h=e.kind,d=e.result;if(De(u=e.input.charCodeAt(e.position))||Me(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(De(s=e.input.charCodeAt(e.position+1))||n&&Me(s)))return!1;for(e.kind="scalar",e.result="",r=i=e.position,o=!1;0!==u;){if(58===u){if(De(s=e.input.charCodeAt(e.position+1))||n&&Me(s))break}else if(35===u){if(De(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&st(e)||n&&Me(u))break;if(Ue(u)){if(a=e.line,c=e.lineStart,l=e.lineIndent,nt(e,!1,-1),e.lineIndent>=t){o=!0,u=e.input.charCodeAt(e.position);continue}e.position=i,e.line=a,e.lineStart=c,e.lineIndent=l;break}}o&&(Xe(e,r,i,!1),rt(e,e.line-a),r=i=e.position,o=!1),Re(u)||(i=e.position+1),u=e.input.charCodeAt(++e.position)}return Xe(e,r,i,!1),!!e.result||(e.kind=h,e.result=d,!1)}(e,d,_e===n)&&(m=!0,null===e.tag&&(e.tag="?")):(m=!0,null===e.tag&&null===e.anchor||Je(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(m=a&&it(e,f))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&Je(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,l=e.implicitTypes.length;c<l;c+=1)if((h=e.implicitTypes[c]).resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(Ae.call(e.typeMap[e.kind||"fallback"],e.tag))h=e.typeMap[e.kind||"fallback"][e.tag];else for(h=null,c=0,l=(u=e.typeMap.multi[e.kind||"fallback"]).length;c<l;c+=1)if(e.tag.slice(0,u[c].tag.length)===u[c].tag){h=u[c];break}h||Je(e,"unknown tag !<"+e.tag+">"),null!==e.result&&h.kind!==e.kind&&Je(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result,e.tag)?(e.result=h.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):Je(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function lt(e){var t,n,s,r,i=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(r=e.input.charCodeAt(e.position))&&(nt(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==r));){for(o=!0,r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!De(r);)r=e.input.charCodeAt(++e.position);for(s=[],(n=e.input.slice(t,e.position)).length<1&&Je(e,"directive name must not be less than one character in length");0!==r;){for(;Re(r);)r=e.input.charCodeAt(++e.position);if(35===r){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&!Ue(r));break}if(Ue(r))break;for(t=e.position;0!==r&&!De(r);)r=e.input.charCodeAt(++e.position);s.push(e.input.slice(t,e.position))}0!==r&&tt(e),Ae.call(Ye,n)?Ye[n](e,n,s):Qe(e,'unknown document directive "'+n+'"')}nt(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,nt(e,!0,-1)):o&&Je(e,"directives end mark is expected"),ct(e,e.lineIndent-1,xe,!1,!0),nt(e,!0,-1),e.checkLineBreaks&&Ie.test(e.input.slice(i,e.position))&&Qe(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&st(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,nt(e,!0,-1)):e.position<e.length-1&&Je(e,"end of the stream or a document separator is expected")}function ut(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new Ke(e,t),s=e.indexOf("\0");for(-1!==s&&(n.position=s,Je(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)lt(n);return n.documents}var ht=function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var s=ut(e,n);if("function"!=typeof t)return s;for(var r=0,i=s.length;r<i;r+=1)t(s[r])},dt={loadAll:ht,load:function(e,t){var n=ut(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new R("expected a single document in the stream, but found more")}}},ft=Object.prototype.toString,pt=Object.prototype.hasOwnProperty,gt=65279,mt=9,yt=10,bt=13,wt=32,vt=33,At=34,_t=35,kt=37,Et=38,xt=39,Ct=42,St=44,Pt=45,Tt=58,It=61,Ot=62,Nt=63,jt=64,Lt=91,Ut=93,Rt=96,Dt=123,Mt=124,Bt=125,Ft={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},$t=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Gt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ht(e){var t,n,s;if(t=e.toString(16).toUpperCase(),e<=255)n="x",s=2;else if(e<=65535)n="u",s=4;else{if(!(e<=4294967295))throw new R("code point within a string may not be greater than 0xFFFFFFFF");n="U",s=8}return"\\"+n+j.repeat("0",s-t.length)+t}var zt=1,Wt=2;function qt(e){this.schema=e.schema||ve,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=j.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,s,r,i,o,a,c;if(null===t)return{};for(n={},r=0,i=(s=Object.keys(t)).length;r<i;r+=1)o=s[r],a=String(t[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(c=e.compiledTypeMap.fallback[o])&&pt.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[o]=a;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?Wt:zt,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Kt(e,t){for(var n,s=j.repeat(" ",t),r=0,i=-1,o="",a=e.length;r<a;)-1===(i=e.indexOf("\n",r))?(n=e.slice(r),r=a):(n=e.slice(r,i+1),r=i+1),n.length&&"\n"!==n&&(o+=s),o+=n;return o}function Vt(e,t){return"\n"+j.repeat(" ",e.indent*t)}function Jt(e){return e===wt||e===mt}function Qt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==gt||65536<=e&&e<=1114111}function Yt(e){return Qt(e)&&e!==gt&&e!==bt&&e!==yt}function Xt(e,t,n){var s=Yt(e),r=s&&!Jt(e);return(n?s:s&&e!==St&&e!==Lt&&e!==Ut&&e!==Dt&&e!==Bt)&&e!==_t&&!(t===Tt&&!r)||Yt(t)&&!Jt(t)&&e===_t||t===Tt&&r}function Zt(e,t){var n,s=e.charCodeAt(t);return s>=55296&&s<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(s-55296)+n-56320+65536:s}function en(e){return/^\n* /.test(e)}var tn=1,nn=2,sn=3,rn=4,on=5;function an(e,t,n,s,r,i,o,a){var c,l=0,u=null,h=!1,d=!1,f=-1!==s,p=-1,g=function(e){return Qt(e)&&e!==gt&&!Jt(e)&&e!==Pt&&e!==Nt&&e!==Tt&&e!==St&&e!==Lt&&e!==Ut&&e!==Dt&&e!==Bt&&e!==_t&&e!==Et&&e!==Ct&&e!==vt&&e!==Mt&&e!==It&&e!==Ot&&e!==xt&&e!==At&&e!==kt&&e!==jt&&e!==Rt}(Zt(e,0))&&function(e){return!Jt(e)&&e!==Tt}(Zt(e,e.length-1));if(t||o)for(c=0;c<e.length;l>=65536?c+=2:c++){if(!Qt(l=Zt(e,c)))return on;g=g&&Xt(l,u,a),u=l}else{for(c=0;c<e.length;l>=65536?c+=2:c++){if((l=Zt(e,c))===yt)h=!0,f&&(d=d||c-p-1>s&&" "!==e[p+1],p=c);else if(!Qt(l))return on;g=g&&Xt(l,u,a),u=l}d=d||f&&c-p-1>s&&" "!==e[p+1]}return h||d?n>9&&en(e)?on:o?i===Wt?on:nn:d?rn:sn:!g||o||r(e)?i===Wt?on:nn:tn}function cn(e,t,n,s,r){e.dump=function(){if(0===t.length)return e.quotingType===Wt?'""':"''";if(!e.noCompatMode&&(-1!==$t.indexOf(t)||Gt.test(t)))return e.quotingType===Wt?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,n),o=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=s||e.flowLevel>-1&&n>=e.flowLevel;switch(an(t,a,e.indent,o,(function(t){return function(e,t){var n,s;for(n=0,s=e.implicitTypes.length;n<s;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!s,r)){case tn:return t;case nn:return"'"+t.replace(/'/g,"''")+"'";case sn:return"|"+ln(t,e.indent)+un(Kt(t,i));case rn:return">"+ln(t,e.indent)+un(Kt(function(e,t){var n,s,r=/(\n+)([^\n]*)/g,i=(a=e.indexOf("\n"),a=-1!==a?a:e.length,r.lastIndex=a,hn(e.slice(0,a),t)),o="\n"===e[0]||" "===e[0];var a;for(;s=r.exec(e);){var c=s[1],l=s[2];n=" "===l[0],i+=c+(o||n||""===l?"":"\n")+hn(l,t),o=n}return i}(t,o),i));case on:return'"'+function(e){for(var t,n="",s=0,r=0;r<e.length;s>=65536?r+=2:r++)s=Zt(e,r),!(t=Ft[s])&&Qt(s)?(n+=e[r],s>=65536&&(n+=e[r+1])):n+=t||Ht(s);return n}(t)+'"';default:throw new R("impossible error: invalid scalar style")}}()}function ln(e,t){var n=en(e)?String(t):"",s="\n"===e[e.length-1];return n+(s&&("\n"===e[e.length-2]||"\n"===e)?"+":s?"":"-")+"\n"}function un(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function hn(e,t){if(""===e||" "===e[0])return e;for(var n,s,r=/ [^ ]/g,i=0,o=0,a=0,c="";n=r.exec(e);)(a=n.index)-i>t&&(s=o>i?o:a,c+="\n"+e.slice(i,s),i=s+1),o=a;return c+="\n",e.length-i>t&&o>i?c+=e.slice(i,o)+"\n"+e.slice(o+1):c+=e.slice(i),c.slice(1)}function dn(e,t,n,s){var r,i,o,a="",c=e.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),(pn(e,t+1,o,!0,!0,!1,!0)||void 0===o&&pn(e,t+1,null,!0,!0,!1,!0))&&(s&&""===a||(a+=Vt(e,t)),e.dump&&yt===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=c,e.dump=a||"[]"}function fn(e,t,n){var s,r,i,o,a,c;for(i=0,o=(r=n?e.explicitTypes:e.implicitTypes).length;i<o;i+=1)if(((a=r[i]).instanceOf||a.predicate)&&(!a.instanceOf||"object"==typeof t&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,"[object Function]"===ft.call(a.represent))s=a.represent(t,c);else{if(!pt.call(a.represent,c))throw new R("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');s=a.represent[c](t,c)}e.dump=s}return!0}return!1}function pn(e,t,n,s,r,i,o){e.tag=null,e.dump=n,fn(e,n,!1)||fn(e,n,!0);var a,c=ft.call(e.dump),l=s;s&&(s=e.flowLevel<0||e.flowLevel>t);var u,h,d="[object Object]"===c||"[object Array]"===c;if(d&&(h=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||h||2!==e.indent&&t>0)&&(r=!1),h&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(d&&h&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===c)s&&0!==Object.keys(e.dump).length?(!function(e,t,n,s){var r,i,o,a,c,l,u="",h=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new R("sortKeys must be a boolean or a function");for(r=0,i=d.length;r<i;r+=1)l="",s&&""===u||(l+=Vt(e,t)),a=n[o=d[r]],e.replacer&&(a=e.replacer.call(n,o,a)),pn(e,t+1,o,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&yt===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,c&&(l+=Vt(e,t)),pn(e,t+1,a,!0,c)&&(e.dump&&yt===e.dump.charCodeAt(0)?l+=":":l+=": ",u+=l+=e.dump));e.tag=h,e.dump=u||"{}"}(e,t,e.dump,r),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var s,r,i,o,a,c="",l=e.tag,u=Object.keys(n);for(s=0,r=u.length;s<r;s+=1)a="",""!==c&&(a+=", "),e.condenseFlow&&(a+='"'),o=n[i=u[s]],e.replacer&&(o=e.replacer.call(n,i,o)),pn(e,t,i,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),pn(e,t,o,!1,!1)&&(c+=a+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===c)s&&0!==e.dump.length?(e.noArrayIndent&&!o&&t>0?dn(e,t-1,e.dump,r):dn(e,t,e.dump,r),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var s,r,i,o="",a=e.tag;for(s=0,r=n.length;s<r;s+=1)i=n[s],e.replacer&&(i=e.replacer.call(n,String(s),i)),(pn(e,t,i,!1,!1)||void 0===i&&pn(e,t,null,!1,!1))&&(""!==o&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new R("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&cn(e,e.dump,t,i,l)}null!==e.tag&&"?"!==e.tag&&(a=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),a="!"===e.tag[0]?"!"+a:"tag:yaml.org,2002:"===a.slice(0,18)?"!!"+a.slice(18):"!<"+a+">",e.dump=a+" "+e.dump)}return!0}function gn(e,t){var n,s,r=[],i=[];for(mn(e,r,i),n=0,s=i.length;n<s;n+=1)t.duplicates.push(r[i[n]]);t.usedDuplicates=new Array(s)}function mn(e,t,n){var s,r,i;if(null!==e&&"object"==typeof e)if(-1!==(r=t.indexOf(e)))-1===n.indexOf(r)&&n.push(r);else if(t.push(e),Array.isArray(e))for(r=0,i=e.length;r<i;r+=1)mn(e[r],t,n);else for(r=0,i=(s=Object.keys(e)).length;r<i;r+=1)mn(e[s[r]],t,n)}function yn(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}const bn={Type:G,Schema:W,FAILSAFE_SCHEMA:J,JSON_SCHEMA:ie,CORE_SCHEMA:oe,DEFAULT_SCHEMA:ve,load:dt.load,loadAll:dt.loadAll,dump:{dump:function(e,t){var n=new qt(t=t||{});n.noRefs||gn(e,n);var s=e;return n.replacer&&(s=n.replacer.call({"":s},"",s)),pn(n,0,s,!0,!0)?n.dump+"\n":""}}.dump,YAMLException:R,types:{binary:de,float:re,map:V,null:Q,pairs:ye,set:we,timestamp:le,bool:Y,int:te,merge:ue,omap:ge,seq:K,str:q},safeLoad:yn("safeLoad","load"),safeLoadAll:yn("safeLoadAll","loadAll"),safeDump:yn("safeDump","dump")},wn=JSON.parse('{"confirm_button":{"en":"Confirm","ko":"","es":"Confirmar","fr":"Confirmer","de":"Besttigen","it":"Conferma","pt":"Confirmar","ru":"","zh-CN":"","zh-TW":"","ja":""}}'),vn=()=>{let e="",t="";return 2===p.language.length?e=p.language.toLowerCase():(e=p.language.substring(0,2).toLowerCase(),t=p.language.substring(3).toLowerCase()),{language:e,locale:t}},An=(e,t={},n="en")=>{const s="string"==typeof e?wn[e]:e;if(void 0!==s){let e=s[p.language];if(void 0===e){const{language:t,locale:n}=vn();e=s[t],"object"==typeof e&&(e=void 0!==e[n]?e[n]:e[Object.keys(e)[0]])}if(void 0===e){const t=s[n];e=void 0!==t?t:s[Object.keys(s)[0]]}if(void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),void 0!==e)for(const[n,s]of Object.entries(t)){const t=new RegExp(`{${n}}`,"g");e=e.replace(t,String(s))}return void 0===e?"":e}return console.error(`${e} not exists.`),""};An.loadYAML=(e,t)=>{const n=bn.load(t);for(const[t,s]of Object.entries(n))void 0===wn[t]&&(wn[t]={}),wn[t][e]=s},An.loadYAMLs=async e=>{const t=[];for(const[n,s]of Object.entries(e))for(const e of s)t.push((async()=>{const t=bn.load(await(await fetch(e)).text());if(void 0!==t)for(const[e,s]of Object.entries(t))void 0===wn[e]&&(wn[e]={}),wn[e][n]=s})());await Promise.all(t)},An.getMessages=e=>wn[e],An.getLangMessages=(e,t="en")=>{const{language:n,locale:s}=vn(),r="string"==typeof e?wn[e]:e;if(void 0!==r){let e=r[p.language];if(void 0===e&&(e=r[n],void 0!==e&&"object"==typeof e&&(e=void 0!==e[s]?e[s]:e[Object.keys(e)[0]])),void 0===e){const n=r[t];e=void 0!==n?n:r[Object.keys(r)[0]]}return void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),{[n]:void 0===e?"":e}}return console.error(`${e} not exists.`),{[n]:""}};const _n=An;class kn extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class En extends kn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xn extends kn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Cn extends kn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Sn=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};class Pn{constructor(e,{headers:t={},customFetch:s}={}){this.url=e,this.headers=t,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,3975,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Sn(this,void 0,void 0,(function*(){try{const{headers:s,method:r,body:i}=t;let o,a={};i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",o=i):"string"==typeof i?(a["Content-Type"]="text/plain",o=i):"undefined"!=typeof FormData&&i instanceof FormData?o=i:(a["Content-Type"]="application/json",o=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:o}).catch((e=>{throw new En(e)})),l=c.headers.get("x-relay-error");if(l&&"true"===l)throw new xn(c);if(!c.ok)throw new Cn(c);let u,h=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"multipart/form-data"===h?yield c.formData():yield c.text(),{data:u,error:null}}catch(e){return{data:null,error:e}}}))}}var Tn=n(3975),In=n.n(Tn);class On{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=In():this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,s;let r=null,i=null,o=null,a=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),l=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");s&&l&&l.length>1&&(o=parseInt(l[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(r={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,o=null,a=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{r=JSON.parse(t),Array.isArray(r)&&404===e.status&&(i=[],r=null,a=200,c="OK")}catch(n){404===e.status&&""===t?(a=204,c="No Content"):r={message:t}}if(r&&this.isMaybeSingle&&(null===(s=null==r?void 0:r.details)||void 0===s?void 0:s.includes("0 rows"))&&(r=null,a=200,c="OK"),r&&this.shouldThrowOnError)throw r}return{error:r,data:i,count:o,status:a,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}}class Nn extends On{select(e){let t=!1;const n=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s}={}){const r=s?`${s}.order`:"order",i=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const s=void 0===n?"offset":`${n}.offset`,r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(r,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}={}){const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),a=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${a}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class jn extends Nn{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class Ln{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let r=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new jn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new jn({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){const i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new jn({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new jn({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new jn({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Un={"X-Client-Info":"postgrest-js/1.8.5"};class Rn{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Un),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Ln(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Rn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:s}={}){let r;const i=new URL(`${this.url}/rpc/${e}`);let o;n?(r="HEAD",Object.entries(t).forEach((([e,t])=>{i.searchParams.append(e,`${t}`)}))):(r="POST",o=t);const a=Object.assign({},this.headers);return s&&(a.Prefer=`count=${s}`),new jn({method:r,url:i,headers:a,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}var Dn=n(47);const Mn={"X-Client-Info":"realtime-js/2.8.4"};var Bn,Fn,$n,Gn,Hn,zn,Wn;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Bn||(Bn={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Fn||(Fn={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}($n||($n={})),function(e){e.websocket="websocket"}(Gn||(Gn={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Hn||(Hn={}));class qn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class Kn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=n.decode(e.slice(i,i+s));i+=s;const a=n.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:o,event:a,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class Vn{constructor(e,t,n={},s=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(zn||(zn={}));class Jn{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jn.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=Jn.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],s()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Jn.syncDiff(this.state,e,t,n),s())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,s){const r=this.cloneDeep(e),i=this.transformState(t),o={},a={};return this.map(r,((e,t)=>{i[e]||(a[e]=t)})),this.map(i,((e,t)=>{const n=r[e];if(n){const s=t.map((e=>e.presence_ref)),r=n.map((e=>e.presence_ref)),i=t.filter((e=>r.indexOf(e.presence_ref)<0)),c=n.filter((e=>s.indexOf(e.presence_ref)<0));i.length>0&&(o[e]=i),c.length>0&&(a[e]=c)}else o[e]=t})),this.syncDiff(r,{joins:o,leaves:a},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,((t,s)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),i.length>0){const n=e[t].map((e=>e.presence_ref)),s=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...s)}n(t,i,s)})),this.map(i,((t,n)=>{let r=e[t];if(!r)return;const i=n.map((e=>e.presence_ref));r=r.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=r,s(t,r,n),0===r.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):s,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Wn||(Wn={}));const Qn=(e,t,n={})=>{var s;const r=null!==(s=n.skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce(((n,s)=>(n[s]=Yn(s,e,t,r),n)),{})},Yn=(e,t,n,s)=>{const r=t.find((t=>t.name===e)),i=null==r?void 0:r.type,o=n[e];return i&&!s.includes(i)?Xn(i,o):Zn(o)},Xn=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return ss(t,n)}switch(e){case Wn.bool:return es(t);case Wn.float4:case Wn.float8:case Wn.int2:case Wn.int4:case Wn.int8:case Wn.numeric:case Wn.oid:return ts(t);case Wn.json:case Wn.jsonb:return ns(t);case Wn.timestamp:return rs(t);case Wn.abstime:case Wn.date:case Wn.daterange:case Wn.int4range:case Wn.int8range:case Wn.money:case Wn.reltime:case Wn.text:case Wn.time:case Wn.timestamptz:case Wn.timetz:case Wn.tsrange:case Wn.tstzrange:default:return Zn(t)}},Zn=e=>e,es=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ts=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ns=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ss=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch(e){s=r?r.split(","):[]}return s.map((e=>Xn(t,e)))}return e},rs=e=>"string"==typeof e?e.replace(" ","T"):e;var is,os,as;!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(is||(is={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(os||(os={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(as||(as={}));class cs{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Fn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vn(this,$n.join,this.params,this.timeout),this.rejoinTimer=new qn((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=Fn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fn.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Fn.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fn.errored,this.rejoinTimer.scheduleTimeout())})),this._on($n.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new Jn(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:i}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const o={},a={broadcast:r,presence:i,postgres_changes:null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==s?s:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var n;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const s=this.bindings.postgres_changes,r=null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0,i=[];for(let n=0;n<r;n++){const r=s[n],{filter:{event:o,schema:a,table:c,filter:l}}=r,u=t&&t[n];if(!u||u.event!==o||u.schema!==a||u.table!==c||u.filter!==l)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var s,r,i;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||n("ok"),o.receive("ok",(()=>n("ok"))),o.receive("timeout",(()=>n("timed out")))}));{const{event:r,payload:i}=e,o={method:"POST",headers:{apikey:null!==(n=this.socket.accessToken)&&void 0!==n?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout)).ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($n.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const s=new Vn(this,$n.leave,{},e);s.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),s.send(),this._canPush()||s.trigger("ok",{})}))}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout((()=>s.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Vn(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const i=e.toLocaleLowerCase(),{close:o,error:a,leave:c,join:l}=$n;if(n&&[o,a,c,l].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter((e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===i})).map((e=>e.callback(u,n))):null===(r=this.bindings[i])||void 0===r||r.filter((e=>{var n,s,r,o,a,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(s=t.ids)||void 0===s?void 0:s.includes(i))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:i}=e,o={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:i};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,n)}))}_isClosed(){return this.state===Fn.closed}_isJoined(){return this.state===Fn.joined}_isJoining(){return this.state===Fn.joining}_isLeaving(){return this.state===Fn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&cs.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($n.close,{},e)}_onError(e){this._on($n.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Qn(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Qn(e.columns,e.old_record)),t}}const ls=()=>{};class us{constructor(e,t){var s;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Mn,this.params={},this.timeout=1e4,this.transport=Dn.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ls,this.conn=null,this.sendBuffer=[],this.serializer=new Kn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,3975,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Gn.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey;r&&(this.accessToken=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qn((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Bn.connecting:return Hn.Connecting;case Bn.open:return Hn.Open;case Bn.closing:return Hn.Closing;default:return Hn.Closed}}isConnected(){return this.connectionState()===Hn.Open}channel(e,t={config:{}}){const n=new cs(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:r}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${r})`,s),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push($n.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:s,ref:r}=e;(r&&r===this.pendingHeartbeatRef||n===(null==s?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${r&&"("+r+")"||""}`,s),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,s,r))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger($n.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class hs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ds(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class fs extends hs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ps extends hs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var gs=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const ms=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,3975,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)};var ys=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const bs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ws=(e,t)=>ys(void 0,void 0,void 0,(function*(){const s=yield gs(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(n.t.bind(n,3975,23))).Response:Response}));e instanceof s?e.json().then((n=>{t(new fs(bs(n),e.status||500))})).catch((e=>{t(new ps(bs(e),e))})):t(new ps(bs(e),e))})),vs=(e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};function As(e,t,n,s,r,i){return ys(this,void 0,void 0,(function*(){return new Promise(((o,a)=>{e(n,vs(t,s,r,i)).then((e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()})).then((e=>o(e))).catch((e=>ws(e,a)))}))}))}function _s(e,t,n,s){return ys(this,void 0,void 0,(function*(){return As(e,"GET",t,n,s)}))}function ks(e,t,n,s,r){return ys(this,void 0,void 0,(function*(){return As(e,"POST",t,s,r,n)}))}function Es(e,t,n,s,r){return ys(this,void 0,void 0,(function*(){return As(e,"DELETE",t,s,r,n)}))}var xs=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const Cs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ss={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ps{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=ms(s)}uploadOrUpdate(e,t,n,s){return xs(this,void 0,void 0,(function*(){try{let r;const i=Object.assign(Object.assign({},Ss),s),o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),r.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",i.cacheControl)):(r=n,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType);const a=this._removeEmptyFolders(t),c=this._getFinalPath(a),l=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:r,headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));if(l.ok)return{data:{path:a},error:null};return{data:null,error:yield l.json()}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}upload(e,t,n){return xs(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,s){return xs(this,void 0,void 0,(function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Ss.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:i});if(a.ok)return{data:{path:r},error:null};return{data:null,error:yield a.json()}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}createSignedUploadUrl(e){return xs(this,void 0,void 0,(function*(){try{let t=this._getFinalPath(e);const n=yield ks(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+n.url),r=s.searchParams.get("token");if(!r)throw new hs("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:r},error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}update(e,t,n){return xs(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t){return xs(this,void 0,void 0,(function*(){try{return{data:yield ks(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}copy(e,t){return xs(this,void 0,void 0,(function*(){try{return{data:{path:(yield ks(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,n){return xs(this,void 0,void 0,(function*(){try{let s=this._getFinalPath(e),r=yield ks(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${i}`)},{data:r,error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,n){return xs(this,void 0,void 0,(function*(){try{const s=yield ks(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:s.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null}))),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}download(e,t){return xs(this,void 0,void 0,(function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),r=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield _s(this.fetch,`${this.url}/${n}/${t}${r}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==r&&s.push(r);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&s.push(o);let a=s.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}remove(e){return xs(this,void 0,void 0,(function*(){try{return{data:yield Es(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}list(e,t,n){return xs(this,void 0,void 0,(function*(){try{const s=Object.assign(Object.assign(Object.assign({},Cs),t),{prefix:e||""});return{data:yield ks(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ts={"X-Client-Info":"storage-js/2.5.4"};var Is=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};class Os{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Ts),t),this.fetch=ms(n)}listBuckets(){return Is(this,void 0,void 0,(function*(){try{return{data:yield _s(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}getBucket(e){return Is(this,void 0,void 0,(function*(){try{return{data:yield _s(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return Is(this,void 0,void 0,(function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return Is(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,s,r){return ys(this,void 0,void 0,(function*(){return As(e,"PUT",t,s,r,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return Is(this,void 0,void 0,(function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return Is(this,void 0,void 0,(function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}}class Ns extends Os{constructor(e,t={},n){super(e,t,n)}from(e){return new Ps(this.url,this.headers,e,this.fetch)}}let js="";js="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ls={"X-Client-Info":`supabase-js-${js}/2.38.4`};var Us=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const Rs=e=>{let t;return t=e||("undefined"==typeof fetch?In():fetch),(...e)=>t(...e)},Ds=(e,t,n)=>{const s=Rs(n),r="undefined"==typeof Headers?Tn.Headers:Headers;return(n,i)=>Us(void 0,void 0,void 0,(function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let c=new r(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),s(n,Object.assign(Object.assign({},i),{headers:c}))}))};const Ms=()=>"undefined"!=typeof document,Bs={tested:!1,writable:!1},Fs=()=>{if(!Ms())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Bs.tested)return Bs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Bs.tested=!0,Bs.writable=!0}catch(e){Bs.tested=!0,Bs.writable=!1}return Bs.writable};function $s(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(e){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}const Gs=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,3975,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Hs=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json,zs=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ws=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return n}},qs=async(e,t)=>{await e.removeItem(t)};class Ks{constructor(){this.promise=new Ks.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function Vs(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,s,r,i,o,a,c,l="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),n=i<<2|o>>4,s=(15&o)<<4|a>>2,r=(3&a)<<6|c,l+=String.fromCharCode(n),64!=a&&0!=s&&(l+=String.fromCharCode(s)),64!=c&&0!=r&&(l+=String.fromCharCode(r));return l}(n))}function Js(e){return("0"+e.toString(16)).substr(-2)}function Qs(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Js).join("")}async function Ys(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map((e=>String.fromCharCode(e))).join("")}(e);return function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(t)}Ks.promiseConstructor=Promise;class Xs extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Zs(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class er extends Xs{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class tr extends Xs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class nr extends Xs{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class sr extends nr{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class rr extends nr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class ir extends nr{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class or extends nr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ar extends nr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cr extends nr{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function lr(e){return Zs(e)&&"AuthRetryableFetchError"===e.name}var ur=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const hr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dr=[502,503,504];async function fr(e){if(!Hs(e))throw new cr(hr(e),0);if(dr.includes(e.status))throw new cr(hr(e),e.status);let t;try{t=await e.json()}catch(e){throw new tr(hr(e),e)}throw new er(hr(t),e.status||500)}const pr=(e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function gr(e,t,n,s){var r;const i=Object.assign({},null==s?void 0:s.headers);(null==s?void 0:s.jwt)&&(i.Authorization=`Bearer ${s.jwt}`);const o=null!==(r=null==s?void 0:s.query)&&void 0!==r?r:{};(null==s?void 0:s.redirectTo)&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await async function(e,t,n,s,r,i){const o=pr(t,s,r,i);let a;try{a=await e(n,o)}catch(e){throw console.error(e),new cr(hr(e),0)}a.ok||await fr(a);if(null==s?void 0:s.noResolveJson)return a;try{return await a.json()}catch(e){await fr(e)}}(e,t,n+a,{headers:i,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(c):{data:Object.assign({},c),error:null}}function mr(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function yr(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function br(e){return{data:e,error:null}}function wr(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=e,o=ur(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},user:Object.assign({},o)},error:null}}function vr(e){return e}var Ar=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};class _r{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Gs(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await gr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await gr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,n=Ar(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null==n?void 0:n.newEmail,delete s.newEmail),await gr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:wr,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(Zs(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await gr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,n,s,r,i,o,a;try{const c={nextPage:null,lastPage:0,total:0},l=await gr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:vr});if(l.error)throw l.error;const u=await l.json(),h=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=l.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t})),c.total=parseInt(h)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(e){if(Zs(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await gr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await gr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await gr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{const{data:t,error:n}=await gr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await gr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(Zs(e))return{data:null,error:e};throw e}}}const kr="2.57.0",Er={"X-Client-Info":`gotrue-js/${kr}`},xr={getItem:e=>Fs()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Fs()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Fs()&&globalThis.localStorage.removeItem(e)}};function Cr(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}globalThis&&Fs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class Sr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Pr={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Er,flowType:"implicit",debug:!1},Tr=3e4;async function Ir(e,t,n){return await n()}class Or{constructor(e){var t;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Or.nextInstanceID,Or.nextInstanceID+=1,this.instanceID>0&&Ms()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Pr),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new _r({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Gs(n.fetch),this.lock=n.lock||Ir,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Fs()?this.storage=xr:(this.memoryStorage={},this.storage=Cr(this.memoryStorage)):(this.memoryStorage={},this.storage=Cr(this.memoryStorage)),Ms()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kr}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const e=!!Ms()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:s,redirectType:r}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",r),await this._saveSession(s),setTimeout((async()=>{"recovery"===r?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Zs(e)?{error:e}:{error:new tr("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,n,s;try{let r;if(await this._removeSession(),"email"in e){const{email:n,password:s,options:i}=e;let o=null,a=null;if("pkce"===this.flowType){const e=Qs();await zs(this.storage,`${this.storageKey}-code-verifier`,e),o=await Ys(e),a=e===o?"plain":"s256"}r=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},xform:mr})}else{if(!("phone"in e))throw new ir("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:o}=e;r=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(s=null==o?void 0:o.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:mr})}}const{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){const{email:n,password:s,options:r}=e;t=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:mr})}else{if(!("phone"in e))throw new ir("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:mr})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:s}):{data:{user:null,session:null},error:new rr}}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,n,s,r;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await Ws(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:s}=await gr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:mr});return await qs(this.storage,`${this.storageKey}-code-verifier`),s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:s}):{data:{user:null,session:null},error:new rr}}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:n,token:s,access_token:r,nonce:i}=e,o=await gr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:mr}),{data:a,error:c}=o;return c?{data:{user:null,session:null},error:c}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c}):{data:{user:null,session:null},error:new rr}}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,n,s,r,i;try{if(await this._removeSession(),"email"in e){const{email:s,options:r}=e;let i=null,o=null;if("pkce"===this.flowType){const e=Qs();await zs(this.storage,`${this.storageKey}-code-verifier`,e),i=await Ys(e),o=e===i?"plain":"s256"}const{error:a}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null==r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:n}=e,{data:o,error:a}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null==n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new ir("You must provide either an email or phone number.")}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,n;try{let s,r;"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession(),"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:o}=await gr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:mr});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,c=i.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,n,s;try{await this._removeSession();let r=null,i=null;if("pkce"===this.flowType){const e=Qs();await zs(this.storage,`${this.storageKey}-code-verifier`,e),r=await Ys(e),i=e===r?"plain":"s256"}return await gr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:br})}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new sr;const{error:s}=await gr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:r}=e,{error:i}=await gr(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:i,error:o}=await gr(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new ir("You must provide either an email or phone number and a type")}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Ws(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,(async()=>await this._getUser())))}async _getUser(e){try{return e?await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yr}):await this._useSession((async e=>{var t,n;const{data:s,error:r}=e;if(r)throw r;return await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(t=s.session)||void 0===t?void 0:t.access_token)&&void 0!==n?n:void 0,xform:yr})}))}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new sr;const i=s.session;let o=null,a=null;if("pkce"===this.flowType&&null!=e.email){const e=Qs();await zs(this.storage,`${this.storageKey}-code-verifier`,e),o=await Ys(e),a=e===o?"plain":"s256"}const{data:c,error:l}=await gr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:i.access_token,xform:yr});if(l)throw l;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return Vs(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new sr;const t=Date.now()/1e3;let n=t,s=!0,r=null;const i=Vs(e.access_token);if(i.exp&&(n=i.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(Zs(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new sr;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e){try{if(!Ms())throw new or("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new or("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new ar("Not a valid PKCE flow url.");const t=$s(window.location.href);if(e){if(!t.code)throw new ar("No code detected.");const{data:e,error:n}=await this._exchangeCodeForSession(t.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new or(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:i,expires_in:o,expires_at:a,token_type:c}=t;if(!(r&&o&&i&&c))throw new or("No session defined in URL");const l=Math.round(Date.now()/1e3),u=parseInt(o);let h=l+u;a&&(h=parseInt(a));const d=h-l;1e3*d<=Tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${u}s`);const f=h-u;l-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,l):l-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",f,h,l);const{data:p,error:g}=await this._getUser(r);if(g)throw g;const m={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:u,expires_at:h,refresh_token:i,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(e){if(Zs(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const e=$s(window.location.href);return!(!Ms()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=$s(window.location.href),t=await Ws(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const i=null===(n=s.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Zs(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await qs(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(t){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}}))}async resetPasswordForEmail(e,t={}){let n=null,s=null;if("pkce"===this.flowType){const e=Qs();await zs(this.storage,`${this.storageKey}-code-verifier`,e),n=await Ys(e),s=e===n?"plain":"s256"}try{return await gr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*n),this._debug(t,"refreshing attempt",n),await gr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mr})),s=(e,t,n)=>n&&n.error&&lr(n.error)&&Date.now()+200*(e+1)-r<Tr,new Promise(((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await n(r);if(!s(r,null,t))return void e(t)}catch(e){if(!s(r,e))return void t(e)}})()})))}catch(e){if(this._debug(t,"error",e),Zs(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ms()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Ws(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const s=Math.round(Date.now()/1e3),r=(null!==(e=n.expires_at)&&void 0!==e?e:1/0)<s+10;if(this._debug(t,`session has${r?"":" not"} expired with margin of 10s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),lr(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(e){return this._debug(t,"error",e),void console.error(e)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ks;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new sr;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(e){if(this._debug(s,"error",e),Zs(e)){const n={session:null,error:e};return null===(t=this.refreshingDeferred)||void 0===t||t.resolve(n),n}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(e){s.push(e)}}));if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),zs(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await qs(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ms()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Tr);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-e)/Tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof Sr))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ms()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const n=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===this.flowType){const e=Qs();await zs(this.storage,`${this.storageKey}-code-verifier`,e);const t=await Ys(e),s=e===t?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",t,"method",s);const r=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(s)}`});n.push(r.toString())}if(null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);n.push(e.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await gr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession((async t=>{var n,s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await gr(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:((null===(s=null==o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}))}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:o}=await gr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})}))}catch(e){if(Zs(e))return{data:null,error:e};throw e}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await gr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Zs(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],s=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(s.access_token);let o=null;i.aal&&(o=i.aal);let a=o;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}))))}}Or.nextInstanceID=0;class Nr extends Or{constructor(e){super(e)}}var jr=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const Lr={headers:Ls},Ur={schema:"public"},Rr={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Dr={};class Mr{constructor(e,t,n){var s,r,i,o,a,c,l,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=e.replace(/\/$/,"");this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f=function(e,t){const{db:n,auth:s,realtime:r,global:i}=e,{db:o,auth:a,realtime:c,global:l}=t;return{db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},l),i)}}(null!=n?n:{},{db:Ur,realtime:Dr,auth:Object.assign(Object.assign({},Rr),{storageKey:d}),global:Lr});this.storageKey=null!==(r=null===(s=f.auth)||void 0===s?void 0:s.storageKey)&&void 0!==r?r:"",this.headers=null!==(o=null===(i=f.global)||void 0===i?void 0:i.headers)&&void 0!==o?o:{},this.auth=this._initSupabaseAuthClient(null!==(a=f.auth)&&void 0!==a?a:{},this.headers,null===(c=f.global)||void 0===c?void 0:c.fetch),this.fetch=Ds(t,this._getAccessToken.bind(this),null===(l=f.global)||void 0===l?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new Rn(`${h}/rest/v1`,{headers:this.headers,schema:null===(u=f.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Pn(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ns(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return jr(this,void 0,void 0,(function*(){const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:r,flowType:i,debug:o},a,c){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nr({url:this.authUrl,headers:Object.assign(Object.assign({},l),a),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:i,debug:o,fetch:c})}_initRealtimeClient(e){return new us(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=n?n:null),this.changedAccessToken=n)}}const Br=new class extends o{client;connect(e,t){this.client=((e,t,n)=>new Mr(e,t,n))(e,t,{auth:{autoRefreshToken:!0,persistSession:!0}})}};class Fr{static toTitleCase(e){return e.replace(/(^\w|\s\w)(\S*)/g,((e,t,n)=>t.toUpperCase()+n.toLowerCase()))}static shortenEthereumAddress(e){return 42===e.length&&e.startsWith("0x")?`${e.substring(0,6)}...${e.substring(38)}`:e}static numberWithCommas(e,t){if(void 0===t||+ +e>Number.MAX_SAFE_INTEGER){const t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"0"===t[1]?t[0]:t.join(".")}const n=String(+(+e).toFixed(t)).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}}function $r(e){return null===e?void 0:e}class Gr{closed=!1;changeParams(e,t){}close(){this.closed=!0}}var Hr=n(7484),zr=n.n(Hr),Wr=n(4110),qr=n.n(Wr);class Kr{static parseWithUndefined(e){if(null!==e)return JSON.parse(e,((e,t)=>null===t?void 0:t))}}class Vr{name;constructor(e){this.name=e}selectStorage(e){return e?localStorage:sessionStorage}getKey(e){return`${this.name}/${e}`}set(e,t,n=!1){this.selectStorage(!n).removeItem(this.getKey(e));const s=this.selectStorage(n);try{s.setItem(this.getKey(e),JSON.stringify(t))}catch(e){if(!(e instanceof DOMException)||22!==e.code&&1014!==e.code&&"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name)throw e;s.clear(),location.reload()}}get(e,t){let n=sessionStorage.getItem(this.getKey(e))||localStorage.getItem(this.getKey(e));return null===n?t:Kr.parseWithUndefined(n)}getAll(){const e={};for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=Kr.parseWithUndefined(sessionStorage.getItem(n)))}for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=Kr.parseWithUndefined(localStorage.getItem(n)))}return e}checkPermanently(e){return null!==localStorage.getItem(this.getKey(e))}delete(e){sessionStorage.removeItem(this.getKey(e)),localStorage.removeItem(this.getKey(e))}clear(){for(let e=0;e<sessionStorage.length;e++){const t=sessionStorage.key(e);t&&t.startsWith(this.name)&&sessionStorage.removeItem(t)}for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(this.name)&&localStorage.removeItem(t)}}}class Jr{static pull(e,...t){const n=new Set(t);for(let t=e.length-1;t>=0;t--)n.has(e[t])&&e.splice(t,1)}static insert(e,t,n){e.splice(t,0,n)}static shuffle(e){let t=e.length;for(;0!==t;){const n=Math.floor(Math.random()*t);t-=1,[e[t],e[n]]=[e[n],e[t]]}return e}static checkSame(e,t){if(e.length!==t.length)return!1;const n=new Set(t);for(const t of e)if(!n.has(t))return!1;return!0}}class Qr{static NEXT_ID=0;id=Qr.NEXT_ID++;allowedEvents=["delete"];eventMap={};delegateEvents=[];deleted=!1;addAllowedEvents(...e){this.allowedEvents.push(...e)}addEventHandler(e,t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);void 0===this.eventMap[e]&&(this.eventMap[e]=[]),this.eventMap[e].push(t)}removeDelegateEvents(e){for(const[t,n]of Object.entries(e.events))for(const s of n)e.delegate.off(t,s);Jr.pull(this.delegateEvents,e)}on(e,t){if(Array.isArray(e))for(const n of e)this.addEventHandler(n,t);else this.addEventHandler(e,t);return this}once(e,t){const n=(...s)=>{this.off(e,n),t(...s)};this.addEventHandler(e,n)}off(e,t){void 0!==this.eventMap?.[e]&&(Jr.pull(this.eventMap[e],t),0===this.eventMap[e].length&&delete this.eventMap[e])}async fireEvent(e,...t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);const n=[],s=[],r=this.eventMap[e];if(void 0!==r)for(const e of[...r])if(r.includes(e)){const r=e(...t);r instanceof Promise?s.push(r):n.push(r)}return n.concat(await Promise.all(s))}onDelegate(e,t,n){let s=this.delegateEvents.find((t=>t.delegate===e));void 0===s&&(s={delegate:e,events:{}},this.delegateEvents.push(s)),"string"==typeof t&&(t=[t]);for(const r of t)void 0===s.events[r]&&(s.events[r]=[]),s.events[r].push(n),e.on(r,n)}offDelegate(e){const t=this.delegateEvents.find((t=>t.delegate===e));void 0!==t&&this.removeDelegateEvents(t)}offAll(){this.eventMap={};for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=[]}delete(){for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=void 0,this.fireEvent("delete"),this.allowedEvents=void 0,this.eventMap=void 0,this.deleted=!0}}class Yr extends Qr{parent;children=[];append(...e){for(const t of e)void 0!==t&&t.appendTo(this);return this}appendTo(e,t){return this.parent===e&&void 0!==t&&this.parent.children.indexOf(this)<t&&(t-=1),this.removeFromParent(),void 0!==t&&t<e.children.length?e.children.splice(t,0,this):e.children.push(this),this.parent=e,this}removeFromParent(){void 0!==this.parent&&(Jr.pull(this.parent.children,this),this.parent=void 0)}empty(){for(;this.children.length>0;)this.children[0].delete();return this}checkChild(e){const t=[...this.children];for(;t.length>0;){const n=t.pop();if(n===e)return!0;t.push(...n.children)}return!1}delete(){super.delete(),this.removeFromParent(),this.empty(),this.children=void 0}}class Xr extends Yr{static NUMBER_STYLE_KEY=["zIndex","opacity","flexGrow","flexShrink","gridGap","order","zoom"];static keyframesCount=0;static createElement(e){let t;const n=e.indexOf("#");if(-1!==n){t=e.substring(n+1),e=e.substring(0,n);const s=t.indexOf(".");-1!==s&&(e+=t.substring(s),t=t.substring(0,s))}let s;const r=e.indexOf(".");-1!==r&&(s=e.substring(r+1).replace(/\./g," "),e=e.substring(0,r)),""===e&&(e="div");const i=document.createElement(e);return void 0!==t&&(i.id=t),void 0!==s&&(i.className=s),i}children=[];domEventMap={};windowEventMap={};domElement;constructor(e,...t){super(),this.addAllowedEvents("visible"),e instanceof HTMLElement?this.domElement=e:this.domElement=Xr.createElement(e),this.append(...t)}style(e){for(const[t,n]of Object.entries(e))void 0===n?this.domElement.style[t]=null:"number"==typeof n&&!0!==Xr.NUMBER_STYLE_KEY.includes(t)?this.domElement.style[t]=`${n}px`:this.domElement.style[t]=n;return this}get rect(){return this.domElement.getBoundingClientRect()}get innerScrollPosition(){let e=0,t=0;if(this.domElement!==document.body){let n=this.domElement.parentNode;for(;n!==document.body&&null!==n;)n instanceof HTMLElement&&(e+=n.scrollLeft,t+=n.scrollTop),n=n.parentNode}return{left:e,top:t}}onDom(e,t){void 0===this.domEventMap[e]&&(this.domEventMap[e]=[]);const n=e=>t(e,this);this.domEventMap[e].push({eventHandler:t,domEventHandler:n}),this.domElement.addEventListener(e,n)}onWindow(e,t){void 0===this.windowEventMap[e]&&(this.windowEventMap[e]=[]);const n=e=>t(e,this);this.windowEventMap[e].push({eventHandler:t,domEventHandler:n}),window.addEventListener(e,n)}offDom(e,t){const n=this.domEventMap[e];if(void 0!==n){const s=n.find((e=>e.eventHandler===t));void 0!==s&&(this.domElement.removeEventListener(e,s.domEventHandler),Jr.pull(n,s),0===n.length&&delete this.domEventMap[e])}}fireDomEvent(e){this.domElement.dispatchEvent(new Event(e))}appendText(e){if("TEXTAREA"===this.domElement.tagName)this.domElement.append(e);else{const t=new DocumentFragment,n=e.split("\n");for(const[e,s]of n.entries())e>0&&t.append(document.createElement("br")),t.append(s);this.domElement.append(t)}return this}set text(e){this.empty().appendText(e)}append(...e){for(const t of e)if(void 0!==t)if("string"==typeof t)this.appendText(t);else if(t instanceof Xr)t.appendTo(this);else for(const[e,n]of Object.entries(t))"function"==typeof n?this.onDom(e,n):"style"===e&&"object"==typeof n?this.style(n):void 0===n?this.domElement.removeAttribute(e):this.domElement.setAttribute(e,String(n));return this}checkVisible(){return void 0!==this.parent&&(this.parent.domElement===document.body||this.parent.checkVisible())}fireVisible(){this.fireEvent("visible");for(const e of this.children)e.fireVisible()}appendTo(e,t){void 0!==t&&t<e.children.length?e.domElement.insertBefore(this.domElement,e.children[t].domElement):e.domElement.append(this.domElement);const n=super.appendTo(e,t);return!0===this.checkVisible()&&this.fireVisible(),n}empty(){for(super.empty();this.domElement.firstChild;)this.domElement.removeChild(this.domElement.firstChild);return this}addClass(e){return this.domElement.classList.add(e),this}deleteClass(e){this.domElement.classList.remove(e)}hasClass(e){return this.domElement.classList.contains(e)}toggleClass(e){this.domElement.classList.toggle(e)}clone(){return new Xr(this.domElement.cloneNode(!0))}delete(){this.domElement.remove(),this.domEventMap=void 0;for(const[e,t]of Object.entries(this.windowEventMap))for(const n of t)window.removeEventListener(e,n.domEventHandler);this.windowEventMap=void 0,super.delete(),this.domElement=void 0}animate({keyframes:e,duration:t=.5,timingFunction:n="ease",delay:s=0,iterationCount:r=1,direction:i="normal",onEnd:o=(()=>{})}){const a="__KEYFRAMES_"+Xr.keyframesCount++;let c="",l={};for(const[t,n]of Object.entries(e)){c+=`${t}{`;for(let[e,t]of Object.entries(n))"number"!=typeof t||["zIndex","opacity"].includes(e)||(t+="px"),c+=`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}:${t};`;c+="}","from"===t||"0%"===t?l={...l,...n}:"to"!==t&&"100%"!==t||(l={...l,...n})}const u=document.createElement("style");u.setAttribute("type","text/css"),u.appendChild(document.createTextNode(`@keyframes ${a}{${c}}`)),document.head.appendChild(u),l={...l,animation:`${a} ${t}s ${n} ${s}s ${r} ${i}`},this.style(l),1===r&&setTimeout((()=>{this.deleted||o(),u.remove()}),1e3*t)}}const Zr=new class extends Xr{constructor(){super(document.body)}};const ei=new class{paramRegex=/{(.+)}/;match(e,t,n){for(let s=0;s<e.length;s++){const r=t[s];if(void 0===r)return!1;let i=e[s];if("**"===r)return!0;const o=this.paramRegex.exec(r);if(!r.startsWith("{")){const e=r.indexOf("{");if(i.substring(0,e)!==r.substring(0,e))return!1;i=i.substring(e)}if(i&&o)n&&(n[o[1]]=i);else if("*"!==r&&r!==i)return!1;if(s===e.length-1&&s<t.length-1&&""!==t[t.length-1])return!1}return!0}parse(e,t,n){const s=e.split("/"),r=t.split("/");return this.match(s,r,n)}},ti=e=>decodeURIComponent(e.endsWith("/")?e.slice(0,-1).substring(1):e.substring(1)),ni=(e,t,n,s)=>t.some((t=>ei.match(e,t.split("/"),s)))&&!n.some((t=>ei.match(e,t.split("/"))));const si=new class extends Qr{routes=[];redirects=[];openingViews=[];forwarding=!1;constructor(){super(),this.addAllowedEvents("go"),window.addEventListener("popstate",(e=>{if(!0===this.forwarding)this.forwarding=!1;else{const t=Zr.children.findLast((e=>e.hasClass("popup-background")));t?(this.forwarding=!0,window.history.forward(),t.delete()):this.check(e.state??void 0)}for(const e of Zr.children)e.hasClass("dropdown-menu")&&e.delete()}))}closeAllPopup(){for(const e of Zr.children)e.hasClass("popup-background")&&e.delete()}check(e){const t=ti(location.pathname),n=t.split("/");let s=!1;const r=[];for(const{patterns:t,excludes:s,to:r}of this.redirects){const i=e?{...e}:{};if(ni(n,t,s,i)){let e=r;for(const[t,n]of Object.entries(i))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");return void this.goNoHistory(`/${e}`)}}for(const{patterns:i,excludes:o,viewType:a}of this.routes){const c=e?{...e}:{},l=this.openingViews.find((e=>e instanceof a));ni(n,i,o,c)?void 0===l?(this.openingViews.push(new a(c,t)),s=!0):l.changeParams(c,t):void 0!==l&&(r.push(l),Jr.pull(this.openingViews,l))}for(const e of r.reverse())e.close();!0===s&&this.fireEvent("go")}route(e,t,n=[]){"string"==typeof e&&(e=[e]),this.routes.push({patterns:e,excludes:n,viewType:t});const s=ti(location.pathname),r=s.split("/"),i={};ni(r,e,n,i)&&this.openingViews.push(new t(i,s))}redirect(e,t,n=[]){"string"==typeof e&&(e=[e]),this.redirects.push({patterns:e,excludes:n,to:t});const s=ti(location.pathname).split("/"),r={};if(ni(s,e,n,r)){let e=t;for(const[t,n]of Object.entries(r))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");this.goNoHistory(`/${e}`)}}go(e,t){location.pathname!==e&&(history.pushState(void 0,"",e),this.check(t),window.scrollTo(0,0))}goNoHistory(e,t){location.pathname!==e&&(history.replaceState(void 0,"",e),this.check(t),window.scrollTo(0,0))}waitAndGo(e,t){setTimeout((()=>this.go(e,t)))}refresh(){for(const e of this.openingViews.reverse())e.close();this.openingViews=[];const e=ti(location.pathname),t=e.split("/");for(const{patterns:n,excludes:s,viewType:r}of this.routes){const i={};ni(t,n,s,i)&&this.openingViews.push(new r(i,e))}}};const ri=new class{store=new Vr("__BROWSER_INFO_STORE");normalizeLanguage(e){return-1!==e.indexOf("-")&&"zh-TC"!==e&&"zh-SC"!==e&&(e=e.substring(0,e.indexOf("-"))),e}get language(){let e=this.store.get("lang")||navigator.language;return this.normalizeLanguage(e)}set language(e){this.store.set("lang",this.normalizeLanguage(e))}changeLanguage(e){if(!e)throw new Error("Invalid language code.");this.language=e,si.refresh()}get isPhoneSize(){return window.innerWidth<=859}};n(187);class ii extends Xr{constructor(e){super(".popup-background"),this.onDom("click",(t=>{!0===e.barrierDismissible&&t.target===this.domElement&&this.delete()})),Zr.append(this)}}var oi;!function(e){e.Contained="contained",e.Outlined="outlined",e.Text="text"}(oi||(oi={}));const ai=oi;const ci=(e,...t)=>new Xr(Xr.createElement(e),...t);class li extends Xr{constructor(e,...t){super(e+".component"),this.append(...t)}}class ui extends li{constructor(e){super("span.material-icon.material-symbols-outlined"),this.text=e}}class hi extends li{titleContainer;titleText;constructor(e){super("button"+(void 0!==e.type?"."+e.type:".contained")+(e.tag??"")),void 0!==e.icon&&this.append(e.icon),void 0!==e.title&&this.append(this.titleContainer=ci("span.title",this.titleText=e.title)),void 0!==e.href&&(this.domElement.href=e.href,this.domElement.target="_blank"),!0===e.disabled&&this.disable(),void 0!==e.click&&this.onDom("click",(t=>{!0!==this.hasClass("disabled")&&e.click(t,this)}))}set title(e){void 0!==this.titleContainer?this.titleContainer.text=e:this.append(this.titleContainer=ci("span.title",e)),this.titleText=e}disable(){return this.addClass("disabled"),this}enable(){return this.deleteClass("disabled"),this}}class di extends ii{content;constructor(e){super({barrierDismissible:!0}),this.append(this.content=new li(".popup.error-alert",ci("header",ci("h1",new ui("error"),e.title)),ci("main",ci("p",e.message)),ci("footer",new hi({type:ai.Text,tag:".confirm-button",title:e.confirmTitle??"OK",click:()=>this.delete()}))))}}function fi(e){return null==e}var pi=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},gi=function(e,t){var n,s,r,i;if(t)for(n=0,s=(i=Object.keys(t)).length;n<s;n+=1)e[r=i[n]]=t[r];return e},mi={isNothing:fi,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:fi(e)?[]:[e]},repeat:function(e,t){var n,s="";for(n=0;n<t;n+=1)s+=e;return s},isNegativeZero:pi,extend:gi};function yi(e,t){var n="",s=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),s+" "+n):s}function bi(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=yi(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}bi.prototype=Object.create(Error.prototype),bi.prototype.constructor=bi,bi.prototype.toString=function(e){return this.name+": "+yi(this,e)};var wi=bi;function vi(e,t,n,s,r){var i="",o="",a=Math.floor(r/2)-1;return s-t>a&&(t=s-a+(i=" ... ").length),n-s>a&&(n=s+a-(o=" ...").length),{str:i+e.slice(t,n).replace(/\t/g,"")+o,pos:s-t+i.length}}function Ai(e,t){return mi.repeat(" ",t-e.length)+e}var _i=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,s=/\r?\n|\r|\0/g,r=[0],i=[],o=-1;n=s.exec(e.buffer);)i.push(n.index),r.push(n.index+n[0].length),e.position<=n.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a,c,l="",u=Math.min(e.line+t.linesAfter,i.length).toString().length,h=t.maxLength-(t.indent+u+3);for(a=1;a<=t.linesBefore&&!(o-a<0);a++)c=vi(e.buffer,r[o-a],i[o-a],e.position-(r[o]-r[o-a]),h),l=mi.repeat(" ",t.indent)+Ai((e.line-a+1).toString(),u)+" | "+c.str+"\n"+l;for(c=vi(e.buffer,r[o],i[o],e.position,h),l+=mi.repeat(" ",t.indent)+Ai((e.line+1).toString(),u)+" | "+c.str+"\n",l+=mi.repeat("-",t.indent+u+3+c.pos)+"^\n",a=1;a<=t.linesAfter&&!(o+a>=i.length);a++)c=vi(e.buffer,r[o+a],i[o+a],e.position-(r[o]-r[o+a]),h),l+=mi.repeat(" ",t.indent)+Ai((e.line+a+1).toString(),u)+" | "+c.str+"\n";return l.replace(/\n$/,"")},ki=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Ei=["scalar","sequence","mapping"];var xi=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===ki.indexOf(t))throw new wi('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===Ei.indexOf(this.kind))throw new wi('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function Ci(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,s){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=s)})),n[t]=e})),n}function Si(e){return this.extend(e)}Si.prototype.extend=function(e){var t=[],n=[];if(e instanceof xi)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new wi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof xi))throw new wi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new wi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new wi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof xi))throw new wi("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var s=Object.create(Si.prototype);return s.implicit=(this.implicit||[]).concat(t),s.explicit=(this.explicit||[]).concat(n),s.compiledImplicit=Ci(s,"implicit"),s.compiledExplicit=Ci(s,"explicit"),s.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function s(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(s);return n}(s.compiledImplicit,s.compiledExplicit),s};var Pi=Si,Ti=new xi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),Ii=new xi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),Oi=new xi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),Ni=new Pi({explicit:[Ti,Ii,Oi]});var ji=new xi("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var Li=new xi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Ui(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Ri(e){return 48<=e&&e<=55}function Di(e){return 48<=e&&e<=57}var Mi=new xi("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,s=0,r=!1;if(!n)return!1;if("-"!==(t=e[s])&&"+"!==t||(t=e[++s]),"0"===t){if(s+1===n)return!0;if("b"===(t=e[++s])){for(s++;s<n;s++)if("_"!==(t=e[s])){if("0"!==t&&"1"!==t)return!1;r=!0}return r&&"_"!==t}if("x"===t){for(s++;s<n;s++)if("_"!==(t=e[s])){if(!Ui(e.charCodeAt(s)))return!1;r=!0}return r&&"_"!==t}if("o"===t){for(s++;s<n;s++)if("_"!==(t=e[s])){if(!Ri(e.charCodeAt(s)))return!1;r=!0}return r&&"_"!==t}}if("_"===t)return!1;for(;s<n;s++)if("_"!==(t=e[s])){if(!Di(e.charCodeAt(s)))return!1;r=!0}return!(!r||"_"===t)},construct:function(e){var t,n=e,s=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(s=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return s*parseInt(n.slice(2),2);if("x"===n[1])return s*parseInt(n.slice(2),16);if("o"===n[1])return s*parseInt(n.slice(2),8)}return s*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!mi.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Bi=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var Fi=/^[-+]?[0-9]+e/;var $i=new xi("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!Bi.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||mi.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(mi.isNegativeZero(e))return"-0.0";return n=e.toString(10),Fi.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),Gi=Ni.extend({implicit:[ji,Li,Mi,$i]}),Hi=Gi,zi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Wi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var qi=new xi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==zi.exec(e)||null!==Wi.exec(e))},construct:function(e){var t,n,s,r,i,o,a,c,l=0,u=null;if(null===(t=zi.exec(e))&&(t=Wi.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],s=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,s,r));if(i=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),c=new Date(Date.UTC(n,s,r,i,o,a,l)),u&&c.setTime(c.getTime()-u),c},instanceOf:Date,represent:function(e){return e.toISOString()}});var Ki=new xi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),Vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var Ji=new xi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,s=0,r=e.length,i=Vi;for(n=0;n<r;n++)if(!((t=i.indexOf(e.charAt(n)))>64)){if(t<0)return!1;s+=6}return s%8==0},construct:function(e){var t,n,s=e.replace(/[\r\n=]/g,""),r=s.length,i=Vi,o=0,a=[];for(t=0;t<r;t++)t%4==0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|i.indexOf(s.charAt(t));return 0===(n=r%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18===n?(a.push(o>>10&255),a.push(o>>2&255)):12===n&&a.push(o>>4&255),new Uint8Array(a)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,s="",r=0,i=e.length,o=Vi;for(t=0;t<i;t++)t%3==0&&t&&(s+=o[r>>18&63],s+=o[r>>12&63],s+=o[r>>6&63],s+=o[63&r]),r=(r<<8)+e[t];return 0===(n=i%3)?(s+=o[r>>18&63],s+=o[r>>12&63],s+=o[r>>6&63],s+=o[63&r]):2===n?(s+=o[r>>10&63],s+=o[r>>4&63],s+=o[r<<2&63],s+=o[64]):1===n&&(s+=o[r>>2&63],s+=o[r<<4&63],s+=o[64],s+=o[64]),s}}),Qi=Object.prototype.hasOwnProperty,Yi=Object.prototype.toString;var Xi=new xi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,s,r,i,o=[],a=e;for(t=0,n=a.length;t<n;t+=1){if(s=a[t],i=!1,"[object Object]"!==Yi.call(s))return!1;for(r in s)if(Qi.call(s,r)){if(i)return!1;i=!0}if(!i)return!1;if(-1!==o.indexOf(r))return!1;o.push(r)}return!0},construct:function(e){return null!==e?e:[]}}),Zi=Object.prototype.toString;var eo=new xi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,s,r,i,o=e;for(i=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(s=o[t],"[object Object]"!==Zi.call(s))return!1;if(1!==(r=Object.keys(s)).length)return!1;i[t]=[r[0],s[r[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,s,r,i,o=e;for(i=new Array(o.length),t=0,n=o.length;t<n;t+=1)s=o[t],r=Object.keys(s),i[t]=[r[0],s[r[0]]];return i}}),to=Object.prototype.hasOwnProperty;var no=new xi("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(to.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),so=Hi.extend({implicit:[qi,Ki],explicit:[Ji,Xi,eo,no]}),ro=Object.prototype.hasOwnProperty,io=1,oo=2,ao=3,co=4,lo=1,uo=2,ho=3,fo=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,po=/[\x85\u2028\u2029]/,go=/[,\[\]\{\}]/,mo=/^(?:!|!!|![a-z\-]+!)$/i,yo=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function bo(e){return Object.prototype.toString.call(e)}function wo(e){return 10===e||13===e}function vo(e){return 9===e||32===e}function Ao(e){return 9===e||32===e||10===e||13===e}function _o(e){return 44===e||91===e||93===e||123===e||125===e}function ko(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Eo(e){return 120===e?2:117===e?4:85===e?8:0}function xo(e){return 48<=e&&e<=57?e-48:-1}function Co(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function So(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var Po=new Array(256),To=new Array(256),Io=0;Io<256;Io++)Po[Io]=Co(Io)?1:0,To[Io]=Co(Io);function Oo(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||so,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function No(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=_i(n),new wi(t,n)}function jo(e,t){throw No(e,t)}function Lo(e,t){e.onWarning&&e.onWarning.call(null,No(e,t))}var Uo={YAML:function(e,t,n){var s,r,i;null!==e.version&&jo(e,"duplication of %YAML directive"),1!==n.length&&jo(e,"YAML directive accepts exactly one argument"),null===(s=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&jo(e,"ill-formed argument of the YAML directive"),r=parseInt(s[1],10),i=parseInt(s[2],10),1!==r&&jo(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&Lo(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var s,r;2!==n.length&&jo(e,"TAG directive accepts exactly two arguments"),s=n[0],r=n[1],mo.test(s)||jo(e,"ill-formed tag handle (first argument) of the TAG directive"),ro.call(e.tagMap,s)&&jo(e,'there is a previously declared suffix for "'+s+'" tag handle'),yo.test(r)||jo(e,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch(t){jo(e,"tag prefix is malformed: "+r)}e.tagMap[s]=r}};function Ro(e,t,n,s){var r,i,o,a;if(t<n){if(a=e.input.slice(t,n),s)for(r=0,i=a.length;r<i;r+=1)9===(o=a.charCodeAt(r))||32<=o&&o<=1114111||jo(e,"expected valid JSON character");else fo.test(a)&&jo(e,"the stream contains non-printable characters");e.result+=a}}function Do(e,t,n,s){var r,i,o,a;for(mi.isObject(n)||jo(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,a=(r=Object.keys(n)).length;o<a;o+=1)i=r[o],ro.call(t,i)||(t[i]=n[i],s[i]=!0)}function Mo(e,t,n,s,r,i,o,a,c){var l,u;if(Array.isArray(r))for(l=0,u=(r=Array.prototype.slice.call(r)).length;l<u;l+=1)Array.isArray(r[l])&&jo(e,"nested arrays are not supported inside keys"),"object"==typeof r&&"[object Object]"===bo(r[l])&&(r[l]="[object Object]");if("object"==typeof r&&"[object Object]"===bo(r)&&(r="[object Object]"),r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===s)if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)Do(e,t,i[l],n);else Do(e,t,i,n);else e.json||ro.call(n,r)||!ro.call(t,r)||(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,jo(e,"duplicated mapping key")),"__proto__"===r?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[r]=i,delete n[r];return t}function Bo(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):jo(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Fo(e,t,n){for(var s=0,r=e.input.charCodeAt(e.position);0!==r;){for(;vo(r);)9===r&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&35===r)do{r=e.input.charCodeAt(++e.position)}while(10!==r&&13!==r&&0!==r);if(!wo(r))break;for(Bo(e),r=e.input.charCodeAt(e.position),s++,e.lineIndent=0;32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position)}return-1!==n&&0!==s&&e.lineIndent<n&&Lo(e,"deficient indentation"),s}function $o(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!Ao(t)))}function Go(e,t){1===t?e.result+=" ":t>1&&(e.result+=mi.repeat("\n",t-1))}function Ho(e,t){var n,s,r=e.tag,i=e.anchor,o=[],a=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),s=e.input.charCodeAt(e.position);0!==s&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,jo(e,"tab characters must not be used in indentation")),45===s)&&Ao(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,Fo(e,!0,-1)&&e.lineIndent<=t)o.push(null),s=e.input.charCodeAt(e.position);else if(n=e.line,qo(e,t,ao,!1,!0),o.push(e.result),Fo(e,!0,-1),s=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==s)jo(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0)}function zo(e){var t,n,s,r,i=!1,o=!1;if(33!==(r=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&jo(e,"duplication of a tag property"),60===(r=e.input.charCodeAt(++e.position))?(i=!0,r=e.input.charCodeAt(++e.position)):33===r?(o=!0,n="!!",r=e.input.charCodeAt(++e.position)):n="!",t=e.position,i){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&62!==r);e.position<e.length?(s=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):jo(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==r&&!Ao(r);)33===r&&(o?jo(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),mo.test(n)||jo(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),go.test(s)&&jo(e,"tag suffix cannot contain flow indicator characters")}s&&!yo.test(s)&&jo(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch(t){jo(e,"tag name is malformed: "+s)}return i?e.tag=s:ro.call(e.tagMap,n)?e.tag=e.tagMap[n]+s:"!"===n?e.tag="!"+s:"!!"===n?e.tag="tag:yaml.org,2002:"+s:jo(e,'undeclared tag handle "'+n+'"'),!0}function Wo(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&jo(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!Ao(n)&&!_o(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&jo(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function qo(e,t,n,s,r){var i,o,a,c,l,u,h,d,f,p=1,g=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=o=a=co===n||ao===n,s&&Fo(e,!0,-1)&&(g=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;zo(e)||Wo(e);)Fo(e,!0,-1)?(g=!0,a=i,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):a=!1;if(a&&(a=g||r),1!==p&&co!==n||(d=io===n||oo===n?t:t+1,f=e.position-e.lineStart,1===p?a&&(Ho(e,f)||function(e,t,n){var s,r,i,o,a,c,l,u=e.tag,h=e.anchor,d={},f=Object.create(null),p=null,g=null,m=null,y=!1,b=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),l=e.input.charCodeAt(e.position);0!==l;){if(y||-1===e.firstTabInLine||(e.position=e.firstTabInLine,jo(e,"tab characters must not be used in indentation")),s=e.input.charCodeAt(e.position+1),i=e.line,63!==l&&58!==l||!Ao(s)){if(o=e.line,a=e.lineStart,c=e.position,!qo(e,n,oo,!1,!0))break;if(e.line===i){for(l=e.input.charCodeAt(e.position);vo(l);)l=e.input.charCodeAt(++e.position);if(58===l)Ao(l=e.input.charCodeAt(++e.position))||jo(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(Mo(e,d,f,p,g,null,o,a,c),p=g=m=null),b=!0,y=!1,r=!1,p=e.tag,g=e.result;else{if(!b)return e.tag=u,e.anchor=h,!0;jo(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=u,e.anchor=h,!0;jo(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(y&&(Mo(e,d,f,p,g,null,o,a,c),p=g=m=null),b=!0,y=!0,r=!0):y?(y=!1,r=!0):jo(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=s;if((e.line===i||e.lineIndent>t)&&(y&&(o=e.line,a=e.lineStart,c=e.position),qo(e,t,co,!0,r)&&(y?g=e.result:m=e.result),y||(Mo(e,d,f,p,g,m,o,a,c),p=g=m=null),Fo(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&0!==l)jo(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&Mo(e,d,f,p,g,null,o,a,c),b&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),b}(e,f,d))||function(e,t){var n,s,r,i,o,a,c,l,u,h,d,f,p=!0,g=e.tag,m=e.anchor,y=Object.create(null);if(91===(f=e.input.charCodeAt(e.position)))o=93,l=!1,i=[];else{if(123!==f)return!1;o=125,l=!0,i={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),f=e.input.charCodeAt(++e.position);0!==f;){if(Fo(e,!0,t),(f=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=g,e.anchor=m,e.kind=l?"mapping":"sequence",e.result=i,!0;p?44===f&&jo(e,"expected the node content, but found ','"):jo(e,"missed comma between flow collection entries"),d=null,a=c=!1,63===f&&Ao(e.input.charCodeAt(e.position+1))&&(a=c=!0,e.position++,Fo(e,!0,t)),n=e.line,s=e.lineStart,r=e.position,qo(e,t,io,!1,!0),h=e.tag,u=e.result,Fo(e,!0,t),f=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==f||(a=!0,f=e.input.charCodeAt(++e.position),Fo(e,!0,t),qo(e,t,io,!1,!0),d=e.result),l?Mo(e,i,y,h,u,d,n,s,r):a?i.push(Mo(e,null,y,h,u,d,n,s,r)):i.push(u),Fo(e,!0,t),44===(f=e.input.charCodeAt(e.position))?(p=!0,f=e.input.charCodeAt(++e.position)):p=!1}jo(e,"unexpected end of the stream within a flow collection")}(e,d)?m=!0:(o&&function(e,t){var n,s,r,i,o=lo,a=!1,c=!1,l=t,u=0,h=!1;if(124===(i=e.input.charCodeAt(e.position)))s=!1;else{if(62!==i)return!1;s=!0}for(e.kind="scalar",e.result="";0!==i;)if(43===(i=e.input.charCodeAt(++e.position))||45===i)lo===o?o=43===i?ho:uo:jo(e,"repeat of a chomping mode identifier");else{if(!((r=xo(i))>=0))break;0===r?jo(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?jo(e,"repeat of an indentation width identifier"):(l=t+r-1,c=!0)}if(vo(i)){do{i=e.input.charCodeAt(++e.position)}while(vo(i));if(35===i)do{i=e.input.charCodeAt(++e.position)}while(!wo(i)&&0!==i)}for(;0!==i;){for(Bo(e),e.lineIndent=0,i=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),wo(i))u++;else{if(e.lineIndent<l){o===ho?e.result+=mi.repeat("\n",a?1+u:u):o===lo&&a&&(e.result+="\n");break}for(s?vo(i)?(h=!0,e.result+=mi.repeat("\n",a?1+u:u)):h?(h=!1,e.result+=mi.repeat("\n",u+1)):0===u?a&&(e.result+=" "):e.result+=mi.repeat("\n",u):e.result+=mi.repeat("\n",a?1+u:u),a=!0,c=!0,u=0,n=e.position;!wo(i)&&0!==i;)i=e.input.charCodeAt(++e.position);Ro(e,n,e.position,!1)}}return!0}(e,d)||function(e,t){var n,s,r;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,s=r=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(Ro(e,s,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;s=e.position,e.position++,r=e.position}else wo(n)?(Ro(e,s,r,!0),Go(e,Fo(e,!1,t)),s=r=e.position):e.position===e.lineStart&&$o(e)?jo(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);jo(e,"unexpected end of the stream within a single quoted scalar")}(e,d)||function(e,t){var n,s,r,i,o,a;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return Ro(e,n,e.position,!0),e.position++,!0;if(92===a){if(Ro(e,n,e.position,!0),wo(a=e.input.charCodeAt(++e.position)))Fo(e,!1,t);else if(a<256&&Po[a])e.result+=To[a],e.position++;else if((o=Eo(a))>0){for(r=o,i=0;r>0;r--)(o=ko(a=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+o:jo(e,"expected hexadecimal character");e.result+=So(i),e.position++}else jo(e,"unknown escape sequence");n=s=e.position}else wo(a)?(Ro(e,n,s,!0),Go(e,Fo(e,!1,t)),n=s=e.position):e.position===e.lineStart&&$o(e)?jo(e,"unexpected end of the document within a double quoted scalar"):(e.position++,s=e.position)}jo(e,"unexpected end of the stream within a double quoted scalar")}(e,d)?m=!0:!function(e){var t,n,s;if(42!==(s=e.input.charCodeAt(e.position)))return!1;for(s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!Ao(s)&&!_o(s);)s=e.input.charCodeAt(++e.position);return e.position===t&&jo(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),ro.call(e.anchorMap,n)||jo(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Fo(e,!0,-1),!0}(e)?function(e,t,n){var s,r,i,o,a,c,l,u,h=e.kind,d=e.result;if(Ao(u=e.input.charCodeAt(e.position))||_o(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(Ao(s=e.input.charCodeAt(e.position+1))||n&&_o(s)))return!1;for(e.kind="scalar",e.result="",r=i=e.position,o=!1;0!==u;){if(58===u){if(Ao(s=e.input.charCodeAt(e.position+1))||n&&_o(s))break}else if(35===u){if(Ao(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&$o(e)||n&&_o(u))break;if(wo(u)){if(a=e.line,c=e.lineStart,l=e.lineIndent,Fo(e,!1,-1),e.lineIndent>=t){o=!0,u=e.input.charCodeAt(e.position);continue}e.position=i,e.line=a,e.lineStart=c,e.lineIndent=l;break}}o&&(Ro(e,r,i,!1),Go(e,e.line-a),r=i=e.position,o=!1),vo(u)||(i=e.position+1),u=e.input.charCodeAt(++e.position)}return Ro(e,r,i,!1),!!e.result||(e.kind=h,e.result=d,!1)}(e,d,io===n)&&(m=!0,null===e.tag&&(e.tag="?")):(m=!0,null===e.tag&&null===e.anchor||jo(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(m=a&&Ho(e,f))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&jo(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,l=e.implicitTypes.length;c<l;c+=1)if((h=e.implicitTypes[c]).resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(ro.call(e.typeMap[e.kind||"fallback"],e.tag))h=e.typeMap[e.kind||"fallback"][e.tag];else for(h=null,c=0,l=(u=e.typeMap.multi[e.kind||"fallback"]).length;c<l;c+=1)if(e.tag.slice(0,u[c].tag.length)===u[c].tag){h=u[c];break}h||jo(e,"unknown tag !<"+e.tag+">"),null!==e.result&&h.kind!==e.kind&&jo(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result,e.tag)?(e.result=h.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):jo(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function Ko(e){var t,n,s,r,i=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(r=e.input.charCodeAt(e.position))&&(Fo(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==r));){for(o=!0,r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!Ao(r);)r=e.input.charCodeAt(++e.position);for(s=[],(n=e.input.slice(t,e.position)).length<1&&jo(e,"directive name must not be less than one character in length");0!==r;){for(;vo(r);)r=e.input.charCodeAt(++e.position);if(35===r){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&!wo(r));break}if(wo(r))break;for(t=e.position;0!==r&&!Ao(r);)r=e.input.charCodeAt(++e.position);s.push(e.input.slice(t,e.position))}0!==r&&Bo(e),ro.call(Uo,n)?Uo[n](e,n,s):Lo(e,'unknown document directive "'+n+'"')}Fo(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,Fo(e,!0,-1)):o&&jo(e,"directives end mark is expected"),qo(e,e.lineIndent-1,co,!1,!0),Fo(e,!0,-1),e.checkLineBreaks&&po.test(e.input.slice(i,e.position))&&Lo(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&$o(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,Fo(e,!0,-1)):e.position<e.length-1&&jo(e,"end of the stream or a document separator is expected")}function Vo(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new Oo(e,t),s=e.indexOf("\0");for(-1!==s&&(n.position=s,jo(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Ko(n);return n.documents}var Jo=function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var s=Vo(e,n);if("function"!=typeof t)return s;for(var r=0,i=s.length;r<i;r+=1)t(s[r])},Qo={loadAll:Jo,load:function(e,t){var n=Vo(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new wi("expected a single document in the stream, but found more")}}},Yo=Object.prototype.toString,Xo=Object.prototype.hasOwnProperty,Zo=65279,ea=9,ta=10,na=13,sa=32,ra=33,ia=34,oa=35,aa=37,ca=38,la=39,ua=42,ha=44,da=45,fa=58,pa=61,ga=62,ma=63,ya=64,ba=91,wa=93,va=96,Aa=123,_a=124,ka=125,Ea={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},xa=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ca=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Sa(e){var t,n,s;if(t=e.toString(16).toUpperCase(),e<=255)n="x",s=2;else if(e<=65535)n="u",s=4;else{if(!(e<=4294967295))throw new wi("code point within a string may not be greater than 0xFFFFFFFF");n="U",s=8}return"\\"+n+mi.repeat("0",s-t.length)+t}var Pa=1,Ta=2;function Ia(e){this.schema=e.schema||so,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=mi.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,s,r,i,o,a,c;if(null===t)return{};for(n={},r=0,i=(s=Object.keys(t)).length;r<i;r+=1)o=s[r],a=String(t[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(c=e.compiledTypeMap.fallback[o])&&Xo.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[o]=a;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?Ta:Pa,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Oa(e,t){for(var n,s=mi.repeat(" ",t),r=0,i=-1,o="",a=e.length;r<a;)-1===(i=e.indexOf("\n",r))?(n=e.slice(r),r=a):(n=e.slice(r,i+1),r=i+1),n.length&&"\n"!==n&&(o+=s),o+=n;return o}function Na(e,t){return"\n"+mi.repeat(" ",e.indent*t)}function ja(e){return e===sa||e===ea}function La(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==Zo||65536<=e&&e<=1114111}function Ua(e){return La(e)&&e!==Zo&&e!==na&&e!==ta}function Ra(e,t,n){var s=Ua(e),r=s&&!ja(e);return(n?s:s&&e!==ha&&e!==ba&&e!==wa&&e!==Aa&&e!==ka)&&e!==oa&&!(t===fa&&!r)||Ua(t)&&!ja(t)&&e===oa||t===fa&&r}function Da(e,t){var n,s=e.charCodeAt(t);return s>=55296&&s<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(s-55296)+n-56320+65536:s}function Ma(e){return/^\n* /.test(e)}var Ba=1,Fa=2,$a=3,Ga=4,Ha=5;function za(e,t,n,s,r,i,o,a){var c,l=0,u=null,h=!1,d=!1,f=-1!==s,p=-1,g=function(e){return La(e)&&e!==Zo&&!ja(e)&&e!==da&&e!==ma&&e!==fa&&e!==ha&&e!==ba&&e!==wa&&e!==Aa&&e!==ka&&e!==oa&&e!==ca&&e!==ua&&e!==ra&&e!==_a&&e!==pa&&e!==ga&&e!==la&&e!==ia&&e!==aa&&e!==ya&&e!==va}(Da(e,0))&&function(e){return!ja(e)&&e!==fa}(Da(e,e.length-1));if(t||o)for(c=0;c<e.length;l>=65536?c+=2:c++){if(!La(l=Da(e,c)))return Ha;g=g&&Ra(l,u,a),u=l}else{for(c=0;c<e.length;l>=65536?c+=2:c++){if((l=Da(e,c))===ta)h=!0,f&&(d=d||c-p-1>s&&" "!==e[p+1],p=c);else if(!La(l))return Ha;g=g&&Ra(l,u,a),u=l}d=d||f&&c-p-1>s&&" "!==e[p+1]}return h||d?n>9&&Ma(e)?Ha:o?i===Ta?Ha:Fa:d?Ga:$a:!g||o||r(e)?i===Ta?Ha:Fa:Ba}function Wa(e,t,n,s,r){e.dump=function(){if(0===t.length)return e.quotingType===Ta?'""':"''";if(!e.noCompatMode&&(-1!==xa.indexOf(t)||Ca.test(t)))return e.quotingType===Ta?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,n),o=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=s||e.flowLevel>-1&&n>=e.flowLevel;switch(za(t,a,e.indent,o,(function(t){return function(e,t){var n,s;for(n=0,s=e.implicitTypes.length;n<s;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!s,r)){case Ba:return t;case Fa:return"'"+t.replace(/'/g,"''")+"'";case $a:return"|"+qa(t,e.indent)+Ka(Oa(t,i));case Ga:return">"+qa(t,e.indent)+Ka(Oa(function(e,t){var n,s,r=/(\n+)([^\n]*)/g,i=(a=e.indexOf("\n"),a=-1!==a?a:e.length,r.lastIndex=a,Va(e.slice(0,a),t)),o="\n"===e[0]||" "===e[0];var a;for(;s=r.exec(e);){var c=s[1],l=s[2];n=" "===l[0],i+=c+(o||n||""===l?"":"\n")+Va(l,t),o=n}return i}(t,o),i));case Ha:return'"'+function(e){for(var t,n="",s=0,r=0;r<e.length;s>=65536?r+=2:r++)s=Da(e,r),!(t=Ea[s])&&La(s)?(n+=e[r],s>=65536&&(n+=e[r+1])):n+=t||Sa(s);return n}(t)+'"';default:throw new wi("impossible error: invalid scalar style")}}()}function qa(e,t){var n=Ma(e)?String(t):"",s="\n"===e[e.length-1];return n+(s&&("\n"===e[e.length-2]||"\n"===e)?"+":s?"":"-")+"\n"}function Ka(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function Va(e,t){if(""===e||" "===e[0])return e;for(var n,s,r=/ [^ ]/g,i=0,o=0,a=0,c="";n=r.exec(e);)(a=n.index)-i>t&&(s=o>i?o:a,c+="\n"+e.slice(i,s),i=s+1),o=a;return c+="\n",e.length-i>t&&o>i?c+=e.slice(i,o)+"\n"+e.slice(o+1):c+=e.slice(i),c.slice(1)}function Ja(e,t,n,s){var r,i,o,a="",c=e.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),(Ya(e,t+1,o,!0,!0,!1,!0)||void 0===o&&Ya(e,t+1,null,!0,!0,!1,!0))&&(s&&""===a||(a+=Na(e,t)),e.dump&&ta===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=c,e.dump=a||"[]"}function Qa(e,t,n){var s,r,i,o,a,c;for(i=0,o=(r=n?e.explicitTypes:e.implicitTypes).length;i<o;i+=1)if(((a=r[i]).instanceOf||a.predicate)&&(!a.instanceOf||"object"==typeof t&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,"[object Function]"===Yo.call(a.represent))s=a.represent(t,c);else{if(!Xo.call(a.represent,c))throw new wi("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');s=a.represent[c](t,c)}e.dump=s}return!0}return!1}function Ya(e,t,n,s,r,i,o){e.tag=null,e.dump=n,Qa(e,n,!1)||Qa(e,n,!0);var a,c=Yo.call(e.dump),l=s;s&&(s=e.flowLevel<0||e.flowLevel>t);var u,h,d="[object Object]"===c||"[object Array]"===c;if(d&&(h=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||h||2!==e.indent&&t>0)&&(r=!1),h&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(d&&h&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===c)s&&0!==Object.keys(e.dump).length?(!function(e,t,n,s){var r,i,o,a,c,l,u="",h=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new wi("sortKeys must be a boolean or a function");for(r=0,i=d.length;r<i;r+=1)l="",s&&""===u||(l+=Na(e,t)),a=n[o=d[r]],e.replacer&&(a=e.replacer.call(n,o,a)),Ya(e,t+1,o,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&ta===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,c&&(l+=Na(e,t)),Ya(e,t+1,a,!0,c)&&(e.dump&&ta===e.dump.charCodeAt(0)?l+=":":l+=": ",u+=l+=e.dump));e.tag=h,e.dump=u||"{}"}(e,t,e.dump,r),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var s,r,i,o,a,c="",l=e.tag,u=Object.keys(n);for(s=0,r=u.length;s<r;s+=1)a="",""!==c&&(a+=", "),e.condenseFlow&&(a+='"'),o=n[i=u[s]],e.replacer&&(o=e.replacer.call(n,i,o)),Ya(e,t,i,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ya(e,t,o,!1,!1)&&(c+=a+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===c)s&&0!==e.dump.length?(e.noArrayIndent&&!o&&t>0?Ja(e,t-1,e.dump,r):Ja(e,t,e.dump,r),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var s,r,i,o="",a=e.tag;for(s=0,r=n.length;s<r;s+=1)i=n[s],e.replacer&&(i=e.replacer.call(n,String(s),i)),(Ya(e,t,i,!1,!1)||void 0===i&&Ya(e,t,null,!1,!1))&&(""!==o&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new wi("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&Wa(e,e.dump,t,i,l)}null!==e.tag&&"?"!==e.tag&&(a=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),a="!"===e.tag[0]?"!"+a:"tag:yaml.org,2002:"===a.slice(0,18)?"!!"+a.slice(18):"!<"+a+">",e.dump=a+" "+e.dump)}return!0}function Xa(e,t){var n,s,r=[],i=[];for(Za(e,r,i),n=0,s=i.length;n<s;n+=1)t.duplicates.push(r[i[n]]);t.usedDuplicates=new Array(s)}function Za(e,t,n){var s,r,i;if(null!==e&&"object"==typeof e)if(-1!==(r=t.indexOf(e)))-1===n.indexOf(r)&&n.push(r);else if(t.push(e),Array.isArray(e))for(r=0,i=e.length;r<i;r+=1)Za(e[r],t,n);else for(r=0,i=(s=Object.keys(e)).length;r<i;r+=1)Za(e[s[r]],t,n)}function ec(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}const tc={Type:xi,Schema:Pi,FAILSAFE_SCHEMA:Ni,JSON_SCHEMA:Gi,CORE_SCHEMA:Hi,DEFAULT_SCHEMA:so,load:Qo.load,loadAll:Qo.loadAll,dump:{dump:function(e,t){var n=new Ia(t=t||{});n.noRefs||Xa(e,n);var s=e;return n.replacer&&(s=n.replacer.call({"":s},"",s)),Ya(n,0,s,!0,!0)?n.dump+"\n":""}}.dump,YAMLException:wi,types:{binary:Ji,float:$i,map:Oi,null:ji,pairs:eo,set:no,timestamp:qi,bool:Li,int:Mi,merge:Ki,omap:Xi,seq:Ii,str:Ti},safeLoad:ec("safeLoad","load"),safeLoadAll:ec("safeLoadAll","loadAll"),safeDump:ec("safeDump","dump")},nc=JSON.parse('{"confirm_button":{"en":"Confirm","ko":"","es":"Confirmar","fr":"Confirmer","de":"Besttigen","it":"Conferma","pt":"Confirmar","ru":"","zh-CN":"","zh-TW":"","ja":""}}'),sc=()=>{let e="",t="";return 2===ri.language.length?e=ri.language.toLowerCase():(e=ri.language.substring(0,2).toLowerCase(),t=ri.language.substring(3).toLowerCase()),{language:e,locale:t}},rc=(e,t={},n="en")=>{const s="string"==typeof e?nc[e]:e;if(void 0!==s){let e=s[ri.language];if(void 0===e){const{language:t,locale:n}=sc();e=s[t],"object"==typeof e&&(e=void 0!==e[n]?e[n]:e[Object.keys(e)[0]])}if(void 0===e){const t=s[n];e=void 0!==t?t:s[Object.keys(s)[0]]}if(void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),void 0!==e)for(const[n,s]of Object.entries(t)){const t=new RegExp(`{${n}}`,"g");e=e.replace(t,String(s))}return void 0===e?"":e}return console.error(`${e} not exists.`),""};rc.loadYAML=(e,t)=>{const n=tc.load(t);for(const[t,s]of Object.entries(n))void 0===nc[t]&&(nc[t]={}),nc[t][e]=s},rc.loadYAMLs=async e=>{const t=[];for(const[n,s]of Object.entries(e))for(const e of s)t.push((async()=>{const t=tc.load(await(await fetch(e)).text());if(void 0!==t)for(const[e,s]of Object.entries(t))void 0===nc[e]&&(nc[e]={}),nc[e][n]=s})());await Promise.all(t)},rc.getMessages=e=>nc[e],rc.getLangMessages=(e,t="en")=>{const{language:n,locale:s}=sc(),r="string"==typeof e?nc[e]:e;if(void 0!==r){let e=r[ri.language];if(void 0===e&&(e=r[n],void 0!==e&&"object"==typeof e&&(e=void 0!==e[s]?e[s]:e[Object.keys(e)[0]])),void 0===e){const n=r[t];e=void 0!==n?n:r[Object.keys(r)[0]]}return void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),{[n]:void 0===e?"":e}}return console.error(`${e} not exists.`),{[n]:""}};class ic extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class oc extends ic{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ac extends ic{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class cc extends ic{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var lc=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};class uc{constructor(e,{headers:t={},customFetch:s}={}){this.url=e,this.headers=t,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,9257,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return lc(this,void 0,void 0,(function*(){try{const{headers:s,method:r,body:i}=t;let o,a={};i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",o=i):"string"==typeof i?(a["Content-Type"]="text/plain",o=i):"undefined"!=typeof FormData&&i instanceof FormData?o=i:(a["Content-Type"]="application/json",o=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:o}).catch((e=>{throw new oc(e)})),l=c.headers.get("x-relay-error");if(l&&"true"===l)throw new ac(c);if(!c.ok)throw new cc(c);let u,h=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"multipart/form-data"===h?yield c.formData():yield c.text(),{data:u,error:null}}catch(e){return{data:null,error:e}}}))}}var hc=n(9257),dc=n.n(hc);class fc{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=dc():this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,s;let r=null,i=null,o=null,a=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),l=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");s&&l&&l.length>1&&(o=parseInt(l[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(r={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,o=null,a=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{r=JSON.parse(t),Array.isArray(r)&&404===e.status&&(i=[],r=null,a=200,c="OK")}catch(n){404===e.status&&""===t?(a=204,c="No Content"):r={message:t}}if(r&&this.isMaybeSingle&&(null===(s=null==r?void 0:r.details)||void 0===s?void 0:s.includes("0 rows"))&&(r=null,a=200,c="OK"),r&&this.shouldThrowOnError)throw r}return{error:r,data:i,count:o,status:a,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}}class pc extends fc{select(e){let t=!1;const n=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s}={}){const r=s?`${s}.order`:"order",i=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const s=void 0===n?"offset":`${n}.offset`,r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(r,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}={}){const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),a=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${a}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class gc extends pc{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class mc{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let r=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new gc({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new gc({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){const i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new gc({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new gc({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new gc({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const yc={"X-Client-Info":"postgrest-js/1.8.5"};class bc{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},yc),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new mc(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new bc(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:s}={}){let r;const i=new URL(`${this.url}/rpc/${e}`);let o;n?(r="HEAD",Object.entries(t).forEach((([e,t])=>{i.searchParams.append(e,`${t}`)}))):(r="POST",o=t);const a=Object.assign({},this.headers);return s&&(a.Prefer=`count=${s}`),new gc({method:r,url:i,headers:a,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}var wc=n(8179);const vc={"X-Client-Info":"realtime-js/2.8.4"};var Ac,_c,kc,Ec,xc,Cc,Sc;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Ac||(Ac={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(_c||(_c={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(kc||(kc={})),function(e){e.websocket="websocket"}(Ec||(Ec={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(xc||(xc={}));class Pc{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class Tc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=n.decode(e.slice(i,i+s));i+=s;const a=n.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:o,event:a,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class Ic{constructor(e,t,n={},s=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Cc||(Cc={}));class Oc{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oc.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=Oc.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],s()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Oc.syncDiff(this.state,e,t,n),s())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,s){const r=this.cloneDeep(e),i=this.transformState(t),o={},a={};return this.map(r,((e,t)=>{i[e]||(a[e]=t)})),this.map(i,((e,t)=>{const n=r[e];if(n){const s=t.map((e=>e.presence_ref)),r=n.map((e=>e.presence_ref)),i=t.filter((e=>r.indexOf(e.presence_ref)<0)),c=n.filter((e=>s.indexOf(e.presence_ref)<0));i.length>0&&(o[e]=i),c.length>0&&(a[e]=c)}else o[e]=t})),this.syncDiff(r,{joins:o,leaves:a},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,((t,s)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),i.length>0){const n=e[t].map((e=>e.presence_ref)),s=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...s)}n(t,i,s)})),this.map(i,((t,n)=>{let r=e[t];if(!r)return;const i=n.map((e=>e.presence_ref));r=r.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=r,s(t,r,n),0===r.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):s,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Sc||(Sc={}));const Nc=(e,t,n={})=>{var s;const r=null!==(s=n.skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce(((n,s)=>(n[s]=jc(s,e,t,r),n)),{})},jc=(e,t,n,s)=>{const r=t.find((t=>t.name===e)),i=null==r?void 0:r.type,o=n[e];return i&&!s.includes(i)?Lc(i,o):Uc(o)},Lc=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Bc(t,n)}switch(e){case Sc.bool:return Rc(t);case Sc.float4:case Sc.float8:case Sc.int2:case Sc.int4:case Sc.int8:case Sc.numeric:case Sc.oid:return Dc(t);case Sc.json:case Sc.jsonb:return Mc(t);case Sc.timestamp:return Fc(t);case Sc.abstime:case Sc.date:case Sc.daterange:case Sc.int4range:case Sc.int8range:case Sc.money:case Sc.reltime:case Sc.text:case Sc.time:case Sc.timestamptz:case Sc.timetz:case Sc.tsrange:case Sc.tstzrange:default:return Uc(t)}},Uc=e=>e,Rc=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Dc=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Mc=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Bc=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch(e){s=r?r.split(","):[]}return s.map((e=>Lc(t,e)))}return e},Fc=e=>"string"==typeof e?e.replace(" ","T"):e;var $c,Gc,Hc;!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}($c||($c={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(Gc||(Gc={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Hc||(Hc={}));class zc{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=_c.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ic(this,kc.join,this.params,this.timeout),this.rejoinTimer=new Pc((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=_c.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_c.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=_c.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_c.errored,this.rejoinTimer.scheduleTimeout())})),this._on(kc.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new Oc(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:i}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const o={},a={broadcast:r,presence:i,postgres_changes:null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==s?s:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var n;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const s=this.bindings.postgres_changes,r=null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0,i=[];for(let n=0;n<r;n++){const r=s[n],{filter:{event:o,schema:a,table:c,filter:l}}=r,u=t&&t[n];if(!u||u.event!==o||u.schema!==a||u.table!==c||u.filter!==l)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var s,r,i;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||n("ok"),o.receive("ok",(()=>n("ok"))),o.receive("timeout",(()=>n("timed out")))}));{const{event:r,payload:i}=e,o={method:"POST",headers:{apikey:null!==(n=this.socket.accessToken)&&void 0!==n?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout)).ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_c.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kc.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const s=new Ic(this,kc.leave,{},e);s.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),s.send(),this._canPush()||s.trigger("ok",{})}))}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout((()=>s.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ic(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const i=e.toLocaleLowerCase(),{close:o,error:a,leave:c,join:l}=kc;if(n&&[o,a,c,l].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter((e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===i})).map((e=>e.callback(u,n))):null===(r=this.bindings[i])||void 0===r||r.filter((e=>{var n,s,r,o,a,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(s=t.ids)||void 0===s?void 0:s.includes(i))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:i}=e,o={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:i};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,n)}))}_isClosed(){return this.state===_c.closed}_isJoined(){return this.state===_c.joined}_isJoining(){return this.state===_c.joining}_isLeaving(){return this.state===_c.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&zc.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(kc.close,{},e)}_onError(e){this._on(kc.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_c.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Nc(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Nc(e.columns,e.old_record)),t}}const Wc=()=>{};class qc{constructor(e,t){var s;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=vc,this.params={},this.timeout=1e4,this.transport=wc.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Wc,this.conn=null,this.sendBuffer=[],this.serializer=new Tc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,9257,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Ec.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey;r&&(this.accessToken=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Pc((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ac.connecting:return xc.Connecting;case Ac.open:return xc.Open;case Ac.closing:return xc.Closing;default:return xc.Closed}}isConnected(){return this.connectionState()===xc.Open}channel(e,t={config:{}}){const n=new zc(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:r}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${r})`,s),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(kc.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:s,ref:r}=e;(r&&r===this.pendingHeartbeatRef||n===(null==s?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${r&&"("+r+")"||""}`,s),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,s,r))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(kc.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Kc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vc(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Jc extends Kc{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Qc extends Kc{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Yc=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const Xc=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,9257,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)};var Zc=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const el=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tl=(e,t)=>Zc(void 0,void 0,void 0,(function*(){const s=yield Yc(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(n.t.bind(n,9257,23))).Response:Response}));e instanceof s?e.json().then((n=>{t(new Jc(el(n),e.status||500))})).catch((e=>{t(new Qc(el(e),e))})):t(new Qc(el(e),e))})),nl=(e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};function sl(e,t,n,s,r,i){return Zc(this,void 0,void 0,(function*(){return new Promise(((o,a)=>{e(n,nl(t,s,r,i)).then((e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()})).then((e=>o(e))).catch((e=>tl(e,a)))}))}))}function rl(e,t,n,s){return Zc(this,void 0,void 0,(function*(){return sl(e,"GET",t,n,s)}))}function il(e,t,n,s,r){return Zc(this,void 0,void 0,(function*(){return sl(e,"POST",t,s,r,n)}))}function ol(e,t,n,s,r){return Zc(this,void 0,void 0,(function*(){return sl(e,"DELETE",t,s,r,n)}))}var al=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const cl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ll={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ul{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Xc(s)}uploadOrUpdate(e,t,n,s){return al(this,void 0,void 0,(function*(){try{let r;const i=Object.assign(Object.assign({},ll),s),o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),r.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",i.cacheControl)):(r=n,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType);const a=this._removeEmptyFolders(t),c=this._getFinalPath(a),l=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:r,headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));if(l.ok)return{data:{path:a},error:null};return{data:null,error:yield l.json()}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}upload(e,t,n){return al(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,s){return al(this,void 0,void 0,(function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ll.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:i});if(a.ok)return{data:{path:r},error:null};return{data:null,error:yield a.json()}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}createSignedUploadUrl(e){return al(this,void 0,void 0,(function*(){try{let t=this._getFinalPath(e);const n=yield il(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+n.url),r=s.searchParams.get("token");if(!r)throw new Kc("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:r},error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}update(e,t,n){return al(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t){return al(this,void 0,void 0,(function*(){try{return{data:yield il(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}copy(e,t){return al(this,void 0,void 0,(function*(){try{return{data:{path:(yield il(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,n){return al(this,void 0,void 0,(function*(){try{let s=this._getFinalPath(e),r=yield il(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${i}`)},{data:r,error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,n){return al(this,void 0,void 0,(function*(){try{const s=yield il(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:s.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null}))),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}download(e,t){return al(this,void 0,void 0,(function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),r=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield rl(this.fetch,`${this.url}/${n}/${t}${r}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==r&&s.push(r);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&s.push(o);let a=s.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}remove(e){return al(this,void 0,void 0,(function*(){try{return{data:yield ol(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}list(e,t,n){return al(this,void 0,void 0,(function*(){try{const s=Object.assign(Object.assign(Object.assign({},cl),t),{prefix:e||""});return{data:yield il(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const hl={"X-Client-Info":"storage-js/2.5.4"};var dl=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};class fl{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},hl),t),this.fetch=Xc(n)}listBuckets(){return dl(this,void 0,void 0,(function*(){try{return{data:yield rl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}getBucket(e){return dl(this,void 0,void 0,(function*(){try{return{data:yield rl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return dl(this,void 0,void 0,(function*(){try{return{data:yield il(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return dl(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,s,r){return Zc(this,void 0,void 0,(function*(){return sl(e,"PUT",t,s,r,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return dl(this,void 0,void 0,(function*(){try{return{data:yield il(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return dl(this,void 0,void 0,(function*(){try{return{data:yield ol(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(Vc(e))return{data:null,error:e};throw e}}))}}class pl extends fl{constructor(e,t={},n){super(e,t,n)}from(e){return new ul(this.url,this.headers,e,this.fetch)}}let gl="";gl="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ml={"X-Client-Info":`supabase-js-${gl}/2.38.4`};var yl=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const bl=e=>{let t;return t=e||("undefined"==typeof fetch?dc():fetch),(...e)=>t(...e)},wl=(e,t,n)=>{const s=bl(n),r="undefined"==typeof Headers?hc.Headers:Headers;return(n,i)=>yl(void 0,void 0,void 0,(function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let c=new r(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),s(n,Object.assign(Object.assign({},i),{headers:c}))}))};const vl=()=>"undefined"!=typeof document,Al={tested:!1,writable:!1},_l=()=>{if(!vl())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Al.tested)return Al.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Al.tested=!0,Al.writable=!0}catch(e){Al.tested=!0,Al.writable=!1}return Al.writable};function kl(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(e){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}const El=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,9257,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},xl=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json,Cl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Sl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return n}},Pl=async(e,t)=>{await e.removeItem(t)};class Tl{constructor(){this.promise=new Tl.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function Il(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,s,r,i,o,a,c,l="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),n=i<<2|o>>4,s=(15&o)<<4|a>>2,r=(3&a)<<6|c,l+=String.fromCharCode(n),64!=a&&0!=s&&(l+=String.fromCharCode(s)),64!=c&&0!=r&&(l+=String.fromCharCode(r));return l}(n))}function Ol(e){return("0"+e.toString(16)).substr(-2)}function Nl(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Ol).join("")}async function jl(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map((e=>String.fromCharCode(e))).join("")}(e);return function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(t)}Tl.promiseConstructor=Promise;class Ll extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Ul(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Rl extends Ll{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Dl extends Ll{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ml extends Ll{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Bl extends Ml{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Fl extends Ml{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class $l extends Ml{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Gl extends Ml{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hl extends Ml{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zl extends Ml{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function Wl(e){return Ul(e)&&"AuthRetryableFetchError"===e.name}var ql=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const Kl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Vl=[502,503,504];async function Jl(e){if(!xl(e))throw new zl(Kl(e),0);if(Vl.includes(e.status))throw new zl(Kl(e),e.status);let t;try{t=await e.json()}catch(e){throw new Dl(Kl(e),e)}throw new Rl(Kl(t),e.status||500)}const Ql=(e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function Yl(e,t,n,s){var r;const i=Object.assign({},null==s?void 0:s.headers);(null==s?void 0:s.jwt)&&(i.Authorization=`Bearer ${s.jwt}`);const o=null!==(r=null==s?void 0:s.query)&&void 0!==r?r:{};(null==s?void 0:s.redirectTo)&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await async function(e,t,n,s,r,i){const o=Ql(t,s,r,i);let a;try{a=await e(n,o)}catch(e){throw console.error(e),new zl(Kl(e),0)}a.ok||await Jl(a);if(null==s?void 0:s.noResolveJson)return a;try{return await a.json()}catch(e){await Jl(e)}}(e,t,n+a,{headers:i,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(c):{data:Object.assign({},c),error:null}}function Xl(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Zl(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function eu(e){return{data:e,error:null}}function tu(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=e,o=ql(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},user:Object.assign({},o)},error:null}}function nu(e){return e}var su=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};class ru{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=El(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Yl(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Ul(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await Yl(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Zl})}catch(e){if(Ul(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,n=su(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null==n?void 0:n.newEmail,delete s.newEmail),await Yl(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:tu,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(Ul(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await Yl(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zl})}catch(e){if(Ul(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,n,s,r,i,o,a;try{const c={nextPage:null,lastPage:0,total:0},l=await Yl(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:nu});if(l.error)throw l.error;const u=await l.json(),h=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=l.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t})),c.total=parseInt(h)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(e){if(Ul(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await Yl(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zl})}catch(e){if(Ul(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await Yl(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Zl})}catch(e){if(Ul(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await Yl(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Zl})}catch(e){if(Ul(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{const{data:t,error:n}=await Yl(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(Ul(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await Yl(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(Ul(e))return{data:null,error:e};throw e}}}const iu="2.57.0",ou={"X-Client-Info":`gotrue-js/${iu}`},au={getItem:e=>_l()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{_l()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{_l()&&globalThis.localStorage.removeItem(e)}};function cu(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}globalThis&&_l()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class lu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const uu={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ou,flowType:"implicit",debug:!1},hu=3e4;async function du(e,t,n){return await n()}class fu{constructor(e){var t;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fu.nextInstanceID,fu.nextInstanceID+=1,this.instanceID>0&&vl()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},uu),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ru({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=El(n.fetch),this.lock=n.lock||du,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:_l()?this.storage=au:(this.memoryStorage={},this.storage=cu(this.memoryStorage)):(this.memoryStorage={},this.storage=cu(this.memoryStorage)),vl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${iu}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const e=!!vl()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:s,redirectType:r}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",r),await this._saveSession(s),setTimeout((async()=>{"recovery"===r?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Ul(e)?{error:e}:{error:new Dl("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,n,s;try{let r;if(await this._removeSession(),"email"in e){const{email:n,password:s,options:i}=e;let o=null,a=null;if("pkce"===this.flowType){const e=Nl();await Cl(this.storage,`${this.storageKey}-code-verifier`,e),o=await jl(e),a=e===o?"plain":"s256"}r=await Yl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},xform:Xl})}else{if(!("phone"in e))throw new $l("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:o}=e;r=await Yl(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(s=null==o?void 0:o.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:Xl})}}const{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(Ul(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){const{email:n,password:s,options:r}=e;t=await Yl(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:Xl})}else{if(!("phone"in e))throw new $l("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await Yl(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:Xl})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:s}):{data:{user:null,session:null},error:new Fl}}catch(e){if(Ul(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,n,s,r;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await Sl(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:s}=await Yl(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Xl});return await Pl(this.storage,`${this.storageKey}-code-verifier`),s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:s}):{data:{user:null,session:null},error:new Fl}}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:n,token:s,access_token:r,nonce:i}=e,o=await Yl(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Xl}),{data:a,error:c}=o;return c?{data:{user:null,session:null},error:c}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c}):{data:{user:null,session:null},error:new Fl}}catch(e){if(Ul(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,n,s,r,i;try{if(await this._removeSession(),"email"in e){const{email:s,options:r}=e;let i=null,o=null;if("pkce"===this.flowType){const e=Nl();await Cl(this.storage,`${this.storageKey}-code-verifier`,e),i=await jl(e),o=e===i?"plain":"s256"}const{error:a}=await Yl(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null==r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:n}=e,{data:o,error:a}=await Yl(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null==n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new $l("You must provide either an email or phone number.")}catch(e){if(Ul(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,n;try{let s,r;"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession(),"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:o}=await Yl(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:Xl});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,c=i.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(Ul(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,n,s;try{await this._removeSession();let r=null,i=null;if("pkce"===this.flowType){const e=Nl();await Cl(this.storage,`${this.storageKey}-code-verifier`,e),r=await jl(e),i=e===r?"plain":"s256"}return await Yl(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:eu})}catch(e){if(Ul(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Bl;const{error:s}=await Yl(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(Ul(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:r}=e,{error:i}=await Yl(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:i,error:o}=await Yl(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new $l("You must provide either an email or phone number and a type")}catch(e){if(Ul(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,(async()=>await this._getUser())))}async _getUser(e){try{return e?await Yl(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zl}):await this._useSession((async e=>{var t,n;const{data:s,error:r}=e;if(r)throw r;return await Yl(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(t=s.session)||void 0===t?void 0:t.access_token)&&void 0!==n?n:void 0,xform:Zl})}))}catch(e){if(Ul(e))return{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new Bl;const i=s.session;let o=null,a=null;if("pkce"===this.flowType&&null!=e.email){const e=Nl();await Cl(this.storage,`${this.storageKey}-code-verifier`,e),o=await jl(e),a=e===o?"plain":"s256"}const{data:c,error:l}=await Yl(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:i.access_token,xform:Zl});if(l)throw l;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(e){if(Ul(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return Il(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bl;const t=Date.now()/1e3;let n=t,s=!0,r=null;const i=Il(e.access_token);if(i.exp&&(n=i.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(Ul(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new Bl;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(Ul(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e){try{if(!vl())throw new Gl("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new Gl("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new Hl("Not a valid PKCE flow url.");const t=kl(window.location.href);if(e){if(!t.code)throw new Hl("No code detected.");const{data:e,error:n}=await this._exchangeCodeForSession(t.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Gl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:i,expires_in:o,expires_at:a,token_type:c}=t;if(!(r&&o&&i&&c))throw new Gl("No session defined in URL");const l=Math.round(Date.now()/1e3),u=parseInt(o);let h=l+u;a&&(h=parseInt(a));const d=h-l;1e3*d<=hu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${u}s`);const f=h-u;l-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,l):l-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",f,h,l);const{data:p,error:g}=await this._getUser(r);if(g)throw g;const m={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:u,expires_at:h,refresh_token:i,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(e){if(Ul(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const e=kl(window.location.href);return!(!vl()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=kl(window.location.href),t=await Sl(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const i=null===(n=s.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Ul(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Pl(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(t){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}}))}async resetPasswordForEmail(e,t={}){let n=null,s=null;if("pkce"===this.flowType){const e=Nl();await Cl(this.storage,`${this.storageKey}-code-verifier`,e),n=await jl(e),s=e===n?"plain":"s256"}try{return await Yl(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(Ul(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*n),this._debug(t,"refreshing attempt",n),await Yl(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xl})),s=(e,t,n)=>n&&n.error&&Wl(n.error)&&Date.now()+200*(e+1)-r<hu,new Promise(((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await n(r);if(!s(r,null,t))return void e(t)}catch(e){if(!s(r,e))return void t(e)}})()})))}catch(e){if(this._debug(t,"error",e),Ul(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),vl()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Sl(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const s=Math.round(Date.now()/1e3),r=(null!==(e=n.expires_at)&&void 0!==e?e:1/0)<s+10;if(this._debug(t,`session has${r?"":" not"} expired with margin of 10s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Wl(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(e){return this._debug(t,"error",e),void console.error(e)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Bl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Tl;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Bl;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(e){if(this._debug(s,"error",e),Ul(e)){const n={session:null,error:e};return null===(t=this.refreshingDeferred)||void 0===t||t.resolve(n),n}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(e){s.push(e)}}));if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Cl(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Pl(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vl()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),hu);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-e)/hu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof lu))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vl()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const n=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===this.flowType){const e=Nl();await Cl(this.storage,`${this.storageKey}-code-verifier`,e);const t=await jl(e),s=e===t?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",t,"method",s);const r=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(s)}`});n.push(r.toString())}if(null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);n.push(e.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await Yl(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Ul(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession((async t=>{var n,s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await Yl(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:((null===(s=null==o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}))}catch(e){if(Ul(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:o}=await Yl(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})}))}catch(e){if(Ul(e))return{data:null,error:e};throw e}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await Yl(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Ul(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],s=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(s.access_token);let o=null;i.aal&&(o=i.aal);let a=o;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}))))}}fu.nextInstanceID=0;class pu extends fu{constructor(e){super(e)}}var gu=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};const mu={headers:ml},yu={schema:"public"},bu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wu={};class vu{constructor(e,t,n){var s,r,i,o,a,c,l,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=e.replace(/\/$/,"");this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f=function(e,t){const{db:n,auth:s,realtime:r,global:i}=e,{db:o,auth:a,realtime:c,global:l}=t;return{db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},l),i)}}(null!=n?n:{},{db:yu,realtime:wu,auth:Object.assign(Object.assign({},bu),{storageKey:d}),global:mu});this.storageKey=null!==(r=null===(s=f.auth)||void 0===s?void 0:s.storageKey)&&void 0!==r?r:"",this.headers=null!==(o=null===(i=f.global)||void 0===i?void 0:i.headers)&&void 0!==o?o:{},this.auth=this._initSupabaseAuthClient(null!==(a=f.auth)&&void 0!==a?a:{},this.headers,null===(c=f.global)||void 0===c?void 0:c.fetch),this.fetch=wl(t,this._getAccessToken.bind(this),null===(l=f.global)||void 0===l?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new bc(`${h}/rest/v1`,{headers:this.headers,schema:null===(u=f.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new uc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new pl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return gu(this,void 0,void 0,(function*(){const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:r,flowType:i,debug:o},a,c){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pu({url:this.authUrl,headers:Object.assign(Object.assign({},l),a),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:i,debug:o,fetch:c})}_initRealtimeClient(e){return new qc(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=n?n:null),this.changedAccessToken=n)}}new class extends Qr{client;connect(e,t){this.client=((e,t,n)=>new vu(e,t,n))(e,t,{auth:{autoRefreshToken:!0,persistSession:!0}})}};class Au{static checkEmailAccess(){let e=new URLSearchParams(location.search).get("error_description");e&&("Error getting user email from external provider"===e&&(e+=".\nPlease add an email in your X account settings and allow email access."),new di({title:"Error",message:e}))}}const _u="6.7.1";function ku(e,t,n){const s=t.split("|").map((e=>e.trim()));for(let n=0;n<s.length;n++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const r=new Error(`invalid value for type ${t}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${n}`,r.value=e,r}async function Eu(e){const t=Object.keys(e);return(await Promise.all(t.map((t=>Promise.resolve(e[t]))))).reduce(((e,n,s)=>(e[t[s]]=n,e)),{})}function xu(e,t,n){for(let s in t){let r=t[s];const i=n?n[s]:null;i&&ku(r,i,s),Object.defineProperty(e,s,{enumerable:!0,value:r,writable:!1})}}function Cu(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(Cu).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let s=0;s<e.length;s++)n+=t[e[s]>>4],n+=t[15&e[s]];return n}if("object"==typeof e&&"function"==typeof e.toJSON)return Cu(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map((t=>`${Cu(t)}: ${Cu(e[t])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Su(e,t){return e&&e.code===t}function Pu(e){return Su(e,"CALL_EXCEPTION")}function Tu(e,t,n){{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Cu(n)}`);for(const e in n){const t=n[e];s.push(e+"="+Cu(t))}}s.push(`code=${t}`),s.push(`version=${_u}`),s.length&&(e+=" ("+s.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(e);break;default:s=new Error(e)}return xu(s,{code:t}),n&&Object.assign(s,n),s}function Iu(e,t,n,s){if(!e)throw Tu(t,n,s)}function Ou(e,t,n,s){Iu(e,t,"INVALID_ARGUMENT",{argument:n,value:s})}function Nu(e,t,n){null==n&&(n=""),n&&(n=": "+n),Iu(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),Iu(e<=t,"too many arguemnts"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const ju=["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){const e=String.fromCharCode(233).normalize("NFD");if(e!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(e){}return e}),[]);function Lu(e,t,n){if(null==n&&(n=""),e!==t){let e=n,t="new";n&&(e+=".",t+=" "+n),Iu(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function Uu(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let n=2;for(let s=0;s<t.length;s++)t[s]=parseInt(e.substring(n,n+2),16),n+=2;return t}Ou(!1,"invalid BytesLike value",t||"value",e)}function Ru(e,t){return Uu(e,t,!1)}function Du(e,t){return Uu(e,t,!0)}function Mu(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0))}const Bu="0123456789abcdef";function Fu(e){const t=Ru(e);let n="0x";for(let e=0;e<t.length;e++){const s=t[e];n+=Bu[(240&s)>>4]+Bu[15&s]}return n}function $u(e){return"0x"+e.map((e=>Fu(e).substring(2))).join("")}function Gu(e){return Mu(e,!0)?(e.length-2)/2:Ru(e).length}function Hu(e,t,n){const s=Ru(e);return null!=n&&n>s.length&&Iu(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),Fu(s.slice(null==t?0:t,null==n?s.length:n))}function zu(e,t,n){const s=Ru(e);Iu(t>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:t,offset:t+1});const r=new Uint8Array(t);return r.fill(0),n?r.set(s,t-s.length):r.set(s,0),Fu(r)}function Wu(e,t){return zu(e,t,!0)}const qu=BigInt(0),Ku=BigInt(1),Vu=9007199254740991;function Ju(e,t){const n=Zu(e,"value"),s=BigInt(nh(t,"width"));if(Iu(n>>s===qu,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>s-Ku){return-((~n&(Ku<<s)-Ku)+Ku)}return n}function Qu(e,t){let n=Xu(e,"value");const s=BigInt(nh(t,"width")),r=Ku<<s-Ku;if(n<qu){n=-n,Iu(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return(~n&(Ku<<s)-Ku)+Ku}return Iu(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),n}function Yu(e,t){const n=Zu(e,"value"),s=BigInt(nh(t,"bits"));return n&(Ku<<s)-Ku}function Xu(e,t){switch(typeof e){case"bigint":return e;case"number":return Ou(Number.isInteger(e),"underflow",t||"value",e),Ou(e>=-Vu&&e<=Vu,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(n){Ou(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}Ou(!1,"invalid BigNumberish value",t||"value",e)}function Zu(e,t){const n=Xu(e,t);return Iu(n>=qu,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const eh="0123456789abcdef";function th(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=eh[n>>4],t+=eh[15&n];return BigInt(t)}return Xu(e)}function nh(e,t){switch(typeof e){case"bigint":return Ou(e>=-Vu&&e<=Vu,"overflow",t||"value",e),Number(e);case"number":return Ou(Number.isInteger(e),"underflow",t||"value",e),Ou(e>=-Vu&&e<=Vu,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return nh(BigInt(e),t)}catch(n){Ou(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}Ou(!1,"invalid numeric value",t||"value",e)}function sh(e,t){let n=Zu(e,"value").toString(16);if(null==t)n.length%2&&(n="0"+n);else{const s=nh(t,"width");for(Iu(2*s>=n.length,`value exceeds width (${s} bits)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*s;)n="0"+n}return"0x"+n}function rh(e){const t=Zu(e,"value");if(t===qu)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const s=new Uint8Array(n.length/2);for(let e=0;e<s.length;e++){const t=2*e;s[e]=parseInt(n.substring(t,t+2),16)}return s}function ih(e){let t=Fu(function(e){return Mu(e,!0)||e instanceof Uint8Array}(e)?e:rh(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const oh=32,ah=new Uint8Array(oh),ch=["then"],lh={};function uh(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}class hh extends Array{#e;constructor(...e){const t=e[0];let n=e[1],s=(e[2]||[]).slice(),r=!0;t!==lh&&(n=e,s=[],r=!1),super(n.length),n.forEach(((e,t)=>{this[t]=e}));const i=s.reduce(((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e)),new Map);if(this.#e=Object.freeze(n.map(((e,t)=>{const n=s[t];return null!=n&&1===i.get(n)?n:null}))),r)return Object.freeze(this),new Proxy(this,{get:(e,t,n)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){const n=nh(t,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const s=e[n];return s instanceof Error&&uh(`index ${n}`,s),s}if(ch.indexOf(t)>=0)return Reflect.get(e,t,n);const s=e[t];if(s instanceof Function)return function(...t){return s.apply(this===n?e:this,t)};if(!(t in e))return e.getValue.apply(this===n?e:this,[t])}return Reflect.get(e,t,n)}})}toArray(){const e=[];return this.forEach(((t,n)=>{t instanceof Error&&uh(`index ${n}`,t),e.push(t)})),e}toObject(){return this.#e.reduce(((e,t,n)=>(Iu(null!=t,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),t in e||(e[t]=this.getValue(t)),e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);const n=[],s=[];for(let r=e;r<t;r++)n.push(this[r]),s.push(this.#e[r]);return new hh(lh,n,s)}filter(e,t){const n=[],s=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&uh(`index ${r}`,i),e.call(t,i,r,this)&&(n.push(i),s.push(this.#e[r]))}return new hh(lh,n,s)}map(e,t){const n=[];for(let s=0;s<this.length;s++){const r=this[s];r instanceof Error&&uh(`index ${s}`,r),n.push(e.call(t,r,s,this))}return n}getValue(e){const t=this.#e.indexOf(e);if(-1===t)return;const n=this[t];return n instanceof Error&&uh(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,t){return new hh(lh,e,t)}}function dh(e){let t=rh(e);return Iu(t.length<=oh,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:oh,offset:t.length}),t.length!==oh&&(t=Du($u([ah.slice(t.length%oh),t]))),t}class fh{name;type;localName;dynamic;constructor(e,t,n,s){xu(this,{name:e,type:t,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){Ou(!1,e,this.localName,t)}}class ph{#t;#n;constructor(){this.#t=[],this.#n=0}get data(){return $u(this.#t)}get length(){return this.#n}#s(e){return this.#t.push(e),this.#n+=e.length,e.length}appendWriter(e){return this.#s(Du(e.data))}writeBytes(e){let t=Du(e);const n=t.length%oh;return n&&(t=Du($u([t,ah.slice(n)]))),this.#s(t)}writeValue(e){return this.#s(dh(e))}writeUpdatableValue(){const e=this.#t.length;return this.#t.push(ah),this.#n+=oh,t=>{this.#t[e]=dh(t)}}}class gh{allowLoose;#t;#r;constructor(e,t){xu(this,{allowLoose:!!t}),this.#t=Du(e),this.#r=0}get data(){return Fu(this.#t)}get dataLength(){return this.#t.length}get consumed(){return this.#r}get bytes(){return new Uint8Array(this.#t)}#i(e,t,n){let s=Math.ceil(t/oh)*oh;return this.#r+s>this.#t.length&&(this.allowLoose&&n&&this.#r+t<=this.#t.length?s=t:Iu(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Du(this.#t),length:this.#t.length,offset:this.#r+s})),this.#t.slice(this.#r,this.#r+s)}subReader(e){return new gh(this.#t.slice(this.#r+e),this.allowLoose)}readBytes(e,t){let n=this.#i(0,e,!!t);return this.#r+=n.length,n.slice(0,e)}readValue(){return th(this.readBytes(oh))}readIndex(){return nh(th(this.readBytes(oh)))}}function mh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function yh(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const bh={number:mh,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:yh,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");mh(e.outputLen),mh(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){yh(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},wh=bh,vh=BigInt(2**32-1),Ah=BigInt(32);function _h(e,t=!1){return t?{h:Number(e&vh),l:Number(e>>Ah&vh)}:{h:0|Number(e>>Ah&vh),l:0|Number(e&vh)}}const kh={fromBig:_h,split:function(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:o}=_h(e[r],t);[n[r],s[r]]=[i,o]}return[n,s]},toBig:(e,t)=>BigInt(e>>>0)<<Ah|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,s){const r=(t>>>0)+(s>>>0);return{h:e+n+(r/2**32|0)|0,l:0|r}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,s)=>t+n+s+(e/2**32|0)|0,add4L:(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),add4H:(e,t,n,s,r)=>t+n+s+r+(e/2**32|0)|0,add5H:(e,t,n,s,r,i)=>t+n+s+r+i+(e/2**32|0)|0,add5L:(e,t,n,s,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(r>>>0)},Eh=kh,xh=("object"==typeof self&&"crypto"in self&&self.crypto,e=>new DataView(e.buffer,e.byteOffset,e.byteLength)),Ch=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Sh(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class Ph{clone(){return this._cloneInto()}}function Th(e){const t=t=>e().update(Sh(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const[Ih,Oh,Nh]=[[],[],[]],jh=BigInt(0),Lh=BigInt(1),Uh=BigInt(2),Rh=BigInt(7),Dh=BigInt(256),Mh=BigInt(113);for(let e=0,t=Lh,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],Ih.push(2*(5*s+n)),Oh.push((e+1)*(e+2)/2%64);let r=jh;for(let e=0;e<7;e++)t=(t<<Lh^(t>>Rh)*Mh)%Dh,t&Uh&&(r^=Lh<<(Lh<<BigInt(e))-Lh);Nh.push(r)}const[Bh,Fh]=Eh.split(Nh,!0),$h=(e,t,n)=>n>32?Eh.rotlBH(e,t,n):Eh.rotlSH(e,t,n),Gh=(e,t,n)=>n>32?Eh.rotlBL(e,t,n):Eh.rotlSL(e,t,n);class Hh extends Ph{constructor(e,t,n,s=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,wh.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,r=(t+2)%10,i=n[r],o=n[r+1],a=$h(i,o,1)^n[s],c=Gh(i,o,1)^n[s+1];for(let n=0;n<50;n+=10)e[t+n]^=a,e[t+n+1]^=c}let t=e[2],r=e[3];for(let n=0;n<24;n++){const s=Oh[n],i=$h(t,r,s),o=Gh(t,r,s),a=Ih[n];t=e[a],r=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)n[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=Bh[s],e[1]^=Fh[s]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){wh.exists(this);const{blockLen:t,state:n}=this,s=(e=Sh(e)).length;for(let r=0;r<s;){const i=Math.min(t-this.pos,s-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,0!=(128&t)&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){wh.exists(this,!1),wh.bytes(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,r=e.length;s<r;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,r-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return wh.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(wh.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:r,enableXOF:i}=this;return e||(e=new Hh(t,n,s,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const zh=(e,t,n)=>Th((()=>new Hh(t,e,n))),Wh=(zh(6,144,28),zh(6,136,32),zh(6,104,48),zh(6,72,64),zh(1,144,28),zh(1,136,32)),qh=(zh(1,104,48),zh(1,72,64),(e,t,n)=>function(e){const t=(t,n)=>e(n).update(Sh(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}(((s={})=>new Hh(t,e,void 0===s.dkLen?n:s.dkLen,!0))));qh(31,168,16),qh(31,136,32);let Kh=!1;const Vh=function(e){return Wh(e)};let Jh=Vh;function Qh(e){const t=Ru(e,"data");return Fu(Jh(t))}Qh._=Vh,Qh.lock=function(){Kh=!0},Qh.register=function(e){if(Kh)throw new TypeError("keccak256 is locked");Jh=e},Object.freeze(Qh);const Yh=BigInt(0),Xh=BigInt(36);function Zh(e){const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let e=0;e<40;e++)n[e]=t[e].charCodeAt(0);const s=Ru(Qh(n));for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&s[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const ed={};for(let e=0;e<10;e++)ed[String(e)]=String(e);for(let e=0;e<26;e++)ed[String.fromCharCode(65+e)]=String(10+e);const td=15;function nd(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>ed[e])).join("");for(;t.length>=td;){let e=t.substring(0,td);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const sd=function(){const e={};for(let t=0;t<36;t++){e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t)}return e}();function rd(e){if(Ou("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=Zh(e);return Ou(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Ou(e.substring(2,4)===nd(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=Yh;for(let n=0;n<e.length;n++)t=t*Xh+sd[e[n]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Zh("0x"+t)}Ou(!1,"invalid address","address",e)}const id={};function od(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new ld(id,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function ad(e,t){return new ld(id,`bytes${t||""}`,e,{size:t})}const cd=Symbol.for("_ethers_typed");class ld{type;value;#o;_typedSymbol;constructor(e,t,n,s){null==s&&(s=null),Lu(id,e,"Typed"),xu(this,{_typedSymbol:cd,type:t,value:n}),this.#o=s,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((e=>e.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#o}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#o?-1:!1===this.#o?this.value.length:null}static from(e,t){return new ld(id,e,t)}static uint8(e){return od(e,8)}static uint16(e){return od(e,16)}static uint24(e){return od(e,24)}static uint32(e){return od(e,32)}static uint40(e){return od(e,40)}static uint48(e){return od(e,48)}static uint56(e){return od(e,56)}static uint64(e){return od(e,64)}static uint72(e){return od(e,72)}static uint80(e){return od(e,80)}static uint88(e){return od(e,88)}static uint96(e){return od(e,96)}static uint104(e){return od(e,104)}static uint112(e){return od(e,112)}static uint120(e){return od(e,120)}static uint128(e){return od(e,128)}static uint136(e){return od(e,136)}static uint144(e){return od(e,144)}static uint152(e){return od(e,152)}static uint160(e){return od(e,160)}static uint168(e){return od(e,168)}static uint176(e){return od(e,176)}static uint184(e){return od(e,184)}static uint192(e){return od(e,192)}static uint200(e){return od(e,200)}static uint208(e){return od(e,208)}static uint216(e){return od(e,216)}static uint224(e){return od(e,224)}static uint232(e){return od(e,232)}static uint240(e){return od(e,240)}static uint248(e){return od(e,248)}static uint256(e){return od(e,256)}static uint(e){return od(e,256)}static int8(e){return od(e,-8)}static int16(e){return od(e,-16)}static int24(e){return od(e,-24)}static int32(e){return od(e,-32)}static int40(e){return od(e,-40)}static int48(e){return od(e,-48)}static int56(e){return od(e,-56)}static int64(e){return od(e,-64)}static int72(e){return od(e,-72)}static int80(e){return od(e,-80)}static int88(e){return od(e,-88)}static int96(e){return od(e,-96)}static int104(e){return od(e,-104)}static int112(e){return od(e,-112)}static int120(e){return od(e,-120)}static int128(e){return od(e,-128)}static int136(e){return od(e,-136)}static int144(e){return od(e,-144)}static int152(e){return od(e,-152)}static int160(e){return od(e,-160)}static int168(e){return od(e,-168)}static int176(e){return od(e,-176)}static int184(e){return od(e,-184)}static int192(e){return od(e,-192)}static int200(e){return od(e,-200)}static int208(e){return od(e,-208)}static int216(e){return od(e,-216)}static int224(e){return od(e,-224)}static int232(e){return od(e,-232)}static int240(e){return od(e,-240)}static int248(e){return od(e,-248)}static int256(e){return od(e,-256)}static int(e){return od(e,-256)}static bytes1(e){return ad(e,1)}static bytes2(e){return ad(e,2)}static bytes3(e){return ad(e,3)}static bytes4(e){return ad(e,4)}static bytes5(e){return ad(e,5)}static bytes6(e){return ad(e,6)}static bytes7(e){return ad(e,7)}static bytes8(e){return ad(e,8)}static bytes9(e){return ad(e,9)}static bytes10(e){return ad(e,10)}static bytes11(e){return ad(e,11)}static bytes12(e){return ad(e,12)}static bytes13(e){return ad(e,13)}static bytes14(e){return ad(e,14)}static bytes15(e){return ad(e,15)}static bytes16(e){return ad(e,16)}static bytes17(e){return ad(e,17)}static bytes18(e){return ad(e,18)}static bytes19(e){return ad(e,19)}static bytes20(e){return ad(e,20)}static bytes21(e){return ad(e,21)}static bytes22(e){return ad(e,22)}static bytes23(e){return ad(e,23)}static bytes24(e){return ad(e,24)}static bytes25(e){return ad(e,25)}static bytes26(e){return ad(e,26)}static bytes27(e){return ad(e,27)}static bytes28(e){return ad(e,28)}static bytes29(e){return ad(e,29)}static bytes30(e){return ad(e,30)}static bytes31(e){return ad(e,31)}static bytes32(e){return ad(e,32)}static address(e){return new ld(id,"address",e)}static bool(e){return new ld(id,"bool",!!e)}static bytes(e){return new ld(id,"bytes",e)}static string(e){return new ld(id,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new ld(id,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===cd}static dereference(e,t){if(ld.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class ud extends fh{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=ld.dereference(t,"string");try{n=rd(n)}catch(e){return this._throwError(e.message,t)}return e.writeValue(n)}decode(e){return rd(sh(e.readValue(),20))}}class hd extends fh{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function dd(e,t,n){let s=[];if(Array.isArray(n))s=n;else if(n&&"object"==typeof n){let e={};s=t.map((t=>{const s=t.localName;return Iu(s,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),Iu(!e[s],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),e[s]=!0,n[s]}))}else Ou(!1,"invalid tuple value","tuple",n);Ou(t.length===s.length,"types/value length mismatch","tuple",n);let r=new ph,i=new ph,o=[];t.forEach(((e,t)=>{let n=s[t];if(e.dynamic){let t=i.length;e.encode(i,n);let s=r.writeUpdatableValue();o.push((e=>{s(e+t)}))}else e.encode(r,n)})),o.forEach((e=>{e(r.length)}));let a=e.appendWriter(r);return a+=e.appendWriter(i),a}function fd(e,t){let n=[],s=[],r=e.subReader(0);return t.forEach((t=>{let i=null;if(t.dynamic){let n=e.readIndex(),s=r.subReader(n);try{i=t.decode(s)}catch(e){if(Su(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(Su(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}if(null==i)throw new Error("investigate");n.push(i),s.push(t.localName||null)})),hh.fromItems(n,s)}class pd extends fh{coder;length;constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),xu(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=ld.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let s=this.length;-1===s&&(s=n.length,e.writeValue(n.length)),Nu(n.length,s,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let e=0;e<n.length;e++)r.push(this.coder);return dd(e,r,n)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),Iu(t*oh<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*oh,length:e.dataLength}));let n=[];for(let e=0;e<t;e++)n.push(new hd(this.coder));return fd(e,n)}}class gd extends fh{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=ld.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class md extends fh{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Du(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class yd extends md{constructor(e){super("bytes",e)}decode(e){return Fu(super.decode(e))}}class bd extends fh{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),xu(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=Du(ld.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return Fu(e.readBytes(this.size))}}const wd=new Uint8Array([]);class vd extends fh{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(wd)}decode(e){return e.readBytes(0),null}}const Ad=BigInt(0),_d=BigInt(1),kd=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ed extends fh{size;signed;constructor(e,t,n){const s=(t?"int":"uint")+8*e;super(s,s,n,!1),xu(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=Xu(ld.dereference(t,this.type)),s=Yu(kd,256);if(this.signed){let e=Yu(s,8*this.size-1);(n>e||n<-(e+_d))&&this._throwError("value out-of-bounds",t),n=Qu(n,256)}else(n<Ad||n>Yu(s,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=Yu(e.readValue(),8*this.size);return this.signed&&(t=Ju(t,8*this.size)),t}}function xd(e,t,n,s,r){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let s=t+1;s<n.length&&n[s]>>6==2;s++)e++;return e}return"OVERRUN"===e?n.length-t-1:0}const Cd=Object.freeze({error:function(e,t,n,s,r){Ou(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)},ignore:xd,replace:function(e,t,n,s,r){return"OVERLONG"===e?(Ou("number"==typeof r,"invalid bad code point for replacement","badCodepoint",r),s.push(r),0):(s.push(65533),xd(e,t,n))}});function Sd(e,t){null==t&&(t=Cd.error);const n=Ru(e,"bytes"),s=[];let r=0;for(;r<n.length;){const e=n[r++];if(e>>7==0){s.push(e);continue}let i=null,o=null;if(192==(224&e))i=1,o=127;else if(224==(240&e))i=2,o=2047;else{if(240!=(248&e)){r+=t(128==(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",r-1,n,s);continue}i=3,o=65535}if(r-1+i>=n.length){r+=t("OVERRUN",r-1,n,s);continue}let a=e&(1<<8-i-1)-1;for(let e=0;e<i;e++){let e=n[r];if(128!=(192&e)){r+=t("MISSING_CONTINUE",r,n,s),a=null;break}a=a<<6|63&e,r++}null!==a&&(a>1114111?r+=t("OUT_OF_RANGE",r-1-i,n,s,a):a>=55296&&a<=57343?r+=t("UTF16_SURROGATE",r-1-i,n,s,a):a<=o?r+=t("OVERLONG",r-1-i,n,s,a):s.push(a))}return s}function Pd(e,t){null!=t&&(!function(e){Iu(ju.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}(t),e=e.normalize(t));let n=[];for(let t=0;t<e.length;t++){const s=e.charCodeAt(t);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(63&s|128);else if(55296==(64512&s)){t++;const r=e.charCodeAt(t);Ou(t<e.length&&56320==(64512&r),"invalid surrogate pair","str",e);const i=65536+((1023&s)<<10)+(1023&r);n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(63&s|128)}return new Uint8Array(n)}function Td(e,t){return Sd(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}class Id extends md{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Pd(ld.dereference(t,"string")))}decode(e){return Td(super.decode(e))}}class Od extends fh{coders;constructor(e,t){let n=!1;const s=[];e.forEach((e=>{e.dynamic&&(n=!0),s.push(e.type)}));super("tuple","tuple("+s.join(",")+")",t,n),xu(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,s)=>{let r=n.localName;r&&1===t[r]&&("length"===r&&(r="_length"),null==e[r]&&(e[r]=e[s]))})),Object.freeze(e)}encode(e,t){const n=ld.dereference(t,"tuple");return dd(e,this.coders,n)}decode(e){return fd(e,this.coders)}}function Nd(e){return Qh(Pd(e))}function jd(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}const Ld=jd("external public payable".split(" ")),Ud="constant external internal payable private public pure view",Rd=jd(Ud.split(" ")),Dd="constructor error event fallback function receive struct",Md=jd(Dd.split(" ")),Bd="calldata memory storage payable indexed",Fd=jd(Bd.split(" ")),$d=jd([Dd,Bd,"tuple returns",Ud].join(" ").split(" ")),Gd={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Hd=new RegExp("^(\\s*)"),zd=new RegExp("^([0-9]+)"),Wd=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),qd=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Kd=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Vd{#r;#a;get offset(){return this.#r}get length(){return this.#a.length-this.#r}constructor(e){this.#r=0,this.#a=e.slice()}clone(){return new Vd(this.#a)}reset(){this.#r=0}#c(e=0,t=0){return new Vd(this.#a.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e)throw new Error(`expected ${e}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=this.#c(this.#r+1,e.match+1);return this.#r=e.match+1,t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;this.#r<e.match-1;){const e=this.peek().linkNext;t.push(this.#c(this.#r+1,e)),this.#r=e}return this.#r=e.match+1,t}peek(){if(this.#r>=this.#a.length)throw new Error("out-of-bounds");return this.#a[this.#r]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#r++,e}toString(){const e=[];for(let t=this.#r;t<this.#a.length;t++){const n=this.#a[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function Jd(e){const t=[],n=t=>{const n=i<e.length?JSON.stringify(e[i]):"$EOI";throw new Error(`invalid token ${n} at ${i}: ${t}`)};let s=[],r=[],i=0;for(;i<e.length;){let o=e.substring(i),a=o.match(Hd);a&&(i+=a[1].length,o=e.substring(i));const c={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let l=Gd[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,"OPEN_PAREN"===l)s.push(t.length-1),r.push(t.length-1);else if("CLOSE_PAREN"==l)0===s.length&&n("no matching open bracket"),c.match=s.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1;else if("COMMA"===l)c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1,r.push(t.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const n=t.pop().text;e=n+e,t[t.length-1].value=nh(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(a=o.match(Wd),a){if(c.text=a[1],i+=c.text.length,$d.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Kd)){c.type="TYPE";continue}c.type="ID"}else{if(a=o.match(zd),!a)throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`);c.text=a[1],c.type="NUMBER",i+=c.text.length}}return new Vd(t.map((e=>Object.freeze(e))))}function Qd(e,t){let n=[];for(const s in t.keys())e.has(s)&&n.push(s);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function Yd(e,t){if(t.peekKeyword(Md)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function Xd(e,t){const n=new Set;for(;;){const s=e.peekType("KEYWORD");if(null==s||t&&!t.has(s))break;if(e.pop(),n.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);n.add(s)}return Object.freeze(n)}function Zd(e){let t=Xd(e,Rd);return Qd(t,jd("constant payable nonpayable".split(" "))),Qd(t,jd("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function ef(e,t){return e.popParams().map((e=>gf.from(e,t)))}function tf(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return Xu(e.pop().text);throw new Error("invalid gas")}return null}function nf(e){if(e.length)throw new Error(`unexpected tokens: ${e.toString()}`)}const sf=new RegExp(/^(.*)\[([0-9]*)\]$/);function rf(e){const t=e.match(Kd);if(Ou(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const n=parseInt(t[2]);Ou(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);Ou(0!==n&&n<=256&&n%8==0,"invalid numeric width","type",e)}return e}const of={},af=Symbol.for("_ethers_internal"),cf="_ParamTypeInternal",lf="_ErrorInternal",uf="_EventInternal",hf="_ConstructorInternal",df="_FallbackInternal",ff="_FunctionInternal",pf="_StructInternal";class gf{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,s,r,i,o,a){if(Lu(e,of,"ParamType"),Object.defineProperty(this,af,{value:cf}),i&&(i=Object.freeze(i.slice())),"array"===s){if(null==o||null==a)throw new Error("")}else if(null!=o||null!=a)throw new Error("");if("tuple"===s){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");xu(this,{name:t,type:n,baseType:s,indexed:r,components:i,arrayLength:o,arrayChildren:a})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(n)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?("sighash"!==e&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")"):t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map((e=>n.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map(((e,s)=>n.components[s].walk(e,t)))}return t(this.type,e)}#l(e,t,n,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this.arrayChildren,i=t.slice();return i.forEach(((t,s)=>{r.#l(e,t,n,(e=>{i[s]=e}))})),void s(i)}if(this.isTuple()){const r=this.components;let i;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw new Error("invalid tuple value");i=r.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((t,s)=>{r[s].#l(e,t,n,(e=>{i[s]=e}))})),void s(i)}const r=n(this.type,t);r.then?e.push(async function(){s(await r)}()):s(r)}async walkAsync(e,t){const n=[],s=[e];return this.#l(n,e,t,(e=>{s[0]=e})),n.length&&await Promise.all(n),s[0]}static from(e,t){if(gf.isParamType(e))return e;if("string"==typeof e)try{return gf.from(Jd(e),t)}catch(t){Ou(!1,"invalid param type","obj",e)}else if(e instanceof Vd){let n="",s="",r=null;Xd(e,jd(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(s="tuple",r=e.popParams().map((e=>gf.from(e))),n=`tuple(${r.map((e=>e.format())).join(",")})`):(n=rf(e.popType("TYPE")),s=n);let i=null,o=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();i=new gf(of,"",n,s,null,r,o,i),o=t.value,n+=t.text,s="array",r=null}let a=null;if(Xd(e,Fd).has("indexed")){if(!t)throw new Error("");a=!0}const c=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new gf(of,c,n,s,a,r,o,i)}const n=e.name;Ou(!n||"string"==typeof n&&n.match(qd),"invalid name","obj.name",n);let s=e.indexed;null!=s&&(Ou(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let r=e.type,i=r.match(sf);if(i){const t=parseInt(i[2]||"-1"),o=gf.from({type:i[1],components:e.components});return new gf(of,n||"",r,"array",s,null,t,o)}if("tuple"===r||r.startsWith("tuple(")||r.startsWith("(")){const t=null!=e.components?e.components.map((e=>gf.from(e))):null;return new gf(of,n||"",r,"tuple",s,t,null,null)}return r=rf(e.type),new gf(of,n||"",r,r,s,null,null,null)}static isParamType(e){return e&&e[af]===cf}}class mf{type;inputs;constructor(e,t,n){Lu(e,of,"Fragment"),xu(this,{type:t,inputs:n=Object.freeze(n.slice())})}static from(e){if("string"==typeof e){try{mf.from(JSON.parse(e))}catch(e){}return mf.from(Jd(e))}if(e instanceof Vd){switch(e.peekKeyword(Md)){case"constructor":return Af.from(e);case"error":return wf.from(e);case"event":return vf.from(e);case"fallback":case"receive":return _f.from(e);case"function":return kf.from(e);case"struct":return Ef.from(e)}}else if("object"==typeof e){switch(e.type){case"constructor":return Af.from(e);case"error":return wf.from(e);case"event":return vf.from(e);case"fallback":case"receive":return _f.from(e);case"function":return kf.from(e);case"struct":return Ef.from(e)}Iu(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Ou(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Af.isFragment(e)}static isError(e){return wf.isFragment(e)}static isEvent(e){return vf.isFragment(e)}static isFunction(e){return kf.isFragment(e)}static isStruct(e){return Ef.isFragment(e)}}class yf extends mf{name;constructor(e,t,n,s){super(e,t,s),Ou("string"==typeof n&&n.match(qd),"invalid identifier","name",n),s=Object.freeze(s.slice()),xu(this,{name:n})}}function bf(e,t){return"("+t.map((t=>t.format(e))).join("full"===e?", ":",")+")"}class wf extends yf{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,af,{value:lf})}get selector(){return Nd(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+bf(e,this.inputs)),t.join(" ")}static from(e){if(wf.isFragment(e))return e;if("string"==typeof e)return wf.from(Jd(e));if(e instanceof Vd){const t=Yd("error",e),n=ef(e);return nf(e),new wf(of,t,n)}return new wf(of,e.name,e.inputs?e.inputs.map(gf.from):[])}static isFragment(e){return e&&e[af]===lf}}class vf extends yf{anonymous;constructor(e,t,n,s){super(e,"event",t,n),Object.defineProperty(this,af,{value:uf}),xu(this,{anonymous:s})}get topicHash(){return Nd(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+bf(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){t=(t||[]).map((e=>gf.from(e)));return new vf(of,e,t,!1).topicHash}static from(e){if(vf.isFragment(e))return e;if("string"==typeof e)try{return vf.from(Jd(e))}catch(t){Ou(!1,"invalid event fragment","obj",e)}else if(e instanceof Vd){const t=Yd("event",e),n=ef(e,!0),s=!!Xd(e,jd(["anonymous"])).has("anonymous");return nf(e),new vf(of,t,n,s)}return new vf(of,e.name,e.inputs?e.inputs.map((e=>gf.from(e,!0))):[],!!e.anonymous)}static isFragment(e){return e&&e[af]===uf}}class Af extends mf{payable;gas;constructor(e,t,n,s,r){super(e,t,n),Object.defineProperty(this,af,{value:hf}),xu(this,{payable:s,gas:r})}format(e){if(Iu(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[`constructor${bf(e,this.inputs)}`];return t.push(this.payable?"payable":"nonpayable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(Af.isFragment(e))return e;if("string"==typeof e)try{return Af.from(Jd(e))}catch(t){Ou(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Vd){Xd(e,jd(["constructor"]));const t=ef(e),n=!!Xd(e,Ld).has("payable"),s=tf(e);return nf(e),new Af(of,"constructor",t,n,s)}return new Af(of,"constructor",e.inputs?e.inputs.map(gf.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[af]===hf}}class _f extends mf{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,af,{value:df}),xu(this,{payable:n})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(_f.isFragment(e))return e;if("string"==typeof e)try{return _f.from(Jd(e))}catch(t){Ou(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Vd){const t=e.toString();Ou(e.peekKeyword(jd(["fallback","receive"])),"type must be fallback or receive","obj",t);if("receive"===e.popKeyword(jd(["fallback","receive"]))){const t=ef(e);return Ou(0===t.length,"receive cannot have arguments","obj.inputs",t),Xd(e,jd(["payable"])),nf(e),new _f(of,[],!0)}let n=ef(e);n.length?Ou(1===n.length&&"bytes"===n[0].type,"invalid fallback inputs","obj.inputs",n.map((e=>e.format("minimal"))).join(", ")):n=[gf.from("bytes")];const s=Zd(e);if(Ou("nonpayable"===s||"payable"===s,"fallback cannot be constants","obj.stateMutability",s),Xd(e,jd(["returns"])).has("returns")){const t=ef(e);Ou(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}return nf(e),new _f(of,n,"payable"===s)}if("receive"===e.type)return new _f(of,[],!0);if("fallback"===e.type){const t=[gf.from("bytes")],n="payable"===e.stateMutability;return new _f(of,t,n)}Ou(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[af]===df}}class kf extends yf{constant;outputs;stateMutability;payable;gas;constructor(e,t,n,s,r,i){super(e,"function",t,s),Object.defineProperty(this,af,{value:ff});xu(this,{constant:"view"===n||"pure"===n,gas:i,outputs:r=Object.freeze(r.slice()),payable:"payable"===n,stateMutability:n})}get selector(){return Nd(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+bf(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(bf(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){t=(t||[]).map((e=>gf.from(e)));return new kf(of,e,"view",t,[],null).selector}static from(e){if(kf.isFragment(e))return e;if("string"==typeof e)try{return kf.from(Jd(e))}catch(t){Ou(!1,"invalid function fragment","obj",e)}else if(e instanceof Vd){const t=Yd("function",e),n=ef(e),s=Zd(e);let r=[];Xd(e,jd(["returns"])).has("returns")&&(r=ef(e));const i=tf(e);return nf(e),new kf(of,t,s,n,r,i)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new kf(of,e.name,t,e.inputs?e.inputs.map(gf.from):[],e.outputs?e.outputs.map(gf.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[af]===ff}}class Ef extends yf{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,af,{value:pf})}format(){throw new Error("@TODO")}static from(e){if("string"==typeof e)try{return Ef.from(Jd(e))}catch(t){Ou(!1,"invalid struct fragment","obj",e)}else if(e instanceof Vd){const t=Yd("struct",e),n=ef(e);return nf(e),new Ef(of,t,n)}return new Ef(of,e.name,e.inputs?e.inputs.map(gf.from):[])}static isFragment(e){return e&&e[af]===pf}}const xf=new Map;xf.set(0,"GENERIC_PANIC"),xf.set(1,"ASSERT_FALSE"),xf.set(17,"OVERFLOW"),xf.set(18,"DIVIDE_BY_ZERO"),xf.set(33,"ENUM_RANGE_ERROR"),xf.set(34,"BAD_STORAGE_DATA"),xf.set(49,"STACK_UNDERFLOW"),xf.set(50,"ARRAY_RANGE_ERROR"),xf.set(65,"OUT_OF_MEMORY"),xf.set(81,"UNINITIALIZED_FUNCTION_CALL");const Cf=new RegExp(/^bytes([0-9]*)$/),Sf=new RegExp(/^(u?int)([0-9]*)$/);let Pf=null;class Tf{#u(e){if(e.isArray())return new pd(this.#u(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Od(e.components.map((e=>this.#u(e))),e.name);switch(e.baseType){case"address":return new ud(e.name);case"bool":return new gd(e.name);case"string":return new Id(e.name);case"bytes":return new yd(e.name);case"":return new vd(e.name)}let t=e.type.match(Sf);if(t){let n=parseInt(t[2]||"256");return Ou(0!==n&&n<=256&&n%8==0,"invalid "+t[1]+" bit length","param",e),new Ed(n/8,"int"===t[1],e.name)}if(t=e.type.match(Cf),t){let n=parseInt(t[1]);return Ou(0!==n&&n<=32,"invalid bytes length","param",e),new bd(n,e.name)}Ou(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map((e=>this.#u(gf.from(e))));return new Od(t,"_").defaultValue()}encode(e,t){Nu(t.length,e.length,"types/values length mismatch");const n=e.map((e=>this.#u(gf.from(e)))),s=new Od(n,"_"),r=new ph;return s.encode(r,t),r.data}decode(e,t,n){const s=e.map((e=>this.#u(gf.from(e))));return new Od(s,"_").decode(new gh(t,n))}static defaultAbiCoder(){return null==Pf&&(Pf=new Tf),Pf}static getBuiltinCallException(e,t,n){return function(e,t,n,s){let r="missing revert data",i=null,o=null;if(n){r="execution reverted";const e=Ru(n);if(n=Fu(n),0===e.length)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(e.length%32!=4)r+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===Fu(e.slice(0,4)))try{i=s.decode(["string"],e.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch(e){r+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===Fu(e.slice(0,4)))try{const t=Number(s.decode(["uint256"],e.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[t]},i=`Panic due to ${xf.get(t)||"UNKNOWN"}(${t})`,r+=`: ${i}`}catch(e){r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const a={to:t.to?rd(t.to):null,data:t.data||"0x"};return t.from&&(a.from=rd(t.from)),Tu(r,"CALL_EXCEPTION",{action:e,data:n,reason:i,transaction:a,invocation:null,revert:o})}(e,t,n,Tf.defaultAbiCoder())}}function If(e){return e&&"function"==typeof e.getAddress}async function Of(e,t){const n=await t;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||(Iu("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),Ou(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),rd(n)}function Nf(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?rd(e):(Iu(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Of(e,t.resolveName(e))):If(e)?Of(e,e.getAddress()):e&&"function"==typeof e.then?Of(e,e):void Ou(!1,"unsupported addressable value","target",e)}const jf=new Uint8Array(32);jf.fill(0);const Lf=BigInt(-1),Uf=BigInt(0),Rf=BigInt(1),Df=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Mf=sh(Rf,32),Bf=sh(Uf,32),Ff={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},$f=["name","version","chainId","verifyingContract","salt"];function Gf(e){return function(t){return Ou("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Hf={name:Gf("name"),version:Gf("version"),chainId:function(e){const t=Xu(e,"domain.chainId");return Ou(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):ih(t)},verifyingContract:function(e){try{return rd(e).toLowerCase()}catch(e){}Ou(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=Ru(e,"domain.salt");return Ou(32===t.length,'invalid domain value "salt"',"domain.salt",e),Fu(t)}};function zf(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const n=""===t[1],s=parseInt(t[2]||"256");Ou(s%8==0&&0!==s&&s<=256&&(null==t[2]||t[2]===String(s)),"invalid numeric width","type",e);const r=Yu(Df,n?s-1:s),i=n?(r+Rf)*Lf:Uf;return function(t){const s=Xu(t,"value");return Ou(s>=i&&s<=r,`value out-of-bounds for ${e}`,"value",s),sh(n?Qu(s,256):s,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return Ou(0!==n&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(t){return Ou(Ru(t).length===n,`invalid length for ${e}`,"value",t),function(e){const t=Ru(e),n=t.length%32;return n?$u([t,jf.slice(n)]):Fu(t)}(t)}}}switch(e){case"address":return function(e){return Wu(rd(e),32)};case"bool":return function(e){return e?Mf:Bf};case"bytes":return function(e){return Qh(e)};case"string":return function(e){return Nd(e)}}return null}function Wf(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class qf{primaryType;#h;get types(){return JSON.parse(this.#h)}#d;#f;constructor(e){this.#h=JSON.stringify(e),this.#d=new Map,this.#f=new Map;const t=new Map,n=new Map,s=new Map;Object.keys(e).forEach((e=>{t.set(e,new Set),n.set(e,[]),s.set(e,new Set)}));for(const s in e){const r=new Set;for(const i of e[s]){Ou(!r.has(i.name),`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(s)}`,"types",e),r.add(i.name);const o=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;Ou(o!==s,`circular type reference to ${JSON.stringify(o)}`,"types",e);zf(o)||(Ou(n.has(o),`unknown type ${JSON.stringify(o)}`,"types",e),n.get(o).push(s),t.get(s).add(o))}}const r=Array.from(n.keys()).filter((e=>0===n.get(e).length));Ou(0!==r.length,"missing primary type","types",e),Ou(1===r.length,`ambiguous primary types or unused types: ${r.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),xu(this,{primaryType:r[0]}),function r(i,o){Ou(!o.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",e),o.add(i);for(const e of t.get(i))if(n.has(e)){r(e,o);for(const t of o)s.get(t).add(e)}o.delete(i)}(this.primaryType,new Set);for(const[t,n]of s){const s=Array.from(n);s.sort(),this.#d.set(t,Wf(t,e[t])+s.map((t=>Wf(t,e[t]))).join(""))}}getEncoder(e){let t=this.#f.get(e);return t||(t=this.#p(e),this.#f.set(e,t)),t}#p(e){{const t=zf(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],n=this.getEncoder(e);return s=>{Ou(!t[3]||parseInt(t[3])===s.length,`array length mismatch; expected length ${parseInt(t[3])}`,"value",s);let r=s.map(n);return this.#d.has(e)&&(r=r.map(Qh)),Qh($u(r))}}const n=this.types[e];if(n){const t=Nd(this.#d.get(e));return e=>{const s=n.map((({name:t,type:n})=>{const s=this.getEncoder(n)(e[t]);return this.#d.has(n)?Qh(s):s}));return s.unshift(t),$u(s)}}Ou(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#d.get(e);return Ou(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Qh(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(zf(e))return n(e,t);const s=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s)return Ou(!s[3]||parseInt(s[3])===t.length,`array length mismatch; expected length ${parseInt(s[3])}`,"value",t),t.map((e=>this._visit(s[1],e,n)));const r=this.types[e];if(r)return r.reduce(((e,{name:s,type:r})=>(e[s]=this._visit(r,t[s],n),e)),{});Ou(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new qf(e)}static getPrimaryType(e){return qf.from(e).primaryType}static hashStruct(e,t,n){return qf.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(null==e[n])continue;const s=Ff[n];Ou(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:s})}return t.sort(((e,t)=>$f.indexOf(e.name)-$f.indexOf(t.name))),qf.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return $u(["0x1901",qf.hashDomain(e),qf.from(t).hash(n)])}static hash(e,t,n){return Qh(qf.encode(e,t,n))}static async resolveNames(e,t,n,s){e=Object.assign({},e);for(const t in e)null==e[t]&&delete e[t];const r={};e.verifyingContract&&!Mu(e.verifyingContract,20)&&(r[e.verifyingContract]="0x");const i=qf.from(t);i.visit(n,((e,t)=>("address"!==e||Mu(t,20)||(r[t]="0x"),t)));for(const e in r)r[e]=await s(e);return e.verifyingContract&&r[e.verifyingContract]&&(e.verifyingContract=r[e.verifyingContract]),n=i.visit(n,((e,t)=>"address"===e&&r[t]?r[t]:t)),{domain:e,value:n}}static getPayload(e,t,n){qf.hashDomain(e);const s={},r=[];$f.forEach((t=>{const n=e[t];null!=n&&(s[t]=Hf[t](n),r.push({name:t,type:Ff[t]}))}));const i=qf.from(t),o=Object.assign({},t);return Ou(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),o.EIP712Domain=r,i.encode(n),{types:o,domain:s,primaryType:i.primaryType,message:i.visit(n,((e,t)=>{if(e.match(/^bytes(\d*)/))return Fu(Ru(t));if(e.match(/^u?int/))return Xu(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return Ou("string"==typeof t,"invalid string","value",t),t}Ou(!1,"unsupported type","type",e)}))}}}function Kf(e,t){return{address:rd(e),storageKeys:t.map(((e,t)=>(Ou(Mu(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase())))}}function Vf(e){if(Array.isArray(e))return e.map(((t,n)=>Array.isArray(t)?(Ou(2===t.length,"invalid slot set",`value[${n}]`,t),Kf(t[0],t[1])):(Ou(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),Kf(t.address,t.storageKeys))));Ou(null!=e&&"object"==typeof e,"invalid access list","value",e);const t=Object.keys(e).map((t=>{const n=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return Kf(t,Object.keys(n).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}let Jf=async function(e,t){const n=e.url.split(":")[0].toLowerCase();let s;if(Iu("http"===n||"https"===n,`unsupported protocol ${n}`,"UNSUPPORTED_OPERATION",{info:{protocol:n},operation:"request"}),Iu("https"===n||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"}),t){const e=new AbortController;s=e.signal,t.addListener((()=>{e.abort()}))}const r={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:s},i=await fetch(e.url,r),o={};i.headers.forEach(((e,t)=>{o[t.toLowerCase()]=e}));const a=await i.arrayBuffer(),c=null==a?null:new Uint8Array(a);return{statusCode:i.status,statusMessage:i.statusText,headers:o,body:c}};const Qf=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Yf=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Xf=!1;async function Zf(e,t){try{const t=e.match(Qf);if(!t)throw new Error("invalid data");return new op(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return Ru(t)}(t[3]):Pd(t[3].replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new op(599,"BAD REQUEST (invalid data: URI)",{},null,new ip(e))}}function ep(e){return async function(t,n){try{const n=t.match(Yf);if(!n)throw new Error("invalid link");return new ip(`${e}${n[2]}`)}catch(e){return new op(599,"BAD REQUEST (invalid IPFS URI)",{},null,new ip(t))}}}const tp={data:Zf,ipfs:ep("https://gateway.ipfs.io/ipfs/")},np=new WeakMap;class sp{#g;#m;constructor(e){this.#g=[],this.#m=!1,np.set(e,(()=>{if(!this.#m){this.#m=!0;for(const e of this.#g)setTimeout((()=>{e()}),0);this.#g=[]}}))}addListener(e){Iu(!this.#m,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#g.push(e)}get cancelled(){return this.#m}checkSignal(){Iu(!this.cancelled,"cancelled","CANCELLED",{})}}function rp(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}class ip{#y;#b;#w;#v;#A;#_;#k;#E;#x;#C;#S;#P;#T;#I;get url(){return this.#_}set url(e){this.#_=String(e)}get body(){return null==this.#k?null:new Uint8Array(this.#k)}set body(e){if(null==e)this.#k=void 0,this.#E=void 0;else if("string"==typeof e)this.#k=Pd(e),this.#E="text/plain";else if(e instanceof Uint8Array)this.#k=e,this.#E="application/octet-stream";else{if("object"!=typeof e)throw new Error("invalid body");this.#k=Pd(JSON.stringify(e)),this.#E="application/json"}}hasBody(){return null!=this.#k}get method(){return this.#v?this.#v:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#v=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#w);return this.#x&&(e.authorization=`Basic ${function(e){const t=Ru(e);let n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(Pd(this.#x))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#E&&(e["content-type"]=this.#E),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#w[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#w={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#x||null}setCredentials(e,t){Ou(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#x=`${e}:${t}`}get allowGzip(){return this.#b}set allowGzip(e){this.#b=!!e}get allowInsecureAuthentication(){return!!this.#y}set allowInsecureAuthentication(e){this.#y=!!e}get timeout(){return this.#A}set timeout(e){Ou(e>=0,"timeout must be non-zero","timeout",e),this.#A=e}get preflightFunc(){return this.#C||null}set preflightFunc(e){this.#C=e}get processFunc(){return this.#S||null}set processFunc(e){this.#S=e}get retryFunc(){return this.#P||null}set retryFunc(e){this.#P=e}constructor(e){this.#_=String(e),this.#y=!1,this.#b=!0,this.#w={},this.#v="",this.#A=3e5,this.#I={slotInterval:250,maxAttempts:12}}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#k?Fu(this.#k):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#I.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#I.maxAttempts=e.maxAttempts)}async#O(e,t,n,s,r){if(e>=this.#I.maxAttempts)return r.makeServerError("exceeded maximum retry limit");Iu(ap()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await function(e){return new Promise((t=>setTimeout(t,e)))}(n);let i=this.clone();const o=(i.url.split(":")[0]||"").toLowerCase();if(o in tp){const e=await tp[o](i.url,rp(s.#T));if(e instanceof op){let t=e;if(this.processFunc){rp(s.#T);try{t=await this.processFunc(i,t)}catch(e){null!=e.throttle&&"number"==typeof e.stall||t.makeServerError("error in post-processing function",e).assertOk()}}return t}i=e}this.preflightFunc&&(i=await this.preflightFunc(i));const a=await Jf(i,rp(s.#T));let c=new op(a.statusCode,a.statusMessage,a.headers,a.body,s);if(301===c.statusCode||302===c.statusCode){try{const n=c.headers.location||"";return i.redirect(n).#O(e+1,t,0,s,c)}catch(e){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,e))){const n=c.headers["retry-after"];let r=this.#I.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof n&&n.match(/^[1-9][0-9]*$/)&&(r=parseInt(n)),i.clone().#O(e+1,t,r,s,c)}if(this.processFunc){rp(s.#T);try{c=await this.processFunc(i,c)}catch(n){null!=n.throttle&&"number"==typeof n.stall||c.makeServerError("error in post-processing function",n).assertOk();let r=this.#I.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return n.stall>=0&&(r=n.stall),i.clone().#O(e+1,t,r,s,c)}}return c}send(){return Iu(null==this.#T,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#T=new sp(this),this.#O(0,ap()+this.timeout,0,this,new op(0,"",{},null,this))}cancel(){Iu(null!=this.#T,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=np.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();Iu("GET"===this.method&&("https"!==t||"http"!==n)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new ip(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,s.#w=Object.assign({},this.#w),this.#k&&(s.#k=new Uint8Array(this.#k)),s.#E=this.#E,s}clone(){const e=new ip(this.url);return e.#v=this.#v,this.#k&&(e.#k=this.#k),e.#E=this.#E,e.#w=Object.assign({},this.#w),e.#x=this.#x,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#C=this.#C,e.#S=this.#S,e.#P=this.#P,e}static lockConfig(){Xf=!0}static getGateway(e){return tp[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Xf)throw new Error("gateways locked");tp[e]=t}static registerGetUrl(e){if(Xf)throw new Error("gateways locked");Jf=e}static createDataGateway(){return Zf}static createIpfsGatewayFunc(e){return ep(e)}}class op{#N;#j;#w;#k;#L;#U;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#k?Fu(this.#k):"null"}>`}get statusCode(){return this.#N}get statusMessage(){return this.#j}get headers(){return Object.assign({},this.#w)}get body(){return null==this.#k?null:new Uint8Array(this.#k)}get bodyText(){try{return null==this.#k?"":Td(this.#k)}catch(e){Iu(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){Iu(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,n,s,r){this.#N=e,this.#j=t,this.#w=Object.keys(n).reduce(((e,t)=>(e[t.toLowerCase()]=String(n[t]),e)),{}),this.#k=null==s?null:new Uint8Array(s),this.#L=r||null,this.#U={message:""}}makeServerError(e,t){let n;n=e?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:`CLIENT ESCALATED SERVER ERROR (${e=`${this.statusCode} ${this.statusMessage}`})`;const s=new op(599,n,this.headers,this.body,this.#L||void 0);return s.#U={message:e,error:t},s}throwThrottleError(e,t){null==t?t=-1:Ou(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw xu(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#k}get request(){return this.#L}ok(){return""===this.#U.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#U;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`),Iu(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t})}}function ap(){return(new Date).getTime()}const cp="0x0000000000000000000000000000000000000000";class lp{fragment;name;signature;topic;args;constructor(e,t,n){const s=e.name,r=e.format();xu(this,{fragment:e,name:s,signature:r,topic:t,args:n})}}class up{fragment;name;args;signature;selector;value;constructor(e,t,n,s){const r=e.name,i=e.format();xu(this,{fragment:e,name:r,args:n,signature:i,selector:t,value:s})}}class hp{fragment;name;args;signature;selector;constructor(e,t,n){const s=e.name,r=e.format();xu(this,{fragment:e,name:s,args:n,signature:r,selector:t})}}class dp{hash;_isIndexed;static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){xu(this,{hash:e,_isIndexed:!0})}}const fp={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},pp={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&fp[e.toString()]&&(t=fp[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class gp{fragments;deploy;fallback;receive;#R;#D;#M;#B;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#M=new Map,this.#R=new Map,this.#D=new Map;const n=[];for(const e of t)try{n.push(mf.from(e))}catch(e){console.log("EE",e)}xu(this,{fragments:Object.freeze(n)});let s=null,r=!1;this.#B=this.getAbiCoder(),this.fragments.forEach(((e,t)=>{let n;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void xu(this,{deploy:e});case"fallback":return void(0===e.inputs.length?r=!0:(Ou(!s||e.payable!==s.payable,"conflicting fallback fragments",`fragments[${t}]`,e),s=e,r=s.payable));case"function":n=this.#M;break;case"event":n=this.#D;break;case"error":n=this.#R;break;default:return}const i=e.format();n.has(i)||n.set(i,e)})),this.deploy||xu(this,{deploy:Af.from("constructor()")}),xu(this,{fallback:s,receive:r})}format(e){const t=e?"minimal":"full";return this.fragments.map((e=>e.format(t)))}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return Tf.defaultAbiCoder()}#F(e,t,n){if(Mu(e)){const t=e.toLowerCase();for(const e of this.#M.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,n]of this.#M)t.split("(")[0]===e&&s.push(n);if(t){const e=t.length>0?t[t.length-1]:null;let n=t.length,r=!0;ld.isTyped(e)&&"overrides"===e.type&&(r=!1,n--);for(let e=s.length-1;e>=0;e--){const t=s[e].inputs.length;t===n||r&&t===n-1||s.splice(e,1)}for(let e=s.length-1;e>=0;e--){const n=s[e].inputs;for(let r=0;r<t.length;r++)if(ld.isTyped(t[r])){if(r>=n.length){if("overrides"===t[r].type)continue;s.splice(e,1);break}if(t[r].type!==n[r].baseType){s.splice(e,1);break}}}}if(1===s.length&&t&&t.length!==s[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&s.splice(0,1)}if(0===s.length)return null;if(s.length>1&&n){Ou(!1,`ambiguous function description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e)}return s[0]}const s=this.#M.get(kf.from(e).format());return s||null}getFunctionName(e){const t=this.#F(e,null,!1);return Ou(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#F(e,null,!1)}getFunction(e,t){return this.#F(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#M.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#M.get(s),n)}}#$(e,t,n){if(Mu(e)){const t=e.toLowerCase();for(const e of this.#D.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,n]of this.#D)t.split("(")[0]===e&&s.push(n);if(t){for(let e=s.length-1;e>=0;e--)s[e].inputs.length<t.length&&s.splice(e,1);for(let e=s.length-1;e>=0;e--){const n=s[e].inputs;for(let r=0;r<t.length;r++)if(ld.isTyped(t[r])&&t[r].type!==n[r].baseType){s.splice(e,1);break}}}if(0===s.length)return null;if(s.length>1&&n){Ou(!1,`ambiguous event description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e)}return s[0]}const s=this.#D.get(vf.from(e).format());return s||null}getEventName(e){const t=this.#$(e,null,!1);return Ou(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#$(e,null,!1)}getEvent(e,t){return this.#$(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#D.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#D.get(s),n)}}getError(e,t){if(Mu(e)){const t=e.toLowerCase();if(pp[t])return wf.from(pp[t].signature);for(const e of this.#R.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[n,s]of this.#R)n.split("(")[0]===e&&t.push(s);if(0===t.length)return"Error"===e?wf.from("error Error(string)"):"Panic"===e?wf.from("error Panic(uint256)"):null;if(t.length>1){Ou(!1,`ambiguous error description (i.e. ${t.map((e=>JSON.stringify(e.format()))).join(", ")})`,"name",e)}return t[0]}if("Error(string)"===(e=wf.from(e).format()))return wf.from("error Error(string)");if("Panic(uint256)"===e)return wf.from("error Panic(uint256)");const n=this.#R.get(e);return n||null}forEachError(e){const t=Array.from(this.#R.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#R.get(s),n)}}_decodeParams(e,t){return this.#B.decode(e,t)}_encodeParams(e,t){return this.#B.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);Ou(t,"unknown error","fragment",e),e=t}return Ou(Hu(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Hu(t,4))}encodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);Ou(t,"unknown error","fragment",e),e=t}return $u([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);Ou(t,"unknown function","fragment",e),e=t}return Ou(Hu(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Hu(t,4))}encodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);Ou(t,"unknown function","fragment",e),e=t}return $u([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);Ou(t,"unknown function","fragment",e),e=t}let n="invalid length for result data";const s=Du(t);if(s.length%32==0)try{return this.#B.decode(e.outputs,s)}catch(e){n="could not decode result data"}Iu(!1,n,"BAD_DATA",{value:Fu(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=Ru(e,"data"),s=Tf.getBuiltinCallException("call",t,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const e=Fu(n.slice(0,4)),t=this.getError(e);if(t)try{const e=this.#B.decode(t.inputs,n.slice(4));s.revert={name:t.name,signature:t.format(),args:e},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch(e){s.message="execution reverted (coult not decode custom error)"}}const r=this.parseTransaction(t);return r&&(s.invocation={method:r.name,signature:r.signature,args:r.args}),s}encodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);Ou(t,"unknown function","fragment",e),e=t}return Fu(this.#B.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){const t=this.getEvent(e);Ou(t,"unknown event","eventFragment",e),e=t}Iu(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const s=(e,t)=>"string"===e.type?Nd(t):"bytes"===e.type?Qh(Fu(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=sh(t):e.type.match(/^bytes/)?t=function(e,t){return zu(e,t,!1)}(t,32):"address"===e.type&&this.#B.encode(["address"],[t]),Wu(Fu(t),32));for(t.forEach(((t,r)=>{const i=e.inputs[r];i.indexed?null==t?n.push(null):"array"===i.baseType||"tuple"===i.baseType?Ou(!1,"filtering with tuples or arrays not supported","contract."+i.name,t):Array.isArray(t)?n.push(t.map((e=>s(i,e)))):n.push(s(i,t)):Ou(null==t,"cannot filter non-indexed parameters; must be null","contract."+i.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){if("string"==typeof e){const t=this.getEvent(e);Ou(t,"unknown event","eventFragment",e),e=t}const n=[],s=[],r=[];return e.anonymous||n.push(e.topicHash),Ou(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,i)=>{const o=t[i];if(e.indexed)if("string"===e.type)n.push(Nd(o));else if("bytes"===e.type)n.push(Qh(o));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this.#B.encode([e.type],[o]))}else s.push(e),r.push(o)})),{data:this.#B.encode(s,r),topics:n}}decodeEventLog(e,t,n){if("string"==typeof e){const t=this.getEvent(e);Ou(t,"unknown event","eventFragment",e),e=t}if(null!=n&&!e.anonymous){const t=e.topicHash;Ou(Mu(n[0],32)&&n[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],r=[],i=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(s.push(gf.from({type:"bytes32",name:e.name})),i.push(!0)):(s.push(e),i.push(!1)):(r.push(e),i.push(!1))}));const o=null!=n?this.#B.decode(s,$u(n)):null,a=this.#B.decode(r,t,!0),c=[],l=[];let u=0,h=0;return e.inputs.forEach(((e,t)=>{let n=null;if(e.indexed)if(null==o)n=new dp(null);else if(i[t])n=new dp(o[h++]);else try{n=o[h++]}catch(e){n=e}else try{n=a[u++]}catch(e){n=e}c.push(n),l.push(e.name||null)})),hh.fromItems(c,l)}parseTransaction(e){const t=Ru(e.data,"tx.data"),n=Xu(null!=e.value?e.value:0,"tx.value"),s=this.getFunction(Fu(t.slice(0,4)));if(!s)return null;const r=this.#B.decode(s.inputs,t.slice(4));return new up(s,s.selector,r,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new lp(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Fu(e),n=this.getError(Hu(t,0,4));if(!n)return null;const s=this.#B.decode(n.inputs,Hu(t,4));return new hp(n,n.selector,s)}static from(e){return e instanceof gp?e:"string"==typeof e?new gp(JSON.parse(e)):"function"==typeof e.format?new gp(e.format("json")):new gp(e)}}const mp=BigInt(0);function yp(e){return null==e?null:e}function bp(e){return null==e?null:e.toString()}class wp{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,n){xu(this,{gasPrice:yp(e),maxFeePerGas:yp(t),maxPriorityFeePerGas:yp(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:bp(e),maxFeePerGas:bp(t),maxPriorityFeePerGas:bp(n)}}}function vp(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=Fu(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)s in e&&null!=e[s]&&(t[s]=Xu(e[s],`request.${s}`));const s="type,nonce".split(/,/);for(const n of s)n in e&&null!=e[n]&&(t[n]=nh(e[n],`request.${n}`));return e.accessList&&(t.accessList=Vf(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),t}class Ap{provider;number;hash;timestamp;parentHash;nonce;difficulty;gasLimit;gasUsed;miner;extraData;baseFeePerGas;#G;constructor(e,t){this.#G=e.transactions.map((e=>"string"!=typeof e?new Ep(e,t):e)),xu(this,{provider:t,hash:yp(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,miner:e.miner,extraData:e.extraData,baseFeePerGas:yp(e.baseFeePerGas)})}get transactions(){return this.#G.map((e=>"string"==typeof e?e:e.hash))}get prefetchedTransactions(){const e=this.#G.slice();return 0===e.length?[]:(Iu("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:s,gasUsed:r,hash:i,miner:o,nonce:a,number:c,parentHash:l,timestamp:u,transactions:h}=this;return{_type:"Block",baseFeePerGas:bp(e),difficulty:bp(t),extraData:n,gasLimit:bp(s),gasUsed:bp(r),hash:i,miner:o,nonce:a,number:c,parentHash:l,timestamp:u,transactions:h}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#G.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#G[e];else{const n=e.toLowerCase();for(const e of this.#G){if("string"==typeof e){if(e!==n)continue;t=e;break}if(e.hash!==n){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"==typeof e)return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;Ou(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:(e=this).hash,number:e.number};var e}}class _p{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const n=Object.freeze(e.topics.slice());xu(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:s,index:r,removed:i,topics:o,transactionHash:a,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:s,index:r,removed:i,topics:o,transactionHash:a,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Iu(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Iu(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Iu(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}class kp{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;cumulativeGasUsed;gasPrice;type;status;root;#H;constructor(e,t){this.#H=Object.freeze(e.logs.map((e=>new _p(e,t))));let n=mp;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),xu(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,gasPrice:n,type:e.type,status:e.status,root:e.root})}get logs(){return this.#H}toJSON(){const{to:e,from:t,contractAddress:n,hash:s,index:r,blockHash:i,blockNumber:o,logsBloom:a,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:o,contractAddress:n,cumulativeGasUsed:bp(this.cumulativeGasUsed),from:t,gasPrice:bp(this.gasPrice),gasUsed:bp(this.gasUsed),hash:s,index:r,logs:c,logsBloom:a,root:u,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Cp(this)}reorderedEvent(e){return Iu(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),xp(this,e)}}class Ep{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;data;value;chainId;signature;accessList;#z;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.#z=-1}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:s,type:r,to:i,from:o,nonce:a,data:c,signature:l,accessList:u}=this;return{_type:"TransactionReceipt",accessList:u,blockNumber:e,blockHash:t,chainId:bp(this.chainId),data:c,from:o,gasLimit:bp(this.gasLimit),gasPrice:bp(this.gasPrice),hash:s,maxFeePerGas:bp(this.maxFeePerGas),maxPriorityFeePerGas:bp(this.maxPriorityFeePerGas),nonce:a,signature:l,to:i,index:n,type:r,value:bp(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await Eu({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=null==e?1:e,s=null==t?0:t;let r=this.#z,i=-1,o=-1===r;const a=async()=>{if(o)return null;const{blockNumber:e,nonce:t}=await Eu({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(r=e);if(o)return null;const s=await this.getTransaction();if(!s||null==s.blockNumber)for(-1===i&&(i=r-3,i<this.#z&&(i=this.#z));i<=e;){if(o)return null;const t=await this.provider.getBlock(i,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let s=0;s<t.length;s++){const i=await t.getTransaction(s);if(i.from===this.from&&i.nonce===this.nonce){if(o)return null;const t=await this.provider.getTransactionReceipt(i.hash);if(null==t)return;if(e-t.blockNumber+1<n)return;let s="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?s="repriced":"0x"===i.data&&i.from===i.to&&i.value===mp&&(s="cancelled"),Iu(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===s||"cancelled"===s,reason:s,replacement:i.replaceableTransaction(r),hash:i.hash,receipt:t})}}i++}},c=e=>{if(null==e||0!==e.status)return e;Iu(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},l=await this.provider.getTransactionReceipt(this.hash);if(0===n)return c(l);if(l){if(await l.confirmations()>=n)return c(l)}else if(await a(),0===n)return null;const u=new Promise(((e,t)=>{const i=[],l=()=>{i.forEach((e=>e()))};if(i.push((()=>{o=!0})),s>0){const e=setTimeout((()=>{l(),t(Tu("wait for transaction timeout","TIMEOUT"))}),s);i.push((()=>{clearTimeout(e)}))}const u=async s=>{if(await s.confirmations()>=n){l();try{e(c(s))}catch(e){t(e)}}};if(i.push((()=>{this.provider.off(this.hash,u)})),this.provider.on(this.hash,u),r>=0){const e=async()=>{try{await a()}catch(e){if(Su(e,"TRANSACTION_REPLACED"))return l(),void t(e)}o||this.provider.once("block",e)};i.push((()=>{this.provider.off("block",e)})),this.provider.once("block",e)}}));return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}removedEvent(){return Iu(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Cp(this)}reorderedEvent(e){return Iu(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Iu(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),xp(this,e)}replaceableTransaction(e){Ou(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Ep(this,this.provider);return t.#z=e,t}}function xp(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function Cp(e){return{orphan:"drop-transaction",tx:e}}class Sp{filter;emitter;#W;constructor(e,t,n){this.#W=t,xu(this,{emitter:e,filter:n})}async removeListener(){null!=this.#W&&await this.emitter.off(this.filter,this.#W)}}class Pp extends _p{interface;fragment;args;constructor(e,t,n){super(e,e.provider);xu(this,{args:t.decodeEventLog(n,e.data,e.topics),fragment:n,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Tp extends _p{error;constructor(e,t){super(e,e.provider),xu(this,{error:t})}}class Ip extends kp{#q;constructor(e,t,n){super(n,t),this.#q=e}get logs(){return super.logs.map((e=>{const t=e.topics.length?this.#q.getEvent(e.topics[0]):null;if(t)try{return new Pp(e,this.#q,t)}catch(t){return new Tp(e,t)}return e}))}}class Op extends Ep{#q;constructor(e,t,n){super(n,t),this.#q=e}async wait(e){const t=await super.wait(e);return null==t?null:new Ip(this.#q,this.provider,t)}}class Np extends Sp{log;constructor(e,t,n,s){super(e,t,n),xu(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class jp extends Np{constructor(e,t,n,s,r){super(e,t,n,new Pp(r,e.interface,s));xu(this,{args:e.interface.decodeEventLog(s,this.log.data,this.log.topics),fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Lp=BigInt(0);function Up(e){return e&&"function"==typeof e.call}function Rp(e){return e&&"function"==typeof e.estimateGas}function Dp(e){return e&&"function"==typeof e.resolveName}function Mp(e){return e&&"function"==typeof e.sendTransaction}class Bp{#K;fragment;constructor(e,t,n){if(xu(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const s=Fp(e.runner,"resolveName"),r=Dp(s)?s:null;this.#K=async function(){const s=await Promise.all(t.inputs.map(((e,t)=>null==n[t]?null:e.walkAsync(n[t],((e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map((e=>Nf(e,r)))):Nf(t,r):t)))));return e.interface.encodeFilterTopics(t,s)}()}getTopicFilter(){return this.#K}}function Fp(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function $p(e){return null==e?null:e.provider||null}async function Gp(e,t){const n=ld.dereference(e,"overrides");Ou("object"==typeof n,"invalid overrides parameter","overrides",e);const s=vp(n);return Ou(null==s.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),Ou(null==s.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=await Nf(s.from)),s}function Hp(e){const t=async function(t){const n=await Gp(t,["data"]);n.to=await e.getAddress();const s=e.interface,r=Xu(n.value||Lp,"overrides.value")===Lp,i="0x"===(n.data||"0x");!s.fallback||s.fallback.payable||!s.receive||i||r||Ou(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),Ou(s.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data);return Ou(s.receive||s.fallback&&s.fallback.payable||r,"cannot send value to non-payable fallback","overrides.value",n.value),Ou(s.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data),n},n=async function(n){const s=e.runner;Iu(Mp(s),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await s.sendTransaction(await t(n)),i=$p(e.runner);return new Op(e.interface,i,r)},s=async e=>await n(e);return xu(s,{_contract:e,estimateGas:async function(n){const s=Fp(e.runner,"estimateGas");return Iu(Rp(s),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await s.estimateGas(await t(n))},populateTransaction:t,send:n,staticCall:async function(n){const s=Fp(e.runner,"call");Iu(Up(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const r=await t(n);try{return await s.call(r)}catch(t){if(Pu(t)&&t.data)throw e.interface.makeError(t.data,r);throw t}}}),s}function zp(e,t){const n=function(...n){const s=e.interface.getFunction(t,n);return Iu(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),s},s=async function(...t){const s=n(...t);let r={};if(s.inputs.length+1===t.length&&(r=await Gp(t.pop())),s.inputs.length!==t.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const i=await async function(e,t,n){const s=Fp(e,"resolveName"),r=Dp(s)?s:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(n[t],((e,t)=>(t=ld.dereference(t,e),"address"===e?Nf(t,r):t))))))}(e.runner,s.inputs,t);return Object.assign({},r,await Eu({to:e.getAddress(),data:e.interface.encodeFunctionData(s,i)}))},r=async function(...e){const t=await o(...e);return 1===t.length?t[0]:t},i=async function(...t){const n=e.runner;Iu(Mp(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await n.sendTransaction(await s(...t)),i=$p(e.runner);return new Op(e.interface,i,r)},o=async function(...t){const r=Fp(e.runner,"call");Iu(Up(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await s(...t);let o="0x";try{o=await r.call(i)}catch(t){if(Pu(t)&&t.data)throw e.interface.makeError(t.data,i);throw t}const a=n(...t);return e.interface.decodeFunctionResult(a,o)},a=async(...e)=>n(...e).constant?await r(...e):await i(...e);return xu(a,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:async function(...t){const n=Fp(e.runner,"estimateGas");return Iu(Rp(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await s(...t))},populateTransaction:s,send:i,staticCall:r,staticCallResult:o}),Object.defineProperty(a,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getFunction(t);return Iu(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),a}const Wp=Symbol.for("_ethersInternal_contract"),qp=new WeakMap;function Kp(e){return qp.get(e[Wp])}async function Vp(e,t){let n,s=null;if(Array.isArray(t)){const s=function(t){if(Mu(t,32))return t;const n=e.interface.getEvent(t);return Ou(n,"unknown fragment","name",t),n.topicHash};n=t.map((e=>null==e?null:Array.isArray(e)?e.map(s):s(e)))}else"*"===t?n=[null]:"string"==typeof t?Mu(t,32)?n=[t]:(s=e.interface.getEvent(t),Ou(s,"unknown fragment","event",t),n=[s.topicHash]):(r=t)&&"object"==typeof r&&"getTopicFilter"in r&&"function"==typeof r.getTopicFilter&&r.fragment?n=await t.getTopicFilter():"fragment"in t?(s=t.fragment,n=[s.topicHash]):Ou(!1,"unknown event name","event",t);var r;n=n.map((e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()}));return{fragment:s,tag:n.map((e=>null==e?"null":Array.isArray(e)?e.join("|"):e)).join("&"),topics:n}}async function Jp(e,t){const{subs:n}=Kp(e);return n.get((await Vp(e,t)).tag)||null}async function Qp(e,t,n){const s=$p(e.runner);Iu(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:r,tag:i,topics:o}=await Vp(e,n),{addr:a,subs:c}=Kp(e);let l=c.get(i);if(!l){const t={address:a||e,topics:o},u=t=>{let s=r;if(null==s)try{s=e.interface.getEvent(t.topics[0])}catch(e){}if(s){const i=s,o=r?e.interface.decodeEventLog(r,t.data,t.topics):[];Xp(e,n,o,(s=>new jp(e,s,n,i,t)))}else Xp(e,n,[],(s=>new Np(e,s,n,t)))};let h=[];l={tag:i,listeners:[],start:()=>{h.length||h.push(s.on(t,u))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),s.off(t,u)}},c.set(i,l)}return l}let Yp=Promise.resolve();async function Xp(e,t,n,s){try{await Yp}catch(e){}const r=async function(e,t,n,s){await Yp;const r=await Jp(e,t);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter((({listener:t,once:r})=>{const i=Array.from(n);s&&i.push(s(r?null:t));try{t.call(e,...i)}catch(e){}return!r})),0===r.listeners.length&&(r.stop(),Kp(e).subs.delete(r.tag)),i>0}(e,t,n,s);return Yp=r,await r}const Zp=["then"];class eg{target;interface;runner;filters;[Wp];fallback;constructor(e,t,n,s){Ou("string"==typeof e||If(e),"invalid value for Contract target","target",e),null==n&&(n=null);const r=gp.from(t);let i;xu(this,{target:e,runner:n,interface:r}),Object.defineProperty(this,Wp,{value:{}});let o=null,a=null;if(s){const e=$p(n);a=new Op(this.interface,e,s)}let c=new Map;if("string"==typeof e)if(Mu(e))o=e,i=Promise.resolve(e);else{const t=Fp(n,"resolveName");if(!Dp(t))throw Tu("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=t.resolveName(e).then((t=>{if(null==t)throw Tu("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Kp(this).addr=t,t}))}else i=e.getAddress().then((e=>{if(null==e)throw new Error("TODO");return Kp(this).addr=e,e}));!function(e,t){qp.set(e[Wp],t)}(this,{addrPromise:i,addr:o,deployTx:a,subs:c});const l=new Proxy({},{get:(e,t,n)=>{if("symbol"==typeof t||Zp.indexOf(t)>=0)return Reflect.get(e,t,n);try{return this.getEvent(t)}catch(e){if(!Su(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>Zp.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return xu(this,{filters:l}),xu(this,{fallback:r.receive||r.fallback?Hp(this):null}),new Proxy(this,{get:(e,t,n)=>{if("symbol"==typeof t||t in e||Zp.indexOf(t)>=0)return Reflect.get(e,t,n);try{return e.getFunction(t)}catch(e){if(!Su(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||Zp.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new eg(this.target,this.interface,e)}attach(e){return new eg(e,this.interface,this.runner)}async getAddress(){return await Kp(this).addrPromise}async getDeployedCode(){const e=$p(this.runner);Iu(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=$p(this.runner);return Iu(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((e,n)=>{const s=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",s)}catch(e){n(e)}};s()}))}deploymentTransaction(){return Kp(this).deployTx}getFunction(e){"string"!=typeof e&&(e=e.format());return zp(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const n=function(...n){const s=e.interface.getEvent(t,n);return Iu(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),s},s=function(...t){return new Bp(e,n(...t),t)};return xu(s,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getEvent(t);return Iu(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),s}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){null==t&&(t=0),null==n&&(n="latest");const{addr:s,addrPromise:r}=Kp(this),i=s||await r,{fragment:o,topics:a}=await Vp(this,e),c={address:i,topics:a,fromBlock:t,toBlock:n},l=$p(this.runner);return Iu(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(c)).map((e=>{let t=o;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new Pp(e,this.interface,t)}catch(t){return new Tp(e,t)}return new _p(e,l)}))}async on(e,t){const n=await Qp(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await Qp(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await Xp(this,e,t,null)}async listenerCount(e){if(e){const t=await Jp(this,e);return t?t.listeners.length:0}const{subs:t}=Kp(this);let n=0;for(const{listeners:e}of t.values())n+=e.length;return n}async listeners(e){if(e){const t=await Jp(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}const{subs:t}=Kp(this);let n=[];for(const{listeners:e}of t.values())n=n.concat(e.map((({listener:e})=>e)));return n}async off(e,t){const n=await Jp(this,e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return null!=t&&0!==n.listeners.length||(n.stop(),Kp(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await Jp(this,e);if(!t)return this;t.stop(),Kp(this).subs.delete(t.tag)}else{const{subs:e}=Kp(this);for(const{tag:t,stop:n}of e.values())n(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends eg{constructor(t,n=null){super(t,e,n)}}}static from(e,t,n){null==n&&(n=null);return new this(e,t,n)}}class tg extends(function(){return eg}()){}function ng(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function n(){return e[t++]<<8|e[t++]}let s=n(),r=1,i=[0,1];for(let e=1;e<s;e++)i.push(r+=n());let o=n(),a=t;t+=o;let c=0,l=0;function u(){return 0==c&&(l=l<<8|e[t++],c=8),l>>--c&1}const h=2**31,d=h>>>1,f=h-1;let p=0;for(let e=0;e<31;e++)p=p<<1|u();let g=[],m=0,y=h;for(;;){let e=Math.floor(((p-m+1)*r-1)/y),t=0,n=s;for(;n-t>1;){let s=t+n>>>1;e<i[s]?n=s:t=s}if(0==t)break;g.push(t);let o=m+Math.floor(y*i[t]/r),a=m+Math.floor(y*i[t+1]/r)-1;for(;0==((o^a)&d);)p=p<<1&f|u(),o=o<<1&f,a=a<<1&f|1;for(;o&~a&536870912;)p=p&d|p<<1&f>>>1|u(),o=o<<1^d,a=(a^d)<<1|d|1;m=o,y=1+a-o}let b=s-4;return g.map((t=>{switch(t-b){case 3:return b+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return b+256+(e[a++]<<8|e[a++]);case 1:return b+e[a++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,n)=>t[e.charCodeAt(0)]=n));let n=e.length,s=new Uint8Array(6*n>>3);for(let r=0,i=0,o=0,a=0;r<n;r++)a=a<<6|t[e.charCodeAt(r)],o+=6,o>=8&&(s[i++]=a>>(o-=8));return s}(e)))}function sg(e){return 1&e?~e>>1:e>>1}function rg(e,t){let n=Array(e);for(let s=0,r=0;s<e;s++)n[s]=r+=sg(t());return n}function ig(e,t=0){let n=[];for(;;){let s=e(),r=e();if(!r)break;t+=s;for(let e=0;e<r;e++)n.push(t+e);t+=r+1}return n}function og(e){return cg((()=>{let t=ig(e);if(t.length)return t}))}function ag(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(ug(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(hg(n,e))}return t.flat()}function cg(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function lg(e,t,n){let s=Array(e).fill().map((()=>[]));for(let r=0;r<t;r++)rg(e,n).forEach(((e,t)=>s[t].push(e)));return s}function ug(e,t){let n=1+t(),s=t(),r=cg(t);return lg(r.length,1+e,t).flatMap(((e,t)=>{let[i,...o]=e;return Array(r[t]).fill().map(((e,t)=>{let r=t*s;return[i+t*n,o.map((e=>e+r))]}))}))}function hg(e,t){return lg(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}var dg=ng("AEgSbwjEDVYByQKaAQsBOQDpATQAngDUAHsAoABoANQAagCNAEQAhABMAHIAOwA9ACsANgAmAGIAHgAvACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGAAeABMAFwAXAA0ADgAWAA8AFAAVBFsF1QEXE0o3xAXUALIArkABaACmAgPGAK6AMDAwMAE/qAYK7P4HQAblMgVYBVkAPSw5Afa3EgfJwgAPA8meNALGCjACjqIChtk/j2+KAsXMAoPzASDgCgDyrgFCAi6OCkCQAOQA4woWABjVuskNDD6eBBx4AP4COhi+D+wKBirqBgSCaA0cBy4ArABqku+mnIAAXAaUJAbqABwAPAyUFvyp/Mo8INAIvCoDshQ8APcubKQAon4ZABgEJtgXAR4AuhnOBPsKIE04CZgJiR8cVlpM5INDABQADQAWAA9sVQAiAA8ASO8W2T30OVnKluYvChEeX05ZPe0AFAANABYAD2wgXUCYAMPsABwAOgzGFryp/AHauQVcBeMC0KACxLEKTR2kZhR0Gm5M9gC8DmgC4gAMLjSKF8qSAoF8ARMcAL4OaALiAAwuAUlQJpJMCwMt/AUpCthqGK4B2EQAciwSeAIyFiIDKCi6OGwAOuIB9iYAyA7MtgEcZIIAsgYABgCK1EoFHNZsGACoKNIBogAAAAAAKy4DnABoAQoaPu43dQQZGACrAcgCIgDgLBJ0OvRQsTOiKDVJBfsoBVoFWbC5BWo7XkITO1hCmHuUZmCh+QwUA8YIJvJ4JASkTAJUVAJ2HKwoAZCkpjZcA0YYBIRiCgDSBqxAMCQHKgI6XgBsAWIgcgCEHhoAlgFKuAAoahgBsMYDOC4iRFQBcFoGZgJmAPJKGAMqAgYASkIArABeAHQALLYGCPTwGo6AAAAKIgAqALQcSAHSAdwIDDKXeYHpAAsAEgA1AD4AOTR3etTBEGAQXQJNCkxtOxUMAq0PpwvmERYM0irM09kANKoH7ANUB+wDVANUB+wH7ANUB+wDVANUA1QDVBwL8BvUwRBgD0kEbgWPBYwE1wiEJkoRggcpCNNUDnQfHEgDRgD9IyZJHTuUMwwlQ0wNTQQH/TZDbKh9OQNIMaxU9pCjA8wyUDltAh5yEqEAKw90HTW2Tn96SHGhCkxPr7WASWNOaAK/Oqk/+QoiCZRvvHdPBj4QGCeiEPQMMAGyATgN6kvVBO4GOATGH3oZFg/KlZkIoi3aDOom4C6egFcj8iqABepL8TzaC0pRZQ9WC2IJ4DpggUsDHgEKIogK2g02CGoQ8ArGaA3iEUIHNgPSSZcAogb+Cw4dMhWyJg1iqQsGOXQG+BrzC4wmrBMmevkF0BoeBkoBJhr8AMwu5IWtWi5cGU9cBgALIiPEFKVQHQ0iQLR4RRoYBxIlpgKOQ21KhFEzHpAh8zw6DWMuEFF5B/I8AhlMC348m0aoRQsRzz6KPUUiRkwpBDJ8LCwniAnMD4IMtnxvAVYJHgmuDG4TLhEUN8IINgcWKpchJxIIHkaSYJcE9JwD8BPOAwgFPAk+BxADshwqEysVJgUKgSHUAvA20i6wAoxWfQEUBcgPIh/cEE1H3Q7mCJgCYgOAJegAKhUeABQimAhAYABcj9VTAi7ICMRqaSNxA2QU5F4RcAeODlQHpBwwFbwc3nDFXgiGBSigrAlYAXIJlgFcBOAIBjVYjJ0gPmdQi1UYmCBeQTxd+QIuDGIVnES6h3UCiA9oEhgBMgFwBzYM/gJ0EeoRaBCSCOiGATWyM/U6IgRMIYAgDgokA0xsywskJvYM9WYBoBJfAwk0OnfrZ6hgsyEX+gcWMsJBXSHuC49PygyZGr4YP1QrGeEHvAPwGvAn50FUBfwDoAAQOkoz6wS6C2YIiAk8AEYOoBQH1BhnCm6MzQEuiAG0lgNUjoACbIwGNAcIAGQIhAV24gAaAqQIoAACAMwDVAA2AqoHmgAWAII+AToDJCwBHuICjAOQCC7IAZIsAfAmBBjADBIA9DRuRwLDrgKAZ2afBdpVAosCRjIBSiIEAktETgOsbt4A2ABIBhDcRAESqEfIF+BAAdxsKADEAPgAAjIHAj4BygHwagC0AVwLLgmfsLIBSuYmAIAAEmgB1AKGANoAMgB87gFQAEoFVvYF0AJMRgEOLhUoVF4BuAMcATABCgB2BsiKosYEHARqB9ACEBgV3gLvKweyAyLcE8pCwgK921IAMhMKNQqkCqNgWF0wAy5vPU0ACx+lPsQ/SwVOO1A7VTtQO1U7UDtVO1A7VTtQO1UDlLzfvN8KaV9CYegMow3RRMU6RhPYYE5gLxPFLbQUvhXLJVMZOhq5JwIl4VUGDwEt0GYtCCk0che5ADwpZYM+Y4MeLQpIHORTjlT1LRgArkufM6wNqRsSRD0FRHXqYicWCwofAmR+AmI/WEqsWDcdAqH0AmiVAmYGAp+BOBgIAmY4AmYjBGsEfAN/EAN+jzkDOXQUOX86ICACbBoCMjM4BwJtxAJtq+yHMGRCKAFkANsA3gBHAgeVDIoA+wi/AAqyAncsAnafPAJ5SEACeLcaWdhFq0bwAnw8AnrFAn0GAnztR/1IemAhACgSSVVKWBIUSskC0P4C0MlLJAOITAOH40TCkS8C8p5dAAMDq0vLTCoiAMxNSU2sAos8AorVvhgEGkBkArQCjjQCjlk9lH4CjtYCjll1UbFTMgdS0VSCApP4ApMJAOYAGVUbVaxVzQMsGCmSgzLeeGNFODYCl5wC769YHqUAViIClowClnmZAKZZqVoGfkoAOAKWsgKWS1xBXM4CmcgCmWFcx10EFgKcmDm/OpoCnBMCn5gCnrWHABoMLicMAp3uAp6PALI6YTFh7AKe0AKgawGmAp6cHAKeS6JjxWQkIigCJ6wCJnsCoPgCoEnUAqYsAqXLAqf8AHoCp+9oeWiuAABGahlqzgKs4AKsqwKtZAKs/wJXGgJV2QKx3tQDH0tslAKyugoCsuUUbN1tYG1FXAMlygK2WTg8bo0DKUICuFsCuUQSArkndHAzcN4CvRYDLa8DMg4CvoVx/wMzbgK+F3Mfc0wCw8gCwwFzf3RIMkJ03QM8pAM8lwM9vALFeQLGRALGDYYCyGZOAshBAslMAskrAmSaAt3PeHZeeKt5IkvNAxigZv8CYfEZ8JUhewhej164DgLPaALPaSxIUM/wEJwAw6oCz3ABJucDTg9+SAIC3CQC24cC0kwDUlkDU1wA/gNViYCGPMgT6l1CcoLLg4oC2sQC2duEDYRGpzkDhqIALANkC4ZuVvYAUgLfYgLetXB0AuIs7REB8y0kAfSYAfLPhALr8ALpbXYC6vYC6uEA9kQBtgLuhgLrmZanlwAC7jwDhd2YdnDdcZ4C8wAAZgOOE5mQAvcQA5FrA5KEAveVAvnWAvhjmhmaqLg0mxsDnYAC/vcBGAA2nxmfsAMFigOmZwOm1gDOwgMGZ6GFogIGAwxGAQwBHAdqBl62ZAIAuARovA6IHrAKABRyNgAgAzASSgOGfAFgJB4AjOwAHgDmoAScjgi0BhygwgCoBRK86h4+PxZ5BWk4P0EsQiJCtV9yEl+9AJbGBTMAkE0am7o7J2AzErrQDjAYxxiKyfcFWAVZBVgFWQVkBVkFWAVZBVgFWQVYBVkFWAVZRxYI2IZoAwMDCmVe6iwEygOyBjC8vAC8BKi8AOhBKhazBUc+aj5xQkBCt192OF/pAFgSM6wAjP/MbMv9puhGez4nJAUsFyg3Nn5u32vB8hnDLGoBbNdvMRgFYAVrycLJuQjQSlwBAQEKfV5+jL8AND+CAAQW0gbmriQGAIzEDAMCDgDlZh4+JSBLQrJCvUI5JF8oYDcoOSQJwj4KRT9EPnk+gj5xPnICikK9SkM8X8xPUGtOCy1sVTBrDG8gX+E0OxwJaJwKYyQsPR4nQqxCvSzMAsv9X8oPIC8KCQoAACN+nt9rOy5LGMmsya0JZsLMzQphQWAP5hCkEgCTjh5GQiYbqm06zjkKND9EPnFCQBwICx5NSG1cLS5a4rwTCn7uHixCQBxeCUsKDzRVREM4BTtEnC0KghwuQkAb9glUIyQZMTIBBo9i8F8KcmTKYAxgLiRvAERgGjoDHB9gtAcDbBFmT2BOEgIAZOhgFmCWYH5gtGBMYJJpFhgGtg/cVqq8WwtDF6wBvCzOwgMgFgEdBB8BegJtMDGWU4EBiwq5SBsA5SR0jwvLDqdN6wGcAoidUAVBYAD4AD4LATUXWHsMpg0lILuwSABQDTUAFhO4NVUC0wxLZhEcANlPBnYECx9bADIAtwKbKAsWcKwzOaAaAVwBhwn9A9ruEAarBksGugAey1aqWwq7YhOKCy1ADrwBvAEjA0hbKSkpIR8gIi0TJwciDY4AVQJvWJFKlgJvIA9ySAHUdRDPUiEaqrFN6wcSBU1gAPgAPgsBewAHJW0LiAymOTEuyLBXDgwAYL0MAGRKaFAiIhzAADIAtwKbKC08D88CkRh8ULxYyXRzjtilnA72mhU+G+0S2hIHDxwByAk7EJQGESwNNwwAPAC0zwEDAKUA4gCbizAAFQBcG8cvbXcrDsIRAzwlRNTiHR8MG34CfATCC6vxbQA4Oi4Opzkuz6IdB7wKABA7Ls8SGgB9rNsdD7wbSBzOoncfAT4qYB0C7KAJBE3z5R9mDL0M+wg9Cj8ABcELPgJMDbwIvQ09CT0KvS7PoisOvAaYAhwPjBriBBwLvBY8AKELPBC8BRihe90AO2wMPQACpwm9BRzR9QYFB2/LBnwAB7wSXBISvQECAOsCAAB1FVwHFswV/HAXvBg8AC68AuyovAAevAJWISuAAAG8AALkFT0VvCvso7zJqDwEAp8nTAACXADn3hm8CaVcD7/FAPUafAiiBQv/cQDfvKe8GNwavKOMeXMG/KmchAASvAcbDAADlABtvAcAC7ynPAIaPLsIopzLDvwHwak8AOF8L7dtvwNJAAPsABW8AAb8AAm8AGmMABq8AA68Axi8jmoV/AABXAAObAAuTB8ABrwAF7wIIgANSwC6vCcAA7wADpwq7ACyWwAcHAAbvAAB7AqiAAXHCxYV3AAHnABCvAEDAGm8AAt8AB28AAi8CaIABcsAbqAZ1gCSCCIABcsAATwAB9wAHZwIIgAGmwAJfAAbLABtHADmvIEACFwACDwAFLwAaPwJIgAGywDjjAAJPAuiDsX7YAAHPABunUBJAEgACrwFAAM8AAmuAzgABxwAGXwAAgym/AAKHAAKPAAJ/KfsBrwACRwAAwwAEDwBABQ8ABFsAA+MAA3sAA28ABkMBxYcABU8AG6cFrQBvAC7ABM8BABpLAsA4UwAAjwABFMAF3wFHAAG0QAYvB8BfClTADpGALAJBw4McwApK3EBpQYIXwJtJA0ACghwTG1gK4oggRVjLjcDogq1AALZABcC/ARvAXdzSFMVIgNQAhY/AS0GBHRHvnxTe0EAKgAyAvwAVAvcAHyRLQEsAHfmDhIzRwJLAFgGAAJRAQiLzQB5PAQhpgBbANcWAJZpOCCMAM5ssgDQ1RcJw3Z0HBlXHgrSAYmRrCNUVE5JEz3DivoAgB04QSos4RKYUABzASosMSlDGhADMVYE+MbvAExm3QBrAnICQBF7Osh4LzXWBhETIAUVCK6v/xPNACYAAQIbAIYAiQCONgDjALQA1QCdPQC7AKsApgChAOcAnwDTAJwA4AEBAPwAwAB6AFsAywDNAPwA1wDrAIkAogEqAOMA2ADVBAIIKzTT09PTtb/bzM/NQjEWAUsBVS5GAVMBYgFhAVQBRUpCRGcMAUwUBgkEMzcMBwAgDSQmKCs3OTk8PDw9Pg0/HVBQUFBSUlFSKFNUVlVVHFxgYF9hYCNlZ29ucXFxcXFxc3Nzc3Nzc3Nzc3N1dXZ1dFsAPesAQgCTAHEAKwBf8QCHAFAAUAAwAm/oAIT+8fEAXQCM6wCYAEgAWwBd+PipAH4AfgBiAE8AqgAdAK8AfAI5AjwA9QDgAPcA9wDhAPgA4gDiAOEA3wAoAnQBSgE5ATcBTQE3ATcBNwEyATEBMQExARUBURAAKgkBAEwYCxcEFhcPAIcAjwCfAEoAYxkCKgBvAGgAkAMOAyArAxpCP0gqAIoCSADAAlACnQC5Ao8CjwKPAo8CjwKPAoQCjwKPAo8CjwKPAo8CjgKOApECmQKQAo8CjwKNAo0CjQKNAosCjgJuAc0CkAKYAo8CjwKOF3oMAPcGA5gCWgIzGAFNETYC2xILLBQBRzgUTpIBdKU9AWJaAP4DOkgA/wCSKh4ZkGsAKmEAagAvAIoDlcyM8K+FWwa7LA/DEgKe1nUrCwQkWwGzAN5/gYB/gX+Cg4N/hIeFf4aJh4GIg4mDin+Lf4x/jYuOf49/kIORf5J/k3+Uf5WElomXg5h/AIMloQCEBDwEOQQ7BD4EPARCBD8EOgRABEIEQQQ9BD8EQgCkA4gAylIA0AINAPdbAPcBGgD3APUA9QD2APXVhSRmvwD3APUA9QD2APUdAIpbAPcAigEaAPcAigLtAPcAitWFJGa/HQD4WwEaAPcA9wD1APUA9gD1APgA9QD1APYA9dWFJGa/HQCKWwEaAPcAigD3AIoC7QD3AIrVhSRmvx0CRAE3AksBOgJMwgOfAu0Dn9WFJGa/HQCKWwEaA58AigOfAIoC7QOfAIrVhSRmvx0EMQCKBDIAigeOMm4hLQCKAT9vBCQA/gDHWwMAVVv/FDMDAIoDPtkASgMAigMAl2dBtv/TrfLzakaPh3aztmIuZQrR3ER2n5Yo+qNR2jK/aP/V04UK1njIJXLgkab9PjOxyJDVbIN3R/FZLoZVl2kYFQIZ7V6LpRqGDt9OdDohnJKp5yX/HLj0voPpLrneDaN11t5W3sSM4ALscgSw8fyWLVkKa/cNcQmjYOgTLZUgOLi2F05g4TR0RfgZ4PBdntxdV3qvdxQt8DeaMMgjJMgwUxYN3tUNpUNx21AvwADDAIa0+raTWaoBXmShAl5AThpMi282o+WzOKMlxjHj7a+DI6AM6VI9w+xyh3Eyg/1XvPmbqjeg2MGXugHt8wW03DQMRTd5iqqOhjLvyOCcKtViGwAHVLyl86KqvxVX7MxSW8HLq6KCrLpB8SspAOHO9IuOwCh9poLoMEha9CHCxlRAXJNDobducWjqhFHqCkzjTM2V9CHslwq4iU19IxqhIFZMve15lDTiMVZIPdADXGxTqzSTv0dDWyk1ht430yvaYCy9qY0MQ3cC5c1uw4mHcTGkMHTAGC99TkNXFAiLQgw9ZWhwKJjGCe+J5FIaMpYhhyUnEgfrF3zEtzn40DdgCIJUJfZ0mo3eXsDwneJ8AYCr7Vx2eHFnt2H6ZEyAHs9JoQ4Lzh5zBoGOGwAz37NOPuqSNmZf51hBEovtpm2T1wI79OBWDyvCFYkONqAKGVYgIL0F+uxTcMLSPtFbiNDbBPFgip8MGDmLLHbSyGXdCMO6f7teiW9EEmorZ+75KzanZwvUySgjoUQBTfHlOIerJs6Y9wLlgDw18AB1ne0tZRNgGjcrqHbtubSUooEpy4hWpDzTSrmvqw0H9AoXQLolMt9eOM+l9RitBB1OBnrdC1XL4yLFyXqZSgZhv7FnnDEXLUeffb4nVDqYTLY6X7gHVaK4ZZlepja2Oe6OhLDI/Ve5SQTCmJdH3HJeb14cw99XsBQAlDy5s5kil2sGezZA3tFok2IsNja7QuFgM30Hff3NGSsSVFYZLOcTBOvlPx8vLhjJrSI7xrNMA/BOzpBIJrdR1+v+zw4RZ7ry6aq4/tFfvPQxQCPDsXlcRvIZYl+E5g3kJ+zLMZon0yElBvEOQTh6SaAdIO6BwdqJqfvgU+e8Y65FQhdiHkZMVt9/39N2jGd26J6cNjq8cQIyp6RonRPgVn2fl89uRDcQ27GacaN0MPrcNyRlbUWelKfDfyrNVVGBG5sjd3jXzTx06ywyzuWn5jbvEfPPCTbpClkgEu9oPLKICxU5HuDe3jA1XnvU85IYYhaEtOU1YVWYhEFsa4/TQj3rHdsU2da2eVbF8YjSI0m619/8bLMZu3xildwqM7zf1cjn4Whx0PSYXcY5bR7wEQfGC7CTOXwZdmsdTO8q3uGm7Rh/RfCWwpzBHCAaVfjxgibL5vUeL0pH6bzDmI9yCXKC/okkmbc28OJvI87L/bjFzpq0DHepw4kT1Od+fL7cyuFaRgfaUWB2++TCFvz11J0leEtrGkpccfX9z2LY39sph4PBHCjNOOkd0ybUm+ZzS8GkFbqMpq8uiX2yHpa0jllTLfGTDBMYR6FT5FWLLDPMkYxt1Q0eyMvxJWztDjy0m6VvZPvamrFXjHmPpU6WxrZqH6WW//I37RwvqPQhPz8I3RPuXAk1C94ZprQWm9iGM/KgiGDO6SV9sjp+Jmk4TBajMNJ5zzWZ1k1jrteQQBp9C2dOvmbIeeEME8y573Q8TgGe+ZCzutM45gYLBzYm2LNvgq2kebAbMpHRDSyh6dQ27GbsAAdCqQVVXWC1C+zpwBM2Lr4eqtobmmu1vJEDlIQR1iN8CUWpztq50z7FFQBn3SKViX6wSqzVQCoYvAjByjeSa+h1PRnYWvBinTDB9cHt4eqDsPS4jcD3FwXJKT0RQsl8EvslI2SFaz2OtmYLFV8FwgvWroZ3fKmh7btewX9tfL2upXsrsqpLJzpzNGyNlnuZyetg7DIOxQTMBR7dqlrTlZ6FWi1g4j1NSjA2j1Yd7fzTH6k9LxCyUCneAKYCU581bnvKih6KJTeTeCX4Zhme/QIz7w2o+AdSgtLAkdrLS9nfweYEqrMLsrGGSWXtgWamAWp6+x6GM/Z8jNw3BqPNQ39hrzYLECn3tPvh/LqKbRSCiDGauDKBBj/kGbpnM1Bb/my8hv4NWStclkwjfl57y4oNDgw1JAG9VOti3QVVoSziMEsSdfEjaCPIDb7SgpLXykQsM+nbqbt97I0mIlzWv0uqFobLMAq8Rd9pszUBKxFhBPwOjf//gVOz2r7URJ2OnpviCXv9iz3a4X/YLBYbXoYwxBv/Kq0a5s4utQHzoTerJ7PmFW/no/ZAsid/hRIV82tD+Qabh5F1ssIM8Ri3chu0PuPD3sSJRMjDoxLAbwUbroiPAz/V52e8s3DIixxlO7OrvhMj3qfzA0kKxzwicr5wJmZwJxTXgrwYsqhRvpgC2Nfdyd+TYYxJSZgk+gk2g9KyHSlwQVAyPtWWgvVGyVBqsU2LpDlLNosSAtolC1uBKt5pQZLhAxTjeGCWIC/HVpagc5rRwkgpCHKEsjA8d+scp8aiMewwQBhp5dYTV5t/Nvl+HbDMu8F3S0psPyZb1bSnqlHPFUnMQeQqSqwDBT23fJO9gO3aVaa1icrXU0PKwlMM5K+iL3ATcVq2fFWKk0irCTF4LDVDG4gUpkyplq6efcZS+WDR1woApjD18x+2JQR9oOXzuA7uy4b+/91WsJd/tSd1QcAH8PVPXApieA37B7YXPhDPH1azP3PKR+HfHmOoDYLeuKsIi/ssSsdYs62qJo14Hw1P2N/6zpr8F3FTWmJ4ysAVcl84Iv/tl///Z8FaAWbBQbyMNDZjrZ2JwdRjtd1jOeNumSodFtr4/Zf45iRJf/8HSW+KIB/+GlKu8Rv1BPLr/4duoL+kFPRqrstEr41gfJupoJRf4hcYDWX93FOcfEBiIivxtjtV8g7mvOReiamYWKE7vfPbv3v2L9Kwq3cIDFGLyhyfOGuf/9vA5muH6Pjg7B4SUj2ydDXra9fSBI+DrsNHA6l51wfHssJb+11TfNk7B8OleUe3Y+ZmHboMFHdv7FFP2cfISFyeAQR0sk/Xv62HBTdW4HmnGSLFk/cqyWVVFJkdIIa+4hos3JRHcqLoRKM5h2Qtk1RZtzISMtlXTfTqIc77YsCCgQD0r61jtxskCctwJOtjE/pL8wC4LBD4AZFjh2wzzFCrT/PNqW0/DeBbkfMfzVm9yy06WiF+1mTdNNEAytVtohBKg3brWd2VQa+aF+cQ0mW5CvbwOlWCT07liX226PjiVLwFCRs/Ax2/u+ZNPjrNFIWIPf5GjHyUKp60OeXe9F01f7IaPf/SDTvyDAf7LSWWejtiZcsqtWZjrdn6A2MqBwnSeKhrZOlUMmgMionmiCIvXqKZfmhGZ1MwD3uMF4n9KJcfWLA3cL5pq48tm5NDYNh3SS/TKUtmFSlQR89MR4+kxcqJgpGbhm9gXneDELkyqAN5nitmIzTscKeJRXqd64RiaOALR2d295NWwbjHRNG2AU5oR9OS2oJg/5CY6BFPc1JvD2Mxdhp2/MZdI8dLePxiP4KRIp8VXmqfg+jqd/RNG7GNuq1U2SiI4735Bdc0MVFx6mH5UOWEa5HuhYykd6t4M1gYLVS8m1B+9bUqi5DziQq7qT8d94cxB6AB4WqMCOF/zPPtRSZUUaMSsvHOWxGASufywTX8ogy6HgUf9p+Z30wUEosl8qgmwm6o2AV6nO9HKQjRHpN6SUegI5pvR61RLnUJ1lqCtmfcsRQutEizVpAaPXN7xMp5UQ5OSZK6tniCK9CpyMd7LjR6+MxfoMEDPpWdf2p2m5N3KO4QMxf+V7vGdYjemQczQ+m2MGIkFNYDMf0Yop2eSx81sP36WHUczqEhKysp2iJSYAvfgJjinKwToPvRKb+HBi+7cJ96S5ngfLOXaHAFRLkulo4TnXTFO51gX0TCCo4ZUHdbpdgkMEwUZAPjh6M+hA8DzycbtxAgH3uD6i0nN1aTiIuQ4BYCE9dEHHwAmINU+4YEWx4EC3OZwFGfYZMPLScVlb+BAAJeARUh+gdWA3/gRqCrf1jecgqeFf1MdzrrP4SVlGm5mMihSP+zYYksAB7O+SBPwNQqSNMiLnkviY/klwgcRmvqtCqeWeA0gjuir4CMZqmw/ntP6M+l0pdN8/P9xI53aP7x/zavJbbKOz8VzO/nXxIr1tjparMnqd6iWdByHKw4lF4p/u57Yv07WeZPDnRl7wgmDVZZ44fQsjdYO/gmXQ+940PRGst8UMQApFC4OOV22e4N+lVOPyFLAOj4t8R3PFw/FjbSWy0ELuAFReNkee8ORcBOT2NPDcs7OfpUmzvn/F9Czk9o9naMyVYy/j8I5qVFmQDFcptBp65J/+sJA3w/j6y/eqUkKxTsf0CZjtNdRSBEmJ2tmfgmJbqpcsSagk+Ul9qdyV+NnqFBIJZFCB1XwPvWGDBOjVUmpWGHsWA5uDuMgLUNKZ4vlq5qfzY1LnRhCc/mh5/EX+hzuGdDy5aYYx4BAdwTTeZHcZpl3X0YyuxZFWNE6wFNppYs3LcFJePOyfKZ8KYb7dmRyvDOcORLPH0sytC6mH1US3JVj6paYM1GEr+CUmyHRnabHPqLlh6Kl0/BWd3ebziDfvpRQpPoR7N+LkUeYWtQ6Rn5v5+NtNeBPs2+DKDlzEVR5aYbTVPrZekJsZ9UC9qtVcP99thVIt1GREnN8zXP8mBfzS+wKYym8fcW6KqrE702Zco+hFQAEIR7qimo7dd7wO8B7R+QZPTuCWm1UAwblDTyURSbd85P4Pz+wBpQyGPeEpsEvxxIZkKsyfSOUcfE3UqzMFwZKYijb7sOkzpou+tC4bPXey5GI1GUAg9c3vLwIwAhcdPHRsYvpAfzkZHWY20vWxxJO0lvKfj6sG2g/pJ1vd/X2EBZkyEjLN4nUZOpOO7MewyHCrxQK8d5aF7rCeQlFX+XksK6l6z971BPuJqwdjj68ULOj9ZTDdOLopMdOLL0PFSS792SXE/EC9EDnIXZGYhr52aQb+9b2zEdBSnpkxAdBUkwJDqGCpZk/HkRidjdp0zKv/Cm52EenmfeKX6HkLUJgMbTTxxIZkIeL/6xuAaAAHbA7mONVduTHNX/UJj1nJEaI7f3HlUyiqKn7VfBE+bdb4HWln1HPJx001Ulq1tOxFf8WZEARvq5Da1+pE7fPVxLntGACz3nkoLsKcPdUqdCwwiyWkmXTd5+bv3j7HaReRt3ESn783Ew3SWsvkEjKtbocNksbrLmV+GVZn1+Uneo35MT1/4r8fngQX5/ptORfgmWfF6KSB/ssJmUSijXxQqUpzkANEkSkYgYj560OOjJr6uqckFuO15TRNgABEwNDjus1V3q2huLPYERMCLXUNmJJpbMrUQsSO7Qnxta55TvPWL6gWmMOvFknqETzqzFVO8SVkovEdYatypLGmDy9VWfgAc0KyIChiOhbd7UlbAeVLPZyEDp4POXKBwN/KP5pT6Cyqs6yaI00vXMn1ubk9OWT9Q/O2t/C25qlnO/zO0xcBzpMBCAB8vsdsh3U8fnPX1XlPEWfaYJxKVaTUgfCESWl4CCkIyjE6iQ5JFcwU6S4/IH0/Agacp8d5Gzq2+GzPnJ7+sqk40mfFQpKrDbAKwLlr3ONEati2k/ycLMSUu7V/7BBkDlNyXoN9tvqXCbbMc4SSQXgC/DBUY9QjtrCtQ+susEomCq8xcNJNNMWCH31GtlTw2BdCXkJBjT+/QNWlBWwQ5SWCh1LdQ99QVii/DyTxjSR6rmdap3l3L3aiplQpPYlrzNm9er88fXd2+ao+YdUNjtqmxiVxmyYPzJxl67OokDcTezEGqldkGgPbRdXA+fGcuZVkembZByo7J1dMnkGNjwwCny+FNcVcWvWYL9mg8oF7jACVWI3bA64EXpdM8bSIEVIAs5JJH+LHXgnCsgcMGPZyAAVBncvbLiexzg9YozcytjPXVlAbQAC7Tc4S0C8QN4LlAGjj4pQAVWrwkaDoUYGxxvkCWKRRHkdzJB5zpREleBDL1oDKEvAqmkDibVC4kTqF89YO6laUjgtJPebBfzr16tg4t10GmN1sJ5vezk2sUOq8blCn5mPZyT3ltaDcddKupQjqusNM9wtFVD0ABzv17fZDn7GPT1nkCtdcgYejcK1qOcTGtPxnCX1rErEjVWCnEJv5HaOAUjgpiKQjUKkQi64D5g2COgwas8FcgIl0Pw95H9dWxE3QG0VbMNffh6BPlAojLDf4es2/5Xfq7hw5NGcON2g8Qsy2UQm94KddKyy3kdJxWgpNaEc15xcylbLC3vnT26u8qS90qc2MU8LdOJc5VPF5KnSpXIhnj1eJJ/jszjZ01oR6JDFJRoeTPO/wh4IPFbdG9KljuSzeuI92p8JF/bpgDE8wG86/W2EBKgPrmzdLijxssQn8mM44ky/KLGOJcrSwXIpZa/Z3v7W6HCRk7ewds99LTsUW1LbeJytw8Q/BFZVZyfO9BUHOCe2suuEkO8DU4fLX0IQSQ2TdOkKXDtPf3sNV9tYhYFueuPRhfQlEEy+aYM/MCz7diDNmFSswYYlZZPmKr2Q5AxLsSVEqqBtn6hVl1BCFOFExnqnIsmyY/NA8jXnDaNzr7Zv3hu+I1Mf/PJjk0gALN2G8ABzdf9FNvWHvZHhv6xIoDCXf964MxG92vGZtx/LYU5PeZqgly8tT5tGeQGeJzMMsJc5p+a5Rn2PtEhiRzo/5Owjy1n0Lzx3ev8GHQmeWb8vagG6O5Qk5nrZuQTiKODI4UqL0LLAusS2Ve7j1Ivdxquu1BR9Rc4QkOiUPwQXJv6du2E8i5pDhVoQpUhyMWGUT2O2YODIhjAfI71gxep5r5zAY7GBUZpy51hAw0pcCCrhOmU8Wp6ujQTdZQsCjtq6SHX8QAMNiPCIIkoxhHEZPgsBcOlP4aErJZPhF7qvx6gHrn8hEwPwYbx8YmT/n7lbcmTip1v8kgsrIjFTAlvLY4Nuil0KDmgz3svYs0ZJ3O3Is/vSx4xpxF1e2VAtZE8dJxGYEIhCSuPvCjP54l/NSNDnwlKvAW8mG+AQkgp7a87Igh26uKMFGD0PoPHTSvoWxiHuk+su8XkQiHIjeYKl/RdcOHpxhQH3zHCNE3aARm83Bl6zGxU/vMltlVPQhubcqhW4RYkl6uXk5JdP/QpzaKFpw2M8zvysv2qj7xaQECuu2akM0Cssj/uB9+wDR7uA6XOnLNaoczalHoMj33eiiu+DRaFsUmlmUZuh9bjDY4INMNSSAivSh03uJvny4Gj+D+neudoa7iJi7c4VFlZ/J5gUR82308zSNAt/ZroBXDWw0fV3eVPAn3aX0mtJabF6RsUZmL+Ehn+wn51/4QipMjD+6y64t7bjL6bjENan2prQ4h7++hBJ9NXvX8CUocJqMC937IasLzm5K0qwXeFMAimMHkEIQIQI2LrQ9sLBfXuyp66zWvlsh74GPv7Xpabj993pRNNDuFud5oIcn/92isbADXdpRPbjmbCNOrwRbxGZx2XmYNGMiV5kjF4IKyxCBvKier9U4uVoheCdmk83rp5G0PihAm2fAtczI4b9BWqX+nrZTrJX5kSwQddi93NQrXG+Cl3eBGNkM77VBsMpEolhXex1MVvMkZN9fG59GGbciH11FEXaY1MxrArovaSjE/lUUqBg2cZBNmiWbvzCHCPJ4RVGFK2dTbObM1m+gJyEX53fa7u3+TZpm74mNEzWbkVL4vjNwfL9uzRCu1cgbrNx5Yv5dDruNrIOgwIk+UZWwJfdbu/WHul6PMmRflVCIzd7B37Pgm/Up/NuCiQW7RXyafevN3AL6ycciCc4ZPlTRzEu+aURGlUBOJbUEsheX7PPyrrhdUt5JAG12EEEZpY/N3Vhbl5uLAfT0CbC2XmpnryFkxZmBTs5prvEeuf0bn73i3O82WTiQtJWEPLsBXnQmdnKhB06NbbhLtlTZYJMxDMJpFeajSNRDB2v61BMUHqXggUwRJ19m6p5zl51v11q34T74lTXdJURuV6+bg2D6qpfGnLy7KGLuLZngobM4pIouz4+n0/UzFKxDgLM4h+fUwKZozQ9UGrHjcif51Ruonz7oIVZ56xWtZS8z7u5zay6J2LD4gCYh2RXoBRLDKsUlZ80R8kmoxlJiL8aZCy2wCAonnucFxCLT1HKoMhbPKt34D97EXPPh0joO93iJVF1Uruew61Qoy3ZUVNX9uIJDt9AQWKLLo+mSzmTibyLHq0D6hhzpvgUgI6ekyVEL3FD+Fi5R3A8MRHPXspN1VyKkfRlC+OGiNgPC4NREZpFETgVmdXrQ2TxChuS3aY+Ndc7CiYv5+CmzfiqeZrWIQJW/C4RvjbGUoJFf1K6ZdR2xL/bG4kVq1+I4jQWX+26YUijpp+lpN7o5c6ZodXJCF56UkFGsqz44sIg8jrdWvbjRCxi2Bk0iyM3a7ecAV93zB6h1Ei38c0s6+8nrbkopArccGP8vntQe1bFeEh2nJIFOHX/k3/UHb5PtKGpnzbkmnRETMX+9X/QduLZWw/feklW/kH/JnzToJe9Kgu9Hct1UGbH5BPCLo4OOtQnZonW0xnyCcdtKyPQ/sbLiSTYJdSx4sJqWLMnfn6fIqPB3WAgk00J+fCOkomPHqtS67pf0mFmKoItYZUlJu6BihSZ8qve8+/X+LX1MhQXF95AshfUleCtmdn6l6QFXzLg2sgLn1oyVFuZecv7fzsIHzoRlAGp0gwYDOn1S4qabWvB5xUaE+Svw4KmjWtxdnuQbI32dw87D4N95u8qQRJTSQg0wLxOLkxSrPMLEn1UIhNKjAa9VLs3WLaXGrtCIt8bKY2AQP/ZdyRU6zT/E8qP2ltyBE2CCZPgWgEYDoJJO4n92y61ylNaSFXKohJhLjkfvYWm592539sIpmBNLlDo1bExFBfmHJJ0lFEiC/fj8v42OoMC9Mo3whIoWvyHfq6Uacqq55mzFf/EGC+NP/gHjhd6urc6R0hES27VXux7UY8CGKPohplWIZtTrFSaPWslCWy78E22Pw8fvReSUZx/txqLtHrFqg1DY/Eus6Iq1heZdrdcqE0/c971Bz1HW/XNXHsXpUIbI4kHdOfCc6T5zHZzvzQJB0ggMFL6IGPAilU9bj/ASdPk6fNvNtZqPuwEDhMBtBnhCexo6D6VAGIOPvJPPV523Y8R8a9vCqZbswSZKzOT1291BsUbmUWehtbb1fdRX9hiJKXvwr1QX6GjnZMgyMvnwOo2Dr24amr7FqEAbVeJAjRNOceM2EQ1Mna9fInqPJ5mh5X8CzT1aDOv08An0blz0fF5Gq4mS2cwq5glwIOlY5nznE8X4j/UdZ3FJsVIXte1JH0A7iibuPfazStM5O/Vo3KXIpXBeGORV0M9XDXFvsYZUHGvFCUubWzTw248EHE0cpQM2zNg6rjavreq3NHCAWsoZ7wvVy7l5gvtKRmIj1MnvfWEm0yFnGcuOq192350a5WefpfKCcX3Sn+AgHU+qnpstNtddbdVebagJU390lq9ko4aI9rqdaWXYG8tv5O/ZQHSqDRYHC6zfH10l5z++opso7aOSaIczlQ13iAzXvLdEu0V7kwNUZ1c8Y8aq7SeIEe5p902FlNkW8DnwHyueHchbK8vVFJfmr9mz7P8nUSccl1ULaoWMRSI1ls32kvlK0h46h3J25Yd9AzfcJbp9qYF/SEt3H5j69mMdcsNxZcAzT/A89ov3tglTX54y/EwjMfuoDoxPwLJDm5I7q6F9Kp469yNy1zSxz0N4HbRRBj9xFFuogvBspv7DXUNIsGxTINEQfmctb42XImWAODgARNo7dfcTqFKq6aTfivmvunLmzP9f8yLsJvXD3JbcPcDGNriMAcjzeDTNr65t8YB5tsnFDFLa0Uwmd2OvUdkLMX9TsAUYUfooSv47sw5J88j7CpahRjjO3/UhOXjTS39W5YZAel2KTbQd1h7INOw9P23GW7GDAe4agIUFHP48MZr7ubq0efFmmtwYMyk7D0r1oeG/CGOODgb9Ur+JMHxkwzPbtCX2ZnENQuI0RN5SyTIZuoY4XS9Rd/tPe3vNAZGSHM/YYwqs9xkkENx0O+eC2YVW1cwOJ3ckE890nbQeHLKlW15L0P0W2VliyYrfNr0nrIYddoRyGaCtj4OYd2MT7ebApqZOAQIaSHJM4mphhfjNjtnjg6YRyx9qM2FT3xOiYIMqXPFWdzhSgFF8ItocqVV09CmIoO8k6U/oJB7++wSX/YksxfPXHyjSgAGZOj1aKEq9fSvXBqtp2wu8/FxEf5AxapAD06pPGuLVUYLdgEzHR8wqRGYEwiUO9MyYbgswstuLYhwYFpSVKOdzAihZ9LuHtD598EGhINU9xc9xhL+QgTLAstmPIvvm2xyRw/WTUPXkP3ZHu6GyPmj5xFH9/QGpkglKXRVUBgVmLOJx8uZO2AstxQYocZH2JhORlxawj66BAXUEs7K/gPxINIRAFyK3WLuyq9oBTF9wEbnmCot82WjIg7CPNwYK3KrZMrKAz5yFszg4wCVLJVnIL8+OYA0xRDH8cHQjQUiQ2i1mr/be32k/3Xej9sdf3iuGvZHyLFSJvPSqz/wltnxumTJYKZsrWXtx/Rmu39jjV9lFaJttfFn57/No2h/unsJmMHbrnZ8csxkp5HQ4xR1s0HH+t3Iz82a3iQWTUDGq/+l2W3TUYLE8zNdL8Y+5oXaIH/Y2UUcX67cXeN4WvENZjz4+8q7vjhowOI3rSjFhGZ6KzwmU7+5nFV+kGWAZ5z2UWvzq0TK0pk1hPwAN4jbw//1CApRvIaIjhSGhioY6TUmsToek9cF9XjJdHvLPcyyCV3lbR5Jiz/ts46ay2F820VjTXvllElwrGzKcNSyvQlWDXdwrUINXmHorAM3fE19ngLZmgeUaCJLsSITf2VcfAOuWwX7mTPdP8Zb/04KqRniufCpwnDUk7sP0RX6cud/sanFMagnzKInSRVey0YzlVSOtA/AjrofmSH6RYbJQ8b4NDeTkIGc6247+Mnbez/qhJ9GAv9fGNFercPnnrf285Qgs+UqThLRgflcAKFuqWhLzZaR4QqvSwa3xe0LPkqj9xJWub195r7NrrR0e78FR+0mRBNMPsraqZctAUVAJfYKehTDV1MGGQSeDsOK9J3sbUuKRIS/WilX/64CBms9jCZocBlsBSZaIAjWm/SUZ8daWL2a/cJFyUOFqE3Epc2RWbtjNyPwOGpWtzu32kUooUqsJud7IV4E8rstUBXM7tGEtBx99x60g1duhyvxeKJSl8s5E34HTMmADT0836aEdg5Dv9rVyCz8i2REOmiz6wtIVFN0HsjAoN37SrY0bV1Ms8CRUILhvZvvRaDzoVCaSI0u8EPuTe4b7OPowgRGODl22UBBmHSTUY8e4DyL+Bc7bngo+2T8HtNvzyATSL5iJZgFPKpmUyZv54vVL90+/RQGATUmNKnrIvcJMYON9fl83naW5sf6hRkbbTC9RUEE6XADwjgA46wWfUQ+QWZl0J4PVTWAln/YfAz/SV3q3J9+yCYDleruoN5uoc/wT2f4YONGTb6zTGq3V+3JqzmCOjwebKln+fExVLN7sqtqfMnsKVXWbb2Ai5m3D/fCTgX7oKYzTZvj+m28XnDqPbXuP4MyWdmPezcesdrh7rCzA7BWdObiuyDEKjjzBbQ0qnuwjliz+b+j7aPMKlkXyIznV3tGzAfYwIbzGGt098oh4eq3ruDjdgHtjxfFCjHrjjRbHajoz/YOY4raojPFQ910GIlBV7hq47UDgpyajBxQUmD8NctiLV1rTSLAEsQDLTeRKcmPBMVMFF0SPBBhZ5oXoxtD3lMhuAQXmA+57OcciczVW9e9zwSIAHS+FJmvfXMJGF1dMBsIUMaPjvgaVqUc3p32qVCMQYFEiRLzlVSOGMCmv/HJIxAHe3mL/XnoZ1IkWLeRZfgyByjnDbbeRK5KL7bYHSVJZ9UFq+yCiNKeRUaYjgbC3hVUvfJAhy/QNl/JqLKVvGMk9ZcfyGidNeo/VTxK9vUpodzfQI9Z2eAre4nmrkzgxKSnT5IJ1D69oHuUS5hp7pK9IAWuNrAOtOH0mAuwCrY8mXAtVXUeaNK3OXr6PRvmWg4VQqFSy+a1GZfFYgdsJELG8N0kvqmzvwZ02Plf5fH9QTy6br0oY/IDsEA+GBf9pEVWCIuBCjsup3LDSDqI+5+0IKSUFr7A96A2f0FbcU9fqljdqvsd8sG55KcKloHIFZem2Wb6pCLXybnVSB0sjCXzdS8IKvE");const fg=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),pg=4;function gg(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function mg(e){let t=[];for(let n=0,s=e.length;n<s;){let s=e.codePointAt(n);n+=s<65536?1:2,t.push(s)}return t}function yg(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let n=[];for(let s=0;s<t;)n.push(String.fromCodePoint(...e.slice(s,s+=4096)));return n.join("")}var bg=ng("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");function wg(e){return e>>24&255}function vg(e){return 16777215&e}const Ag=new Map(og(bg).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),_g=new Set(ig(bg)),kg=new Map,Eg=new Map;for(let[e,t]of ag(bg)){if(!_g.has(e)&&2==t.length){let[n,s]=t,r=Eg.get(n);r||(r=new Map,Eg.set(n,r)),r.set(s,e)}kg.set(e,t.reverse())}const xg=44032,Cg=4352,Sg=4449,Pg=4519,Tg=28,Ig=21*Tg,Og=xg+19*Ig,Ng=Cg+19,jg=Sg+21,Lg=Pg+Tg;function Ug(e){return e>=xg&&e<Og}function Rg(e,t){if(e>=Cg&&e<Ng&&t>=Sg&&t<jg)return xg+(e-Cg)*Ig+(t-Sg)*Tg;if(Ug(e)&&t>Pg&&t<Lg&&(e-xg)%Tg==0)return e+(t-Pg);{let n=Eg.get(e);return n&&(n=n.get(t),n)?n:-1}}function Dg(e){let t=[],n=[],s=!1;function r(e){let n=Ag.get(e);n&&(s=!0,e|=n),t.push(e)}for(let s of e)for(;;){if(s<128)t.push(s);else if(Ug(s)){let e=s-xg,t=e%Ig/Tg|0,n=e%Tg;r(Cg+(e/Ig|0)),r(Sg+t),n>0&&r(Pg+n)}else{let e=kg.get(s);e?n.push(...e):r(s)}if(!n.length)break;s=n.pop()}if(s&&t.length>1){let e=wg(t[0]);for(let n=1;n<t.length;n++){let s=wg(t[n]);if(0==s||e<=s){e=s;continue}let r=n-1;for(;;){let n=t[r+1];if(t[r+1]=t[r],t[r]=n,!r)break;if(e=wg(t[--r]),e<=s)break}e=wg(t[n])}}return t}function Mg(e){return Dg(e).map(vg)}function Bg(e){return function(e){let t=[],n=[],s=-1,r=0;for(let i of e){let e=wg(i),o=vg(i);if(-1==s)0==e?s=o:t.push(o);else if(r>0&&r>=e)0==e?(t.push(s,...n),n.length=0,s=o):n.push(o),r=e;else{let i=Rg(s,o);i>=0?s=i:0==r&&0==e?(t.push(s),s=o):(n.push(o),r=e)}}return s>=0&&t.push(s,...n),t}(Dg(e))}const Fg=65039,$g=".",Gg=1,Hg=45;function zg(){return new Set(ig(dg))}const Wg=new Map(ag(dg)),qg=zg(),Kg=zg(),Vg=new Set(ig(dg).map((function(e){return this[e]}),[...Kg])),Jg=zg(),Qg=(zg(),og(dg));function Yg(){return new Set([ig(dg).map((e=>Qg[e])),ig(dg)].flat(2))}const Xg=dg(),Zg=cg((e=>{let t=cg(dg).map((e=>e+96));if(t.length){let n=e>=Xg;t[0]-=32,t=yg(t),n&&(t=`Restricted[${t}]`);let s=Yg(),r=Yg(),i=[...s,...r].sort(((e,t)=>e-t));return{N:t,P:s,M:!dg(),R:n,V:new Set(i)}}})),em=zg(),tm=new Map;[...em,...zg()].sort(((e,t)=>e-t)).map(((e,t,n)=>{let s=dg(),r=n[t]=s?n[t-s]:{V:[],M:new Map};r.V.push(e),em.has(e)||tm.set(e,r)}));for(let{V:e,M:t}of new Set(tm.values())){let n=[];for(let t of e){let e=Zg.filter((e=>e.V.has(t))),s=n.find((({G:t})=>e.some((e=>t.has(e)))));s||(s={G:new Set,V:[]},n.push(s)),s.V.push(t),e.forEach((e=>s.G.add(e)))}let s=n.flatMap((({G:e})=>[...e]));for(let{G:e,V:r}of n){let n=new Set(s.filter((t=>!e.has(t))));for(let e of r)t.set(e,n)}}let nm=new Set,sm=new Set;for(let e of Zg)for(let t of e.V)(nm.has(t)?sm:nm).add(t);for(let e of nm)tm.has(e)||sm.has(e)||tm.set(e,Gg);const rm=new Set([...nm,...Mg(nm)]),im=ig(dg),om=function e(t){let n=cg((()=>{let t=ig(dg).map((e=>im[e]));if(t.length)return e(t)})).sort(((e,t)=>t.Q.size-e.Q.size)),s=dg(),r=s%3;s=s/3|0;let i=1&s;return s>>=1,{B:n,V:r,F:i,S:1&s,C:2&s,Q:new Set(t)}}([]);class am extends Array{get is_emoji(){return!0}}function cm(e,t=gg){let n=[];var s;s=e[0],Kg.has(s)&&n.push("");let r=0,i=e.length;for(let s=0;s<i;s++){let i=e[s];dm(i)&&(n.push(yg(e.slice(r,s))),n.push(t(i)),r=s+1)}return n.push(yg(e.slice(r,i))),n.join("")}function lm(e){return(dm(e)?"":`${um(cm([e]))} `)+gg(e)}function um(e){return`"${e}"`}function hm(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}function dm(e){return Jg.has(e)}function fm(e,t){let n=0;return e.split($g).map((e=>{let s,r=mg(e),i={input:r,offset:n};n+=r.length+1;try{let e,n=i.tokens=bm(r,Bg),o=n.length;if(!o)throw new Error("empty label");{let r=n[0],a=o>1||r.is_emoji;if(!a&&r.every((e=>e<128)))s=r,hm(s),function(e){if(e.length>=4&&e[2]==Hg&&e[3]==Hg)throw new Error("invalid label extension")}(s),e="ASCII";else if(a&&(i.emoji=!0,r=n.flatMap((e=>e.is_emoji?[]:e))),s=n.flatMap((e=>!t&&e.is_emoji?wm(e):e)),hm(s),r.length){if(Kg.has(s[0]))throw ym("leading combining mark");for(let e=1;e<o;e++){let t=n[e];if(!t.is_emoji&&Kg.has(t[0]))throw ym(`emoji + combining mark: "${yg(n[e-1])} + ${cm([t[0]])}"`)}!function(e){let t=e[0],n=fg.get(t);if(n)throw ym(`leading ${n}`);let s=e.length,r=-1;for(let i=1;i<s;i++){t=e[i];let s=fg.get(t);if(s){if(r==i)throw ym(`${n} + ${s}`);r=i+1,n=s}}if(r==s)throw ym(`trailing ${n}`)}(s);let t=[...new Set(r)],[i]=function(e){let t=Zg;for(let n of e){let e=t.filter((e=>e.V.has(n)));if(!e.length)throw t===Zg?gm(n):mm(t[0],n);if(t=e,1==e.length)break}return t}(t);!function(e,t){let{V:n,M:s}=e;for(let s of t)if(!n.has(s))throw mm(e,s);if(s){let e=Mg(t);for(let t=1,n=e.length;t<n;t++)if(Vg.has(e[t])){let s=t+1;for(let r;s<n&&Vg.has(r=e[s]);s++)for(let n=t;n<s;n++)if(e[n]==r)throw new Error(`non-spacing marks: repeated ${lm(r)}`);if(s-t>pg)throw new Error(`non-spacing marks: too many ${um(cm(e.slice(t-1,s)))} (${s-t}/${pg})`);t=s}}}(i,r),function(e,t){let n,s=[];for(let e of t){let t=tm.get(e);if(t===Gg)return;if(t){let s=t.M.get(e);if(n=n?n.filter((e=>s.has(e))):[...s],!n.length)return}else s.push(e)}if(n)for(let t of n)if(s.every((e=>t.V.has(e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(i,t),e=i.N}else e="Emoji"}i.type=e}catch(e){i.error=e}return i.output=s,i}))}function pm(e){return e.map((({input:t,error:n,output:s})=>{if(n){let s=n.message;throw new Error(1==e.length?s:`Invalid label ${um(cm(t))}: ${s}`)}return yg(s)})).join($g)}function gm(e){return new Error(`disallowed character: ${lm(e)}`)}function mm(e,t){let n=lm(t),s=Zg.find((e=>e.P.has(t)));return s&&(n=`${s.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function ym(e){return new Error(`illegal placement: ${e}`)}function bm(e,t){let n=[],s=[];for(e=e.slice().reverse();e.length;){let r=vm(e);if(r)s.length&&(n.push(t(s)),s=[]),n.push(r);else{let t=e.pop();if(rm.has(t))s.push(t);else{let e=Wg.get(t);if(e)s.push(...e);else if(!qg.has(t))throw gm(t)}}}return s.length&&n.push(t(s)),n}function wm(e){return e.filter((e=>e!=Fg))}function vm(e,t){let n,s,r=om,i=[],o=e.length;for(t&&(t.length=0);o;){let a=e[--o];if(r=r.B.find((e=>e.Q.has(a))),!r)break;if(r.S)s=a;else if(r.C&&a===s)break;i.push(a),r.F&&(i.push(Fg),o>0&&e[o-1]==Fg&&o--),r.V&&(n=Am(i,r),t&&t.push(...e.slice(o).reverse()),e.length=o)}return n}function Am(e,t){let n=am.from(e);return 2==t.V&&n.splice(1,1),n}const _m=new Uint8Array(32);function km(e){return Ou(0!==e.length,"invalid ENS name; empty component","comp",e),e}function Em(e){const t=Pd(function(e){try{return function(e){return pm(fm(e))}(e)}catch(t){Ou(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),n=[];if(0===e.length)return n;let s=0;for(let e=0;e<t.length;e++){46===t[e]&&(n.push(km(t.slice(s,e))),s=e+1)}return Ou(s<t.length,"invalid ENS name; empty component","name",e),n.push(km(t.slice(s))),n}function xm(e){Ou("string"==typeof e,"invalid ENS name; not a string","name",e);let t=_m;const n=Em(e);for(;n.length;)t=Qh($u([t,Qh(n.pop())]));return Fu(t)}_m.fill(0);const Cm="0x0000000000000000000000000000000000000000000000000000000000000000",Sm=BigInt(0),Pm=BigInt(1),Tm=BigInt(2),Im=BigInt(27),Om=BigInt(28),Nm=BigInt(35),jm={};function Lm(e){return Wu(rh(e),32)}class Um{#V;#J;#Q;#Y;get r(){return this.#V}set r(e){Ou(32===Gu(e),"invalid r","value",e),this.#V=Fu(e)}get s(){return this.#J}set s(e){Ou(32===Gu(e),"invalid s","value",e);const t=Fu(e);Ou(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),this.#J=t}get v(){return this.#Q}set v(e){const t=nh(e,"value");Ou(27===t||28===t,"invalid v","v",e),this.#Q=t}get networkV(){return this.#Y}get legacyChainId(){const e=this.networkV;return null==e?null:Um.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=Ru(this.s);return this.yParity&&(e[0]|=128),Fu(e)}get compactSerialized(){return $u([this.r,this.yParityAndS])}get serialized(){return $u([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,s){Lu(e,jm,"Signature"),this.#V=t,this.#J=n,this.#Q=s,this.#Y=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Um(jm,this.r,this.s,this.v);return this.networkV&&(e.#Y=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=Xu(e,"v");return t==Im||t==Om?Sm:(Ou(t>=Nm,"invalid EIP-155 v","v",e),(t-Nm)/Tm)}static getChainIdV(e,t){return Xu(e)*Tm+BigInt(35+t-27)}static getNormalizedV(e){const t=Xu(e);return t===Sm||t===Im?27:t===Pm||t===Om?28:(Ou(t>=Nm,"invalid v","v",e),t&Pm?27:28)}static from(e){function t(t,n){Ou(t,n,"signature",e)}if(null==e)return new Um(jm,Cm,Cm,27);if("string"==typeof e){const n=Ru(e,"signature");if(64===n.length){const e=Fu(n.slice(0,32)),t=n.slice(32,64),s=128&t[0]?28:27;return t[0]&=127,new Um(jm,e,Fu(t),s)}if(65===n.length){const e=Fu(n.slice(0,32)),s=n.slice(32,64);t(0==(128&s[0]),"non-canonical s");const r=Um.getNormalizedV(n[64]);return new Um(jm,e,Fu(s),r)}t(!1,"invalid raw signature length")}if(e instanceof Um)return e.clone();const n=e.r;t(null!=n,"missing r");const s=Lm(n),r=function(e,n){if(null!=e)return Lm(e);if(null!=n){t(Mu(n,32),"invalid yParityAndS");const e=Ru(n);return e[0]&=127,Fu(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t(0==(128&Ru(r)[0]),"non-canonical s");const{networkV:i,v:o}=function(e,n,s){if(null!=e){const t=Xu(e);return{networkV:t>=Nm?t:void 0,v:Um.getNormalizedV(t)}}if(null!=n)return t(Mu(n,32),"invalid yParityAndS"),{v:128&Ru(n)[0]?28:27};if(null!=s){switch(nh(s,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),a=new Um(jm,s,r,o);return i&&(a.#Y=i),t(null==e.yParity||nh(e.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}}var Rm=n(5856),Dm=n.t(Rm,2);const Mm=BigInt(0),Bm=BigInt(1),Fm=BigInt(2),$m=BigInt(3),Gm=BigInt(8),Hm=Object.freeze({a:Mm,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Bm,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),zm=(e,t)=>(e+t/Fm)/t,Wm={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=Hm,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-Bm*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=zm(i*e,t),c=zm(-s*e,t);let l=wy(e-a*n-c*r,t),u=wy(-a*s-c*i,t);const h=l>o,d=u>o;if(h&&(l=t-l),d&&(u=t-u),l>o||u>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:u}}},qm=32,Km=32,Vm=qm+1,Jm=2*qm+1;function Qm(e){const{a:t,b:n}=Hm,s=wy(e*e),r=wy(s*e);return wy(r+t*e+n)}const Ym=Hm.a===Mm;class Xm extends Error{constructor(e){super(e)}}function Zm(e){if(!(e instanceof ey))throw new TypeError("JacobianPoint expected")}class ey{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static fromAffine(e){if(!(e instanceof sy))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(sy.ZERO)?ey.ZERO:new ey(e.x,e.y,Bm)}static toAffineBatch(e){const t=function(e,t=Hm.P){const n=new Array(e.length),s=e.reduce(((e,s,r)=>s===Mm?e:(n[r]=e,wy(e*s,t))),Bm),r=Ay(s,t);return e.reduceRight(((e,s,r)=>s===Mm?e:(n[r]=wy(e*n[r],t),wy(e*s,t))),r),n}(e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}static normalizeZ(e){return ey.toAffineBatch(e).map(ey.fromAffine)}equals(e){Zm(e);const{x:t,y:n,z:s}=this,{x:r,y:i,z:o}=e,a=wy(s*s),c=wy(o*o),l=wy(t*c),u=wy(r*a),h=wy(wy(n*o)*c),d=wy(wy(i*s)*a);return l===u&&h===d}negate(){return new ey(this.x,wy(-this.y),this.z)}double(){const{x:e,y:t,z:n}=this,s=wy(e*e),r=wy(t*t),i=wy(r*r),o=e+r,a=wy(Fm*(wy(o*o)-s-i)),c=wy($m*s),l=wy(c*c),u=wy(l-Fm*a),h=wy(c*(a-u)-Gm*i),d=wy(Fm*t*n);return new ey(u,h,d)}add(e){Zm(e);const{x:t,y:n,z:s}=this,{x:r,y:i,z:o}=e;if(r===Mm||i===Mm)return this;if(t===Mm||n===Mm)return e;const a=wy(s*s),c=wy(o*o),l=wy(t*c),u=wy(r*a),h=wy(wy(n*o)*c),d=wy(wy(i*s)*a),f=wy(u-l),p=wy(d-h);if(f===Mm)return p===Mm?this.double():ey.ZERO;const g=wy(f*f),m=wy(f*g),y=wy(l*g),b=wy(p*p-m-Fm*y),w=wy(p*(y-b)-h*m),v=wy(s*o*f);return new ey(b,w,v)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=ey.ZERO;if("bigint"==typeof e&&e===Mm)return t;let n=by(e);if(n===Bm)return this;if(!Ym){let e=t,s=this;for(;n>Mm;)n&Bm&&(e=e.add(s)),s=s.double(),n>>=Bm;return e}let{k1neg:s,k1:r,k2neg:i,k2:o}=Wm.splitScalar(n),a=t,c=t,l=this;for(;r>Mm||o>Mm;)r&Bm&&(a=a.add(l)),o&Bm&&(c=c.add(l)),l=l.double(),r>>=Bm,o>>=Bm;return s&&(a=a.negate()),i&&(c=c.negate()),c=new ey(wy(c.x*Wm.beta),c.y,c.z),a.add(c)}precomputeWindow(e){const t=Ym?128/e+1:256/e+1,n=[];let s=this,r=s;for(let i=0;i<t;i++){r=s,n.push(r);for(let t=1;t<2**(e-1);t++)r=r.add(s),n.push(r);s=r.double()}return n}wNAF(e,t){!t&&this.equals(ey.BASE)&&(t=sy.BASE);const n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=t&&ny.get(t);s||(s=this.precomputeWindow(n),t&&1!==n&&(s=ey.normalizeZ(s),ny.set(t,s)));let r=ey.ZERO,i=ey.BASE;const o=1+(Ym?128/n:256/n),a=2**(n-1),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let t=0;t<o;t++){const n=t*a;let o=Number(e&c);e>>=u,o>a&&(o-=l,e+=Bm);const h=n,d=n+Math.abs(o)-1,f=t%2!=0,p=o<0;0===o?i=i.add(ty(f,s[h])):r=r.add(ty(p,s[d]))}return{p:r,f:i}}multiply(e,t){let n,s,r=by(e);if(Ym){const{k1neg:e,k1:i,k2neg:o,k2:a}=Wm.splitScalar(r);let{p:c,f:l}=this.wNAF(i,t),{p:u,f:h}=this.wNAF(a,t);c=ty(e,c),u=ty(o,u),u=new ey(wy(u.x*Wm.beta),u.y,u.z),n=c.add(u),s=l.add(h)}else{const{p:e,f:i}=this.wNAF(r,t);n=e,s=i}return ey.normalizeZ([n,s])[0]}toAffine(e){const{x:t,y:n,z:s}=this,r=this.equals(ey.ZERO);null==e&&(e=r?Gm:Ay(s));const i=e,o=wy(i*i),a=wy(o*i),c=wy(t*o),l=wy(n*a),u=wy(s*i);if(r)return sy.ZERO;if(u!==Bm)throw new Error("invZ was invalid");return new sy(c,l)}}function ty(e,t){const n=t.negate();return e?n:t}ey.BASE=new ey(Hm.Gx,Hm.Gy,Bm),ey.ZERO=new ey(Mm,Bm,Mm);const ny=new WeakMap;class sy{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,ny.delete(this)}hasEvenY(){return this.y%Fm===Mm}static fromCompressedHex(e){const t=32===e.length,n=my(t?e:e.subarray(1));if(!Sy(n))throw new Error("Point is not on curve");let s=function(e){const{P:t}=Hm,n=BigInt(6),s=BigInt(11),r=BigInt(22),i=BigInt(23),o=BigInt(44),a=BigInt(88),c=e*e*e%t,l=c*c*e%t,u=vy(l,$m)*l%t,h=vy(u,$m)*l%t,d=vy(h,Fm)*c%t,f=vy(d,s)*d%t,p=vy(f,r)*f%t,g=vy(p,o)*p%t,m=vy(g,a)*g%t,y=vy(m,o)*p%t,b=vy(y,$m)*l%t,w=vy(b,i)*f%t,v=vy(w,n)*c%t,A=vy(v,Fm),_=A*A%t;if(_!==e)throw new Error("Cannot find square root");return A}(Qm(n));const r=(s&Bm)===Bm;if(t)r&&(s=wy(-s));else{1==(1&e[0])!==r&&(s=wy(-s))}const i=new sy(n,s);return i.assertValidity(),i}static fromUncompressedHex(e){const t=my(e.subarray(1,qm+1)),n=my(e.subarray(qm+1,2*qm+1)),s=new sy(t,n);return s.assertValidity(),s}static fromHex(e){const t=yy(e),n=t.length,s=t[0];if(n===qm)return this.fromCompressedHex(t);if(n===Vm&&(2===s||3===s))return this.fromCompressedHex(t);if(n===Jm&&4===s)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Vm} compressed bytes or ${Jm} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return sy.BASE.multiply(Ty(e))}static fromSignature(e,t,n){const{r:s,s:r}=Oy(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const i=_y(yy(e)),{n:o}=Hm,a=2===n||3===n?s+o:s,c=Ay(a,o),l=wy(-i*c,o),u=wy(r*c,o),h=1&n?"03":"02",d=sy.fromHex(h+hy(a)),f=sy.BASE.multiplyAndAddUnsafe(d,l,u);if(!f)throw new Error("Cannot recover signature: point at infinify");return f.assertValidity(),f}toRawBytes(e=!1){return gy(this.toHex(e))}toHex(e=!1){const t=hy(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${hy(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:n}=this;if(!Sy(t)||!Sy(n))throw new Error(e);const s=wy(n*n);if(wy(s-Qm(t))!==Mm)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new sy(this.x,wy(-this.y))}double(){return ey.fromAffine(this).double().toAffine()}add(e){return ey.fromAffine(this).add(ey.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ey.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){const s=ey.fromAffine(this),r=t===Mm||t===Bm||this!==sy.BASE?s.multiplyUnsafe(t):s.multiply(t),i=ey.fromAffine(e).multiplyUnsafe(n),o=r.add(i);return o.equals(ey.ZERO)?void 0:o.toAffine()}}function ry(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function iy(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${ly(e)}`);const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:my(n),left:e.subarray(t+2)}}sy.BASE=new sy(Hm.Gx,Hm.Gy),sy.ZERO=new sy(Mm,Mm);class oy{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,n="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);const s=t?ly(e):e;if(128!==s.length)throw new Error(`${n}: Expected 64-byte hex`);return new oy(py(s.slice(0,64)),py(s.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${ly(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:n}=iy(e.subarray(2)),{data:s,left:r}=iy(n);if(r.length)throw new Error(`Invalid signature: left bytes after parsing: ${ly(r)}`);return{r:t,s}}(t?e:gy(e));return new oy(n,s)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!Cy(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Cy(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=Hm.n>>Bm;return this.s>e}normalizeS(){return this.hasHighS()?new oy(this.r,wy(-this.s,Hm.n)):this}toDERRawBytes(){return gy(this.toDERHex())}toDERHex(){const e=ry(fy(this.s)),t=ry(fy(this.r)),n=e.length/2,s=t.length/2,r=fy(n),i=fy(s);return`30${fy(s+n+4)}02${i}${t}02${r}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return gy(this.toCompactHex())}toCompactHex(){return hy(this.r)+hy(this.s)}}function ay(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const r=e[t];n.set(r,s),s+=r.length}return n}const cy=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ly(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let n=0;n<e.length;n++)t+=cy[e[n]];return t}const uy=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function hy(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(Mm<=e&&e<uy))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function dy(e){const t=gy(hy(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function fy(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function py(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function gy(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const s=2*n,r=e.slice(s,s+2),i=Number.parseInt(r,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}function my(e){return py(ly(e))}function yy(e){return e instanceof Uint8Array?Uint8Array.from(e):gy(e)}function by(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&Cy(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function wy(e,t=Hm.P){const n=e%t;return n>=Mm?n:t+n}function vy(e,t){const{P:n}=Hm;let s=e;for(;t-- >Mm;)s*=s,s%=n;return s}function Ay(e,t=Hm.P){if(e===Mm||t<=Mm)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=wy(e,t),s=t,r=Mm,i=Bm,o=Bm,a=Mm;for(;n!==Mm;){const e=s/n,t=s%n,c=r-o*e,l=i-a*e;s=n,n=t,r=o,i=a,o=c,a=l}if(s!==Bm)throw new Error("invert: does not exist");return wy(r,t)}function _y(e,t=!1){const n=function(e){const t=8*e.length-8*Km,n=my(e);return t>0?n>>BigInt(t):n}(e);if(t)return n;const{n:s}=Hm;return n>=s?n-s:n}let ky,Ey;class xy{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return Fy.hmacSha256(this.k,...e)}hmacSync(...e){return Ey(this.k,...e)}checkSync(){if("function"!=typeof Ey)throw new Xm("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return ay(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return ay(...t)}}function Cy(e){return Mm<e&&e<Hm.n}function Sy(e){return Mm<e&&e<Hm.P}function Py(e,t,n,s=!0){const{n:r}=Hm,i=_y(e,!0);if(!Cy(i))return;const o=Ay(i,r),a=sy.BASE.multiply(i),c=wy(a.x,r);if(c===Mm)return;const l=wy(o*wy(t+n*c,r),r);if(l===Mm)return;let u=new oy(c,l),h=(a.x===u.r?0:2)|Number(a.y&Bm);return s&&u.hasHighS()&&(u=u.normalizeS(),h^=1),{sig:u,recovery:h}}function Ty(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*Km)throw new Error("Expected 32 bytes of private key");t=py(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==Km)throw new Error("Expected 32 bytes of private key");t=my(e)}if(!Cy(t))throw new Error("Expected private key: 0 < key < n");return t}function Iy(e){return e instanceof sy?(e.assertValidity(),e):sy.fromHex(e)}function Oy(e){if(e instanceof oy)return e.assertValidity(),e;try{return oy.fromDER(e)}catch(t){return oy.fromCompact(e)}}function Ny(e){const t=e instanceof Uint8Array,n="string"==typeof e,s=(t||n)&&e.length;return t?s===Vm||s===Jm:n?s===2*Vm||s===2*Jm:e instanceof sy}function jy(e){return my(e.length>qm?e.slice(0,qm):e)}function Ly(e){const t=jy(e),n=wy(t,Hm.n);return Uy(n<Mm?t:n)}function Uy(e){return dy(e)}function Ry(e,t,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const s=yy(e),r=Ty(t),i=[Uy(r),Ly(s)];if(null!=n){!0===n&&(n=Fy.randomBytes(qm));const e=yy(n);if(e.length!==qm)throw new Error(`sign: Expected ${qm} bytes of extra data`);i.push(e)}return{seed:ay(...i),m:jy(s),d:r}}function Dy(e,t){const{sig:n,recovery:s}=e,{der:r,recovered:i}=Object.assign({canonical:!0,der:!0},t),o=r?n.toDERRawBytes():n.toCompactRawBytes();return i?[o,s]:o}sy.BASE._setWindowSize(8);const My={node:Dm,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},By={},Fy={bytesToHex:ly,hexToBytes:gy,concatBytes:ay,mod:wy,invert:Ay,isValidPrivateKey(e){try{return Ty(e),!0}catch(e){return!1}},_bigintTo32Bytes:dy,_normalizePrivateKey:Ty,hashToPrivateKey:e=>{e=yy(e);const t=Km+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return dy(wy(my(e),Hm.n-Bm)+Bm)},randomBytes:(e=32)=>{if(My.web)return My.web.getRandomValues(new Uint8Array(e));if(My.node){const{randomBytes:t}=My.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Fy.hashToPrivateKey(Fy.randomBytes(Km+8)),precompute(e=8,t=sy.BASE){const n=t===sy.BASE?t:new sy(t.x,t.y);return n._setWindowSize(e),n.multiply($m),n},sha256:async(...e)=>{if(My.web){const t=await My.web.subtle.digest("SHA-256",ay(...e));return new Uint8Array(t)}if(My.node){const{createHash:t}=My.node,n=t("sha256");return e.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(My.web){const n=await My.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),s=ay(...t),r=await My.web.subtle.sign("HMAC",n,s);return new Uint8Array(r)}if(My.node){const{createHmac:n}=My.node,s=n("sha256",e);return t.forEach((e=>s.update(e))),Uint8Array.from(s.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let n=By[e];if(void 0===n){const t=await Fy.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=ay(t,t),By[e]=n}return Fy.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof ky)throw new Xm("sha256Sync is undefined, you need to set it");let n=By[e];if(void 0===n){const t=ky(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=ay(t,t),By[e]=n}return ky(n,...t)},_JacobianPoint:ey};Object.defineProperties(Fy,{sha256Sync:{configurable:!1,get:()=>ky,set(e){ky||(ky=e)}},hmacSha256Sync:{configurable:!1,get:()=>Ey,set(e){Ey||(Ey=e)}}});class $y extends Ph{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,wh.hash(e);const n=Sh(t);if(this.iHash=e.create(),!(this.iHash instanceof Ph))throw new TypeError("Expected instance of class which extends utils.Hash");const s=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const r=new Uint8Array(s);r.set(n.length>this.iHash.blockLen?e.create().update(n).digest():n);for(let e=0;e<r.length;e++)r[e]^=54;this.iHash.update(r),this.oHash=e.create();for(let e=0;e<r.length;e++)r[e]^=106;this.oHash.update(r),r.fill(0)}update(e){return wh.exists(this),this.iHash.update(e),this}digestInto(e){wh.exists(this),wh.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:r,blockLen:i,outputLen:o}=this;return e.finished=s,e.destroyed=r,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Gy=(e,t,n)=>new $y(e,t).update(n).digest();Gy.create=(e,t)=>new $y(e,t);class Hy extends Ph{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=xh(this.buffer)}update(e){wh.exists(this);const{view:t,buffer:n,blockLen:s}=this,r=(e=Sh(e)).length;for(let i=0;i<r;){const o=Math.min(s-this.pos,r-i);if(o!==s)n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=xh(e);for(;s<=r-i;i+=s)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){wh.exists(this),wh.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:r}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(n,0),i=0);for(let e=i;e<s;e++)t[e]=0;!function(e,t,n,s){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,s);const r=BigInt(32),i=BigInt(4294967295),o=Number(n>>r&i),a=Number(n&i),c=s?4:0,l=s?0:4;e.setUint32(t+c,o,s),e.setUint32(t+l,a,s)}(n,s-8,BigInt(8*this.length),r),this.process(n,0);const o=xh(e);this.get().forEach(((e,t)=>o.setUint32(4*t,e,r)))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:r,destroyed:i,pos:o}=this;return e.length=s,e.pos=o,e.finished=r,e.destroyed=i,s%t&&e.buffer.set(n),e}}const zy=(e,t,n)=>e&t^~e&n,Wy=(e,t,n)=>e&t^e&n^t&n,qy=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ky=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vy=new Uint32Array(64);class Jy extends Hy{constructor(){super(64,32,8,!1),this.A=0|Ky[0],this.B=0|Ky[1],this.C=0|Ky[2],this.D=0|Ky[3],this.E=0|Ky[4],this.F=0|Ky[5],this.G=0|Ky[6],this.H=0|Ky[7]}get(){const{A:e,B:t,C:n,D:s,E:r,F:i,G:o,H:a}=this;return[e,t,n,s,r,i,o,a]}set(e,t,n,s,r,i,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|s,this.E=0|r,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)Vy[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Vy[e-15],n=Vy[e-2],s=Ch(t,7)^Ch(t,18)^t>>>3,r=Ch(n,17)^Ch(n,19)^n>>>10;Vy[e]=r+Vy[e-7]+s+Vy[e-16]|0}let{A:n,B:s,C:r,D:i,E:o,F:a,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(Ch(o,6)^Ch(o,11)^Ch(o,25))+zy(o,a,c)+qy[e]+Vy[e]|0,u=(Ch(n,2)^Ch(n,13)^Ch(n,22))+Wy(n,s,r)|0;l=c,c=a,a=o,o=i+t|0,i=r,r=s,s=n,n=t+u|0}n=n+this.A|0,s=s+this.B|0,r=r+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,r,i,o,a,c,l)}roundClean(){Vy.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Qy=Th((()=>new Jy)),[Yy,Xy]=Eh.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),Zy=new Uint32Array(80),eb=new Uint32Array(80);class tb extends Hy{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:r,Cl:i,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,n,s,r,i,o,a,c,l,u,h,d,f,p,g]}set(e,t,n,s,r,i,o,a,c,l,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|s,this.Ch=0|r,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let n=0;n<16;n++,t+=4)Zy[n]=e.getUint32(t),eb[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Zy[e-15],n=0|eb[e-15],s=Eh.rotrSH(t,n,1)^Eh.rotrSH(t,n,8)^Eh.shrSH(t,n,7),r=Eh.rotrSL(t,n,1)^Eh.rotrSL(t,n,8)^Eh.shrSL(t,n,7),i=0|Zy[e-2],o=0|eb[e-2],a=Eh.rotrSH(i,o,19)^Eh.rotrBH(i,o,61)^Eh.shrSH(i,o,6),c=Eh.rotrSL(i,o,19)^Eh.rotrBL(i,o,61)^Eh.shrSL(i,o,6),l=Eh.add4L(r,c,eb[e-7],eb[e-16]),u=Eh.add4H(l,s,a,Zy[e-7],Zy[e-16]);Zy[e]=0|u,eb[e]=0|l}let{Ah:n,Al:s,Bh:r,Bl:i,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=Eh.rotrSH(u,h,14)^Eh.rotrSH(u,h,18)^Eh.rotrBH(u,h,41),b=Eh.rotrSL(u,h,14)^Eh.rotrSL(u,h,18)^Eh.rotrBL(u,h,41),w=u&d^~u&p,v=h&f^~h&g,A=Eh.add5L(y,b,v,Xy[e],eb[e]),_=Eh.add5H(A,m,t,w,Yy[e],Zy[e]),k=0|A,E=Eh.rotrSH(n,s,28)^Eh.rotrBH(n,s,34)^Eh.rotrBH(n,s,39),x=Eh.rotrSL(n,s,28)^Eh.rotrBL(n,s,34)^Eh.rotrBL(n,s,39),C=n&r^n&o^r&o,S=s&i^s&a^i&a;m=0|p,y=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=Eh.add(0|c,0|l,0|_,0|k)),c=0|o,l=0|a,o=0|r,a=0|i,r=0|n,i=0|s;const P=Eh.add3L(k,x,S);n=Eh.add3H(P,_,E,C),s=0|P}({h:n,l:s}=Eh.add(0|this.Ah,0|this.Al,0|n,0|s)),({h:r,l:i}=Eh.add(0|this.Bh,0|this.Bl,0|r,0|i)),({h:o,l:a}=Eh.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l}=Eh.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=Eh.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=Eh.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=Eh.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=Eh.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(n,s,r,i,o,a,c,l,u,h,d,f,p,g,m,y)}roundClean(){Zy.fill(0),eb.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class nb extends tb{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class sb extends tb{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const rb=Th((()=>new tb));Th((()=>new nb)),Th((()=>new sb));const ib=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();ib.crypto||ib.msCrypto;let ob=!1;const ab=function(e,t,n){return function(e,t){const n={sha256:Qy,sha512:rb}[e];return Ou(null!=n,"invalid hmac algorithm","algorithm",e),Gy.create(n,t)}(e,t).update(n).digest()};let cb=ab;function lb(e,t,n){const s=Ru(t,"key"),r=Ru(n,"data");return Fu(cb(e,s,r))}lb._=ab,lb.lock=function(){ob=!0},lb.register=function(e){if(ob)throw new Error("computeHmac is locked");cb=e},Object.freeze(lb),Fy.hmacSha256Sync=function(e,...t){return Ru(lb("sha256",e,$u(t)))};class ub{#X;constructor(e){Ou(32===Gu(e),"invalid private key","privateKey","[REDACTED]"),this.#X=Fu(e)}get privateKey(){return this.#X}get publicKey(){return ub.computePublicKey(this.#X)}get compressedPublicKey(){return ub.computePublicKey(this.#X,!0)}sign(e){Ou(32===Gu(e),"invalid digest length","digest",e);const[t,n]=function(e,t,n={}){const{seed:s,m:r,d:i}=Ry(e,t,n.extraEntropy),o=new xy(32,Km);let a;for(o.reseedSync(s);!(a=Py(o.generateSync(),r,i,n.canonical));)o.reseedSync();return Dy(a,n)}(Du(e),Du(this.#X),{recovered:!0,canonical:!0}),s=oy.fromHex(t);return Um.from({r:sh("0x"+s.r.toString(16),32),s:sh("0x"+s.s.toString(16),32),v:n?28:27})}computeSharedSecret(e){const t=ub.computePublicKey(e);return Fu(function(e,t,n=!1){if(Ny(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!Ny(t))throw new TypeError("getSharedSecret: second arg must be public key");const s=Iy(t);return s.assertValidity(),s.multiply(Ty(e)).toRawBytes(n)}(Du(this.#X),Ru(t)))}static computePublicKey(e,t){let n=Ru(e,"key");if(32===n.length){return Fu(function(e,t=!1){return sy.fromPrivateKey(e).toRawBytes(t)}(n,!!t))}if(64===n.length){const e=new Uint8Array(65);e[0]=4,e.set(n,1),n=e}return Fu(sy.fromHex(n).toRawBytes(t))}static recoverPublicKey(e,t){Ou(32===Gu(e),"invalid digest length","digest",e);const n=Um.from(t),s=oy.fromCompact(Du($u([n.r,n.s]))).toDERRawBytes(),r=function(e,t,n,s=!1){return sy.fromSignature(e,t,n).toRawBytes(s)}(Du(e),s,n.yParity);return Ou(null!=r,"invalid signature for digest","signature",t),Fu(r)}static addPoints(e,t,n){const s=sy.fromHex(ub.computePublicKey(e).substring(2)),r=sy.fromHex(ub.computePublicKey(t).substring(2));return"0x"+s.add(r).toHex(!!n)}}function hb(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function db(e,t,n){let s=0;for(let r=0;r<n;r++)s=256*s+e[t+r];return s}function fb(e,t,n,s){const r=[];for(;n<t+1+s;){const i=pb(e,n);r.push(i.result),Iu((n+=i.consumed)<=t+1+s,"child data too short","BUFFER_OVERRUN",{buffer:e,length:s,offset:t})}return{consumed:1+s,result:r}}function pb(e,t){Iu(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=t=>{Iu(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const s=e[t]-247;n(t+1+s);const r=db(e,t+1,s);return n(t+1+s+r),fb(e,t,t+1+s,s+r)}if(e[t]>=192){const s=e[t]-192;return n(t+1+s),fb(e,t,t+1,s)}if(e[t]>=184){const s=e[t]-183;n(t+1+s);const r=db(e,t+1,s);n(t+1+s+r);return{consumed:1+s+r,result:Fu(e.slice(t+1+s,t+1+s+r))}}if(e[t]>=128){const s=e[t]-128;n(t+1+s);return{consumed:1+s,result:Fu(e.slice(t+1,t+1+s))}}return{consumed:1,result:hb(e[t])}}function gb(e){const t=Ru(e,"data"),n=pb(t,0);return Ou(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function mb(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function yb(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(yb(e))})),t.length<=55)return t.unshift(192+t.length),t;const n=mb(t.length);return n.unshift(247+n.length),n.concat(t)}const t=Array.prototype.slice.call(Ru(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=mb(t.length);return n.unshift(183+n.length),n.concat(t)}const bb="0123456789abcdef";function wb(e){let t="0x";for(const n of yb(e))t+=bb[n>>4],t+=bb[15&n];return t}function vb(e,t){return function(e){let t;return t="string"==typeof e?ub.computePublicKey(e,!1):e.publicKey,rd(Qh("0x"+t.substring(4)).substring(26))}(ub.recoverPublicKey(e,t))}const Ab=BigInt(0),_b=BigInt(2),kb=BigInt(27),Eb=BigInt(28),xb=BigInt(35),Cb=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Sb(e){return"0x"===e?null:rd(e)}function Pb(e,t){try{return Vf(e)}catch(n){Ou(!1,n.message,t,e)}}function Tb(e,t){return"0x"===e?0:nh(e,t)}function Ib(e,t){if("0x"===e)return Ab;const n=Xu(e,t);return Ou(n<=Cb,"value exceeds uint size",t,n),n}function Ob(e,t){const n=Xu(e,"value"),s=rh(n);return Ou(s.length<=32,"value too large",`tx.${t}`,n),s}function Nb(e){return Vf(e).map((e=>[e.address,e.storageKeys]))}function jb(e,t){const n=[Ob(e.nonce||0,"nonce"),Ob(e.gasPrice||0,"gasPrice"),Ob(e.gasLimit||0,"gasLimit"),null!=e.to?rd(e.to):"0x",Ob(e.value||0,"value"),e.data||"0x"];let s=Ab;if(e.chainId!=Ab)s=Xu(e.chainId,"tx.chainId"),Ou(!t||null==t.networkV||t.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(s=t)}if(!t)return s!==Ab&&(n.push(rh(s)),n.push("0x"),n.push("0x")),wb(n);let r=BigInt(27+t.yParity);return s!==Ab?r=Um.getChainIdV(s,t.v):BigInt(t.v)!==r&&Ou(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(rh(r)),n.push(rh(t.r)),n.push(rh(t.s)),wb(n)}function Lb(e,t){let n;try{if(n=Tb(t[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(e){Ou(!1,"invalid yParity","yParity",t[0])}const s=Wu(t[1],32),r=Wu(t[2],32),i=Um.from({r:s,s:r,yParity:n});e.signature=i}function Ub(e,t){const n=[Ob(e.chainId||0,"chainId"),Ob(e.nonce||0,"nonce"),Ob(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ob(e.maxFeePerGas||0,"maxFeePerGas"),Ob(e.gasLimit||0,"gasLimit"),null!=e.to?rd(e.to):"0x",Ob(e.value||0,"value"),e.data||"0x",Nb(e.accessList||[])];return t&&(n.push(Ob(t.yParity,"yParity")),n.push(rh(t.r)),n.push(rh(t.s))),$u(["0x02",wb(n)])}function Rb(e,t){const n=[Ob(e.chainId||0,"chainId"),Ob(e.nonce||0,"nonce"),Ob(e.gasPrice||0,"gasPrice"),Ob(e.gasLimit||0,"gasLimit"),null!=e.to?rd(e.to):"0x",Ob(e.value||0,"value"),e.data||"0x",Nb(e.accessList||[])];return t&&(n.push(Ob(t.yParity,"recoveryParam")),n.push(rh(t.r)),n.push(rh(t.s))),$u(["0x01",wb(n)])}class Db{#Z;#ee;#t;#te;#ne;#se;#re;#ie;#oe;#ae;#ce;#le;get type(){return this.#Z}set type(e){switch(e){case null:this.#Z=null;break;case 0:case"legacy":this.#Z=0;break;case 1:case"berlin":case"eip-2930":this.#Z=1;break;case 2:case"london":case"eip-1559":this.#Z=2;break;default:Ou(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#ee}set to(e){this.#ee=null==e?null:rd(e)}get nonce(){return this.#te}set nonce(e){this.#te=nh(e,"value")}get gasLimit(){return this.#ne}set gasLimit(e){this.#ne=Xu(e)}get gasPrice(){const e=this.#se;return null!=e||0!==this.type&&1!==this.type?e:Ab}set gasPrice(e){this.#se=null==e?null:Xu(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#re;return null==e?2===this.type?Ab:null:e}set maxPriorityFeePerGas(e){this.#re=null==e?null:Xu(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#ie;return null==e?2===this.type?Ab:null:e}set maxFeePerGas(e){this.#ie=null==e?null:Xu(e,"maxFeePerGas")}get data(){return this.#t}set data(e){this.#t=Fu(e)}get value(){return this.#oe}set value(e){this.#oe=Xu(e,"value")}get chainId(){return this.#ae}set chainId(e){this.#ae=Xu(e)}get signature(){return this.#ce||null}set signature(e){this.#ce=null==e?null:Um.from(e)}get accessList(){const e=this.#le||null;return null==e?1===this.type||2===this.type?[]:null:e}set accessList(e){this.#le=null==e?null:Vf(e)}constructor(){this.#Z=null,this.#ee=null,this.#te=0,this.#ne=BigInt(0),this.#se=null,this.#re=null,this.#ie=null,this.#t="0x",this.#oe=BigInt(0),this.#ae=BigInt(0),this.#ce=null,this.#le=null}get hash(){return null==this.signature?null:Qh(this.serialized)}get unsignedHash(){return Qh(this.unsignedSerialized)}get from(){return null==this.signature?null:vb(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:ub.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){switch(Iu(null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return jb(this,this.signature);case 1:return Rb(this,this.signature);case 2:return Ub(this,this.signature)}Iu(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return jb(this);case 1:return Rb(this);case 2:return Ub(this)}Iu(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&Iu(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Iu(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Iu(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return null!=this.type?s.push(this.type):t?s.push(2):e?(s.push(1),n||s.push(0)):n?(s.push(1),s.push(2)):(s.push(0),s.push(1),s.push(2)),s.sort(),s}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}clone(){return Db.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new Db;if("string"==typeof e){const t=Ru(e);if(t[0]>=127)return Db.from(function(e){const t=gb(e);Ou(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:Tb(t[0],"nonce"),gasPrice:Ib(t[1],"gasPrice"),gasLimit:Ib(t[2],"gasLimit"),to:Sb(t[3]),value:Ib(t[4],"value"),data:Fu(t[5]),chainId:Ab};if(6===t.length)return n;const s=Ib(t[6],"v"),r=Ib(t[7],"r"),i=Ib(t[8],"s");if(r===Ab&&i===Ab)n.chainId=s;else{let r=(s-xb)/_b;r<Ab&&(r=Ab),n.chainId=r,Ou(r!==Ab||s===kb||s===Eb,"non-canonical legacy v","v",t[6]),n.signature=Um.from({r:Wu(t[7],32),s:Wu(t[8],32),v:s}),n.hash=Qh(e)}return n}(t));switch(t[0]){case 1:return Db.from(function(e){const t=gb(Ru(e).slice(1));Ou(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",Fu(e));const n={type:1,chainId:Ib(t[0],"chainId"),nonce:Tb(t[1],"nonce"),gasPrice:Ib(t[2],"gasPrice"),gasLimit:Ib(t[3],"gasLimit"),to:Sb(t[4]),value:Ib(t[5],"value"),data:Fu(t[6]),accessList:Pb(t[7],"accessList")};return 8===t.length||(n.hash=Qh(e),Lb(n,t.slice(8))),n}(t));case 2:return Db.from(function(e){const t=gb(Ru(e).slice(1));Ou(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",Fu(e));const n=Ib(t[2],"maxPriorityFeePerGas"),s=Ib(t[3],"maxFeePerGas"),r={type:2,chainId:Ib(t[0],"chainId"),nonce:Tb(t[1],"nonce"),maxPriorityFeePerGas:n,maxFeePerGas:s,gasPrice:null,gasLimit:Ib(t[4],"gasLimit"),to:Sb(t[5]),value:Ib(t[6],"value"),data:Fu(t[7]),accessList:Pb(t[8],"accessList")};return 9===t.length||(r.hash=Qh(e),Lb(r,t.slice(9))),r}(t))}Iu(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Db;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=Um.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.hash&&(Ou(t.isSigned(),"unsigned transaction cannot define hash","tx",e),Ou(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(Ou(t.isSigned(),"unsigned transaction cannot define from","tx",e),Ou(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}const Mb="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Bb=BigInt(58);function Fb(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Ou(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class $b{name;constructor(e){xu(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const Gb=new RegExp("^(ipfs)://(.*)$","i"),Hb=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Gb,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class zb{provider;address;name;#ue;#he;constructor(e,t,n){xu(this,{provider:e,address:t,name:n}),this.#ue=null,this.#he=new tg(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#ue&&(this.#ue=(async()=>{try{return await this.#he.supportsInterface("0x9061b923")}catch(e){if(Su(e,"CALL_EXCEPTION"))return!1;throw this.#ue=null,e}})()),await this.#ue}async#de(e,t){t=(t||[]).slice();const n=this.#he.interface;t.unshift(xm(this.name));let s=null;var r;await this.supportsWildcard()&&(s=n.getFunction(e),Iu(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[(r=this.name,Fu($u(Em(r).map((e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t}))))+"00"),n.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const r=await this.#he[e](...t);return s?n.decodeFunctionResult(s,r)[0]:r}catch(e){if(!Su(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await this.#de("addr(bytes32)");return null==e||e===cp?null:e}catch(e){if(Su(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<2147483648){let t=e+2147483648;const n=await this.#de("addr(bytes32,uint)",[t]);if(Mu(n,20))return rd(n)}let t=null;for(const n of this.provider.plugins)if(n instanceof $b&&n.supportsCoinType(e)){t=n;break}if(null==t)return null;const n=await this.#de("addr(bytes32,uint)",[e]);if(null==n||"0x"===n)return null;const s=await t.decodeAddress(e,n);if(null!=s)return s;Iu(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await this.#de("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await this.#de("contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",n=parseInt(t[4],16);if(t[5].length===2*n)return`${e}://${function(e){let t=th(Ru(e)),n="";for(;t;)n=Mb[Number(t%Bb)]+n,t/=Bb;return n}("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return`bzz://${n[1]}`;Iu(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<Hb.length;n++){const s=t.match(Hb[n]);if(null==s)continue;const r=s[1].toLowerCase();switch(r){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const n=Fb(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:n}),{linkage:e,url:n}}case"erc721":case"erc1155":{const n="erc721"===r?"tokenURI(uint256)":"uri(uint256)";e.push({type:r,value:t});const i=await this.getAddress();if(null==i)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const o=(s[2]||"").split("/");if(2!==o.length)return e.push({type:`!${r}caip`,value:s[2]||""}),{url:null,linkage:e};const a=o[1],c=new tg(o[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===r){const t=await c.ownerOf(a);if(i!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===r){const t=await c.balanceOf(i,a);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let l=await c[n](a);if(null==l||"0x"===l)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:l}),"erc1155"===r&&(l=l.replace("{id}",sh(a,32).substring(2)),e.push({type:"metadata-url-expanded",value:l})),l.match(/^ipfs:/i)&&(l=Fb(l)),e.push({type:"metadata-url",value:l});let u={};const h=await new ip(l).send();h.assertOk();try{u=h.bodyJson}catch(t){try{e.push({type:"!metadata",value:h.bodyText})}catch(t){const n=h.body;return n&&e.push({type:"!metadata",value:Fu(n)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!u)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(u)});let d=u.image;if("string"!=typeof d)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(Gb))return e.push({type:"!imageUrl-ipfs",value:d}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:d}),d=Fb(d)}return e.push({type:"url",value:d}),{linkage:e,url:d}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return Iu(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async#fe(e,t){const n=await zb.getEnsAddress(e);try{const s=new tg(n,["function resolver(bytes32) view returns (address)"],e),r=await s.resolver(xm(t),{enableCcipRead:!0});return r===cp?null:r}catch(e){throw e}return null}static async fromName(e,t){let n=t;for(;;){if(""===n||"."===n)return null;if("eth"!==t&&"eth"===n)return null;const s=await zb.#fe(e,n);if(null!=s){const r=new zb(e,s,t);return n===t||await r.supportsWildcard()?r:null}n=n.split(".").slice(1).join(".")}}}const Wb=BigInt(0);function qb(e,t){return function(n){return null==n?t:e(n)}}function Kb(e){return t=>{if(!Array.isArray(t))throw new Error("not an array");return t.map((t=>e(t)))}}function Vb(e,t){return n=>{const s={};for(const r in e){let i=r;if(t&&r in t&&!(i in n))for(const e of t[r])if(e in n){i=e;break}try{const t=e[r](n[i]);void 0!==t&&(s[r]=t)}catch(e){Iu(!1,`invalid value for value.${r} (${e instanceof Error?e.message:"not-an-error"})`,"BAD_DATA",{value:n})}}return s}}function Jb(e){return Ou(Mu(e,!0),"invalid data","value",e),e}function Qb(e){return Ou(Mu(e,32),"invalid hash","value",e),e}const Yb=Vb({address:rd,blockHash:Qb,blockNumber:nh,data:Jb,index:nh,removed:qb((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}Ou(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}),!1),topics:Kb(Qb),transactionHash:Qb,transactionIndex:nh},{index:["logIndex"]});const Xb=Vb({hash:qb(Qb),parentHash:Qb,number:nh,timestamp:nh,nonce:qb(Jb),difficulty:Xu,gasLimit:Xu,gasUsed:Xu,miner:qb(rd),extraData:Jb,baseFeePerGas:qb(Xu)});const Zb=Vb({transactionIndex:nh,blockNumber:nh,transactionHash:Qb,address:rd,topics:Kb(Qb),data:Jb,index:nh,blockHash:Qb},{index:["logIndex"]});const ew=Vb({to:qb(rd,null),from:qb(rd,null),contractAddress:qb(rd,null),index:nh,root:qb(Fu),gasUsed:Xu,logsBloom:qb(Jb),blockHash:Qb,hash:Qb,logs:Kb((function(e){return Zb(e)})),blockNumber:nh,cumulativeGasUsed:Xu,effectiveGasPrice:qb(Xu),status:qb(nh),type:qb(nh,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function tw(e){e.to&&Xu(e.to)===Wb&&(e.to="0x0000000000000000000000000000000000000000");const t=Vb({hash:Qb,type:e=>"0x"===e||null==e?0:nh(e),accessList:qb(Vf,null),blockHash:qb(Qb,null),blockNumber:qb(nh,null),transactionIndex:qb(nh,null),from:rd,gasPrice:qb(Xu),maxPriorityFeePerGas:qb(Xu),maxFeePerGas:qb(Xu),gasLimit:Xu,to:qb(rd,null),value:Xu,nonce:nh,data:Jb,creates:qb(rd,null),chainId:qb(Xu,null)},{data:["input"],gasLimit:["gas"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=rd(e.from);let n=Xu(e.nonce,"tx.nonce").toString(16);return n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n,rd(Hu(Qh(wb([t,n])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=Um.from(e.signature):t.signature=Um.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&Xu(t.blockHash)===Wb&&(t.blockHash=null),t}class nw{name;constructor(e){xu(this,{name:e})}clone(){return new nw(this.name)}}class sw extends nw{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const n={effectiveBlock:e};function s(e,s){let r=(t||{})[e];null==r&&(r=s),Ou("number"==typeof r,`invalud value for ${e}`,"costs",t),n[e]=r}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),xu(this,n)}clone(){return new sw(this.effectiveBlock,this)}}class rw extends nw{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),xu(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new rw(this.address,this.targetNetwork)}}class iw extends nw{#_;#pe;get url(){return this.#_}get processFunc(){return this.#pe}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#_=e,this.#pe=t}clone(){return this}}const ow=new Map;class aw{#ge;#ae;#me;constructor(e,t){this.#ge=e,this.#ae=Xu(t),this.#me=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#ge}set name(e){this.#ge=e}get chainId(){return this.#ae}set chainId(e){this.#ae=Xu(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===Xu(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===Xu(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===Xu(e.chainId)}catch(e){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(this.#me.values())}attachPlugin(e){if(this.#me.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#me.set(e.name,e.clone()),this}getPlugin(e){return this.#me.get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const e=new aw(this.name,this.chainId);return this.plugins.forEach((t=>{e.attachPlugin(t.clone())})),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new sw;let n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)"00"===e.data.substring(s,s+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const s=Vf(e.accessList);for(const e in s)n+=t.txAccessListAddress+t.txAccessListStorageKey*s[e].storageKeys.length}return n}static from(e){if(function(){if(hw)return;function e(e,t,n){const s=function(){const s=new aw(e,t);return null!=n.ensNetwork&&s.attachPlugin(new rw(null,n.ensNetwork)),s.attachPlugin(new sw),(n.plugins||[]).forEach((e=>{s.attachPlugin(e)})),s};aw.register(e,s),aw.register(t,s),n.altNames&&n.altNames.forEach((e=>{aw.register(e,s)}))}hw=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("matic",137,{ensNetwork:1,plugins:[lw("https://gasstation.polygon.technology/v2")]}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[lw("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[uw(BigInt("1000000"))]}),e("optimism-goerli",420,{}),e("xdai",100,{ensNetwork:1})}(),null==e)return aw.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){const t=ow.get(e);if(t)return t();if("bigint"==typeof e)return new aw("unknown",e);Ou(!1,"unknown network","network",e)}if("function"==typeof e.clone){return e.clone()}if("object"==typeof e){Ou("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);const t=new aw(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new rw(e.ensAddress,e.ensNetwork)),t}Ou(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));const n=ow.get(e);n&&Ou(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),ow.set(e,t)}}function cw(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const s=n.split(".");if(1===s.length&&s.push(""),2!==s.length)throw new Error(`invalid gwei value: ${e}`);for(;s[1].length<t;)s[1]+="0";if(s[1].length>9){let e=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||e++,s[1]=e.toString()}return BigInt(s[0]+s[1])}function lw(e){return new iw(e,(async(e,t,n)=>{let s;n.setHeader("User-Agent","ethers");try{const[t,r]=await Promise.all([n.send(),e()]);s=t;const i=s.bodyJson.standard;return{gasPrice:r.gasPrice,maxFeePerGas:cw(i.maxFee,9),maxPriorityFeePerGas:cw(i.maxPriorityFee,9)}}catch(e){Iu(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:e})}}))}function uw(e){return new iw("data:",(async(t,n,s)=>{const r=await t();if(null==r.maxFeePerGas||null==r.maxPriorityFeePerGas)return r;const i=r.maxFeePerGas-r.maxPriorityFeePerGas;return{gasPrice:r.gasPrice,maxFeePerGas:i+e,maxPriorityFeePerGas:e}}))}let hw=!1;function dw(e){return JSON.parse(JSON.stringify(e))}class fw{#ye;#be;#we;#ve;constructor(e){this.#ye=e,this.#be=null,this.#we=4e3,this.#ve=-2}get pollingInterval(){return this.#we}set pollingInterval(e){this.#we=e}async#Ae(){try{const e=await this.#ye.getBlockNumber();if(-2===this.#ve)return void(this.#ve=e);if(e!==this.#ve){for(let t=this.#ve+1;t<=e;t++){if(null==this.#be)return;await this.#ye.emit("block",t)}this.#ve=e}}catch(e){}null!=this.#be&&(this.#be=this.#ye._setTimeout(this.#Ae.bind(this),this.#we))}start(){this.#be||(this.#be=this.#ye._setTimeout(this.#Ae.bind(this),this.#we),this.#Ae())}stop(){this.#be&&(this.#ye._clearTimeout(this.#be),this.#be=null)}pause(e){this.stop(),e&&(this.#ve=-2)}resume(){this.start()}}class pw{#ye;#Ae;#_e;constructor(e){this.#ye=e,this.#_e=!1,this.#Ae=e=>{this._poll(e,this.#ye)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#_e||(this.#_e=!0,this.#Ae(-2),this.#ye.on("block",this.#Ae))}stop(){this.#_e&&(this.#_e=!1,this.#ye.off("block",this.#Ae))}pause(e){this.stop()}resume(){this.start()}}class gw extends pw{#K;constructor(e,t){super(e),this.#K=dw(t)}async _poll(e,t){throw new Error("@TODO")}}class mw extends pw{#ke;constructor(e,t){super(e),this.#ke=t}async _poll(e,t){const n=await t.getTransactionReceipt(this.#ke);n&&t.emit(this.#ke,n)}}class yw{#ye;#K;#be;#_e;#ve;constructor(e,t){this.#ye=e,this.#K=dw(t),this.#be=this.#Ae.bind(this),this.#_e=!1,this.#ve=-2}async#Ae(e){if(-2===this.#ve)return;const t=dw(this.#K);t.fromBlock=this.#ve+1,t.toBlock=e;const n=await this.#ye.getLogs(t);if(0!==n.length)for(const e of n)this.#ye.emit(this.#K,e),this.#ve=e.blockNumber;else this.#ve<e-60&&(this.#ve=e-60)}start(){this.#_e||(this.#_e=!0,-2===this.#ve&&this.#ye.getBlockNumber().then((e=>{this.#ve=e})),this.#ye.on("block",this.#be))}stop(){this.#_e&&(this.#_e=!1,this.#ye.off("block",this.#be))}pause(e){this.stop(),e&&(this.#ve=-2)}resume(){this.start()}}const bw=BigInt(2);function ww(e){return e&&"function"==typeof e.then}function vw(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce(((e,n)=>(e[n]=t[n],e)),{})}return t}))}class Aw{name;constructor(e){xu(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function _w(e){return(e=Array.from(new Set(e).values())).sort(),e}async function kw(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"pending":case"debug":case"error":case"network":return{type:e,tag:e}}if(Mu(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:vw("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:vw("orphan",t),filter:(n=t,JSON.parse(JSON.stringify(n)))}}var n;if(e.address||e.topics){const n=e,s={topics:(n.topics||[]).map((e=>null==e?null:Array.isArray(e)?_w(e.map((e=>e.toLowerCase()))):e.toLowerCase()))};if(n.address){const e=[],r=[],i=n=>{Mu(n)?e.push(n):r.push((async()=>{e.push(await Nf(n,t))})())};Array.isArray(n.address)?n.address.forEach(i):i(n.address),r.length&&await Promise.all(r),s.address=_w(e.map((e=>e.toLowerCase())))}return{filter:s,tag:vw("event",s),type:"event"}}Ou(!1,"unknown ProviderEvent","event",e)}function Ew(){return(new Date).getTime()}const xw={cacheTimeout:250,pollingInterval:4e3};class Cw{#Ee;#me;#xe;#Ce;#Se;#Pe;#Te;#Ie;#Oe;#Ne;#je;#o;constructor(e,t){if(this.#o=Object.assign({},xw,t||{}),"any"===e)this.#Pe=!0,this.#Se=null;else if(e){const t=aw.from(e);this.#Pe=!1,this.#Se=Promise.resolve(t),setTimeout((()=>{this.emit("network",t,null)}),0)}else this.#Pe=!1,this.#Se=null;this.#Ie=-1,this.#Te=new Map,this.#Ee=new Map,this.#me=new Map,this.#xe=null,this.#Ce=!1,this.#Oe=1,this.#Ne=new Map,this.#je=!1}get pollingInterval(){return this.#o.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#me.values())}attachPlugin(e){if(this.#me.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#me.set(e.name,e.connect(this)),this}getPlugin(e){return this.#me.get(e)||null}get disableCcipRead(){return this.#je}set disableCcipRead(e){this.#je=!!e}async#Le(e){const t=this.#o.cacheTimeout;if(t<0)return await this._perform(e);const n=vw(e.method,e);let s=this.#Te.get(n);return s||(s=this._perform(e),this.#Te.set(n,s),setTimeout((()=>{this.#Te.get(n)===s&&this.#Te.delete(n)}),t)),await s}async ccipReadFetch(e,t,n){if(this.disableCcipRead||0===n.length||null==e.to)return null;const s=e.to.toLowerCase(),r=t.toLowerCase(),i=[];for(let t=0;t<n.length;t++){const o=n[t],a=o.replace("{sender}",s).replace("{data}",r),c=new ip(a);-1===o.indexOf("{data}")&&(c.body={data:r,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:t,urls:n});let l="unknown error";const u=await c.send();try{const e=u.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:e}),e.data;e.message&&(l=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:e})}catch(e){}Iu(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${l}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:o,errorMessage:l}}),i.push(l)}Iu(!1,`error encountered during CCIP fetch: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:i}})}_wrapBlock(e,t){return new Ap(function(e){const t=Xb(e);return t.transactions=e.transactions.map((e=>"string"==typeof e?e:tw(e))),t}(e),this)}_wrapLog(e,t){return new _p(function(e){return Yb(e)}(e),this)}_wrapTransactionReceipt(e,t){return new kp(function(e){return ew(e)}(e),this)}_wrapTransactionResponse(e,t){return new Ep(tw(e),this)}_detectNetwork(){Iu(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Iu(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=nh(await this.#Le({method:"getBlockNumber"}),"%response");return this.#Ie>=0&&(this.#Ie=e),e}_getAddress(e){return Nf(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}return Mu(e)?Mu(e,32)?e:ih(e):("bigint"==typeof e&&(e=nh(e,"blockTag")),"number"==typeof e?e>=0?ih(e):this.#Ie>=0?ih(this.#Ie+e):this.getBlockNumber().then((t=>ih(t+e))):void Ou(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map((e=>null==e?null:Array.isArray(e)?_w(e.map((e=>e.toLowerCase()))):e.toLowerCase())),n="blockHash"in e?e.blockHash:void 0,s=(e,s,r)=>{let i;switch(e.length){case 0:break;case 1:i=e[0];break;default:e.sort(),i=e}if(n&&(null!=s||null!=r))throw new Error("invalid filter");const o={};return i&&(o.address=i),t.length&&(o.topics=t),s&&(o.fromBlock=s),r&&(o.toBlock=r),n&&(o.blockHash=n),o};let r,i,o=[];if(e.address)if(Array.isArray(e.address))for(const t of e.address)o.push(this._getAddress(t));else o.push(this._getAddress(e.address));return"fromBlock"in e&&(r=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(i=this._getBlockTag(e.toBlock)),o.filter((e=>"string"!=typeof e)).length||null!=r&&"string"!=typeof r||null!=i&&"string"!=typeof i?Promise.all([Promise.all(o),r,i]).then((e=>s(e[0],e[1],e[2]))):s(o,r,i)}_getTransactionRequest(e){const t=vp(e),n=[];if(["to","from"].forEach((e=>{if(null==t[e])return;const s=Nf(t[e]);ww(s)?n.push(async function(){t[e]=await s}()):t[e]=s})),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);ww(e)?n.push(async function(){t.blockTag=await e}()):t.blockTag=e}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(null==this.#Se){const e=this._detectNetwork().then((e=>(this.emit("network",e,null),e)),(t=>{throw this.#Se===e&&(this.#Se=null),t}));return this.#Se=e,(await e).clone()}const e=this.#Se,[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(this.#Pe?(this.emit("network",n,t),this.#Se===e&&(this.#Se=Promise.resolve(n))):Iu(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:n}=await Eu({_block:this.#Ue("latest",!1),gasPrice:(async()=>{try{return Xu(await this.#Le({method:"getGasPrice"}),"%response")}catch(e){}return null})()});let s=null,r=null;const i=this._wrapBlock(t,e);return i&&i.baseFeePerGas&&(r=BigInt("1000000000"),s=i.baseFeePerGas*bw+r),new wp(n,s,r)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const e=new ip(n.url),s=await n.processFunc(t,this,e);return new wp(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return ww(t)&&(t=await t),Xu(await this.#Le({method:"estimateGas",transaction:t}),"%response")}async#Re(e,t,n){Iu(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const s=vp(e);try{return Fu(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(e){if(!this.disableCcipRead&&Pu(e)&&e.data&&n>=0&&"latest"===t&&null!=s.to&&"0x556f1830"===Hu(e.data,0,4)){const r=e.data,i=await Nf(s.to,this);let o;try{o=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Iu(Gu(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Hu(e,0,32);Iu(Hu(n,0,12)===Hu(jw,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=Hu(n,12);try{const n=[],s=nh(Hu(e,32,64)),r=nh(Hu(e,s,s+32)),i=Hu(e,s+32);for(let e=0;e<r;e++){const t=Sw(i,32*e);if(null==t)throw new Error("abort");n.push(t)}t.urls=n}catch(e){Iu(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Pw(e,64);if(null==n)throw new Error("abort");t.calldata=n}catch(e){Iu(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Iu(Hu(e,100,128)===Hu(jw,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=Hu(e,96,100);try{const n=Pw(e,128);if(null==n)throw new Error("abort");t.extraData=n}catch(e){Iu(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e])),t}(Hu(e.data,4))}catch(e){Iu(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:r}})}Iu(o.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:r,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:o.errorArgs}});const a=await this.ccipReadFetch(s,o.calldata,o.urls);Iu(null!=a,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:e.data,errorArgs:o.errorArgs}});const c={to:i,data:$u([o.selector,Nw([a,o.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const e=await this.#Re(c,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:e}),e}}throw e}}async#De(e){const{value:t}=await Eu({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:n}=await Eu({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#De(this.#Re(t,n,e.enableCcipRead?0:-1))}async#Me(e,t,n){let s=this._getAddress(t),r=this._getBlockTag(n);return"string"==typeof s&&"string"==typeof r||([s,r]=await Promise.all([s,r])),await this.#De(this.#Le(Object.assign(e,{address:s,blockTag:r})))}async getBalance(e,t){return Xu(await this.#Me({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return nh(await this.#Me({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Fu(await this.#Me({method:"getCode"},e,t))}async getStorage(e,t,n){const s=Xu(t,"position");return Fu(await this.#Me({method:"getStorage",position:s},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:s}=await Eu({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),r=Db.from(e);if(r.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(r,s).replaceableTransaction(t)}async#Ue(e,t){if(Mu(e,32))return await this.#Le({method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return"string"!=typeof n&&(n=await n),await this.#Le({method:"getBlock",blockTag:n,includeTransactions:t})}async getBlock(e,t){const{network:n,params:s}=await Eu({network:this.getNetwork(),params:this.#Ue(e,!!t)});return null==s?null:this._wrapBlock(s,n)}async getTransaction(e){const{network:t,params:n}=await Eu({network:this.getNetwork(),params:this.#Le({method:"getTransaction",hash:e})});return null==n?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await Eu({network:this.getNetwork(),params:this.#Le({method:"getTransactionReceipt",hash:e})});if(null==n)return null;if(null==n.gasPrice&&null==n.effectiveGasPrice){const t=await this.#Le({method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await Eu({network:this.getNetwork(),result:this.#Le({method:"getTransactionResult",hash:e})});return null==t?null:Fu(t)}async getLogs(e){let t=this._getFilter(e);ww(t)&&(t=await t);const{network:n,params:s}=await Eu({network:this.getNetwork(),params:this.#Le({method:"getLogs",filter:t})});return s.map((e=>this._wrapLog(e,n)))}_getProvider(e){Iu(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await zb.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=xm((e=rd(e)).substring(2).toLowerCase()+".addr.reverse");try{const n=await zb.getEnsAddress(this),s=new tg(n,["function resolver(bytes32) view returns (address)"],this),r=await s.resolver(t);if(null==r||r===cp)return null;const i=new tg(r,["function name(bytes32) view returns (string)"],this),o=await i.name(t);return await this.resolveName(o)!==e?null:o}catch(e){if(Su(e,"BAD_DATA")&&"0x"===e.value)return null;if(Su(e,"CALL_EXCEPTION"))return null;throw e}return null}async waitForTransaction(e,t,n){const s=null!=t?t:1;return 0===s?this.getTransactionReceipt(e):new Promise((async(t,r)=>{let i=null;const o=async n=>{try{const r=await this.getTransactionReceipt(e);if(null!=r&&n-r.blockNumber+1>=s)return t(r),void(i&&(clearTimeout(i),i=null))}catch(e){console.log("EEE",e)}this.once("block",o)};null!=n&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",o),r(Tu("timeout","TIMEOUT",{reason:"timeout"})))}),n)),o(await this.getBlockNumber())}))}async waitForBlock(e){Iu(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#Ne.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#Ne.delete(e))}_setTimeout(e,t){null==t&&(t=0);const n=this.#Oe++,s=()=>{this.#Ne.delete(n),e()};if(this.paused)this.#Ne.set(n,{timer:null,func:s,time:t});else{const e=setTimeout(s,t);this.#Ne.set(n,{timer:e,func:s,time:Ew()})}return n}_forEachSubscriber(e){for(const t of this.#Ee.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Aw(e.type);case"block":{const e=new fw(this);return e.pollingInterval=this.pollingInterval,e}case"event":return new yw(this,e.filter);case"transaction":return new mw(this,e.hash);case"orphan":return new gw(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of this.#Ee.values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),null!=this.#xe&&t.pause(this.#xe);break}}async#Be(e,t){let n=await kw(e,this);return"event"===n.type&&t&&t.length>0&&!0===t[0].removed&&(n=await kw({orphan:"drop-log",log:t[0]},this)),this.#Ee.get(n.tag)||null}async#Fe(e){const t=await kw(e,this),n=t.tag;let s=this.#Ee.get(n);if(!s){s={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#Ee.set(n,s)}return s}async on(e,t){const n=await this.#Fe(e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#xe&&n.subscriber.pause(this.#xe)),this}async once(e,t){const n=await this.#Fe(e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#xe&&n.subscriber.pause(this.#xe)),this}async emit(e,...t){const n=await this.#Be(e,t);if(!n||0===n.listeners.length)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter((({listener:n,once:s})=>{const r=new Sp(this,s?null:n,e);try{n.call(this,...t,r)}catch(e){}return!s})),0===n.listeners.length&&(n.started&&n.subscriber.stop(),this.#Ee.delete(n.tag)),s>0}async listenerCount(e){if(e){const t=await this.#Be(e);return t?t.listeners.length:0}let t=0;for(const{listeners:e}of this.#Ee.values())t+=e.length;return t}async listeners(e){if(e){const t=await this.#Be(e);return t?t.listeners.map((({listener:e})=>e)):[]}let t=[];for(const{listeners:e}of this.#Ee.values())t=t.concat(e.map((({listener:e})=>e)));return t}async off(e,t){const n=await this.#Be(e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return t&&0!==n.listeners.length||(n.started&&n.subscriber.stop(),this.#Ee.delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:s}=await this.#Fe(e);n&&s.stop(),this.#Ee.delete(t)}else for(const[e,{started:t,subscriber:n}]of this.#Ee)t&&n.stop(),this.#Ee.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#Ce}destroy(){this.removeAllListeners();for(const e of this.#Ne.keys())this._clearTimeout(e);this.#Ce=!0}get paused(){return null!=this.#xe}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#Ie=-1,null!=this.#xe){if(this.#xe==!!e)return;Iu(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e))),this.#xe=!!e;for(const e of this.#Ne.values())e.timer&&clearTimeout(e.timer),e.time=Ew()-e.time}resume(){if(null!=this.#xe){this._forEachSubscriber((e=>e.resume())),this.#xe=null;for(const e of this.#Ne.values()){let t=e.time;t<0&&(t=0),e.time=Ew(),setTimeout(e.func,t)}}}}function Sw(e,t){try{const n=Pw(e,t);if(n)return Td(n)}catch(e){}return null}function Pw(e,t){if("0x"===e)return null;try{const n=nh(Hu(e,t,t+32)),s=nh(Hu(e,n,n+32));return Hu(e,n+32,n+32+s)}catch(e){}return null}function Tw(e){const t=rh(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function Iw(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}const Ow=new Uint8Array([]);function Nw(e){const t=[];let n=0;for(let s=0;s<e.length;s++)t.push(Ow),n+=32;for(let s=0;s<e.length;s++){const r=Ru(e[s]);t[s]=Tw(n),t.push(Tw(r.length)),t.push(Iw(r)),n+=32+32*Math.ceil(r.length/32)}return $u(t)}const jw="0x0000000000000000000000000000000000000000000000000000000000000000";function Lw(e,t){if(e.provider)return e.provider;Iu(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Uw(e,t){let n=vp(t);if(null!=n.to&&(n.to=Nf(n.to,e)),null!=n.from){const t=n.from;n.from=Promise.all([e.getAddress(),Nf(t,e)]).then((([e,t])=>(Ou(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e)))}else n.from=e.getAddress();return await Eu(n)}class Rw{provider;constructor(e){xu(this,{provider:e||null})}async getNonce(e){return Lw(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Uw(this,e)}async populateTransaction(e){const t=Lw(this,"populateTransaction"),n=await Uw(this,e);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(null!=n.chainId){Ou(Xu(n.chainId)===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=s.chainId;const r=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!r?0!==n.type&&1!==n.type||!r||Ou(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):Ou(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const e=await t.getFeeData();Iu(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==n.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(n.type=2,null!=n.gasPrice){const e=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=e,n.maxPriorityFeePerGas=e}else null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(Iu(!r,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice),n.type=0):Iu(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2===n.type&&(null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else n.type=2;return await Eu(n)}async estimateGas(e){return Lw(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Lw(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=Lw(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=Lw(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const s=Db.from(n);return await t.broadcastTransaction(await this.signTransaction(s))}}class Dw{#ye;#$e;#be;#_e;#Ge;#He;constructor(e){this.#ye=e,this.#$e=null,this.#be=this.#Ae.bind(this),this.#_e=!1,this.#Ge=null,this.#He=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#Ae(e){try{null==this.#$e&&(this.#$e=this._subscribe(this.#ye));let e=null;try{e=await this.#$e}catch(e){if(!Su(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e)return this.#$e=null,void this.#ye._recoverSubscriber(this,this._recover(this.#ye));const t=await this.#ye.getNetwork();if(this.#Ge||(this.#Ge=t),this.#Ge.chainId!==t.chainId)throw new Error("chaid changed");if(this.#He)return;const n=await this.#ye.send("eth_getFilterChanges",[e]);await this._emitResults(this.#ye,n)}catch(e){console.log("@TODO",e)}this.#ye.once("block",this.#be)}#ze(){const e=this.#$e;e&&(this.#$e=null,e.then((e=>{this.#ye.send("eth_uninstallFilter",[e])})))}start(){this.#_e||(this.#_e=!0,this.#Ae(-2))}stop(){this.#_e&&(this.#_e=!1,this.#He=!0,this.#ze(),this.#ye.off("block",this.#be))}pause(e){e&&this.#ze(),this.#ye.off("block",this.#be)}resume(){this.start()}}class Mw extends Dw{#We;constructor(e,t){var n;super(e),this.#We=(n=t,JSON.parse(JSON.stringify(n)))}_recover(e){return new yw(e,this.#We)}async _subscribe(e){return await e.send("eth_newFilter",[this.#We])}async _emitResults(e,t){for(const n of t)e.emit(this.#We,e._wrapLog(n,e._network))}}class Bw extends Dw{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const Fw="bigint,boolean,function,number,string,symbol".split(/,/g);function $w(e){if(null==e||Fw.indexOf(typeof e)>=0)return e;if("function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map($w);if("object"==typeof e)return Object.keys(e).reduce(((t,n)=>(t[n]=e[n],t)),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function Gw(e){return new Promise((t=>{setTimeout(t,e)}))}function Hw(e){return e?e.toLowerCase():e}function zw(e){return e&&"number"==typeof e.pollingInterval}const Ww={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class qw extends Rw{address;constructor(e,t){super(e),xu(this,{address:t=rd(t)})}connect(e){Iu(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=$w(e),n=[];if(t.from){const s=t.from;n.push((async()=>{const n=await Nf(s,this.provider);Ou(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n})())}else t.from=this.address;if(null==t.gasLimit&&n.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){const e=t.to;n.push((async()=>{t.to=await Nf(e,this.provider)})())}n.length&&await Promise.all(n);const s=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise(((e,s)=>{const r=[1e3,100],i=async()=>{const s=await this.provider.getTransaction(n);null==s?this.provider._setTimeout((()=>{i()}),r.pop()||4e3):e(s.replaceableTransaction(t))};i()}))}async signTransaction(e){const t=$w(e);if(t.from){const n=await Nf(t.from,this.provider);Ou(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n}else t.from=this.address;const n=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const t="string"==typeof e?Pd(e):e;return await this.provider.send("personal_sign",[Fu(t),this.address.toLowerCase()])}async signTypedData(e,t,n){const s=$w(n),r=await qf.resolveNames(e,t,s,(async e=>{const t=await Nf(e);return Ou(null!=t,"TypedData does not support null address","value",e),t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(qf.getPayload(r.domain,t,r.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"==typeof e?Pd(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Fu(t)])}}class Kw extends Cw{#o;#qe;#Ke;#Ve;#Je;#Ge;#Qe(){if(this.#Ve)return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#Ve=setTimeout((()=>{this.#Ve=null;const e=this.#Ke;for(this.#Ke=[];e.length;){const t=[e.shift()];for(;e.length&&t.length!==this.#o.batchMaxCount;){t.push(e.shift());if(JSON.stringify(t.map((e=>e.payload))).length>this.#o.batchMaxSize){e.unshift(t.pop());break}}(async()=>{const e=1===t.length?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const n=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:n});for(const{resolve:e,reject:s,payload:r}of t){if(this.destroyed){s(Tu("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r.method}));continue}const t=n.filter((e=>e.id===r.id))[0];if(null!=t)"error"in t?s(this.getRpcError(r,t)):e(t.result);else{const e=Tu("missing response for request","BAD_DATA",{value:n,info:{payload:r}});this.emit("error",e),s(e)}}}catch(e){this.emit("debug",{action:"receiveRpcError",error:e});for(const{reject:n}of t)n(e)}})()}}),e)}constructor(e,t){super(e,t),this.#qe=1,this.#o=Object.assign({},Ww,t||{}),this.#Ke=[],this.#Ve=null,this.#Ge=null;{let e=null;const t=new Promise((t=>{e=t}));this.#Je={promise:t,resolve:e}}const n=this._getOption("staticNetwork");n&&(Ou(null==e||n.matches(e),"staticNetwork MUST match network object","options",t),this.#Ge=n)}_getOption(e){return this.#o[e]}get _network(){return Iu(this.#Ge,"network is not available yet","NETWORK_ERROR"),this.#Ge}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&Xu(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const n=await this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)return e;if(this.ready)return aw.from(Xu(await this.send("eth_chainId",[])));const t={id:this.#qe++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let n;this.emit("debug",{action:"sendRpcPayload",payload:t});try{n=(await this._send(t))[0]}catch(e){throw this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:n}),"result"in n)return aw.from(Xu(n.result));throw this.getRpcError(t,n)}_start(){null!=this.#Je&&null!=this.#Je.resolve&&(this.#Je.resolve(),this.#Je=null,(async()=>{for(;null==this.#Ge&&!this.destroyed;)try{this.#Ge=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Tu("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await Gw(1e3)}this.#Qe()})())}async _waitUntilReady(){if(null!=this.#Je)return await this.#Je.promise}_getSubscriber(e){return"pending"===e.type?new Bw(this):"event"===e.type?this._getOption("polling")?new yw(this,e.filter):new Mw(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new Aw("orphan"):super._getSubscriber(e)}get ready(){return null==this.#Je}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((n=>{if(null==e[n])return;let s=n;"gasLimit"===n&&(s="gas"),t[s]=ih(Xu(e[n],`tx.${n}`))})),["from","to","data"].forEach((n=>{null!=e[n]&&(t[n]=Fu(e[n]))})),e.accessList&&(t.accessList=Vf(e.accessList)),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Hw(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Hw(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Hw(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Hw(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Hw):e.filter.address=Hw(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:n}=e,{error:s}=t;if("eth_estimateGas"===n&&s.message){const t=s.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return Tu("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:s}})}if("eth_call"===n||"eth_estimateGas"===n){const t=Qw(s),r=Tf.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],t?t.data:null);return r.info={error:s,payload:e},r}const r=JSON.stringify(function(e){const t=[];return Yw(e,t),t}(s));if("string"==typeof s.message&&s.message.match(/user denied|ethers-user-denied/i)){return Tu("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:s}})}if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){const t=e.params[0];if(r.match(/insufficient funds|base fee exceeds gas limit/i))return Tu("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:s}});if(r.match(/nonce/i)&&r.match(/too low/i))return Tu("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:s}});if(r.match(/replacement transaction/i)&&r.match(/underpriced/i))return Tu("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:s}});if(r.match(/only replay-protected/i))return Tu("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:t,info:{error:s}}})}let i=!!r.match(/the method .* does not exist/i);return i||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(i=!0),i?Tu("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:s,payload:e}}):Tu("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(Tu("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const n=this.#qe++,s=new Promise(((s,r)=>{this.#Ke.push({resolve:s,reject:r,payload:{method:e,params:t,id:n,jsonrpc:"2.0"}})}));return this.#Qe(),s}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"==typeof e){const n=await t;if(e>=n.length)throw new Error("no such account");return new qw(this,n[e])}const{accounts:n}=await Eu({network:this.getNetwork(),accounts:t});e=rd(e);for(const t of n)if(rd(t)===e)return new qw(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((e=>new qw(this,e)))}destroy(){this.#Ve&&(clearTimeout(this.#Ve),this.#Ve=null);for(const{payload:e,reject:t}of this.#Ke)t(Tu("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#Ke=[],super.destroy()}}class Vw extends Kw{#Ye;constructor(e,t){super(e,t),this.#Ye=4e3}_getSubscriber(e){const t=super._getSubscriber(e);return zw(t)&&(t.pollingInterval=this.#Ye),t}get pollingInterval(){return this.#Ye}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#Ye=e,this._forEachSubscriber((e=>{zw(e)&&(e.pollingInterval=this.#Ye)}))}}class Jw extends Vw{#Xe;constructor(e,t,n){null==e&&(e="http://localhost:8545"),super(t,n),this.#Xe="string"==typeof e?new ip(e):e.clone()}_getConnection(){return this.#Xe.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){const t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");const n=await t.send();n.assertOk();let s=n.bodyJson;return Array.isArray(s)||(s=[s]),s}}function Qw(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&Mu(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(const t in e){const n=Qw(e[t]);if(n)return n}return null}if("string"==typeof e)try{return Qw(JSON.parse(e))}catch(e){}return null}function Yw(e,t){if(null!=e){if("string"==typeof e.message&&t.push(e.message),"object"==typeof e)for(const n in e)Yw(e[n],t);if("string"==typeof e)try{return Yw(JSON.parse(e),t)}catch(e){}}}const Xw=new class{dev=!1;avaxRpc;avaxChainId};const Zw=new class{blockNumber;blockTime;async init(){const e=new Jw(Xw.avaxRpc),t=await e.getBlock("latest");this.blockNumber=t.number,this.blockTime=1e3*t.timestamp}blockToTime(e){return this.blockTime+2*(e-this.blockNumber)*1e3}};var ev=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured for connector "${t}".`),this.name="ChainNotConfiguredForConnectorError"}},tv=class extends Error{constructor(){super(...arguments),this.name="ConnectorNotFoundError",this.message="Connector not found"}};function nv(e){return"string"==typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"==typeof e?Number(e):e}var sv=n(6729),rv=n(2676);const iv=(0,rv.ax)({id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc0497E381f536Be9ce14B0dD3817cBcAe57d2F62",blockCreated:16966585},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),ov=(0,rv.ax)({id:5,network:"goerli",name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-goerli.g.alchemy.com/v2"],webSocket:["wss://eth-goerli.g.alchemy.com/v2"]},infura:{http:["https://goerli.infura.io/v3"],webSocket:["wss://goerli.infura.io/ws/v3"]},default:{http:["https://rpc.ankr.com/eth_goerli"]},public:{http:["https://rpc.ankr.com/eth_goerli"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://goerli.etherscan.io"},default:{name:"Etherscan",url:"https://goerli.etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0x56522D00C410a43BFfDF00a9A569489297385790",blockCreated:8765204},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:6507670}},testnet:!0});var av=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},cv=(e,t,n)=>(av(e,t,"read from private field"),n?n.call(e):t.get(e)),lv=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},uv=(e,t,n,s)=>(av(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),hv=(e,t,n)=>(av(e,t,"access private method"),n),dv=class extends sv{constructor({chains:e=[iv,ov],options:t}){super(),this.chains=e,this.options=t}getBlockExplorerUrls(e){const{default:t,...n}=e.blockExplorers??{};if(t)return[t.url,...Object.values(n).map((e=>e.url))]}isChainUnsupported(e){return!this.chains.some((t=>t.id===e))}setStorage(e){this.storage=e}},fv=n(5775),pv=n(2027),gv=n(8863);class mv extends pv.G{constructor(e,{code:t,docsPath:n,metaMessages:s,shortMessage:r}){super(r,{cause:e,docsPath:n,metaMessages:s||e?.metaMessages}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof gv.bs?e.code:t??-1}}class yv extends mv{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class bv extends mv{constructor(e){super(e,{code:bv.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(bv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class wv extends mv{constructor(e){super(e,{code:wv.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(wv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class vv extends mv{constructor(e){super(e,{code:vv.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(vv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Av extends mv{constructor(e){super(e,{code:Av.code,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(Av,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class _v extends mv{constructor(e){super(e,{code:_v.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(_v,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class kv extends mv{constructor(e){super(e,{code:kv.code,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(kv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Ev extends mv{constructor(e){super(e,{code:Ev.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Ev,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class xv extends mv{constructor(e){super(e,{code:xv.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(xv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Cv extends mv{constructor(e){super(e,{code:Cv.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(Cv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Sv extends mv{constructor(e){super(e,{code:Sv.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(Sv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Pv extends mv{constructor(e){super(e,{code:Pv.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(Pv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Tv extends mv{constructor(e){super(e,{code:Tv.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(Tv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Iv extends yv{constructor(e){super(e,{code:Iv.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty(Iv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Ov extends yv{constructor(e){super(e,{code:Ov.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(Ov,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Nv extends yv{constructor(e){super(e,{code:Nv.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(Nv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class jv extends yv{constructor(e){super(e,{code:jv.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty(jv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Lv extends yv{constructor(e){super(e,{code:Lv.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(Lv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Uv extends yv{constructor(e){super(e,{code:Uv.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(Uv,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Rv extends mv{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}var Dv=n(4503);const Mv=256;let Bv,Fv=Mv;function $v(e=11){if(!Bv||Fv+e>2*Mv){Bv="",Fv=0;for(let e=0;e<Mv;e++)Bv+=(256+256*Math.random()|0).toString(16).substring(1)}return Bv.substring(Fv,Fv+++e)}function Gv(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,key:s="base",name:r="Base Client",pollingInterval:i=4e3,type:o="base"}=e,a=e.chain,c=e.account?(0,Dv.T)(e.account):void 0,{config:l,request:u,value:h}=e.transport({chain:a,pollingInterval:i}),d={account:c,batch:t,cacheTime:n,chain:a,key:s,name:r,pollingInterval:i,request:u,transport:{...l,...h},type:o,uid:$v()};return Object.assign(d,{extend:function e(t){return n=>{const s=n(t);for(const e in d)delete s[e];const r={...t,...s};return Object.assign(r,{extend:e(r)})}}(d)})}var Hv=n(5946);async function zv(e){const t=await e.request({method:"eth_chainId"});return(0,Hv.ly)(t)}var Wv=n(2106);var qv=n(7412),Kv=n(7040),Vv=n(5444);const Jv="/docs/contract/encodeDeployData";function Qv({abi:e,args:t,bytecode:n}){if(!t||0===t.length)return n;const s=e.find((e=>"type"in e&&"constructor"===e.type));if(!s)throw new qv.fM({docsPath:Jv});if(!("inputs"in s))throw new qv.cO({docsPath:Jv});if(!s.inputs||0===s.inputs.length)throw new qv.cO({docsPath:Jv});const r=(0,Vv.E)(s.inputs,t);return(0,Kv.SM)([n,r])}class Yv extends pv.G{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join("\n"),{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}var Xv=n(6445),Zv=n(3639),eA=n(7469);var tA=n(1163),nA=n(4688),sA=n(7531),rA=n(7795);class iA extends pv.G{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class oA extends pv.G{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class aA extends pv.G{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,rA.o)(e)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class cA extends pv.G{constructor({blockHash:e,blockNumber:t}){let n="Block";e&&(n=`Block at hash "${e}"`),t&&(n=`Block at number "${t}"`),super(`${n} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const lA={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function uA(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?(0,Hv.ly)(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?(0,Hv.ly)(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?lA[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip2930"===t.type&&(delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t}function hA(e){const t=e.transactions?.map((e=>"string"==typeof e?e:uA(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,difficulty:e.difficulty?BigInt(e.difficulty):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function dA(e,{blockHash:t,blockNumber:n,blockTag:s,includeTransactions:r}={}){const i=s??"latest",o=r??!1,a=void 0!==n?(0,Wv.eC)(n):void 0;let c=null;if(c=t?await e.request({method:"eth_getBlockByHash",params:[t,o]}):await e.request({method:"eth_getBlockByNumber",params:[a||i,o]}),!c)throw new cA({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||hA)(c)}async function fA(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function pA(e,t){const{block:n,chain:s=e.chain,request:r}=t||{};if("function"==typeof s?.fees?.defaultPriorityFee){const t=n||await dA(e);return s.fees.defaultPriorityFee({block:t,client:e,request:r})}if(void 0!==s?.fees?.defaultPriorityFee)return s?.fees?.defaultPriorityFee;try{const t=await e.request({method:"eth_maxPriorityFeePerGas"});return(0,Hv.y_)(t)}catch{const[t,s]=await Promise.all([n?Promise.resolve(n):dA(e),fA(e)]);if("bigint"!=typeof t.baseFeePerGas)throw new oA;const r=s-t.baseFeePerGas;return r<0n?0n:r}}async function gA(e,t){const{block:n,chain:s=e.chain,request:r,type:i="eip1559"}=t||{},o=await(async()=>"function"==typeof s?.fees?.baseFeeMultiplier?s.fees.baseFeeMultiplier({block:n,client:e,request:r}):s?.fees?.baseFeeMultiplier??1.2)();if(o<1)throw new iA;const a=10**(o.toString().split(".")[1]?.length??0),c=e=>e*BigInt(Math.ceil(o*a))/BigInt(a),l=n||await dA(e);if("function"==typeof s?.fees?.estimateFeesPerGas)return s.fees.estimateFeesPerGas({block:n,client:e,multiply:c,request:r,type:i});if("eip1559"===i){if("bigint"!=typeof l.baseFeePerGas)throw new oA;const t=r?.maxPriorityFeePerGas?r.maxPriorityFeePerGas:await pA(e,{block:l,chain:s,request:r}),n=c(l.baseFeePerGas);return{maxFeePerGas:r?.maxFeePerGas??n+t,maxPriorityFeePerGas:t}}return{gasPrice:r?.gasPrice??c(await fA(e))}}var mA=n(9625);class yA extends pv.G{constructor(e,{account:t,docsPath:n,chain:s,data:r,gas:i,gasPrice:o,maxFeePerGas:a,maxPriorityFeePerGas:c,nonce:l,to:u,value:h}){const d=(0,Zv.xr)({from:t?.address,to:u,value:void 0!==h&&`${(0,mA.d)(h)} ${s?.nativeCurrency.symbol||"ETH"}`,data:r,gas:i,gasPrice:void 0!==o&&`${(0,rA.o)(o)} gwei`,maxFeePerGas:void 0!==a&&`${(0,rA.o)(a)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${(0,rA.o)(c)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",d].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}async function bA(e,t){const n=t.account??e.account;if(!n)throw new Yv({docsPath:"/docs/actions/public/estimateGas"});const s=(0,Dv.T)(n);try{const{accessList:n,blockNumber:r,blockTag:i,data:o,gas:a,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:h,to:d,value:f,...p}="local"===s.type?await vA(e,t):t,g=(r?(0,Wv.eC)(r):void 0)||i;(0,sA.F)(t);const m=e.chain?.formatters?.transactionRequest?.format||nA.tG,y=m({...(0,tA.K)(p,{format:m}),from:s.address,accessList:n,data:o,gas:a,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:h,to:d,value:f}),b=await e.request({method:"eth_estimateGas",params:g?[y,g]:[y]});return BigInt(b)}catch(n){throw function(e,{docsPath:t,...n}){const s=(()=>{const t=(0,eA.k)(e,n);return t instanceof Xv.cj?e:t})();return new yA(s,{docsPath:t,...n})}(n,{...t,account:s,chain:e.chain})}}async function wA(e,{address:t,blockTag:n="latest",blockNumber:s}){const r=await e.request({method:"eth_getTransactionCount",params:[t,s?(0,Wv.eC)(s):n]});return(0,Hv.ly)(r)}async function vA(e,t){const{account:n=e.account,chain:s,gas:r,nonce:i,type:o}=t;if(!n)throw new Yv;const a=(0,Dv.T)(n),c=await dA(e,{blockTag:"latest"}),l={...t,from:a.address};if(void 0===i&&(l.nonce=await wA(e,{address:a.address,blockTag:"pending"})),void 0===o)try{l.type=function(e){if(e.type)return e.type;if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new Zv.j3({transaction:e})}(l)}catch{l.type="bigint"==typeof c.baseFeePerGas?"eip1559":"legacy"}if("eip1559"===l.type){const{maxFeePerGas:n,maxPriorityFeePerGas:r}=await gA(e,{block:c,chain:s,request:l});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<r)throw new aA({maxPriorityFeePerGas:r});l.maxPriorityFeePerGas=r,l.maxFeePerGas=n}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new oA;const{gasPrice:n}=await gA(e,{block:c,chain:s,request:l,type:"legacy"});l.gasPrice=n}return void 0===r&&(l.gas=await bA(e,{...l,account:{address:a.address,type:"json-rpc"}})),(0,sA.F)(l),l}async function AA(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]})}async function _A(e,t){const{account:n=e.account,chain:s=e.chain,accessList:r,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d,...f}=t;if(!n)throw new Yv({docsPath:"/docs/actions/wallet/sendTransaction"});const p=(0,Dv.T)(n);try{let n;if((0,sA.F)(t),null!==s&&(n=await zv(e),(0,rv.qg)({currentChainId:n,chain:s})),"local"===p.type){const t=await vA(e,{account:p,accessList:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d,...f});n||(n=await zv(e));const g=s?.serializers?.transaction,m=await p.signTransaction({...t,chainId:n},{serializer:g});return await AA(e,{serializedTransaction:m})}const g=s?.formatters?.transactionRequest?.format||nA.tG,m=g({...(0,tA.K)(f,{format:g}),accessList:r,data:i,from:p.address,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d});return await e.request({method:"eth_sendTransaction",params:[m]})}catch(e){throw function(e,{docsPath:t,...n}){const s=(()=>{const t=(0,eA.k)(e,n);return t instanceof Xv.cj?e:t})();return new Zv.mk(s,{docsPath:t,...n})}(e,{...t,account:p,chain:t.chain||void 0})}}var kA=n(5102),EA=n(6070),xA=n(6087),CA=n(9321),SA=n(9135);const PA=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,TA=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function IA({domain:e,message:t,primaryType:n,types:s}){const r=s,i=(e,t)=>{for(const n of e){const{name:e,type:s}=n,o=s,a=t[e],c=o.match(TA);if(c&&("number"==typeof a||"bigint"==typeof a)){const[e,t,n]=c;(0,Wv.eC)(a,{signed:"int"===t,size:parseInt(n)/8})}if("address"===o&&"string"==typeof a&&!(0,CA.U)(a))throw new xA.b({address:a});const l=o.match(PA);if(l){const[e,t]=l;if(t&&(0,SA.d)(a)!==parseInt(t))throw new qv.KY({expectedSize:parseInt(t),givenSize:(0,SA.d)(a)})}const u=r[o];u&&i(u,a)}};if(r.EIP712Domain&&e&&i(r.EIP712Domain,e),"EIP712Domain"!==n){const e=r[n];i(e,t)}}function OA({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}var NA=n(7799);function jA(e){return{addChain:t=>async function(e,{chain:t}){const{id:n,name:s,nativeCurrency:r,rpcUrls:i,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:(0,Wv.eC)(n),chainName:s,nativeCurrency:r,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map((({url:e})=>e)):void 0}]})}(e,t),deployContract:t=>function(e,{abi:t,args:n,bytecode:s,...r}){return _A(e,{...r,data:Qv({abi:t,args:n,bytecode:s})})}(e,t),getAddresses:()=>async function(e){return(await e.request({method:"eth_accounts"})).map((e=>(0,fv.x)(e)))}(e),getChainId:()=>zv(e),getPermissions:()=>async function(e){return await e.request({method:"wallet_getPermissions"})}(e),prepareTransactionRequest:t=>vA(e,t),requestAddresses:()=>async function(e){return(await e.request({method:"eth_requestAccounts"})).map((e=>(0,fv.K)(e)))}(e),requestPermissions:t=>async function(e,t){return e.request({method:"wallet_requestPermissions",params:[t]})}(e,t),sendRawTransaction:t=>AA(e,t),sendTransaction:t=>_A(e,t),signMessage:t=>async function(e,{account:t=e.account,message:n}){if(!t)throw new Yv({docsPath:"/docs/actions/wallet/signMessage"});const s=(0,Dv.T)(t);if("local"===s.type)return s.signMessage({message:n});const r="string"==typeof n?(0,Wv.$G)(n):n.raw instanceof Uint8Array?(0,Wv.NC)(n.raw):n.raw;return e.request({method:"personal_sign",params:[r,s.address]})}(e,t),signTransaction:t=>async function(e,t){const{account:n=e.account,chain:s=e.chain,...r}=t;if(!n)throw new Yv({docsPath:"/docs/actions/wallet/signTransaction"});const i=(0,Dv.T)(n);(0,sA.F)({account:i,...t});const o=await zv(e);null!==s&&(0,rv.qg)({currentChainId:o,chain:s});const a=s?.formatters||e.chain?.formatters,c=a?.transactionRequest?.format||nA.tG;return"local"===i.type?i.signTransaction({chainId:o,...r},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(r),chainId:(0,Wv.eC)(o),from:i.address}]})}(e,t),signTypedData:t=>async function(e,{account:t=e.account,domain:n,message:s,primaryType:r,types:i}){if(!t)throw new Yv({docsPath:"/docs/actions/wallet/signTypedData"});const o=(0,Dv.T)(t),a={EIP712Domain:OA({domain:n}),...i};if(IA({domain:n,message:s,primaryType:r,types:a}),"local"===o.type)return o.signTypedData({domain:n,primaryType:r,types:a,message:s});const c=(0,EA.P)({domain:n??{},primaryType:r,types:a,message:s},((e,t)=>(0,kA.v)(t)?t.toLowerCase():t));return e.request({method:"eth_signTypedData_v4",params:[o.address,c]})}(e,t),switchChain:t=>async function(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,Wv.eC)(t)}]})}(e,t),watchAsset:t=>async function(e,t){return await e.request({method:"wallet_watchAsset",params:t})}(e,t),writeContract:t=>async function(e,{abi:t,address:n,args:s,dataSuffix:r,functionName:i,...o}){const a=(0,NA.R)({abi:t,args:s,functionName:i});return await _A(e,{data:`${a}${r?r.replace("0x",""):""}`,to:n,...o})}(e,t)}}function LA(e){const{key:t="wallet",name:n="Wallet Client",transport:s}=e;return Gv({...e,key:t,name:n,transport:e=>s({...e,retryCount:0}),type:"walletClient"}).extend(jA)}async function UA(e){return new Promise((t=>setTimeout(t,e)))}function RA(e,{delay:t=100,retryCount:n=2,shouldRetry:s=(()=>!0)}={}){return new Promise(((r,i)=>{const o=async({count:a=0}={})=>{try{const t=await e();r(t)}catch(e){if(a<n&&await s({count:a,error:e}))return(async({error:e})=>{const n="function"==typeof t?t({count:a,error:e}):t;n&&await UA(n),o({count:a+1})})({error:e});i(e)}};o()}))}const DA=e=>"code"in e?-1!==e.code&&-32004!==e.code&&-32005!==e.code&&-32042!==e.code&&-32603!==e.code:!!(e instanceof gv.Gg&&e.status)&&(403!==e.status&&408!==e.status&&413!==e.status&&429!==e.status&&500!==e.status&&502!==e.status&&503!==e.status&&504!==e.status);function MA(e,{retryDelay:t=150,retryCount:n=3}={}){return async s=>RA((async()=>{try{return await e(s)}catch(e){const t=e;switch(t.code){case bv.code:throw new bv(t);case wv.code:throw new wv(t);case vv.code:throw new vv(t);case Av.code:throw new Av(t);case _v.code:throw new _v(t);case kv.code:throw new kv(t);case Ev.code:throw new Ev(t);case xv.code:throw new xv(t);case Cv.code:throw new Cv(t);case Sv.code:throw new Sv(t);case Pv.code:throw new Pv(t);case Tv.code:throw new Tv(t);case Iv.code:throw new Iv(t);case Ov.code:throw new Ov(t);case Nv.code:throw new Nv(t);case jv.code:throw new jv(t);case Lv.code:throw new Lv(t);case Uv.code:throw new Uv(t);case 5e3:throw new Iv(t);default:if(e instanceof pv.G)throw e;throw new Rv(t)}}}),{delay:({count:e,error:n})=>{if(n&&n instanceof gv.Gg){const e=n?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*parseInt(e)}return~~(1<<e)*t},retryCount:n,shouldRetry:({error:e})=>!DA(e)})}function BA({key:e,name:t,request:n,retryCount:s=3,retryDelay:r=150,timeout:i,type:o},a){return{config:{key:e,name:t,request:n,retryCount:s,retryDelay:r,timeout:i,type:o},request:MA(n,{retryCount:s,retryDelay:r}),value:a}}function FA(e,t={}){const{key:n="custom",name:s="Custom Provider",retryDelay:r}=t;return({retryCount:i})=>BA({key:n,name:s,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:r,type:"custom"})}var $A,GA=class extends dv{constructor({chains:e,options:t}={}){const n={shimDisconnect:!0,getProvider(){if("undefined"==typeof window)return;const e=window.ethereum;return e?.providers?e.providers[0]:e},...t};super({chains:e,options:n}),this.id="injected",lv(this,$A,void 0),this.shimDisconnectKey=`${this.id}.shimDisconnect`,this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,fv.K)(e[0])})},this.onChainChanged=e=>{const t=nv(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=async e=>{if(1013===e.code){if(await this.getProvider()){if(await this.getAccount())return}}this.emit("disconnect"),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey)};const s=n.getProvider();if("string"==typeof n.name)this.name=n.name;else if(s){const e=function(e){if(!e)return"Injected";const t=e=>e.isApexWallet?"Apex Wallet":e.isAvalanche?"Core Wallet":e.isBackpack?"Backpack":e.isBifrost?"Bifrost Wallet":e.isBitKeep?"BitKeep":e.isBitski?"Bitski":e.isBlockWallet?"BlockWallet":e.isBraveWallet?"Brave Wallet":e.isCoin98?"Coin98 Wallet":e.isCoinbaseWallet?"Coinbase Wallet":e.isDawn?"Dawn Wallet":e.isDefiant?"Defiant":e.isDesig?"Desig Wallet":e.isEnkrypt?"Enkrypt":e.isExodus?"Exodus":e.isFordefi?"Fordefi":e.isFrame?"Frame":e.isFrontier?"Frontier Wallet":e.isGamestop?"GameStop Wallet":e.isHaqqWallet?"HAQQ Wallet":e.isHyperPay?"HyperPay Wallet":e.isImToken?"ImToken":e.isHaloWallet?"Halo Wallet":e.isKuCoinWallet?"KuCoin Wallet":e.isMathWallet?"MathWallet":e.isNovaWallet?"Nova Wallet":e.isOkxWallet||e.isOKExWallet?"OKX Wallet":e.isOneInchIOSWallet||e.isOneInchAndroidWallet?"1inch Wallet":e.isOpera?"Opera":e.isPhantom?"Phantom":e.isPortal?"Ripio Portal":e.isRabby?"Rabby Wallet":e.isRainbow?"Rainbow":e.isStatus?"Status":e.isSubWallet?"SubWallet":e.isTalisman?"Talisman":e.isTally?"Taho":e.isTokenPocket?"TokenPocket":e.isTokenary?"Tokenary":e.isTrust||e.isTrustWallet?"Trust Wallet":e.isTTWallet?"TTWallet":e.isXDEFI?"XDEFI Wallet":e.isZeal?"Zeal":e.isZerion?"Zerion":e.isMetaMask?"MetaMask":void 0;if(e.providers?.length){const n=new Set;let s=1;for(const r of e.providers){let e=t(r);e||(e=`Unknown Wallet #${s}`,s+=1),n.add(e)}const r=[...n];return r.length?r:r[0]??"Injected"}return t(e)??"Injected"}(s);n.name?this.name=n.name(e):this.name="string"==typeof e?e:e[0]}else this.name="Injected";this.ready=!!s}async connect({chainId:e}={}){try{const t=await this.getProvider();if(!t)throw new tv;t.on&&(t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect)),this.emit("message",{type:"connecting"});const n=await t.request({method:"eth_requestAccounts"}),s=(0,fv.K)(n[0]);let r=await this.getChainId(),i=this.isChainUnsupported(r);if(e&&r!==e){r=(await this.switchChain(e)).id,i=this.isChainUnsupported(r)}return this.options.shimDisconnect&&this.storage?.setItem(this.shimDisconnectKey,!0),{account:s,chain:{id:r,unsupported:i}}}catch(e){if(this.isUserRejectedRequestError(e))throw new Iv(e);if(-32002===e.code)throw new xv(e);throw e}}async disconnect(){const e=await this.getProvider();e?.removeListener&&(e.removeListener("accountsChanged",this.onAccountsChanged),e.removeListener("chainChanged",this.onChainChanged),e.removeListener("disconnect",this.onDisconnect),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey))}async getAccount(){const e=await this.getProvider();if(!e)throw new tv;const t=await e.request({method:"eth_accounts"});return(0,fv.K)(t[0])}async getChainId(){const e=await this.getProvider();if(!e)throw new tv;return e.request({method:"eth_chainId"}).then(nv)}async getProvider(){const e=this.options.getProvider();return e&&uv(this,$A,e),cv(this,$A)}async getWalletClient({chainId:e}={}){const[t,n]=await Promise.all([this.getProvider(),this.getAccount()]),s=this.chains.find((t=>t.id===e));if(!t)throw new Error("provider is required.");return LA({account:n,chain:s,transport:FA(t)})}async isAuthorized(){try{if(this.options.shimDisconnect&&!this.storage?.getItem(this.shimDisconnectKey))return!1;if(!await this.getProvider())throw new tv;return!!await this.getAccount()}catch{return!1}}async switchChain(e){const t=await this.getProvider();if(!t)throw new tv;const n=(0,Wv.eC)(e);try{return await Promise.all([t.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}),new Promise((t=>this.on("change",(({chain:n})=>{n?.id===e&&t()}))))]),this.chains.find((t=>t.id===e))??{id:e,name:`Chain ${n}`,network:`${n}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}}}catch(s){const r=this.chains.find((t=>t.id===e));if(!r)throw new ev({chainId:e,connectorId:this.id});if(4902===s.code||4902===s?.data?.originalError?.code)try{await t.request({method:"wallet_addEthereumChain",params:[{chainId:n,chainName:r.name,nativeCurrency:r.nativeCurrency,rpcUrls:[r.rpcUrls.public?.http[0]??""],blockExplorerUrls:this.getBlockExplorerUrls(r)}]});if(await this.getChainId()!==e)throw new Iv(new Error("User rejected switch after adding network."));return r}catch(e){throw new Iv(e)}if(this.isUserRejectedRequestError(s))throw new Iv(s);throw new Uv(s)}}async watchAsset({address:e,decimals:t=18,image:n,symbol:s}){const r=await this.getProvider();if(!r)throw new tv;return r.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e,decimals:t,image:n,symbol:s}}})}isUserRejectedRequestError(e){return 4001===e.code}};$A=new WeakMap;var HA=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},zA=(e,t,n)=>(HA(e,t,"read from private field"),n?n.call(e):t.get(e)),WA=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},qA=(e,t,n,s)=>(HA(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),KA=n(6693),VA=n(7210),JA=n(1836),QA=n(1746),YA=n(5980);function XA(e,t){if(!(e instanceof pv.G))return!1;const n=e.walk((e=>e instanceof YA.Lu));return n instanceof YA.Lu&&("ResolverNotFound"===n.data?.errorName||("ResolverWildcardNotSupported"===n.data?.errorName||(!!n.reason?.includes("Wildcard on non-extended resolvers is not supported")||"reverse"===t&&n.reason===QA.$[50])))}var ZA=n(1187),e_=n(4813);function t_(e){if(66!==e.length)return null;if(0!==e.indexOf("["))return null;if(65!==e.indexOf("]"))return null;const t=`0x${e.slice(1,65)}`;return(0,kA.v)(t)?t:null}function n_(e){let t=new Uint8Array(32).fill(0);if(!e)return(0,Wv.ci)(t);const n=e.split(".");for(let e=n.length-1;e>=0;e-=1){const s=t_(n[e]),r=s?(0,ZA.O0)(s):(0,e_.w)((0,ZA.qX)(n[e]),"bytes");t=(0,e_.w)((0,Kv.zo)([t,r]),"bytes")}return(0,Wv.ci)(t)}function s_(e){return`[${e.slice(2)}]`}function r_(e){const t=new Uint8Array(32).fill(0);return e?t_(e)||(0,e_.w)((0,ZA.qX)(e)):(0,Wv.ci)(t)}function i_(e){const t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);const n=new Uint8Array((0,ZA.qX)(t).byteLength+2);let s=0;const r=t.split(".");for(let e=0;e<r.length;e++){let t=(0,ZA.qX)(r[e]);t.byteLength>255&&(t=(0,ZA.qX)(s_(r_(r[e])))),n[s]=t.length,n.set(t,s+1),s+=t.length+1}return n.byteLength!==s+1?n.slice(0,s+1):n}const o_=3;function a_(e,{abi:t,address:n,args:s,docsPath:r,functionName:i,sender:o}){const{code:a,data:c,message:l,shortMessage:u}=e instanceof YA.VQ?e:e instanceof pv.G?e.walk((e=>"data"in e))||e.walk():{},h=e instanceof qv.wb?new YA.Dk({functionName:i}):[o_,_v.code].includes(a)&&(c||l||u)?new YA.Lu({abi:t,data:"object"==typeof c?c.data:c,functionName:i,message:u??l}):e;return new YA.uq(h,{abi:t,args:s,contractAddress:n,docsPath:r,functionName:i,sender:o})}var c_=n(6143);async function l_(e,{abi:t,address:n,args:s,functionName:r,...i}){const o=(0,NA.R)({abi:t,args:s,functionName:r});try{const{data:a}=await(0,c_.R)(e,{data:o,to:n,...i});return(0,VA.k)({abi:t,args:s,functionName:r,data:a||"0x"})}catch(e){throw a_(e,{abi:t,address:n,args:s,docsPath:"/docs/contract/readContract",functionName:r})}}class u_ extends pv.G{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class h_ extends pv.G{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class d_ extends pv.G{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class f_ extends pv.G{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const p_=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,g_=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,m_=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,y_=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;function b_(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function w_({uri:e,gatewayUrls:t}){const n=m_.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const s=b_(t?.ipfs,"https://ipfs.io"),r=b_(t?.arweave,"https://arweave.net"),i=e.match(p_),{protocol:o,subpath:a,target:c,subtarget:l=""}=i?.groups||{},u="ipns:/"===o||"ipns/"===a,h="ipfs:/"===o||"ipfs/"===a||g_.test(e);if(e.startsWith("http")&&!u&&!h){let n=e;return t?.arweave&&(n=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:n,isOnChain:!1,isEncoded:!1}}if((u||h)&&c)return{uri:`${s}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if("ar:/"===o&&c)return{uri:`${r}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let d=e.replace(y_,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new d_({uri:e})}function v_(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new u_({data:e});return e.image||e.image_url||e.image_data}async function A_({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:s}=w_({uri:t,gatewayUrls:e});if(s)return n;const r=await async function(e){try{const t=await fetch(e,{method:"HEAD"});if(200===t.status){const e=t.headers.get("content-type");return e?.startsWith("image/")}return!1}catch(t){return("object"!=typeof t||void 0===t.response)&&!!globalThis.hasOwnProperty("Image")&&new Promise((t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e}))}}(n);if(r)return n;throw new d_({uri:t})}async function __(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?async function(e,{gatewayUrls:t,record:n}){const s=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,s,r]=t.split("/"),[i,o]=n.split(":"),[a,c]=s.split(":");if(!i||"eip155"!==i.toLowerCase())throw new h_({reason:"Only EIP-155 supported"});if(!o)throw new h_({reason:"Chain ID not found"});if(!c)throw new h_({reason:"Contract address not found"});if(!r)throw new h_({reason:"Token ID not found"});if(!a)throw new h_({reason:"ERC namespace not found"});return{chainID:parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:r}}(n),r=await async function(e,{nft:t}){if("erc721"===t.namespace)return l_(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return l_(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new f_({namespace:t.namespace})}(e,{nft:s}),{uri:i,isOnChain:o,isEncoded:a}=w_({uri:r,gatewayUrls:t});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const e=a?atob(i.replace("data:application/json;base64,","")):i;return A_({uri:v_(JSON.parse(e)),gatewayUrls:t})}let c=s.tokenID;"erc1155"===s.namespace&&(c=c.replace("0x","").padStart(64,"0"));return async function({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then((e=>e.json()));return await A_({gatewayUrls:e,uri:v_(n)})}catch{throw new d_({uri:t})}}({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,c)})}(e,{gatewayUrls:t,record:n}):A_({uri:n,gatewayUrls:t})}async function k_(e,{blockNumber:t,blockTag:n,name:s,key:r,universalResolverAddress:i}){let o=i;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=(0,rv.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=await l_(e,{address:o,abi:KA.k3,functionName:"resolve",args:[(0,Wv.NC)(i_(s)),(0,NA.R)({abi:KA.nZ,functionName:"text",args:[n_(s),r]})],blockNumber:t,blockTag:n});if("0x"===i[0])return null;const a=(0,VA.k)({abi:KA.nZ,functionName:"text",data:i[0]});return""===a?null:a}catch(e){if(XA(e,"resolve"))return null;throw e}}function E_(e,{method:t}){const n={};return"fallback"===e.transport.type&&e.transport.onResponse?.((({method:e,response:s,status:r,transport:i})=>{"success"===r&&t===e&&(n[s]=i.request)})),t=>n[t]||e.request}class x_ extends pv.G{constructor(e){super(`Filter type "${e}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}var C_=n(4092),S_=n(522),P_=n(840);function T_({abi:e,eventName:t,args:n}){let s=e[0];if(t&&(s=(0,P_.m)({abi:e,args:n,name:t}),!s))throw new qv.mv(t,{docsPath:"/docs/contract/encodeEventTopics"});if("event"!==s.type)throw new qv.mv(void 0,{docsPath:"/docs/contract/encodeEventTopics"});const r=(0,S_.t)(s),i=(0,C_.e)(r);let o=[];if(n&&"inputs"in s){const e=s.inputs?.filter((e=>"indexed"in e&&e.indexed)),t=Array.isArray(n)?n:Object.values(n).length>0?e?.map((e=>n[e.name]))??[]:[];t.length>0&&(o=e?.map(((e,n)=>Array.isArray(t[n])?t[n].map(((s,r)=>I_({param:e,value:t[n][r]}))):t[n]?I_({param:e,value:t[n]}):null))??[])}return[i,...o]}function I_({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,e_.w)((0,ZA.O0)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new x_(e.type);return(0,Vv.E)([e],[t])}async function O_(e,{address:t,abi:n,args:s,eventName:r,fromBlock:i,strict:o,toBlock:a}){const c=E_(e,{method:"eth_newFilter"}),l=r?T_({abi:n,args:s,eventName:r}):void 0,u=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?(0,Wv.eC)(i):i,toBlock:"bigint"==typeof a?(0,Wv.eC)(a):a,topics:l}]});return{abi:n,args:s,eventName:r,id:u,request:c(u),strict:o,type:"event"}}async function N_(e,{address:t,args:n,event:s,events:r,fromBlock:i,strict:o,toBlock:a}={}){const c=r??(s?[s]:void 0),l=E_(e,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap((e=>T_({abi:[e],eventName:e.name,args:n})))],s&&(u=u[0]));const h=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?(0,Wv.eC)(i):i,toBlock:"bigint"==typeof a?(0,Wv.eC)(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:s?s.name:void 0,fromBlock:i,id:h,request:l(h),strict:o,toBlock:a,type:"event"}}async function j_(e){const t=E_(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}const L_=new Map,U_=new Map;async function R_(e,{cacheKey:t,cacheTime:n=1/0}){const s=function(e){const t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:n=>t.set(e,n)}),n=t(e,L_),s=t(e,U_);return{clear:()=>{n.clear(),s.clear()},promise:n,response:s}}(t),r=s.response.get();if(r&&n>0){if((new Date).getTime()-r.created.getTime()<n)return r.data}let i=s.promise.get();i||(i=e(),s.promise.set(i));try{const e=await i;return s.response.set({created:new Date,data:e}),e}finally{s.promise.clear()}}const D_=e=>`blockNumber.${e}`;async function M_(e,{cacheTime:t=e.cacheTime,maxAge:n}={}){const s=await R_((()=>e.request({method:"eth_blockNumber"})),{cacheKey:D_(e.uid),cacheTime:n??t});return BigInt(s)}var B_=n(4450);const F_="/docs/contract/decodeEventLog";function $_({abi:e,data:t,strict:n,topics:s}){const r=n??!0,[i,...o]=s;if(!i)throw new qv.FM({docsPath:F_});const a=e.find((e=>"event"===e.type&&i===(0,C_.e)((0,S_.t)(e))));if(!a||!("name"in a)||"event"!==a.type)throw new qv.lC(i,{docsPath:F_});const{name:c,inputs:l}=a,u=l?.some((e=>!("name"in e&&e.name)));let h=u?[]:{};const d=l.filter((e=>"indexed"in e&&e.indexed));if(o.length>0)for(let e=0;e<d.length;e++){const t=d[e],n=o[e];if(!n)throw new qv.Gy({abiItem:a,param:t});h[t.name||e]=G_({param:t,value:n})}const f=l.filter((e=>!("indexed"in e&&e.indexed)));if(f.length>0)if(t&&"0x"!==t)try{const e=(0,B_.r)(f,t);if(e)if(u)h=[...h,...e];else for(let t=0;t<f.length;t++)h[f[t].name]=e[t]}catch(e){if(r){if(e instanceof qv.xB)throw new qv.SM({abiItem:a,data:e.data,params:e.params,size:e.size});throw e}}else if(r)throw new qv.SM({abiItem:a,data:"0x",params:f,size:0});return{eventName:c,args:Object.values(h).length>0?h:void 0}}function G_({param:e,value:t}){if("string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))return t;return((0,B_.r)([e],t)||[])[0]}function H_(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function z_(e,{address:t,blockHash:n,fromBlock:s,toBlock:r,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let h,d=[];return u&&(d=[u.flatMap((e=>T_({abi:[e],eventName:e.name,args:a})))],i&&(d=d[0])),h=n?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof s?(0,Wv.eC)(s):s,toBlock:"bigint"==typeof r?(0,Wv.eC)(r):r}]}),h.map((e=>{try{const{eventName:t,args:n}=u?$_({abi:u,data:e.data,topics:e.topics,strict:l}):{eventName:void 0,args:void 0};return H_(e,{args:n,eventName:t})}catch(t){let n,s;if(t instanceof qv.SM||t instanceof qv.Gy){if(l)return;n=t.abiItem.name,s=t.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return H_(e,{args:s?[]:{},eventName:n})}})).filter(Boolean)}async function W_(e,{abi:t,address:n,args:s,blockHash:r,eventName:i,fromBlock:o,toBlock:a,strict:c}){const l=i?(0,P_.m)({abi:t,name:i}):void 0;return z_(e,{address:n,args:s,blockHash:r,event:l,events:l?void 0:t.filter((e=>"event"===e.type)),fromBlock:o,toBlock:a,strict:c})}async function q_(e,{blockCount:t,blockNumber:n,blockTag:s="latest",rewardPercentiles:r}){const i=n?(0,Wv.eC)(n):void 0;return function(e){return{baseFeePerGas:e.baseFeePerGas.map((e=>BigInt(e))),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map((e=>e.map((e=>BigInt(e)))))}}(await e.request({method:"eth_feeHistory",params:[(0,Wv.eC)(t),i||s,r]}))}async function K_(e,{filter:t}){const n="strict"in t&&t.strict;return(await t.request({method:"eth_getFilterChanges",params:[t.id]})).map((e=>{if("string"==typeof e)return e;try{const{eventName:s,args:r}="abi"in t&&t.abi?$_({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return H_(e,{args:r,eventName:s})}catch(n){let s,r;if(n instanceof qv.SM||n instanceof qv.Gy){if("strict"in t&&t.strict)return;s=n.abiItem.name,r=n.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return H_(e,{args:r?[]:{},eventName:s})}})).filter(Boolean)}async function V_(e,{blockHash:t,blockNumber:n,blockTag:s,hash:r,index:i}){const o=s||"latest",a=void 0!==n?(0,Wv.eC)(n):void 0;let c=null;if(r?c=await e.request({method:"eth_getTransactionByHash",params:[r]}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,(0,Wv.eC)(i)]}):(a||o)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,(0,Wv.eC)(i)]})),!c)throw new Zv.Bh({blockHash:t,blockNumber:n,blockTag:o,hash:r,index:i});return(e.chain?.formatters?.transaction?.format||uA)(c)}const J_={"0x0":"reverted","0x1":"success"};function Q_(e){return{...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>H_(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?(0,Hv.ly)(e.transactionIndex):null,status:e.status?J_[e.status]:null,type:e.type?lA[e.type]||e.type:null}}async function Y_(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]});if(!n)throw new Zv.Yb({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Q_)(n)}async function X_(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}const Z_="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";BigInt(0),BigInt(1),BigInt(2);async function ek(e,{address:t,hash:n,signature:s,...r}){const i=(0,kA.v)(s)?s:(0,Wv.NC)(s);try{const{data:s}=await(0,c_.R)(e,{data:Qv({abi:KA.$o,args:[t,n,i],bytecode:Z_}),...r});return o=s??"0x0",a="0x1",function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}((0,kA.v)(o)?(0,ZA.O0)(o):o,(0,kA.v)(a)?(0,ZA.O0)(a):a)}catch(e){if(e instanceof YA.cg)return!1;throw e}var o,a}async function tk(e,{address:t,message:n,signature:s,...r}){const i=function(e,t){const n="string"==typeof e?(0,ZA.qX)(e):e.raw instanceof Uint8Array?e.raw:(0,ZA.O0)(e.raw),s=(0,ZA.qX)(`Ethereum Signed Message:\n${n.length}`);return(0,e_.w)((0,Kv.zo)([s,n]),t)}(n);return ek(e,{address:t,hash:i,signature:s,...r})}function nk({domain:e,message:t,primaryType:n,types:s}){const r=void 0===e?{}:e,i={EIP712Domain:OA({domain:r}),...s};IA({domain:r,message:t,primaryType:n,types:i});const o=["0x1901"];return r&&o.push(function({domain:e,types:t}){return sk({data:e,primaryType:"EIP712Domain",types:t})}({domain:r,types:i})),"EIP712Domain"!==n&&o.push(sk({data:t,primaryType:n,types:i})),(0,e_.w)((0,Kv.zo)(o))}function sk({data:e,primaryType:t,types:n}){const s=rk({data:e,primaryType:t,types:n});return(0,e_.w)(s)}function rk({data:e,primaryType:t,types:n}){const s=[{type:"bytes32"}],r=[ik({primaryType:t,types:n})];for(const i of n[t]){const[t,o]=ak({types:n,name:i.name,type:i.type,value:e[i.name]});s.push(t),r.push(o)}return(0,Vv.E)(s,r)}function ik({primaryType:e,types:t}){const n=(0,Wv.NC)(function({primaryType:e,types:t}){let n="";const s=ok({primaryType:e,types:t});s.delete(e);const r=[e,...Array.from(s).sort()];for(const e of r)n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return n}({primaryType:e,types:t}));return(0,e_.w)(n)}function ok({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u),r=s?.[0];if(n.has(r)||void 0===t[r])return n;n.add(r);for(const e of t[r])ok({primaryType:e.type,types:t},n);return n}function ak({types:e,name:t,type:n,value:s}){if(void 0!==e[n])return[{type:"bytes32"},(0,e_.w)(rk({data:s,primaryType:n,types:e}))];if("bytes"===n){return s=`0x${(s.length%2?"0":"")+s.slice(2)}`,[{type:"bytes32"},(0,e_.w)(s)]}if("string"===n)return[{type:"bytes32"},(0,e_.w)((0,Wv.NC)(s))];if(n.lastIndexOf("]")===n.length-1){const r=n.slice(0,n.lastIndexOf("[")),i=s.map((n=>ak({name:t,type:r,types:e,value:n})));return[{type:"bytes32"},(0,e_.w)((0,Vv.E)(i.map((([e])=>e)),i.map((([,e])=>e))))]}return[{type:n},s]}const ck=new Map,lk=new Map;let uk=0;function hk(e,t,n){const s=++uk,r=()=>ck.get(e)||[],i=()=>{const t=lk.get(e);1===r().length&&t&&t(),(()=>{const t=r();ck.set(e,t.filter((e=>e.id!==s)))})()},o=r();if(ck.set(e,[...o,{id:s,fns:t}]),o&&o.length>0)return i;const a={};for(const e in t)a[e]=(...t)=>{const n=r();0!==n.length&&n.forEach((n=>n.fns[e]?.(...t)))};const c=n(a);return"function"==typeof c&&lk.set(e,c),i}function dk(e,{emitOnBegin:t,initialWaitTime:n,interval:s}){let r=!0;const i=()=>r=!1;return(async()=>{let o;t&&(o=await e({unpoll:i}));const a=await(n?.(o))??s;await UA(a);const c=async()=>{r&&(await e({unpoll:i}),await UA(s),c())};c()})(),i}function fk(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:s,onError:r,poll:i,pollingInterval:o=e.pollingInterval}){let a;return(void 0!==i?i:"webSocket"!==e.transport.type)?hk((0,EA.P)(["watchBlockNumber",e.uid,t,n,o]),{onBlockNumber:s,onError:r},(s=>dk((async()=>{try{const t=await M_(e,{cacheTime:0});if(a){if(t===a)return;if(t-a>1&&n)for(let e=a+1n;e<t;e++)s.onBlockNumber(e,a),a=e}(!a||t>a)&&(s.onBlockNumber(t,a),a=t)}catch(e){s.onError?.(e)}}),{emitOnBegin:t,interval:o}))):(()=>{let t=!0,n=()=>t=!1;return(async()=>{try{const{unsubscribe:i}=await e.transport.subscribe({params:["newHeads"],onData(e){if(!t)return;const n=(0,Hv.y_)(e.result?.number);s(n,a),a=n},onError(e){r?.(e)}});n=i,t||n()}catch(e){r?.(e)}})(),n})()}function pk(e){return{call:t=>(0,c_.R)(e,t),createBlockFilter:()=>async function(e){const t=E_(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}(e),createContractEventFilter:t=>O_(e,t),createEventFilter:t=>N_(e,t),createPendingTransactionFilter:()=>j_(e),estimateContractGas:t=>async function(e,{abi:t,address:n,args:s,functionName:r,...i}){const o=(0,NA.R)({abi:t,args:s,functionName:r});try{return await bA(e,{data:o,to:n,...i})}catch(e){const o=i.account?(0,Dv.T)(i.account):void 0;throw a_(e,{abi:t,address:n,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:r,sender:o?.address})}}(e,t),estimateGas:t=>bA(e,t),getBalance:t=>async function(e,{address:t,blockNumber:n,blockTag:s="latest"}){const r=n?(0,Wv.eC)(n):void 0,i=await e.request({method:"eth_getBalance",params:[t,r||s]});return BigInt(i)}(e,t),getBlock:t=>dA(e,t),getBlockNumber:t=>M_(e,t),getBlockTransactionCount:t=>async function(e,{blockHash:t,blockNumber:n,blockTag:s="latest"}={}){const r=void 0!==n?(0,Wv.eC)(n):void 0;let i;return i=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[r||s]}),(0,Hv.ly)(i)}(e,t),getBytecode:t=>async function(e,{address:t,blockNumber:n,blockTag:s="latest"}){const r=void 0!==n?(0,Wv.eC)(n):void 0,i=await e.request({method:"eth_getCode",params:[t,r||s]});if("0x"!==i)return i}(e,t),getChainId:()=>zv(e),getContractEvents:t=>W_(e,t),getEnsAddress:t=>async function(e,{blockNumber:t,blockTag:n,coinType:s,name:r,universalResolverAddress:i}){let o=i;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=(0,rv.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=(0,NA.R)({abi:KA.X$,functionName:"addr",...null!=s?{args:[n_(r),BigInt(s)]}:{args:[n_(r)]}}),a=await l_(e,{address:o,abi:KA.k3,functionName:"resolve",args:[(0,Wv.NC)(i_(r)),i],blockNumber:t,blockTag:n});if("0x"===a[0])return null;const c=(0,VA.k)({abi:KA.X$,args:null!=s?[n_(r),BigInt(s)]:void 0,functionName:"addr",data:a[0]});return"0x"===c||"0x00"===(0,JA.f)(c)?null:c}catch(e){if(XA(e,"resolve"))return null;throw e}}(e,t),getEnsAvatar:t=>async function(e,{blockNumber:t,blockTag:n,gatewayUrls:s,name:r,universalResolverAddress:i}){const o=await k_(e,{blockNumber:t,blockTag:n,key:"avatar",name:r,universalResolverAddress:i});if(!o)return null;try{return await __(e,{record:o,gatewayUrls:s})}catch{return null}}(e,t),getEnsName:t=>async function(e,{address:t,blockNumber:n,blockTag:s,universalResolverAddress:r}){let i=r;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=(0,rv.LI)({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const o=`${t.toLowerCase().substring(2)}.addr.reverse`;try{return(await l_(e,{address:i,abi:KA.du,functionName:"reverse",args:[(0,Wv.NC)(i_(o))],blockNumber:n,blockTag:s}))[0]}catch(e){if(XA(e,"reverse"))return null;throw e}}(e,t),getEnsResolver:t=>async function(e,{blockNumber:t,blockTag:n,name:s,universalResolverAddress:r}){let i=r;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=(0,rv.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[o]=await l_(e,{address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,Wv.NC)(i_(s))],blockNumber:t,blockTag:n});return o}(e,t),getEnsText:t=>k_(e,t),getFeeHistory:t=>q_(e,t),estimateFeesPerGas:t=>async function(e,t){return gA(e,t)}(e,t),getFilterChanges:e=>K_(0,e),getFilterLogs:e=>async function(e,{filter:t}){const n=t.strict??!1;return(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map((e=>{try{const{eventName:s,args:r}="abi"in t&&t.abi?$_({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return H_(e,{args:r,eventName:s})}catch(n){let s,r;if(n instanceof qv.SM||n instanceof qv.Gy){if("strict"in t&&t.strict)return;s=n.abiItem.name,r=n.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return H_(e,{args:r?[]:{},eventName:s})}})).filter(Boolean)}(0,e),getGasPrice:()=>fA(e),getLogs:t=>z_(e,t),estimateMaxPriorityFeePerGas:t=>async function(e,t){return pA(e,t)}(e,t),getStorageAt:t=>async function(e,{address:t,blockNumber:n,blockTag:s="latest",slot:r}){const i=void 0!==n?(0,Wv.eC)(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,r,i||s]})}(e,t),getTransaction:t=>V_(e,t),getTransactionConfirmations:t=>async function(e,{hash:t,transactionReceipt:n}){const[s,r]=await Promise.all([M_(e),t?V_(e,{hash:t}):void 0]),i=n?.blockNumber||r?.blockNumber;return i?s-i+1n:0n}(e,t),getTransactionCount:t=>wA(e,t),getTransactionReceipt:t=>Y_(e,t),multicall:t=>async function(e,t){const{allowFailure:n=!0,batchSize:s,blockNumber:r,blockTag:i,contracts:o,multicallAddress:a}=t,c=s??("object"==typeof e.batch?.multicall&&e.batch.multicall.batchSize||1024);let l=a;if(!l){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");l=(0,rv.LI)({blockNumber:r,chain:e.chain,contract:"multicall3"})}const u=[[]];let h=0,d=0;for(let e=0;e<o.length;e++){const{abi:t,address:s,args:r,functionName:i}=o[e];try{const e=(0,NA.R)({abi:t,args:r,functionName:i});d+=(e.length-2)/2,c>0&&d>c&&u[h].length>0&&(h++,d=(e.length-2)/2,u[h]=[]),u[h]=[...u[h],{allowFailure:!0,callData:e,target:s}]}catch(e){const o=a_(e,{abi:t,address:s,args:r,docsPath:"/docs/contract/multicall",functionName:i});if(!n)throw o;u[h]=[...u[h],{allowFailure:!0,callData:"0x",target:s}]}}const f=await Promise.allSettled(u.map((t=>l_(e,{abi:KA.F8,address:l,args:[t],blockNumber:r,blockTag:i,functionName:"aggregate3"})))),p=[];for(let e=0;e<f.length;e++){const t=f[e];if("rejected"===t.status){if(!n)throw t.reason;for(let n=0;n<u[e].length;n++)p.push({status:"failure",error:t.reason,result:void 0});continue}const s=t.value;for(let t=0;t<s.length;t++){const{returnData:r,success:i}=s[t],{callData:a}=u[e][t],{abi:c,address:l,functionName:h,args:d}=o[p.length];try{if("0x"===a)throw new qv.wb;if(!i)throw new YA.VQ({data:r});const e=(0,VA.k)({abi:c,args:d,data:r,functionName:h});p.push(n?{result:e,status:"success"}:e)}catch(e){const t=a_(e,{abi:c,address:l,args:d,docsPath:"/docs/contract/multicall",functionName:h});if(!n)throw t;p.push({error:t,result:void 0,status:"failure"})}}}if(p.length!==o.length)throw new pv.G("multicall results mismatch");return p}(e,t),prepareTransactionRequest:t=>vA(e,t),readContract:t=>l_(e,t),sendRawTransaction:t=>AA(e,t),simulateContract:t=>async function(e,{abi:t,address:n,args:s,dataSuffix:r,functionName:i,...o}){const a=o.account?(0,Dv.T)(o.account):void 0,c=(0,NA.R)({abi:t,args:s,functionName:i});try{const{data:a}=await(0,c_.R)(e,{batch:!1,data:`${c}${r?r.replace("0x",""):""}`,to:n,...o});return{result:(0,VA.k)({abi:t,args:s,functionName:i,data:a||"0x"}),request:{abi:t,address:n,args:s,dataSuffix:r,functionName:i,...o}}}catch(e){throw a_(e,{abi:t,address:n,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:a?.address})}}(e,t),verifyMessage:t=>tk(e,t),verifyTypedData:t=>async function(e,{address:t,signature:n,message:s,primaryType:r,types:i,domain:o,...a}){return ek(e,{address:t,hash:nk({message:s,primaryType:r,types:i,domain:o}),signature:n,...a})}(e,t),uninstallFilter:e=>X_(0,e),waitForTransactionReceipt:t=>async function(e,{confirmations:t=1,hash:n,onReplaced:s,pollingInterval:r=e.pollingInterval,timeout:i}){const o=(0,EA.P)(["waitForTransactionReceipt",e.uid,n]);let a,c,l,u=!1;return new Promise(((h,d)=>{i&&setTimeout((()=>d(new Zv.mc({hash:n}))),i);const f=hk(o,{onReplaced:s,resolve:h,reject:d},(s=>{const i=fk(e,{emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:r,async onBlockNumber(r){if(u)return;let o=r;const h=e=>{i(),e(),f()};try{if(l){if(t>1&&(!l.blockNumber||o-l.blockNumber+1n<t))return;return void h((()=>s.resolve(l)))}if(a||(u=!0,await RA((async()=>{a=await V_(e,{hash:n}),a.blockNumber&&(o=a.blockNumber)}),{delay:({count:e})=>200*~~(1<<e),retryCount:6}),u=!1),l=await Y_(e,{hash:n}),t>1&&(!l.blockNumber||o-l.blockNumber+1n<t))return;h((()=>s.resolve(l)))}catch(n){if(a&&(n instanceof Zv.Bh||n instanceof Zv.Yb))try{c=a;const n=(await dA(e,{blockNumber:o,includeTransactions:!0})).transactions.find((({from:e,nonce:t})=>e===c.from&&t===c.nonce));if(!n)return;if(l=await Y_(e,{hash:n.hash}),t>1&&(!l.blockNumber||o-l.blockNumber+1n<t))return;let r="replaced";n.to===c.to&&n.value===c.value?r="repriced":n.from===n.to&&0n===n.value&&(r="cancelled"),h((()=>{s.onReplaced?.({reason:r,replacedTransaction:c,transaction:n,transactionReceipt:l}),s.resolve(l)}))}catch(e){h((()=>s.reject(e)))}else h((()=>s.reject(n)))}}})}))}))}(e,t),watchBlocks:t=>function(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:s=!1,onBlock:r,onError:i,includeTransactions:o,poll:a,pollingInterval:c=e.pollingInterval}){const l=void 0!==a?a:"webSocket"!==e.transport.type,u=o??!1;let h;return l?hk((0,EA.P)(["watchBlocks",e.uid,n,s,u,c]),{onBlock:r,onError:i},(r=>dk((async()=>{try{const s=await dA(e,{blockTag:t,includeTransactions:u});if(s.number&&h?.number){if(s.number===h.number)return;if(s.number-h.number>1&&n)for(let t=h?.number+1n;t<s.number;t++){const n=await dA(e,{blockNumber:t,includeTransactions:u});r.onBlock(n,h),h=n}}(!h?.number||"pending"===t&&!s?.number||s.number&&s.number>h.number)&&(r.onBlock(s,h),h=s)}catch(e){r.onError?.(e)}}),{emitOnBegin:s,interval:c}))):(()=>{let t=!0,n=()=>t=!1;return(async()=>{try{const{unsubscribe:s}=await e.transport.subscribe({params:["newHeads"],onData(n){if(!t)return;const s=(e.chain?.formatters?.block?.format||hA)(n.result);r(s,h),h=s},onError(e){i?.(e)}});n=s,t||n()}catch(e){i?.(e)}})(),n})()}(e,t),watchBlockNumber:t=>fk(e,t),watchContractEvent:t=>function(e,{abi:t,address:n,args:s,batch:r=!0,eventName:i,onError:o,onLogs:a,poll:c,pollingInterval:l=e.pollingInterval,strict:u}){return(void 0!==c?c:"webSocket"!==e.transport.type)?(()=>{const c=(0,EA.P)(["watchContractEvent",n,s,r,e.uid,i,l]),h=u??!1;return hk(c,{onLogs:a,onError:o},(o=>{let a,c,u=!1;const d=dk((async()=>{if(u)try{let i;if(c)i=await K_(0,{filter:c});else{const r=await M_(e);i=a&&a!==r?await W_(e,{abi:t,address:n,args:s,fromBlock:a+1n,toBlock:r,strict:h}):[],a=r}if(0===i.length)return;r?o.onLogs(i):i.forEach((e=>o.onLogs([e])))}catch(e){c&&e instanceof kv&&(u=!1),o.onError?.(e)}else{try{c=await O_(e,{abi:t,address:n,args:s,eventName:i,strict:h})}catch{}u=!0}}),{emitOnBegin:!0,interval:l});return async()=>{c&&await X_(0,{filter:c}),d()}}))})():(()=>{let r=!0,c=()=>r=!1;return(async()=>{try{const l=i?T_({abi:t,eventName:i,args:s}):[],{unsubscribe:h}=await e.transport.subscribe({params:["logs",{address:n,topics:l}],onData(e){if(!r)return;const n=e.result;try{const{eventName:e,args:s}=$_({abi:t,data:n.data,topics:n.topics,strict:u}),r=H_(n,{args:s,eventName:e});a([r])}catch(e){let t,s;if(e instanceof qv.SM||e instanceof qv.Gy){if(u)return;t=e.abiItem.name,s=e.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}const r=H_(n,{args:s?[]:{},eventName:t});a([r])}},onError(e){o?.(e)}});c=h,r||c()}catch(e){o?.(e)}})(),c})()}(e,t),watchEvent:t=>function(e,{address:t,args:n,batch:s=!0,event:r,events:i,onError:o,onLogs:a,poll:c,pollingInterval:l=e.pollingInterval,strict:u}){const h=void 0!==c?c:"webSocket"!==e.transport.type,d=u??!1;return h?hk((0,EA.P)(["watchEvent",t,n,s,e.uid,r,l]),{onLogs:a,onError:o},(o=>{let a,c,u=!1;const h=dk((async()=>{if(u)try{let l;if(c)l=await K_(0,{filter:c});else{const s=await M_(e);l=a&&a!==s?await z_(e,{address:t,args:n,event:r,events:i,fromBlock:a+1n,toBlock:s}):[],a=s}if(0===l.length)return;s?o.onLogs(l):l.forEach((e=>o.onLogs([e])))}catch(e){c&&e instanceof kv&&(u=!1),o.onError?.(e)}else{try{c=await N_(e,{address:t,args:n,event:r,events:i,strict:d})}catch{}u=!0}}),{emitOnBegin:!0,interval:l});return async()=>{c&&await X_(0,{filter:c}),h()}})):(()=>{let s=!0,c=()=>s=!1;return(async()=>{try{const l=i??(r?[r]:void 0);let h=[];l&&(h=[l.flatMap((e=>T_({abi:[e],eventName:e.name,args:n})))],r&&(h=h[0]));const{unsubscribe:f}=await e.transport.subscribe({params:["logs",{address:t,topics:h}],onData(e){if(!s)return;const t=e.result;try{const{eventName:e,args:n}=$_({abi:l,data:t.data,topics:t.topics,strict:d}),s=H_(t,{args:n,eventName:e});a([s])}catch(e){let n,s;if(e instanceof qv.SM||e instanceof qv.Gy){if(u)return;n=e.abiItem.name,s=e.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}const r=H_(t,{args:s?[]:{},eventName:n});a([r])}},onError(e){o?.(e)}});c=f,s||c()}catch(e){o?.(e)}})(),c})()}(e,t),watchPendingTransactions:t=>function(e,{batch:t=!0,onError:n,onTransactions:s,poll:r,pollingInterval:i=e.pollingInterval}){return(void 0!==r?r:"webSocket"!==e.transport.type)?hk((0,EA.P)(["watchPendingTransactions",e.uid,t,i]),{onTransactions:s,onError:n},(n=>{let s;const r=dk((async()=>{try{if(!s)try{return void(s=await j_(e))}catch(e){throw r(),e}const i=await K_(0,{filter:s});if(0===i.length)return;t?n.onTransactions(i):i.forEach((e=>n.onTransactions([e])))}catch(e){n.onError?.(e)}}),{emitOnBegin:!0,interval:i});return async()=>{s&&await X_(0,{filter:s}),r()}})):(()=>{let t=!0,r=()=>t=!1;return(async()=>{try{const{unsubscribe:i}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!t)return;const n=e.result;s([n])},onError(e){n?.(e)}});r=i,t||r()}catch(e){n?.(e)}})(),r})()}(e,t)}}function gk(e){const{key:t="public",name:n="Public Client"}=e;return Gv({...e,key:t,name:n,type:"publicClient"}).extend(pk)}function mk(e,t={}){const{key:n="fallback",name:s="Fallback",rank:r=!1,retryCount:i,retryDelay:o}=t;return({chain:t,pollingInterval:a=4e3,timeout:c})=>{let l=e,u=()=>{};const h=BA({key:n,name:s,async request({method:e,params:n}){const s=async(r=0)=>{const i=l[r]({chain:t,retryCount:0,timeout:c});try{const t=await i.request({method:e,params:n});return u({method:e,params:n,response:t,transport:i,status:"success"}),t}catch(t){if(u({error:t,method:e,params:n,transport:i,status:"error"}),DA(t))throw t;if(r===l.length-1)throw t;return s(r+1)}};return s()},retryCount:i,retryDelay:o,type:"fallback"},{onResponse:e=>u=e,transports:l.map((e=>e({chain:t,retryCount:0})))});if(r){const e="object"==typeof r?r:{};!function({chain:e,interval:t=4e3,onTransports:n,sampleCount:s=10,timeout:r=1e3,transports:i,weights:o={}}){const{stability:a=.7,latency:c=.3}=o,l=[],u=async()=>{const o=await Promise.all(i.map((async t=>{const n=t({chain:e,retryCount:0,timeout:r}),s=Date.now();let i,o;try{await n.request({method:"net_listening"}),o=1}catch{o=0}finally{i=Date.now()}return{latency:i-s,success:o}})));l.push(o),l.length>s&&l.shift();const h=Math.max(...l.map((e=>Math.max(...e.map((({latency:e})=>e)))))),d=i.map(((e,t)=>{const n=l.map((e=>e[t].latency)),s=1-n.reduce(((e,t)=>e+t),0)/n.length/h,r=l.map((e=>e[t].success)),i=r.reduce(((e,t)=>e+t),0)/r.length;return 0===i?[0,t]:[c*s+a*i,t]})).sort(((e,t)=>t[0]-e[0]));n(d.map((([,e])=>i[e]))),await UA(t),u()};u()}({chain:t,interval:e.interval??a,onTransports:e=>l=e,sampleCount:e.sampleCount,timeout:e.timeout,transports:l,weights:e.weights})}return h}}class yk extends pv.G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}var bk=n(2357),wk=null;"undefined"!=typeof WebSocket?wk=WebSocket:"undefined"!=typeof MozWebSocket?wk=MozWebSocket:void 0!==n.g?wk=n.g.WebSocket||n.g.MozWebSocket:"undefined"!=typeof window?wk=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(wk=self.WebSocket||self.MozWebSocket);const vk=wk;function Ak(e,{errorInstance:t,timeout:n,signal:s}){return new Promise(((r,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout((()=>{s?a.abort():i(t)}),n)),r(await e({signal:a?.signal}))}catch(e){"AbortError"===e.name&&i(t),i(e)}finally{clearTimeout(o)}})()}))}let _k=0;const kk=new Map;async function Ek(e){let t=kk.get(e);if(t)return t;const{schedule:n}=(0,bk.S)({id:e,fn:async()=>{let n=vk;vk.constructor||(n=vk.WebSocket);const s=new n(e),r=new Map,i=new Map,o=({data:e})=>{const t=JSON.parse(e),n="eth_subscription"===t.method,s=n?t.params.subscription:t.id,o=n?i:r,a=o.get(s);a&&a({data:e}),n||o.delete(s)},a=()=>{kk.delete(e),s.removeEventListener("close",a),s.removeEventListener("message",o)};return s.addEventListener("close",a),s.addEventListener("message",o),s.readyState===vk.CONNECTING&&await new Promise(((e,t)=>{s&&(s.onopen=e,s.onerror=t)})),t=Object.assign(s,{requests:r,subscriptions:i}),kk.set(e,t),[t]}}),[s,[r]]=await n();return r}const xk={http:async function(e,{body:t,fetchOptions:n={},timeout:s=1e4}){const{headers:r,method:i,signal:o}=n;try{const a=await Ak((async({signal:a})=>await fetch(e,{...n,body:Array.isArray(t)?(0,EA.P)(t.map((e=>({jsonrpc:"2.0",id:e.id??_k++,...e})))):(0,EA.P)({jsonrpc:"2.0",id:t.id??_k++,...t}),headers:{...r,"Content-Type":"application/json"},method:i||"POST",signal:o||(s>0?a:void 0)})),{errorInstance:new gv.W5({body:t,url:e}),timeout:s,signal:!0});let c;if(c=a.headers.get("Content-Type")?.startsWith("application/json")?await a.json():await a.text(),!a.ok)throw new gv.Gg({body:t,details:(0,EA.P)(c.error)||a.statusText,headers:a.headers,status:a.status,url:e});return c}catch(n){if(n instanceof gv.Gg)throw n;if(n instanceof gv.W5)throw n;throw new gv.Gg({body:t,details:n.message,url:e})}},webSocket:function(e,{body:t,onResponse:n}){if(e.readyState===e.CLOSED||e.readyState===e.CLOSING)throw new gv.c9({body:t,url:e.url,details:"Socket is closed."});const s=_k++,r=({data:i})=>{const o=JSON.parse(i);"number"==typeof o.id&&s!==o.id||(n?.(o),"eth_subscribe"===t.method&&"string"==typeof o.result&&e.subscriptions.set(o.result,r),"eth_unsubscribe"===t.method&&e.subscriptions.delete(t.params?.[0]))};return e.requests.set(s,r),e.send(JSON.stringify({jsonrpc:"2.0",...t,id:s})),e},webSocketAsync:async function(e,{body:t,timeout:n=1e4}){return Ak((()=>new Promise((n=>xk.webSocket(e,{body:t,onResponse:n})))),{errorInstance:new gv.W5({body:t,url:e.url}),timeout:n})}};var Ck=n(4192);const Sk=e=>(t,n,s)=>{const r=s.subscribe;s.subscribe=(e,t,n)=>{let i=e;if(t){const r=(null==n?void 0:n.equalityFn)||Object.is;let o=e(s.getState());i=n=>{const s=e(n);if(!r(o,s)){const e=o;t(o=s,e)}},(null==n?void 0:n.fireImmediately)&&t(o,o)}return r(i)};return e(t,n,s)};function Pk(e,t){let n;try{n=e()}catch(e){return}const s={getItem:e=>{var s;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(s=n.getItem(e))?s:null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,s)=>n.setItem(e,JSON.stringify(s,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)};return s}const Tk=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>Tk(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>Tk(t)(e)}}},Ik=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),((e,t)=>(n,s,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const a=new Set,c=new Set;let l;try{l=i.getStorage()}catch(e){}if(!l)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...e)}),s,r);const u=Tk(i.serialize),h=()=>{const e=i.partialize({...s()});let t;const n=u({state:e,version:i.version}).then((e=>l.setItem(i.name,e))).catch((e=>{t=e}));if(t)throw t;return n},d=r.setState;r.setState=(e,t)=>{d(e,t),h()};const f=e(((...e)=>{n(...e),h()}),s,r);let p;const g=()=>{var e;if(!l)return;o=!1,a.forEach((e=>e(s())));const t=(null==(e=i.onRehydrateStorage)?void 0:e.call(i,s()))||void 0;return Tk(l.getItem.bind(l))(i.name).then((e=>{if(e)return i.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return p=i.merge(e,null!=(t=s())?t:f),n(p,!0),h()})).then((()=>{null==t||t(p,void 0),o=!0,c.forEach((e=>e(p)))})).catch((e=>{null==t||t(void 0,e)}))};return r.persist={setOptions:e=>{i={...i,...e},e.getStorage&&(l=e.getStorage())},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},g(),p||f})(e,t)):((e,t)=>(n,s,r)=>{let i={storage:Pk((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...e)}),s,r);const u=()=>{const e=i.partialize({...s()});return l.setItem(i.name,{state:e,version:i.version})},h=r.setState;r.setState=(e,t)=>{h(e,t),u()};const d=e(((...e)=>{n(...e),u()}),s,r);let f;const p=()=>{var e,t;if(!l)return;o=!1,a.forEach((e=>{var t;return e(null!=(t=s())?t:d)}));const r=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=s())?e:d))||void 0;return Tk(l.getItem.bind(l))(i.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return f=i.merge(e,null!=(t=s())?t:d),n(f,!0),u()})).then((()=>{null==r||r(f,void 0),f=s(),o=!0,c.forEach((e=>e(f)))})).catch((e=>{null==r||r(void 0,e)}))};return r.persist={setOptions:e=>{i={...i,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},i.skipHydration||p(),f||d})(e,t),Ok=e=>{let t;const n=new Set,s=(e,s)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=s?s:"object"!=typeof r)?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,i={setState:s,getState:r,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(s,r,i),i},Nk=e=>e?Ok(e):Ok;var jk=n(5229);function Lk(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,s]of e)if(!Object.is(s,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!Object.is(e[n[s]],t[n[s]]))return!1;return!0}function Uk(e,t,{batch:n={multicall:{wait:32}},pollingInterval:s=4e3,rank:r,retryCount:i,retryDelay:o,stallTimeout:a}={}){if(!e.length)throw new Error("must have at least one chain");let c=[];const l={},u={};for(const n of e){let e=!1;for(const s of t){const t=s(n);t&&(e=!0,c.some((({id:e})=>e===n.id))||(c=[...c,t.chain]),l[n.id]=[...l[n.id]||[],...t.rpcUrls.http],t.rpcUrls.webSocket&&(u[n.id]=[...u[n.id]||[],...t.rpcUrls.webSocket]))}if(!e)throw new Error([`Could not find valid provider configuration for chain "${n.name}".\n`,"You may need to add `jsonRpcProvider` to `configureChains` with the chain's RPC URLs.","Read more: https://wagmi.sh/core/providers/jsonRpc"].join("\n"))}return{chains:c,publicClient:({chainId:t})=>{const u=c.find((e=>e.id===t))??e[0],h=l[u.id];if(!h||!h[0])throw new Error(`No providers configured for chain "${u.id}"`);const d=gk({batch:n,chain:u,transport:mk(h.map((e=>function(e,t={}){const{batch:n,fetchOptions:s,key:r="http",name:i="HTTP JSON-RPC",retryDelay:o}=t;return({chain:a,retryCount:c,timeout:l})=>{const{batchSize:u=1e3,wait:h=0}="object"==typeof n?n:{},d=t.retryCount??c,f=l??t.timeout??1e4,p=e||a?.rpcUrls.default.http[0];if(!p)throw new yk;return BA({key:r,name:i,async request({method:t,params:r}){const i={method:t,params:r},{schedule:o}=(0,bk.S)({id:`${e}`,wait:h,shouldSplitBatch:e=>e.length>u,fn:e=>xk.http(p,{body:e,fetchOptions:s,timeout:f})}),[{error:a,result:c}]=await(async e=>n?o(e):[await xk.http(p,{body:e,fetchOptions:s,timeout:f})])(i);if(a)throw new gv.bs({body:i,error:a,url:p});return c},retryCount:d,retryDelay:o,timeout:f,type:"http"},{url:e})}}(e,{timeout:a}))),{rank:r,retryCount:i,retryDelay:o}),pollingInterval:s});return Object.assign(d,{chains:c})},webSocketPublicClient:({chainId:t})=>{const l=c.find((e=>e.id===t))??e[0],h=u[l.id];if(!h||!h[0])return;const d=gk({batch:n,chain:l,transport:mk(h.map((e=>function(e,t={}){const{key:n="webSocket",name:s="WebSocket JSON-RPC",retryDelay:r}=t;return({chain:i,retryCount:o,timeout:a})=>{const c=t.retryCount??o,l=a??t.timeout??1e4,u=e||i?.rpcUrls.default.webSocket?.[0];if(!u)throw new yk;return BA({key:n,name:s,async request({method:e,params:t}){const n={method:e,params:t},s=await Ek(u),{error:r,result:i}=await xk.webSocketAsync(s,{body:n,timeout:l});if(r)throw new gv.bs({body:n,error:r,url:u});return i},retryCount:c,retryDelay:r,timeout:l,type:"webSocket"},{getSocket:()=>Ek(u),async subscribe({params:e,onData:t,onError:n}){const s=await Ek(u),{result:r}=await new Promise(((r,i)=>xk.webSocket(s,{body:{method:"eth_subscribe",params:e},onResponse(e){if(e.error)return i(e.error),void n?.(e.error);"number"!=typeof e.id?"eth_subscription"===e.method&&t(e.params):r(e)}})));return{subscriptionId:r,unsubscribe:async()=>new Promise((e=>xk.webSocket(s,{body:{method:"eth_unsubscribe",params:[r]},onResponse:e})))}}})}}(e,{timeout:a}))),{rank:r,retryCount:i,retryDelay:o}),pollingInterval:s});return Object.assign(d,{chains:c})}}}var Rk=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured${t?` for connector "${t}"`:""}.`),this.name="ChainNotConfigured"}},Dk=class extends Error{constructor(){super(...arguments),this.name="ConnectorAlreadyConnectedError",this.message="Connector already connected"}},Mk=class extends Error{constructor(){super(...arguments),this.name="ConfigChainsNotFound",this.message="No chains were found on the wagmi config. Some functions that require a chain may not work."}},Bk=class extends Error{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),this.name="SwitchChainNotSupportedError"}};var Fk=(e,{find:t,replace:n})=>e&&t(e)?n(e):"object"!=typeof e?e:Array.isArray(e)?e.map((e=>Fk(e,{find:t,replace:n}))):e instanceof Object?Object.entries(e).reduce(((e,[s,r])=>({...e,[s]:Fk(r,{find:t,replace:n})})),{}):e;function $k(e){const t=JSON.parse(e),n=Fk(t,{find:e=>"string"==typeof e&&e.startsWith("#bigint."),replace:e=>BigInt(e.replace("#bigint.",""))});return n}function Gk(e){return"number"==typeof e?e:"wei"===e?0:Math.abs(Ck.Bd[e])}function Hk(e,t){return e.slice(0,t).join(".")||"."}function zk(e,t){const{length:n}=e;for(let s=0;s<n;++s)if(e[s]===t)return s+1;return 0}function Wk(e,t,n,s){return JSON.stringify(e,function(e,t){const n="function"==typeof e,s="function"==typeof t,r=[],i=[];return function(o,a){if("object"==typeof a)if(r.length){const e=zk(r,this);0===e?r[r.length]=this:(r.splice(e),i.splice(e)),i[i.length]=o;const n=zk(r,a);if(0!==n)return s?t.call(this,o,a,Hk(i,n)):`[ref=${Hk(i,n)}]`}else r[0]=a,i[0]=o;return n?e.call(this,o,a):a}}(((e,n)=>{const s="bigint"==typeof n?`#bigint.${n.toString()}`:n;return t?.(e,s)||s}),s),n??void 0)}var qk={getItem:e=>"",setItem:(e,t)=>null,removeItem:e=>null};function Kk({deserialize:e=$k,key:t="wagmi",serialize:n=Wk,storage:s}){return{...s,getItem:(n,r=null)=>{const i=s.getItem(`${t}.${n}`);try{return i?e(i):r}catch(e){return console.warn(e),r}},setItem:(e,r)=>{if(null===r)s.removeItem(`${t}.${e}`);else try{s.setItem(`${t}.${e}`,n(r))}catch(e){console.error(e)}},removeItem:e=>s.removeItem(`${t}.${e}`)}}var Vk,Jk,Qk,Yk,Xk,Zk="store",eE=class{constructor({autoConnect:e=!1,connectors:t=[new GA],publicClient:n,storage:s=Kk({storage:"undefined"!=typeof window?window.localStorage:qk}),logger:r={warn:console.warn},webSocketPublicClient:i}){WA(this,Qk),this.publicClients=new Map,this.webSocketPublicClients=new Map,WA(this,Vk,void 0),WA(this,Jk,void 0),this.args={autoConnect:e,connectors:t,logger:r,publicClient:n,storage:s,webSocketPublicClient:i};let o,a="disconnected";if(e)try{const e=s.getItem(Zk),t=e?.state?.data;a=t?.account?"reconnecting":"connecting",o=t?.chain?.id}catch(e){}const c="function"==typeof t?t():t;var l,u,h;c.forEach((e=>e.setStorage(s))),this.store=Nk(Sk(Ik((()=>({connectors:c,publicClient:this.getPublicClient({chainId:o}),status:a,webSocketPublicClient:this.getWebSocketPublicClient({chainId:o})})),{name:Zk,storage:s,partialize:t=>({...e&&{data:{account:t?.data?.account,chain:t?.data?.chain}},chains:t?.chains}),version:2}))),this.storage=s,qA(this,Jk,s?.getItem("wallet")),(l=this,u=Qk,h=Yk,HA(l,u,"access private method"),h).call(this),e&&"undefined"!=typeof window&&setTimeout((async()=>await this.autoConnect()),0)}get chains(){return this.store.getState().chains}get connectors(){return this.store.getState().connectors}get connector(){return this.store.getState().connector}get data(){return this.store.getState().data}get error(){return this.store.getState().error}get lastUsedChainId(){return this.data?.chain?.id}get publicClient(){return this.store.getState().publicClient}get status(){return this.store.getState().status}get subscribe(){return this.store.subscribe}get webSocketPublicClient(){return this.store.getState().webSocketPublicClient}setState(e){const t="function"==typeof e?e(this.store.getState()):e;this.store.setState(t,!0)}clearState(){this.setState((e=>({...e,chains:void 0,connector:void 0,data:void 0,error:void 0,status:"disconnected"})))}async destroy(){this.connector&&await(this.connector.disconnect?.()),qA(this,Vk,!1),this.clearState(),this.store.destroy()}async autoConnect(){if(zA(this,Vk))return;qA(this,Vk,!0),this.setState((e=>({...e,status:e.data?.account?"reconnecting":"connecting"})));const e=zA(this,Jk)?[...this.connectors].sort((e=>e.id===zA(this,Jk)?-1:1)):this.connectors;let t=!1;for(const n of e){if(!n.ready||!n.isAuthorized)continue;if(!await n.isAuthorized())continue;const e=await n.connect();this.setState((t=>({...t,connector:n,chains:n?.chains,data:e,status:"connected"}))),t=!0;break}return t||this.setState((e=>({...e,data:void 0,status:"disconnected"}))),qA(this,Vk,!1),this.data}setConnectors(e){this.args={...this.args,connectors:e};const t="function"==typeof e?e():e;t.forEach((e=>e.setStorage(this.args.storage))),this.setState((e=>({...e,connectors:t})))}getPublicClient({chainId:e}={}){let t=this.publicClients.get(-1);if(t&&t?.chain.id===e)return t;if(t=this.publicClients.get(e??-1),t)return t;const{publicClient:n}=this.args;return t="function"==typeof n?n({chainId:e}):n,this.publicClients.set(e??-1,t),t}setPublicClient(e){const t=this.data?.chain?.id;this.args={...this.args,publicClient:e},this.publicClients.clear(),this.setState((e=>({...e,publicClient:this.getPublicClient({chainId:t})})))}getWebSocketPublicClient({chainId:e}={}){let t=this.webSocketPublicClients.get(-1);if(t&&t?.chain.id===e)return t;if(t=this.webSocketPublicClients.get(e??-1),t)return t;const{webSocketPublicClient:n}=this.args;return t="function"==typeof n?n({chainId:e}):n,t&&this.webSocketPublicClients.set(e??-1,t),t}setWebSocketPublicClient(e){const t=this.data?.chain?.id;this.args={...this.args,webSocketPublicClient:e},this.webSocketPublicClients.clear(),this.setState((e=>({...e,webSocketPublicClient:this.getWebSocketPublicClient({chainId:t})})))}setLastUsedConnector(e=null){this.storage?.setItem("wallet",e)}};function tE(){if(!Xk)throw new Error("No wagmi config found. Ensure you have set up a config: https://wagmi.sh/react/config");return Xk}async function nE({chainId:e,connector:t}){const n=tE(),s=n.connector;if(s&&t.id===s.id)throw new Dk;try{n.setState((e=>({...e,status:"connecting"})));const s=await t.connect({chainId:e});return n.setLastUsedConnector(t.id),n.setState((e=>({...e,connector:t,chains:t?.chains,data:s,status:"connected"}))),n.storage.setItem("connected",!0),{...s,connector:t}}catch(e){throw n.setState((e=>({...e,status:e.connector?"connected":"disconnected"}))),e}}async function sE(){const e=tE();e.connector&&await e.connector.disconnect(),e.clearState(),e.storage.removeItem("connected")}Vk=new WeakMap,Jk=new WeakMap,Qk=new WeakSet,Yk=function(){const e=e=>{this.setState((t=>({...t,data:{...t.data,...e}})))},t=()=>{this.clearState()},n=e=>{this.setState((t=>({...t,error:e})))};this.store.subscribe((({connector:e})=>e),((s,r)=>{r?.off?.("change",e),r?.off?.("disconnect",t),r?.off?.("error",n),s&&(s.on?.("change",e),s.on?.("disconnect",t),s.on?.("error",n))}));const{publicClient:s,webSocketPublicClient:r}=this.args;("function"==typeof s||"function"==typeof r)&&this.store.subscribe((({data:e})=>e?.chain?.id),(e=>{this.setState((t=>({...t,publicClient:this.getPublicClient({chainId:e}),webSocketPublicClient:this.getWebSocketPublicClient({chainId:e})})))}))};var rE=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],iE=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];function oE({chainId:e}={}){const t=tE();return e&&t.getPublicClient({chainId:e})||t.publicClient}async function aE({chainId:e}={}){const t=tE();return await(t.connector?.getWalletClient?.({chainId:e}))||null}async function cE({chainId:e,contracts:t,blockNumber:n,blockTag:s,...r}){const i=oE({chainId:e});if(!i.chains)throw new Mk;if(e&&i.chain.id!==e)throw new Rk({chainId:e});return i.multicall({allowFailure:r.allowFailure??!0,blockNumber:n,blockTag:s,contracts:t})}async function lE({address:e,account:t,chainId:n,abi:s,args:r,functionName:i,blockNumber:o,blockTag:a}){return oE({chainId:n}).readContract({abi:s,address:e,account:t,functionName:i,args:r,blockNumber:o,blockTag:a})}async function uE({contracts:e,blockNumber:t,blockTag:n,...s}){const{allowFailure:r=!0}=s;try{const s=oE(),i=e.reduce(((e,t,n)=>{const r=t.chainId??s.chain.id;return{...e,[r]:[...e[r]||[],{contract:t,index:n}]}}),{}),o=()=>Object.entries(i).map((([e,s])=>cE({allowFailure:r,chainId:parseInt(e),contracts:s.map((({contract:e})=>e)),blockNumber:t,blockTag:n}))),a=(await Promise.all(o())).flat(),c=Object.values(i).flatMap((e=>e.map((({index:e})=>e))));return a.reduce(((e,t,n)=>(e&&(e[c[n]]=t),e)),[])}catch(s){if(s instanceof YA.uq)throw s;const i=()=>e.map((e=>lE({...e,blockNumber:t,blockTag:n})));return r?(await Promise.allSettled(i())).map((e=>"fulfilled"===e.status?{result:e.value,status:"success"}:{error:e.reason,result:void 0,status:"failure"})):await Promise.all(i())}}async function hE({address:e,chainId:t,formatUnits:n,token:s}){const r=tE(),i=oE({chainId:t});if(s){const r=async({abi:r})=>{const i={abi:r,address:s,chainId:t},[o,a,c]=await uE({allowFailure:!1,contracts:[{...i,functionName:"balanceOf",args:[e]},{...i,functionName:"decimals"},{...i,functionName:"symbol"}]});return{decimals:a,formatted:(0,jk.b)(o??"0",Gk(n??a)),symbol:c,value:o}};try{return await r({abi:rE})}catch(e){if(e instanceof YA.uq){const{symbol:e,...t}=await r({abi:iE});return{symbol:(0,Hv.rR)((0,JA.f)(e,{dir:"right"})),...t}}throw e}}const o=[...r.publicClient.chains||[],...r.chains??[]],a=await i.getBalance({address:e}),c=o.find((e=>e.id===i.chain.id));return{decimals:c?.nativeCurrency.decimals??18,formatted:(0,jk.b)(a??"0",Gk(n??18)),symbol:c?.nativeCurrency.symbol??"ETH",value:a}}function dE(){const{data:e,connector:t,status:n}=tE();switch(n){case"connected":return{address:e?.account,connector:t,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:n};case"reconnecting":return{address:e?.account,connector:t,isConnected:!!e?.account,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:n};case"connecting":return{address:e?.account,connector:t,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:n};case"disconnected":return{address:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:n}}}function fE(){const e=tE(),t=e.data?.chain?.id,n=e.chains??[],s=[...e.publicClient?.chains||[],...n].find((e=>e.id===t))??{id:t,name:`Chain ${t}`,network:`${t}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}};return{chain:t?{...s,...e.data?.chain,id:t}:void 0,chains:n}}async function pE({chainId:e}){const{connector:t}=tE();if(!t)throw new tv;if(!t.switchChain)throw new Bk({connector:t});return t.switchChain(e)}function gE(e,{selector:t=(e=>e)}={}){const n=tE().subscribe((({data:e,connector:n,status:s})=>t({address:e?.account,connector:n,status:s})),(()=>e(dE())),{equalityFn:Lk});return n}function mE(e,{selector:t=(e=>e)}={}){const n=tE().subscribe((({data:e,chains:n})=>t({chainId:e?.chain?.id,chains:n})),(()=>e(fE())),{equalityFn:Lk});return n}async function yE({name:e,chainId:t}){const{normalize:s}=await n.e(546).then(n.bind(n,9546)),r=oE({chainId:t});return await r.getEnsAvatar({name:s(e)})}async function bE({address:e,chainId:t}){return oE({chainId:t}).getEnsName({address:(0,fv.K)(e)})}class wE extends Vw{#L;constructor(e,t){super(t,{batchMaxCount:1}),this.#L=async(t,n)=>{const s={method:t,params:n};this.emit("debug",{action:"sendEip1193Request",payload:s});try{const t=await e.request(s);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(e){const t=new Error(e.message);throw t.code=e.code,t.data=e.data,t.payload=s,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}}}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){Ou(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#L(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter((t=>t.toLowerCase()===e)).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#L("eth_requestAccounts",[])}catch(e){const t=e.payload;throw this.getRpcError(t,{id:t.id,error:e})}return await super.getSigner(e)}}const vE=new class extends o{store=new r("cached-follows");constructor(){super(),this.addAllowedEvents("follow","unfollow")}async fetchSignedUserFollows(){const{data:e,error:t}=await Br.client.from("follows").select().eq("follower_id",ox.userId);if(t)throw t;const n=new Set(Object.keys(this.store.getAll()));for(const t of e){const e=t.followee_id;n.has(e)||this._follow(e),n.delete(e)}for(const e of n)this._unfollow(e)}clearCache(){this.store.clear()}_follow(e){this.store.set(e,!0),this.fireEvent("follow",e)}async follow(e){const t=this.isFollowing(e);this._follow(e);const{error:n}=await Br.client.from("follows").insert({followee_id:e});if(n)throw t||this._unfollow(e),n}_unfollow(e){this.store.delete(e),this.fireEvent("unfollow",e)}async unfollow(e){const t=this.isFollowing(e);this._unfollow(e);const{error:n}=await Br.client.from("follows").delete().eq("follower_id",ox.userId).eq("followee_id",e);if(n)throw t&&this._follow(e),n}isFollowing(e){return!0===this.store.get(e)}},AE={user_id:"",total_earned_trading_fees:"0",follower_count:0,following_count:0,blocked:!1,created_at:"-infinity"},_E="*, total_earned_trading_fees::text",kE=(e,t)=>$r(e.user_id)===$r(t.user_id)&&$r(e.wallet_address)===$r(t.wallet_address)&&$r(e.total_earned_trading_fees)===$r(t.total_earned_trading_fees)&&$r(e.display_name)===$r(t.display_name)&&$r(e.profile_image)===$r(t.profile_image)&&$r(e.x_username)===$r(t.x_username)&&(e.metadata,t.metadata,!0)&&$r(e.follower_count)===$r(t.follower_count)&&$r(e.following_count)===$r(t.following_count)&&$r(e.blocked)===$r(t.blocked);const EE=new class extends o{store=new r("cached-user-details-v2");storeXUsernameToUserId=new r("cached-x-username-to-user-id");storeWalletAddressToUserId=new r("cached-wallet-address-to-user-id");constructor(){super(),this.addAllowedEvents("update")}init(){Br.client.channel("user-details-changes").on("postgres_changes",{event:"*",schema:"public",table:"user_details"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.user_id)})).subscribe()}cache(e,t){kE(t,this.get(e))||(this.store.set(e,t,!0),t.x_username&&this.storeXUsernameToUserId.set(t.x_username,e,!0),t.wallet_address&&this.storeWalletAddressToUserId.set(t.wallet_address,e,!0),this.fireEvent("update",t))}get(e){const t=this.store.get(e);return t||{...AE,user_id:e}}async refresh(e){const{data:t,error:n}=await Br.client.from("user_details").select(_E).eq("user_id",e);if(n)throw n;const s=t?.[0];s&&!kE(s,this.get(e))&&this.cache(e,s)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing user details:",e))),t}getByXUsername(e){const t=this.storeXUsernameToUserId.get(e),n=t?this.get(t):void 0;return n||{...AE,x_username:e}}async refreshByXUsername(e){const{data:t,error:n}=await Br.client.from("user_details").select(_E).eq("x_username",e);if(n)throw n;const s=t?.[0];s&&(kE(s,this.getByXUsername(e))||this.cache(s.user_id,s))}getAndRefreshByXUsername(e){const t=this.getByXUsername(e);return this.refreshByXUsername(e).catch((e=>console.error("Error refreshing user details:",e))),t}getByWalletAddress(e){const t=this.storeWalletAddressToUserId.get(e),n=t?this.get(t):void 0;return n||{...AE,wallet_address:e}}async refreshByWalletAddress(e){const{data:t,error:n}=await Br.client.from("user_details").select(_E).eq("wallet_address",e);if(n)throw n;const s=t?.[0];s&&(kE(s,this.getByWalletAddress(e))||this.cache(s.user_id,s))}getAndRefreshByWalletAddress(e){const t=this.getByWalletAddress(e);return this.refreshByWalletAddress(e).catch((e=>console.error("Error refreshing user details:",e))),t}cacheMultiple(e){for(const t of e)this.cache(t.user_id,t)}},xE=(0,rv.ax)({id:43114,name:"Avalanche",network:"avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]},public:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://snowtrace.io"},default:{name:"SnowTrace",url:"https://snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}}),CE=(0,rv.ax)({id:43113,name:"Avalanche Fuji",network:"avalanche-fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]},public:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://testnet.snowtrace.io"},default:{name:"SnowTrace",url:"https://testnet.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7096959}},testnet:!0});var SE,PE,TE,IE,OE,NE,jE,LE,UE,RE,DE,ME,BE,FE,$E,GE,HE,zE,WE,qE,KE=n(9795),VE="eip155",JE="requestedChains",QE="wallet_addEthereumChain",YE=class extends dv{constructor(e){super({...e,options:{isNewChainsStale:!0,...e.options}}),lv(this,TE),lv(this,OE),lv(this,jE),lv(this,UE),lv(this,DE),lv(this,BE),lv(this,$E),lv(this,HE),lv(this,WE),this.id="walletConnect",this.name="WalletConnect",this.ready=!0,lv(this,SE,void 0),lv(this,PE,void 0),this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,fv.K)(e[0])})},this.onChainChanged=e=>{const t=Number(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=()=>{hv(this,BE,FE).call(this,[]),this.emit("disconnect")},this.onDisplayUri=e=>{this.emit("message",{type:"display_uri",data:e})},this.onConnect=()=>{this.emit("connect",{})},hv(this,TE,IE).call(this)}async connect({chainId:e,pairingTopic:t}={}){try{let n=e;if(!n){const e=this.storage?.getItem("store"),t=e?.state?.data?.chain?.id;n=t&&!this.isChainUnsupported(t)?t:this.chains[0]?.id}if(!n)throw new Error("No chains found on connector.");const s=await this.getProvider();hv(this,UE,RE).call(this);const r=hv(this,jE,LE).call(this);if(s.session&&r&&await s.disconnect(),!s.session||r){const e=this.chains.filter((e=>e.id!==n)).map((e=>e.id));this.emit("message",{type:"connecting"}),await s.connect({pairingTopic:t,chains:[n],optionalChains:e.length?e:void 0}),hv(this,BE,FE).call(this,this.chains.map((({id:e})=>e)))}const i=await s.enable(),o=(0,fv.K)(i[0]),a=await this.getChainId();return{account:o,chain:{id:a,unsupported:this.isChainUnsupported(a)}}}catch(e){if(/user rejected/i.test(e?.message))throw new Iv(e);throw e}}async disconnect(){const e=await this.getProvider();try{await e.disconnect()}catch(e){if(!/No matching key/i.test(e.message))throw e}finally{hv(this,DE,ME).call(this),hv(this,BE,FE).call(this,[])}}async getAccount(){const{accounts:e}=await this.getProvider();return(0,fv.K)(e[0])}async getChainId(){const{chainId:e}=await this.getProvider();return e}async getProvider({chainId:e}={}){return cv(this,SE)||await hv(this,TE,IE).call(this),e&&await this.switchChain(e),cv(this,SE)}async getWalletClient({chainId:e}={}){const[t,n]=await Promise.all([this.getProvider({chainId:e}),this.getAccount()]),s=this.chains.find((t=>t.id===e));if(!t)throw new Error("provider is required.");return LA({account:n,chain:s,transport:FA(t)})}async isAuthorized(){try{const[e,t]=await Promise.all([this.getAccount(),this.getProvider()]),n=hv(this,jE,LE).call(this);if(!e)return!1;if(n&&t.session){try{await t.disconnect()}catch{}return!1}return!0}catch{return!1}}async switchChain(e){const t=this.chains.find((t=>t.id===e));if(!t)throw new Uv(new Error("chain not found on connector."));try{const n=await this.getProvider(),s=hv(this,HE,zE).call(this),r=hv(this,WE,qE).call(this);if(!s.includes(e)&&r.includes(QE)){await n.request({method:QE,params:[{chainId:(0,Wv.eC)(t.id),blockExplorerUrls:[t.blockExplorers?.default?.url],chainName:t.name,nativeCurrency:t.nativeCurrency,rpcUrls:[...t.rpcUrls.default.http]}]});const s=hv(this,$E,GE).call(this);s.push(e),hv(this,BE,FE).call(this,s)}return await n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,Wv.eC)(e)}]}),t}catch(e){if(/user rejected request/i.test("string"==typeof e?e:e?.message))throw new Iv(e);throw new Uv(e)}}};SE=new WeakMap,PE=new WeakMap,TE=new WeakSet,IE=async function(){return cv(this,PE)||"undefined"==typeof window||uv(this,PE,hv(this,OE,NE).call(this)),cv(this,PE)},OE=new WeakSet,NE=async function(){const{EthereumProvider:e,OPTIONAL_EVENTS:t,OPTIONAL_METHODS:s}=await n.e(979).then(n.bind(n,7979)),[r,...i]=this.chains.map((({id:e})=>e));if(r){const{projectId:n,showQrModal:o=!0,qrModalOptions:a,metadata:c,relayUrl:l}=this.options;uv(this,SE,await e.init({showQrModal:o,qrModalOptions:a,projectId:n,optionalMethods:s,optionalEvents:t,chains:[r],optionalChains:i.length?i:void 0,rpcMap:Object.fromEntries(this.chains.map((e=>[e.id,e.rpcUrls.default.http[0]]))),metadata:c,relayUrl:l}))}},jE=new WeakSet,LE=function(){if(hv(this,WE,qE).call(this).includes(QE))return!1;if(!this.options.isNewChainsStale)return!1;const e=hv(this,$E,GE).call(this),t=this.chains.map((({id:e})=>e)),n=hv(this,HE,zE).call(this);return!(n.length&&!n.some((e=>t.includes(e))))&&!t.every((t=>e.includes(t)))},UE=new WeakSet,RE=function(){cv(this,SE)&&(hv(this,DE,ME).call(this),cv(this,SE).on("accountsChanged",this.onAccountsChanged),cv(this,SE).on("chainChanged",this.onChainChanged),cv(this,SE).on("disconnect",this.onDisconnect),cv(this,SE).on("session_delete",this.onDisconnect),cv(this,SE).on("display_uri",this.onDisplayUri),cv(this,SE).on("connect",this.onConnect))},DE=new WeakSet,ME=function(){cv(this,SE)&&(cv(this,SE).removeListener("accountsChanged",this.onAccountsChanged),cv(this,SE).removeListener("chainChanged",this.onChainChanged),cv(this,SE).removeListener("disconnect",this.onDisconnect),cv(this,SE).removeListener("session_delete",this.onDisconnect),cv(this,SE).removeListener("display_uri",this.onDisplayUri),cv(this,SE).removeListener("connect",this.onConnect))},BE=new WeakSet,FE=function(e){this.storage?.setItem(JE,e)},$E=new WeakSet,GE=function(){return this.storage?.getItem(JE)??[]},HE=new WeakSet,zE=function(){if(!cv(this,SE))return[];const e=cv(this,SE).session?.namespaces;if(!e)return[];const t=(0,KE.fK)(e),n=t[VE]?.chains?.map((e=>parseInt(e.split(":")[1]||"")));return n??[]},WE=new WeakSet,qE=function(){if(!cv(this,SE))return[];const e=cv(this,SE).session?.namespaces;if(!e)return[];const t=(0,KE.fK)(e),n=t[VE]?.methods;return n??[]};class XE{constructor(e,t){this.wagmi={},this.chains=[],this.namespace="eip155",this.disconnect=sE,this.getAccount=dE,this.watchAccount=gE,this.fetchBalance=hE,this.getNetwork=fE,this.watchNetwork=mE,this.switchNetwork=pE,this.fetchEnsName=bE,this.fetchEnsAvatar=yE,this.wagmi=e,this.chains=t}getWalletConnectConnector(){const e=this.wagmi.connectors.find((e=>"walletConnect"===e.id));if(!e)throw new Error("WalletConnectConnector is required");return e}async connectWalletConnectProvider(e,t){return await e.getProvider(),new Promise((n=>{e.once("message",(e=>{"display_uri"===e.type&&(t(e.data),n())}))}))}getConnectorById(e){const t=this.wagmi.connectors.find((t=>t.id===e));if(!t)throw new Error(`Connector for id ${e} was not found`);return t}getConnectors(){return this.wagmi.connectors.filter((e=>!e.id.includes("walletConnect")))}async connectWalletConnect(e,t){const n=this.getWalletConnectConnector(),s={connector:n};return t&&(s.chainId=t),Promise.all([nE(s),this.connectWalletConnectProvider(n,e)])}async connectConnector(e,t){const n={connector:this.getConnectorById(e)};return t&&(n.chainId=t),await nE(n)}isInjectedProviderInstalled(){return typeof window.ethereum<"u"}safeCheckInjectedProvider(e){var t;try{const n=String(e);return Boolean(null==(t=window.ethereum)?void 0:t[n])}catch(e){return console.error(e),!1}}async getConnectedChainIds(){var e,t,n;const s=null==(t=null==(e=(await this.getWalletConnectConnector().getProvider()).signer)?void 0:e.session)?void 0:t.namespaces,r=null==(n=s?.[this.namespace])?void 0:n.methods;if(null!=r&&r.includes("wallet_addEthereumChain"))return"ALL";if(s){const e=[];return Object.keys(s).forEach((t=>{t.includes(this.namespace)&&e.push(...s[t].accounts)})),e?.map((e=>e.split(":")[1]))}return"ALL"}}function ZE({projectId:e}){return function({rpc:e}){return function(t){const n=e(t);return n&&""!==n.http?{chain:{...t,rpcUrls:{...t.rpcUrls,default:{http:[n.http]}}},rpcUrls:{http:[n.http],webSocket:n.webSocket?[n.webSocket]:void 0}}:null}}({rpc:t=>{var n;return[1,3,4,5,10,42,56,69,97,100,137,280,324,420,42161,42220,43114,80001,421611,421613,1313161554,1313161555].includes(t.id)?{http:`https://rpc.walletconnect.com/v1/?chainId=eip155:${t.id}&projectId=${e}`}:{http:t.rpcUrls.default.http[0],webSocket:null==(n=t.rpcUrls.default.webSocket)?void 0:n[0]}}})}function ex({chains:e,projectId:t}){return[new YE({chains:e,options:{projectId:t,showQrModal:!1}}),new GA({chains:e,options:{shimDisconnect:!0}})]}var tx=n(9015);class nx{constructor(e,t){this.openModal=tx.jb.open,this.closeModal=tx.jb.close,this.subscribeModal=tx.jb.subscribe,this.setTheme=tx.ThemeCtrl.setThemeConfig,this.setDefaultChain=tx.OptionsCtrl.setSelectedChain,this.subscribeEvents=tx.uA.subscribe,tx.ThemeCtrl.setThemeConfig(e),tx.Id.setEthereumClient(t),tx.ConfigCtrl.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.all([n.e(152),n.e(968)]).then(n.bind(n,7968));const e=document.createElement("w3m-modal");document.body.insertAdjacentElement("beforeend",e),tx.OptionsCtrl.setIsUiLoaded(!0)}}}const sx=new class extends o{web3modal;_resolveConnection;connected=!1;get address(){return dE().address}constructor(){super(),this.addAllowedEvents("accountChanged")}init(e){const t=[xE,CE],{publicClient:n}=Uk(t,[ZE({projectId:e})]),s=function(e){const t=new eE(e);return Xk=t,t}({autoConnect:!0,connectors:ex({projectId:e,chains:t}),publicClient:n}),r=new XE(s,t);this.web3modal=new nx({projectId:e,themeMode:"light",themeVariables:{"--w3m-accent-color":"#5585FF","--w3m-background-color":"#5585FF","--w3m-z-index":"999999"}},r),this.connected=void 0!==this.address;let i=this.address;gE((e=>{this.connected=void 0!==e.address,this.connected&&this._resolveConnection&&this._resolveConnection(),i!==e.address&&(this.fireEvent("accountChanged"),i=e.address)}))}async signMessage(e){if(!this.address)throw new Error("Wallet is not connected");return await async function(e){const t=await aE();if(!t)throw new tv;return await t.signMessage({message:e.message})}({message:e})}async connect(){return void 0!==this.address&&(this.connected=!0,this.fireEvent("accountChanged")),new Promise((e=>{this._resolveConnection=e,this.web3modal.openModal()}))}async getBalance(){if(!this.address)throw new Error("Wallet is not connected");return(await hE({address:this.address})).value}};const rx=new class{messageForWalletLinking;init(e){this.messageForWalletLinking=e}async link(){const e=sx.address;if(!e)throw new Error("Wallet is not connected");const{data:t,error:n}=await Br.client.functions.invoke("new-wallet-linking-nonce",{body:{walletAddress:e}});if(n)throw n;const s=await sx.signMessage(`${this.messageForWalletLinking}\n\nNonce: ${t.nonce}`),{error:r}=await Br.client.functions.invoke("link-wallet-to-user",{body:{walletAddress:e,signedMessage:s}});if(r)throw r;ox.userId&&EE.refresh(ox.userId)}};class ix extends w{content;linkButton;constructor(){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.link-wallet-popup",m("header",m("h1","Link Wallet")),m("main",m("p","To link your wallet to account, please follow the steps below:"),m("ol",m("li","Ensure your crypto wallet is connected.",m("w3m-core-button")),m("li",'Click the "Link Wallet" button below.'))),m("footer",new v({type:_.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"}),this.linkButton=new v({tag:".link-wallet-button",click:async(e,t)=>{try{t.disable().title="Linking...",await rx.link(),this.delete()}catch(e){console.error(e),t.enable().title="Link Wallet"}},title:"Link Wallet"})))),this.checkWallet(),this.onDelegate(sx,"accountChanged",(()=>this.checkWallet()))}checkWallet(){sx.connected?this.linkButton.enable():this.linkButton.disable()}}const ox=new class extends o{user;get userId(){return this.user?.id}get name(){return this.user?.user_metadata.full_name}get xUsername(){if("twitter"===this.user?.app_metadata.provider)return this.user.user_metadata.user_name}get avatarUrl(){return this.user?.user_metadata.avatar_url}get signed(){return void 0!==this.user}get walletAddress(){if(this.user)return EE.get(this.user.id).wallet_address}get walletLinked(){return void 0!==this.walletAddress}constructor(){super(),this.addAllowedEvents("userFetched")}async fetchUserOnInit(){const{data:e,error:t}=await Br.client.auth.getSession();if(t)throw t;this.user=e?.session?.user,this.user&&(this.fireEvent("userFetched"),this.onDelegate(EE,"update",(e=>{e.user_id===this.user?.id&&this.fireEvent("userFetched")})),EE.refresh(this.user.id).then((()=>{this.walletLinked||new C({title:"Wallet Link Required",message:"You must link your wallet to access all features of Igloo. Would you like to link your wallet now?",confirmTitle:"Link Wallet",cancelTitle:"Later"},(()=>{new ix}))})),vE.fetchSignedUserFollows())}async signIn(){await Br.client.auth.signInWithOAuth({provider:"twitter",options:Xw.dev?{redirectTo:"http://localhost:8413/"}:void 0})}linkWallet(){new ix}async signOut(){const{error:e}=await Br.client.auth.signOut();if(e)throw e;vE.clearCache(),location.reload()}async getContractSigner(){if(!this.user)throw new Error("User not signed in");if(!0!==sx.connected)throw new Error("Wallet not connected");if(!this.walletAddress)throw new Error("Wallet not linked");const e=await aE();if(!e)throw new Error("Wallet not connected");const{account:t,transport:n}=e;if(t.address!==this.walletAddress)throw new Error("Wallet address mismatch");const{chain:s}=fE();if(!s)throw new Error("Chain not found");if(s.id!==Xw.avaxChainId)throw new Error("Wrong chain");if(s&&t&&n)return new qw(new wE(n,{chainId:s.id,name:s.name,ensAddress:s.contracts?.ensRegistry?.address}),t.address)}};class ax extends c{welcomeMessage="Welcome to Igloo!";logo;backButton;titleDisplay;loginButton;signedUser;settingsButton;constructor(){super(".mobile-title-bar"),this.append(this.logo=m("h1",m("img",{src:"/images/logo.png"}),{click:()=>f.go("/")}),this.backButton=m("button.back",new b("arrow_back"),{click:()=>history.back()}),this.titleDisplay=m("p"),this.loginButton=m("button.login",new b("login"),{click:()=>ox.signIn()}),this.signedUser=m("a.signed-user",{click:()=>f.go(`/${ox.xUsername}`)}),this.settingsButton=m("button.settings",new b("settings"),{click:()=>f.go("/settings")})),this.checkSigned(),this.onDelegate(ox,"userFetched",(()=>this.checkSigned()))}checkSigned(){this.showLoginOrSignedUser(),this.titleDisplay.text=this.welcomeMessage=ox.signed?"Hello, "+ox.name+"!":"Welcome to Igloo!",ox.signed&&this.signedUser.style({backgroundImage:`url(${ox.avatarUrl})`})}showLogo(){this.logo.deleteClass("hidden"),this.backButton.addClass("hidden")}showBackButton(){this.logo.addClass("hidden"),this.backButton.deleteClass("hidden")}hideAllButtons(){[this.loginButton,this.signedUser,this.settingsButton].forEach((e=>e.addClass("hidden")))}showLoginOrSignedUser(){ox.signed?this.showSignedUser():this.showLoginButton()}showLoginButton(){this.hideAllButtons(),this.loginButton.deleteClass("hidden")}showSignedUser(){this.hideAllButtons(),this.signedUser.deleteClass("hidden")}showSettingsButton(){this.hideAllButtons(),this.settingsButton.deleteClass("hidden")}set uri(e){if(""===e||"chats"===e||e.startsWith("chats/")||"explore"===e||"notifications"===e||"settings"===e)this.titleDisplay.text=""===e?this.welcomeMessage:Fr.toTitleCase(e),this.showLogo(),this.showLoginOrSignedUser();else if(e.startsWith("post/"))this.titleDisplay.text="Post",this.showBackButton(),this.showLoginOrSignedUser();else{const t=e.split("/")[0],n=e.split("/")[1];this.titleDisplay.text="@"+t+(n?"'s "+Fr.toTitleCase(n):""),this.showBackButton(),ox.xUsername===t?this.showSettingsButton():this.showLoginOrSignedUser()}}}class cx extends c{currentActiveButton;loginButton;signedUser;constructor(){super(".nav-bar"),this.append(m("h1",m("img",{src:"/images/logo.png"}),{click:()=>f.go("/")}),m("button.home",new b("home"),{click:()=>f.go("/")}),m("button.chats",new b("chat"),{click:()=>f.go("/chats")}),m("button.explore",new b("search"),{click:()=>f.go("/explore")}),m("button.notifications",new b("notifications"),{click:()=>f.go("/notifications")}),m("button.settings",new b("settings"),{click:()=>f.go("/settings")}),this.loginButton=m("button.login-button",new b("login"),{click:()=>ox.signIn()}),this.signedUser=m("a.signed-user",{click:()=>f.go(`/${ox.xUsername}`)})),this.checkSigned(),this.onDelegate(ox,"userFetched",(()=>this.checkSigned()))}checkSigned(){ox.signed?this.showSignedUser():this.showLoginButton(),ox.signed&&this.signedUser.style({backgroundImage:`url(${ox.avatarUrl})`})}showLoginButton(){this.loginButton.addClass("show"),this.signedUser.deleteClass("show")}showSignedUser(){this.loginButton.deleteClass("show"),this.signedUser.addClass("show")}activeButton(e){this.currentActiveButton&&this.currentActiveButton.deleteClass("active"),this.currentActiveButton=this.children.find((t=>t.hasClass(e))),this.currentActiveButton?.addClass("active")}}const lx={subject:"",last_fetched_key_price:"0",total_trading_key_volume:"0",total_earned_trading_fees:"0",last_message_sent_at:"",key_holder_count:0,last_key_purchased_at:"-infinity",owned_key_count:0,created_at:"-infinity"},ux="*, last_fetched_key_price::text, total_trading_key_volume::text, total_earned_trading_fees::text",hx=(e,t)=>$r(e.subject)===$r(t.subject)&&$r(e.last_fetched_key_price)===$r(t.last_fetched_key_price)&&$r(e.total_trading_key_volume)===$r(t.total_trading_key_volume)&&$r(e.total_earned_trading_fees)===$r(t.total_earned_trading_fees)&&$r(e.is_key_price_up)===$r(t.is_key_price_up)&&$r(e.last_message)===$r(t.last_message)&&$r(e.last_message_sent_at)===$r(t.last_message_sent_at)&&$r(e.key_holder_count)===$r(t.key_holder_count)&&$r(e.last_key_purchased_at)===$r(t.last_key_purchased_at)&&$r(e.owned_key_count)===$r(t.owned_key_count);const dx=new class extends o{store=new r("cached-subject-details");constructor(){super(),this.addAllowedEvents("update")}init(){Br.client.channel("subject-details-changes").on("postgres_changes",{event:"*",schema:"public",table:"subject_details"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.subject)})).subscribe()}cache(e){hx(e,this.get(e.subject))||(this.store.set(e.subject,e,!0),this.fireEvent("update",e))}get(e){const t=this.store.get(e);return t||{...lx,subject:e}}async refresh(e){const{data:t,error:n}=await Br.client.from("subject_details").select(ux).eq("subject",e);if(n)throw n;const s=t?.[0];s&&!hx(s,this.get(e))&&this.cache(s)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing subject details:",e))),t}cacheMultiple(e){for(const t of e)this.cache(t)}};class fx{static LIMIT=50;async fetchById(e){const{data:t,error:n}=await Br.client.from("user_details").select(_E).eq("user_id",e);if(n)throw n;return t[0]}async fetchByIds(e){const{data:t,error:n}=await Br.client.from("user_details").select(_E).in("user_id",e);if(n)throw n;return t}async fetchByWalletAddresses(e){const{data:t,error:n}=await Br.client.from("user_details").select(_E).in("wallet_address",e);if(n)throw n;return t}async fetchFollowers(e,t){const{data:n,error:s}=await Br.client.from("follows").select("follower_id, followed_at").eq("followee_id",e).lt("followed_at",t??"infinity").order("followed_at",{ascending:!1}).limit(fx.LIMIT);if(s)throw s;const{data:r,error:i}=await Br.client.from("user_details").select(_E).in("user_id",n.map((e=>e.follower_id)));if(i)throw i;return{userDetailsSet:r,lastFetchedFollowedAt:n[n.length-1]?.followed_at}}async fetchFollowing(e,t){const{data:n,error:s}=await Br.client.from("follows").select("followee_id, followed_at").eq("follower_id",e).lt("followed_at",t??"infinity").order("followed_at",{ascending:!1}).limit(fx.LIMIT);if(s)throw s;const{data:r,error:i}=await Br.client.from("user_details").select(_E).in("user_id",n.map((e=>e.followee_id)));if(i)throw i;return{userDetailsSet:r,lastFetchedFollowedAt:n[n.length-1]?.followed_at}}async fetchHoldings(e){const{data:t,error:n}=await Br.client.from("subject_key_holders").select().eq("wallet_address",e).gt("last_fetched_balance",0);if(n)throw n;const s=t.map((e=>e.subject));return await this.fetchByWalletAddresses(s)}async fetchHolders(e){const{data:t,error:n}=await Br.client.from("subject_key_holders").select().eq("subject",e).gt("last_fetched_balance",0);if(n)throw n;const s=t.map((e=>e.wallet_address));return await this.fetchByWalletAddresses(s)}async fetchNewUsers(){const{data:e,error:t}=await Br.client.from("user_details").select(_E).order("created_at",{ascending:!1}).limit(fx.LIMIT);if(t)throw t;return e}async fetchTopUsers(){const{data:e,error:t}=await Br.client.from("subject_details").select(ux).order("last_fetched_key_price",{ascending:!1}).limit(fx.LIMIT);if(t)throw t;dx.cacheMultiple(e);const n=e.map((e=>e.subject)),s=await this.fetchByWalletAddresses(n);return s.sort(((t,n)=>{const s=e.find((e=>e.subject===t.wallet_address))?.last_fetched_key_price??0;return(e.find((e=>e.subject===n.wallet_address))?.last_fetched_key_price??0)-s})),s}async fetchTrendingUsers(){const{data:e,error:t}=await Br.client.from("subject_details").select(ux).order("last_key_purchased_at",{ascending:!1}).limit(fx.LIMIT);if(t)throw t;dx.cacheMultiple(e);const n=e.map((e=>e.subject)),s=await this.fetchByWalletAddresses(n);return s.sort(((t,n)=>{const s=new Date(e.find((e=>e.subject===t.wallet_address))?.last_key_purchased_at??0).getTime();return new Date(e.find((e=>e.subject===n.wallet_address))?.last_key_purchased_at??0).getTime()-s})),s}}const px=new fx,gx=BigInt(-1),mx=BigInt(0),yx=BigInt(1),bx=BigInt(5),wx={};let vx="0000";for(;vx.length<80;)vx+=vx;function Ax(e){let t=vx;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function _x(e,t,n){const s=BigInt(t.width);if(t.signed){const t=yx<<s-yx;Iu(null==n||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=e>mx?Ju(Yu(e,s),s):-Ju(Yu(-e,s),s)}else{const t=yx<<s;Iu(null==n||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%t+t)%t&t-yx}return e}function kx(e){"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,n=128,s=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const r=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Ou(r,"invalid fixed format","format",e),t="u"!==r[1],n=parseInt(r[2]),s=parseInt(r[3])}else if(e){const r=e,i=(e,t,n)=>null==r[e]?n:(Ou(typeof r[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,r[e]),r[e]);t=i("signed","boolean",t),n=i("width","number",n),s=i("decimals","number",s)}Ou(n%8==0,"invalid FixedNumber width (not byte aligned)","format.width",n),Ou(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);return{signed:t,width:n,decimals:s,name:(t?"":"u")+"fixed"+String(n)+"x"+String(s)}}class Ex{format;#Ze;#et;#tt;_value;constructor(e,t,n){Lu(e,wx,"FixedNumber"),this.#et=t,this.#Ze=n;const s=function(e,t){let n="";e<mx&&(n="-",e*=gx);let s=e.toString();if(0===t)return n+s;for(;s.length<=t;)s=vx+s;const r=s.length-t;for(s=s.substring(0,r)+"."+s.substring(r);"0"===s[0]&&"."!==s[1];)s=s.substring(1);for(;"0"===s[s.length-1]&&"."!==s[s.length-2];)s=s.substring(0,s.length-1);return n+s}(t,n.decimals);xu(this,{format:n.name,_value:s}),this.#tt=Ax(n.decimals)}get signed(){return this.#Ze.signed}get width(){return this.#Ze.width}get decimals(){return this.#Ze.decimals}get value(){return this.#et}#nt(e){Ou(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#st(e,t){return e=_x(e,this.#Ze,t),new Ex(wx,e,this.#Ze)}#rt(e,t){return this.#nt(e),this.#st(this.#et+e.#et,t)}addUnsafe(e){return this.#rt(e)}add(e){return this.#rt(e,"add")}#it(e,t){return this.#nt(e),this.#st(this.#et-e.#et,t)}subUnsafe(e){return this.#it(e)}sub(e){return this.#it(e,"sub")}#ot(e,t){return this.#nt(e),this.#st(this.#et*e.#et/this.#tt,t)}mulUnsafe(e){return this.#ot(e)}mul(e){return this.#ot(e,"mul")}mulSignal(e){this.#nt(e);const t=this.#et*e.#et;return Iu(t%this.#tt===mx,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#st(t/this.#tt,"mulSignal")}#at(e,t){return Iu(e.#et!==mx,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#nt(e),this.#st(this.#et*this.#tt/e.#et,t)}divUnsafe(e){return this.#at(e)}div(e){return this.#at(e,"div")}divSignal(e){Iu(e.#et!==mx,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#nt(e);const t=this.#et*this.#tt;return Iu(t%e.#et===mx,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#st(t/e.#et,"divSignal")}cmp(e){let t=this.value,n=e.value;const s=this.decimals-e.decimals;return s>0?n*=Ax(s):s<0&&(t*=Ax(-s)),t<n?-1:t>n?1:0}eq(e){return 0===this.cmp(e)}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#et;return this.#et<mx&&(e-=this.#tt-yx),e=this.#et/this.#tt*this.#tt,this.#st(e,"floor")}ceiling(){let e=this.#et;return this.#et>mx&&(e+=this.#tt-yx),e=this.#et/this.#tt*this.#tt,this.#st(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=bx*Ax(t-1);let s=this.value+n;const r=Ax(t);return s=s/r*r,_x(s,this.#Ze,"round"),new Ex(wx,s,this.#Ze)}isZero(){return this.#et===mx}isNegative(){return this.#et<mx}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ex.fromString(this.toString(),e)}static fromValue(e,t,n){const s=null==t?0:nh(t),r=kx(n);let i=Xu(e,"value");const o=s-r.decimals;if(o>0){const t=Ax(o);Iu(i%t===mx,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),i/=t}else o<0&&(i*=Ax(-o));return _x(i,r,"fromValue"),new Ex(wx,i,r)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Ou(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const s=kx(t);let r=n[2]||"0",i=n[3]||"";for(;i.length<s.decimals;)i+=vx;Iu(i.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),i=i.substring(0,s.decimals);const o=BigInt(n[1]+r+i);return _x(o,s,"fromString"),new Ex(wx,o,s)}static fromBytes(e,t){let n=th(Ru(e,"value"));const s=kx(t);return s.signed&&(n=Ju(n,s.width)),_x(n,s,"fromBytes"),new Ex(wx,n,s)}}const xx=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Cx(e){return function(e,t){let n=18;if("string"==typeof t){const e=xx.indexOf(t);Ou(e>=0,"invalid unit","unit",t),n=3*e}else null!=t&&(n=nh(t,"unit"));return Ex.fromValue(e,n,{decimals:n,width:512}).toString()}(e,18)}class Sx extends c{userDetails;constructor(e){super(".user-list-item"),this.userDetails=e,this.render(),this.onDelegate(EE,"update",(e=>{e.user_id===this.userDetails.user_id&&(this.userDetails=e,this.render())})),this.onDom("click",(()=>f.go(`/${this.userDetails.x_username}`)))}render(){const e=this.userDetails.wallet_address?dx.get(this.userDetails.wallet_address):void 0;this.empty().append(m(".info-container",m(".profile-image",{style:{backgroundImage:`url(${this.userDetails.profile_image})`}}),m(".info",m(".name",this.userDetails.display_name),this.userDetails.x_username?m(".x-username",`@${this.userDetails.x_username}`):void 0)),m(".metric-container",m("section.price",m(".icon-container",new b("group")),m(".metric",m("h3","Holders"),m(".value",e?String(e.key_holder_count):"0"))),m("section.price",m(".icon-container",new b("sell")),m(".metric",m("h3","Price"),m(".value",e?Cx(e.last_fetched_key_price):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))))}}class Px extends c{emptyMessage;contentFetched=!1;emptyMessageDisplay;constructor(e,t){super(e+".user-list"),this.emptyMessage=t,this.showEmptyMessage()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addUserDetails(e){this.emptyMessageDisplay?.delete(),this.append(new Sx(e))}show(){return this.deleteClass("hidden"),this.contentFetched||(this.fetchContent(),this.contentFetched=!0),this}hide(){this.addClass("hidden")}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class Tx extends Px{store=new r("top-user-list");isContentFromCache=!0;constructor(){super(".top-user-list","No users yet");const e=this.store.get("cached-users");if(e)for(const t of e)this.addUserDetails(t)}async fetchContent(){const e=await px.fetchTopUsers();if(EE.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-users",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}class Ix extends c{constructor(){super(".top-user-section"),this.append(m("h2","Top Users"),(new Tx).show())}hide(){this.addClass("hidden")}show(){this.deleteClass("hidden")}}class Ox extends Px{isContentFromCache=!0;store=new r("trending-user-list");constructor(){super(".trending-user-list","No users yet");const e=this.store.get("cached-users");if(e)for(const t of e)this.addUserDetails(t)}async fetchContent(){const e=await px.fetchTrendingUsers();if(EE.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-users",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}class Nx extends c{searchInput;constructor(){super(".trend-section"),this.append(m("form.search-bar",new b("search"),this.searchInput=m("input",{placeholder:"Search"}),{submit:e=>{e.preventDefault(),f.go(`/search?q=${this.searchInput.domElement.value}`)}}),(new Ox).show())}hide(){this.addClass("hidden")}show(){this.deleteClass("hidden")}}class jx extends Gr{static current;static append(e){jx.current.content.append(e)}container;mobileTitleBar;navBar;content;trendSection;topUserSection;constructor(e,t){super(),jx.current=this,l.append(this.container=m(".layout",this.mobileTitleBar=new ax,this.navBar=new cx,this.content=m("main"),this.trendSection=new Nx,this.topUserSection=new Ix)),this.activeNavBarButton(t)}changeParams(e,t){this.activeNavBarButton(t)}activeNavBarButton(e){this.navBar.activeButton(""===e?"home":e.substring(0,-1===e.indexOf("/")?e.length:e.indexOf("/"))),"explore"===e||"search"===e||"chats"===e||e.startsWith("chats/")?this.trendSection.hide():this.trendSection.show(),"explore"===e||"search"===e?this.topUserSection.show():this.topUserSection.hide(),this.mobileTitleBar.uri=e}close(){this.container.delete(),super.close()}}class Lx extends Gr{container;constructor(e,t){super(),jx.append(this.container=m(t+".chat-room-view"))}close(){this.container.delete(),super.close()}}class Ux extends c{uploadInput;uploadButton;messageInput;constructor(e){super(e+".chat-message-form"),this.append(this.uploadInput=m("input.upload",{type:"file",accept:"image/*",change:e=>{const t=e.target.files?.[0];t&&this._upload(t)}}),this.uploadButton=m("button.upload",new b("image"),{click:()=>this.uploadInput.domElement.click()}),m("form",this.messageInput=m("input"),new v({tag:".send",title:"Send"}),{submit:e=>{e.preventDefault();const t=this.messageInput.domElement.value;t&&this.sendMessage(t),this.messageInput.domElement.value=""}})),this.on("visible",(()=>this.messageInput.domElement.focus()))}async _upload(e){this.uploadButton.domElement.disabled=!0,this.uploadButton.empty().addClass("loading"),await this.upload(e),this.uploadInput.domElement.value="",this.uploadButton.domElement.disabled=!1,this.uploadButton.deleteClass("loading"),this.uploadButton.empty().append(new b("image"))}getOptimisticData(e,t,n){if(!ox.signed)throw new Error("User is not signed");return{id:-1,author:ox.userId,author_name:ox.name,author_avatar_url:ox.avatarUrl,message_type:e,message:t,rich:n,created_at:(new Date).toISOString()}}}var Rx;!function(e){e[e.MESSAGE=0]="MESSAGE",e[e.FILE_UPLOAD=1]="FILE_UPLOAD",e[e.POST_REF=2]="POST_REF"}(Rx||(Rx={}));const Dx={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Mx;const Bx=new Uint8Array(16);function Fx(){if(!Mx&&(Mx="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Mx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mx(Bx)}const $x=[];for(let e=0;e<256;++e)$x.push((e+256).toString(16).slice(1));function Gx(e,t=0){return $x[e[t+0]]+$x[e[t+1]]+$x[e[t+2]]+$x[e[t+3]]+"-"+$x[e[t+4]]+$x[e[t+5]]+"-"+$x[e[t+6]]+$x[e[t+7]]+"-"+$x[e[t+8]]+$x[e[t+9]]+"-"+$x[e[t+10]]+$x[e[t+11]]+$x[e[t+12]]+$x[e[t+13]]+$x[e[t+14]]+$x[e[t+15]]}const Hx=function(e,t,n){if(Dx.randomUUID&&!t&&!e)return Dx.randomUUID();const s=(e=e||{}).random||(e.rng||Fx)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return Gx(s)};const zx=new class{async uploadFile(e,t,n){const{data:s,error:r}=await Br.client.storage.from(e).upload(`${t}/${Hx()}_${n.name}`,n);if(r)throw r;return s.path}async createSignedUrl(e,t,n){const{data:s,error:r}=await Br.client.storage.from(e).createSignedUrl(t,n);if(r)throw r;return s.signedUrl}async uploadImage(e,t,n,s,r){const i=await this.uploadFile(e,t,n),o=await this.createSignedUrl(e,i,s),{data:a,error:c}=await Br.client.storage.from(e).createSignedUrl(i,s,{transform:r});if(c)throw c;return{url:o,thumbnailUrl:a.signedUrl}}};class Wx{static FETCH_MESSAGE_LIMIT=100;async sendMessage(e,t){const{data:n,error:s}=await Br.client.from("subject_chat_messages").insert({subject:e,message_type:Rx.MESSAGE,message:t}).select().single();if(s)throw s;return n.id}async uploadImage(e,t){if(!ox.userId)throw new Error("User not signed in");const n=await zx.uploadImage("subject_chat_upload_files",ox.userId,t,2592e3,{width:256,height:256}),s={url:n.url,thumbnailUrl:n.thumbnailUrl,fileName:t.name,fileType:t.type,fileSize:t.size},{data:r,error:i}=await Br.client.from("subject_chat_messages").insert({subject:e,message_type:Rx.FILE_UPLOAD,rich:{files:[s]}}).select().single();if(i)throw i;return r.id}async fetchLatestMessages(e){const{data:t,error:n}=await Br.client.from("subject_chat_messages").select().eq("subject",e).order("created_at",{ascending:!1}).limit(Wx.FETCH_MESSAGE_LIMIT);if(n)throw n;return t}}const qx=new Wx;class Kx extends Ux{messageList;constructor(e){super(".subject-chat-message-form"),this.messageList=e}async sendMessage(e){const t={subject:this.messageList.subject,...this.getOptimisticData(Rx.MESSAGE,e)},n=this.messageList.addMessage(t).wait(),s=await qx.sendMessage(this.messageList.subject,e);this.messageList.findMessageItem(s)?.delete(),n.message.id=s,n.done()}async upload(e){await qx.uploadImage(this.messageList.subject,e)}}class Vx extends c{message;constructor(e){super(".chat-message-list-item"),this.message=e,this.addAllowedEvents("imageLoaded"),this.render(),this.onDelegate(ox,"userFetched",(()=>this.render()))}render(){this.empty().deleteClass("owner"),ox.signed&&this.message.author===ox.userId?this.append(m("main",m("header",m(".author",m(".name",this.message.author_name,{click:()=>f.go(`/${this.message.author_x_username}`)}))),this.message.message?m("p.message",this.message.message):void 0,this.message.rich?this.getRich(this.message.rich):void 0,m(".date",zr()(this.message.created_at).fromNow())),m(".author-profile-image",{style:{backgroundImage:`url(${this.message.author_avatar_url})`},click:()=>f.go(`/${this.message.author_x_username}`)})).addClass("owner"):this.append(m(".author-profile-image",{style:{backgroundImage:`url(${this.message.author_avatar_url})`},click:()=>f.go(`/${this.message.author_x_username}`)}),m("main",m("header",m(".author",m(".name",this.message.author_name,{click:()=>f.go(`/${this.message.author_x_username}`)}))),this.message.message?m("p.message",this.message.message):void 0,this.message.rich?this.getRich(this.message.rich):void 0,m(".date",zr()(this.message.created_at).fromNow())))}getRich(e){if(e.files)return m(".files",...e.files.map((e=>m(".file",e.thumbnailUrl?m(".image-container",m("a",m("img",{src:e.thumbnailUrl,load:()=>{this.deleted||this.fireEvent("imageLoaded")}}),{href:e.url,target:"_blank"})):void 0))))}wait(){return this.addClass("waiting"),this}done(){return this.deleteClass("waiting"),this}}class Jx extends c{emptyMessage;emptyMessageDisplay;constructor(e,t){super(e+".chat-message-list"),this.emptyMessage=t,this.showEmptyMessage(),this.on("visible",(()=>{this.scrollToBottom(),setTimeout((()=>{this.deleted||this.scrollToBottom()}))}))}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addMessage(e){this.emptyMessageDisplay?.delete();const t=new Vx(e);return t.on("imageLoaded",(()=>this.scrollToBottom())),this.append(t),this.scrollToBottom(),t}findMessageItem(e){return this.children.find((t=>t instanceof Vx&&t.message.id===e))}scrollToBottom(){this.domElement.scrollTo(0,this.domElement.scrollHeight)}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class Qx extends Jx{subject;store;isContentFromCache=!0;channel;constructor(e){super(".subject-chat-message-list","No messages yet."),this.subject=e,this.store=new r(`subject-${this.subject}-chat-message-list`);const t=this.store.get("cached-messages");if(t)for(const e of t)this.addMessage(e);this.fetchMessages(),this.channel=Br.client.channel(`subject-${e}-chat-message-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"subject_chat_messages",filter:"subject=eq."+e},(e=>{this.findMessageItem(e.new.id)?.delete();const t=this.store.get("cached-messages")??[];t.push(e.new),this.store.set("cached-messages",t,!0),this.addMessage(e.new)})).subscribe()}async fetchMessages(){const e=(await qx.fetchLatestMessages(this.subject)).reverse();if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-messages",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addMessage(t)}delete(){this.channel.unsubscribe(),super.delete()}}class Yx extends c{constructor(e){super(e+".chat-room-header")}}class Xx extends Yx{subject;subjectDetails;userDetails;constructor(e){super(".subject-chat-room-header"),this.subject=e,this.subjectDetails=dx.getAndRefresh(e),this.userDetails=EE.getAndRefreshByWalletAddress(e),this.render(),this.onDelegate(dx,"update",(e=>{e.subject===this.subject&&(this.subjectDetails=e,this.render())})),this.onDelegate(EE,"update",(e=>{e.wallet_address===this.subject&&(this.userDetails=e,this.render())}))}render(){this.empty().append(m("header",m("button.back",new b("arrow_back"),{click:()=>history.back()}),m(".subject-owner-profile-image",{style:{backgroundImage:`url(${this.userDetails.profile_image})`},click:()=>f.go(`/${this.userDetails.x_username}`)}),m(".subject-owner-info",m(".name",this.userDetails.display_name,{click:()=>f.go(`/${this.userDetails.x_username}`)}),this.userDetails.x_username?m(".x-username",`@${this.userDetails.x_username}`,{click:()=>f.go(`/${this.userDetails.x_username}`)}):void 0)),m("footer"))}}class Zx extends Lx{subject;messageList;constructor(e){super(e,".subject-chat-room-view"),this.subject="0x"+e.subject,this.render()}changeParams(e,t){this.subject="0x"+e.subject,this.render()}render(){const e=rd(this.subject);this.container.empty().append(new Xx(e),this.messageList=new Qx(e),new Kx(this.messageList))}}class eC{static FETCH_MESSAGE_LIMIT=100;async sendMessage(e,t){const{data:n,error:s}=await Br.client.from("topic_chat_messages").insert({topic:e,message_type:Rx.MESSAGE,message:t}).select().single();if(s)throw s;return n.id}async uploadImage(e,t){if(!ox.userId)throw new Error("User not signed in");const n=await zx.uploadImage("topic_chat_upload_files",ox.userId,t,2592e3,{width:256,height:256}),s={url:n.url,thumbnailUrl:n.thumbnailUrl,fileName:t.name,fileType:t.type,fileSize:t.size},{data:r,error:i}=await Br.client.from("topic_chat_messages").insert({topic:e,message_type:Rx.FILE_UPLOAD,rich:{files:[s]}}).select().single();if(i)throw i;return r.id}async fetchLatestMessages(e){const{data:t,error:n}=await Br.client.from("topic_chat_messages").select().eq("topic",e).order("created_at",{ascending:!1}).limit(eC.FETCH_MESSAGE_LIMIT);if(n)throw n;return t}}const tC=new eC;class nC extends Ux{messageList;constructor(e){super(".topic-chat-message-form"),this.messageList=e}async sendMessage(e){const t={topic:this.messageList.topic,...this.getOptimisticData(Rx.MESSAGE,e)},n=this.messageList.addMessage(t).wait(),s=await tC.sendMessage(this.messageList.topic,e);this.messageList.findMessageItem(s)?.delete(),n.message.id=s,n.done()}async upload(e){await tC.uploadImage(this.messageList.topic,e)}}class sC extends Jx{topic;store;isContentFromCache=!0;channel;constructor(e){super(".topic-chat-message-list","No messages yet."),this.topic=e,this.store=new r(`topic-${e}-chat-message-list`);const t=this.store.get("cached-messages");if(t)for(const e of t)this.addMessage(e);this.fetchMessages(),this.channel=Br.client.channel(`topic-${e}-chat-message-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"topic_chat_messages",filter:"topic=eq."+e},(e=>{this.findMessageItem(e.new.id)?.delete();const t=this.store.get("cached-messages")??[];t.push(e.new),this.store.set("cached-messages",t,!0),this.addMessage(e.new)})).subscribe()}async fetchMessages(){const e=(await tC.fetchLatestMessages(this.topic)).reverse();if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-messages",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addMessage(t)}delete(){this.channel.unsubscribe(),super.delete()}}class rC extends Yx{constructor(e){super(".topic-chat-room-header"),this.append(m("header",m("button.back",new b("arrow_back"),{click:()=>history.back()}),m("h1",e)),m("footer"))}}class iC extends Lx{topic;messageList;constructor(e){super(e,".topic-chat-room-view"),this.topic=e.topic,this.render()}changeParams(e,t){this.topic=e.topic,this.render()}render(){this.container.deleteClass("mobile-hidden"),this.topic||this.container.addClass("mobile-hidden");const e=this.topic?this.topic.toLowerCase():"general";this.container.empty().append(new rC(e),this.messageList=new sC(e),new nC(this.messageList))}}const oC=new class{async fetchSubject(e){const{data:t,error:n}=await Br.client.from("subject_details").select(ux).eq("subject",e);if(n)throw n;return t?.[0]}async fetchHoldingSubjects(e){const{data:t,error:n}=await Br.client.from("subject_key_holders").select("subject").eq("wallet_address",e).gt("last_fetched_balance",0);if(n)throw n;const s=t.map((e=>e.subject)),{data:r,error:i}=await Br.client.from("subject_details").select(ux).in("subject",s);if(i)throw i;return r}async fetchFollowingSubjects(e){const{data:t,error:n}=await Br.client.from("follows").select("followee_id").eq("follower_id",e).order("followed_at",{ascending:!1});if(n)throw n;const s=t.map((e=>e.followee_id)),{data:r,error:i}=await Br.client.from("user_details").select().in("user_id",s);if(i)throw i;const o=r.map((e=>e.wallet_address)),{data:a,error:c}=await Br.client.from("subject_details").select(ux).in("subject",o);if(c)throw c;return a}};class aC extends c{emptyMessage;emptyMessageDisplay;constructor(e,t){super(e+".chat-room-list"),this.emptyMessage=t,this.showEmptyMessage()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class cC extends c{constructor(e){super(e+".chat-room-list-item")}}class lC extends cC{subjectDetails;userDetails;constructor(e){super(".subject-list-item"),this.subjectDetails=e,this.userDetails=EE.getByWalletAddress(e.subject),this.render(),this.onDelegate(dx,"update",(e=>{e.subject===this.subjectDetails.subject&&(this.subjectDetails=e,this.render())})),this.onDelegate(EE,"update",(e=>{e.wallet_address===this.subjectDetails.subject&&(this.userDetails=e,this.render())})),this.onDom("click",(()=>f.go(`/chats/${e.subject}`)))}render(){this.empty().append(m(".subject-owner-profile-image",{style:{backgroundImage:`url(${this.userDetails.profile_image})`}}),m(".subject-owner-info",m(".name",this.userDetails.display_name),this.userDetails.x_username?m(".x-username",`@${this.userDetails.x_username}`):void 0))}}class uC extends aC{constructor(e,t){super(e+".subject-list",t)}addSubjectDetails(e){this.emptyMessageDisplay?.delete(),this.append(new lC(e))}async fetchUsers(e){const t=e.map((e=>e.subject)),n=await px.fetchByWalletAddresses(t);EE.cacheMultiple(n)}}class hC extends uC{store=new r("hoding-subject-list");constructor(){if(super(".holding-subject-list","No holding subjects yet."),ox.walletAddress&&ox.walletAddress===this.store.get("cached-wallet-address")){const e=this.store.get("cached-holding-subjects");if(e)for(const t of e)this.addSubjectDetails(t)}this.fetchSubjects()}async fetchSubjects(){if(ox.walletAddress){this.store.set("cached-wallet-address",ox.walletAddress,!0);const e=await oC.fetchHoldingSubjects(ox.walletAddress);if(this.store.set("cached-holding-subjects",e,!0),dx.cacheMultiple(e),await this.fetchUsers(e),!this.deleted)if(this.empty(),0===e.length)this.showEmptyMessage();else for(const t of e)this.addSubjectDetails(t)}}}class dC extends uC{store=new r("my-subject-list");constructor(){if(super(".my-subject-list","No my subjects yet."),ox.walletAddress&&ox.walletAddress===this.store.get("cached-wallet-address")){const e=this.store.get("cached-my-subjects");if(e)for(const t of e)this.addSubjectDetails(t)}this.fetchSubjects()}async fetchSubjects(){if(ox.walletAddress){this.store.set("cached-wallet-address",ox.walletAddress,!0);const e=await oC.fetchSubject(ox.walletAddress);e&&(this.store.set("cached-my-subjects",[e],!0),dx.cache(e),await this.fetchUsers([e]),this.deleted||(this.empty(),this.addSubjectDetails(e)))}}}class fC extends cC{constructor(e){super(".topic-list-item"),this.append(m("h3",e)),this.onDom("click",(()=>f.go(`/chats/${e}`)))}}class pC extends aC{constructor(e,t){super(e+".topic-list",t)}addTopic(e){this.emptyMessageDisplay?.delete(),this.append(new fC(e))}}class gC extends pC{constructor(){super(".general-topic-list","No general topics yet."),this.addTopic("general")}}class mC extends c{constructor(){super(".login-required"),this.append(m("p","This page requires login. Would you like to login?"),m("button","Login with ",{click:()=>ox.signIn()}))}}class yC extends Gr{container;constructor(e){super(),jx.append(this.container=m(".chats-view")),this.render(),this.container.onDelegate(ox,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("h1","Chats")),ox.signed?this.container.append(m("main",m("section.chat",m("h2","General"),new gC),m("section.chat",m("h2","My"),new dC),m("section.chat",m("h2","Holding"),new hC))):this.container.append(m("main",m("section.chat",m("h2","General"),new gC),new mC))}close(){this.container.delete(),super.close()}}class bC extends w{content;constructor(){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.switch-to-avax-popup",m("header",m("h1","Switch to Avalanche for Igloo")),m("main",m("img.banner",{src:"/images/avax-banner.jpg"}),m("p","Igloo operates on Avalanche. To utilize Igloo, please change your wallet's chain to Avalanche."),m("p",m("a","What is Avalanche?",{href:"https://www.avax.network/",target:"_blank"}))),m("footer",new v({type:_.Text,tag:".cancel-button",click:()=>{new x({title:"Warning",message:"If you do not switch to Avalanche, Igloo may not function properly. Ensure you change the chain for a seamless experience.",confirmTitle:"Understood"}),this.delete()},title:"Later"}),new v({tag:".switch-button",click:async()=>{await pE({chainId:Xw.avaxChainId}),this.delete()},title:"Switch Now"}))))}}class wC extends o{abi;viewContract;address;constructor(e){super(),this.abi=e}init(e){this.address=e,this.viewContract=new tg(this.address,this.abi,new Jw(Xw.avaxRpc))}async getWriteContract(){if(!ox.signed)return void new C({title:"Not signed in",message:"You need to sign in to perform this action",confirmTitle:"Sign in"},(()=>ox.signIn()));!0!==sx.connected&&await sx.connect();const e=await aE();if(!e)return void new S({title:"No wallet connected",message:"You need to connect a wallet to perform this action"});if(!ox.walletAddress)return void new C({title:"No wallet linked",message:"You need to link a wallet to perform this action",confirmTitle:"Link wallet"},(()=>ox.linkWallet()));const{account:t}=e;if(t.address!==ox.walletAddress)return void new S({title:"Wallet address mismatch",message:"The wallet address associated with your account and the current crypto wallet address do not match. Please change the crypto wallet address."});const{chain:n}=fE();if(!n)return void new S({title:"Invalid network",message:"You need to be on the Avalanche network to perform this action"});if(n.id!==Xw.avaxChainId)return void new bC;const s=await ox.getContractSigner();return s?new tg(this.address,this.abi,s):void 0}}const vC=JSON.parse('{"Mt":[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"token","type":"address"}],"name":"SetMembershipToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"weight","type":"uint256"}],"name":"SetMembershipWeight","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"destination","type":"address"}],"name":"SetProtocolFeeDestination","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"percent","type":"uint256"}],"name":"SetProtocolFeePercent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"percent","type":"uint256"}],"name":"SetSubjectFeePercent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"trader","type":"address"},{"indexed":true,"internalType":"address","name":"subject","type":"address"},{"indexed":true,"internalType":"bool","name":"isBuy","type":"bool"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"protocolFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"subjectFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"supply","type":"uint256"}],"name":"Trade","type":"event"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"buyKeys","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"subject","type":"address"}],"name":"calculateAdditionalFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getBuyPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getBuyPriceAfterFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"supply","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getSellPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getSellPriceAfterFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address payable","name":"_protocolFeeDestination","type":"address"},{"internalType":"uint256","name":"_protocolFeePercent","type":"uint256"},{"internalType":"uint256","name":"_subjectFeePercent","type":"uint256"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"keysBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"keysSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"membershipToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"membershipWeight","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"sellKeys","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_token","type":"address"}],"name":"setMembershipToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_weight","type":"uint256"}],"name":"setMembershipWeight","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"setProtocolFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_feePercent","type":"uint256"}],"name":"setProtocolFeePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_feePercent","type":"uint256"}],"name":"setSubjectFeePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"subjectFeePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]}');const AC=new class extends wC{constructor(){super(vC.Mt)}async getBuyPrice(e,t){return this.viewContract.getBuyPrice(e,t)}async getSellPrice(e,t){return this.viewContract.getSellPrice(e,t)}async getBuyPriceAfterFee(e,t){return this.viewContract.getBuyPriceAfterFee(e,t)}async getSellPriceAfterFee(e,t){return this.viewContract.getSellPriceAfterFee(e,t)}async getKeysBalance(e,t){return this.viewContract.keysBalance(e,t)}async buyKeys(e,t,n){const s=await this.getWriteContract();if(!s)throw new Error("No signer");return(await s.buyKeys(e,t,{value:n})).wait()}async sellKeys(e,t){const n=await this.getWriteContract();if(!n)throw new Error("No signer");return(await n.sellKeys(e,t)).wait()}};class _C extends c{constructor(e){super(".activity-list-item");const t=EE.getByWalletAddress(e.wallet_address),n=EE.getByWalletAddress(e.subject),s="true"===e.args[2],r=e.args[3],i=Cx(e.args[4]);this.append(m("header",m(".trader-profile-image",{style:{backgroundImage:`url(${t.profile_image})`},click:()=>f.go(`/${t.x_username}`)}),m(".owner-profile-image",{style:{backgroundImage:`url(${n.profile_image})`},click:()=>f.go(`/${n.x_username}`)})),m("p.description",m("a",t.display_name,{click:()=>f.go(`/${t.x_username}`)}),(s?" bought ":" sold ")+r+" ",m("a",n.display_name,{click:()=>f.go(`/${n.x_username}`)})," key for ",i," AVAX."),m(".date",zr()(Zw.blockToTime(e.block_number)).fromNow(!0)))}}class kC extends c{store=new r("activity-list");isContentFromCache=!0;contentFetched=!1;emptyMessageDisplay;channel;constructor(){super(".activity-list"),this.showEmptyMessage();const e=this.store.get("cached-subject-trade-events");if(e)for(const t of e)this.addSubjectContractEvent(t);this.channel=Br.client.channel("activity-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"subject_trade_events"},(e=>{const t=this.store.get("cached-subject-trade-events")??[];t.push(e.new),this.store.set("cached-subject-trade-events",t,!0),this.addSubjectContractEvent(e.new)})).subscribe()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message","No activities yet"),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addSubjectContractEvent(e){this.emptyMessageDisplay?.delete(),this.append(new _C(e))}async fetchActivities(){const{data:e,error:t}=await Br.client.from("subject_trade_events").select().order("block_number",{ascending:!1}).order("log_index",{ascending:!1}).limit(100);if(t)throw t;if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-subject-trade-events",e,!0),await this.fetchUsers(e),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addSubjectContractEvent(t)}async fetchUsers(e){const t=new Set;for(const n of e)t.add(n.wallet_address),t.add(n.subject);const n=await px.fetchByWalletAddresses(Array.from(t));EE.cacheMultiple(n)}show(){this.deleteClass("hidden"),this.contentFetched||(this.fetchActivities(),this.contentFetched=!0)}hide(){this.addClass("hidden")}delete(){this.channel.unsubscribe(),super.delete()}}class EC extends Px{store=new r("new-user-list");isContentFromCache=!0;constructor(){super(".new-user-list","No users yet");const e=this.store.get("cached-users");if(e)for(const t of e)this.addUserDetails(t)}async fetchContent(){const e=await px.fetchNewUsers();if(EE.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-users",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}class xC extends Gr{container;tabs;searchInput;trendingUserList;topUserList;newUsersList;activityList;constructor(e){super(),jx.append(this.container=m(".explore-view",m("h1","Explorer"),m("form.search-bar",new b("search"),this.searchInput=m("input",{placeholder:"Search"}),{submit:e=>{e.preventDefault(),f.go(`/search?q=${this.searchInput.domElement.value}`)}}),this.tabs=new T("explore",[{id:"trending",label:"Trending"},{id:"top",label:"Top"},{id:"new",label:"New"},{id:"activity",label:"Activity"}]),this.trendingUserList=new Ox,this.topUserList=new Tx,this.newUsersList=new EC,this.activityList=new kC)),this.tabs.on("select",(e=>{[this.trendingUserList,this.topUserList,this.newUsersList,this.activityList].forEach((e=>e.hide())),"trending"===e?this.trendingUserList.show():"top"===e?this.topUserList.show():"new"===e?this.newUsersList.show():"activity"===e&&this.activityList.show()})).init()}close(){this.container.delete(),super.close()}}class CC extends Gr{container;searchInput;constructor(e){super(),jx.append(this.container=m(".search-view",m("h1","Search"),m("form.search-bar",new b("search"),this.searchInput=m("input",{placeholder:"Search",value:new URLSearchParams(location.search).get("q")??""}),{submit:e=>{e.preventDefault(),f.go(`/search?q=${this.searchInput.domElement.value}`)}}))),this.fetchSearchResults()}changeParams(e,t){this.fetchSearchResults()}async fetchSearchResults(){console.log(new URLSearchParams(location.search).get("q"))}close(){this.container.delete(),super.close()}}var SC;!function(e){e[e.EVERYONE=0]="EVERYONE",e[e.KEY_HOLDERS=1]="KEY_HOLDERS"}(SC||(SC={}));const PC=(e,t)=>$r(e?.id)===$r(t?.id)&&$r(e?.guild_id)===$r(t?.guild_id)&&$r(e?.target)===$r(t?.target)&&$r(e?.author)===$r(t?.author)&&$r(e?.author_name)===$r(t?.author_name)&&$r(e?.author_avatar_url)===$r(t?.author_avatar_url)&&$r(e?.author_x_username)===$r(t?.author_x_username)&&$r(e?.message)===$r(t?.message)&&((e,t)=>e.files?.length===t.files?.length&&(e.files?.every(((e,n)=>{const s=t.files?.[n];return $r(e.url)===$r(s?.url)&&$r(e.thumbnailUrl)===$r(s?.thumbnailUrl)&&$r(e.fileName)===$r(s?.fileName)&&$r(e.fileType)===$r(s?.fileType)&&$r(e.fileSize)===$r(s?.fileSize)}))??!1))(e?.rich??{},t?.rich??{})&&$r(e?.post_ref)===$r(t?.post_ref)&&$r(e?.comment_count)===$r(t?.comment_count)&&$r(e?.repost_count)===$r(t?.repost_count)&&$r(e?.like_count)===$r(t?.like_count);const TC=new class extends o{store=new r("cached-posts");constructor(){super(),this.addAllowedEvents("update","delete")}init(){Br.client.channel("posts-changes").on("postgres_changes",{event:"*",schema:"public",table:"posts"},(e=>{"INSERT"===e.eventType||"UPDATE"===e.eventType?this.refresh(e.new.id):"DELETE"===e.eventType&&this.deleteCache(e.old.id)})).subscribe()}deleteCache(e){this.store.delete(String(e)),this.fireEvent("delete",e)}cache(e,t){t?PC(t,this.get(e))||(this.store.set(String(e),t,!0),this.fireEvent("update",t)):this.deleteCache(e)}get(e){const t=this.store.get(String(e));if(t)return t}async refresh(e){const{data:t,error:n}=await Br.client.from("posts").select().eq("id",e);if(n)throw n;const s=t?.[0];this.cache(e,s)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing post:",e))),t}cachePosts(e){for(const t of e)this.cache(t.id,t)}};class IC{static LIMIT=50;async post(e,t,n){const{data:s,error:r}=await Br.client.from("posts").insert({target:e,message:t,rich:n?{files:[n]}:void 0}).select().single();if(r)throw r;return s.id}async comment(e,t,n){const{data:s,error:r}=await Br.client.from("posts").insert({message:t,post_ref:e,rich:n?{files:[n]}:void 0}).select().single();if(r)throw r;return s.id}async repost(e){const{error:t}=await Br.client.from("reposts").insert({post_id:e});if(t)throw t}async unrepost(e){const{error:t}=await Br.client.from("reposts").delete().eq("post_id",e);if(t)throw t}async checkRepost(e,t){const{data:n,error:s}=await Br.client.from("reposts").select("post_id").eq("post_id",e).eq("user_id",t);if(s)throw s;return void 0!==n?.[0]}async checkMultipleRepost(e,t){const{data:n,error:s}=await Br.client.from("reposts").select("post_id").in("post_id",e).eq("user_id",t);if(s)throw s;return n?n.map((e=>e.post_id)):[]}async like(e){const{error:t}=await Br.client.from("post_likes").insert({post_id:e});if(t)throw t}async unlike(e){const{error:t}=await Br.client.from("post_likes").delete().eq("post_id",e);if(t)throw t}async checkLike(e,t){const{data:n,error:s}=await Br.client.from("post_likes").select("post_id").eq("post_id",e).eq("user_id",t);if(s)throw s;return void 0!==n?.[0]}async checkMultipleLike(e,t){const{data:n,error:s}=await Br.client.from("post_likes").select("post_id").in("post_id",e).eq("user_id",t);if(s)throw s;return n?n.map((e=>e.post_id)):[]}async deletePost(e){const{error:t}=await Br.client.from("posts").delete().eq("id",e);if(t)throw t}async fetchPost(e){const{data:t,error:n}=await Br.client.from("posts").select().eq("id",e);if(n)throw n;return t?.[0]}async fetchGlobalPosts(e){const{data:t,error:n}=await Br.client.from("posts").select().lt("id",e??Number.MAX_SAFE_INTEGER).is("post_ref",null).order("created_at",{ascending:!1}).limit(IC.LIMIT);if(n)throw n;return t}async fetchUserPosts(e,t){const{data:n,error:s}=await Br.client.from("posts").select().eq("author",e).is("post_ref",null).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(IC.LIMIT);if(s)throw s;return n}async fetchUserCommentPosts(e,t){const{data:n,error:s}=await Br.client.from("posts").select().eq("author",e).not("post_ref","is",null).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(IC.LIMIT);if(s)throw s;return n}async fetchLikedPosts(e,t){const{data:n,error:s}=await Br.client.from("post_likes").select().eq("user_id",e).gt("created_at",t??"1970-01-01T00:00:00.000Z");if(s)throw s;const r=n.map((e=>e.post_id)),{data:i,error:o}=await Br.client.from("posts").select().in("id",r).order("created_at",{ascending:!1});if(o)throw o;return i.map((e=>({post:e,likedAt:n.find((t=>t.post_id===e.id))?.created_at})))}async fetchReposts(e,t){const{data:n,error:s}=await Br.client.from("reposts").select().eq("user_id",e).gt("created_at",t??"1970-01-01T00:00:00.000Z");if(s)throw s;const r=n.map((e=>e.post_id)),{data:i,error:o}=await Br.client.from("posts").select().in("id",r).order("created_at",{ascending:!1});if(o)throw o;return i.map((e=>({post:e,repostedAt:n.find((t=>t.post_id===e.id))?.created_at})))}async fetchFollowingPosts(e,t){const{data:n,error:s}=await Br.client.from("follows").select().eq("follower_id",e).order("followed_at",{ascending:!1});if(s)throw s;const r=n.map((e=>e.followee_id)),{data:i,error:o}=await Br.client.from("posts").select().in("author",r).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(IC.LIMIT);if(o)throw o;return{followeeIds:r,posts:i}}async fetchKeyHeldPosts(e,t){const{data:n,error:s}=await Br.client.from("subject_key_holders").select().eq("wallet_address",e);if(s)throw s;const r=n.map((e=>e.subject)),{data:i,error:o}=await Br.client.from("user_details").select().in("wallet_address",r);if(o)throw o;const a=i.map((e=>e.user_id)),{data:c,error:l}=await Br.client.from("posts").select().in("author",a).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(IC.LIMIT);if(l)throw l;return{keyOwnerIds:a,posts:c}}async fetchComments(e,t){const{data:n,error:s}=await Br.client.from("posts").select().eq("post_ref",e).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(IC.LIMIT);if(s)throw s;return n}async upload(e){if(!ox.userId)throw new Error("User not signed in");const t=await zx.uploadImage("post_upload_files",ox.userId,e,2592e3,{width:256,height:256});return{url:t.url,thumbnailUrl:t.thumbnailUrl,fileName:e.name,fileType:e.type,fileSize:e.size}}}const OC=new IC;class NC extends w{sourcePost;content;commentTextarea;uploadInput;uploadButton;commentButton;uploadedFile;constructor(e){super({barrierDismissible:!0}),this.sourcePost=e,this.append(this.content=new g(".popup.post-comment-popup",m(".source",m(".author-profile-image",{style:{backgroundImage:`url(${this.sourcePost.author_avatar_url})`}}),m("main",m("header",m(".author",m(".name",this.sourcePost.author_name),this.sourcePost.author_x_username?m(".x-username",`@${this.sourcePost.author_x_username}`):void 0),m("button",new b("close"),{click:()=>this.delete()})),m("p.message",this.sourcePost.message))),m(".form-wrapper",m(".signed-user",{style:{backgroundImage:`url(${ox.avatarUrl})`}}),m(".form",m("main",this.commentTextarea=m("textarea",{placeholder:"What's on your mind?"})),m("footer",this.uploadInput=m("input.upload",{type:"file",accept:"image/*",change:e=>{const t=e.target.files?.[0];t&&this.upload(t)}}),this.uploadButton=m("button.icon-button",new b("image"),{click:()=>this.uploadInput.domElement.click()}),this.commentButton=new v({tag:".post-button",click:()=>this.postComment(),title:"Post"})))))),this.commentTextarea.domElement.focus()}async upload(e){this.uploadButton.domElement.disabled=!0,this.uploadButton.addClass("loading"),this.uploadedFile=await OC.upload(e),this.uploadButton.empty().append(m("img",{src:this.uploadedFile.thumbnailUrl??this.uploadedFile.url})),this.uploadInput.domElement.value="",this.uploadButton.domElement.disabled=!1,this.uploadButton.deleteClass("loading")}async postComment(){this.commentButton.disable().text="Posting...";try{const e=await OC.comment(this.sourcePost.id,this.commentTextarea.domElement.value,this.uploadedFile);new k({message:"Your post has been successfully published.",action:{title:"View",click:()=>f.go(`/post/${e}`)}}),this.delete()}catch(e){console.error(e),this.uploadButton.empty().append(new b("image")),this.commentButton.enable().text="Post"}}}class jC extends c{post;reposted;liked;repostCountDisplay;likeCountDisplay;constructor(e,t,n){super(".post-list-item"),this.post=e,this.reposted=t,this.liked=n,this.onDom("click",(()=>f.go(`/post/${e.id}`))),t&&this.addClass("reposted"),n&&this.addClass("liked"),this.render(),this.onDelegate(TC,"update",(e=>{e.id===this.post.id&&(this.post=e,this.render())})),this.onDelegate(TC,"delete",(e=>{e===this.post.id&&this.delete()})),this.checkSigned(),this.onDelegate(ox,"userFetched",(()=>this.checkSigned()))}render(){this.empty().append(m(".author-profile-image",{style:{backgroundImage:`url(${this.post.author_avatar_url})`},click:e=>this.goAuthorProfile(e)}),m("main",m("header",m(".author",m(".name",this.post.author_name,{click:e=>this.goAuthorProfile(e)}),this.post.author_x_username?m(".x-username",`@${this.post.author_x_username}`,{click:e=>this.goAuthorProfile(e)}):void 0),m("button.owner-menu",new b("more_vert"),{click:(e,t)=>{e.stopPropagation();const n=t.rect;new y({left:n.right-160,top:n.top,items:[{title:"Delete",click:()=>{new C({title:"Delete Post",message:"Are you sure you want to delete this post?",confirmTitle:"Delete",loadingTitle:"Deleting..."},(()=>OC.deletePost(this.post.id)))}}]})}})),m("p.message",this.post.message),this.post.rich?this.getRich(this.post.rich):void 0,m(".date",zr()(this.post.created_at).fromNow()),m("footer",m("button.comment",new b("comment"),String(this.post.comment_count),{click:e=>{e.stopPropagation(),new NC(this.post)}}),m("button.repost",new b("repeat"),this.repostCountDisplay=m("span",String(this.post.repost_count)),{click:e=>{e.stopPropagation(),this.reposted?(OC.unrepost(this.post.id),this.post.repost_count-=1,this.repostCountDisplay.text=String(this.post.repost_count),this.reposted=!1,this.deleteClass("reposted")):(OC.repost(this.post.id),this.post.repost_count+=1,this.repostCountDisplay.text=String(this.post.repost_count),this.reposted=!0,this.addClass("reposted"))}}),m("button.like",new b("favorite_border"),this.likeCountDisplay=m("span",String(this.post.like_count)),{click:e=>{e.stopPropagation(),this.liked?(OC.unlike(this.post.id),this.post.like_count-=1,this.likeCountDisplay.text=String(this.post.like_count),this.liked=!1,this.deleteClass("liked")):(OC.like(this.post.id),this.post.like_count+=1,this.likeCountDisplay.text=String(this.post.like_count),this.liked=!0,this.addClass("liked"))}}))))}getRich(e){if(e.files)return m(".files",...e.files.map((e=>m(".file",e.thumbnailUrl?m(".image-container",m("a",m("img",{src:e.thumbnailUrl}),{href:e.url,target:"_blank",click:e=>e.stopPropagation()})):void 0))))}checkSigned(){this.post.author===ox.userId&&this.addClass("owned")}goAuthorProfile(e){e.stopPropagation(),f.go(`/${this.post.author_x_username}`)}}class LC extends c{emptyMessage;contentFetched=!1;emptyMessageDisplay;lastFetchedPostId;constructor(e,t){super(e+".post-list"),this.emptyMessage=t,this.showEmptyMessage()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addPost(e,t,n){this.emptyMessageDisplay?.delete(),new jC(e,t,n).appendTo(this,0)}show(){return this.deleteClass("hidden"),this.contentFetched||(this.fetchContent(),this.contentFetched=!0),this}hide(){return this.addClass("hidden"),this}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class UC extends LC{userId;store=new r("following-post-list");isContentFromCache=!0;channel;constructor(e){super(".following-post-list","No posts from followed users yet"),this.userId=e;const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id))}async fetchContent(){const e=await OC.fetchFollowingPosts(this.userId,this.lastFetchedPostId),t=e.posts.reverse();TC.cachePosts(t),this.lastFetchedPostId=t[t.length-1]?.id;const n=t.map((e=>e.id)),s=ox.userId?await OC.checkMultipleRepost(n,ox.userId):[],r=ox.userId?await OC.checkMultipleLike(n,ox.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",t,!0),this.store.set("cached-reposted-post-ids",s,!0),this.store.set("cached-liked-post-ids",r,!0),this.deleted||this.empty()),!this.deleted)if(0===t.length)this.showEmptyMessage();else for(const e of t)this.addPost(e,s.includes(e.id),r.includes(e.id));this.channel?.unsubscribe(),this.channel=Br.client.channel(`following-${this.userId}-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"author=in.("+e.followeeIds.join(",")+")"},(e=>{const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}delete(){this.channel?.unsubscribe(),super.delete()}}class RC extends LC{store=new r("global-post-list");isContentFromCache=!0;channel;constructor(){super(".global-post-list","No posts yet");const e=this.store.get("cached-posts"),t=this.store.get("cached-reposted-post-ids")??[],n=this.store.get("cached-liked-post-ids")??[];if(e)for(const s of e)this.addPost(s,t.includes(s.id),n.includes(s.id));this.channel=Br.client.channel("global-post-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},(e=>{if(e.new.post_ref)return;const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}async fetchContent(){const e=(await OC.fetchGlobalPosts(this.lastFetchedPostId)).reverse();TC.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id;const t=e.map((e=>e.id)),n=ox.userId?await OC.checkMultipleRepost(t,ox.userId):[],s=ox.userId?await OC.checkMultipleLike(t,ox.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",e,!0),this.store.set("cached-reposted-post-ids",n,!0),this.store.set("cached-liked-post-ids",s,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addPost(t,n.includes(t.id),s.includes(t.id))}delete(){this.channel.unsubscribe(),super.delete()}}class DC extends LC{walletAddress;store=new r("key-held-post-list");isContentFromCache=!0;channel;constructor(e){super(".key-held-post-list","No posts from users you hold ices for yet"),this.walletAddress=e;const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id))}async fetchContent(){const e=await OC.fetchKeyHeldPosts(this.walletAddress,this.lastFetchedPostId),t=e.posts.reverse();TC.cachePosts(t),this.lastFetchedPostId=t[t.length-1]?.id;const n=t.map((e=>e.id)),s=ox.userId?await OC.checkMultipleRepost(n,ox.userId):[],r=ox.userId?await OC.checkMultipleLike(n,ox.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",t,!0),this.store.set("cached-reposted-post-ids",s,!0),this.store.set("cached-liked-post-ids",r,!0),this.deleted||this.empty()),!this.deleted)if(0===t.length)this.showEmptyMessage();else for(const e of t)this.addPost(e,s.includes(e.id),r.includes(e.id));this.channel?.unsubscribe(),this.channel=Br.client.channel(`key-held-${this.walletAddress}-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"author=in.("+e.keyOwnerIds.join(",")+")"},(e=>{const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}delete(){this.channel?.unsubscribe(),super.delete()}}class MC extends w{content;targetSelect;textarea;uploadInput;uploadButton;postButton;uploadedFile;constructor(){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.post-popup",m(".signed-user",{style:{backgroundImage:`url(${ox.avatarUrl})`}}),m(".form",m("header",this.targetSelect=m("select",m("option",{value:"0"},"Everyone"),m("option",{value:"1"},"Key Holders")),m("button",new b("close"),{click:()=>this.delete()})),m("main",this.textarea=m("textarea",{placeholder:"What's on your mind?"})),m("footer",this.uploadInput=m("input.upload",{type:"file",accept:"image/*",change:e=>{const t=e.target.files?.[0];t&&this.upload(t)}}),this.uploadButton=m("button.icon-button",new b("image"),{click:()=>this.uploadInput.domElement.click()}),this.postButton=new v({tag:".post-button",click:()=>this.post(),title:"Post"}))))),this.textarea.domElement.focus()}async upload(e){this.uploadButton.domElement.disabled=!0,this.uploadButton.addClass("loading"),this.uploadedFile=await OC.upload(e),this.uploadButton.empty().append(m("img",{src:this.uploadedFile.thumbnailUrl??this.uploadedFile.url})),this.uploadInput.domElement.value="",this.uploadButton.domElement.disabled=!1,this.uploadButton.deleteClass("loading")}async post(){this.postButton.disable().text="Posting...";try{const e=await OC.post(parseInt(this.targetSelect.domElement.value),this.textarea.domElement.value,this.uploadedFile);new k({message:"Your post has been successfully published.",action:{title:"View",click:()=>f.go(`/post/${e}`)}}),this.delete()}catch(e){console.error(e),this.uploadButton.empty().append(new b("image")),this.postButton.enable().text="Post"}}}class BC extends Gr{container;tabs;globalPostList;followingPostList;keyHeldPostList;constructor(e){super(),jx.append(this.container=m(".home-view")),this.render(),this.container.onDelegate(ox,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("main",m("h1","Home"),ox.signed?this.tabs=new T("home-view-tabs",ox.walletLinked?[{id:"global",label:"Global"},{id:"following",label:"Following"},{id:"held",label:"Held"}]:[{id:"global",label:"Global"},{id:"following",label:"Following"}]):void 0,this.globalPostList=new RC,ox.userId?this.followingPostList=new UC(ox.userId):void 0,ox.walletAddress?this.keyHeldPostList=new DC(ox.walletAddress):void 0),m("button.post",new b("add"),{click:()=>new MC})),this.tabs?this.tabs.on("select",(e=>{[this.globalPostList,this.followingPostList,this.keyHeldPostList].forEach((e=>e?.hide())),"global"===e?this.globalPostList.show():"following"===e?this.followingPostList?.show():"held"===e&&this.keyHeldPostList?.show()})).init():this.globalPostList.show()}close(){this.container.delete(),super.close()}}var FC;!function(e){e[e.BUY_KEY=0]="BUY_KEY",e[e.SELL_KEY=1]="SELL_KEY",e[e.FOLLOW=2]="FOLLOW",e[e.POST_LIKE=3]="POST_LIKE",e[e.REPOST=4]="REPOST",e[e.POST_COMMENT=5]="POST_COMMENT",e[e.POST_TAG=6]="POST_TAG"}(FC||(FC={}));class $C extends c{constructor(e,t,n){super(".notification-list-item"),t&&this.append(m(".triggerer-profile-image",{style:{backgroundImage:`url(${t.profile_image})`},click:e=>{e.stopPropagation(),f.go(`/${t.x_username}`)}})),e.type===FC.BUY_KEY?this.addClass("buy-key").append(m("main",m("header",m("b",t?.display_name)," purchased "+e.amount+" ice(s)"),m(".date",zr()(e.created_at).fromNow(!0)))):e.type===FC.SELL_KEY?this.addClass("sell-key").append(m("main",m("header",m("b",t?.display_name)," sold "+e.amount+" ice(s)"),m(".date",zr()(e.created_at).fromNow(!0)))):e.type===FC.FOLLOW?this.addClass("follow").append(m("main",m("header",m("b",t?.display_name)," started following you"),m(".date",zr()(e.created_at).fromNow(!0)))):e.type===FC.POST_LIKE?this.addClass("post-like").append(m("main",m("header",m("b",t?.display_name)," liked your post"),m("p",n?.message),m(".date",zr()(e.created_at).fromNow(!0)))).onDom("click",(()=>f.go(`/post/${n?.id}`))):e.type===FC.REPOST?this.addClass("repost").append(m("main",m("header",m("b",t?.display_name)," reposted your post"),m("p",n?.message),m(".date",zr()(e.created_at).fromNow(!0)))).onDom("click",(()=>f.go(`/post/${n?.id}`))):e.type===FC.POST_COMMENT?this.addClass("post-comment").append(m("main",m("header",m("b",t?.display_name)," commented on your post"),m("p",n?.message),m(".date",zr()(e.created_at).fromNow(!0)))).onDom("click",(()=>f.go(`/post/${n?.id}`))):e.type===FC.POST_TAG&&this.addClass("post-tag").append(m("main",m("header",m("b",t?.display_name)," tagged you in a post"),m("p",n?.message),m(".date",zr()(e.created_at).fromNow(!0)))).onDom("click",(()=>f.go(`/post/${n?.id}`)))}}class GC extends c{userId;store=new r("notification-list");isContentFromCache=!0;emptyMessageDisplay;channel;checkNotiIsPost(e){return e.type===FC.POST_LIKE||e.type===FC.REPOST||e.type===FC.POST_COMMENT||e.type===FC.POST_TAG}constructor(e){super(".notification-list"),this.userId=e,this.showEmptyMessage();const t=this.store.get("cached-notifications"),n=this.store.get("cached-user-details")??[],s=this.store.get("cached-posts")??[];if(t)for(const e of t){const t=n.find((t=>t.user_id===e.triggered_by));if(this.checkNotiIsPost(e)){const n=s.find((t=>t.id===e.source_id));this.addNotification(e,t,n)}else this.addNotification(e,t)}this.fetchNotifications(),this.channel=Br.client.channel("notification-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:"user_id=eq."+e},(async e=>{const t=this.store.get("cached-notifications")??[];t.push(e.new),this.store.set("cached-notifications",t,!0);const n=this.store.get("cached-user-details")??[];let s=n.find((t=>t.user_id===e.new.triggered_by));s||(s=await px.fetchById(e.new.triggered_by)),n.push(s),this.store.set("cached-user-details",n,!0);const r=this.store.get("cached-posts")??[];let i=r.find((t=>t.id===e.new.source_id));!i&&this.checkNotiIsPost(e.new)&&(i=await OC.fetchPost(e.new.source_id)),i&&(r.push(i),this.store.set("cached-posts",r,!0)),this.addNotification(e.new,s,i)})).subscribe()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message","No notifications yet"),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addNotification(e,t,n){this.emptyMessageDisplay?.delete(),this.append(new $C(e,t,n))}async fetchNotifications(){const{data:e,error:t}=await Br.client.from("notifications").select().eq("user_id",this.userId).order("created_at",{ascending:!1}).limit(100);if(t)throw t;const n=e.map((e=>e.triggered_by)),{data:s,error:r}=await Br.client.from("user_details").select().in("user_id",n);if(r)throw r;const i=e.filter((e=>this.checkNotiIsPost(e))).map((e=>e.source_id)),{data:o,error:a}=await Br.client.from("posts").select().in("id",i);if(a)throw a;if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-notifications",e,!0),this.store.set("cached-user-details",s,!0),this.store.set("cached-posts",o,!0),await this.fetchUsers(e),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e){const e=s.find((e=>e.user_id===t.triggered_by));if(this.checkNotiIsPost(t)){const n=o.find((e=>e.id===t.source_id));this.addNotification(t,e,n)}else this.addNotification(t,e)}}async fetchUsers(e){const t=[];for(const n of e)t.includes(n.user_id)||t.push(n.user_id),t.includes(n.triggered_by)||t.push(n.triggered_by);const n=await px.fetchByIds(t);EE.cacheMultiple(n)}delete(){this.channel.unsubscribe(),super.delete()}}class HC extends Gr{container;constructor(e){super(),jx.append(this.container=m(".notifications-view")),this.render(),this.container.onDelegate(ox,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("h1","Notifications")),ox.userId?this.container.append(new GC(ox.userId)):this.container.append(new mC)}close(){this.container.delete(),super.close()}}class zC extends LC{postId;store;isContentFromCache=!0;channel;constructor(e){super(".post-comment-list","No comments yet"),this.postId=e,this.store=new r(`post-${e}-comment-list`);const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id));this.channel=Br.client.channel(`post-${e}-comment-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"post_req=eq."+e},(t=>{const n=this.store.get(`post-${e}-cached-posts`)??[];n.push(t.new),this.store.set(`post-${e}-cached-posts`,n,!0),this.addPost(t.new,!1,!1)})).subscribe()}async fetchContent(){const e=(await OC.fetchComments(this.postId,this.lastFetchedPostId)).reverse();TC.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id;const t=e.map((e=>e.id)),n=ox.userId?await OC.checkMultipleRepost(t,ox.userId):[],s=ox.userId?await OC.checkMultipleLike(t,ox.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",e,!0),this.store.set("cached-reposted-post-ids",n,!0),this.store.set("cached-liked-post-ids",s,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addPost(t,n.includes(t.id),s.includes(t.id))}delete(){this.channel.unsubscribe(),super.delete()}}class WC extends Gr{container;postContainer;commentContainer;commentTextarea;uploadInput;uploadButton;commentButton;repostCountDisplay;likeCountDisplay;post;uploadedFile;reposted=!1;liked=!1;constructor(e){super(),jx.append(this.container=m(".post-view",this.postContainer=m(".post-container"),m(".form-wrapper",m(".signed-user",{style:{backgroundImage:`url(${ox.avatarUrl})`}}),m(".form",m("main",this.commentTextarea=m("textarea",{placeholder:"What's on your mind?"})),m("footer",this.uploadInput=m("input.upload",{type:"file",accept:"image/*",change:e=>{const t=e.target.files?.[0];t&&this.upload(t)}}),this.uploadButton=m("button.icon-button",new b("image"),{click:()=>this.uploadInput.domElement.click()}),this.commentButton=new v({tag:".post-button",click:()=>this.postComment(),title:"Post"})))),this.commentContainer=m(".comment-container"))),this.renderPost(parseInt(e.postId)),this.checkSigned(),this.container.onDelegate(ox,"userFetched",(()=>this.checkSigned()))}checkSigned(){ox.signed&&this.container.addClass("signed"),this.post?.author===ox.userId&&this.container.addClass("owned")}changeParams(e,t){this.renderPost(parseInt(e.postId))}renderPost(e){this.container.offDelegate(TC),this.post=TC.getAndRefresh(e),this.render(),this.container.onDelegate(TC,"update",(e=>{this.post&&e.id===this.post.id&&(this.post=e,this.render())})),this.checkRepost(),this.checkLike()}async checkRepost(){this.post&&ox.userId&&await OC.checkRepost(this.post.id,ox.userId)?(this.reposted=!0,this.container.addClass("reposted")):(this.reposted=!1,this.container.deleteClass("reposted"))}async checkLike(){this.post&&ox.userId&&await OC.checkLike(this.post.id,ox.userId)?(this.liked=!0,this.container.addClass("liked")):(this.liked=!1,this.container.deleteClass("liked"))}render(){this.postContainer.empty().append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","Post"))),this.commentContainer.empty(),this.post?(this.postContainer.append(m("main",m("header",m(".author-profile-image",{style:{backgroundImage:`url(${this.post.author_avatar_url})`},click:()=>f.go(`/${this.post?.author_x_username}`)}),m(".author",m(".name",this.post.author_name,{click:()=>f.go(`/${this.post?.author_x_username}`)}),this.post.author_x_username?m(".x-username",`@${this.post.author_x_username}`,{click:()=>f.go(`/${this.post?.author_x_username}`)}):void 0),m("button.owner-menu",new b("more_vert"),{click:(e,t)=>{e.stopPropagation();const n=t.rect;new y({left:n.right-160,top:n.top,items:[{title:"Delete",click:()=>{new C({title:"Delete Post",message:"Are you sure you want to delete this post?",confirmTitle:"Delete",loadingTitle:"Deleting..."},(()=>{this.post&&OC.deletePost(this.post.id)}))}}]})}})),m("p.message",this.post.message),this.post.rich?this.getRich(this.post.rich):void 0,m(".actions",m("button.comment",new b("comment"),String(this.post.comment_count),{click:()=>{this.post&&new NC(this.post)}}),m("button.repost",new b("repeat"),this.repostCountDisplay=m("span",String(this.post.repost_count)),{click:()=>{this.post&&(this.reposted?(OC.unrepost(this.post.id),this.post.repost_count-=1,this.repostCountDisplay.text=String(this.post.repost_count),this.reposted=!1,this.container.deleteClass("reposted")):(OC.repost(this.post.id),this.post.repost_count+=1,this.repostCountDisplay.text=String(this.post.repost_count),this.reposted=!0,this.container.addClass("reposted")))}}),m("button.like",new b("favorite_border"),this.likeCountDisplay=m("span",String(this.post.like_count)),{click:()=>{this.post&&(this.liked?(OC.unlike(this.post.id),this.post.like_count-=1,this.likeCountDisplay.text=String(this.post.like_count),this.liked=!1,this.container.deleteClass("liked")):(OC.like(this.post.id),this.post.like_count+=1,this.likeCountDisplay.text=String(this.post.like_count),this.liked=!0,this.container.addClass("liked")))}})))),this.commentContainer.append(new zC(this.post.id).show())):this.postContainer.append(m("main",m("p.empty-message","Post not found")))}getRich(e){if(e.files)return m(".files",...e.files.map((e=>m(".file",e.thumbnailUrl?m(".image-container",m("a",m("img",{src:e.thumbnailUrl}),{href:e.url,target:"_blank",click:e=>e.stopPropagation()})):void 0))))}async upload(e){this.uploadButton.domElement.disabled=!0,this.uploadButton.addClass("loading"),this.uploadedFile=await OC.upload(e),this.uploadButton.empty().append(m("img",{src:this.uploadedFile.thumbnailUrl??this.uploadedFile.url})),this.uploadInput.domElement.value="",this.uploadButton.domElement.disabled=!1,this.uploadButton.deleteClass("loading")}async postComment(){if(this.post){this.commentButton.disable().text="Posting...";try{await OC.comment(this.post.id,this.commentTextarea.domElement.value,this.uploadedFile),new k({message:"Your post has been successfully published."}),this.commentTextarea.domElement.value="",this.uploadButton.empty().append(new b("image"))}catch(e){console.error(e)}this.commentButton.enable().text="Post"}}close(){this.container.delete(),super.close()}}class qC extends Gr{container;constructor(e){super(),jx.append(this.container=m(".settings-view")),this.render(),this.container.onDelegate(ox,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("h1","Settings"),m("main",m("section.x",m("h2","Igloo's "),m(".profile-image-wrapper",m(".profile-image",{style:{backgroundImage:"url(/images/icon-512x512.png)"}})),m("h3",m("a","@iglooax",{href:"https://x.com/iglooax",target:"_blank"})),m(".socials",m("a",m("img.x-symbol",{src:"/images/x-symbol.svg"}),{href:"https://x.com/iglooax",target:"_blank"}))),m("section.actions",ox.signed?m("section.link-wallet",m("h2","Link Wallet"),ox.walletLinked?m("p.linked","Linked: ",m("a",ox.walletAddress,{href:`https://snowtrace.io/address/${ox.walletAddress}`,target:"_blank"})):m("p","You can link your wallet to use Igloo."),m("button","Link Wallet",{click:()=>ox.linkWallet()})):void 0,ox.signed?m("section.logout",m("h2","Log Out"),m("p","You can log out from this device."),m("button","Log Out",{click:()=>ox.signOut()})):m("section.login",m("h2","Login"),m("p","You can login to this device."),m("button","Login with ",{click:()=>ox.signIn()})))))}close(){this.container.delete(),super.close()}}class KC extends Px{userId;store;isContentFromCache=!0;lastFetchedFollowedAt;constructor(e){super(".follower-list","No followers yet"),this.userId=e,this.store=new r(`user-${e}-follower-list`);const t=this.store.get("cached-followers");if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await px.fetchFollowers(this.userId,this.lastFetchedFollowedAt);if(EE.cacheMultiple(e.userDetailsSet),this.lastFetchedFollowedAt=e.lastFetchedFollowedAt,this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-followers",e.userDetailsSet,!0),this.deleted||this.empty()),!this.deleted)if(0===e.userDetailsSet.length)this.showEmptyMessage();else for(const t of e.userDetailsSet)this.addUserDetails(t)}}class VC extends Gr{container;xUsername;userDetails;constructor(e){super(),jx.append(this.container=m(".followers-view")),this.xUsername=e.xUsername,this.render(),this.container.onDelegate(EE,"update",(e=>{e.x_username===this.xUsername&&(this.userDetails=e,this.render())}))}render(){this.userDetails=EE.getAndRefreshByXUsername(this.xUsername),this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)),new KC(this.userDetails.user_id).show())}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class JC extends Px{userId;store;isContentFromCache=!0;lastFetchedFollowedAt;constructor(e){super(".following-list","Not following anyone yet"),this.userId=e,this.store=new r(`user-${e}-following-list`);const t=this.store.get("cached-following");if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await px.fetchFollowing(this.userId,this.lastFetchedFollowedAt);if(EE.cacheMultiple(e.userDetailsSet),this.lastFetchedFollowedAt=e.lastFetchedFollowedAt,this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-following",e.userDetailsSet,!0),this.deleted||this.empty()),!this.deleted)if(0===e.userDetailsSet.length)this.showEmptyMessage();else for(const t of e.userDetailsSet)this.addUserDetails(t)}}class QC extends Gr{container;xUsername;userDetails;constructor(e){super(),jx.append(this.container=m(".following-view")),this.xUsername=e.xUsername,this.render(),this.container.onDelegate(EE,"update",(e=>{e.x_username===this.xUsername&&(this.userDetails=e,this.render())}))}render(){this.userDetails=EE.getAndRefreshByXUsername(this.xUsername),this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)),new JC(this.userDetails.user_id).show())}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class YC extends Px{walletAddress;store;isContentFromCache=!0;constructor(e){super(".holder-list","No holders yet"),this.walletAddress=e,this.store=new r(`subject-${e}-holder-list`);const t=this.store.get("cached-holders");if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await px.fetchHolders(this.walletAddress);if(EE.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-holders",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}class XC extends Gr{container;xUsername;userDetails;constructor(e){super(),jx.append(this.container=m(".holders-view")),this.xUsername=e.xUsername,this.render(),this.container.onDelegate(EE,"update",(e=>{e.x_username===this.xUsername&&(this.userDetails=e,this.render())}))}render(){this.userDetails=EE.getAndRefreshByXUsername(this.xUsername),this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)),this.userDetails.wallet_address?new YC(this.userDetails.wallet_address).show():void 0)}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class ZC extends Px{walletAddress;store;isContentFromCache=!0;constructor(e){super(".holding-list","No holdings"),this.walletAddress=e,this.store=new r(`subject-${e}-holding-list`);const t=this.store.get("cached-holdings");if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await px.fetchHoldings(this.walletAddress);if(EE.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-holdings",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}class eS extends Gr{container;xUsername;userDetails;constructor(e){super(),jx.append(this.container=m(".holdings-view")),this.xUsername=e.xUsername,this.render(),this.container.onDelegate(EE,"update",(e=>{e.x_username===this.xUsername&&(this.userDetails=e,this.render())}))}render(){this.userDetails=EE.getAndRefreshByXUsername(this.xUsername),this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)),this.userDetails.wallet_address?new ZC(this.userDetails.wallet_address).show():void 0)}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class tS extends LC{userId;store;isContentFromCache=!0;channel;constructor(e){super(".user-post-list","No comments from this user yet"),this.userId=e,this.store=new r(`user-${e}-comment-post-list`);const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id));this.channel=Br.client.channel(`user-${e}-comment-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:`author=eq.${e}`},(e=>{if(!e.new.post_ref)return;const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}async fetchContent(){const e=(await OC.fetchUserCommentPosts(this.userId,this.lastFetchedPostId)).reverse();TC.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id;const t=e.map((e=>e.id)),n=ox.userId?await OC.checkMultipleRepost(t,ox.userId):[],s=ox.userId?await OC.checkMultipleLike(t,ox.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",e,!0),this.store.set("cached-reposted-post-ids",n,!0),this.store.set("cached-liked-post-ids",s,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addPost(t,n.includes(t.id),s.includes(t.id))}delete(){this.channel.unsubscribe(),super.delete()}}class nS extends LC{userId;store;isContentFromCache=!0;lastLikedAt="-infinity";constructor(e){super(".user-post-list","No likes from this user yet"),this.userId=e,this.store=new r(`user-${e}-liked-post-list`);const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id))}async fetchContent(){const e=(await OC.fetchLikedPosts(this.userId,this.lastLikedAt)).reverse(),t=e.map((e=>e.post));TC.cachePosts(t),this.lastLikedAt=e[e.length-1]?.likedAt??"-infinity";const n=t.map((e=>e.id)),s=ox.userId?await OC.checkMultipleRepost(n,ox.userId):[],r=ox.userId?await OC.checkMultipleLike(n,ox.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",t,!0),this.store.set("cached-reposted-post-ids",s,!0),this.store.set("cached-liked-post-ids",r,!0),this.deleted||this.empty()),!this.deleted)if(0===t.length)this.showEmptyMessage();else for(const e of t)this.addPost(e,s.includes(e.id),r.includes(e.id))}}class sS extends LC{userId;store;isContentFromCache=!0;channel;constructor(e){super(".user-post-list","No posts from this user yet"),this.userId=e,this.store=new r(`user-${e}-post-list`);const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id));this.channel=Br.client.channel(`user-${e}-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:`author=eq.${e}`},(e=>{if(e.new.post_ref)return;const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}async fetchContent(){const e=(await OC.fetchUserPosts(this.userId,this.lastFetchedPostId)).reverse();TC.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id;const t=e.map((e=>e.id)),n=ox.userId?await OC.checkMultipleRepost(t,ox.userId):[],s=ox.userId?await OC.checkMultipleLike(t,ox.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",e,!0),this.store.set("cached-reposted-post-ids",n,!0),this.store.set("cached-liked-post-ids",s,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addPost(t,n.includes(t.id),s.includes(t.id))}delete(){this.channel.unsubscribe(),super.delete()}}class rS extends LC{userId;store;isContentFromCache=!0;lastRepostedAt="-infinity";constructor(e){super(".user-repost-list","No reposts yet."),this.userId=e,this.store=new r(`user-${e}-repost-list`);const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id))}async fetchContent(){const e=(await OC.fetchReposts(this.userId,this.lastRepostedAt)).reverse(),t=e.map((e=>e.post));TC.cachePosts(t),this.lastRepostedAt=e[e.length-1]?.repostedAt??"-infinity";const n=t.map((e=>e.id)),s=ox.userId?await OC.checkMultipleRepost(n,ox.userId):[],r=ox.userId?await OC.checkMultipleLike(n,ox.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",t,!0),this.store.set("cached-reposted-post-ids",s,!0),this.store.set("cached-liked-post-ids",r,!0),this.deleted||this.empty()),!this.deleted)if(0===t.length)this.showEmptyMessage();else for(const e of t)this.addPost(e,s.includes(e.id),r.includes(e.id))}}const iS=new class extends o{store=new r("cached-total-subject-key-balances");constructor(){super(),this.addAllowedEvents("update")}init(){Br.client.channel("total-subject-key-balances-changes").on("postgres_changes",{event:"*",schema:"public",table:"total_subject_key_balances"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.wallet_address)})).subscribe()}cache(e,t){t!==this.get(e)&&(this.store.set(e,t,!0),this.fireEvent("update",{walletAddress:e,totalKeyBalance:t}))}get(e){const t=this.store.get(e);return t||0}async refresh(e){const{data:t,error:n}=await Br.client.from("total_subject_key_balances").select("*, total_key_balance::text").eq("wallet_address",e);if(n)throw n;const s=t?.[0];s&&s.total_key_balance!==this.get(e)&&this.cache(e,s.total_key_balance)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing total subject key balance details:",e))),t}};const oS=new class extends o{store=new r("cached-subject-key-balances");constructor(){super(),this.addAllowedEvents("update")}init(){Br.client.channel("subject-key-balances-changes").on("postgres_changes",{event:"*",schema:"public",table:"subject_key_holders"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.subject,e.new.wallet_address)})).subscribe()}cache(e,t,n){n!==this.get(e,t)&&(this.store.set(`${e}-${t}`,n,!0),this.fireEvent("update",{subject:e,walletAddress:t,balance:n}))}get(e,t){try{const n=this.store.get(`${e}-${t}`);return n||0}catch(e){return 0}}async refresh(e,t){const{data:n,error:s}=await Br.client.from("subject_key_holders").select("*, last_fetched_balance::text").eq("subject",e).eq("wallet_address",t);if(s)throw s;const r=n?.[0];r&&r.last_fetched_balance!==this.get(e,t)&&this.cache(e,t,r.last_fetched_balance)}getAndRefresh(e,t){const n=this.get(e,t);return this.refresh(e,t).catch((e=>console.error("Error refreshing subject key balance details:",e))),n}increaseKeyBalanceInstantly(e,t){const n=this.get(t,e);this.cache(t,e,n+1)}decreaseKeyBalanceInstantly(e,t){const n=this.get(t,e);this.cache(t,e,n-1)}};const aS=new class{async buyKey(e){await AC.buyKeys(e,1n,await AC.getBuyPriceAfterFee(e,1n)),Br.client.functions.invoke("track-subject-events"),Br.client.functions.invoke("track-subject-price-and-balance",{body:{subjects:[e]}}),oS.increaseKeyBalanceInstantly(ox.userId,e)}async sellKey(e){await AC.sellKeys(e,1n),Br.client.functions.invoke("track-subject-events"),Br.client.functions.invoke("track-subject-price-and-balance",{body:{subjects:[e]}}),oS.decreaseKeyBalanceInstantly(ox.userId,e)}async fetchPortfolioValue(e){const{data:t,error:n}=await Br.client.rpc("get_portfolio_value",{param_wallet_address:e});if(n)throw n;return BigInt(t)}};class cS extends w{userDetails;content;priceDisplay;totalPriceDisplay;buyButton;constructor(e){super({barrierDismissible:!0}),this.userDetails=e,this.append(this.content=new g(".popup.buy-subject-key-popup",m("header",m("h1",`Buy 1 ${e.display_name}'s Ice`)),m("main",m(".owner-profile-image-wrapper",m(".owner-profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m(".price-info",m(".price",m("label","Price"),m(".value",this.priceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))),m(".price",m("label","Total (including fee)"),m(".value",this.totalPriceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))),m("footer",new v({type:_.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"}),this.buyButton=new v({type:_.Contained,tag:".buy-token-button",click:()=>this.buyKey(),title:`Buy 1 ${e.display_name}'s Ice`})))),this.fetchPrice(),this.fetchTotalPrice()}async fetchPrice(){const e=await AC.getBuyPrice(this.userDetails.wallet_address,1n);this.priceDisplay.text=`${Cx(e)}`}async fetchTotalPrice(){const e=await AC.getBuyPriceAfterFee(this.userDetails.wallet_address,1n);this.totalPriceDisplay.text=`${Cx(e)}`}async buyKey(){this.buyButton.disable().title="Buying...";try{const e=this.userDetails.wallet_address;if(sx.connected||await sx.connect(),sx.address!==ox.walletAddress)throw new S({title:"Wrong wallet",message:"You are connected to the wrong wallet. Linked wallet address: "+ox.walletAddress}),new Error("Wrong wallet");const[t,n]=await Promise.all([sx.getBalance(),AC.getBuyPriceAfterFee(e,1n)]);if(t<n)throw new S({title:"Insufficient balance",message:`You need at least ${Cx(n)} AVAX to buy this ice.`}),new Error("Insufficient balance");await aS.buyKey(e),this.delete()}catch(e){console.error(e),this.buyButton.enable().title=`Buy 1 ${this.userDetails.display_name}'s Ice`}}}class lS extends w{userDetails;content;priceDisplay;totalPriceDisplay;sellButton;constructor(e){super({barrierDismissible:!0}),this.userDetails=e,this.append(this.content=new g(".popup.sell-subject-key-popup",m("header",m("h1",`Sell 1 ${e.display_name}'s Ice`)),m("main",m(".owner-profile-image-wrapper",m(".owner-profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m(".price-info",m(".price",m("label","Price"),m(".value",this.priceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))),m(".price",m("label","Total (including fee)"),m(".value",this.totalPriceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))),m("footer",new v({type:_.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"}),this.sellButton=new v({type:_.Contained,tag:".sell-token-button",click:()=>this.sellKey(),title:`Sell 1 ${e.display_name}'s Ice`})))),this.fetchPrice(),this.fetchTotalPrice()}async fetchPrice(){const e=await AC.getSellPrice(this.userDetails.wallet_address,1n);this.priceDisplay.text=`${Cx(e)}`}async fetchTotalPrice(){const e=await AC.getSellPriceAfterFee(this.userDetails.wallet_address,1n);this.totalPriceDisplay.text=`${Cx(e)}`}async sellKey(){this.sellButton.disable().title="Selling...";try{const e=this.userDetails.wallet_address;if(sx.connected||await sx.connect(),!sx.address||sx.address!==ox.walletAddress)throw new S({title:"Wrong wallet",message:"You are connected to the wrong wallet. Linked wallet address: "+ox.walletAddress}),new Error("Wrong wallet");if(await AC.getKeysBalance(e,sx.address)<1n)throw new S({title:"Insufficient balance",message:"You need at least 1 ice to sell."}),new Error("Insufficient balance");await aS.sellKey(e),this.delete()}catch(e){console.error(e),this.sellButton.enable().title=`Sell 1 ${this.userDetails.display_name}'s Ice`}}}class uS extends w{userDetails;content;priceDisplay;constructor(e){super({barrierDismissible:!0}),this.userDetails=e,this.append(this.content=new g(".popup.trade-subject-key-popup",m("header",m("h1",`Buy 1 ${e.display_name}'s Ice`)),m("main",m(".owner-profile-image-wrapper",m(".owner-profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m(".price-info",m(".price",m("label","Price"),m(".value",this.priceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"})))),new v({type:_.Contained,tag:".buy-key",click:()=>{new cS(e),this.delete()},title:`Buy 1 ${e.display_name}'s Ice`}),new v({type:_.Contained,tag:".sell-key",click:()=>{new lS(e),this.delete()},title:`Sell 1 ${e.display_name}'s Ice`})),m("footer",new v({type:_.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"})))),this.fetchPrice()}async fetchPrice(){const e=await AC.getBuyPrice(this.userDetails.wallet_address,1n);this.priceDisplay.text=`${Cx(e)}`}}class hS extends c{userDetails;settingsButton;followButton;portfolioValue;constructor(e,t,n){super(".user-profile-display"),this.userDetails=e,this.append(m(".profile",m(".profile-image-wrapper",m(".profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m("h2",e.display_name),m("h3",m("a","@"+e.x_username,{href:`https://x.com/${e.x_username}`,target:"_blank"})),m(".socials",m("a",m("img.x-symbol",{src:"/images/x-symbol.svg"}),{href:`https://x.com/${e.x_username}`,target:"_blank"}))),m(".trading-metrics",m("section.trading-volume",m(".icon-container",new b("analytics")),m(".metric",m("h3","Volume"),m(".value",t?Cx(t.total_trading_key_volume):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"})))),m("section.earned",m(".icon-container",new b("savings")),m(".metric",m("h3","Fees Earned"),m(".value",e?Cx(e.total_earned_trading_fees):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"})))),m("section.portfolio-value",m(".icon-container",new b("account_balance")),m(".metric",m("h3","Portfolio Value"),m(".value",this.portfolioValue=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"})))),m("section.price",m(".icon-container",new b("sell")),m(".metric",m("h3","Price"),m(".value",t?Cx(t.last_fetched_key_price):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))),m(".action-buttons",this.followButton=m("button.follow","Follow",{click:()=>{ox.userId?vE.isFollowing(e.user_id)?vE.unfollow(e.user_id):vE.follow(e.user_id):new C({title:"Login Required",message:"You must be logged in to follow users.",confirmTitle:"Login"},(()=>ox.signIn()))}}),m("button.buy-key"+(e.wallet_address?"":".disabled"),"Buy Ice",{click:()=>{ox.userId?ox.walletLinked?e.wallet_address?new cS(e):new S({title:"No wallet address",message:"This user has not linked a wallet."}):new C({title:"Wallet Required",message:"You must link a wallet to buy ices.",confirmTitle:"Link Wallet"},(()=>ox.linkWallet())):new C({title:"Login Required",message:"You must be logged in to buy ices.",confirmTitle:"Login"},(()=>ox.signIn()))}}),m("button.trade-key"+(e.wallet_address?"":".disabled"),"Trade Ice",{click:()=>{ox.userId?ox.walletLinked?e.wallet_address?new uS(e):new S({title:"No wallet address",message:"This user has not linked a wallet."}):new C({title:"Wallet Required",message:"You must link a wallet to buy ices.",confirmTitle:"Link Wallet"},(()=>ox.linkWallet())):new C({title:"Login Required",message:"You must be logged in to buy ices.",confirmTitle:"Login"},(()=>ox.signIn()))}}),this.settingsButton=m("button.settings","Settings",{click:()=>f.go("/settings")})),m(".social-metrics",m("section.holdings",m("a",m("span.value",String(n)),m("span","Holdings"),{click:()=>f.go(`/${e.x_username}/holdings`)})),m("section.holders",m("a",m("span.value",t?String(t.key_holder_count):"0"),m("span","Holders"),{click:()=>f.go(`/${e.x_username}/holders`)})),m("section.following",m("a",m("span.value",String(e.following_count)),m("span","Following"),{click:()=>f.go(`/${e.x_username}/following`)})),m("section.followers",m("a",m("span.value",String(e.follower_count)),m("span","Followers"),{click:()=>f.go(`/${e.x_username}/followers`)})))),this.checkSignedUser(),this.onDelegate(ox,"userFetched",(()=>{this.checkSignedUser(),this.checkHolder()})),this.checkFollowing(),this.onDelegate(vE,["follow","unfollow"],(t=>{t===e.user_id&&this.checkFollowing()})),this.checkHolder(),this.onDelegate(oS,"update",(t=>{t.subject===e.wallet_address&&t.walletAddress===ox.walletAddress&&this.checkHolder()})),this.fetchPortfolioValue()}checkSignedUser(){ox.userId===this.userDetails.user_id?this.followButton.addClass("hidden"):this.settingsButton.addClass("hidden")}checkFollowing(){vE.isFollowing(this.userDetails.user_id)?this.followButton.text="Unfollow":this.followButton.text="Follow"}checkHolder(){if(this.userDetails.wallet_address&&ox.walletAddress){oS.getAndRefresh(this.userDetails.wallet_address,ox.walletAddress)>0?this.addClass("holder"):this.deleteClass("holder")}}async fetchPortfolioValue(){let e=0n;this.userDetails.wallet_address&&(e=await aS.fetchPortfolioValue(this.userDetails.wallet_address)),this.deleted||(this.portfolioValue.text=Cx(e))}}class dS extends Gr{container;xUsername;userDetails;subjectDetails;holdingCount=0;userConnectionTabs;holdingList;holderList;followingList;followerList;postTabs;userPostList;userCommentPostList;userRepostList;userLikedPostList;constructor(e){super(),jx.append(this.container=m(".user-view")),this.xUsername=e.xUsername,this.render(),this.container.onDelegate(EE,"update",(e=>{e.x_username===this.xUsername&&(this.userDetails=e,this.render())})),this.container.onDelegate(dx,"update",(e=>{e.subject===this.userDetails.wallet_address&&(this.subjectDetails=e,this.render())})),this.container.onDelegate(iS,"update",(({walletAddress:e,totalKeyBalance:t})=>{e===this.userDetails.wallet_address&&(this.holdingCount=t,this.render())})),this.trackPriceAndBalance()}render(){this.userDetails=EE.getAndRefreshByXUsername(this.xUsername),this.subjectDetails=this.userDetails.wallet_address?dx.getAndRefresh(this.userDetails.wallet_address):void 0,this.holdingCount=this.userDetails.wallet_address?iS.getAndRefresh(this.userDetails.wallet_address):0,this.container.empty().append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1",`${this.userDetails.display_name}'s Igloo`)),m("section.profile",new hS(this.userDetails,this.subjectDetails,this.holdingCount),m(".user-connections",this.userConnectionTabs=new T("user-connections",(()=>{const e=this.userDetails.wallet_address?[{id:"holdings",label:[m("span.value",String(this.holdingCount)),"Holdings"]},{id:"holders",label:[m("span.value",this.subjectDetails?String(this.subjectDetails.key_holder_count):"0"),"Holders"]}]:[];return e.push({id:"following",label:[m("span.value",String(this.userDetails.following_count)),"Following"]},{id:"followers",label:[m("span.value",String(this.userDetails.follower_count)),"Followers"]}),e})()),this.userDetails.wallet_address?this.holdingList=new ZC(this.userDetails.wallet_address):void 0,this.userDetails.wallet_address?this.holderList=new YC(this.userDetails.wallet_address):void 0,this.followingList=new JC(this.userDetails.user_id),this.followerList=new KC(this.userDetails.user_id))),this.postTabs=new T("user-posts",[{id:"user-posts",label:"Posts"},{id:"user-replies",label:"Replies"},{id:"user-reposts",label:"Reposts"},{id:"user-likes",label:"Likes"}]),this.userPostList=new sS(this.userDetails.user_id),this.userCommentPostList=new tS(this.userDetails.user_id),this.userRepostList=new rS(this.userDetails.user_id),this.userLikedPostList=new nS(this.userDetails.user_id)),this.userConnectionTabs.on("select",(e=>{[this.holdingList,this.holderList,this.followingList,this.followerList].forEach((e=>e?.hide())),"holdings"===e?this.holdingList?.show():"holders"===e?this.holderList?.show():"following"===e?this.followingList.show():"followers"===e&&this.followerList.show()})).init(),this.postTabs.on("select",(e=>{[this.userPostList,this.userCommentPostList,this.userRepostList,this.userLikedPostList].forEach((e=>e.hide())),"user-posts"===e?this.userPostList.show():"user-replies"===e?this.userCommentPostList.show():"user-reposts"===e?this.userRepostList.show():"user-likes"===e&&this.userLikedPostList.show()})).init()}changeParams(e,t){this.xUsername=e.xUsername,this.render(),this.trackPriceAndBalance()}trackPriceAndBalance(){this.userDetails.wallet_address&&Br.client.functions.invoke("track-subject-price-and-balance",{body:{subjects:[this.userDetails.wallet_address]}})}close(){this.container.delete(),super.close()}}const fS=new class{store=new r("__THEME_MANAGER_STORE");get darkMode(){return this.store.get("dark")||!1}set darkMode(e){this.store.set("dark",e)}};async function pS(e){Xw.dev=e.dev,Xw.avaxRpc=e.avaxRpc,Xw.avaxChainId=e.avaxChainId,sessionStorage.__spa_path&&(f.goNoHistory(sessionStorage.__spa_path),sessionStorage.removeItem("__spa_path")),Br.connect(e.supabaseUrl,e.supabaseAnonKey),[EE,dx,TC].forEach((e=>e.init())),sx.init(e.walletConnectProjectId),rx.init(e.messageForWalletLinking),AC.init(e.iglooSubjectAddress);const t=new E(m("img",{src:"/images/igloo-character.png"}));await Promise.all([ox.fetchUserOnInit(),_n.loadYAMLs({en:["/locales/en.yml"]}),Zw.init()]),t.delete(),f.route("**",jx),f.route("",BC),f.route(["chats","chats/{topic}"],yC),f.route("chats/0x{subject}",Zx),f.route(["chats","chats/{topic}"],iC,["chats/0x{subject}"]),f.route("explore",xC),f.route("search",CC),f.route("notifications",HC),f.route("settings",qC),f.route("post/{postId}",WC),f.route("{xUsername}",dS,["chats","chats/{topic}","explore","search","notifications","settings","post/{postId}","{xUsername}/holdings","{xUsername}/holders","{xUsername}/following","{xUsername}/followers"]),f.route("{xUsername}/holdings",eS,["chats/{topic}","post/{postId}"]),f.route("{xUsername}/holders",XC,["chats/{topic}","post/{postId}"]),f.route("{xUsername}/following",QC,["chats/{topic}","post/{postId}"]),f.route("{xUsername}/followers",VC,["chats/{topic}","post/{postId}"]),Au.checkEmailAccess(),console.log(fS.darkMode)}zr().extend(qr())},1831:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var s=n(3512);await(0,s.Z)({dev:!1,supabaseUrl:"https://gslqborrkoraysvsopjv.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdzbHFib3Jya29yYXlzdnNvcGp2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTgwMzM0MjksImV4cCI6MjAxMzYwOTQyOX0.A1pCWncoOjXlpT73mH5tFJjpbBEuPMVGBXmVIig_jhQ",walletConnectProjectId:"53ce7f51ed886a719bf634b25061f424",messageForWalletLinking:"Link Wallet to Igloo",avaxRpc:"https://api.avax.network/ext/bc/C/rpc",avaxChainId:43114,iglooSubjectAddress:"0xa6940B0A43B4832dbfD6Db8a57bb441B905D6dAC"}),t()}catch(e){t(e)}}),1)},9257:(e,t,n)=>{"use strict";var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();e.exports=t=s.fetch,s.fetch&&(t.default=s.fetch.bind(s)),t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response},6518:e=>{var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},187:e=>{var t=function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};t.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.init_by_array=function(e,t){var n,s,r;for(this.init_seed(19650218),n=1,s=0,r=this.N>t?this.N:t;r;r--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[s]+s,this.mt[n]>>>=0,s++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),s>=t&&(s=0)}for(r=this.N-1;r;r--){i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},t.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},e.exports=t},8179:(e,t,n)=>{var s;if("object"==typeof globalThis)s=globalThis;else try{s=n(6518)}catch(e){}finally{if(s||"undefined"==typeof window||(s=window),!s)throw new Error("Could not determine global this")}var r=s.WebSocket||s.MozWebSocket,i=n(3223);function o(e,t){return t?new r(e,t):new r(e)}r&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return r[e]}})})),e.exports={w3cwebsocket:r?o:null,version:i}},3223:(e,t,n)=>{e.exports=n(8586).version},5856:()=>{},5883:()=>{},9015:(e,t,n)=>{"use strict";n.d(t,{AccountCtrl:()=>E,Id:()=>g,ConfigCtrl:()=>A,zv:()=>f,uA:()=>y,ExplorerCtrl:()=>G,jb:()=>q,OptionsCtrl:()=>w,AV:()=>d,ThemeCtrl:()=>Z,ToastCtrl:()=>te,WcConnectionCtrl:()=>z});var s=n(2478);const r=e=>"object"==typeof e&&null!==e,i=new WeakMap,o=new WeakSet,a=(e=Object.is,t=((e,t)=>new Proxy(e,t)),n=(e=>r(e)&&!o.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)),a=(e=>e.configurable&&e.enumerable&&e.writable),c=(e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}}),l=new WeakMap,u=((e,t,n=c)=>{const r=l.get(e);if((null==r?void 0:r[0])===t)return r[1];const a=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return(0,s.jc)(a,!0),l.set(e,[t,a]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(a,t))return;const r=Reflect.get(e,t),c={value:r,enumerable:!0,configurable:!0};if(o.has(r))(0,s.jc)(r,!1);else if(r instanceof Promise)delete c.value,c.get=()=>n(r);else if(i.has(r)){const[e,t]=i.get(r);c.value=u(e,t(),n)}Object.defineProperty(a,t,c)})),Object.preventExtensions(a)}),h=new WeakMap,d=[1,1],f=(c=>{if(!r(c))throw new Error("object required");const l=h.get(c);if(l)return l;let p=d[0];const g=new Set,m=(e,t=++d[0])=>{p!==t&&(p=t,g.forEach((n=>n(e,t))))};let y=d[1];const b=e=>(t,n)=>{const s=[...t];s[1]=[e,...s[1]],m(s,n)},w=new Map,v=e=>{var t;const n=w.get(e);n&&(w.delete(e),null==(t=n[1])||t.call(n))},A=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),_=(t,a,c,l,u)=>{if(t&&(e(a,l)||h.has(l)&&e(a,h.get(l))))return;v(c),r(l)&&(l=(0,s.o5)(l)||l);let d=l;if(l instanceof Promise)l.then((e=>{l.status="fulfilled",l.value=e,m(["resolve",[c],e])})).catch((e=>{l.status="rejected",l.reason=e,m(["reject",[c],e])}));else{!i.has(l)&&n(l)&&(d=f(l));const e=!o.has(d)&&i.get(d);e&&((e,t)=>{if(w.has(e))throw new Error("prop listener already exists");if(g.size){const n=t[3](b(e));w.set(e,[t,n])}else w.set(e,[t])})(c,e)}u(d),m(["set",[c],l,a])},k=t(A,{deleteProperty(e,t){const n=Reflect.get(e,t);v(t);const s=Reflect.deleteProperty(e,t);return s&&m(["delete",[t],n]),s},set(e,t,n,s){const r=Reflect.has(e,t),i=Reflect.get(e,t,s);return _(r,i,t,n,(n=>{Reflect.set(e,t,n,s)})),!0},defineProperty(e,t,n){if(a(n)){const s=Reflect.getOwnPropertyDescriptor(e,t);if(!s||a(s))return _(!!s&&"value"in s,null==s?void 0:s.value,t,n.value,(s=>{Reflect.defineProperty(e,t,{...n,value:s})})),!0}return Reflect.defineProperty(e,t,n)}});h.set(c,k);const E=[A,(e=++d[1])=>(y===e||g.size||(y=e,w.forEach((([t])=>{const n=t[1](e);n>p&&(p=n)}))),p),u,e=>{g.add(e),1===g.size&&w.forEach((([e,t],n)=>{if(t)throw new Error("remove already exists");const s=e[3](b(n));w.set(n,[e,s])}));return()=>{g.delete(e),0===g.size&&w.forEach((([e,t],n)=>{t&&(t(),w.set(n,[e]))}))}}];return i.set(k,E),Reflect.ownKeys(c).forEach((e=>{const t=Object.getOwnPropertyDescriptor(c,e);"value"in t&&(k[e]=c[e],delete t.value,delete t.writable),Object.defineProperty(A,e,t)})),k}))=>[f,i,o,e,t,n,a,c,l,u,h,d],[c]=a();function l(e={}){return c(e)}function u(e,t,n){const s=i.get(e);let r;s||console.warn("Please use proxy object");const o=[],a=s[3];let c=!1;const l=a((e=>{o.push(e),n?t(o.splice(0)):r||(r=Promise.resolve().then((()=>{r=void 0,c&&t(o.splice(0))})))}));return c=!0,()=>{c=!1,l()}}const h=l({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),d={state:h,subscribe:e=>u(h,(()=>e(h))),push(e,t){e!==h.view&&(h.view=e,t&&(h.data=t),h.history.push(e))},reset(e){h.view=e,h.history=[e]},replace(e){h.history.length>1&&(h.history[h.history.length-1]=e,h.view=e)},goBack(){if(h.history.length>1){h.history.pop();const[e]=h.history.slice(-1);h.view=e}},setData(e){h.data=e}},f={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",W3M_VERSION:"W3M_VERSION",W3M_PREFER_INJECTED_URL_FLAG:"w3mPreferInjected",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>typeof window<"u"&&Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>f.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){const e=navigator.userAgent.toLowerCase();return f.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,formatNativeUrl(e,t,n){if(f.isHttpUrl(e))return this.formatUniversalUrl(e,t,n);let s=e;s.includes("://")||(s=e.replaceAll("/","").replaceAll(":",""),s=`${s}://`),s.endsWith("/")||(s=`${s}/`),this.setWalletConnectDeepLink(s,n);return`${s}wc?uri=${encodeURIComponent(t)}`},formatUniversalUrl(e,t,n){if(!f.isHttpUrl(e))return this.formatNativeUrl(e,t,n);let s=e;s.endsWith("/")||(s=`${s}/`),this.setWalletConnectDeepLink(s,n);return`${s}wc?uri=${encodeURIComponent(t)}`},wait:async e=>new Promise((t=>{setTimeout(t,e)})),openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(f.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(f.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(f.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setWeb3ModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(f.W3M_VERSION,"2.7.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=null==(e=d.state.data)?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t},getSwitchNetworkRouterData(){var e;const t=null==(e=d.state.data)?void 0:e.SwitchNetwork;if(!t)throw new Error('Missing "SwitchNetwork" view data');return t},isPreferInjectedFlag:()=>typeof location<"u"&&new URLSearchParams(location.search).has(f.W3M_PREFER_INJECTED_URL_FLAG)};let p;const g={ethereumClient:void 0,setEthereumClient(e){p=e},client(){if(p)return p;throw new Error("ClientCtrl has no client set")}},m=l({enabled:typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),userSessionId:"",events:[],connectedWalletId:void 0}),y={state:m,subscribe:e=>u(m.events,(()=>e(function(e,t){const n=i.get(e);n||console.warn("Please use proxy object");const[s,r,o]=n;return o(s,r(),t)}(m.events[m.events.length-1])))),initialize(){m.enabled&&typeof(null==crypto?void 0:crypto.randomUUID)<"u"&&(m.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){m.connectedWalletId=e},click(e){if(m.enabled){const t={type:"CLICK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},track(e){if(m.enabled){const t={type:"TRACK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},view(e){if(m.enabled){const t={type:"VIEW",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}}},b=l({selectedChain:void 0,chains:void 0,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,isPreferInjected:!1}),w={state:b,subscribe:e=>u(b,(()=>e(b))),setChains(e){b.chains=e},getSelectedChain(){const e=g.client().getNetwork().chain;return e&&(b.selectedChain=e),b.selectedChain},setSelectedChain(e){b.selectedChain=e},setIsCustomDesktop(e){b.isCustomDesktop=e},setIsCustomMobile(e){b.isCustomMobile=e},setIsDataLoaded(e){b.isDataLoaded=e},setIsUiLoaded(e){b.isUiLoaded=e},setIsPreferInjected(e){b.isPreferInjected=e}},v=l({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,tokenContracts:void 0,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,defaultChain:void 0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),A={state:v,subscribe:e=>u(v,(()=>e(v))),setConfig(e){var t,n;y.initialize(),w.setIsCustomMobile(Boolean(null==(t=e.mobileWallets)?void 0:t.length)),w.setIsCustomDesktop(Boolean(null==(n=e.desktopWallets)?void 0:n.length)),w.setChains(g.client().chains),w.setIsPreferInjected(g.client().isInjectedProviderInstalled()&&f.isPreferInjectedFlag()),e.defaultChain&&w.setSelectedChain(e.defaultChain),f.setWeb3ModalVersionInStorage(),Object.assign(v,e)}},_={async getIdentity(e,t){const{projectId:n}=A.state,s=`https://rpc.walletconnect.com/v1/identity/${e}?chainId=${`eip155:${t}`}&projectId=${n}`;return(await fetch(s)).json()}},k=l({address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1}),E={state:k,subscribe:e=>u(k,(()=>e(k))),getAccount(){const e=g.client().getAccount();k.address=e.address,k.isConnected=e.isConnected},async fetchProfile(e,t){var n;try{k.profileLoading=!0,k.profileName=null,k.profileAvatar=null;const s=t??k.address,r=1,i=null==(n=w.state.chains)?void 0:n.find((e=>e.id===r));if(s&&i){try{const e=await _.getIdentity(s,r);k.profileName=e.name,k.profileAvatar=e.avatar}catch{const e=await g.client().fetchEnsName({address:s,chainId:r});if(k.profileName=e,e){const t=await g.client().fetchEnsAvatar({name:e,chainId:r});k.profileAvatar=t}}k.profileAvatar&&await e(k.profileAvatar)}}finally{k.profileLoading=!1}},async fetchBalance(e){try{const{chain:t}=g.client().getNetwork(),{tokenContracts:n}=A.state;let s;t&&n&&(s=n[t.id]),k.balanceLoading=!0;const r=e??k.address;if(r){const e=await g.client().fetchBalance({address:r,token:s});k.balance={amount:e.formatted,symbol:e.symbol}}}finally{k.balanceLoading=!1}},setAddress(e){k.address=e},setIsConnected(e){k.isConnected=e},resetBalance(){k.balance=void 0},resetAccount(){k.address=void 0,k.isConnected=!1,k.profileName=void 0,k.profileAvatar=void 0,k.balance=void 0}};var x=Object.defineProperty,C=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const I="https://explorer-api.walletconnect.com",O="w3m",N="js-2.7.1";async function j(e,t){const n=((e,t)=>{for(var n in t||(t={}))S.call(t,n)&&T(e,n,t[n]);if(C)for(var n of C(t))P.call(t,n)&&T(e,n,t[n]);return e})({sdkType:O,sdkVersion:N},t),s=new URL(e,I);return s.searchParams.append("projectId",A.state.projectId),Object.entries(n).forEach((([e,t])=>{t&&s.searchParams.append(e,String(t))})),(await fetch(s)).json()}const L={getDesktopListings:async e=>j("/w3m/v1/getDesktopListings",e),getMobileListings:async e=>j("/w3m/v1/getMobileListings",e),getInjectedListings:async e=>j("/w3m/v1/getInjectedListings",e),getAllListings:async e=>j("/w3m/v1/getAllListings",e),getWalletImageUrl:e=>`${I}/w3m/v1/getWalletImage/${e}?projectId=${A.state.projectId}&sdkType=${O}&sdkVersion=${N}`,getAssetImageUrl:e=>`${I}/w3m/v1/getAssetImage/${e}?projectId=${A.state.projectId}&sdkType=${O}&sdkVersion=${N}`};var U=Object.defineProperty,R=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,B=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const F=f.isMobile(),$=l({wallets:{listings:[],total:0,page:1},injectedWallets:[],search:{listings:[],total:0,page:1},recomendedWallets:[]}),G={state:$,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=A.state;if("NONE"===e||"ALL"===t&&!e)return $.recomendedWallets;if(f.isArray(e)){const t={recommendedIds:e.join(",")},{listings:n}=await L.getAllListings(t),s=Object.values(n);s.sort(((t,n)=>e.indexOf(t.id)-e.indexOf(n.id))),$.recomendedWallets=s}else{const e=f.isArray(t),n={page:1,entries:f.RECOMMENDED_WALLET_AMOUNT,version:2,excludedIds:e?t.join(","):void 0},{listings:s}=F?await L.getMobileListings(n):await L.getDesktopListings(n);$.recomendedWallets=Object.values(s)}return $.recomendedWallets},async getWallets(e){const t=((e,t)=>{for(var n in t||(t={}))D.call(t,n)&&B(e,n,t[n]);if(R)for(var n of R(t))M.call(t,n)&&B(e,n,t[n]);return e})({},e),{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:s}=A.state,{recomendedWallets:r}=$;if("ALL"===s)return $.wallets;r.length?t.excludedIds=r.map((e=>e.id)).join(","):f.isArray(n)&&(t.excludedIds=n.join(",")),f.isArray(s)&&(t.excludedIds=[t.excludedIds,s].filter(Boolean).join(","));const{page:i,search:o}=e,{listings:a,total:c}=F?await L.getMobileListings(t):await L.getDesktopListings(t),l=Object.values(a),u=o?"search":"wallets";return $[u]={listings:[...$[u].listings,...l],total:c,page:i??1},{listings:l,total:c}},async getInjectedWallets(){const{listings:e}=await L.getInjectedListings({}),t=Object.values(e);return $.injectedWallets=t,$.injectedWallets},getWalletImageUrl:e=>L.getWalletImageUrl(e),getAssetImageUrl:e=>L.getAssetImageUrl(e),resetSearch(){$.search={listings:[],total:0,page:1}}},H=l({pairingEnabled:!1,pairingUri:"",pairingError:!1}),z={state:H,subscribe:e=>u(H,(()=>e(H))),setPairingUri(e){H.pairingUri=e},setPairingError(e){H.pairingError=e},setPairingEnabled(e){H.pairingEnabled=e}},W=l({open:!1}),q={state:W,subscribe:e=>u(W,(()=>e(W))),open:async e=>new Promise((t=>{const{isUiLoaded:n,isDataLoaded:s,isPreferInjected:r,selectedChain:i}=w.state,{isConnected:o}=E.state,{enableNetworkView:a}=A.state;if(z.setPairingEnabled(!0),o||f.removeWalletConnectDeepLink(),null!=e&&e.route)d.reset(e.route);else if(o)d.reset("Account");else if(a)d.reset("SelectNetwork");else{if(r)return g.client().connectConnector("injected",i?.id).catch((e=>console.error(e))),void t();d.reset("ConnectWallet")}const{pairingUri:c}=z.state;if(n&&s&&(c||o))W.open=!0,t();else{const e=setInterval((()=>{const n=w.state,s=z.state;n.isUiLoaded&&n.isDataLoaded&&(s.pairingUri||o)&&(clearInterval(e),W.open=!0,t())}),200)}})),close(){W.open=!1}};var K=Object.defineProperty,V=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,Y=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const X=l({themeMode:typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),Z={state:X,subscribe:e=>u(X,(()=>e(X))),setThemeConfig(e){const{themeMode:t,themeVariables:n}=e;t&&(X.themeMode=t),n&&(X.themeVariables=((e,t)=>{for(var n in t||(t={}))J.call(t,n)&&Y(e,n,t[n]);if(V)for(var n of V(t))Q.call(t,n)&&Y(e,n,t[n]);return e})({},n))}},ee=l({open:!1,message:"",variant:"success"}),te={state:ee,subscribe:e=>u(ee,(()=>e(ee))),openToast(e,t){ee.open=!0,ee.message=e,ee.variant=t},closeToast(){ee.open=!1}}},3160:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var s=n(6867);function r(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?(0,s.P)(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}},605:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var s=n(3160),r=n(6867);function i(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const n=(0,s.E)(t);let i=0;for(const t of e)n.set(t,i),i+=t.length;return(0,r.P)(n)}},2217:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var s=n(5114),r=n(6867);function i(e,t="utf8"){const n=s.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):(0,r.P)(globalThis.Buffer.from(e,"utf-8"))}},7466:(e,t,n)=>{"use strict";n.d(t,{BB:()=>i.B,mL:()=>r.m,zo:()=>s.z});var s=n(605),r=n(2217),i=n(2263)},2263:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var s=n(5114);function r(e,t="utf8"){const n=s.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},6867:(e,t,n)=>{"use strict";function s(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}n.d(t,{P:()=>s})},5114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ze});var s={};n.r(s),n.d(s,{identity:()=>P});var r={};n.r(r),n.d(r,{base2:()=>T});var i={};n.r(i),n.d(i,{base8:()=>I});var o={};n.r(o),n.d(o,{base10:()=>O});var a={};n.r(a),n.d(a,{base16:()=>N,base16upper:()=>j});var c={};n.r(c),n.d(c,{base32:()=>L,base32hex:()=>M,base32hexpad:()=>F,base32hexpadupper:()=>$,base32hexupper:()=>B,base32pad:()=>R,base32padupper:()=>D,base32upper:()=>U,base32z:()=>G});var l={};n.r(l),n.d(l,{base36:()=>H,base36upper:()=>z});var u={};n.r(u),n.d(u,{base58btc:()=>W,base58flickr:()=>q});var h={};n.r(h),n.d(h,{base64:()=>K,base64pad:()=>V,base64url:()=>J,base64urlpad:()=>Q});var d={};n.r(d),n.d(d,{base256emoji:()=>ee});var f={};n.r(f),n.d(f,{sha256:()=>xe,sha512:()=>Ce});var p={};n.r(p),n.d(p,{identity:()=>Pe});var g={};n.r(g),n.d(g,{code:()=>Ie,decode:()=>Ne,encode:()=>Oe,name:()=>Te});var m={};n.r(m),n.d(m,{code:()=>Re,decode:()=>Me,encode:()=>De,name:()=>Ue});var y=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),o=i.charCodeAt(0);if(255!==n[o])throw new TypeError(i+" is ambiguous");n[o]=r}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var s=0,r=0;e[t]===c;)s++,t++;for(var i=(e.length-t)*l+1>>>0,o=new Uint8Array(i);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=i-1;(0!==u||h<r)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");r=h,t++}if(" "!==e[t]){for(var f=i-r;f!==i&&0===o[f];)f++;for(var p=new Uint8Array(s+(i-f)),g=s;f!==i;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,s=0,r=0,i=t.length;r!==i&&0===t[r];)r++,n++;for(var o=(i-r)*u+1>>>0,l=new Uint8Array(o);r!==i;){for(var h=t[r],d=0,f=o-1;(0!==h||d<s)&&-1!==f;f--,d++)h+=256*l[f]>>>0,l[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");s=d,r++}for(var p=o-s;p!==o&&0===l[p];)p++;for(var g=c.repeat(n);p<o;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:h,decode:function(e){var n=h(e);if(n)return n;throw new Error(`Non-${t} character`)}}};const b=y,w=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class v{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class A{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return k(this,e)}}class _{constructor(e){this.decoders=e}or(e){return k(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const k=(e,t)=>new _({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class E{constructor(e,t,n,s){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new v(e,t,n),this.decoder=new A(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const x=({name:e,prefix:t,encode:n,decode:s})=>new E(e,t,n,s),C=({prefix:e,name:t,alphabet:n})=>{const{encode:s,decode:r}=b(n,t);return x({prefix:e,name:t,encode:s,decode:e=>w(r(e))})},S=({name:e,prefix:t,bitsPerChar:n,alphabet:s})=>x({prefix:t,name:e,encode:e=>((e,t,n)=>{const s="="===t[t.length-1],r=(1<<n)-1;let i="",o=0,a=0;for(let s=0;s<e.length;++s)for(a=a<<8|e[s],o+=8;o>n;)o-=n,i+=t[r&a>>o];if(o&&(i+=t[r&a<<n-o]),s)for(;i.length*n&7;)i+="=";return i})(e,s,n),decode:t=>((e,t,n,s)=>{const r={};for(let e=0;e<t.length;++e)r[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let t=0;t<i;++t){const i=r[e[t]];if(void 0===i)throw new SyntaxError(`Non-${s} character`);c=c<<n|i,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,s,n,e)}),P=x({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),T=S({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),I=S({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),O=C({prefix:"9",name:"base10",alphabet:"0123456789"}),N=S({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),j=S({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),L=S({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),U=S({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),R=S({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),D=S({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),M=S({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),B=S({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),F=S({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$=S({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G=S({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),H=C({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z=C({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),W=C({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),q=C({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),K=S({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),V=S({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),J=S({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Q=S({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Y=Array.from(""),X=Y.reduce(((e,t,n)=>(e[n]=t,e)),[]),Z=Y.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);const ee=x({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=X[t]),"")},decode:function(e){const t=[];for(const n of e){const e=Z[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var te=function e(t,n,s){n=n||[];var r=s=s||0;for(;t>=re;)n[s++]=255&t|ne,t/=128;for(;t&se;)n[s++]=255&t|ne,t>>>=7;return n[s]=0|t,e.bytes=s-r+1,n},ne=128,se=-128,re=Math.pow(2,31);var ie=function e(t,n){var s,r=0,i=0,o=n=n||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&ae)<<i:(s&ae)*Math.pow(2,i),i+=7}while(s>=oe);return e.bytes=o-n,r},oe=128,ae=127;var ce=Math.pow(2,7),le=Math.pow(2,14),ue=Math.pow(2,21),he=Math.pow(2,28),de=Math.pow(2,35),fe=Math.pow(2,42),pe=Math.pow(2,49),ge=Math.pow(2,56),me=Math.pow(2,63);const ye={encode:te,decode:ie,encodingLength:function(e){return e<ce?1:e<le?2:e<ue?3:e<he?4:e<de?5:e<fe?6:e<pe?7:e<ge?8:e<me?9:10}},be=(e,t,n=0)=>(ye.encode(e,t,n),t),we=e=>ye.encodingLength(e),ve=(e,t)=>{const n=t.byteLength,s=we(e),r=s+we(n),i=new Uint8Array(r+n);return be(e,i,0),be(n,i,s),i.set(t,r),new Ae(e,n,t,i)};class Ae{constructor(e,t,n,s){this.code=e,this.size=t,this.digest=n,this.bytes=s}}const _e=({name:e,code:t,encode:n})=>new ke(e,t,n);class ke{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ve(this.code,t):t.then((e=>ve(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Ee=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),xe=_e({name:"sha2-256",code:18,encode:Ee("SHA-256")}),Ce=_e({name:"sha2-512",code:19,encode:Ee("SHA-512")}),Se=w,Pe={code:0,name:"identity",encode:Se,digest:e=>ve(0,Se(e))},Te="raw",Ie=85,Oe=e=>w(e),Ne=e=>w(e),je=new TextEncoder,Le=new TextDecoder,Ue="json",Re=512,De=e=>je.encode(JSON.stringify(e)),Me=e=>JSON.parse(Le.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const Be={...s,...r,...i,...o,...a,...c,...l,...u,...h,...d};var Fe=n(3160);function $e(e,t,n,s){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:s}}}const Ge=$e("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),He=$e("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{e=e.substring(1);const t=(0,Fe.E)(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),ze={utf8:Ge,"utf-8":Ge,hex:Be.base16,latin1:He,ascii:He,binary:He,...Be}},4503:(e,t,n)=>{"use strict";function s(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}n.d(t,{T:()=>s})},6143:(e,t,n)=>{"use strict";n.d(t,{R:()=>w});var s=n(4503),r=n(6693);const i="0x82ad56cb";var o=n(2027),a=n(377),c=n(5980),l=n(7210),u=n(7799),h=n(2676),d=n(2106),f=n(6445),p=n(7469);var g=n(1163),m=n(4688),y=n(2357),b=n(7531);async function w(e,t){const{account:w=e.account,batch:v=Boolean(e.batch?.multicall),blockNumber:A,blockTag:_="latest",accessList:k,data:E,gas:x,gasPrice:C,maxFeePerGas:S,maxPriorityFeePerGas:P,nonce:T,to:I,value:O,...N}=t,j=w?(0,s.T)(w):void 0;try{(0,b.F)(t);const n=(A?(0,d.eC)(A):void 0)||_,s=e.chain?.formatters?.transactionRequest?.format||m.tG,o=s({...(0,g.K)(N,{format:s}),from:j?.address,accessList:k,data:E,gas:x,gasPrice:C,maxFeePerGas:S,maxPriorityFeePerGas:P,nonce:T,to:I,value:O});if(v&&function({request:e}){const{data:t,to:n,...s}=e;return!!t&&(!t.startsWith(i)&&(!!n&&!(Object.values(s).filter((e=>void 0!==e)).length>0)))}({request:o}))try{return await async function(e,t){const{batchSize:n=1024,wait:s=0}="object"==typeof e.batch?.multicall?e.batch.multicall:{},{blockNumber:i,blockTag:o="latest",data:f,multicallAddress:p,to:g}=t;let m=p;if(!m){if(!e.chain)throw new a.pZ;m=(0,h.LI)({blockNumber:i,chain:e.chain,contract:"multicall3"})}const b=i?(0,d.eC)(i):void 0,w=b||o,{schedule:v}=(0,y.S)({id:`${e.uid}.${w}`,wait:s,shouldSplitBatch(e){const t=e.reduce(((e,{data:t})=>e+(t.length-2)),0);return t>2*n},fn:async t=>{const n=t.map((e=>({allowFailure:!0,callData:e.data,target:e.to}))),s=(0,u.R)({abi:r.F8,args:[n],functionName:"aggregate3"}),i=await e.request({method:"eth_call",params:[{data:s,to:m},w]});return(0,l.k)({abi:r.F8,args:[n],functionName:"aggregate3",data:i||"0x"})}}),[{returnData:A,success:_}]=await v({data:f,to:g});if(!_)throw new c.VQ({data:A});return"0x"===A?{data:void 0}:{data:A}}(e,{...o,blockNumber:A,blockTag:_})}catch(e){if(!(e instanceof a.pZ||e instanceof a.mm))throw e}const f=await e.request({method:"eth_call",params:n?[o,n]:[o]});return"0x"===f?{data:void 0}:{data:f}}catch(s){const r=function(e){if(!(e instanceof o.G))return;const t=e.walk();return"object"==typeof t.data?t.data.data:t.data}(s),{offchainLookup:i,offchainLookupSignature:a}=await n.e(770).then(n.bind(n,9770));if(r?.slice(0,10)===a&&I)return{data:await i(e,{data:r,to:I})};throw function(e,{docsPath:t,...n}){const s=(()=>{const t=(0,p.k)(e,n);return t instanceof f.cj?e:t})();return new c.cg(s,{docsPath:t,...n})}(s,{...t,account:j,chain:e.chain})}}},6693:(e,t,n)=>{"use strict";n.d(t,{$o:()=>l,F8:()=>s,X$:()=>c,du:()=>o,k3:()=>i,nZ:()=>a});const s=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],r=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"}],i=[...r,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],o=[...r,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],a=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],c=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],l=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}]},1746:(e,t,n)=>{"use strict";n.d(t,{$:()=>s,Up:()=>r,hZ:()=>i});const s={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},r={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},i={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}},4192:(e,t,n)=>{"use strict";n.d(t,{Bd:()=>i,Zn:()=>r,ez:()=>s});const s={gwei:9,wei:18},r={ether:-9,wei:9},i={ether:-18,gwei:-9}},7412:(e,t,n)=>{"use strict";n.d(t,{CI:()=>k,FM:()=>p,Gy:()=>A,KY:()=>w,M4:()=>h,MX:()=>b,SM:()=>v,cO:()=>a,dh:()=>_,fM:()=>o,fs:()=>d,gr:()=>u,hn:()=>E,lC:()=>g,mv:()=>m,wM:()=>x,wb:()=>l,xB:()=>c,xL:()=>y,yP:()=>f});var s=n(522),r=n(9135),i=n(2027);class o extends i.G{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class a extends i.G{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class c extends i.G{constructor({data:e,params:t,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${(0,s.h)(t,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=n}}class l extends i.G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class u extends i.G{constructor({expectedLength:e,givenLength:t,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class h extends i.G{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${(0,r.d)(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class d extends i.G{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class f extends i.G{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class p extends i.G{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class g extends i.G{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class m extends i.G{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class y extends i.G{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class b extends i.G{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class w extends i.G{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class v extends i.G{constructor({abiItem:e,data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for non-indexed event parameters.`].join("\n"),{metaMessages:[`Params: (${(0,s.h)(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=n,this.size=r}}class A extends i.G{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${(0,s.t)(e,{includeName:!0})}".`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class _ extends i.G{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class k extends i.G{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class E extends i.G{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class x extends i.G{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}},6087:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var s=n(2027);class r extends s.G{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}},2027:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});var s=n(8673);class r extends Error{constructor(e,t={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.bo)()});const n=t.cause instanceof r?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof r&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: https://viem.sh${i}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return i(this,e)}}function i(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e?i(e.cause,t):t?null:e}},377:(e,t,n)=>{"use strict";n.d(t,{Bk:()=>o,Yl:()=>i,mm:()=>r,pZ:()=>a});var s=n(2027);class r extends s.G{constructor({blockNumber:e,chain:t,contract:n}){super(`Chain "${t.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class i extends s.G{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class o extends s.G{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class a extends s.G{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}},5980:(e,t,n)=>{"use strict";n.d(t,{cg:()=>m,uq:()=>y,Lu:()=>b,Dk:()=>w,VQ:()=>v});var s=n(4503),r=n(1746),i=n(6899),o=n(522),a=n(6070);function c({abiItem:e,args:t,includeFunctionName:n=!0,includeName:s=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map(((e,n)=>`${s&&e.name?`${e.name}: `:""}${"object"==typeof t[n]?(0,a.P)(t[n]):t[n]}`)).join(", ")})`}var l=n(840),u=n(9625),h=n(7795),d=n(7412),f=n(2027),p=n(3639),g=n(8673);class m extends f.G{constructor(e,{account:t,docsPath:n,chain:r,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:d,to:f,value:g}){const m=t?(0,s.T)(t):void 0,y=(0,p.xr)({from:m?.address,to:f,value:void 0!==g&&`${(0,u.d)(g)} ${r?.nativeCurrency.symbol||"ETH"}`,data:i,gas:o,gasPrice:void 0!==a&&`${(0,h.o)(a)} gwei`,maxFeePerGas:void 0!==c&&`${(0,h.o)(c)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${(0,h.o)(l)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",y].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=e}}class y extends f.G{constructor(e,{abi:t,args:n,contractAddress:s,docsPath:r,functionName:i,sender:a}){const u=(0,l.m)({abi:t,args:n,name:i}),h=u?c({abiItem:u,args:n,includeFunctionName:!1,includeName:!1}):void 0,d=u?(0,o.t)(u,{includeName:!0}):void 0,f=(0,p.xr)({address:s&&(0,g.CR)(s),function:d,args:h&&"()"!==h&&`${[...Array(i?.length??0).keys()].map((()=>" ")).join("")}${h}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Contract Call:",f].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=t,this.args=n,this.cause=e,this.contractAddress=s,this.functionName=i,this.sender=a}}class b extends f.G{constructor({abi:e,data:t,functionName:n,message:s}){let a,l,u,h,f;if(t&&"0x"!==t)try{l=(0,i.p)({abi:e,data:t});const{abiItem:n,errorName:s,args:a}=l;if("Error"===s)h=a[0];else if("Panic"===s){const[e]=a;h=r.$[e]}else{const e=n?(0,o.t)(n,{includeName:!0}):void 0,t=n&&a?c({abiItem:n,args:a,includeFunctionName:!1,includeName:!1}):void 0;u=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(s?.length??0).keys()].map((()=>" ")).join("")}${t}`:""]}}catch(e){a=e}else s&&(h=s);a instanceof d.yP&&(f=a.signature,u=[`Unable to decode signature "${f}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${f}.`]),super(h&&"execution reverted"!==h||f?[`The contract function "${n}" reverted with the following ${f?"signature":"reason"}:`,h||f].join("\n"):`The contract function "${n}" reverted.`,{cause:a,metaMessages:u}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=l,this.reason=h,this.signature=f}}class w extends f.G{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class v extends f.G{constructor({data:e,message:t}){super(t||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}},9760:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,m:()=>r});var s=n(2027);class r extends s.G{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class i extends s.G{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}},7788:(e,t,n)=>{"use strict";n.d(t,{Cd:()=>i,J5:()=>r,M6:()=>o});var s=n(2027);class r extends s.G{constructor({max:e,min:t,signed:n,size:s,value:r}){super(`Number "${r}" is not in safe ${s?`${8*s}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class i extends s.G{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}class o extends s.G{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}},6445:(e,t,n)=>{"use strict";n.d(t,{C_:()=>h,G$:()=>a,Hh:()=>o,M_:()=>i,WF:()=>d,ZI:()=>c,cj:()=>m,cs:()=>g,dR:()=>f,pZ:()=>p,se:()=>u,vU:()=>l});var s=n(7795),r=n(2027);class i extends r.G{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class o extends r.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,s.o)(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class a extends r.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,s.o)(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class c extends r.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class l extends r.G{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class u extends r.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class h extends r.G{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class d extends r.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class f extends r.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class p extends r.G{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class g extends r.G{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${(0,s.o)(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${(0,s.o)(n)} gwei`:""}).`].join("\n"),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(g,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class m extends r.G{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}},8863:(e,t,n)=>{"use strict";n.d(t,{Gg:()=>o,W5:()=>l,bs:()=>c,c9:()=>a});var s=n(6070),r=n(2027),i=n(8673);class o extends r.G{constructor({body:e,details:t,headers:n,status:r,url:o}){super("HTTP request failed.",{details:t,metaMessages:[r&&`Status: ${r}`,`URL: ${(0,i.Gr)(o)}`,e&&`Request body: ${(0,s.P)(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=r,this.url=o}}class a extends r.G{constructor({body:e,details:t,url:n}){super("WebSocket request failed.",{details:t,metaMessages:[`URL: ${(0,i.Gr)(n)}`,`Request body: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class c extends r.G{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${(0,i.Gr)(n)}`,`Request body: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class l extends r.G{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,i.Gr)(t)}`,`Request body: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}},3639:(e,t,n)=>{"use strict";n.d(t,{Bh:()=>u,Yb:()=>h,j3:()=>c,mc:()=>d,mk:()=>l,xY:()=>a,xr:()=>o});var s=n(9625),r=n(7795),i=n(2027);function o(e){const t=Object.entries(e).map((([e,t])=>void 0===t||!1===t?null:[e,t])).filter(Boolean),n=t.reduce(((e,[t])=>Math.max(e,t.length)),0);return t.map((([e,t])=>`  ${`${e}:`.padEnd(n+1)}  ${t}`)).join("\n")}class a extends i.G{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class c extends i.G{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",o(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class l extends i.G{constructor(e,{account:t,docsPath:n,chain:i,data:a,gas:c,gasPrice:l,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:d,to:f,value:p}){const g=o({chain:i&&`${i?.name} (id: ${i?.id})`,from:t?.address,to:f,value:void 0!==p&&`${(0,s.d)(p)} ${i?.nativeCurrency.symbol||"ETH"}`,data:a,gas:c,gasPrice:void 0!==l&&`${(0,r.o)(l)} gwei`,maxFeePerGas:void 0!==u&&`${(0,r.o)(u)} gwei`,maxPriorityFeePerGas:void 0!==h&&`${(0,r.o)(h)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",g].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}class u extends i.G{constructor({blockHash:e,blockNumber:t,blockTag:n,hash:s,index:r}){let i="Transaction";n&&void 0!==r&&(i=`Transaction at block time "${n}" at index "${r}"`),e&&void 0!==r&&(i=`Transaction at block hash "${e}" at index "${r}"`),t&&void 0!==r&&(i=`Transaction at block number "${t}" at index "${r}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class h extends i.G{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class d extends i.G{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}},8673:(e,t,n)=>{"use strict";n.d(t,{CR:()=>s,Gr:()=>r,bo:()=>i});const s=e=>e,r=e=>e,i=()=>"viem@1.15.3"},4450:(e,t,n)=>{"use strict";n.d(t,{r:()=>u});var s=n(7412),r=n(5775),i=n(9135),o=n(3972),a=n(1836),c=n(5946),l=n(5444);function u(e,t){if("0x"===t&&e.length>0)throw new s.wb;if((0,i.d)(t)&&(0,i.d)(t)<32)throw new s.xB({data:t,params:e,size:(0,i.d)(t)});return function({data:e,params:t}){const n=[];let r=0;for(let o=0;o<t.length;o++){if(r>=(0,i.d)(e))throw new s.xB({data:e,params:t,size:(0,i.d)(e)});const a=t[o],{consumed:c,value:l}=h({data:e,param:a,position:r});n.push(l),r+=c}return n}({data:t,params:e})}function h({data:e,param:t,position:n}){const i=(0,l.S)(t.type);if(i){const[s,r]=i;return function(e,{param:t,length:n,position:s}){if(!n){const n=(0,c.ly)((0,o.tP)(e,s,s+32,{strict:!0})),r=(0,c.ly)((0,o.tP)(e,n,n+32,{strict:!0}));let i=0;const a=[];for(let s=0;s<r;++s){const s=h({data:(0,o.tP)(e,n+32),param:t,position:i});i+=s.consumed,a.push(s.value)}return{value:a,consumed:32}}if(d(t)){const r=(0,l.S)(t.type),i=!r?.[0];let a=0;const u=[];for(let r=0;r<n;++r){const n=(0,c.ly)((0,o.tP)(e,s,s+32,{strict:!0})),l=h({data:(0,o.tP)(e,n),param:t,position:i?a:32*r});a+=l.consumed,u.push(l.value)}return{value:u,consumed:32}}let r=0;const i=[];for(let o=0;o<n;++o){const n=h({data:e,param:t,position:s+r});r+=n.consumed,i.push(n.value)}return{value:i,consumed:r}}(e,{length:s,param:{...t,type:r},position:n})}if("tuple"===t.type)return function(e,{param:t,position:n}){const s=0===t.components.length||t.components.some((({name:e})=>!e)),r=s?[]:{};let i=0;if(d(t)){const a=(0,c.ly)((0,o.tP)(e,n,n+32,{strict:!0}));for(let n=0;n<t.components.length;++n){const c=t.components[n],l=h({data:(0,o.tP)(e,a),param:c,position:i});i+=l.consumed,r[s?n:c?.name]=l.value}return{consumed:32,value:r}}for(let o=0;o<t.components.length;++o){const a=t.components[o],c=h({data:e,param:a,position:n+i});i+=c.consumed,r[s?o:a?.name]=c.value}return{consumed:i,value:r}}(e,{param:t,position:n});if("string"===t.type)return function(e,{position:t}){const n=(0,c.ly)((0,o.tP)(e,t,t+32,{strict:!0})),s=(0,c.ly)((0,o.tP)(e,n,n+32,{strict:!0}));if(0===s)return{consumed:32,value:""};const r=(0,c.rR)((0,a.f)((0,o.tP)(e,n+32,n+32+s,{strict:!0})));return{consumed:32,value:r}}(e,{position:n});if(t.type.startsWith("bytes"))return function(e,{param:t,position:n}){const[s,r]=t.type.split("bytes");if(!r){const t=(0,c.ly)((0,o.tP)(e,n,n+32,{strict:!0})),s=(0,c.ly)((0,o.tP)(e,t,t+32,{strict:!0}));if(0===s)return{consumed:32,value:"0x"};return{consumed:32,value:(0,o.tP)(e,t+32,t+32+s,{strict:!0})}}const i=(0,o.tP)(e,n,n+parseInt(r),{strict:!0});return{consumed:32,value:i}}(e,{param:t,position:n});const u=(0,o.tP)(e,n,n+32,{strict:!0});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,{param:t}){const n=t.type.startsWith("int"),s=parseInt(t.type.split("int")[1]||"256");return{consumed:32,value:s>48?(0,c.y_)(e,{signed:n}):(0,c.ly)(e,{signed:n})}}(u,{param:t});if("address"===t.type)return function(e){return{consumed:32,value:(0,r.x)((0,o.tP)(e,-20))}}(u);if("bool"===t.type)return function(e){return{consumed:32,value:(0,c.XA)(e)}}(u);throw new s.CI(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function d(e){const{type:t}=e;if("string"===t)return!0;if("bytes"===t)return!0;if(t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(d);const n=(0,l.S)(e.type);return!(!n||!d({...e,type:n[1]}))}},6899:(e,t,n)=>{"use strict";n.d(t,{p:()=>l});var s=n(1746),r=n(7412),i=n(3972),o=n(552),a=n(4450),c=n(522);function l({abi:e,data:t}){const n=(0,i.tP)(t,0,4);if("0x"===n)throw new r.wb;const l=[...e||[],s.Up,s.hZ].find((e=>"error"===e.type&&n===(0,o.o)((0,c.t)(e))));if(!l)throw new r.yP(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:l,args:"inputs"in l&&l.inputs&&l.inputs.length>0?(0,a.r)(l.inputs,(0,i.tP)(t,4)):void 0,errorName:l.name}}},7210:(e,t,n)=>{"use strict";n.d(t,{k:()=>a});var s=n(7412),r=n(4450),i=n(840);const o="/docs/contract/decodeFunctionResult";function a({abi:e,args:t,functionName:n,data:a}){let c=e[0];if(n&&(c=(0,i.m)({abi:e,args:t,name:n}),!c))throw new s.xL(n,{docsPath:o});if("function"!==c.type)throw new s.xL(void 0,{docsPath:o});if(!c.outputs)throw new s.MX(c.name,{docsPath:o});const l=(0,r.r)(c.outputs,a);return l&&l.length>1?l:l&&1===l.length?l[0]:void 0}},5444:(e,t,n)=>{"use strict";n.d(t,{E:()=>h,S:()=>p});var s=n(7412),r=n(6087),i=n(9321),o=n(7040),a=n(1769),c=n(9135),l=n(3972),u=n(2106);function h(e,t){if(e.length!==t.length)throw new s.fs({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let s=0;s<e.length;s++)n.push(d({param:e[s],value:t[s]}));return n}({params:e,values:t}),r=f(n);return 0===r.length?"0x":r}function d({param:e,value:t}){const n=p(e.type);if(n){const[r,i]=n;return function(e,{length:t,param:n}){const r=null===t;if(!Array.isArray(e))throw new s.hn(e);if(!r&&e.length!==t)throw new s.gr({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let i=!1;const a=[];for(let t=0;t<e.length;t++){const s=d({param:n,value:e[t]});s.dynamic&&(i=!0),a.push(s)}if(r||i){const e=f(a);if(r){const t=(0,u.eC)(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?(0,o.zo)([t,e]):t}}if(i)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:(0,o.zo)(a.map((({encoded:e})=>e)))}}(t,{length:r,param:{...e,type:i}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const s=[];for(let r=0;r<t.components.length;r++){const i=t.components[r],o=d({param:i,value:e[Array.isArray(e)?r:i.name]});s.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?f(s):(0,o.zo)(s.map((({encoded:e})=>e)))}}(t,{param:e});if("address"===e.type)return function(e){if(!(0,i.U)(e))throw new r.b({address:e});return{dynamic:!1,encoded:(0,a.gc)(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){return{dynamic:!1,encoded:(0,a.gc)((0,u.C4)(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){return function(e,{signed:t}){return{dynamic:!1,encoded:(0,u.eC)(e,{size:32,signed:t})}}(t,{signed:e.type.startsWith("int")})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),r=(0,c.d)(e);if(!n){let t=e;return r%32!=0&&(t=(0,a.gc)(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:(0,o.zo)([(0,a.gc)((0,u.eC)(r,{size:32})),t])}}if(r!==parseInt(n))throw new s.M4({expectedSize:parseInt(n),value:e});return{dynamic:!1,encoded:(0,a.gc)(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=(0,u.$G)(e),n=Math.ceil((0,c.d)(t)/32),s=[];for(let e=0;e<n;e++)s.push((0,a.gc)((0,l.tP)(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:(0,o.zo)([(0,a.gc)((0,u.eC)((0,c.d)(t),{size:32})),...s])}}(t);throw new s.dh(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function f(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:s,encoded:r}=e[n];t+=s?32:(0,c.d)(r)}const n=[],s=[];let r=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:a}=e[i];o?(n.push((0,u.eC)(t+r,{size:32})),s.push(a),r+=(0,c.d)(a)):n.push(a)}return(0,o.zo)([...n,...s])}function p(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}},7799:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var s=n(7412),r=n(7040),i=n(552),o=n(5444),a=n(522),c=n(840);function l({abi:e,args:t,functionName:n}){let l=e[0];if(n&&(l=(0,c.m)({abi:e,args:t,name:n}),!l))throw new s.xL(n,{docsPath:"/docs/contract/encodeFunctionData"});if("function"!==l.type)throw new s.xL(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const u=(0,a.t)(l),h=(0,i.o)(u),d="inputs"in l&&l.inputs?(0,o.E)(l.inputs,t??[]):void 0;return(0,r.SM)([h,d??"0x"])}},522:(e,t,n)=>{"use strict";n.d(t,{h:()=>i,t:()=>r});var s=n(7412);function r(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new s.wM(e.type);return`${e.name}(${i(e.inputs,{includeName:t})})`}function i(e,{includeName:t=!1}={}){return e?e.map((e=>function(e,{includeName:t}){if(e.type.startsWith("tuple"))return`(${i(e.components,{includeName:t})})${e.type.slice(5)}`;return e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}},840:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var s=n(5102),r=n(4092),i=n(552),o=n(9321);function a({abi:e,args:t=[],name:n}){const o=(0,s.v)(n,{strict:!1}),a=e.filter((e=>o?"function"===e.type?(0,i.o)(e)===n:"event"===e.type&&(0,r.e)(e)===n:"name"in e&&e.name===n));if(0!==a.length){if(1===a.length)return a[0];for(const e of a){if(!("inputs"in e))continue;if(!t||0===t.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==t.length)continue;if(t.every(((t,n)=>{const s="inputs"in e&&e.inputs[n];return!!s&&c(t,s)})))return e}return a[0]}}function c(e,t){const n=typeof e,s=t.type;switch(s){case"address":return(0,o.U)(e);case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===s&&"components"in t?Object.values(t.components).every(((t,n)=>c(Object.values(e)[n],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)&&(Array.isArray(e)&&e.every((e=>c(e,{...t,type:s.replace(/(\[[0-9]{0,}\])$/,"")}))))}}},5775:(e,t,n)=>{"use strict";n.d(t,{K:()=>c,x:()=>a});var s=n(6087),r=n(1187),i=n(4813),o=n(9321);function a(e,t){const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),s=(0,i.w)((0,r.qX)(n),"bytes"),o=(t?n.substring(`${t}0x`.length):n).split("");for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&o[e]&&(o[e]=o[e].toUpperCase()),(15&s[e>>1])>=8&&o[e+1]&&(o[e+1]=o[e+1].toUpperCase());return`0x${o.join("")}`}function c(e,t){if(!(0,o.U)(e))throw new s.b({address:e});return a(e,t)}},9321:(e,t,n)=>{"use strict";n.d(t,{U:()=>r});const s=/^0x[a-fA-F0-9]{40}$/;function r(e){return s.test(e)}},2676:(e,t,n)=>{"use strict";n.d(t,{LI:()=>o,ax:()=>i,qg:()=>r});var s=n(377);function r({chain:e,currentChainId:t}){if(!e)throw new s.Bk;if(t!==e.id)throw new s.Yl({chain:e,currentChainId:t})}function i(e,t={}){const{fees:n=e.fees,formatters:s=e.formatters,serializers:r=e.serializers}=t;return{...e,fees:n,formatters:s,serializers:r}}function o({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new s.mm({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new s.mm({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}},7040:(e,t,n)=>{"use strict";function s(e){return"string"==typeof e[0]?r(e):function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let s=0;for(const t of e)n.set(t,s),s+=t.length;return n}(e)}function r(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}n.d(t,{SM:()=>r,zo:()=>s})},5102:(e,t,n)=>{"use strict";function s(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}n.d(t,{v:()=>s})},1769:(e,t,n)=>{"use strict";n.d(t,{gc:()=>i,vk:()=>r});var s=n(9760);function r(e,{dir:t,size:n=32}={}){return"string"==typeof e?i(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new s.$({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i="right"===t;r[i?s:n-s-1]=e[i?s:e.length-s-1]}return r}(e,{dir:t,size:n})}function i(e,{dir:t,size:n=32}={}){if(null===n)return e;const r=e.replace("0x","");if(r.length>2*n)throw new s.$({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r["right"===t?"padEnd":"padStart"](2*n,"0")}`}},9135:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var s=n(5102);function r(e){return(0,s.v)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},3972:(e,t,n)=>{"use strict";n.d(t,{tP:()=>o});var s=n(9760),r=n(5102),i=n(9135);function o(e,t,n,{strict:s}={}){return(0,r.v)(e,{strict:!1})?function(e,t,n,{strict:s}={}){a(e,t);const r=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;s&&c(r,t,n);return r}(e,t,n,{strict:s}):function(e,t,n,{strict:s}={}){a(e,t);const r=e.slice(t,n);s&&c(r,t,n);return r}(e,t,n,{strict:s})}function a(e,t){if("number"==typeof t&&t>0&&t>(0,i.d)(e)-1)throw new s.m({offset:t,position:"start",size:(0,i.d)(e)})}function c(e,t,n){if("number"==typeof t&&"number"==typeof n&&(0,i.d)(e)!==n-t)throw new s.m({offset:n,position:"end",size:(0,i.d)(e)})}},1836:(e,t,n)=>{"use strict";function s(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,s=0;for(let e=0;e<n.length-1&&"0"===n["left"===t?e:n.length-e-1].toString();e++)s++;return n="left"===t?n.slice(s):n.slice(0,n.length-s),"string"==typeof e?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}n.d(t,{f:()=>s})},5946:(e,t,n)=>{"use strict";n.d(t,{XA:()=>l,Yf:()=>a,ly:()=>u,rR:()=>h,y_:()=>c});var s=n(7788),r=n(9135),i=n(1836),o=n(1187);function a(e,{size:t}){if((0,r.d)(e)>t)throw new s.M6({givenSize:(0,r.d)(e),maxSize:t})}function c(e,t={}){const{signed:n}=t;t.size&&a(e,{size:t.size});const s=BigInt(e);if(!n)return s;const r=(e.length-2)/2;return s<=(1n<<8n*BigInt(r)-1n)-1n?s:s-BigInt(`0x${"f".padStart(2*r,"f")}`)-1n}function l(e,t={}){let n=e;if(t.size&&(a(n,{size:t.size}),n=(0,i.f)(n)),"0x00"===(0,i.f)(n))return!1;if("0x01"===(0,i.f)(n))return!0;throw new s.Cd(n)}function u(e,t={}){return Number(c(e,t))}function h(e,t={}){let n=(0,o.nr)(e);return t.size&&(a(n,{size:t.size}),n=(0,i.f)(n,{dir:"right"})),(new TextDecoder).decode(n)}},1187:(e,t,n)=>{"use strict";n.d(t,{O0:()=>l,nr:()=>d,qX:()=>f});var s=n(2027),r=n(5102),i=n(1769),o=n(5946),a=n(2106);const c=new TextEncoder;function l(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const n=(0,a.eC)(e,t);return d(n)}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);if(n[0]=Number(e),"number"==typeof t.size)return(0,o.Yf)(n,{size:t.size}),(0,i.vk)(n,{size:t.size});return n}(e,t):(0,r.v)(e)?d(e,t):f(e,t)}const u={zero:48,nine:57,A:65,F:70,a:97,f:102};function h(e){return e>=u.zero&&e<=u.nine?e-u.zero:e>=u.A&&e<=u.F?e-(u.A-10):e>=u.a&&e<=u.f?e-(u.a-10):void 0}function d(e,t={}){let n=e;t.size&&((0,o.Yf)(n,{size:t.size}),n=(0,i.vk)(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const a=r.length/2,c=new Uint8Array(a);for(let e=0,t=0;e<a;e++){const n=h(r.charCodeAt(t++)),i=h(r.charCodeAt(t++));if(void 0===n||void 0===i)throw new s.G(`Invalid byte sequence ("${r[t-2]}${r[t-1]}" in "${r}").`);c[e]=16*n+i}return c}function f(e,t={}){const n=c.encode(e);return"number"==typeof t.size?((0,o.Yf)(n,{size:t.size}),(0,i.vk)(n,{dir:"right",size:t.size})):n}},2106:(e,t,n)=>{"use strict";n.d(t,{$G:()=>d,C4:()=>c,NC:()=>a,ci:()=>l,eC:()=>u});var s=n(7788),r=n(1769),i=n(5946);const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e,t={}){return"number"==typeof e||"bigint"==typeof e?u(e,t):"string"==typeof e?d(e,t):"boolean"==typeof e?c(e,t):l(e,t)}function c(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?((0,i.Yf)(n,{size:t.size}),(0,r.vk)(n,{size:t.size})):n}function l(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=o[e[t]];const s=`0x${n}`;return"number"==typeof t.size?((0,i.Yf)(s,{size:t.size}),(0,r.vk)(s,{dir:"right",size:t.size})):s}function u(e,t={}){const{signed:n,size:i}=t,o=BigInt(e);let a;i?a=n?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(a=BigInt(Number.MAX_SAFE_INTEGER));const c="bigint"==typeof a&&n?-a-1n:0;if(a&&o>a||o<c){const t="bigint"==typeof e?"n":"";throw new s.J5({max:a?`${a}${t}`:void 0,min:`${c}${t}`,signed:n,size:i,value:`${e}${t}`})}const l=`0x${(n&&o<0?(1n<<BigInt(8*i))+BigInt(o):o).toString(16)}`;return i?(0,r.vk)(l,{size:i}):l}const h=new TextEncoder;function d(e,t={}){return l(h.encode(e),t)}},7469:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var s=n(2027),r=n(6445);function i(e,t){const n=(e.details||"").toLowerCase(),i=e.walk((e=>e.code===r.M_.code));return i instanceof s.G?new r.M_({cause:e,message:i.details}):r.M_.nodeMessage.test(n)?new r.M_({cause:e,message:e.details}):r.Hh.nodeMessage.test(n)?new r.Hh({cause:e,maxFeePerGas:t?.maxFeePerGas}):r.G$.nodeMessage.test(n)?new r.G$({cause:e,maxFeePerGas:t?.maxFeePerGas}):r.ZI.nodeMessage.test(n)?new r.ZI({cause:e,nonce:t?.nonce}):r.vU.nodeMessage.test(n)?new r.vU({cause:e,nonce:t?.nonce}):r.se.nodeMessage.test(n)?new r.se({cause:e,nonce:t?.nonce}):r.C_.nodeMessage.test(n)?new r.C_({cause:e}):r.WF.nodeMessage.test(n)?new r.WF({cause:e,gas:t?.gas}):r.dR.nodeMessage.test(n)?new r.dR({cause:e,gas:t?.gas}):r.pZ.nodeMessage.test(n)?new r.pZ({cause:e}):r.cs.nodeMessage.test(n)?new r.cs({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new r.cj({cause:e})}},1163:(e,t,n)=>{"use strict";function s(e,{format:t}){if(!t)return{};return Object.keys(t({})).reduce(((t,n)=>(e?.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}n.d(t,{K:()=>s})},4688:(e,t,n)=>{"use strict";n.d(t,{tG:()=>i});var s=n(2106);const r={legacy:"0x0",eip2930:"0x1",eip1559:"0x2"};function i(e){return{...e,gas:void 0!==e.gas?(0,s.eC)(e.gas):void 0,gasPrice:void 0!==e.gasPrice?(0,s.eC)(e.gasPrice):void 0,maxFeePerGas:void 0!==e.maxFeePerGas?(0,s.eC)(e.maxFeePerGas):void 0,maxPriorityFeePerGas:void 0!==e.maxPriorityFeePerGas?(0,s.eC)(e.maxPriorityFeePerGas):void 0,nonce:void 0!==e.nonce?(0,s.eC)(e.nonce):void 0,type:void 0!==e.type?r[e.type]:void 0,value:void 0!==e.value?(0,s.eC)(e.value):void 0}}},4092:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var s=n(1187),r=n(4154);var i=n(4813);const o=e=>{return t=(e=>(0,r.r)(e))(e),(0,i.w)((0,s.O0)(t));var t}},552:(e,t,n)=>{"use strict";n.d(t,{o:()=>a});var s=n(3972),r=n(1187),i=n(4154),o=n(4813);const a=e=>{return(0,s.tP)((t=(0,i.r)(e),(0,o.w)((0,r.O0)(t))),0,4);var t}},4154:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var s=n(522);const r=/((function|event)\s)?(.*)(\((.*)\))/;function i(e){const t=e.match(r),n=t?.[2]||void 0,s=t?.[3];return{type:n,name:s,params:t?.[5]||void 0}}const o=e=>{if("string"==typeof e){const t=i(e).name,n=function(e){const t=i(e).params,n=t?.split(",").map((e=>e.trim().split(" ")));return n?.map((e=>({type:e[0],name:"indexed"===e[1]?e[2]:e[1],..."indexed"===e[1]?{indexed:!0}:{}})))}(e)||[];return`${t}(${n.map((({type:e})=>e)).join(",")})`}return(0,s.t)(e)}},4813:(e,t,n)=>{"use strict";function s(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o(e,t){r(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}n.d(t,{w:()=>D});const a=BigInt(2**32-1),c=BigInt(32);function l(e,t=!1){return t?{h:Number(e&a),l:Number(e>>c&a)}:{h:0|Number(e>>c&a),l:0|Number(e&a)}}function u(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:o}=l(e[r],t);[n[r],s[r]]=[i,o]}return[n,s]}const h=(e,t,n)=>e<<n|t>>>32-n,d=(e,t,n)=>t<<n|e>>>32-n,f=(e,t,n)=>t<<n-32|e>>>64-n,p=(e,t,n)=>e<<n-32|t>>>64-n;const g=e=>e instanceof Uint8Array;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function m(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!g(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class y{clone(){return this._cloneInto()}}const[b,w,v]=[[],[],[]],A=BigInt(0),_=BigInt(1),k=BigInt(2),E=BigInt(7),x=BigInt(256),C=BigInt(113);for(let e=0,t=_,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],b.push(2*(5*s+n)),w.push((e+1)*(e+2)/2%64);let r=A;for(let e=0;e<7;e++)t=(t<<_^(t>>E)*C)%x,t&k&&(r^=_<<(_<<BigInt(e))-_);v.push(r)}const[S,P]=u(v,!0),T=(e,t,n)=>n>32?f(e,t,n):h(e,t,n),I=(e,t,n)=>n>32?p(e,t,n):d(e,t,n);class O extends y{constructor(e,t,n,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,s(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var o;this.state=new Uint8Array(200),this.state32=(o=this.state,new Uint32Array(o.buffer,o.byteOffset,Math.floor(o.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,r=(t+2)%10,i=n[r],o=n[r+1],a=T(i,o,1)^n[s],c=I(i,o,1)^n[s+1];for(let n=0;n<50;n+=10)e[t+n]^=a,e[t+n+1]^=c}let t=e[2],r=e[3];for(let n=0;n<24;n++){const s=w[n],i=T(t,r,s),o=I(t,r,s),a=b[n];t=e[a],r=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)n[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=S[s],e[1]^=P[s]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){i(this);const{blockLen:t,state:n}=this,s=(e=m(e)).length;for(let r=0;r<s;){const i=Math.min(t-this.pos,s-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,0!=(128&t)&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){i(this,!1),r(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,r=e.length;s<r;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,r-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return s(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(o(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:r,enableXOF:i}=this;return e||(e=new O(t,n,s,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const N=(e,t,n)=>function(e){const t=t=>e().update(m(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}((()=>new O(t,e,n))),j=N(1,136,32);var L=n(5102),U=n(1187),R=n(2106);function D(e,t){const n=t||"hex",s=j((0,L.v)(e,{strict:!1})?(0,U.O0)(e):e);return"bytes"===n?s:(0,R.NC)(s)}},2357:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});const s=new Map;function r({fn:e,id:t,shouldSplitBatch:n,wait:r=0}){const i=async()=>{const t=a();o();const n=t.map((({args:e})=>e));0!==n.length&&e(n).then((e=>{t.forEach((({pendingPromise:t},n)=>t.resolve?.([e[n],e])))})).catch((e=>{t.forEach((({pendingPromise:t})=>t.reject?.(e)))}))},o=()=>s.delete(t),a=()=>s.get(t)||[],c=e=>s.set(t,[...a(),e]);return{flush:o,async schedule(e){const t={},s=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),o=n?.([...a().map((({args:e})=>e)),e]);o&&i();return a().length>0?(c({args:e,pendingPromise:t}),s):(c({args:e,pendingPromise:t}),setTimeout(i,r),s)}}}},6070:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});const s=(e,t,n)=>JSON.stringify(e,((e,n)=>{const s="bigint"==typeof n?n.toString():n;return"function"==typeof t?t(e,s):s}),n)},7531:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});var s=n(4503),r=n(6087),i=n(6445),o=n(3639),a=n(9321);function c(e){const{account:t,gasPrice:n,maxFeePerGas:c,maxPriorityFeePerGas:l,to:u}=e,h=t?(0,s.T)(t):void 0;if(h&&!(0,a.U)(h.address))throw new r.b({address:h.address});if(u&&!(0,a.U)(u))throw new r.b({address:u});if(void 0!==n&&(void 0!==c||void 0!==l))throw new o.xY;if(c&&c>2n**256n-1n)throw new i.Hh({maxFeePerGas:c});if(l&&c&&l>c)throw new i.cs({maxFeePerGas:c,maxPriorityFeePerGas:l})}},9625:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var s=n(4192),r=n(5229);function i(e,t="wei"){return(0,r.b)(e,s.ez[t])}},7795:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var s=n(4192),r=n(5229);function i(e,t="wei"){return(0,r.b)(e,s.Zn[t])}},5229:(e,t,n)=>{"use strict";function s(e,t){let n=e.toString();const s=n.startsWith("-");s&&(n=n.slice(1)),n=n.padStart(t,"0");let[r,i]=[n.slice(0,n.length-t),n.slice(n.length-t)];return i=i.replace(/(0+)$/,""),`${s?"-":""}${r||"0"}${i?`.${i}`:""}`}n.d(t,{b:()=>s})},2284:e=>{"use strict";e.exports={version:"1.0.34"}},8586:e=>{"use strict";e.exports={version:"1.0.34"}}},c={};function l(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=a,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",s=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(r,i,o)=>{var a;o&&((a=[]).d=-1);var c,l,u,h=new Set,d=r.exports,f=new Promise(((e,t)=>{u=t,l=e}));f[t]=d,f[e]=e=>(a&&e(a),h.forEach(e),f.catch((e=>{}))),r.exports=f,i((r=>{var i;c=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var i=[];i.d=0,r.then((e=>{o[t]=e,s(i)}),(e=>{o[n]=e,s(i)}));var o={};return o[e]=e=>e(i),o}}var a={};return a[e]=e=>{},a[t]=r,a})))(r);var o=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(i=()=>t(o)).r=0;var n=e=>e!==a&&!h.has(e)&&(h.add(e),e&&!e.d&&(i.r++,e.push(i)));c.map((t=>t[e](n)))}));return i.r?l:o()}),(e=>(e?u(f[n]=e):l(d),s(a)))),a&&a.d<0&&(a.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var s={};r=r||[null,i({}),i([]),i(i)];for(var o=2&t&&e;"object"==typeof o&&!~r.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,l.d(n,s),n},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".js",l.miniCssF=e=>{},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},l.l=(e,t,n,s)=>{if(o[e])o[e].push(t);else{var r,i;if(void 0!==n)for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var u=a[c];if(u.getAttribute("src")==e){r=u;break}}r||(i=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.src=e),o[e]=[t];var h=(t,n)=>{r.onerror=r.onload=null,clearTimeout(d);var s=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((e=>e(n))),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),i&&document.head.appendChild(r)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&!e;)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={296:0};l.f.j=(t,n)=>{var s=l.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var r=new Promise(((n,r)=>s=e[t]=[n,r]));n.push(s[2]=r);var i=l.p+l.u(t),o=new Error;l.l(i,(n=>{if(l.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,s[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var s,r,[i,o,a]=n,c=0;if(i.some((t=>0!==e[t]))){for(s in o)l.o(o,s)&&(l.m[s]=o[s]);if(a)a(l)}for(t&&t(n);c<i.length;c++)r=i[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();l(1831)})();