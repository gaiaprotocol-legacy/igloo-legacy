(()=>{var e,t,n,r,s,i,a,o={8138:(e,t,n)=>{"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},7038:e=>{var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},5843:e=>{var t=function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};t.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.init_by_array=function(e,t){var n,r,s;for(this.init_seed(19650218),n=1,r=0,s=this.N>t?this.N:t;s;s--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[r]+r,this.mt[n]>>>=0,r++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=t&&(r=0)}for(s=this.N-1;s;s--){i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},t.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},e.exports=t},6081:(e,t,n)=>{var r;if("object"==typeof globalThis)r=globalThis;else try{r=n(7038)}catch(e){}finally{if(r||"undefined"==typeof window||(r=window),!r)throw new Error("Could not determine global this")}var s=r.WebSocket||r.MozWebSocket,i=n(5373);function a(e,t){return t?new s(e,t):new s(e)}s&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(a,e,{get:function(){return s[e]}})})),e.exports={w3cwebsocket:s?a:null,version:i}},5373:(e,t,n)=>{e.exports=n(9050).version},8099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7117);function s(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function i(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function a(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function o(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function l(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function u(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function h(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function d(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),u(e/4294967296>>>0,t,n),u(e>>>0,t,n+4),t}function f(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),h(e>>>0,t,n),h(e/4294967296>>>0,t,n+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=s,t.writeInt16BE=s,t.writeUint16LE=i,t.writeInt16LE=i,t.readInt32BE=a,t.readUint32BE=o,t.readInt32LE=c,t.readUint32LE=l,t.writeUint32BE=u,t.writeInt32BE=u,t.writeUint32LE=h,t.writeInt32LE=h,t.readInt64BE=function(e,t){void 0===t&&(t=0);var n=a(e,t),r=a(e,t+4);return 4294967296*n+r-4294967296*(r>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*o(e,t)+o(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var n=c(e,t);return 4294967296*c(e,t+4)+n-4294967296*(n>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var n=l(e,t);return 4294967296*l(e,t+4)+n},t.writeUint64BE=d,t.writeInt64BE=d,t.writeUint64LE=f,t.writeInt64LE=f,t.readUintBE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,s=1,i=e/8+n-1;i>=n;i--)r+=t[i]*s,s*=256;return r},t.readUintLE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,s=1,i=n;i<n+e/8;i++)r+=t[i]*s,s*=256;return r},t.writeUintBE=function(e,t,n,s){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===s&&(s=0),e%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!r.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,a=e/8+s-1;a>=s;a--)n[a]=t/i&255,i*=256;return n},t.writeUintLE=function(e,t,n,s){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===s&&(s=0),e%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!r.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,a=s;a<s+e/8;a++)n[a]=t/i&255,i*=256;return n},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e),t},t.writeFloat32LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),t},t.writeFloat64BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e),t},t.writeFloat64LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),t}},5439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8099),s=n(7309),i=20;function a(e,t,n){for(var s=1634760805,a=857760878,o=2036477234,c=1797285236,l=n[3]<<24|n[2]<<16|n[1]<<8|n[0],u=n[7]<<24|n[6]<<16|n[5]<<8|n[4],h=n[11]<<24|n[10]<<16|n[9]<<8|n[8],d=n[15]<<24|n[14]<<16|n[13]<<8|n[12],f=n[19]<<24|n[18]<<16|n[17]<<8|n[16],p=n[23]<<24|n[22]<<16|n[21]<<8|n[20],g=n[27]<<24|n[26]<<16|n[25]<<8|n[24],m=n[31]<<24|n[30]<<16|n[29]<<8|n[28],y=t[3]<<24|t[2]<<16|t[1]<<8|t[0],b=t[7]<<24|t[6]<<16|t[5]<<8|t[4],w=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],A=s,E=a,k=o,_=c,x=l,P=u,C=h,S=d,I=f,O=p,T=g,N=m,j=y,U=b,L=w,R=v,B=0;B<i;B+=2)x=(x^=I=I+(j=(j^=A=A+x|0)>>>16|j<<16)|0)>>>20|x<<12,P=(P^=O=O+(U=(U^=E=E+P|0)>>>16|U<<16)|0)>>>20|P<<12,C=(C^=T=T+(L=(L^=k=k+C|0)>>>16|L<<16)|0)>>>20|C<<12,S=(S^=N=N+(R=(R^=_=_+S|0)>>>16|R<<16)|0)>>>20|S<<12,C=(C^=T=T+(L=(L^=k=k+C|0)>>>24|L<<8)|0)>>>25|C<<7,S=(S^=N=N+(R=(R^=_=_+S|0)>>>24|R<<8)|0)>>>25|S<<7,P=(P^=O=O+(U=(U^=E=E+P|0)>>>24|U<<8)|0)>>>25|P<<7,x=(x^=I=I+(j=(j^=A=A+x|0)>>>24|j<<8)|0)>>>25|x<<7,P=(P^=T=T+(R=(R^=A=A+P|0)>>>16|R<<16)|0)>>>20|P<<12,C=(C^=N=N+(j=(j^=E=E+C|0)>>>16|j<<16)|0)>>>20|C<<12,S=(S^=I=I+(U=(U^=k=k+S|0)>>>16|U<<16)|0)>>>20|S<<12,x=(x^=O=O+(L=(L^=_=_+x|0)>>>16|L<<16)|0)>>>20|x<<12,S=(S^=I=I+(U=(U^=k=k+S|0)>>>24|U<<8)|0)>>>25|S<<7,x=(x^=O=O+(L=(L^=_=_+x|0)>>>24|L<<8)|0)>>>25|x<<7,C=(C^=N=N+(j=(j^=E=E+C|0)>>>24|j<<8)|0)>>>25|C<<7,P=(P^=T=T+(R=(R^=A=A+P|0)>>>24|R<<8)|0)>>>25|P<<7;r.writeUint32LE(A+s|0,e,0),r.writeUint32LE(E+a|0,e,4),r.writeUint32LE(k+o|0,e,8),r.writeUint32LE(_+c|0,e,12),r.writeUint32LE(x+l|0,e,16),r.writeUint32LE(P+u|0,e,20),r.writeUint32LE(C+h|0,e,24),r.writeUint32LE(S+d|0,e,28),r.writeUint32LE(I+f|0,e,32),r.writeUint32LE(O+p|0,e,36),r.writeUint32LE(T+g|0,e,40),r.writeUint32LE(N+m|0,e,44),r.writeUint32LE(j+y|0,e,48),r.writeUint32LE(U+b|0,e,52),r.writeUint32LE(L+w|0,e,56),r.writeUint32LE(R+v|0,e,60)}function o(e,t,n,r,i){if(void 0===i&&(i=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(r.length<n.length)throw new Error("ChaCha: destination is shorter than source");var o,l;if(0===i){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=(o=new Uint8Array(16)).length-t.length,o.set(t,l)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");o=t,l=i}for(var u=new Uint8Array(64),h=0;h<n.length;h+=64){a(u,o,e);for(var d=h;d<h+64&&d<n.length;d++)r[d]=n[d]^u[d-h];c(o,0,l)}return s.wipe(u),0===i&&s.wipe(o),r}function c(e,t,n){for(var r=1;n--;)r=r+(255&e[t])|0,e[t]=255&r,r>>>=8,t++;if(r>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=o,t.stream=function(e,t,n,r){return void 0===r&&(r=0),s.wipe(n),o(e,t,n,n,r)}},5501:(e,t,n)=>{"use strict";var r=n(5439),s=n(3027),i=n(7309),a=n(8099),o=n(4153);t.Cv=32,t.WH=12,t.pg=16;var c=new Uint8Array(16),l=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,n,s){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var a=new Uint8Array(16);a.set(e,a.length-e.length);var o=new Uint8Array(32);r.stream(this._key,a,o,4);var c,l=t.length+this.tagLength;if(s){if(s.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");c=s}else c=new Uint8Array(l);return r.streamXOR(this._key,a,t,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),o,c.subarray(0,c.length-this.tagLength),n),i.wipe(a),c},e.prototype.open=function(e,t,n,s){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var a=new Uint8Array(16);a.set(e,a.length-e.length);var c=new Uint8Array(32);r.stream(this._key,a,c,4);var l=new Uint8Array(this.tagLength);if(this._authenticate(l,c,t.subarray(0,t.length-this.tagLength),n),!o.equal(l,t.subarray(t.length-this.tagLength,t.length)))return null;var u,h=t.length-this.tagLength;if(s){if(s.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");u=s}else u=new Uint8Array(h);return r.streamXOR(this._key,a,t.subarray(0,t.length-this.tagLength),u,4),i.wipe(a),u},e.prototype.clean=function(){return i.wipe(this._key),this},e.prototype._authenticate=function(e,t,n,r){var o=new s.Poly1305(t);r&&(o.update(r),r.length%16>0&&o.update(c.subarray(r.length%16))),o.update(n),n.length%16>0&&o.update(c.subarray(n.length%16));var l=new Uint8Array(8);r&&a.writeUint64LE(r.length,l),o.update(l),a.writeUint64LE(n.length,l),o.update(l);for(var u=o.digest(),h=0;h<u.length;h++)e[h]=u[h];o.clean(),i.wipe(u),i.wipe(l)},e}();t.OK=l},4153:(e,t)=>{"use strict";function n(e,t){if(e.length!==t.length)return 0;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 1&n-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,n){return~(e-1)&t|e-1&n},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=n,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==n(e,t)}},9984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState}},512:(e,t,n)=>{"use strict";var r=n(5629),s=n(7309),i=function(){function e(e,t,n,s){void 0===n&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=s;var i=r.hmac(this._hash,n,t);this._hmac=new r.HMAC(e,i),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),s.wipe(this._buffer),s.wipe(this._counter),this._bufpos=0},e}();t.t=i},5629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9984),s=n(4153),i=n(7309),a=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var s=0;s<n.length;s++)n[s]^=54;this._inner.update(n);for(s=0;s<n.length;s++)n[s]^=106;this._outer.update(n),r.isSerializableHash(this._inner)&&r.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),i.wipe(n)}return e.prototype.reset=function(){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){r.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),r.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=a,t.hmac=function(e,t,n){var r=new a(e,t);r.update(n);var s=r.digest();return r.clean(),s},t.equal=s.equal},7117:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},3027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4153),s=n(7309);t.DIGEST_LENGTH=16;var i=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var n=e[0]|e[1]<<8;this._r[0]=8191&n;var r=e[2]|e[3]<<8;this._r[1]=8191&(n>>>13|r<<3);var s=e[4]|e[5]<<8;this._r[2]=7939&(r>>>10|s<<6);var i=e[6]|e[7]<<8;this._r[3]=8191&(s>>>7|i<<9);var a=e[8]|e[9]<<8;this._r[4]=255&(i>>>4|a<<12),this._r[5]=a>>>1&8190;var o=e[10]|e[11]<<8;this._r[6]=8191&(a>>>14|o<<2);var c=e[12]|e[13]<<8;this._r[7]=8065&(o>>>11|c<<5);var l=e[14]|e[15]<<8;this._r[8]=8191&(c>>>8|l<<8),this._r[9]=l>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,n){for(var r=this._fin?0:2048,s=this._h[0],i=this._h[1],a=this._h[2],o=this._h[3],c=this._h[4],l=this._h[5],u=this._h[6],h=this._h[7],d=this._h[8],f=this._h[9],p=this._r[0],g=this._r[1],m=this._r[2],y=this._r[3],b=this._r[4],w=this._r[5],v=this._r[6],A=this._r[7],E=this._r[8],k=this._r[9];n>=16;){var _=e[t+0]|e[t+1]<<8;s+=8191&_;var x=e[t+2]|e[t+3]<<8;i+=8191&(_>>>13|x<<3);var P=e[t+4]|e[t+5]<<8;a+=8191&(x>>>10|P<<6);var C=e[t+6]|e[t+7]<<8;o+=8191&(P>>>7|C<<9);var S=e[t+8]|e[t+9]<<8;c+=8191&(C>>>4|S<<12),l+=S>>>1&8191;var I=e[t+10]|e[t+11]<<8;u+=8191&(S>>>14|I<<2);var O=e[t+12]|e[t+13]<<8;h+=8191&(I>>>11|O<<5);var T=e[t+14]|e[t+15]<<8,N=0,j=N;j+=s*p,j+=i*(5*k),j+=a*(5*E),j+=o*(5*A),N=(j+=c*(5*v))>>>13,j&=8191,j+=l*(5*w),j+=u*(5*b),j+=h*(5*y),j+=(d+=8191&(O>>>8|T<<8))*(5*m);var U=N+=(j+=(f+=T>>>5|r)*(5*g))>>>13;U+=s*g,U+=i*p,U+=a*(5*k),U+=o*(5*E),N=(U+=c*(5*A))>>>13,U&=8191,U+=l*(5*v),U+=u*(5*w),U+=h*(5*b),U+=d*(5*y),N+=(U+=f*(5*m))>>>13,U&=8191;var L=N;L+=s*m,L+=i*g,L+=a*p,L+=o*(5*k),N=(L+=c*(5*E))>>>13,L&=8191,L+=l*(5*A),L+=u*(5*v),L+=h*(5*w),L+=d*(5*b);var R=N+=(L+=f*(5*y))>>>13;R+=s*y,R+=i*m,R+=a*g,R+=o*p,N=(R+=c*(5*k))>>>13,R&=8191,R+=l*(5*E),R+=u*(5*A),R+=h*(5*v),R+=d*(5*w);var B=N+=(R+=f*(5*b))>>>13;B+=s*b,B+=i*y,B+=a*m,B+=o*g,N=(B+=c*p)>>>13,B&=8191,B+=l*(5*k),B+=u*(5*E),B+=h*(5*A),B+=d*(5*v);var M=N+=(B+=f*(5*w))>>>13;M+=s*w,M+=i*b,M+=a*y,M+=o*m,N=(M+=c*g)>>>13,M&=8191,M+=l*p,M+=u*(5*k),M+=h*(5*E),M+=d*(5*A);var D=N+=(M+=f*(5*v))>>>13;D+=s*v,D+=i*w,D+=a*b,D+=o*y,N=(D+=c*m)>>>13,D&=8191,D+=l*g,D+=u*p,D+=h*(5*k),D+=d*(5*E);var F=N+=(D+=f*(5*A))>>>13;F+=s*A,F+=i*v,F+=a*w,F+=o*b,N=(F+=c*y)>>>13,F&=8191,F+=l*m,F+=u*g,F+=h*p,F+=d*(5*k);var $=N+=(F+=f*(5*E))>>>13;$+=s*E,$+=i*A,$+=a*v,$+=o*w,N=($+=c*b)>>>13,$&=8191,$+=l*y,$+=u*m,$+=h*g,$+=d*p;var G=N+=($+=f*(5*k))>>>13;G+=s*k,G+=i*E,G+=a*A,G+=o*v,N=(G+=c*w)>>>13,G&=8191,G+=l*b,G+=u*y,G+=h*m,G+=d*g,s=j=8191&(N=(N=((N+=(G+=f*p)>>>13)<<2)+N|0)+(j&=8191)|0),i=U+=N>>>=13,a=L&=8191,o=R&=8191,c=B&=8191,l=M&=8191,u=D&=8191,h=F&=8191,d=$&=8191,f=G&=8191,t+=16,n-=16}this._h[0]=s,this._h[1]=i,this._h[2]=a,this._h[3]=o,this._h[4]=c,this._h[5]=l,this._h[6]=u,this._h[7]=h,this._h[8]=d,this._h[9]=f},e.prototype.finish=function(e,t){void 0===t&&(t=0);var n,r,s,i,a=new Uint16Array(10);if(this._leftover){for(i=this._leftover,this._buffer[i++]=1;i<16;i++)this._buffer[i]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,i=2;i<10;i++)this._h[i]+=n,n=this._h[i]>>>13,this._h[i]&=8191;for(this._h[0]+=5*n,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,a[0]=this._h[0]+5,n=a[0]>>>13,a[0]&=8191,i=1;i<10;i++)a[i]=this._h[i]+n,n=a[i]>>>13,a[i]&=8191;for(a[9]-=8192,r=(1^n)-1,i=0;i<10;i++)a[i]&=r;for(r=~r,i=0;i<10;i++)this._h[i]=this._h[i]&r|a[i];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),s=this._h[0]+this._pad[0],this._h[0]=65535&s,i=1;i<8;i++)s=(this._h[i]+this._pad[i]|0)+(s>>>16)|0,this._h[i]=65535&s;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,n=0,r=e.length;if(this._leftover){(t=16-this._leftover)>r&&(t=r);for(var s=0;s<t;s++)this._buffer[this._leftover+s]=e[n+s];if(r-=t,n+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(r>=16&&(t=r-r%16,this._blocks(e,n,t),n+=t,r-=t),r){for(s=0;s<r;s++)this._buffer[this._leftover+s]=e[n+s];this._leftover+=r}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return s.wipe(this._buffer),s.wipe(this._r),s.wipe(this._h),s.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=i,t.oneTimeAuth=function(e,t){var n=new i(e);n.update(t);var r=n.digest();return n.clean(),r},t.equal=function(e,n){return e.length===t.DIGEST_LENGTH&&n.length===t.DIGEST_LENGTH&&r.equal(e,n)}},1416:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const r=n(6008),s=n(8099),i=n(7309);function a(e,n=t.defaultRandomSource){return n.randomBytes(e)}t.defaultRandomSource=new r.SystemRandomSource,t.randomBytes=a,t.randomUint32=function(e=t.defaultRandomSource){const n=a(4,e),r=(0,s.readUint32LE)(n);return(0,i.wipe)(n),r};const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e,n=o,r=t.defaultRandomSource){if(n.length<2)throw new Error("randomString charset is too short");if(n.length>256)throw new Error("randomString charset is too long");let s="";const c=n.length,l=256-256%c;for(;e>0;){const t=a(Math.ceil(256*e/l),r);for(let r=0;r<t.length&&e>0;r++){const i=t[r];i<l&&(s+=n.charAt(i%c),e--)}(0,i.wipe)(t)}return s}t.randomString=c,t.randomStringForEntropy=function(e,n=o,r=t.defaultRandomSource){return c(Math.ceil(e/(Math.log(n.length)/Math.LN2)),n,r)}},5455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;t.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}},8871:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const r=n(7309);t.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=n(5883);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let e=0;e<n.length;e++)n[e]=t[e];return(0,r.wipe)(t),n}}},6008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const r=n(5455),s=n(8871);t.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new r.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new s.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}},3294:(e,t,n)=>{"use strict";var r=n(8099),s=n(7309);t.k=32,t.cn=64;var i=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){s.wipe(this._buffer),s.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=o(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,n=this._bufferLength,s=t/536870912|0,i=t<<3,a=t%64<56?64:128;this._buffer[n]=128;for(var c=n+1;c<a-8;c++)this._buffer[c]=0;r.writeUint32BE(s,this._buffer,a-8),r.writeUint32BE(i,this._buffer,a-4),o(this._temp,this._state,this._buffer,0,a),this._finished=!0}for(c=0;c<this.digestLength/4;c++)r.writeUint32BE(this._state[c],e,4*c);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){s.wipe(e.state),e.buffer&&s.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=i;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(e,t,n,s,i){for(;i>=64;){for(var o=t[0],c=t[1],l=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=0;g<16;g++){var m=s+4*g;e[g]=r.readUint32BE(n,m)}for(g=16;g<64;g++){var y=e[g-2],b=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,w=((y=e[g-15])>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(b+e[g-7]|0)+(w+e[g-16]|0)}for(g=0;g<64;g++){b=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&f)|0)+(p+(a[g]+e[g]|0)|0)|0,w=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&c^o&l^c&l)|0;p=f,f=d,d=h,h=u+b|0,u=l,l=c,c=o,o=b+w|0}t[0]+=o,t[1]+=c,t[2]+=l,t[3]+=u,t[4]+=h,t[5]+=d,t[6]+=f,t[7]+=p,s+=64,i-=64}return s}t.vp=function(e){var t=new i;t.update(e);var n=t.digest();return t.clean(),n}},7309:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},7664:(e,t,n)=>{"use strict";t.gi=t.Au=t.KS=t.kz=void 0;const r=n(1416),s=n(7309);function i(e){const t=new Float64Array(16);if(e)for(let n=0;n<e.length;n++)t[n]=e[n];return t}t.kz=32,t.KS=32;const a=new Uint8Array(32);a[0]=9;const o=i([56129,1]);function c(e){let t=1;for(let n=0;n<16;n++){let r=e[n]+t+65535;t=Math.floor(r/65536),e[n]=r-65536*t}e[0]+=t-1+37*(t-1)}function l(e,t,n){const r=~(n-1);for(let n=0;n<16;n++){const s=r&(e[n]^t[n]);e[n]^=s,t[n]^=s}}function u(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]+n[r]}function h(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]-n[r]}function d(e,t,n){let r,s,i=0,a=0,o=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0,y=0,b=0,w=0,v=0,A=0,E=0,k=0,_=0,x=0,P=0,C=0,S=0,I=0,O=0,T=0,N=0,j=0,U=0,L=0,R=n[0],B=n[1],M=n[2],D=n[3],F=n[4],$=n[5],G=n[6],H=n[7],z=n[8],W=n[9],q=n[10],K=n[11],V=n[12],J=n[13],Q=n[14],Y=n[15];r=t[0],i+=r*R,a+=r*B,o+=r*M,c+=r*D,l+=r*F,u+=r*$,h+=r*G,d+=r*H,f+=r*z,p+=r*W,g+=r*q,m+=r*K,y+=r*V,b+=r*J,w+=r*Q,v+=r*Y,r=t[1],a+=r*R,o+=r*B,c+=r*M,l+=r*D,u+=r*F,h+=r*$,d+=r*G,f+=r*H,p+=r*z,g+=r*W,m+=r*q,y+=r*K,b+=r*V,w+=r*J,v+=r*Q,A+=r*Y,r=t[2],o+=r*R,c+=r*B,l+=r*M,u+=r*D,h+=r*F,d+=r*$,f+=r*G,p+=r*H,g+=r*z,m+=r*W,y+=r*q,b+=r*K,w+=r*V,v+=r*J,A+=r*Q,E+=r*Y,r=t[3],c+=r*R,l+=r*B,u+=r*M,h+=r*D,d+=r*F,f+=r*$,p+=r*G,g+=r*H,m+=r*z,y+=r*W,b+=r*q,w+=r*K,v+=r*V,A+=r*J,E+=r*Q,k+=r*Y,r=t[4],l+=r*R,u+=r*B,h+=r*M,d+=r*D,f+=r*F,p+=r*$,g+=r*G,m+=r*H,y+=r*z,b+=r*W,w+=r*q,v+=r*K,A+=r*V,E+=r*J,k+=r*Q,_+=r*Y,r=t[5],u+=r*R,h+=r*B,d+=r*M,f+=r*D,p+=r*F,g+=r*$,m+=r*G,y+=r*H,b+=r*z,w+=r*W,v+=r*q,A+=r*K,E+=r*V,k+=r*J,_+=r*Q,x+=r*Y,r=t[6],h+=r*R,d+=r*B,f+=r*M,p+=r*D,g+=r*F,m+=r*$,y+=r*G,b+=r*H,w+=r*z,v+=r*W,A+=r*q,E+=r*K,k+=r*V,_+=r*J,x+=r*Q,P+=r*Y,r=t[7],d+=r*R,f+=r*B,p+=r*M,g+=r*D,m+=r*F,y+=r*$,b+=r*G,w+=r*H,v+=r*z,A+=r*W,E+=r*q,k+=r*K,_+=r*V,x+=r*J,P+=r*Q,C+=r*Y,r=t[8],f+=r*R,p+=r*B,g+=r*M,m+=r*D,y+=r*F,b+=r*$,w+=r*G,v+=r*H,A+=r*z,E+=r*W,k+=r*q,_+=r*K,x+=r*V,P+=r*J,C+=r*Q,S+=r*Y,r=t[9],p+=r*R,g+=r*B,m+=r*M,y+=r*D,b+=r*F,w+=r*$,v+=r*G,A+=r*H,E+=r*z,k+=r*W,_+=r*q,x+=r*K,P+=r*V,C+=r*J,S+=r*Q,I+=r*Y,r=t[10],g+=r*R,m+=r*B,y+=r*M,b+=r*D,w+=r*F,v+=r*$,A+=r*G,E+=r*H,k+=r*z,_+=r*W,x+=r*q,P+=r*K,C+=r*V,S+=r*J,I+=r*Q,O+=r*Y,r=t[11],m+=r*R,y+=r*B,b+=r*M,w+=r*D,v+=r*F,A+=r*$,E+=r*G,k+=r*H,_+=r*z,x+=r*W,P+=r*q,C+=r*K,S+=r*V,I+=r*J,O+=r*Q,T+=r*Y,r=t[12],y+=r*R,b+=r*B,w+=r*M,v+=r*D,A+=r*F,E+=r*$,k+=r*G,_+=r*H,x+=r*z,P+=r*W,C+=r*q,S+=r*K,I+=r*V,O+=r*J,T+=r*Q,N+=r*Y,r=t[13],b+=r*R,w+=r*B,v+=r*M,A+=r*D,E+=r*F,k+=r*$,_+=r*G,x+=r*H,P+=r*z,C+=r*W,S+=r*q,I+=r*K,O+=r*V,T+=r*J,N+=r*Q,j+=r*Y,r=t[14],w+=r*R,v+=r*B,A+=r*M,E+=r*D,k+=r*F,_+=r*$,x+=r*G,P+=r*H,C+=r*z,S+=r*W,I+=r*q,O+=r*K,T+=r*V,N+=r*J,j+=r*Q,U+=r*Y,r=t[15],v+=r*R,A+=r*B,E+=r*M,k+=r*D,_+=r*F,x+=r*$,P+=r*G,C+=r*H,S+=r*z,I+=r*W,O+=r*q,T+=r*K,N+=r*V,j+=r*J,U+=r*Q,L+=r*Y,i+=38*A,a+=38*E,o+=38*k,c+=38*_,l+=38*x,u+=38*P,h+=38*C,d+=38*S,f+=38*I,p+=38*O,g+=38*T,m+=38*N,y+=38*j,b+=38*U,w+=38*L,s=1,r=i+s+65535,s=Math.floor(r/65536),i=r-65536*s,r=a+s+65535,s=Math.floor(r/65536),a=r-65536*s,r=o+s+65535,s=Math.floor(r/65536),o=r-65536*s,r=c+s+65535,s=Math.floor(r/65536),c=r-65536*s,r=l+s+65535,s=Math.floor(r/65536),l=r-65536*s,r=u+s+65535,s=Math.floor(r/65536),u=r-65536*s,r=h+s+65535,s=Math.floor(r/65536),h=r-65536*s,r=d+s+65535,s=Math.floor(r/65536),d=r-65536*s,r=f+s+65535,s=Math.floor(r/65536),f=r-65536*s,r=p+s+65535,s=Math.floor(r/65536),p=r-65536*s,r=g+s+65535,s=Math.floor(r/65536),g=r-65536*s,r=m+s+65535,s=Math.floor(r/65536),m=r-65536*s,r=y+s+65535,s=Math.floor(r/65536),y=r-65536*s,r=b+s+65535,s=Math.floor(r/65536),b=r-65536*s,r=w+s+65535,s=Math.floor(r/65536),w=r-65536*s,r=v+s+65535,s=Math.floor(r/65536),v=r-65536*s,i+=s-1+37*(s-1),s=1,r=i+s+65535,s=Math.floor(r/65536),i=r-65536*s,r=a+s+65535,s=Math.floor(r/65536),a=r-65536*s,r=o+s+65535,s=Math.floor(r/65536),o=r-65536*s,r=c+s+65535,s=Math.floor(r/65536),c=r-65536*s,r=l+s+65535,s=Math.floor(r/65536),l=r-65536*s,r=u+s+65535,s=Math.floor(r/65536),u=r-65536*s,r=h+s+65535,s=Math.floor(r/65536),h=r-65536*s,r=d+s+65535,s=Math.floor(r/65536),d=r-65536*s,r=f+s+65535,s=Math.floor(r/65536),f=r-65536*s,r=p+s+65535,s=Math.floor(r/65536),p=r-65536*s,r=g+s+65535,s=Math.floor(r/65536),g=r-65536*s,r=m+s+65535,s=Math.floor(r/65536),m=r-65536*s,r=y+s+65535,s=Math.floor(r/65536),y=r-65536*s,r=b+s+65535,s=Math.floor(r/65536),b=r-65536*s,r=w+s+65535,s=Math.floor(r/65536),w=r-65536*s,r=v+s+65535,s=Math.floor(r/65536),v=r-65536*s,i+=s-1+37*(s-1),e[0]=i,e[1]=a,e[2]=o,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=m,e[12]=y,e[13]=b,e[14]=w,e[15]=v}function f(e,t){d(e,t,t)}function p(e,t){const n=new Uint8Array(32),r=new Float64Array(80),s=i(),a=i(),p=i(),g=i(),m=i(),y=i();for(let t=0;t<31;t++)n[t]=e[t];n[31]=127&e[31]|64,n[0]&=248,function(e,t){for(let n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(r,t);for(let e=0;e<16;e++)a[e]=r[e];s[0]=g[0]=1;for(let e=254;e>=0;--e){const t=n[e>>>3]>>>(7&e)&1;l(s,a,t),l(p,g,t),u(m,s,p),h(s,s,p),u(p,a,g),h(a,a,g),f(g,m),f(y,s),d(s,p,s),d(p,a,m),u(m,s,p),h(s,s,p),f(a,s),h(p,g,y),d(s,p,o),u(s,s,g),d(p,p,s),d(s,g,y),d(g,a,r),f(a,m),l(s,a,t),l(p,g,t)}for(let e=0;e<16;e++)r[e+16]=s[e],r[e+32]=p[e],r[e+48]=a[e],r[e+64]=g[e];const b=r.subarray(32),w=r.subarray(16);!function(e,t){const n=i();for(let e=0;e<16;e++)n[e]=t[e];for(let e=253;e>=0;e--)f(n,n),2!==e&&4!==e&&d(n,n,t);for(let t=0;t<16;t++)e[t]=n[t]}(b,b),d(w,w,b);const v=new Uint8Array(32);return function(e,t){const n=i(),r=i();for(let e=0;e<16;e++)r[e]=t[e];c(r),c(r),c(r);for(let e=0;e<2;e++){n[0]=r[0]-65517;for(let e=1;e<15;e++)n[e]=r[e]-65535-(n[e-1]>>16&1),n[e-1]&=65535;n[15]=r[15]-32767-(n[14]>>16&1);const e=n[15]>>16&1;n[14]&=65535,l(r,n,1-e)}for(let t=0;t<16;t++)e[2*t]=255&r[t],e[2*t+1]=r[t]>>8}(v,w),v}function g(e){return p(e,a)}function m(e){if(e.length!==t.KS)throw new Error(`x25519: seed must be ${t.KS} bytes`);const n=new Uint8Array(e);return{publicKey:g(n),secretKey:n}}t.Au=function(e){const t=(0,r.randomBytes)(32,e),n=m(t);return(0,s.wipe)(t),n},t.gi=function(e,n,r=!1){if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(n.length!==t.kz)throw new Error("X25519: incorrect public key length");const s=p(e,n);if(r){let e=0;for(let t=0;t<s.length;t++)e|=s[t];if(0===e)throw new Error("X25519: invalid shared key")}return s}},1882:()=>{},6900:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);r.__exportStar(n(6869),t),r.__exportStar(n(8033),t)},6869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},8033:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},6736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);r.__exportStar(n(4273),t),r.__exportStar(n(7001),t),r.__exportStar(n(2939),t),r.__exportStar(n(6900),t)},2939:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(4).__exportStar(n(8766),t)},8766:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;t.IWatch=class{}},3207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const r=n(6900);t.toMiliseconds=function(e){return e*r.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/r.ONE_THOUSAND)}},3873:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},4273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);r.__exportStar(n(3873),t),r.__exportStar(n(3207),t)},7001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const n=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:n})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=n,t.default=n},4:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__assign:()=>i,__asyncDelegator:()=>v,__asyncGenerator:()=>w,__asyncValues:()=>A,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>x,__classPrivateFieldSet:()=>P,__createBinding:()=>d,__decorate:()=>o,__exportStar:()=>f,__extends:()=>s,__generator:()=>h,__importDefault:()=>_,__importStar:()=>k,__makeTemplateObject:()=>E,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>a,__spread:()=>m,__spreadArrays:()=>y,__values:()=>p});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function s(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},i.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function o(e,t,n,r){var s,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function d(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,o=i.length;a<o;a++,s++)r[s]=i[a];return r}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){s[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||o(e,t)}))})}function o(e,t){try{(n=s[e](t)).value instanceof b?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){o("next",e)}function l(e){o("throw",e)}function u(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}function v(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,s){t[r]=e[r]?function(t){return(n=!n)?{value:b(e[r](t)),done:"return"===r}:s?s(t):t}:s}}function A(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,s){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,s,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function P(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},9795:(e,t,n)=>{"use strict";n.d(t,{AW:()=>U,O6:()=>Gt,rV:()=>M,gn:()=>Pe,H1:()=>ve,hF:()=>Ae,WG:()=>V,pe:()=>Q,m$:()=>W,vB:()=>Y,HI:()=>J,E0:()=>Se,Gq:()=>_e,$0:()=>me,Z4:()=>ke,Bv:()=>He,Au:()=>H,jd:()=>z,gu:()=>T,D:()=>pe,Z7:()=>at,cO:()=>je,_H:()=>Ne,fc:()=>et,D6:()=>ot,Hh:()=>Oe,Ym:()=>q,rj:()=>K,jU:()=>de,gp:()=>tt,rF:()=>Rt,Bw:()=>Ce,UG:()=>ue,Gg:()=>Dt,xW:()=>mt,b$:()=>he,Ih:()=>ft,h1:()=>yt,Q8:()=>ee,o8:()=>ut,qt:()=>ct,Dd:()=>bt,$t:()=>It,nf:()=>Nt,Q0:()=>Ct,in:()=>_t,p8:()=>jt,sI:()=>Lt,al:()=>Ut,L5:()=>lt,EJ:()=>St,Z2:()=>xt,PM:()=>Pt,hH:()=>Ot,ON:()=>Mt,n:()=>kt,JT:()=>Tt,M_:()=>ht,jv:()=>gt,KC:()=>be,eG:()=>Ie,fK:()=>rt,IP:()=>we,DQ:()=>O,iP:()=>xe,M:()=>nt,he:()=>$e,uw:()=>Ft,Ll:()=>Z,EN:()=>X});var r=n(5501),s=n(512),i=n(1416),a=n(3294),o=n(7664),c=n(7466),l=n(4155),u=function(e,t,n){if(n||2===arguments.length)for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},h=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},d=function(e){this.version=e,this.type="node",this.name="node",this.os=l.platform},f=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},p=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},g=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},m=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,y=3,b=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],w=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function v(e){return e?E(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new g:"undefined"!=typeof navigator?E(navigator.userAgent):void 0!==l&&l.version?new d(l.version.slice(1)):null}function A(e){return""!==e&&b.reduce((function(t,n){var r=n[0],s=n[1];if(t)return t;var i=s.exec(e);return!!i&&[r,i]}),!1)}function E(e){var t=A(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new p;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<y&&(s=u(u([],s,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(y-s.length),!0)):s=[];var i=s.join("."),a=function(e){for(var t=0,n=w.length;t<n;t++){var r=w[t],s=r[0];if(r[1].exec(e))return s}return null}(e),o=m.exec(e);return o&&o[1]?new f(n,i,a,o[1]):new h(n,i,a)}var k=n(6736),_=n(2873),x=n(5755),P=n(6151);n(1882);const C={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var S=n(4155);const I=":";function O(e){const[t,n]=e.split(I);return{namespace:t,reference:n}}function T(e,t=[]){const n=[];return Object.keys(e).forEach((r=>{if(t.length&&!t.includes(r))return;const s=e[r];n.push(...s.accounts)})),n}function N(e,t){return e.includes(":")?[e]:t.chains||[]}const j="base10",U="base16",L="base64pad",R="utf8",B=0,M=1,D=0,F=1,$=12,G=32;function H(){const e=o.Au();return{privateKey:(0,c.BB)(e.secretKey,U),publicKey:(0,c.BB)(e.publicKey,U)}}function z(){const e=(0,i.randomBytes)(G);return(0,c.BB)(e,U)}function W(e,t){const n=o.gi((0,c.mL)(e,U),(0,c.mL)(t,U),!0),r=new s.t(a.mE,n).expand(G);return(0,c.BB)(r,U)}function q(e){const t=(0,a.vp)((0,c.mL)(e,U));return(0,c.BB)(t,U)}function K(e){const t=(0,a.vp)((0,c.mL)(e,R));return(0,c.BB)(t,U)}function V(e){return Number((0,c.BB)(e,j))}function J(e){const t=function(e){return(0,c.mL)(`${e}`,j)}(typeof e.type<"u"?e.type:B);if(V(t)===M&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?(0,c.mL)(e.senderPublicKey,U):void 0,s=typeof e.iv<"u"?(0,c.mL)(e.iv,U):(0,i.randomBytes)($);return function(e){if(V(e.type)===M){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,c.BB)((0,c.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),L)}return(0,c.BB)((0,c.zo)([e.type,e.iv,e.sealed]),L)}({type:t,sealed:new r.OK((0,c.mL)(e.symKey,U)).seal(s,(0,c.mL)(e.message,R)),iv:s,senderPublicKey:n})}function Q(e){const t=new r.OK((0,c.mL)(e.symKey,U)),{sealed:n,iv:s}=Y(e.encoded),i=t.open(s,n);if(null===i)throw new Error("Failed to decrypt");return(0,c.BB)(i,R)}function Y(e){const t=(0,c.mL)(e,L),n=t.slice(D,F),r=F;if(V(n)===M){const e=r+G,s=e+$,i=t.slice(r,e),a=t.slice(e,s);return{type:n,sealed:t.slice(s),iv:a,senderPublicKey:i}}const s=r+$,i=t.slice(r,s);return{type:n,sealed:t.slice(s),iv:i}}function Z(e,t){const n=Y(e);return X({type:V(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,c.BB)(n.senderPublicKey,U):void 0,receiverPublicKey:t?.receiverPublicKey})}function X(e){const t=e?.type||B;if(t===M){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function ee(e){return e.type===M&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var te=Object.defineProperty,ne=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ie=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ae=(e,t)=>{for(var n in t||(t={}))re.call(t,n)&&ie(e,n,t[n]);if(ne)for(var n of ne(t))se.call(t,n)&&ie(e,n,t[n]);return e};const oe="ReactNative",ce={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},le="js";function ue(){return typeof S<"u"&&typeof S.versions<"u"&&typeof S.versions.node<"u"}function he(){return!(0,_.getDocument)()&&!!(0,_.getNavigator)()&&navigator.product===oe}function de(){return!ue()&&!!(0,_.getNavigator)()}function fe(){return he()?ce.reactNative:ue()?ce.node:de()?ce.browser:ce.unknown}function pe(){return(0,x.D)()||{name:"",description:"",url:"",icons:[""]}}function ge(e,t,r){const s=function(){if(fe()===ce.reactNative&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"){const{OS:e,Version:t}=n.g.Platform;return[e,t].join("-")}const e=v();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),i=function(){var e;const t=fe();return t===ce.browser?[t,(null==(e=(0,_.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[le,r].join("-"),s,i].join("/")}function me({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:a}){const o=n.split("?"),c={auth:s,ua:ge(e,t,r),projectId:i,useOnCloseEvent:a||void 0},l=function(e,t){let n=P.parse(e);return n=ae(ae({},n),t),P.stringify(n)}(o[1]||"",c);return o[0]+"?"+l}function ye(e,t){return e.filter((e=>t.includes(e))).length===e.length}function be(e){return Object.fromEntries(e.entries())}function we(e){return new Map(Object.entries(e))}function ve(e=k.FIVE_MINUTES,t){const n=(0,k.toMiliseconds)(e||k.FIVE_MINUTES);let r,s,i;return{resolve:e=>{i&&r&&(clearTimeout(i),r(e))},reject:e=>{i&&s&&(clearTimeout(i),s(e))},done:()=>new Promise(((e,a)=>{i=setTimeout((()=>{a(new Error(t))}),n),r=e,s=a}))}}function Ae(e,t,n){return new Promise((async(r,s)=>{const i=setTimeout((()=>s(new Error(n))),t);try{r(await e)}catch(e){s(e)}clearTimeout(i)}))}function Ee(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function ke(e){return Ee("topic",e)}function _e(e){return Ee("id",e)}function xe(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof n)r.topic=n;else{if("id"!==t||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);r.id=Number(n)}return r}function Pe(e,t){return(0,k.fromMiliseconds)((t||Date.now())+(0,k.toMiliseconds)(e))}function Ce(e){return Date.now()>=(0,k.toMiliseconds)(e)}function Se(e,t){return`${e}${t?`:${t}`:""}`}function Ie(e=[],t=[]){return[...new Set([...e,...t])]}async function Oe({id:e,topic:t,wcDeepLink:r}){try{if(!r)return;const s="string"==typeof r?JSON.parse(r):r;let i=s?.href;if("string"!=typeof i)return;i.endsWith("/")&&(i=i.slice(0,-1));const a=`${i}/wc?requestId=${e}&sessionTopic=${t}`,o=fe();o===ce.browser?a.startsWith("https://")?window.open(a,"_blank","noreferrer noopener"):window.open(a,"_self","noreferrer noopener"):o===ce.reactNative&&typeof(null==n.g?void 0:n.g.Linking)<"u"&&await n.g.Linking.openURL(a)}catch(e){console.error(e)}}const Te="irn";function Ne(e){return e?.relay||{protocol:Te}}function je(e){const t=C[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Ue=Object.defineProperty,Le=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,Me=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,De=(e,t)=>{for(var n in t||(t={}))Re.call(t,n)&&Me(e,n,t[n]);if(Le)for(var n of Le(t))Be.call(t,n)&&Me(e,n,t[n]);return e};function Fe(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(r)){const s=t.replace(r,""),i=e[t];n[s]=i}})),n}function $e(e){const t=e.indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,r=e.substring(0,t),s=e.substring(t+1,n).split("@"),i=typeof n<"u"?e.substring(n):"",a=P.parse(i);return{protocol:r,topic:Ge(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:Fe(a)}}function Ge(e){return e.startsWith("//")?e.substring(2):e}function He(e){return`${e.protocol}:${e.topic}@${e.version}?`+P.stringify(De({symKey:e.symKey},function(e,t="-"){const n={};return Object.keys(e).forEach((r=>{const s="relay"+t+r;e[r]&&(n[s]=e[r])})),n}(e.relay)))}var ze=Object.defineProperty,We=Object.defineProperties,qe=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Qe=(e,t,n)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ye=(e,t)=>{for(var n in t||(t={}))Ve.call(t,n)&&Qe(e,n,t[n]);if(Ke)for(var n of Ke(t))Je.call(t,n)&&Qe(e,n,t[n]);return e},Ze=(e,t)=>We(e,qe(t));function Xe(e){const t=[];return e.forEach((e=>{const[n,r]=e.split(":");t.push(`${n}:${r}`)})),t}function et(e,t){const n=_t(e,t);if(n)throw new Error(n.message);const r={};for(const[t,n]of Object.entries(e))r[t]={methods:n.methods,events:n.events,chains:n.accounts.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))};return r}function tt(e){return e.includes(":")}function nt(e){return tt(e)?e.split(":")[0]:e}function rt(e){var t,n,r;const s={};if(!lt(e))return s;for(const[i,a]of Object.entries(e)){const e=tt(i)?[i]:a.chains,o=a.methods||[],c=a.events||[],l=nt(i);s[l]=Ze(Ye({},s[l]),{chains:Ie(e,null==(t=s[l])?void 0:t.chains),methods:Ie(o,null==(n=s[l])?void 0:n.methods),events:Ie(c,null==(r=s[l])?void 0:r.events)})}return s}const st={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},it={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function at(e,t){const{message:n,code:r}=it[e];return{message:t?`${n} ${t}`:n,code:r}}function ot(e,t){const{message:n,code:r}=st[e];return{message:t?`${n} ${t}`:n,code:r}}function ct(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function lt(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function ut(e){return typeof e>"u"}function ht(e,t){return!(!t||!ut(e))||"string"==typeof e&&!!e.trim().length}function dt(e,t){return!(!t||!ut(e))||"number"==typeof e&&!isNaN(e)}function ft(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),s=Object.keys(n);let i=!0;return!!ye(s,r)&&(r.forEach((t=>{const{accounts:r,methods:s,events:a}=e.namespaces[t],o=Xe(r),c=n[t];ye(N(t,c),o)&&ye(c.methods,s)&&ye(c.events,a)||(i=!1)})),i)}function pt(e){return!(!ht(e,!1)||!e.includes(":"))&&2===e.split(":").length}function gt(e){if(ht(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function mt(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}function yt(e){return e?.topic}function bt(e,t){let n=null;return ht(e?.publicKey,!1)||(n=at("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function wt(e){let t=!0;return ct(e)?e.length&&(t=e.every((e=>ht(e,!1)))):t=!1,t}function vt(e,t,n){let r=null;return Object.entries(e).forEach((([e,s])=>{if(r)return;const i=function(e,t,n){let r=null;return ct(t)&&t.length?t.forEach((e=>{r||pt(e)||(r=ot("UNSUPPORTED_CHAINS",`${n}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):pt(e)||(r=ot("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}(e,N(e,s),`${t} ${n}`);i&&(r=i)})),r}function At(e,t){let n=null;return ct(e)?e.forEach((e=>{n||function(e){if(ht(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&pt(e)}}return!1}(e)||(n=ot("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):n=ot("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Et(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const r=function(e,t){let n=null;return wt(e?.methods)?wt(e?.events)||(n=ot("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=ot("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}(e,`${t}, namespace`);r&&(n=r)})),n}function kt(e,t,n){let r=null;if(e&&lt(e)){const s=Et(e,t);s&&(r=s);const i=vt(e,t,n);i&&(r=i)}else r=at("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function _t(e,t){let n=null;if(e&&lt(e)){const r=Et(e,t);r&&(n=r);const s=function(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const r=At(e?.accounts,`${t} namespace`);r&&(n=r)})),n}(e,t);s&&(n=s)}else n=at("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function xt(e){return ht(e.protocol,!0)}function Pt(e,t){let n=!1;return t&&!e?n=!0:e&&ct(e)&&e.length&&e.forEach((e=>{n=xt(e)})),n}function Ct(e){return"number"==typeof e}function St(e){return typeof e<"u"&&null!==typeof e}function It(e){return!!(e&&"object"==typeof e&&e.code&&dt(e.code,!1)&&e.message&&ht(e.message,!1))}function Ot(e){return!(ut(e)||!ht(e.method,!1))}function Tt(e){return!(ut(e)||ut(e.result)&&ut(e.error)||!dt(e.id,!1)||!ht(e.jsonrpc,!1))}function Nt(e){return!(ut(e)||!ht(e.name,!1))}function jt(e,t){return!(!pt(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...Xe(e.accounts))})),t}(e).includes(t))}function Ut(e,t,n){return!!ht(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{Xe(e.accounts).includes(t)&&n.push(...e.methods)})),n}(e,t).includes(n)}function Lt(e,t,n){return!!ht(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{Xe(e.accounts).includes(t)&&n.push(...e.events)})),n}(e,t).includes(n)}function Rt(e,t,n){let r=null;const s=function(e){const t={};return Object.keys(e).forEach((n=>{var r;n.includes(":")?t[n]=e[n]:null==(r=e[n].chains)||r.forEach((r=>{t[r]={methods:e[n].methods,events:e[n].events}}))})),t}(e),i=function(e){const t={};return Object.keys(e).forEach((n=>{if(n.includes(":"))t[n]=e[n];else{const r=Xe(e[n].accounts);r?.forEach((r=>{t[r]={accounts:e[n].accounts.filter((e=>e.includes(`${r}:`))),methods:e[n].methods,events:e[n].events}}))}})),t}(t),a=Object.keys(s),o=Object.keys(i),c=Bt(Object.keys(e)),l=Bt(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),ye(a,o)||(r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${a.toString()}\n      Approved: ${o.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||r)return;const s=Xe(t[e].accounts);s.includes(e)||(r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${s.toString()}`))})),a.forEach((e=>{r||(ye(s[e].methods,i[e].methods)?ye(s[e].events,i[e].events)||(r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${e}`)):r=at("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${e}`))})),r}function Bt(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function Mt(e,t){return dt(e,!1)&&e<=t.max&&e>=t.min}function Dt(){const e=fe();return new Promise((t=>{switch(e){case ce.browser:t(de()&&navigator?.onLine);break;case ce.reactNative:t(async function(){if(he()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo){const e=await(null==n.g?void 0:n.g.NetInfo.fetch());return e?.isConnected}return!0}());break;case ce.node:default:t(!0)}}))}function Ft(e){switch(fe()){case ce.browser:!function(e){de()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case ce.reactNative:!function(e){he()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo&&n.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e);case ce.node:}}const $t={};class Gt{static get(e){return $t[e]}static set(e,t){$t[e]=t}static delete(e){delete $t[e]}}},6151:(e,t,n)=>{"use strict";const r=n(610),s=n(4020),i=n(500),a=n(2806),o=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?s(e):e}function h(e){return Array.isArray(e)?e.sort():"object"==typeof e?h(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return(e,n,r)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const s="string"==typeof n&&n.includes(e.arrayFormatSeparator),i="string"==typeof n&&!s&&u(n,e).includes(e.arrayFormatSeparator);n=i?u(n,e):n;const a=s||i?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);r[t]=a};case"bracket-separator":return(t,n,r)=>{const s=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!s)return void(r[t]=n?u(n,e):n);const i=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],i):r[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const s of e.split("&")){if(""===s)continue;let[e,a]=i(t.decode?s.replace(/\+/g," "):s,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:u(a,t),n(u(e,t),a,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=p(n[e],t);else r[e]=p(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=h(n):e[t]=n,e}),Object.create(null))}t.extract=f,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const s=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[",s,"]"].join("")]:[...n,[l(t,e),"[",l(s,e),"]=",l(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[]"].join("")]:[...n,[l(t,e),"[]=",l(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),":list="].join("")]:[...n,[l(t,e),":list=",l(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:(s=null===s?"":s,0===r.length?[[l(n,e),t,l(s,e)].join("")]:[[r,l(s,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,l(t,e)]:[...n,[l(t,e),"=",l(r,e)].join("")]}}(t),s={};for(const t of Object.keys(e))n(t)||(s[t]=e[t]);const i=Object.keys(s);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const s=e[n];return void 0===s?"":null===s?l(n,t):Array.isArray(s)?0===s.length&&"bracket-separator"===t.arrayFormat?l(n,t)+"[]":s.reduce(r(n),[]).join("&"):l(n,t)+"="+l(s,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:g(f(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[o]:!0},n);const r=d(e.url).split("?")[0]||"",s=t.extract(e.url),i=t.parse(s,{sort:!1}),a=Object.assign(i,e.query);let c=t.stringify(a,n);c&&(c=`?${c}`);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u=`#${n[o]?l(e.fragmentIdentifier,n):e.fragmentIdentifier}`),`${r}${c}${u}`},t.pick=(e,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[o]:!1},r);const{url:s,query:i,fragmentIdentifier:c}=t.parseUrl(e,r);return t.stringifyUrl({url:s,query:a(i,n),fragmentIdentifier:c},r)},t.exclude=(e,n,r)=>{const s=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,s,r)}},2873:(e,t)=>{"use strict";function n(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function r(e){const t=n(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=n,t.getFromWindowOrThrow=r,t.getDocumentOrThrow=function(){return r("document")},t.getDocument=function(){return n("document")},t.getNavigatorOrThrow=function(){return r("navigator")},t.getNavigator=function(){return n("navigator")},t.getLocationOrThrow=function(){return r("location")},t.getLocation=function(){return n("location")},t.getCryptoOrThrow=function(){return r("crypto")},t.getCrypto=function(){return n("crypto")},t.getLocalStorageOrThrow=function(){return r("localStorage")},t.getLocalStorage=function(){return n("localStorage")}},5755:(e,t,n)=>{"use strict";t.D=void 0;const r=n(2873);t.D=function(){let e,t;try{e=r.getDocumentOrThrow(),t=r.getLocationOrThrow()}catch(e){return null}function n(...t){const n=e.getElementsByTagName("meta");for(let e=0;e<n.length;e++){const r=n[e],s=["itemprop","property","name"].map((e=>r.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(s.length&&s){const e=r.getAttribute("content");if(e)return e}}return""}const s=function(){let t=n("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:n("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const n=e.getElementsByTagName("link"),r=[];for(let e=0;e<n.length;e++){const s=n[e],i=s.getAttribute("rel");if(i&&i.toLowerCase().indexOf("icon")>-1){const e=s.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let n=t.protocol+"//"+t.host;if(0===e.indexOf("/"))n+=e;else{const r=t.pathname.split("/");r.pop();n+=r.join("/")+"/"+e}r.push(n)}else if(0===e.indexOf("//")){const n=t.protocol+e;r.push(n)}else r.push(e)}}return r}(),name:s}}},7484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",s="second",i="minute",a="hour",o="day",c="week",l="month",u="quarter",h="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},b={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,l),i=n-s<0,a=t.clone().add(r+(i?-1:1),l);return+(-(r+(n-s)/(i?s-a:a-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:h,w:c,d:o,D:d,h:a,m:i,s,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",v={};v[w]=m;var A="$isDayjsObject",E=function(e){return e instanceof P||!(!e||!e[A])},k=function e(t,n,r){var s;if(!t)return w;if("string"==typeof t){var i=t.toLowerCase();v[i]&&(s=i),n&&(v[i]=n,s=i);var a=t.split("-");if(!s&&a.length>1)return e(a[0])}else{var o=t.name;v[o]=t,s=o}return!r&&s&&(w=s),s||!r&&w},_=function(e,t){if(E(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new P(n)},x=b;x.l=k,x.i=E,x.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function m(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[A]=!0}var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return x},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(e,t){var n=_(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return _(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<_(e)},y.$g=function(e,t,n){return x.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!x.u(t)||t,u=x.p(e),f=function(e,t){var s=x.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?s:s.endOf(o)},p=function(e,t){return x.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,y=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case h:return r?f(1,0):f(31,11);case l:return r?f(1,m):f(0,m+1);case c:var w=this.$locale().weekStart||0,v=(g<w?g+7:g)-w;return f(r?y-v:y+(6-v),m);case o:case d:return p(b+"Hours",0);case a:return p(b+"Minutes",1);case i:return p(b+"Seconds",2);case s:return p(b+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,c=x.p(e),u="set"+(this.$u?"UTC":""),f=(n={},n[o]=u+"Date",n[d]=u+"Date",n[l]=u+"Month",n[h]=u+"FullYear",n[a]=u+"Hours",n[i]=u+"Minutes",n[s]=u+"Seconds",n[r]=u+"Milliseconds",n)[c],p=c===o?this.$D+(t-this.$W):t;if(c===l||c===h){var g=this.clone().set(d,1);g.$d[f](p),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[x.p(e)]()},y.add=function(r,u){var d,f=this;r=Number(r);var p=x.p(u),g=function(e){var t=_(f);return x.w(t.date(t.date()+Math.round(e*r)),f)};if(p===l)return this.set(l,this.$M+r);if(p===h)return this.set(h,this.$y+r);if(p===o)return g(1);if(p===c)return g(7);var m=(d={},d[i]=t,d[a]=n,d[s]=e,d)[p]||1,y=this.$d.getTime()+r*m;return x.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=x.z(this),i=this.$H,a=this.$m,o=this.$M,c=n.weekdays,l=n.months,u=n.meridiem,h=function(e,n,s,i){return e&&(e[n]||e(t,r))||s[n].slice(0,i)},d=function(e){return x.s(i%12||12,e,"0")},p=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(g,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return x.s(t.$y,4,"0");case"M":return o+1;case"MM":return x.s(o+1,2,"0");case"MMM":return h(n.monthsShort,o,l,3);case"MMMM":return h(l,o);case"D":return t.$D;case"DD":return x.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(n.weekdaysMin,t.$W,c,2);case"ddd":return h(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(i);case"HH":return x.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return p(i,a,!0);case"A":return p(i,a,!1);case"m":return String(a);case"mm":return x.s(a,2,"0");case"s":return String(t.$s);case"ss":return x.s(t.$s,2,"0");case"SSS":return x.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,d,f){var p,g=this,m=x.p(d),y=_(r),b=(y.utcOffset()-this.utcOffset())*t,w=this-y,v=function(){return x.m(g,y)};switch(m){case h:p=v()/12;break;case l:p=v();break;case u:p=v()/3;break;case c:p=(w-b)/6048e5;break;case o:p=(w-b)/864e5;break;case a:p=w/n;break;case i:p=w/t;break;case s:p=w/e;break;default:p=w}return f?p:x.a(p)},y.daysInMonth=function(){return this.endOf(l).$D},y.$locale=function(){return v[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=k(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return x.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),C=P.prototype;return _.prototype=C,[["$ms",r],["$s",s],["$m",i],["$H",a],["$W",o],["$M",l],["$y",h],["$D",d]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,P,_),e.$i=!0),_},_.locale=k,_.isDayjs=E,_.unix=function(e){return _(1e3*e)},_.en=v[w],_.Ls=v,_.p={},_}()},4110:function(e){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var r=t.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,n,s){return r.fromToBase(e,t,n,s)}n.en.relativeTime=s,r.fromToBase=function(t,r,i,a,o){for(var c,l,u,h=i.$locale().relativeTime||s,d=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=d.length,p=0;p<f;p+=1){var g=d[p];g.d&&(c=a?n(t).diff(i,g.d,!0):i.diff(t,g.d,!0));var m=(e.rounding||Math.round)(Math.abs(c));if(u=c>0,m<=g.r||!g.r){m<=1&&p>0&&(g=d[p-1]);var y=h[g.l];o&&(m=o(""+m)),l="string"==typeof y?y.replace("%d",m):y(m,r,g.l,u);break}}if(r)return l;var b=u?h.future:h.past;return"function"==typeof b?b(l):b.replace("%s",l)},r.to=function(e,t){return i(e,t,this,!0)},r.from=function(e,t){return i(e,t,this)};var a=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(a(this),e)},r.fromNow=function(e){return this.from(a(this),e)}}}()},4020:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),r=new RegExp("("+t+")+","gi");function s(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],s(n),s(r))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n)||[],r=1;r<t.length;r++)t=(e=s(t,r).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=r.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var s=i(n[0]);s!==n[0]&&(t[n[0]]=s)}n=r.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),o=0;o<a.length;o++){var c=a[o];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,i||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,a=new Array(i);s<i;s++)a[s]=r[s].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,s,i,a){var o=n?n+e:e;if(!this._events[o])return!1;var c,l,u=this._events[o],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,s),!0;case 5:return u.fn.call(u.context,t,r,s,i),!0;case 6:return u.fn.call(u.context,t,r,s,i,a),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,s);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,s){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||s&&!o.once||r&&o.context!==r||a(this,i);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||s&&!o[c].once||r&&o[c].context!==r)&&l.push(o[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},2806:e=>{"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),s=Array.isArray(t),i=0;i<r.length;i++){var a=r[i],o=e[a];(s?-1!==t.indexOf(a):t(a,o,e))&&(n[a]=o)}return n}},4155:e=>{var t,n,r=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var o,c=[],l=!1,u=-1;function h(){l&&o&&(l=!1,o.length?c=o.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(o=c,c=[];++u<t;)o&&o[u].run();u=-1,t=c.length}o=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},2478:(e,t,n)=>{"use strict";n.d(t,{jc:()=>c,o5:()=>o});Symbol();const r=Symbol();const s=Object.getPrototypeOf,i=new WeakMap,a=e=>e&&(i.has(e)?i.get(e):s(e)===Object.prototype||s(e)===Array.prototype),o=e=>a(e)&&e[r]||null,c=(e,t=!0)=>{i.set(e,t)}},500:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},610:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},5495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>hA});class r{static parseWithUndefined(e){if(null!==e)return JSON.parse(e,((e,t)=>null===t?void 0:t))}}class s{name;constructor(e){this.name=e}selectStorage(e){return e?localStorage:sessionStorage}getKey(e){return`${this.name}/${e}`}set(e,t,n=!1){this.selectStorage(!n).removeItem(this.getKey(e));const r=this.selectStorage(n);try{r.setItem(this.getKey(e),JSON.stringify(t))}catch(e){if(!(e instanceof DOMException)||22!==e.code&&1014!==e.code&&"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name)throw e;r.clear(),location.reload()}}get(e,t){let n=sessionStorage.getItem(this.getKey(e))||localStorage.getItem(this.getKey(e));return null===n?t:r.parseWithUndefined(n)}getAll(){const e={};for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=r.parseWithUndefined(sessionStorage.getItem(n)))}for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=r.parseWithUndefined(localStorage.getItem(n)))}return e}checkPermanently(e){return null!==localStorage.getItem(this.getKey(e))}delete(e){sessionStorage.removeItem(this.getKey(e)),localStorage.removeItem(this.getKey(e))}clear(){for(let e=0;e<sessionStorage.length;e++){const t=sessionStorage.key(e);t&&t.startsWith(this.name)&&sessionStorage.removeItem(t)}for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(this.name)&&localStorage.removeItem(t)}}}class i{static pull(e,...t){const n=new Set(t);for(let t=e.length-1;t>=0;t--)n.has(e[t])&&e.splice(t,1)}static insert(e,t,n){e.splice(t,0,n)}static shuffle(e){let t=e.length;for(;0!==t;){const n=Math.floor(Math.random()*t);t-=1,[e[t],e[n]]=[e[n],e[t]]}return e}static checkSame(e,t){if(e.length!==t.length)return!1;const n=new Set(t);for(const t of e)if(!n.has(t))return!1;return!0}}class a{static NEXT_ID=0;id=a.NEXT_ID++;allowedEvents=["delete"];eventMap={};delegateEvents=[];deleted=!1;addAllowedEvents(...e){this.allowedEvents.push(...e)}addEventHandler(e,t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);void 0===this.eventMap[e]&&(this.eventMap[e]=[]),this.eventMap[e].push(t)}removeDelegateEvents(e){for(const[t,n]of Object.entries(e.events))for(const r of n)e.delegate.off(t,r);i.pull(this.delegateEvents,e)}on(e,t){if(Array.isArray(e))for(const n of e)this.addEventHandler(n,t);else this.addEventHandler(e,t);return this}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.addEventHandler(e,n)}off(e,t){void 0!==this.eventMap?.[e]&&(i.pull(this.eventMap[e],t),0===this.eventMap[e].length&&delete this.eventMap[e])}async fireEvent(e,...t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);const n=[],r=[],s=this.eventMap[e];if(void 0!==s)for(const e of[...s])if(s.includes(e)){const s=e(...t);s instanceof Promise?r.push(s):n.push(s)}return n.concat(await Promise.all(r))}onDelegate(e,t,n){let r=this.delegateEvents.find((t=>t.delegate===e));void 0===r&&(r={delegate:e,events:{}},this.delegateEvents.push(r)),"string"==typeof t&&(t=[t]);for(const s of t)void 0===r.events[s]&&(r.events[s]=[]),r.events[s].push(n),e.on(s,n)}offDelegate(e){const t=this.delegateEvents.find((t=>t.delegate===e));void 0!==t&&this.removeDelegateEvents(t)}offAll(){this.eventMap={};for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=[]}delete(){for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=void 0,this.fireEvent("delete"),this.allowedEvents=void 0,this.eventMap=void 0,this.deleted=!0}}class o extends a{parent;children=[];append(...e){for(const t of e)void 0!==t&&t.appendTo(this);return this}appendTo(e,t){return this.parent===e&&void 0!==t&&this.parent.children.indexOf(this)<t&&(t-=1),this.removeFromParent(),void 0!==t&&t<e.children.length?e.children.splice(t,0,this):e.children.push(this),this.parent=e,this}removeFromParent(){void 0!==this.parent&&(i.pull(this.parent.children,this),this.parent=void 0)}empty(){for(;this.children.length>0;)this.children[0].delete();return this}checkChild(e){const t=[...this.children];for(;t.length>0;){const n=t.pop();if(n===e)return!0;t.push(...n.children)}return!1}delete(){super.delete(),this.removeFromParent(),this.empty(),this.children=void 0}}class c extends o{static NUMBER_STYLE_KEY=["zIndex","opacity","flexGrow","flexShrink","gridGap","order","zoom"];static keyframesCount=0;static createElement(e){let t;const n=e.indexOf("#");if(-1!==n){t=e.substring(n+1),e=e.substring(0,n);const r=t.indexOf(".");-1!==r&&(e+=t.substring(r),t=t.substring(0,r))}let r;const s=e.indexOf(".");-1!==s&&(r=e.substring(s+1).replace(/\./g," "),e=e.substring(0,s)),""===e&&(e="div");const i=document.createElement(e);return void 0!==t&&(i.id=t),void 0!==r&&(i.className=r),i}children=[];domEventMap={};windowEventMap={};domElement;constructor(e,...t){super(),this.addAllowedEvents("visible"),e instanceof HTMLElement?this.domElement=e:this.domElement=c.createElement(e),this.append(...t)}style(e){for(const[t,n]of Object.entries(e))void 0===n?this.domElement.style[t]=null:"number"==typeof n&&!0!==c.NUMBER_STYLE_KEY.includes(t)?this.domElement.style[t]=`${n}px`:this.domElement.style[t]=n;return this}get rect(){return this.domElement.getBoundingClientRect()}get innerScrollPosition(){let e=0,t=0;if(this.domElement!==document.body){let n=this.domElement.parentNode;for(;n!==document.body&&null!==n;)n instanceof HTMLElement&&(e+=n.scrollLeft,t+=n.scrollTop),n=n.parentNode}return{left:e,top:t}}onDom(e,t){void 0===this.domEventMap[e]&&(this.domEventMap[e]=[]);const n=e=>t(e,this);this.domEventMap[e].push({eventHandler:t,domEventHandler:n}),this.domElement.addEventListener(e,n)}onWindow(e,t){void 0===this.windowEventMap[e]&&(this.windowEventMap[e]=[]);const n=e=>t(e,this);this.windowEventMap[e].push({eventHandler:t,domEventHandler:n}),window.addEventListener(e,n)}offDom(e,t){const n=this.domEventMap[e];if(void 0!==n){const r=n.find((e=>e.eventHandler===t));void 0!==r&&(this.domElement.removeEventListener(e,r.domEventHandler),i.pull(n,r),0===n.length&&delete this.domEventMap[e])}}fireDomEvent(e){this.domElement.dispatchEvent(new Event(e))}appendText(e){if("TEXTAREA"===this.domElement.tagName)this.domElement.append(e);else{const t=new DocumentFragment,n=e.split("\n");for(const[e,r]of n.entries())e>0&&t.append(document.createElement("br")),t.append(r);this.domElement.append(t)}return this}set text(e){this.empty().appendText(e)}append(...e){for(const t of e)if(void 0!==t)if("string"==typeof t)this.appendText(t);else if(t instanceof c)t.appendTo(this);else for(const[e,n]of Object.entries(t))"function"==typeof n?this.onDom(e,n):"style"===e&&"object"==typeof n?this.style(n):void 0===n?this.domElement.removeAttribute(e):this.domElement.setAttribute(e,String(n));return this}checkVisible(){return void 0!==this.parent&&(this.parent.domElement===document.body||this.parent.checkVisible())}fireVisible(){this.fireEvent("visible");for(const e of this.children)e.fireVisible()}appendTo(e,t){void 0!==t&&t<e.children.length?e.domElement.insertBefore(this.domElement,e.children[t].domElement):e.domElement.append(this.domElement);const n=super.appendTo(e,t);return!0===this.checkVisible()&&this.fireVisible(),n}empty(){for(super.empty();this.domElement.firstChild;)this.domElement.removeChild(this.domElement.firstChild);return this}addClass(e){this.domElement.classList.add(e)}deleteClass(e){this.domElement.classList.remove(e)}hasClass(e){return this.domElement.classList.contains(e)}toggleClass(e){this.domElement.classList.toggle(e)}clone(){return new c(this.domElement.cloneNode(!0))}delete(){this.domElement.remove(),this.domEventMap=void 0;for(const[e,t]of Object.entries(this.windowEventMap))for(const n of t)window.removeEventListener(e,n.domEventHandler);this.windowEventMap=void 0,super.delete(),this.domElement=void 0}animate({keyframes:e,duration:t=.5,timingFunction:n="ease",delay:r=0,iterationCount:s=1,direction:i="normal",onEnd:a=(()=>{})}){const o="__KEYFRAMES_"+c.keyframesCount++;let l="",u={};for(const[t,n]of Object.entries(e)){l+=`${t}{`;for(let[e,t]of Object.entries(n))"number"!=typeof t||["zIndex","opacity"].includes(e)||(t+="px"),l+=`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}:${t};`;l+="}","from"===t||"0%"===t?u={...u,...n}:"to"!==t&&"100%"!==t||(u={...u,...n})}const h=document.createElement("style");h.setAttribute("type","text/css"),h.appendChild(document.createTextNode(`@keyframes ${o}{${l}}`)),document.head.appendChild(h),u={...u,animation:`${o} ${t}s ${n} ${r}s ${s} ${i}`},this.style(u),1===s&&setTimeout((()=>{this.deleted||a(),h.remove()}),1e3*t)}}const l=new class extends c{constructor(){super(document.body)}};const u=new class{paramRegex=/{(.+)}/;match(e,t,n){for(let r=0;r<e.length;r++){const s=t[r];if(void 0===s)return!1;let i=e[r];if("**"===s)return!0;const a=this.paramRegex.exec(s);if(!s.startsWith("{")){const e=s.indexOf("{");if(i.substring(0,e)!==s.substring(0,e))return!1;i=i.substring(e)}if(i&&a)n&&(n[a[1]]=i);else if("*"!==s&&s!==i)return!1;if(r===e.length-1&&r<t.length-1&&""!==t[t.length-1])return!1}return!0}parse(e,t,n){const r=e.split("/"),s=t.split("/");return this.match(r,s,n)}},h=e=>decodeURIComponent(e.endsWith("/")?e.slice(0,-1).substring(1):e.substring(1)),d=(e,t,n,r)=>t.some((t=>u.match(e,t.split("/"),r)))&&!n.some((t=>u.match(e,t.split("/"))));const f=new class extends a{routes=[];redirects=[];openingViews=[];forwarding=!1;constructor(){super(),this.addAllowedEvents("go"),window.addEventListener("popstate",(e=>{if(!0===this.forwarding)this.forwarding=!1;else{const t=l.children.findLast((e=>e.hasClass("popup-background")));t?(this.forwarding=!0,window.history.forward(),t.delete()):this.check(e.state??void 0)}for(const e of l.children)e.hasClass("dropdown-menu")&&e.delete()}))}closeAllPopup(){for(const e of l.children)e.hasClass("popup-background")&&e.delete()}check(e){const t=h(location.pathname),n=t.split("/");let r=!1;const s=[];for(const{patterns:t,excludes:r,to:s}of this.redirects){const i=e?{...e}:{};if(d(n,t,r,i)){let e=s;for(const[t,n]of Object.entries(i))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");return void this.goNoHistory(`/${e}`)}}for(const{patterns:a,excludes:o,viewType:c}of this.routes){const l=e?{...e}:{},u=this.openingViews.find((e=>e instanceof c));d(n,a,o,l)?void 0===u?(this.openingViews.push(new c(l,t)),r=!0):u.changeParams(l,t):void 0!==u&&(s.push(u),i.pull(this.openingViews,u))}for(const e of s.reverse())e.close();!0===r&&this.fireEvent("go")}route(e,t,n=[]){"string"==typeof e&&(e=[e]),this.routes.push({patterns:e,excludes:n,viewType:t});const r=h(location.pathname),s=r.split("/"),i={};d(s,e,n,i)&&this.openingViews.push(new t(i,r))}redirect(e,t,n=[]){"string"==typeof e&&(e=[e]),this.redirects.push({patterns:e,excludes:n,to:t});const r=h(location.pathname).split("/"),s={};if(d(r,e,n,s)){let e=t;for(const[t,n]of Object.entries(s))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");this.goNoHistory(`/${e}`)}}go(e,t){location.pathname!==e&&(history.pushState(void 0,"",e),this.check(t),window.scrollTo(0,0))}goNoHistory(e,t){location.pathname!==e&&(history.replaceState(void 0,"",e),this.check(t),window.scrollTo(0,0))}waitAndGo(e,t){setTimeout((()=>this.go(e,t)))}refresh(){for(const e of this.openingViews.reverse())e.close();this.openingViews=[];const e=h(location.pathname),t=e.split("/");for(const{patterns:n,excludes:r,viewType:s}of this.routes){const i={};d(t,n,r,i)&&this.openingViews.push(new s(i,e))}}};const p=new class{store=new s("__BROWSER_INFO_STORE");normalizeLanguage(e){return-1!==e.indexOf("-")&&"zh-TC"!==e&&"zh-SC"!==e&&(e=e.substring(0,e.indexOf("-"))),e}get language(){let e=this.store.get("lang")||navigator.language;return this.normalizeLanguage(e)}set language(e){this.store.set("lang",this.normalizeLanguage(e))}changeLanguage(e){if(!e)throw new Error("Invalid language code.");this.language=e,f.refresh()}get isPhoneSize(){return window.innerWidth<=859}};class g extends c{constructor(e,...t){super(e+".component"),this.append(...t)}}const m=(e,...t)=>new c(c.createElement(e),...t);class y extends g{constructor(e){super("ul.dropdown-menu");for(const t of e.items)this.append(m("li",m("button",t.title,{click:e=>{e.stopPropagation(),t.click(),this.delete()}})));this.style({left:e.left,top:e.top}),l.append(this),window.addEventListener("click",this.windowClickHandler)}windowClickHandler=e=>{this.domElement.contains(e.target)||this.delete()};delete(){window.removeEventListener("click",this.windowClickHandler),super.delete()}}n(5843);class b extends g{constructor(e){super("span.material-icon.material-symbols-outlined"),this.text=e}}class w extends c{constructor(e){super(".popup-background"),this.onDom("click",(t=>{!0===e.barrierDismissible&&t.target===this.domElement&&this.delete()})),l.append(this)}}class v extends g{titleContainer;titleText;constructor(e){super("button"+(void 0!==e.type?"."+e.type:".contained")+(e.tag??"")),void 0!==e.icon&&this.append(e.icon),void 0!==e.title&&this.append(this.titleContainer=m("span.title",this.titleText=e.title)),void 0!==e.href&&(this.domElement.href=e.href,this.domElement.target="_blank"),!0===e.disabled&&this.disable(),void 0!==e.click&&this.onDom("click",(t=>{!0!==this.hasClass("disabled")&&e.click(t,this)}))}set title(e){void 0!==this.titleContainer?this.titleContainer.text=e:this.append(this.titleContainer=m("span.title",e)),this.titleText=e}disable(){return this.addClass("disabled"),this}enable(){return this.deleteClass("disabled"),this}}var A;!function(e){e.Contained="contained",e.Outlined="outlined",e.Text="text"}(A||(A={}));const E=A;class k extends g{timeoutId;constructor(e){super(".snackbar"),this.append(m("main",m("p",e.message),e.action?new v({tag:".action",type:E.Text,title:e.action.title,click:()=>{e.action?.click(),this.delete()}}):void 0,m("button.close",new b("close"),{click:()=>this.delete()}))),l.append(this),this.timeoutId=setTimeout((()=>this.delete()),5e3)}delete(){clearTimeout(this.timeoutId),super.delete()}}class _ extends g{constructor(e){super(".splash-screen"),this.append(e),this.appendTo(l)}}class x extends w{content;constructor(e){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.alert",m("header",m("h1",e.title)),m("main",m("p",e.message)),m("footer",new v({type:E.Text,tag:".confirm-button",title:e.confirmTitle??"OK",click:()=>this.delete()}))))}}class P extends w{content;constructor(e,t,n){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.confirm",m("header",m("h1",e.title)),m("main",m("p",e.message)),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>{n&&n(),this.delete()},title:e.cancelTitle??"Cancel"}),new v({type:E.Contained,tag:".confirm-button",click:async(n,r)=>{r.domElement.setAttribute("disabled","disabled"),e.loadingTitle&&(r.text=e.loadingTitle),await t(),this.delete()},title:e.confirmTitle??"Confirm"}))))}}class C extends w{content;constructor(e){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.error-alert",m("header",m("h1",new b("error"),e.title)),m("main",m("p",e.message)),m("footer",new v({type:E.Text,tag:".confirm-button",title:e.confirmTitle??"OK",click:()=>this.delete()}))))}}class S extends g{_id;constructor(e,t){super("li.tab"),this._id=e,this.append(...Array.isArray(t)?t:[t])}set active(e){e?this.addClass("active"):this.deleteClass("active")}}class I extends g{children=[];store;constructor(e,t){super("ul.tabs"),this.addAllowedEvents("select"),this.store=new s(`tabs-${e}`);for(const e of t){const t=new S(e.id,e.label);t.onDom("click",(()=>this.select(e.id))),this.append(t)}}init(){if(this.store.get("selected"))this.select(this.store.get("selected"));else{const e=this.children[0]?._id;e&&this.select(e)}}select(e){for(const t of this.children)t.active=t._id===e;this.store.set("selected",e,!0),this.fireEvent("select",e)}}function O(e){return null==e}var T=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},N=function(e,t){var n,r,s,i;if(t)for(n=0,r=(i=Object.keys(t)).length;n<r;n+=1)e[s=i[n]]=t[s];return e},j={isNothing:O,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:O(e)?[]:[e]},repeat:function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},isNegativeZero:T,extend:N};function U(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function L(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=U(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}L.prototype=Object.create(Error.prototype),L.prototype.constructor=L,L.prototype.toString=function(e){return this.name+": "+U(this,e)};var R=L;function B(e,t,n,r,s){var i="",a="",o=Math.floor(s/2)-1;return r-t>o&&(t=r-o+(i=" ... ").length),n-r>o&&(n=r+o-(a=" ...").length),{str:i+e.slice(t,n).replace(/\t/g,"→")+a,pos:r-t+i.length}}function M(e,t){return j.repeat(" ",t-e.length)+e}var D=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,s=[0],i=[],a=-1;n=r.exec(e.buffer);)i.push(n.index),s.push(n.index+n[0].length),e.position<=n.index&&a<0&&(a=s.length-2);a<0&&(a=s.length-1);var o,c,l="",u=Math.min(e.line+t.linesAfter,i.length).toString().length,h=t.maxLength-(t.indent+u+3);for(o=1;o<=t.linesBefore&&!(a-o<0);o++)c=B(e.buffer,s[a-o],i[a-o],e.position-(s[a]-s[a-o]),h),l=j.repeat(" ",t.indent)+M((e.line-o+1).toString(),u)+" | "+c.str+"\n"+l;for(c=B(e.buffer,s[a],i[a],e.position,h),l+=j.repeat(" ",t.indent)+M((e.line+1).toString(),u)+" | "+c.str+"\n",l+=j.repeat("-",t.indent+u+3+c.pos)+"^\n",o=1;o<=t.linesAfter&&!(a+o>=i.length);o++)c=B(e.buffer,s[a+o],i[a+o],e.position-(s[a]-s[a+o]),h),l+=j.repeat(" ",t.indent)+M((e.line+o+1).toString(),u)+" | "+c.str+"\n";return l.replace(/\n$/,"")},F=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$=["scalar","sequence","mapping"];var G=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===F.indexOf(t))throw new R('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===$.indexOf(this.kind))throw new R('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function H(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)})),n[t]=e})),n}function z(e){return this.extend(e)}z.prototype.extend=function(e){var t=[],n=[];if(e instanceof G)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new R("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof G))throw new R("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new R("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new R("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof G))throw new R("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(z.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=H(r,"implicit"),r.compiledExplicit=H(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var W=z,q=new G("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),K=new G("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),V=new G("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),J=new W({explicit:[q,K,V]});var Q=new G("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var Y=new G("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Z(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function X(e){return 48<=e&&e<=55}function ee(e){return 48<=e&&e<=57}var te=new G("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,r=0,s=!1;if(!n)return!1;if("-"!==(t=e[r])&&"+"!==t||(t=e[++r]),"0"===t){if(r+1===n)return!0;if("b"===(t=e[++r])){for(r++;r<n;r++)if("_"!==(t=e[r])){if("0"!==t&&"1"!==t)return!1;s=!0}return s&&"_"!==t}if("x"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!Z(e.charCodeAt(r)))return!1;s=!0}return s&&"_"!==t}if("o"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!X(e.charCodeAt(r)))return!1;s=!0}return s&&"_"!==t}}if("_"===t)return!1;for(;r<n;r++)if("_"!==(t=e[r])){if(!ee(e.charCodeAt(r)))return!1;s=!0}return!(!s||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!j.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ne=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var re=/^[-+]?[0-9]+e/;var se=new G("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!ne.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||j.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(j.isNegativeZero(e))return"-0.0";return n=e.toString(10),re.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),ie=J.extend({implicit:[Q,Y,te,se]}),ae=ie,oe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ce=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var le=new G("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==oe.exec(e)||null!==ce.exec(e))},construct:function(e){var t,n,r,s,i,a,o,c,l=0,u=null;if(null===(t=oe.exec(e))&&(t=ce.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(n,r,s));if(i=+t[4],a=+t[5],o=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),c=new Date(Date.UTC(n,r,s,i,a,o,l)),u&&c.setTime(c.getTime()-u),c},instanceOf:Date,represent:function(e){return e.toISOString()}});var ue=new G("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var de=new G("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,s=e.length,i=he;for(n=0;n<s;n++)if(!((t=i.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),s=r.length,i=he,a=0,o=[];for(t=0;t<s;t++)t%4==0&&t&&(o.push(a>>16&255),o.push(a>>8&255),o.push(255&a)),a=a<<6|i.indexOf(r.charAt(t));return 0===(n=s%4*6)?(o.push(a>>16&255),o.push(a>>8&255),o.push(255&a)):18===n?(o.push(a>>10&255),o.push(a>>2&255)):12===n&&o.push(a>>4&255),new Uint8Array(o)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",s=0,i=e.length,a=he;for(t=0;t<i;t++)t%3==0&&t&&(r+=a[s>>18&63],r+=a[s>>12&63],r+=a[s>>6&63],r+=a[63&s]),s=(s<<8)+e[t];return 0===(n=i%3)?(r+=a[s>>18&63],r+=a[s>>12&63],r+=a[s>>6&63],r+=a[63&s]):2===n?(r+=a[s>>10&63],r+=a[s>>4&63],r+=a[s<<2&63],r+=a[64]):1===n&&(r+=a[s>>2&63],r+=a[s<<4&63],r+=a[64],r+=a[64]),r}}),fe=Object.prototype.hasOwnProperty,pe=Object.prototype.toString;var ge=new G("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,s,i,a=[],o=e;for(t=0,n=o.length;t<n;t+=1){if(r=o[t],i=!1,"[object Object]"!==pe.call(r))return!1;for(s in r)if(fe.call(r,s)){if(i)return!1;i=!0}if(!i)return!1;if(-1!==a.indexOf(s))return!1;a.push(s)}return!0},construct:function(e){return null!==e?e:[]}}),me=Object.prototype.toString;var ye=new G("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,s,i,a=e;for(i=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],"[object Object]"!==me.call(r))return!1;if(1!==(s=Object.keys(r)).length)return!1;i[t]=[s[0],r[s[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,s,i,a=e;for(i=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],s=Object.keys(r),i[t]=[s[0],r[s[0]]];return i}}),be=Object.prototype.hasOwnProperty;var we=new G("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(be.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),ve=ae.extend({implicit:[le,ue],explicit:[de,ge,ye,we]}),Ae=Object.prototype.hasOwnProperty,Ee=1,ke=2,_e=3,xe=4,Pe=1,Ce=2,Se=3,Ie=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Oe=/[\x85\u2028\u2029]/,Te=/[,\[\]\{\}]/,Ne=/^(?:!|!!|![a-z\-]+!)$/i,je=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ue(e){return Object.prototype.toString.call(e)}function Le(e){return 10===e||13===e}function Re(e){return 9===e||32===e}function Be(e){return 9===e||32===e||10===e||13===e}function Me(e){return 44===e||91===e||93===e||123===e||125===e}function De(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Fe(e){return 120===e?2:117===e?4:85===e?8:0}function $e(e){return 48<=e&&e<=57?e-48:-1}function Ge(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function He(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var ze=new Array(256),We=new Array(256),qe=0;qe<256;qe++)ze[qe]=Ge(qe)?1:0,We[qe]=Ge(qe);function Ke(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||ve,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ve(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=D(n),new R(t,n)}function Je(e,t){throw Ve(e,t)}function Qe(e,t){e.onWarning&&e.onWarning.call(null,Ve(e,t))}var Ye={YAML:function(e,t,n){var r,s,i;null!==e.version&&Je(e,"duplication of %YAML directive"),1!==n.length&&Je(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Je(e,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),i=parseInt(r[2],10),1!==s&&Je(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&Qe(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,s;2!==n.length&&Je(e,"TAG directive accepts exactly two arguments"),r=n[0],s=n[1],Ne.test(r)||Je(e,"ill-formed tag handle (first argument) of the TAG directive"),Ae.call(e.tagMap,r)&&Je(e,'there is a previously declared suffix for "'+r+'" tag handle'),je.test(s)||Je(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch(t){Je(e,"tag prefix is malformed: "+s)}e.tagMap[r]=s}};function Ze(e,t,n,r){var s,i,a,o;if(t<n){if(o=e.input.slice(t,n),r)for(s=0,i=o.length;s<i;s+=1)9===(a=o.charCodeAt(s))||32<=a&&a<=1114111||Je(e,"expected valid JSON character");else Ie.test(o)&&Je(e,"the stream contains non-printable characters");e.result+=o}}function Xe(e,t,n,r){var s,i,a,o;for(j.isObject(n)||Je(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,o=(s=Object.keys(n)).length;a<o;a+=1)i=s[a],Ae.call(t,i)||(t[i]=n[i],r[i]=!0)}function et(e,t,n,r,s,i,a,o,c){var l,u;if(Array.isArray(s))for(l=0,u=(s=Array.prototype.slice.call(s)).length;l<u;l+=1)Array.isArray(s[l])&&Je(e,"nested arrays are not supported inside keys"),"object"==typeof s&&"[object Object]"===Ue(s[l])&&(s[l]="[object Object]");if("object"==typeof s&&"[object Object]"===Ue(s)&&(s="[object Object]"),s=String(s),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)Xe(e,t,i[l],n);else Xe(e,t,i,n);else e.json||Ae.call(n,s)||!Ae.call(t,s)||(e.line=a||e.line,e.lineStart=o||e.lineStart,e.position=c||e.position,Je(e,"duplicated mapping key")),"__proto__"===s?Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[s]=i,delete n[s];return t}function tt(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):Je(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function nt(e,t,n){for(var r=0,s=e.input.charCodeAt(e.position);0!==s;){for(;Re(s);)9===s&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&35===s)do{s=e.input.charCodeAt(++e.position)}while(10!==s&&13!==s&&0!==s);if(!Le(s))break;for(tt(e),s=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&Qe(e,"deficient indentation"),r}function rt(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!Be(t)))}function st(e,t){1===t?e.result+=" ":t>1&&(e.result+=j.repeat("\n",t-1))}function it(e,t){var n,r,s=e.tag,i=e.anchor,a=[],o=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,Je(e,"tab characters must not be used in indentation")),45===r)&&Be(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,nt(e,!0,-1)&&e.lineIndent<=t)a.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,ct(e,t,_e,!1,!0),a.push(e.result),nt(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)Je(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=s,e.anchor=i,e.kind="sequence",e.result=a,!0)}function at(e){var t,n,r,s,i=!1,a=!1;if(33!==(s=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&Je(e,"duplication of a tag property"),60===(s=e.input.charCodeAt(++e.position))?(i=!0,s=e.input.charCodeAt(++e.position)):33===s?(a=!0,n="!!",s=e.input.charCodeAt(++e.position)):n="!",t=e.position,i){do{s=e.input.charCodeAt(++e.position)}while(0!==s&&62!==s);e.position<e.length?(r=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):Je(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==s&&!Be(s);)33===s&&(a?Je(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),Ne.test(n)||Je(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),Te.test(r)&&Je(e,"tag suffix cannot contain flow indicator characters")}r&&!je.test(r)&&Je(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(t){Je(e,"tag name is malformed: "+r)}return i?e.tag=r:Ae.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:Je(e,'undeclared tag handle "'+n+'"'),!0}function ot(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&Je(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!Be(n)&&!Me(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Je(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function ct(e,t,n,r,s){var i,a,o,c,l,u,h,d,f,p=1,g=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=a=o=xe===n||_e===n,r&&nt(e,!0,-1)&&(g=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;at(e)||ot(e);)nt(e,!0,-1)?(g=!0,o=i,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):o=!1;if(o&&(o=g||s),1!==p&&xe!==n||(d=Ee===n||ke===n?t:t+1,f=e.position-e.lineStart,1===p?o&&(it(e,f)||function(e,t,n){var r,s,i,a,o,c,l,u=e.tag,h=e.anchor,d={},f=Object.create(null),p=null,g=null,m=null,y=!1,b=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),l=e.input.charCodeAt(e.position);0!==l;){if(y||-1===e.firstTabInLine||(e.position=e.firstTabInLine,Je(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),i=e.line,63!==l&&58!==l||!Be(r)){if(a=e.line,o=e.lineStart,c=e.position,!ct(e,n,ke,!1,!0))break;if(e.line===i){for(l=e.input.charCodeAt(e.position);Re(l);)l=e.input.charCodeAt(++e.position);if(58===l)Be(l=e.input.charCodeAt(++e.position))||Je(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(et(e,d,f,p,g,null,a,o,c),p=g=m=null),b=!0,y=!1,s=!1,p=e.tag,g=e.result;else{if(!b)return e.tag=u,e.anchor=h,!0;Je(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=u,e.anchor=h,!0;Je(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(y&&(et(e,d,f,p,g,null,a,o,c),p=g=m=null),b=!0,y=!0,s=!0):y?(y=!1,s=!0):Je(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=r;if((e.line===i||e.lineIndent>t)&&(y&&(a=e.line,o=e.lineStart,c=e.position),ct(e,t,xe,!0,s)&&(y?g=e.result:m=e.result),y||(et(e,d,f,p,g,m,a,o,c),p=g=m=null),nt(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&0!==l)Je(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&et(e,d,f,p,g,null,a,o,c),b&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),b}(e,f,d))||function(e,t){var n,r,s,i,a,o,c,l,u,h,d,f,p=!0,g=e.tag,m=e.anchor,y=Object.create(null);if(91===(f=e.input.charCodeAt(e.position)))a=93,l=!1,i=[];else{if(123!==f)return!1;a=125,l=!0,i={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),f=e.input.charCodeAt(++e.position);0!==f;){if(nt(e,!0,t),(f=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=g,e.anchor=m,e.kind=l?"mapping":"sequence",e.result=i,!0;p?44===f&&Je(e,"expected the node content, but found ','"):Je(e,"missed comma between flow collection entries"),d=null,o=c=!1,63===f&&Be(e.input.charCodeAt(e.position+1))&&(o=c=!0,e.position++,nt(e,!0,t)),n=e.line,r=e.lineStart,s=e.position,ct(e,t,Ee,!1,!0),h=e.tag,u=e.result,nt(e,!0,t),f=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==f||(o=!0,f=e.input.charCodeAt(++e.position),nt(e,!0,t),ct(e,t,Ee,!1,!0),d=e.result),l?et(e,i,y,h,u,d,n,r,s):o?i.push(et(e,null,y,h,u,d,n,r,s)):i.push(u),nt(e,!0,t),44===(f=e.input.charCodeAt(e.position))?(p=!0,f=e.input.charCodeAt(++e.position)):p=!1}Je(e,"unexpected end of the stream within a flow collection")}(e,d)?m=!0:(a&&function(e,t){var n,r,s,i,a=Pe,o=!1,c=!1,l=t,u=0,h=!1;if(124===(i=e.input.charCodeAt(e.position)))r=!1;else{if(62!==i)return!1;r=!0}for(e.kind="scalar",e.result="";0!==i;)if(43===(i=e.input.charCodeAt(++e.position))||45===i)Pe===a?a=43===i?Se:Ce:Je(e,"repeat of a chomping mode identifier");else{if(!((s=$e(i))>=0))break;0===s?Je(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?Je(e,"repeat of an indentation width identifier"):(l=t+s-1,c=!0)}if(Re(i)){do{i=e.input.charCodeAt(++e.position)}while(Re(i));if(35===i)do{i=e.input.charCodeAt(++e.position)}while(!Le(i)&&0!==i)}for(;0!==i;){for(tt(e),e.lineIndent=0,i=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),Le(i))u++;else{if(e.lineIndent<l){a===Se?e.result+=j.repeat("\n",o?1+u:u):a===Pe&&o&&(e.result+="\n");break}for(r?Re(i)?(h=!0,e.result+=j.repeat("\n",o?1+u:u)):h?(h=!1,e.result+=j.repeat("\n",u+1)):0===u?o&&(e.result+=" "):e.result+=j.repeat("\n",u):e.result+=j.repeat("\n",o?1+u:u),o=!0,c=!0,u=0,n=e.position;!Le(i)&&0!==i;)i=e.input.charCodeAt(++e.position);Ze(e,n,e.position,!1)}}return!0}(e,d)||function(e,t){var n,r,s;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=s=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(Ze(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,s=e.position}else Le(n)?(Ze(e,r,s,!0),st(e,nt(e,!1,t)),r=s=e.position):e.position===e.lineStart&&rt(e)?Je(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);Je(e,"unexpected end of the stream within a single quoted scalar")}(e,d)||function(e,t){var n,r,s,i,a,o;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return Ze(e,n,e.position,!0),e.position++,!0;if(92===o){if(Ze(e,n,e.position,!0),Le(o=e.input.charCodeAt(++e.position)))nt(e,!1,t);else if(o<256&&ze[o])e.result+=We[o],e.position++;else if((a=Fe(o))>0){for(s=a,i=0;s>0;s--)(a=De(o=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+a:Je(e,"expected hexadecimal character");e.result+=He(i),e.position++}else Je(e,"unknown escape sequence");n=r=e.position}else Le(o)?(Ze(e,n,r,!0),st(e,nt(e,!1,t)),n=r=e.position):e.position===e.lineStart&&rt(e)?Je(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Je(e,"unexpected end of the stream within a double quoted scalar")}(e,d)?m=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!Be(r)&&!Me(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Je(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Ae.call(e.anchorMap,n)||Je(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],nt(e,!0,-1),!0}(e)?function(e,t,n){var r,s,i,a,o,c,l,u,h=e.kind,d=e.result;if(Be(u=e.input.charCodeAt(e.position))||Me(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(Be(r=e.input.charCodeAt(e.position+1))||n&&Me(r)))return!1;for(e.kind="scalar",e.result="",s=i=e.position,a=!1;0!==u;){if(58===u){if(Be(r=e.input.charCodeAt(e.position+1))||n&&Me(r))break}else if(35===u){if(Be(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&rt(e)||n&&Me(u))break;if(Le(u)){if(o=e.line,c=e.lineStart,l=e.lineIndent,nt(e,!1,-1),e.lineIndent>=t){a=!0,u=e.input.charCodeAt(e.position);continue}e.position=i,e.line=o,e.lineStart=c,e.lineIndent=l;break}}a&&(Ze(e,s,i,!1),st(e,e.line-o),s=i=e.position,a=!1),Re(u)||(i=e.position+1),u=e.input.charCodeAt(++e.position)}return Ze(e,s,i,!1),!!e.result||(e.kind=h,e.result=d,!1)}(e,d,Ee===n)&&(m=!0,null===e.tag&&(e.tag="?")):(m=!0,null===e.tag&&null===e.anchor||Je(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(m=o&&it(e,f))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&Je(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,l=e.implicitTypes.length;c<l;c+=1)if((h=e.implicitTypes[c]).resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(Ae.call(e.typeMap[e.kind||"fallback"],e.tag))h=e.typeMap[e.kind||"fallback"][e.tag];else for(h=null,c=0,l=(u=e.typeMap.multi[e.kind||"fallback"]).length;c<l;c+=1)if(e.tag.slice(0,u[c].tag.length)===u[c].tag){h=u[c];break}h||Je(e,"unknown tag !<"+e.tag+">"),null!==e.result&&h.kind!==e.kind&&Je(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result,e.tag)?(e.result=h.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):Je(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function lt(e){var t,n,r,s,i=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(s=e.input.charCodeAt(e.position))&&(nt(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==s));){for(a=!0,s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!Be(s);)s=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&Je(e,"directive name must not be less than one character in length");0!==s;){for(;Re(s);)s=e.input.charCodeAt(++e.position);if(35===s){do{s=e.input.charCodeAt(++e.position)}while(0!==s&&!Le(s));break}if(Le(s))break;for(t=e.position;0!==s&&!Be(s);)s=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==s&&tt(e),Ae.call(Ye,n)?Ye[n](e,n,r):Qe(e,'unknown document directive "'+n+'"')}nt(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,nt(e,!0,-1)):a&&Je(e,"directives end mark is expected"),ct(e,e.lineIndent-1,xe,!1,!0),nt(e,!0,-1),e.checkLineBreaks&&Oe.test(e.input.slice(i,e.position))&&Qe(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&rt(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,nt(e,!0,-1)):e.position<e.length-1&&Je(e,"end of the stream or a document separator is expected")}function ut(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new Ke(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,Je(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)lt(n);return n.documents}var ht=function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var r=ut(e,n);if("function"!=typeof t)return r;for(var s=0,i=r.length;s<i;s+=1)t(r[s])},dt={loadAll:ht,load:function(e,t){var n=ut(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new R("expected a single document in the stream, but found more")}}},ft=Object.prototype.toString,pt=Object.prototype.hasOwnProperty,gt=65279,mt=9,yt=10,bt=13,wt=32,vt=33,At=34,Et=35,kt=37,_t=38,xt=39,Pt=42,Ct=44,St=45,It=58,Ot=61,Tt=62,Nt=63,jt=64,Ut=91,Lt=93,Rt=96,Bt=123,Mt=124,Dt=125,Ft={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},$t=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Gt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ht(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new R("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+j.repeat("0",r-t.length)+t}var zt=1,Wt=2;function qt(e){this.schema=e.schema||ve,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=j.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,s,i,a,o,c;if(null===t)return{};for(n={},s=0,i=(r=Object.keys(t)).length;s<i;s+=1)a=r[s],o=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(c=e.compiledTypeMap.fallback[a])&&pt.call(c.styleAliases,o)&&(o=c.styleAliases[o]),n[a]=o;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?Wt:zt,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Kt(e,t){for(var n,r=j.repeat(" ",t),s=0,i=-1,a="",o=e.length;s<o;)-1===(i=e.indexOf("\n",s))?(n=e.slice(s),s=o):(n=e.slice(s,i+1),s=i+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function Vt(e,t){return"\n"+j.repeat(" ",e.indent*t)}function Jt(e){return e===wt||e===mt}function Qt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==gt||65536<=e&&e<=1114111}function Yt(e){return Qt(e)&&e!==gt&&e!==bt&&e!==yt}function Zt(e,t,n){var r=Yt(e),s=r&&!Jt(e);return(n?r:r&&e!==Ct&&e!==Ut&&e!==Lt&&e!==Bt&&e!==Dt)&&e!==Et&&!(t===It&&!s)||Yt(t)&&!Jt(t)&&e===Et||t===It&&s}function Xt(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function en(e){return/^\n* /.test(e)}var tn=1,nn=2,rn=3,sn=4,an=5;function on(e,t,n,r,s,i,a,o){var c,l=0,u=null,h=!1,d=!1,f=-1!==r,p=-1,g=function(e){return Qt(e)&&e!==gt&&!Jt(e)&&e!==St&&e!==Nt&&e!==It&&e!==Ct&&e!==Ut&&e!==Lt&&e!==Bt&&e!==Dt&&e!==Et&&e!==_t&&e!==Pt&&e!==vt&&e!==Mt&&e!==Ot&&e!==Tt&&e!==xt&&e!==At&&e!==kt&&e!==jt&&e!==Rt}(Xt(e,0))&&function(e){return!Jt(e)&&e!==It}(Xt(e,e.length-1));if(t||a)for(c=0;c<e.length;l>=65536?c+=2:c++){if(!Qt(l=Xt(e,c)))return an;g=g&&Zt(l,u,o),u=l}else{for(c=0;c<e.length;l>=65536?c+=2:c++){if((l=Xt(e,c))===yt)h=!0,f&&(d=d||c-p-1>r&&" "!==e[p+1],p=c);else if(!Qt(l))return an;g=g&&Zt(l,u,o),u=l}d=d||f&&c-p-1>r&&" "!==e[p+1]}return h||d?n>9&&en(e)?an:a?i===Wt?an:nn:d?sn:rn:!g||a||s(e)?i===Wt?an:nn:tn}function cn(e,t,n,r,s){e.dump=function(){if(0===t.length)return e.quotingType===Wt?'""':"''";if(!e.noCompatMode&&(-1!==$t.indexOf(t)||Gt.test(t)))return e.quotingType===Wt?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),o=r||e.flowLevel>-1&&n>=e.flowLevel;switch(on(t,o,e.indent,a,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!r,s)){case tn:return t;case nn:return"'"+t.replace(/'/g,"''")+"'";case rn:return"|"+ln(t,e.indent)+un(Kt(t,i));case sn:return">"+ln(t,e.indent)+un(Kt(function(e,t){var n,r,s=/(\n+)([^\n]*)/g,i=(o=e.indexOf("\n"),o=-1!==o?o:e.length,s.lastIndex=o,hn(e.slice(0,o),t)),a="\n"===e[0]||" "===e[0];var o;for(;r=s.exec(e);){var c=r[1],l=r[2];n=" "===l[0],i+=c+(a||n||""===l?"":"\n")+hn(l,t),a=n}return i}(t,a),i));case an:return'"'+function(e){for(var t,n="",r=0,s=0;s<e.length;r>=65536?s+=2:s++)r=Xt(e,s),!(t=Ft[r])&&Qt(r)?(n+=e[s],r>=65536&&(n+=e[s+1])):n+=t||Ht(r);return n}(t)+'"';default:throw new R("impossible error: invalid scalar style")}}()}function ln(e,t){var n=en(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function un(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function hn(e,t){if(""===e||" "===e[0])return e;for(var n,r,s=/ [^ ]/g,i=0,a=0,o=0,c="";n=s.exec(e);)(o=n.index)-i>t&&(r=a>i?a:o,c+="\n"+e.slice(i,r),i=r+1),a=o;return c+="\n",e.length-i>t&&a>i?c+=e.slice(i,a)+"\n"+e.slice(a+1):c+=e.slice(i),c.slice(1)}function dn(e,t,n,r){var s,i,a,o="",c=e.tag;for(s=0,i=n.length;s<i;s+=1)a=n[s],e.replacer&&(a=e.replacer.call(n,String(s),a)),(pn(e,t+1,a,!0,!0,!1,!0)||void 0===a&&pn(e,t+1,null,!0,!0,!1,!0))&&(r&&""===o||(o+=Vt(e,t)),e.dump&&yt===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=c,e.dump=o||"[]"}function fn(e,t,n){var r,s,i,a,o,c;for(i=0,a=(s=n?e.explicitTypes:e.implicitTypes).length;i<a;i+=1)if(((o=s[i]).instanceOf||o.predicate)&&(!o.instanceOf||"object"==typeof t&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(n?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(c=e.styleMap[o.tag]||o.defaultStyle,"[object Function]"===ft.call(o.represent))r=o.represent(t,c);else{if(!pt.call(o.represent,c))throw new R("!<"+o.tag+'> tag resolver accepts not "'+c+'" style');r=o.represent[c](t,c)}e.dump=r}return!0}return!1}function pn(e,t,n,r,s,i,a){e.tag=null,e.dump=n,fn(e,n,!1)||fn(e,n,!0);var o,c=ft.call(e.dump),l=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var u,h,d="[object Object]"===c||"[object Array]"===c;if(d&&(h=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||h||2!==e.indent&&t>0)&&(s=!1),h&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(d&&h&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===c)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var s,i,a,o,c,l,u="",h=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new R("sortKeys must be a boolean or a function");for(s=0,i=d.length;s<i;s+=1)l="",r&&""===u||(l+=Vt(e,t)),o=n[a=d[s]],e.replacer&&(o=e.replacer.call(n,a,o)),pn(e,t+1,a,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&yt===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,c&&(l+=Vt(e,t)),pn(e,t+1,o,!0,c)&&(e.dump&&yt===e.dump.charCodeAt(0)?l+=":":l+=": ",u+=l+=e.dump));e.tag=h,e.dump=u||"{}"}(e,t,e.dump,s),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,s,i,a,o,c="",l=e.tag,u=Object.keys(n);for(r=0,s=u.length;r<s;r+=1)o="",""!==c&&(o+=", "),e.condenseFlow&&(o+='"'),a=n[i=u[r]],e.replacer&&(a=e.replacer.call(n,i,a)),pn(e,t,i,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),pn(e,t,a,!1,!1)&&(c+=o+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===c)r&&0!==e.dump.length?(e.noArrayIndent&&!a&&t>0?dn(e,t-1,e.dump,s):dn(e,t,e.dump,s),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,s,i,a="",o=e.tag;for(r=0,s=n.length;r<s;r+=1)i=n[r],e.replacer&&(i=e.replacer.call(n,String(r),i)),(pn(e,t,i,!1,!1)||void 0===i&&pn(e,t,null,!1,!1))&&(""!==a&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=o,e.dump="["+a+"]"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new R("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&cn(e,e.dump,t,i,l)}null!==e.tag&&"?"!==e.tag&&(o=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),o="!"===e.tag[0]?"!"+o:"tag:yaml.org,2002:"===o.slice(0,18)?"!!"+o.slice(18):"!<"+o+">",e.dump=o+" "+e.dump)}return!0}function gn(e,t){var n,r,s=[],i=[];for(mn(e,s,i),n=0,r=i.length;n<r;n+=1)t.duplicates.push(s[i[n]]);t.usedDuplicates=new Array(r)}function mn(e,t,n){var r,s,i;if(null!==e&&"object"==typeof e)if(-1!==(s=t.indexOf(e)))-1===n.indexOf(s)&&n.push(s);else if(t.push(e),Array.isArray(e))for(s=0,i=e.length;s<i;s+=1)mn(e[s],t,n);else for(s=0,i=(r=Object.keys(e)).length;s<i;s+=1)mn(e[r[s]],t,n)}function yn(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}const bn={Type:G,Schema:W,FAILSAFE_SCHEMA:J,JSON_SCHEMA:ie,CORE_SCHEMA:ae,DEFAULT_SCHEMA:ve,load:dt.load,loadAll:dt.loadAll,dump:{dump:function(e,t){var n=new qt(t=t||{});n.noRefs||gn(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),pn(n,0,r,!0,!0)?n.dump+"\n":""}}.dump,YAMLException:R,types:{binary:de,float:se,map:V,null:Q,pairs:ye,set:we,timestamp:le,bool:Y,int:te,merge:ue,omap:ge,seq:K,str:q},safeLoad:yn("safeLoad","load"),safeLoadAll:yn("safeLoadAll","loadAll"),safeDump:yn("safeDump","dump")},wn=JSON.parse('{"confirm_button":{"en":"Confirm","ko":"확인","es":"Confirmar","fr":"Confirmer","de":"Bestätigen","it":"Conferma","pt":"Confirmar","ru":"Подтвердить","zh-CN":"确认","zh-TW":"確認","ja":"確認"}}'),vn=()=>{let e="",t="";return 2===p.language.length?e=p.language.toLowerCase():(e=p.language.substring(0,2).toLowerCase(),t=p.language.substring(3).toLowerCase()),{language:e,locale:t}},An=(e,t={},n="en")=>{const r="string"==typeof e?wn[e]:e;if(void 0!==r){let e=r[p.language];if(void 0===e){const{language:t,locale:n}=vn();e=r[t],"object"==typeof e&&(e=void 0!==e[n]?e[n]:e[Object.keys(e)[0]])}if(void 0===e){const t=r[n];e=void 0!==t?t:r[Object.keys(r)[0]]}if(void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),void 0!==e)for(const[n,r]of Object.entries(t)){const t=new RegExp(`{${n}}`,"g");e=e.replace(t,String(r))}return void 0===e?"":e}return console.error(`${e} not exists.`),""};An.loadYAML=(e,t)=>{const n=bn.load(t);for(const[t,r]of Object.entries(n))void 0===wn[t]&&(wn[t]={}),wn[t][e]=r},An.loadYAMLs=async e=>{const t=[];for(const[n,r]of Object.entries(e))for(const e of r)t.push((async()=>{const t=bn.load(await(await fetch(e)).text());if(void 0!==t)for(const[e,r]of Object.entries(t))void 0===wn[e]&&(wn[e]={}),wn[e][n]=r})());await Promise.all(t)},An.getMessages=e=>wn[e],An.getLangMessages=(e,t="en")=>{const{language:n,locale:r}=vn(),s="string"==typeof e?wn[e]:e;if(void 0!==s){let e=s[p.language];if(void 0===e&&(e=s[n],void 0!==e&&"object"==typeof e&&(e=void 0!==e[r]?e[r]:e[Object.keys(e)[0]])),void 0===e){const n=s[t];e=void 0!==n?n:s[Object.keys(s)[0]]}return void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),{[n]:void 0===e?"":e}}return console.error(`${e} not exists.`),{[n]:""}};const En=An;class kn extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class _n extends kn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xn extends kn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pn extends kn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Cn=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};class Sn{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,8138,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Cn(this,void 0,void 0,(function*(){try{const{headers:r,method:s,body:i}=t;let a,o={};i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=i):"string"==typeof i?(o["Content-Type"]="text/plain",a=i):"undefined"!=typeof FormData&&i instanceof FormData?a=i:(o["Content-Type"]="application/json",a=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:a}).catch((e=>{throw new _n(e)})),l=c.headers.get("x-relay-error");if(l&&"true"===l)throw new xn(c);if(!c.ok)throw new Pn(c);let u,h=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"multipart/form-data"===h?yield c.formData():yield c.text(),{data:u,error:null}}catch(e){return{data:null,error:e}}}))}}var In=n(8138),On=n.n(In);class Tn{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=On():this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,r;let s=null,i=null,a=null,o=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),l=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&l&&l.length>1&&(a=parseInt(l[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(s={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,a=null,o=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(i=[],s=null,o=200,c="OK")}catch(n){404===e.status&&""===t?(o=204,c="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(r=null==s?void 0:s.details)||void 0===r?void 0:r.includes("0 rows"))&&(s=null,o=200,c="OK"),s&&this.shouldThrowOnError)throw s}return{error:s,data:i,count:a,status:o,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}}class Nn extends Tn{select(e){let t=!1;const n=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r}={}){const s=r?`${r}.order`:"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const r=void 0===n?"offset":`${n}.offset`,s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),o=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${o}"; options=${a};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class jn extends Nn{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class Un{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let s=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new jn({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new jn({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){const i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new jn({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new jn({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new jn({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Ln={"X-Client-Info":"postgrest-js/1.8.5"};class Rn{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ln),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Un(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Rn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:r}={}){let s;const i=new URL(`${this.url}/rpc/${e}`);let a;n?(s="HEAD",Object.entries(t).forEach((([e,t])=>{i.searchParams.append(e,`${t}`)}))):(s="POST",a=t);const o=Object.assign({},this.headers);return r&&(o.Prefer=`count=${r}`),new jn({method:s,url:i,headers:o,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}var Bn=n(6081);const Mn={"X-Client-Info":"realtime-js/2.8.1"};var Dn,Fn,$n,Gn,Hn,zn,Wn;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Dn||(Dn={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Fn||(Fn={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}($n||($n={})),function(e){e.websocket="websocket"}(Gn||(Gn={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Hn||(Hn={}));class qn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class Kn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+r));i+=r;const o=n.decode(e.slice(i,i+s));i+=s;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class Vn{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0;"rate limited"===this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(zn||(zn={}));class Jn{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jn.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=Jn.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],r()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Jn.syncDiff(this.state,e,t,n),r())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,r){const s=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(s,((e,t)=>{i[e]||(o[e]=t)})),this.map(i,((e,t)=>{const n=s[e];if(n){const r=t.map((e=>e.presence_ref)),s=n.map((e=>e.presence_ref)),i=t.filter((e=>s.indexOf(e.presence_ref)<0)),c=n.filter((e=>r.indexOf(e.presence_ref)<0));i.length>0&&(a[e]=i),c.length>0&&(o[e]=c)}else a[e]=t})),this.syncDiff(s,{joins:a,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,((t,r)=>{var s;const i=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map((e=>e.presence_ref)),r=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...r)}n(t,i,r)})),this.map(i,((t,n)=>{let s=e[t];if(!s)return;const i=n.map((e=>e.presence_ref));s=s.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=s,r(t,s,n),0===s.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):r,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Wn||(Wn={}));const Qn=(e,t,n={})=>{var r;const s=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce(((n,r)=>(n[r]=Yn(r,e,t,s),n)),{})},Yn=(e,t,n,r)=>{const s=t.find((t=>t.name===e)),i=null==s?void 0:s.type,a=n[e];return i&&!r.includes(i)?Zn(i,a):Xn(a)},Zn=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return rr(t,n)}switch(e){case Wn.bool:return er(t);case Wn.float4:case Wn.float8:case Wn.int2:case Wn.int4:case Wn.int8:case Wn.numeric:case Wn.oid:return tr(t);case Wn.json:case Wn.jsonb:return nr(t);case Wn.timestamp:return sr(t);case Wn.abstime:case Wn.date:case Wn.daterange:case Wn.int4range:case Wn.int8range:case Wn.money:case Wn.reltime:case Wn.text:case Wn.time:case Wn.timestamptz:case Wn.timetz:case Wn.tsrange:case Wn.tstzrange:default:return Xn(t)}},Xn=e=>e,er=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},tr=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},nr=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},rr=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch(e){r=s?s.split(","):[]}return r.map((e=>Zn(t,e)))}return e},sr=e=>"string"==typeof e?e.replace(" ","T"):e;var ir,ar,or;!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(ir||(ir={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(ar||(ar={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(or||(or={}));class cr{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Fn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vn(this,$n.join,this.params,this.timeout),this.rejoinTimer=new qn((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=Fn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fn.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Fn.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fn.errored,this.rejoinTimer.scheduleTimeout())})),this._on($n.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new Jn(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const a={},o={broadcast:s,presence:i,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==r?r:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:o},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var n;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const r=this.bindings.postgres_changes,s=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,i=[];for(let n=0;n<s;n++){const s=r[n],{filter:{event:a,schema:o,table:c,filter:l}}=s,u=t&&t[n];if(!u||u.event!==a||u.schema!==o||u.table!==c||u.filter!==l)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},s),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var r,s,i;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&n("rate limited"),"broadcast"!==e.type||(null===(i=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",(()=>n("ok"))),a.receive("timeout",(()=>n("timed out")))}));{const{event:s,payload:i}=e,a={method:"POST",headers:{apikey:null!==(n=this.socket.accessToken)&&void 0!==n?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(r=t.timeout)&&void 0!==r?r:this.timeout)).ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($n.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const r=new Vn(this,$n.leave,{},e);r.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),r.send(),this._canPush()||r.trigger("ok",{})}))}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout((()=>r.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Vn(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:c,join:l}=$n;if(n&&[a,o,c,l].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter((e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i})).map((e=>e.callback(u,n))):null===(s=this.bindings[i])||void 0===s||s.filter((e=>{var n,r,s,a,o,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:i}=e,a={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:i};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)}))}_isClosed(){return this.state===Fn.closed}_isJoined(){return this.state===Fn.joined}_isJoining(){return this.state===Fn.joining}_isLeaving(){return this.state===Fn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&cr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($n.close,{},e)}_onError(e){this._on($n.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Qn(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Qn(e.columns,e.old_record)),t}}const lr=()=>{};class ur{constructor(e,t){var r,s;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Mn,this.params={},this.timeout=1e4,this.transport=Bn.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=lr,this.conn=null,this.sendBuffer=[],this.serializer=new Kn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,8138,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Gn.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i));const a=null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey;a&&(this.accessToken=a),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qn((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Dn.connecting:return Hn.Connecting;case Dn.open:return Hn.Open;case Dn.closing:return Hn.Closing;default:return Hn.Closed}}isConnected(){return this.connectionState()===Hn.Open}channel(e,t={config:{}}){const n=new cr(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:s}=e;let i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};if(this.log("push",`${t} ${n} (${s})`,r),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(i)())return"rate limited"}else i();else this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push($n.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:r,ref:s}=e;(s&&s===this.pendingHeartbeatRef||n===(null==r?void 0:r.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${s&&"("+s+")"||""}`,r),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,r,s))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger($n.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>!!this.inThrottle||(e(),t>0&&(this.inThrottle=!0,setTimeout((()=>{this.inThrottle=!1}),t)),!1)}}class hr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function dr(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class fr extends hr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class pr extends hr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var gr=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};const mr=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,8138,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)};var yr=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};const br=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wr=(e,t)=>yr(void 0,void 0,void 0,(function*(){const r=yield gr(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(n.t.bind(n,8138,23))).Response:Response}));e instanceof r?e.json().then((n=>{t(new fr(br(n),e.status||500))})).catch((e=>{t(new pr(br(e),e))})):t(new pr(br(e),e))})),vr=(e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};function Ar(e,t,n,r,s,i){return yr(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(n,vr(t,r,s,i)).then((e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>wr(e,o)))}))}))}function Er(e,t,n,r){return yr(this,void 0,void 0,(function*(){return Ar(e,"GET",t,n,r)}))}function kr(e,t,n,r,s){return yr(this,void 0,void 0,(function*(){return Ar(e,"POST",t,r,s,n)}))}function _r(e,t,n,r,s){return yr(this,void 0,void 0,(function*(){return Ar(e,"DELETE",t,r,s,n)}))}var xr=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};const Pr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sr{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=mr(r)}uploadOrUpdate(e,t,n,r){return xr(this,void 0,void 0,(function*(){try{let s;const i=Object.assign(Object.assign({},Cr),r),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),s.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",i.cacheControl)):(s=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType);const o=this._removeEmptyFolders(t),c=this._getFinalPath(o),l=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));if(l.ok)return{data:{path:o},error:null};return{data:null,error:yield l.json()}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}upload(e,t,n){return xr(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,r){return xr(this,void 0,void 0,(function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Cr.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:i});if(o.ok)return{data:{path:s},error:null};return{data:null,error:yield o.json()}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}createSignedUploadUrl(e){return xr(this,void 0,void 0,(function*(){try{let t=this._getFinalPath(e);const n=yield kr(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),r=new URL(this.url+n.url),s=r.searchParams.get("token");if(!s)throw new hr("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:s},error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}update(e,t,n){return xr(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t){return xr(this,void 0,void 0,(function*(){try{return{data:yield kr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}copy(e,t){return xr(this,void 0,void 0,(function*(){try{return{data:{path:(yield kr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,n){return xr(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e),s=yield kr(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,n){return xr(this,void 0,void 0,(function*(){try{const r=yield kr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null}))),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}download(e,t){return xr(this,void 0,void 0,(function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Er(this.fetch,`${this.url}/${n}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&r.push(s);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&r.push(a);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}remove(e){return xr(this,void 0,void 0,(function*(){try{return{data:yield _r(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}list(e,t,n){return xr(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},Pr),t),{prefix:e||""});return{data:yield kr(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ir={"X-Client-Info":"storage-js/2.5.4"};var Or=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};class Tr{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Ir),t),this.fetch=mr(n)}listBuckets(){return Or(this,void 0,void 0,(function*(){try{return{data:yield Er(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}getBucket(e){return Or(this,void 0,void 0,(function*(){try{return{data:yield Er(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return Or(this,void 0,void 0,(function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return Or(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,r,s){return yr(this,void 0,void 0,(function*(){return Ar(e,"PUT",t,r,s,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return Or(this,void 0,void 0,(function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return Or(this,void 0,void 0,(function*(){try{return{data:yield _r(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(dr(e))return{data:null,error:e};throw e}}))}}class Nr extends Tr{constructor(e,t={},n){super(e,t,n)}from(e){return new Sr(this.url,this.headers,e,this.fetch)}}let jr="";jr="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ur={"X-Client-Info":`supabase-js-${jr}/2.38.2`};var Lr=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};const Rr=e=>{let t;return t=e||("undefined"==typeof fetch?On():fetch),(...e)=>t(...e)},Br=(e,t,n)=>{const r=Rr(n),s="undefined"==typeof Headers?In.Headers:Headers;return(n,i)=>Lr(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let c=new s(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},i),{headers:c}))}))};const Mr=()=>"undefined"!=typeof document,Dr={tested:!1,writable:!1},Fr=()=>{if(!Mr())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Dr.tested)return Dr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Dr.tested=!0,Dr.writable=!0}catch(e){Dr.tested=!0,Dr.writable=!1}return Dr.writable};function $r(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(e){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}const Gr=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,8138,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Hr=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json,zr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Wr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return n}},qr=async(e,t)=>{await e.removeItem(t)};class Kr{constructor(){this.promise=new Kr.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function Vr(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,r,s,i,a,o,c,l="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),n=i<<2|a>>4,r=(15&a)<<4|o>>2,s=(3&o)<<6|c,l+=String.fromCharCode(n),64!=o&&0!=r&&(l+=String.fromCharCode(r)),64!=c&&0!=s&&(l+=String.fromCharCode(s));return l}(n))}function Jr(e){return("0"+e.toString(16)).substr(-2)}function Qr(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Jr).join("")}async function Yr(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map((e=>String.fromCharCode(e))).join("")}(e);return function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(t)}Kr.promiseConstructor=Promise;class Zr extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Xr(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class es extends Zr{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ts extends Zr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ns extends Zr{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class rs extends ns{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class ss extends ns{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class is extends ns{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class as extends ns{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class os extends ns{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cs extends ns{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function ls(e){return Xr(e)&&"AuthRetryableFetchError"===e.name}var us=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};const hs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ds=[502,503,504];async function fs(e){if(!Hr(e))throw new cs(hs(e),0);if(ds.includes(e.status))throw new cs(hs(e),e.status);let t;try{t=await e.json()}catch(e){throw new ts(hs(e),e)}throw new es(hs(t),e.status||500)}const ps=(e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function gs(e,t,n,r){var s;const i=Object.assign({},null==r?void 0:r.headers);(null==r?void 0:r.jwt)&&(i.Authorization=`Bearer ${r.jwt}`);const a=null!==(s=null==r?void 0:r.query)&&void 0!==s?s:{};(null==r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await async function(e,t,n,r,s,i){const a=ps(t,r,s,i);let o;try{o=await e(n,a)}catch(e){throw console.error(e),new cs(hs(e),0)}o.ok||await fs(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(e){await fs(e)}}(e,t,n+o,{headers:i,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(c):{data:Object.assign({},c),error:null}}function ms(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ys(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function bs(e){return{data:e,error:null}}function ws(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=us(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},user:Object.assign({},a)},error:null}}function vs(e){return e}var As=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};class Es{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Gr(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await gs(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Xr(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await gs(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ys})}catch(e){if(Xr(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,n=As(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await gs(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ws,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(Xr(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await gs(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ys})}catch(e){if(Xr(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,n,r,s,i,a,o;try{const c={nextPage:null,lastPage:0,total:0},l=await gs(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:vs});if(l.error)throw l.error;const u=await l.json(),h=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(o=null===(a=l.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t})),c.total=parseInt(h)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(e){if(Xr(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await gs(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ys})}catch(e){if(Xr(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await gs(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ys})}catch(e){if(Xr(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await gs(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ys})}catch(e){if(Xr(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{const{data:t,error:n}=await gs(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(Xr(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await gs(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(Xr(e))return{data:null,error:e};throw e}}}const ks="2.57.0",_s={"X-Client-Info":`gotrue-js/${ks}`},xs={getItem:e=>Fr()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Fr()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Fr()&&globalThis.localStorage.removeItem(e)}};function Ps(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}globalThis&&Fr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class Cs extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Ss={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_s,flowType:"implicit",debug:!1},Is=3e4;async function Os(e,t,n){return await n()}class Ts{constructor(e){var t;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ts.nextInstanceID,Ts.nextInstanceID+=1,this.instanceID>0&&Mr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Ss),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Es({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Gr(n.fetch),this.lock=n.lock||Os,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Fr()?this.storage=xs:(this.memoryStorage={},this.storage=Ps(this.memoryStorage)):(this.memoryStorage={},this.storage=Ps(this.memoryStorage)),Mr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ks}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const e=!!Mr()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:r,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",s),await this._saveSession(r),setTimeout((async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Xr(e)?{error:e}:{error:new ts("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,n,r;try{let s;if(await this._removeSession(),"email"in e){const{email:n,password:r,options:i}=e;let a=null,o=null;if("pkce"===this.flowType){const e=Qr();await zr(this.storage,`${this.storageKey}-code-verifier`,e),a=await Yr(e),o=e===a?"plain":"s256"}s=await gs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:ms})}else{if(!("phone"in e))throw new is("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;s=await gs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null==a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:ms})}}const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(e){if(Xr(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){const{email:n,password:r,options:s}=e;t=await gs(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:ms})}else{if(!("phone"in e))throw new is("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await gs(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:ms})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:r}):{data:{user:null,session:null},error:new ss}}catch(e){if(Xr(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,n,r,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await Wr(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:r}=await gs(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:ms});return await qr(this.storage,`${this.storageKey}-code-verifier`),r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:r}):{data:{user:null,session:null},error:new ss}}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:n,token:r,access_token:s,nonce:i}=e,a=await gs(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ms}),{data:o,error:c}=a;return c?{data:{user:null,session:null},error:c}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c}):{data:{user:null,session:null},error:new ss}}catch(e){if(Xr(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,n,r,s,i;try{if(await this._removeSession(),"email"in e){const{email:r,options:s}=e;let i=null,a=null;if("pkce"===this.flowType){const e=Qr();await zr(this.storage,`${this.storageKey}-code-verifier`,e),i=await Yr(e),a=e===i?"plain":"s256"}const{error:o}=await gs(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await gs(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new is("You must provide either an email or phone number.")}catch(e){if(Xr(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,n;try{let r,s;"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession(),"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await gs(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:ms});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,c=i.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(e){if(Xr(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,n,r;try{await this._removeSession();let s=null,i=null;if("pkce"===this.flowType){const e=Qr();await zr(this.storage,`${this.storageKey}-code-verifier`,e),s=await Yr(e),i=e===s?"plain":"s256"}return await gs(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:bs})}catch(e){if(Xr(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new rs;const{error:r}=await gs(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(Xr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:s}=e,{error:i}=await gs(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:i,error:a}=await gs(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:a}}throw new is("You must provide either an email or phone number and a type")}catch(e){if(Xr(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Wr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,(async()=>await this._getUser())))}async _getUser(e){try{return e?await gs(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ys}):await this._useSession((async e=>{var t,n;const{data:r,error:s}=e;if(s)throw s;return await gs(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==n?n:void 0,xform:ys})}))}catch(e){if(Xr(e))return{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new rs;const i=r.session;let a=null,o=null;if("pkce"===this.flowType&&null!=e.email){const e=Qr();await zr(this.storage,`${this.storageKey}-code-verifier`,e),a=await Yr(e),o=e===a?"plain":"s256"}const{data:c,error:l}=await gs(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:ys});if(l)throw l;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(e){if(Xr(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return Vr(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rs;const t=Date.now()/1e3;let n=t,r=!0,s=null;const i=Vr(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(e){if(Xr(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new rs;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(Xr(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e){try{if(!Mr())throw new as("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new as("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new os("Not a valid PKCE flow url.");const t=$r(window.location.href);if(e){if(!t.code)throw new os("No code detected.");const{data:e,error:n}=await this._exchangeCodeForSession(t.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new as(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:i,expires_in:a,expires_at:o,token_type:c}=t;if(!(s&&a&&i&&c))throw new as("No session defined in URL");const l=Math.round(Date.now()/1e3),u=parseInt(a);let h=l+u;o&&(h=parseInt(o));const d=h-l;1e3*d<=Is&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${u}s`);const f=h-u;l-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,l):l-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",f,h,l);const{data:p,error:g}=await this._getUser(s);if(g)throw g;const m={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:u,expires_at:h,refresh_token:i,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(e){if(Xr(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const e=$r(window.location.href);return!(!Mr()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=$r(window.location.href),t=await Wr(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Xr(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await qr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(t){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}}))}async resetPasswordForEmail(e,t={}){let n=null,r=null;if("pkce"===this.flowType){const e=Qr();await zr(this.storage,`${this.storageKey}-code-verifier`,e),n=await Yr(e),r=e===n?"plain":"s256"}try{return await gs(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(Xr(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*n),this._debug(t,"refreshing attempt",n),await gs(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ms})),r=(e,t,n)=>n&&n.error&&ls(n.error)&&Date.now()+200*(e+1)-s<Is,new Promise(((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null,t))return void e(t)}catch(e){if(!r(s,e))return void t(e)}})()})))}catch(e){if(this._debug(t,"error",e),Xr(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Mr()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Wr(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=Math.round(Date.now()/1e3),s=(null!==(e=n.expires_at)&&void 0!==e?e:1/0)<r+10;if(this._debug(t,`session has${s?"":" not"} expired with margin of 10s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),ls(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(e){return this._debug(t,"error",e),void console.error(e)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Kr;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new rs;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(e){if(this._debug(r,"error",e),Xr(e)){const n={session:null,error:e};return null===(t=this.refreshingDeferred)||void 0===t||t.resolve(n),n}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(e){r.push(e)}}));if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),zr(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await qr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Mr()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Is);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/Is);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof Cs))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mr()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const n=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===this.flowType){const e=Qr();await zr(this.storage,`${this.storageKey}-code-verifier`,e);const t=await Yr(e),r=e===t?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",t,"method",r);const s=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(r)}`});n.push(s.toString())}if(null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);n.push(e.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await gs(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Xr(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession((async t=>{var n,r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await gs(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:((null===(r=null==a?void 0:a.totp)||void 0===r?void 0:r.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}))}catch(e){if(Xr(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await gs(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})}))}catch(e){if(Xr(e))return{data:null,error:e};throw e}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await gs(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Xr(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],r=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(r.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))))}}Ts.nextInstanceID=0;class Ns extends Ts{constructor(e){super(e)}}var js=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))};const Us={headers:Ur},Ls={schema:"public"},Rs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Bs={};class Ms{constructor(e,t,n){var r,s,i,a,o,c,l,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=e.replace(/\/$/,"");this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f=function(e,t){const{db:n,auth:r,realtime:s,global:i}=e,{db:a,auth:o,realtime:c,global:l}=t;return{db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},l),i)}}(null!=n?n:{},{db:Ls,realtime:Bs,auth:Object.assign(Object.assign({},Rs),{storageKey:d}),global:Us});this.storageKey=null!==(s=null===(r=f.auth)||void 0===r?void 0:r.storageKey)&&void 0!==s?s:"",this.headers=null!==(a=null===(i=f.global)||void 0===i?void 0:i.headers)&&void 0!==a?a:{},this.auth=this._initSupabaseAuthClient(null!==(o=f.auth)&&void 0!==o?o:{},this.headers,null===(c=f.global)||void 0===c?void 0:c.fetch),this.fetch=Br(t,this._getAccessToken.bind(this),null===(l=f.global)||void 0===l?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new Rn(`${h}/rest/v1`,{headers:this.headers,schema:null===(u=f.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Sn(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Nr(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return js(this,void 0,void 0,(function*(){const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:s,flowType:i,debug:a},o,c){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ns({url:this.authUrl,headers:Object.assign(Object.assign({},l),o),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:i,debug:a,fetch:c})}_initRealtimeClient(e){return new ur(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=n?n:null),this.changedAccessToken=n)}}const Ds=new class extends a{client;connect(e,t){this.client=((e,t,n)=>new Ms(e,t,n))(e,t,{auth:{autoRefreshToken:!0,persistSession:!0}})}};class Fs{static toTitleCase(e){return e.replace(/(^\w|\s\w)(\S*)/g,((e,t,n)=>t.toUpperCase()+n.toLowerCase()))}static shortenEthereumAddress(e){return 42===e.length&&e.startsWith("0x")?`${e.substring(0,6)}...${e.substring(38)}`:e}static numberWithCommas(e,t){if(void 0===t||+ +e>Number.MAX_SAFE_INTEGER){const t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"0"===t[1]?t[0]:t.join(".")}const n=String(+(+e).toFixed(t)).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}}class $s{closed=!1;changeParams(e,t){}close(){this.closed=!0}}var Gs=n(7484),Hs=n.n(Gs),zs=n(4110),Ws=n.n(zs);const qs={subject:"",last_fetched_key_price:"0",total_trading_key_volume:"0",total_earned_trading_fees:"0",last_message_sent_at:"",key_holder_count:0,last_key_purchased_at:"-infinity",owned_key_count:0,created_at:"-infinity"},Ks="*, last_fetched_key_price::text, total_trading_key_volume::text, total_earned_trading_fees::text",Vs=(e,t)=>e.subject===t.subject&&e.last_fetched_key_price===t.last_fetched_key_price&&e.total_trading_key_volume===t.total_trading_key_volume&&e.total_earned_trading_fees===t.total_earned_trading_fees&&e.is_key_price_up===t.is_key_price_up&&e.last_message===t.last_message&&e.last_message_sent_at===t.last_message_sent_at&&e.key_holder_count===t.key_holder_count&&e.last_key_purchased_at===t.last_key_purchased_at&&e.owned_key_count===t.owned_key_count;const Js=new class extends a{store=new s("cached-subject-details");constructor(){super(),this.addAllowedEvents("update")}init(){Ds.client.channel("subject-details-changes").on("postgres_changes",{event:"*",schema:"public",table:"subject_details"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.subject)})).subscribe()}cache(e){Vs(e,this.get(e.subject))||(this.store.set(e.subject,e,!0),this.fireEvent("update",e))}get(e){const t=this.store.get(e);return t||{...qs,subject:e}}async refresh(e){const{data:t,error:n}=await Ds.client.from("subject_details").select(Ks).eq("subject",e);if(n)throw n;const r=t?.[0];r&&!Vs(r,this.get(e))&&this.cache(r)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing subject details:",e))),t}cacheMultiple(e){for(const t of e)this.cache(t)}};const Qs=new class{async fetchSubject(e){const{data:t,error:n}=await Ds.client.from("subject_details").select(Ks).eq("subject",e);if(n)throw n;return t?.[0]}async fetchHoldingSubjects(e){const{data:t,error:n}=await Ds.client.from("subject_key_holders").select("subject").eq("wallet_address",e);if(n)throw n;const r=t.map((e=>e.subject)),{data:s,error:i}=await Ds.client.from("subject_details").select(Ks).in("subject",r);if(i)throw i;return s}async fetchFollowingSubjects(e){const{data:t,error:n}=await Ds.client.from("follows").select("followee_id").eq("follower_id",e).order("followed_at",{ascending:!1});if(n)throw n;const r=t.map((e=>e.followee_id)),{data:s,error:i}=await Ds.client.from("user_details").select().in("user_id",r);if(i)throw i;const a=s.map((e=>e.wallet_address)),{data:o,error:c}=await Ds.client.from("subject_details").select(Ks).in("subject",a);if(c)throw c;return o}};var Ys=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured for connector "${t}".`),this.name="ChainNotConfiguredForConnectorError"}},Zs=class extends Error{constructor(){super(...arguments),this.name="ConnectorNotFoundError",this.message="Connector not found"}};function Xs(e){return"string"==typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"==typeof e?Number(e):e}var ei=n(6729),ti=n(2676);const ni=(0,ti.ax)({id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc0497E381f536Be9ce14B0dD3817cBcAe57d2F62",blockCreated:16966585},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),ri=(0,ti.ax)({id:5,network:"goerli",name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-goerli.g.alchemy.com/v2"],webSocket:["wss://eth-goerli.g.alchemy.com/v2"]},infura:{http:["https://goerli.infura.io/v3"],webSocket:["wss://goerli.infura.io/ws/v3"]},default:{http:["https://rpc.ankr.com/eth_goerli"]},public:{http:["https://rpc.ankr.com/eth_goerli"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://goerli.etherscan.io"},default:{name:"Etherscan",url:"https://goerli.etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0x56522D00C410a43BFfDF00a9A569489297385790",blockCreated:8765204},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:6507670}},testnet:!0});var si=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ii=(e,t,n)=>(si(e,t,"read from private field"),n?n.call(e):t.get(e)),ai=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},oi=(e,t,n,r)=>(si(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ci=(e,t,n)=>(si(e,t,"access private method"),n),li=class extends ei{constructor({chains:e=[ni,ri],options:t}){super(),this.chains=e,this.options=t}getBlockExplorerUrls(e){const{default:t,...n}=e.blockExplorers??{};if(t)return[t.url,...Object.values(n).map((e=>e.url))]}isChainUnsupported(e){return!this.chains.some((t=>t.id===e))}setStorage(e){this.storage=e}},ui=n(5775),hi=n(2027),di=n(8863);class fi extends hi.G{constructor(e,{code:t,docsPath:n,metaMessages:r,shortMessage:s}){super(s,{cause:e,docsPath:n,metaMessages:r||e?.metaMessages}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof di.bs?e.code:t??-1}}class pi extends fi{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class gi extends fi{constructor(e){super(e,{code:gi.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(gi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class mi extends fi{constructor(e){super(e,{code:mi.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(mi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class yi extends fi{constructor(e){super(e,{code:yi.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(yi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class bi extends fi{constructor(e){super(e,{code:bi.code,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(bi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class wi extends fi{constructor(e){super(e,{code:wi.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(wi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class vi extends fi{constructor(e){super(e,{code:vi.code,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(vi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Ai extends fi{constructor(e){super(e,{code:Ai.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Ai,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Ei extends fi{constructor(e){super(e,{code:Ei.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(Ei,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ki extends fi{constructor(e){super(e,{code:ki.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(ki,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class _i extends fi{constructor(e){super(e,{code:_i.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(_i,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class xi extends fi{constructor(e){super(e,{code:xi.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(xi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Pi extends fi{constructor(e){super(e,{code:Pi.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(Pi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Ci extends pi{constructor(e){super(e,{code:Ci.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty(Ci,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Si extends pi{constructor(e){super(e,{code:Si.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(Si,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Ii extends pi{constructor(e){super(e,{code:Ii.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(Ii,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Oi extends pi{constructor(e){super(e,{code:Oi.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty(Oi,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Ti extends pi{constructor(e){super(e,{code:Ti.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(Ti,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ni extends pi{constructor(e){super(e,{code:Ni.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(Ni,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class ji extends fi{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}var Ui=n(4503);const Li=256;let Ri,Bi=Li;function Mi(e=11){if(!Ri||Bi+e>2*Li){Ri="",Bi=0;for(let e=0;e<Li;e++)Ri+=(256+256*Math.random()|0).toString(16).substring(1)}return Ri.substring(Bi,Bi+++e)}function Di(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,key:r="base",name:s="Base Client",pollingInterval:i=4e3,type:a="base"}=e,o=e.chain,c=e.account?(0,Ui.T)(e.account):void 0,{config:l,request:u,value:h}=e.transport({chain:o,pollingInterval:i}),d={account:c,batch:t,cacheTime:n,chain:o,key:r,name:s,pollingInterval:i,request:u,transport:{...l,...h},type:a,uid:Mi()};return Object.assign(d,{extend:function e(t){return n=>{const r=n(t);for(const e in d)delete r[e];const s={...t,...r};return Object.assign(s,{extend:e(s)})}}(d)})}var Fi=n(5946);async function $i(e){const t=await e.request({method:"eth_chainId"});return(0,Fi.ly)(t)}var Gi=n(2106);var Hi=n(7412),zi=n(7040),Wi=n(5444);const qi="/docs/contract/encodeDeployData";function Ki({abi:e,args:t,bytecode:n}){if(!t||0===t.length)return n;const r=e.find((e=>"type"in e&&"constructor"===e.type));if(!r)throw new Hi.fM({docsPath:qi});if(!("inputs"in r))throw new Hi.cO({docsPath:qi});if(!r.inputs||0===r.inputs.length)throw new Hi.cO({docsPath:qi});const s=(0,Wi.E)(r.inputs,t);return(0,zi.SM)([n,s])}class Vi extends hi.G{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join("\n"),{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}var Ji=n(6445),Qi=n(3639),Yi=n(7469);var Zi=n(1163),Xi=n(4688),ea=n(7531),ta=n(7795);class na extends hi.G{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class ra extends hi.G{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class sa extends hi.G{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,ta.o)(e)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class ia extends hi.G{constructor({blockHash:e,blockNumber:t}){let n="Block";e&&(n=`Block at hash "${e}"`),t&&(n=`Block at number "${t}"`),super(`${n} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const aa={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function oa(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?(0,Fi.ly)(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?(0,Fi.ly)(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?aa[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip2930"===t.type&&(delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t}function ca(e){const t=e.transactions?.map((e=>"string"==typeof e?e:oa(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,difficulty:e.difficulty?BigInt(e.difficulty):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function la(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:s}={}){const i=r??"latest",a=s??!1,o=void 0!==n?(0,Gi.eC)(n):void 0;let c=null;if(c=t?await e.request({method:"eth_getBlockByHash",params:[t,a]}):await e.request({method:"eth_getBlockByNumber",params:[o||i,a]}),!c)throw new ia({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||ca)(c)}async function ua(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function ha(e,t){const{block:n,chain:r=e.chain,request:s}=t||{};if("function"==typeof r?.fees?.defaultPriorityFee){const t=n||await la(e);return r.fees.defaultPriorityFee({block:t,client:e,request:s})}if(void 0!==r?.fees?.defaultPriorityFee)return r?.fees?.defaultPriorityFee;try{const t=await e.request({method:"eth_maxPriorityFeePerGas"});return(0,Fi.y_)(t)}catch{const[t,r]=await Promise.all([n?Promise.resolve(n):la(e),ua(e)]);if("bigint"!=typeof t.baseFeePerGas)throw new ra;const s=r-t.baseFeePerGas;return s<0n?0n:s}}async function da(e,t){const{block:n,chain:r=e.chain,request:s,type:i="eip1559"}=t||{},a=await(async()=>"function"==typeof r?.fees?.baseFeeMultiplier?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(a<1)throw new na;const o=10**(a.toString().split(".")[1]?.length??0),c=e=>e*BigInt(Math.ceil(a*o))/BigInt(o),l=n||await la(e);if("function"==typeof r?.fees?.estimateFeesPerGas)return r.fees.estimateFeesPerGas({block:n,client:e,multiply:c,request:s,type:i});if("eip1559"===i){if("bigint"!=typeof l.baseFeePerGas)throw new ra;const t=s?.maxPriorityFeePerGas?s.maxPriorityFeePerGas:await ha(e,{block:l,chain:r,request:s}),n=c(l.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??n+t,maxPriorityFeePerGas:t}}return{gasPrice:s?.gasPrice??c(await ua(e))}}var fa=n(9625);class pa extends hi.G{constructor(e,{account:t,docsPath:n,chain:r,data:s,gas:i,gasPrice:a,maxFeePerGas:o,maxPriorityFeePerGas:c,nonce:l,to:u,value:h}){const d=(0,Qi.xr)({from:t?.address,to:u,value:void 0!==h&&`${(0,fa.d)(h)} ${r?.nativeCurrency.symbol||"ETH"}`,data:s,gas:i,gasPrice:void 0!==a&&`${(0,ta.o)(a)} gwei`,maxFeePerGas:void 0!==o&&`${(0,ta.o)(o)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${(0,ta.o)(c)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",d].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}async function ga(e,t){const n=t.account??e.account;if(!n)throw new Vi({docsPath:"/docs/actions/public/estimateGas"});const r=(0,Ui.T)(n);try{const{accessList:n,blockNumber:s,blockTag:i,data:a,gas:o,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:h,to:d,value:f,...p}="local"===r.type?await ya(e,t):t,g=(s?(0,Gi.eC)(s):void 0)||i;(0,ea.F)(t);const m=e.chain?.formatters?.transactionRequest?.format||Xi.tG,y=m({...(0,Zi.K)(p,{format:m}),from:r.address,accessList:n,data:a,gas:o,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:h,to:d,value:f}),b=await e.request({method:"eth_estimateGas",params:g?[y,g]:[y]});return BigInt(b)}catch(n){throw function(e,{docsPath:t,...n}){const r=(()=>{const t=(0,Yi.k)(e,n);return t instanceof Ji.cj?e:t})();return new pa(r,{docsPath:t,...n})}(n,{...t,account:r,chain:e.chain})}}async function ma(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,r?(0,Gi.eC)(r):n]});return(0,Fi.ly)(s)}async function ya(e,t){const{account:n=e.account,chain:r,gas:s,nonce:i,type:a}=t;if(!n)throw new Vi;const o=(0,Ui.T)(n),c=await la(e,{blockTag:"latest"}),l={...t,from:o.address};if(void 0===i&&(l.nonce=await ma(e,{address:o.address,blockTag:"pending"})),void 0===a)try{l.type=function(e){if(e.type)return e.type;if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new Qi.j3({transaction:e})}(l)}catch{l.type="bigint"==typeof c.baseFeePerGas?"eip1559":"legacy"}if("eip1559"===l.type){const{maxFeePerGas:n,maxPriorityFeePerGas:s}=await da(e,{block:c,chain:r,request:l});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<s)throw new sa({maxPriorityFeePerGas:s});l.maxPriorityFeePerGas=s,l.maxFeePerGas=n}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new ra;const{gasPrice:n}=await da(e,{block:c,chain:r,request:l,type:"legacy"});l.gasPrice=n}return void 0===s&&(l.gas=await ga(e,{...l,account:{address:o.address,type:"json-rpc"}})),(0,ea.F)(l),l}async function ba(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]})}async function wa(e,t){const{account:n=e.account,chain:r=e.chain,accessList:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d,...f}=t;if(!n)throw new Vi({docsPath:"/docs/actions/wallet/sendTransaction"});const p=(0,Ui.T)(n);try{let n;if((0,ea.F)(t),null!==r&&(n=await $i(e),(0,ti.qg)({currentChainId:n,chain:r})),"local"===p.type){const t=await ya(e,{account:p,accessList:s,chain:r,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d,...f});n||(n=await $i(e));const g=r?.serializers?.transaction,m=await p.signTransaction({...t,chainId:n},{serializer:g});return await ba(e,{serializedTransaction:m})}const g=r?.formatters?.transactionRequest?.format||Xi.tG,m=g({...(0,Zi.K)(f,{format:g}),accessList:s,data:i,from:p.address,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d});return await e.request({method:"eth_sendTransaction",params:[m]})}catch(e){throw function(e,{docsPath:t,...n}){const r=(()=>{const t=(0,Yi.k)(e,n);return t instanceof Ji.cj?e:t})();return new Qi.mk(r,{docsPath:t,...n})}(e,{...t,account:p,chain:t.chain||void 0})}}var va=n(5102),Aa=n(6070),Ea=n(6087),ka=n(9321),_a=n(9135);const xa=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Pa=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ca({domain:e,message:t,primaryType:n,types:r}){const s=r,i=(e,t)=>{for(const n of e){const{name:e,type:r}=n,a=r,o=t[e],c=a.match(Pa);if(c&&("number"==typeof o||"bigint"==typeof o)){const[e,t,n]=c;(0,Gi.eC)(o,{signed:"int"===t,size:parseInt(n)/8})}if("address"===a&&"string"==typeof o&&!(0,ka.U)(o))throw new Ea.b({address:o});const l=a.match(xa);if(l){const[e,t]=l;if(t&&(0,_a.d)(o)!==parseInt(t))throw new Hi.KY({expectedSize:parseInt(t),givenSize:(0,_a.d)(o)})}const u=s[a];u&&i(u,o)}};if(s.EIP712Domain&&e&&i(s.EIP712Domain,e),"EIP712Domain"!==n){const e=s[n];i(e,t)}}function Sa({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}var Ia=n(7799);function Oa(e){return{addChain:t=>async function(e,{chain:t}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:a}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:(0,Gi.eC)(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:a?Object.values(a).map((({url:e})=>e)):void 0}]})}(e,t),deployContract:t=>function(e,{abi:t,args:n,bytecode:r,...s}){return wa(e,{...s,data:Ki({abi:t,args:n,bytecode:r})})}(e,t),getAddresses:()=>async function(e){return(await e.request({method:"eth_accounts"})).map((e=>(0,ui.x)(e)))}(e),getChainId:()=>$i(e),getPermissions:()=>async function(e){return await e.request({method:"wallet_getPermissions"})}(e),prepareTransactionRequest:t=>ya(e,t),requestAddresses:()=>async function(e){return(await e.request({method:"eth_requestAccounts"})).map((e=>(0,ui.K)(e)))}(e),requestPermissions:t=>async function(e,t){return e.request({method:"wallet_requestPermissions",params:[t]})}(e,t),sendRawTransaction:t=>ba(e,t),sendTransaction:t=>wa(e,t),signMessage:t=>async function(e,{account:t=e.account,message:n}){if(!t)throw new Vi({docsPath:"/docs/actions/wallet/signMessage"});const r=(0,Ui.T)(t);if("local"===r.type)return r.signMessage({message:n});const s="string"==typeof n?(0,Gi.$G)(n):n.raw instanceof Uint8Array?(0,Gi.NC)(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,r.address]})}(e,t),signTransaction:t=>async function(e,t){const{account:n=e.account,chain:r=e.chain,...s}=t;if(!n)throw new Vi({docsPath:"/docs/actions/wallet/signTransaction"});const i=(0,Ui.T)(n);(0,ea.F)({account:i,...t});const a=await $i(e);null!==r&&(0,ti.qg)({currentChainId:a,chain:r});const o=r?.formatters||e.chain?.formatters,c=o?.transactionRequest?.format||Xi.tG;return"local"===i.type?i.signTransaction({chainId:a,...s},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(s),chainId:(0,Gi.eC)(a),from:i.address}]})}(e,t),signTypedData:t=>async function(e,{account:t=e.account,domain:n,message:r,primaryType:s,types:i}){if(!t)throw new Vi({docsPath:"/docs/actions/wallet/signTypedData"});const a=(0,Ui.T)(t),o={EIP712Domain:Sa({domain:n}),...i};if(Ca({domain:n,message:r,primaryType:s,types:o}),"local"===a.type)return a.signTypedData({domain:n,primaryType:s,types:o,message:r});const c=(0,Aa.P)({domain:n??{},primaryType:s,types:o,message:r},((e,t)=>(0,va.v)(t)?t.toLowerCase():t));return e.request({method:"eth_signTypedData_v4",params:[a.address,c]})}(e,t),switchChain:t=>async function(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,Gi.eC)(t)}]})}(e,t),watchAsset:t=>async function(e,t){return await e.request({method:"wallet_watchAsset",params:t})}(e,t),writeContract:t=>async function(e,{abi:t,address:n,args:r,dataSuffix:s,functionName:i,...a}){const o=(0,Ia.R)({abi:t,args:r,functionName:i});return await wa(e,{data:`${o}${s?s.replace("0x",""):""}`,to:n,...a})}(e,t)}}function Ta(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return Di({...e,key:t,name:n,transport:e=>r({...e,retryCount:0}),type:"walletClient"}).extend(Oa)}async function Na(e){return new Promise((t=>setTimeout(t,e)))}function ja(e,{delay:t=100,retryCount:n=2,shouldRetry:r=(()=>!0)}={}){return new Promise(((s,i)=>{const a=async({count:o=0}={})=>{try{const t=await e();s(t)}catch(e){if(o<n&&await r({count:o,error:e}))return(async({error:e})=>{const n="function"==typeof t?t({count:o,error:e}):t;n&&await Na(n),a({count:o+1})})({error:e});i(e)}};a()}))}const Ua=e=>"code"in e?-1!==e.code&&-32004!==e.code&&-32005!==e.code&&-32042!==e.code&&-32603!==e.code:!!(e instanceof di.Gg&&e.status)&&(403!==e.status&&408!==e.status&&413!==e.status&&429!==e.status&&500!==e.status&&502!==e.status&&503!==e.status&&504!==e.status);function La(e,{retryDelay:t=150,retryCount:n=3}={}){return async r=>ja((async()=>{try{return await e(r)}catch(e){const t=e;switch(t.code){case gi.code:throw new gi(t);case mi.code:throw new mi(t);case yi.code:throw new yi(t);case bi.code:throw new bi(t);case wi.code:throw new wi(t);case vi.code:throw new vi(t);case Ai.code:throw new Ai(t);case Ei.code:throw new Ei(t);case ki.code:throw new ki(t);case _i.code:throw new _i(t);case xi.code:throw new xi(t);case Pi.code:throw new Pi(t);case Ci.code:throw new Ci(t);case Si.code:throw new Si(t);case Ii.code:throw new Ii(t);case Oi.code:throw new Oi(t);case Ti.code:throw new Ti(t);case Ni.code:throw new Ni(t);case 5e3:throw new Ci(t);default:if(e instanceof hi.G)throw e;throw new ji(t)}}}),{delay:({count:e,error:n})=>{if(n&&n instanceof di.Gg){const e=n?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*parseInt(e)}return~~(1<<e)*t},retryCount:n,shouldRetry:({error:e})=>!Ua(e)})}function Ra({key:e,name:t,request:n,retryCount:r=3,retryDelay:s=150,timeout:i,type:a},o){return{config:{key:e,name:t,request:n,retryCount:r,retryDelay:s,timeout:i,type:a},request:La(n,{retryCount:r,retryDelay:s}),value:o}}function Ba(e,t={}){const{key:n="custom",name:r="Custom Provider",retryDelay:s}=t;return({retryCount:i})=>Ra({key:n,name:r,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:s,type:"custom"})}var Ma,Da=class extends li{constructor({chains:e,options:t}={}){const n={shimDisconnect:!0,getProvider(){if("undefined"==typeof window)return;const e=window.ethereum;return e?.providers?e.providers[0]:e},...t};super({chains:e,options:n}),this.id="injected",ai(this,Ma,void 0),this.shimDisconnectKey=`${this.id}.shimDisconnect`,this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,ui.K)(e[0])})},this.onChainChanged=e=>{const t=Xs(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=async e=>{if(1013===e.code){if(await this.getProvider()){if(await this.getAccount())return}}this.emit("disconnect"),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey)};const r=n.getProvider();if("string"==typeof n.name)this.name=n.name;else if(r){const e=function(e){if(!e)return"Injected";const t=e=>e.isApexWallet?"Apex Wallet":e.isAvalanche?"Core Wallet":e.isBackpack?"Backpack":e.isBifrost?"Bifrost Wallet":e.isBitKeep?"BitKeep":e.isBitski?"Bitski":e.isBlockWallet?"BlockWallet":e.isBraveWallet?"Brave Wallet":e.isCoin98?"Coin98 Wallet":e.isCoinbaseWallet?"Coinbase Wallet":e.isDawn?"Dawn Wallet":e.isDefiant?"Defiant":e.isDesig?"Desig Wallet":e.isEnkrypt?"Enkrypt":e.isExodus?"Exodus":e.isFordefi?"Fordefi":e.isFrame?"Frame":e.isFrontier?"Frontier Wallet":e.isGamestop?"GameStop Wallet":e.isHaqqWallet?"HAQQ Wallet":e.isHyperPay?"HyperPay Wallet":e.isImToken?"ImToken":e.isHaloWallet?"Halo Wallet":e.isKuCoinWallet?"KuCoin Wallet":e.isMathWallet?"MathWallet":e.isNovaWallet?"Nova Wallet":e.isOkxWallet||e.isOKExWallet?"OKX Wallet":e.isOneInchIOSWallet||e.isOneInchAndroidWallet?"1inch Wallet":e.isOpera?"Opera":e.isPhantom?"Phantom":e.isPortal?"Ripio Portal":e.isRabby?"Rabby Wallet":e.isRainbow?"Rainbow":e.isStatus?"Status":e.isSubWallet?"SubWallet":e.isTalisman?"Talisman":e.isTally?"Taho":e.isTokenPocket?"TokenPocket":e.isTokenary?"Tokenary":e.isTrust||e.isTrustWallet?"Trust Wallet":e.isTTWallet?"TTWallet":e.isXDEFI?"XDEFI Wallet":e.isZeal?"Zeal":e.isZerion?"Zerion":e.isMetaMask?"MetaMask":void 0;if(e.providers?.length){const n=new Set;let r=1;for(const s of e.providers){let e=t(s);e||(e=`Unknown Wallet #${r}`,r+=1),n.add(e)}const s=[...n];return s.length?s:s[0]??"Injected"}return t(e)??"Injected"}(r);n.name?this.name=n.name(e):this.name="string"==typeof e?e:e[0]}else this.name="Injected";this.ready=!!r}async connect({chainId:e}={}){try{const t=await this.getProvider();if(!t)throw new Zs;t.on&&(t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect)),this.emit("message",{type:"connecting"});const n=await t.request({method:"eth_requestAccounts"}),r=(0,ui.K)(n[0]);let s=await this.getChainId(),i=this.isChainUnsupported(s);if(e&&s!==e){s=(await this.switchChain(e)).id,i=this.isChainUnsupported(s)}return this.options.shimDisconnect&&this.storage?.setItem(this.shimDisconnectKey,!0),{account:r,chain:{id:s,unsupported:i}}}catch(e){if(this.isUserRejectedRequestError(e))throw new Ci(e);if(-32002===e.code)throw new Ei(e);throw e}}async disconnect(){const e=await this.getProvider();e?.removeListener&&(e.removeListener("accountsChanged",this.onAccountsChanged),e.removeListener("chainChanged",this.onChainChanged),e.removeListener("disconnect",this.onDisconnect),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey))}async getAccount(){const e=await this.getProvider();if(!e)throw new Zs;const t=await e.request({method:"eth_accounts"});return(0,ui.K)(t[0])}async getChainId(){const e=await this.getProvider();if(!e)throw new Zs;return e.request({method:"eth_chainId"}).then(Xs)}async getProvider(){const e=this.options.getProvider();return e&&oi(this,Ma,e),ii(this,Ma)}async getWalletClient({chainId:e}={}){const[t,n]=await Promise.all([this.getProvider(),this.getAccount()]),r=this.chains.find((t=>t.id===e));if(!t)throw new Error("provider is required.");return Ta({account:n,chain:r,transport:Ba(t)})}async isAuthorized(){try{if(this.options.shimDisconnect&&!this.storage?.getItem(this.shimDisconnectKey))return!1;if(!await this.getProvider())throw new Zs;return!!await this.getAccount()}catch{return!1}}async switchChain(e){const t=await this.getProvider();if(!t)throw new Zs;const n=(0,Gi.eC)(e);try{return await Promise.all([t.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}),new Promise((t=>this.on("change",(({chain:n})=>{n?.id===e&&t()}))))]),this.chains.find((t=>t.id===e))??{id:e,name:`Chain ${n}`,network:`${n}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}}}catch(r){const s=this.chains.find((t=>t.id===e));if(!s)throw new Ys({chainId:e,connectorId:this.id});if(4902===r.code||4902===r?.data?.originalError?.code)try{await t.request({method:"wallet_addEthereumChain",params:[{chainId:n,chainName:s.name,nativeCurrency:s.nativeCurrency,rpcUrls:[s.rpcUrls.public?.http[0]??""],blockExplorerUrls:this.getBlockExplorerUrls(s)}]});if(await this.getChainId()!==e)throw new Ci(new Error("User rejected switch after adding network."));return s}catch(e){throw new Ci(e)}if(this.isUserRejectedRequestError(r))throw new Ci(r);throw new Ni(r)}}async watchAsset({address:e,decimals:t=18,image:n,symbol:r}){const s=await this.getProvider();if(!s)throw new Zs;return s.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e,decimals:t,image:n,symbol:r}}})}isUserRejectedRequestError(e){return 4001===e.code}};Ma=new WeakMap;var Fa=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},$a=(e,t,n)=>(Fa(e,t,"read from private field"),n?n.call(e):t.get(e)),Ga=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ha=(e,t,n,r)=>(Fa(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),za=n(6693),Wa=n(7210),qa=n(1836),Ka=n(1746),Va=n(5980);function Ja(e,t){if(!(e instanceof hi.G))return!1;const n=e.walk((e=>e instanceof Va.Lu));return n instanceof Va.Lu&&("ResolverNotFound"===n.data?.errorName||("ResolverWildcardNotSupported"===n.data?.errorName||(!!n.reason?.includes("Wildcard on non-extended resolvers is not supported")||"reverse"===t&&n.reason===Ka.$[50])))}var Qa=n(1187),Ya=n(4813);function Za(e){if(66!==e.length)return null;if(0!==e.indexOf("["))return null;if(65!==e.indexOf("]"))return null;const t=`0x${e.slice(1,65)}`;return(0,va.v)(t)?t:null}function Xa(e){let t=new Uint8Array(32).fill(0);if(!e)return(0,Gi.ci)(t);const n=e.split(".");for(let e=n.length-1;e>=0;e-=1){const r=Za(n[e]),s=r?(0,Qa.O0)(r):(0,Ya.w)((0,Qa.qX)(n[e]),"bytes");t=(0,Ya.w)((0,zi.zo)([t,s]),"bytes")}return(0,Gi.ci)(t)}function eo(e){return`[${e.slice(2)}]`}function to(e){const t=new Uint8Array(32).fill(0);return e?Za(e)||(0,Ya.w)((0,Qa.qX)(e)):(0,Gi.ci)(t)}function no(e){const t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);const n=new Uint8Array((0,Qa.qX)(t).byteLength+2);let r=0;const s=t.split(".");for(let e=0;e<s.length;e++){let t=(0,Qa.qX)(s[e]);t.byteLength>255&&(t=(0,Qa.qX)(eo(to(s[e])))),n[r]=t.length,n.set(t,r+1),r+=t.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const ro=3;function so(e,{abi:t,address:n,args:r,docsPath:s,functionName:i,sender:a}){const{code:o,data:c,message:l,shortMessage:u}=e instanceof Va.VQ?e:e instanceof hi.G?e.walk((e=>"data"in e))||e.walk():{},h=e instanceof Hi.wb?new Va.Dk({functionName:i}):[ro,wi.code].includes(o)&&(c||l||u)?new Va.Lu({abi:t,data:"object"==typeof c?c.data:c,functionName:i,message:u??l}):e;return new Va.uq(h,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:i,sender:a})}var io=n(6143);async function ao(e,{abi:t,address:n,args:r,functionName:s,...i}){const a=(0,Ia.R)({abi:t,args:r,functionName:s});try{const{data:o}=await(0,io.R)(e,{data:a,to:n,...i});return(0,Wa.k)({abi:t,args:r,functionName:s,data:o||"0x"})}catch(e){throw so(e,{abi:t,address:n,args:r,docsPath:"/docs/contract/readContract",functionName:s})}}class oo extends hi.G{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class co extends hi.G{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class lo extends hi.G{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class uo extends hi.G{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const ho=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,fo=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,po=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,go=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;function mo(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function yo({uri:e,gatewayUrls:t}){const n=po.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=mo(t?.ipfs,"https://ipfs.io"),s=mo(t?.arweave,"https://arweave.net"),i=e.match(ho),{protocol:a,subpath:o,target:c,subtarget:l=""}=i?.groups||{},u="ipns:/"===a||"ipns/"===o,h="ipfs:/"===a||"ipfs/"===o||fo.test(e);if(e.startsWith("http")&&!u&&!h){let n=e;return t?.arweave&&(n=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:n,isOnChain:!1,isEncoded:!1}}if((u||h)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if("ar:/"===a&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let d=e.replace(go,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new lo({uri:e})}function bo(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new oo({data:e});return e.image||e.image_url||e.image_data}async function wo({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=yo({uri:t,gatewayUrls:e});if(r)return n;const s=await async function(e){try{const t=await fetch(e,{method:"HEAD"});if(200===t.status){const e=t.headers.get("content-type");return e?.startsWith("image/")}return!1}catch(t){return("object"!=typeof t||void 0===t.response)&&!!globalThis.hasOwnProperty("Image")&&new Promise((t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e}))}}(n);if(s)return n;throw new lo({uri:t})}async function vo(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?async function(e,{gatewayUrls:t,record:n}){const r=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[i,a]=n.split(":"),[o,c]=r.split(":");if(!i||"eip155"!==i.toLowerCase())throw new co({reason:"Only EIP-155 supported"});if(!a)throw new co({reason:"Chain ID not found"});if(!c)throw new co({reason:"Contract address not found"});if(!s)throw new co({reason:"Token ID not found"});if(!o)throw new co({reason:"ERC namespace not found"});return{chainID:parseInt(a),namespace:o.toLowerCase(),contractAddress:c,tokenID:s}}(n),s=await async function(e,{nft:t}){if("erc721"===t.namespace)return ao(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return ao(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new uo({namespace:t.namespace})}(e,{nft:r}),{uri:i,isOnChain:a,isEncoded:o}=yo({uri:s,gatewayUrls:t});if(a&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const e=o?atob(i.replace("data:application/json;base64,","")):i;return wo({uri:bo(JSON.parse(e)),gatewayUrls:t})}let c=r.tokenID;"erc1155"===r.namespace&&(c=c.replace("0x","").padStart(64,"0"));return async function({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then((e=>e.json()));return await wo({gatewayUrls:e,uri:bo(n)})}catch{throw new lo({uri:t})}}({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,c)})}(e,{gatewayUrls:t,record:n}):wo({uri:n,gatewayUrls:t})}async function Ao(e,{blockNumber:t,blockTag:n,name:r,key:s,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=(0,ti.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=await ao(e,{address:a,abi:za.k3,functionName:"resolve",args:[(0,Gi.NC)(no(r)),(0,Ia.R)({abi:za.nZ,functionName:"text",args:[Xa(r),s]})],blockNumber:t,blockTag:n});if("0x"===i[0])return null;const o=(0,Wa.k)({abi:za.nZ,functionName:"text",data:i[0]});return""===o?null:o}catch(e){if(Ja(e,"resolve"))return null;throw e}}function Eo(e,{method:t}){const n={};return"fallback"===e.transport.type&&e.transport.onResponse?.((({method:e,response:r,status:s,transport:i})=>{"success"===s&&t===e&&(n[r]=i.request)})),t=>n[t]||e.request}class ko extends hi.G{constructor(e){super(`Filter type "${e}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}var _o=n(4092),xo=n(522),Po=n(840);function Co({abi:e,eventName:t,args:n}){let r=e[0];if(t&&(r=(0,Po.m)({abi:e,args:n,name:t}),!r))throw new Hi.mv(t,{docsPath:"/docs/contract/encodeEventTopics"});if("event"!==r.type)throw new Hi.mv(void 0,{docsPath:"/docs/contract/encodeEventTopics"});const s=(0,xo.t)(r),i=(0,_o.e)(s);let a=[];if(n&&"inputs"in r){const e=r.inputs?.filter((e=>"indexed"in e&&e.indexed)),t=Array.isArray(n)?n:Object.values(n).length>0?e?.map((e=>n[e.name]))??[]:[];t.length>0&&(a=e?.map(((e,n)=>Array.isArray(t[n])?t[n].map(((r,s)=>So({param:e,value:t[n][s]}))):t[n]?So({param:e,value:t[n]}):null))??[])}return[i,...a]}function So({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,Ya.w)((0,Qa.O0)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new ko(e.type);return(0,Wi.E)([e],[t])}async function Io(e,{address:t,abi:n,args:r,eventName:s,fromBlock:i,strict:a,toBlock:o}){const c=Eo(e,{method:"eth_newFilter"}),l=s?Co({abi:n,args:r,eventName:s}):void 0,u=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?(0,Gi.eC)(i):i,toBlock:"bigint"==typeof o?(0,Gi.eC)(o):o,topics:l}]});return{abi:n,args:r,eventName:s,id:u,request:c(u),strict:a,type:"event"}}async function Oo(e,{address:t,args:n,event:r,events:s,fromBlock:i,strict:a,toBlock:o}={}){const c=s??(r?[r]:void 0),l=Eo(e,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap((e=>Co({abi:[e],eventName:e.name,args:n})))],r&&(u=u[0]));const h=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?(0,Gi.eC)(i):i,toBlock:"bigint"==typeof o?(0,Gi.eC)(o):o,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:h,request:l(h),strict:a,toBlock:o,type:"event"}}async function To(e){const t=Eo(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}const No=new Map,jo=new Map;async function Uo(e,{cacheKey:t,cacheTime:n=1/0}){const r=function(e){const t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:n=>t.set(e,n)}),n=t(e,No),r=t(e,jo);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}(t),s=r.response.get();if(s&&n>0){if((new Date).getTime()-s.created.getTime()<n)return s.data}let i=r.promise.get();i||(i=e(),r.promise.set(i));try{const e=await i;return r.response.set({created:new Date,data:e}),e}finally{r.promise.clear()}}const Lo=e=>`blockNumber.${e}`;async function Ro(e,{cacheTime:t=e.cacheTime,maxAge:n}={}){const r=await Uo((()=>e.request({method:"eth_blockNumber"})),{cacheKey:Lo(e.uid),cacheTime:n??t});return BigInt(r)}var Bo=n(4450);const Mo="/docs/contract/decodeEventLog";function Do({abi:e,data:t,strict:n,topics:r}){const s=n??!0,[i,...a]=r;if(!i)throw new Hi.FM({docsPath:Mo});const o=e.find((e=>"event"===e.type&&i===(0,_o.e)((0,xo.t)(e))));if(!o||!("name"in o)||"event"!==o.type)throw new Hi.lC(i,{docsPath:Mo});const{name:c,inputs:l}=o,u=l?.some((e=>!("name"in e&&e.name)));let h=u?[]:{};const d=l.filter((e=>"indexed"in e&&e.indexed));if(a.length>0)for(let e=0;e<d.length;e++){const t=d[e],n=a[e];if(!n)throw new Hi.Gy({abiItem:o,param:t});h[t.name||e]=Fo({param:t,value:n})}const f=l.filter((e=>!("indexed"in e&&e.indexed)));if(f.length>0)if(t&&"0x"!==t)try{const e=(0,Bo.r)(f,t);if(e)if(u)h=[...h,...e];else for(let t=0;t<f.length;t++)h[f[t].name]=e[t]}catch(e){if(s){if(e instanceof Hi.xB)throw new Hi.SM({abiItem:o,data:e.data,params:e.params,size:e.size});throw e}}else if(s)throw new Hi.SM({abiItem:o,data:"0x",params:f,size:0});return{eventName:c,args:Object.values(h).length>0?h:void 0}}function Fo({param:e,value:t}){if("string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))return t;return((0,Bo.r)([e],t)||[])[0]}function $o(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function Go(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:i,events:a,args:o,strict:c}={}){const l=c??!1,u=a??(i?[i]:void 0);let h,d=[];return u&&(d=[u.flatMap((e=>Co({abi:[e],eventName:e.name,args:o})))],i&&(d=d[0])),h=n?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof r?(0,Gi.eC)(r):r,toBlock:"bigint"==typeof s?(0,Gi.eC)(s):s}]}),h.map((e=>{try{const{eventName:t,args:n}=u?Do({abi:u,data:e.data,topics:e.topics,strict:l}):{eventName:void 0,args:void 0};return $o(e,{args:n,eventName:t})}catch(t){let n,r;if(t instanceof Hi.SM||t instanceof Hi.Gy){if(l)return;n=t.abiItem.name,r=t.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return $o(e,{args:r?[]:{},eventName:n})}})).filter(Boolean)}async function Ho(e,{abi:t,address:n,args:r,blockHash:s,eventName:i,fromBlock:a,toBlock:o,strict:c}){const l=i?(0,Po.m)({abi:t,name:i}):void 0;return Go(e,{address:n,args:r,blockHash:s,event:l,events:l?void 0:t.filter((e=>"event"===e.type)),fromBlock:a,toBlock:o,strict:c})}async function zo(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=n?(0,Gi.eC)(n):void 0;return function(e){return{baseFeePerGas:e.baseFeePerGas.map((e=>BigInt(e))),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map((e=>e.map((e=>BigInt(e)))))}}(await e.request({method:"eth_feeHistory",params:[(0,Gi.eC)(t),i||r,s]}))}async function Wo(e,{filter:t}){const n="strict"in t&&t.strict;return(await t.request({method:"eth_getFilterChanges",params:[t.id]})).map((e=>{if("string"==typeof e)return e;try{const{eventName:r,args:s}="abi"in t&&t.abi?Do({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return $o(e,{args:s,eventName:r})}catch(n){let r,s;if(n instanceof Hi.SM||n instanceof Hi.Gy){if("strict"in t&&t.strict)return;r=n.abiItem.name,s=n.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return $o(e,{args:s?[]:{},eventName:r})}})).filter(Boolean)}async function qo(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:i}){const a=r||"latest",o=void 0!==n?(0,Gi.eC)(n):void 0;let c=null;if(s?c=await e.request({method:"eth_getTransactionByHash",params:[s]}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,(0,Gi.eC)(i)]}):(o||a)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||a,(0,Gi.eC)(i)]})),!c)throw new Qi.Bh({blockHash:t,blockNumber:n,blockTag:a,hash:s,index:i});return(e.chain?.formatters?.transaction?.format||oa)(c)}const Ko={"0x0":"reverted","0x1":"success"};function Vo(e){return{...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>$o(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?(0,Fi.ly)(e.transactionIndex):null,status:e.status?Ko[e.status]:null,type:e.type?aa[e.type]||e.type:null}}async function Jo(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]});if(!n)throw new Qi.Yb({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Vo)(n)}async function Qo(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}const Yo="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";BigInt(0),BigInt(1),BigInt(2);async function Zo(e,{address:t,hash:n,signature:r,...s}){const i=(0,va.v)(r)?r:(0,Gi.NC)(r);try{const{data:r}=await(0,io.R)(e,{data:Ki({abi:za.$o,args:[t,n,i],bytecode:Yo}),...s});return a=r??"0x0",o="0x1",function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}((0,va.v)(a)?(0,Qa.O0)(a):a,(0,va.v)(o)?(0,Qa.O0)(o):o)}catch(e){if(e instanceof Va.cg)return!1;throw e}var a,o}async function Xo(e,{address:t,message:n,signature:r,...s}){const i=function(e,t){const n="string"==typeof e?(0,Qa.qX)(e):e.raw instanceof Uint8Array?e.raw:(0,Qa.O0)(e.raw),r=(0,Qa.qX)(`Ethereum Signed Message:\n${n.length}`);return(0,Ya.w)((0,zi.zo)([r,n]),t)}(n);return Zo(e,{address:t,hash:i,signature:r,...s})}function ec({domain:e,message:t,primaryType:n,types:r}){const s=void 0===e?{}:e,i={EIP712Domain:Sa({domain:s}),...r};Ca({domain:s,message:t,primaryType:n,types:i});const a=["0x1901"];return s&&a.push(function({domain:e,types:t}){return tc({data:e,primaryType:"EIP712Domain",types:t})}({domain:s,types:i})),"EIP712Domain"!==n&&a.push(tc({data:t,primaryType:n,types:i})),(0,Ya.w)((0,zi.zo)(a))}function tc({data:e,primaryType:t,types:n}){const r=nc({data:e,primaryType:t,types:n});return(0,Ya.w)(r)}function nc({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[rc({primaryType:t,types:n})];for(const i of n[t]){const[t,a]=ic({types:n,name:i.name,type:i.type,value:e[i.name]});r.push(t),s.push(a)}return(0,Wi.E)(r,s)}function rc({primaryType:e,types:t}){const n=(0,Gi.NC)(function({primaryType:e,types:t}){let n="";const r=sc({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const e of s)n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return n}({primaryType:e,types:t}));return(0,Ya.w)(n)}function sc({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),s=r?.[0];if(n.has(s)||void 0===t[s])return n;n.add(s);for(const e of t[s])sc({primaryType:e.type,types:t},n);return n}function ic({types:e,name:t,type:n,value:r}){if(void 0!==e[n])return[{type:"bytes32"},(0,Ya.w)(nc({data:r,primaryType:n,types:e}))];if("bytes"===n){return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},(0,Ya.w)(r)]}if("string"===n)return[{type:"bytes32"},(0,Ya.w)((0,Gi.NC)(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map((n=>ic({name:t,type:s,types:e,value:n})));return[{type:"bytes32"},(0,Ya.w)((0,Wi.E)(i.map((([e])=>e)),i.map((([,e])=>e))))]}return[{type:n},r]}const ac=new Map,oc=new Map;let cc=0;function lc(e,t,n){const r=++cc,s=()=>ac.get(e)||[],i=()=>{const t=oc.get(e);1===s().length&&t&&t(),(()=>{const t=s();ac.set(e,t.filter((e=>e.id!==r)))})()},a=s();if(ac.set(e,[...a,{id:r,fns:t}]),a&&a.length>0)return i;const o={};for(const e in t)o[e]=(...t)=>{const n=s();0!==n.length&&n.forEach((n=>n.fns[e]?.(...t)))};const c=n(o);return"function"==typeof c&&oc.set(e,c),i}function uc(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;t&&(a=await e({unpoll:i}));const o=await(n?.(a))??r;await Na(o);const c=async()=>{s&&(await e({unpoll:i}),await Na(r),c())};c()})(),i}function hc(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:a=e.pollingInterval}){let o;return(void 0!==i?i:"webSocket"!==e.transport.type)?lc((0,Aa.P)(["watchBlockNumber",e.uid,t,n,a]),{onBlockNumber:r,onError:s},(r=>uc((async()=>{try{const t=await Ro(e,{cacheTime:0});if(o){if(t===o)return;if(t-o>1&&n)for(let e=o+1n;e<t;e++)r.onBlockNumber(e,o),o=e}(!o||t>o)&&(r.onBlockNumber(t,o),o=t)}catch(e){r.onError?.(e)}}),{emitOnBegin:t,interval:a}))):(()=>{let t=!0,n=()=>t=!1;return(async()=>{try{const{unsubscribe:i}=await e.transport.subscribe({params:["newHeads"],onData(e){if(!t)return;const n=(0,Fi.y_)(e.result?.number);r(n,o),o=n},onError(e){s?.(e)}});n=i,t||n()}catch(e){s?.(e)}})(),n})()}function dc(e){return{call:t=>(0,io.R)(e,t),createBlockFilter:()=>async function(e){const t=Eo(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}(e),createContractEventFilter:t=>Io(e,t),createEventFilter:t=>Oo(e,t),createPendingTransactionFilter:()=>To(e),estimateContractGas:t=>async function(e,{abi:t,address:n,args:r,functionName:s,...i}){const a=(0,Ia.R)({abi:t,args:r,functionName:s});try{return await ga(e,{data:a,to:n,...i})}catch(e){const a=i.account?(0,Ui.T)(i.account):void 0;throw so(e,{abi:t,address:n,args:r,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:a?.address})}}(e,t),estimateGas:t=>ga(e,t),getBalance:t=>async function(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n?(0,Gi.eC)(n):void 0,i=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(i)}(e,t),getBlock:t=>la(e,t),getBlockNumber:t=>Ro(e,t),getBlockTransactionCount:t=>async function(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=void 0!==n?(0,Gi.eC)(n):void 0;let i;return i=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]}),(0,Fi.ly)(i)}(e,t),getBytecode:t=>async function(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=void 0!==n?(0,Gi.eC)(n):void 0,i=await e.request({method:"eth_getCode",params:[t,s||r]});if("0x"!==i)return i}(e,t),getChainId:()=>$i(e),getContractEvents:t=>Ho(e,t),getEnsAddress:t=>async function(e,{blockNumber:t,blockTag:n,coinType:r,name:s,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=(0,ti.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=(0,Ia.R)({abi:za.X$,functionName:"addr",...null!=r?{args:[Xa(s),BigInt(r)]}:{args:[Xa(s)]}}),o=await ao(e,{address:a,abi:za.k3,functionName:"resolve",args:[(0,Gi.NC)(no(s)),i],blockNumber:t,blockTag:n});if("0x"===o[0])return null;const c=(0,Wa.k)({abi:za.X$,args:null!=r?[Xa(s),BigInt(r)]:void 0,functionName:"addr",data:o[0]});return"0x"===c||"0x00"===(0,qa.f)(c)?null:c}catch(e){if(Ja(e,"resolve"))return null;throw e}}(e,t),getEnsAvatar:t=>async function(e,{blockNumber:t,blockTag:n,gatewayUrls:r,name:s,universalResolverAddress:i}){const a=await Ao(e,{blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:i});if(!a)return null;try{return await vo(e,{record:a,gatewayUrls:r})}catch{return null}}(e,t),getEnsName:t=>async function(e,{address:t,blockNumber:n,blockTag:r,universalResolverAddress:s}){let i=s;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=(0,ti.LI)({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const a=`${t.toLowerCase().substring(2)}.addr.reverse`;try{return(await ao(e,{address:i,abi:za.du,functionName:"reverse",args:[(0,Gi.NC)(no(a))],blockNumber:n,blockTag:r}))[0]}catch(e){if(Ja(e,"reverse"))return null;throw e}}(e,t),getEnsResolver:t=>async function(e,{blockNumber:t,blockTag:n,name:r,universalResolverAddress:s}){let i=s;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=(0,ti.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[a]=await ao(e,{address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,Gi.NC)(no(r))],blockNumber:t,blockTag:n});return a}(e,t),getEnsText:t=>Ao(e,t),getFeeHistory:t=>zo(e,t),estimateFeesPerGas:t=>async function(e,t){return da(e,t)}(e,t),getFilterChanges:e=>Wo(0,e),getFilterLogs:e=>async function(e,{filter:t}){const n=t.strict??!1;return(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map((e=>{try{const{eventName:r,args:s}="abi"in t&&t.abi?Do({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return $o(e,{args:s,eventName:r})}catch(n){let r,s;if(n instanceof Hi.SM||n instanceof Hi.Gy){if("strict"in t&&t.strict)return;r=n.abiItem.name,s=n.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return $o(e,{args:s?[]:{},eventName:r})}})).filter(Boolean)}(0,e),getGasPrice:()=>ua(e),getLogs:t=>Go(e,t),estimateMaxPriorityFeePerGas:t=>async function(e,t){return ha(e,t)}(e,t),getStorageAt:t=>async function(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const i=void 0!==n?(0,Gi.eC)(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,i||r]})}(e,t),getTransaction:t=>qo(e,t),getTransactionConfirmations:t=>async function(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([Ro(e),t?qo(e,{hash:t}):void 0]),i=n?.blockNumber||s?.blockNumber;return i?r-i+1n:0n}(e,t),getTransactionCount:t=>ma(e,t),getTransactionReceipt:t=>Jo(e,t),multicall:t=>async function(e,t){const{allowFailure:n=!0,batchSize:r,blockNumber:s,blockTag:i,contracts:a,multicallAddress:o}=t,c=r??("object"==typeof e.batch?.multicall&&e.batch.multicall.batchSize||1024);let l=o;if(!l){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");l=(0,ti.LI)({blockNumber:s,chain:e.chain,contract:"multicall3"})}const u=[[]];let h=0,d=0;for(let e=0;e<a.length;e++){const{abi:t,address:r,args:s,functionName:i}=a[e];try{const e=(0,Ia.R)({abi:t,args:s,functionName:i});d+=(e.length-2)/2,c>0&&d>c&&u[h].length>0&&(h++,d=(e.length-2)/2,u[h]=[]),u[h]=[...u[h],{allowFailure:!0,callData:e,target:r}]}catch(e){const a=so(e,{abi:t,address:r,args:s,docsPath:"/docs/contract/multicall",functionName:i});if(!n)throw a;u[h]=[...u[h],{allowFailure:!0,callData:"0x",target:r}]}}const f=await Promise.allSettled(u.map((t=>ao(e,{abi:za.F8,address:l,args:[t],blockNumber:s,blockTag:i,functionName:"aggregate3"})))),p=[];for(let e=0;e<f.length;e++){const t=f[e];if("rejected"===t.status){if(!n)throw t.reason;for(let n=0;n<u[e].length;n++)p.push({status:"failure",error:t.reason,result:void 0});continue}const r=t.value;for(let t=0;t<r.length;t++){const{returnData:s,success:i}=r[t],{callData:o}=u[e][t],{abi:c,address:l,functionName:h,args:d}=a[p.length];try{if("0x"===o)throw new Hi.wb;if(!i)throw new Va.VQ({data:s});const e=(0,Wa.k)({abi:c,args:d,data:s,functionName:h});p.push(n?{result:e,status:"success"}:e)}catch(e){const t=so(e,{abi:c,address:l,args:d,docsPath:"/docs/contract/multicall",functionName:h});if(!n)throw t;p.push({error:t,result:void 0,status:"failure"})}}}if(p.length!==a.length)throw new hi.G("multicall results mismatch");return p}(e,t),prepareTransactionRequest:t=>ya(e,t),readContract:t=>ao(e,t),sendRawTransaction:t=>ba(e,t),simulateContract:t=>async function(e,{abi:t,address:n,args:r,dataSuffix:s,functionName:i,...a}){const o=a.account?(0,Ui.T)(a.account):void 0,c=(0,Ia.R)({abi:t,args:r,functionName:i});try{const{data:o}=await(0,io.R)(e,{batch:!1,data:`${c}${s?s.replace("0x",""):""}`,to:n,...a});return{result:(0,Wa.k)({abi:t,args:r,functionName:i,data:o||"0x"}),request:{abi:t,address:n,args:r,dataSuffix:s,functionName:i,...a}}}catch(e){throw so(e,{abi:t,address:n,args:r,docsPath:"/docs/contract/simulateContract",functionName:i,sender:o?.address})}}(e,t),verifyMessage:t=>Xo(e,t),verifyTypedData:t=>async function(e,{address:t,signature:n,message:r,primaryType:s,types:i,domain:a,...o}){return Zo(e,{address:t,hash:ec({message:r,primaryType:s,types:i,domain:a}),signature:n,...o})}(e,t),uninstallFilter:e=>Qo(0,e),waitForTransactionReceipt:t=>async function(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:s=e.pollingInterval,timeout:i}){const a=(0,Aa.P)(["waitForTransactionReceipt",e.uid,n]);let o,c,l,u=!1;return new Promise(((h,d)=>{i&&setTimeout((()=>d(new Qi.mc({hash:n}))),i);const f=lc(a,{onReplaced:r,resolve:h,reject:d},(r=>{const i=hc(e,{emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(s){if(u)return;let a=s;const h=e=>{i(),e(),f()};try{if(l){if(t>1&&(!l.blockNumber||a-l.blockNumber+1n<t))return;return void h((()=>r.resolve(l)))}if(o||(u=!0,await ja((async()=>{o=await qo(e,{hash:n}),o.blockNumber&&(a=o.blockNumber)}),{delay:({count:e})=>200*~~(1<<e),retryCount:6}),u=!1),l=await Jo(e,{hash:n}),t>1&&(!l.blockNumber||a-l.blockNumber+1n<t))return;h((()=>r.resolve(l)))}catch(n){if(o&&(n instanceof Qi.Bh||n instanceof Qi.Yb))try{c=o;const n=(await la(e,{blockNumber:a,includeTransactions:!0})).transactions.find((({from:e,nonce:t})=>e===c.from&&t===c.nonce));if(!n)return;if(l=await Jo(e,{hash:n.hash}),t>1&&(!l.blockNumber||a-l.blockNumber+1n<t))return;let s="replaced";n.to===c.to&&n.value===c.value?s="repriced":n.from===n.to&&0n===n.value&&(s="cancelled"),h((()=>{r.onReplaced?.({reason:s,replacedTransaction:c,transaction:n,transactionReceipt:l}),r.resolve(l)}))}catch(e){h((()=>r.reject(e)))}else h((()=>r.reject(n)))}}})}))}))}(e,t),watchBlocks:t=>function(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:a,poll:o,pollingInterval:c=e.pollingInterval}){const l=void 0!==o?o:"webSocket"!==e.transport.type,u=a??!1;let h;return l?lc((0,Aa.P)(["watchBlocks",e.uid,n,r,u,c]),{onBlock:s,onError:i},(s=>uc((async()=>{try{const r=await la(e,{blockTag:t,includeTransactions:u});if(r.number&&h?.number){if(r.number===h.number)return;if(r.number-h.number>1&&n)for(let t=h?.number+1n;t<r.number;t++){const n=await la(e,{blockNumber:t,includeTransactions:u});s.onBlock(n,h),h=n}}(!h?.number||"pending"===t&&!r?.number||r.number&&r.number>h.number)&&(s.onBlock(r,h),h=r)}catch(e){s.onError?.(e)}}),{emitOnBegin:r,interval:c}))):(()=>{let t=!0,n=()=>t=!1;return(async()=>{try{const{unsubscribe:r}=await e.transport.subscribe({params:["newHeads"],onData(n){if(!t)return;const r=(e.chain?.formatters?.block?.format||ca)(n.result);s(r,h),h=r},onError(e){i?.(e)}});n=r,t||n()}catch(e){i?.(e)}})(),n})()}(e,t),watchBlockNumber:t=>hc(e,t),watchContractEvent:t=>function(e,{abi:t,address:n,args:r,batch:s=!0,eventName:i,onError:a,onLogs:o,poll:c,pollingInterval:l=e.pollingInterval,strict:u}){return(void 0!==c?c:"webSocket"!==e.transport.type)?(()=>{const c=(0,Aa.P)(["watchContractEvent",n,r,s,e.uid,i,l]),h=u??!1;return lc(c,{onLogs:o,onError:a},(a=>{let o,c,u=!1;const d=uc((async()=>{if(u)try{let i;if(c)i=await Wo(0,{filter:c});else{const s=await Ro(e);i=o&&o!==s?await Ho(e,{abi:t,address:n,args:r,fromBlock:o+1n,toBlock:s,strict:h}):[],o=s}if(0===i.length)return;s?a.onLogs(i):i.forEach((e=>a.onLogs([e])))}catch(e){c&&e instanceof vi&&(u=!1),a.onError?.(e)}else{try{c=await Io(e,{abi:t,address:n,args:r,eventName:i,strict:h})}catch{}u=!0}}),{emitOnBegin:!0,interval:l});return async()=>{c&&await Qo(0,{filter:c}),d()}}))})():(()=>{let s=!0,c=()=>s=!1;return(async()=>{try{const l=i?Co({abi:t,eventName:i,args:r}):[],{unsubscribe:h}=await e.transport.subscribe({params:["logs",{address:n,topics:l}],onData(e){if(!s)return;const n=e.result;try{const{eventName:e,args:r}=Do({abi:t,data:n.data,topics:n.topics,strict:u}),s=$o(n,{args:r,eventName:e});o([s])}catch(e){let t,r;if(e instanceof Hi.SM||e instanceof Hi.Gy){if(u)return;t=e.abiItem.name,r=e.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}const s=$o(n,{args:r?[]:{},eventName:t});o([s])}},onError(e){a?.(e)}});c=h,s||c()}catch(e){a?.(e)}})(),c})()}(e,t),watchEvent:t=>function(e,{address:t,args:n,batch:r=!0,event:s,events:i,onError:a,onLogs:o,poll:c,pollingInterval:l=e.pollingInterval,strict:u}){const h=void 0!==c?c:"webSocket"!==e.transport.type,d=u??!1;return h?lc((0,Aa.P)(["watchEvent",t,n,r,e.uid,s,l]),{onLogs:o,onError:a},(a=>{let o,c,u=!1;const h=uc((async()=>{if(u)try{let l;if(c)l=await Wo(0,{filter:c});else{const r=await Ro(e);l=o&&o!==r?await Go(e,{address:t,args:n,event:s,events:i,fromBlock:o+1n,toBlock:r}):[],o=r}if(0===l.length)return;r?a.onLogs(l):l.forEach((e=>a.onLogs([e])))}catch(e){c&&e instanceof vi&&(u=!1),a.onError?.(e)}else{try{c=await Oo(e,{address:t,args:n,event:s,events:i,strict:d})}catch{}u=!0}}),{emitOnBegin:!0,interval:l});return async()=>{c&&await Qo(0,{filter:c}),h()}})):(()=>{let r=!0,c=()=>r=!1;return(async()=>{try{const l=i??(s?[s]:void 0);let h=[];l&&(h=[l.flatMap((e=>Co({abi:[e],eventName:e.name,args:n})))],s&&(h=h[0]));const{unsubscribe:f}=await e.transport.subscribe({params:["logs",{address:t,topics:h}],onData(e){if(!r)return;const t=e.result;try{const{eventName:e,args:n}=Do({abi:l,data:t.data,topics:t.topics,strict:d}),r=$o(t,{args:n,eventName:e});o([r])}catch(e){let n,r;if(e instanceof Hi.SM||e instanceof Hi.Gy){if(u)return;n=e.abiItem.name,r=e.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}const s=$o(t,{args:r?[]:{},eventName:n});o([s])}},onError(e){a?.(e)}});c=f,r||c()}catch(e){a?.(e)}})(),c})()}(e,t),watchPendingTransactions:t=>function(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=e.pollingInterval}){return(void 0!==s?s:"webSocket"!==e.transport.type)?lc((0,Aa.P)(["watchPendingTransactions",e.uid,t,i]),{onTransactions:r,onError:n},(n=>{let r;const s=uc((async()=>{try{if(!r)try{return void(r=await To(e))}catch(e){throw s(),e}const i=await Wo(0,{filter:r});if(0===i.length)return;t?n.onTransactions(i):i.forEach((e=>n.onTransactions([e])))}catch(e){n.onError?.(e)}}),{emitOnBegin:!0,interval:i});return async()=>{r&&await Qo(0,{filter:r}),s()}})):(()=>{let t=!0,s=()=>t=!1;return(async()=>{try{const{unsubscribe:i}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!t)return;const n=e.result;r([n])},onError(e){n?.(e)}});s=i,t||s()}catch(e){n?.(e)}})(),s})()}(e,t)}}function fc(e){const{key:t="public",name:n="Public Client"}=e;return Di({...e,key:t,name:n,type:"publicClient"}).extend(dc)}function pc(e,t={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,retryCount:i,retryDelay:a}=t;return({chain:t,pollingInterval:o=4e3,timeout:c})=>{let l=e,u=()=>{};const h=Ra({key:n,name:r,async request({method:e,params:n}){const r=async(s=0)=>{const i=l[s]({chain:t,retryCount:0,timeout:c});try{const t=await i.request({method:e,params:n});return u({method:e,params:n,response:t,transport:i,status:"success"}),t}catch(t){if(u({error:t,method:e,params:n,transport:i,status:"error"}),Ua(t))throw t;if(s===l.length-1)throw t;return r(s+1)}};return r()},retryCount:i,retryDelay:a,type:"fallback"},{onResponse:e=>u=e,transports:l.map((e=>e({chain:t,retryCount:0})))});if(s){const e="object"==typeof s?s:{};!function({chain:e,interval:t=4e3,onTransports:n,sampleCount:r=10,timeout:s=1e3,transports:i,weights:a={}}){const{stability:o=.7,latency:c=.3}=a,l=[],u=async()=>{const a=await Promise.all(i.map((async t=>{const n=t({chain:e,retryCount:0,timeout:s}),r=Date.now();let i,a;try{await n.request({method:"net_listening"}),a=1}catch{a=0}finally{i=Date.now()}return{latency:i-r,success:a}})));l.push(a),l.length>r&&l.shift();const h=Math.max(...l.map((e=>Math.max(...e.map((({latency:e})=>e)))))),d=i.map(((e,t)=>{const n=l.map((e=>e[t].latency)),r=1-n.reduce(((e,t)=>e+t),0)/n.length/h,s=l.map((e=>e[t].success)),i=s.reduce(((e,t)=>e+t),0)/s.length;return 0===i?[0,t]:[c*r+o*i,t]})).sort(((e,t)=>t[0]-e[0]));n(d.map((([,e])=>i[e]))),await Na(t),u()};u()}({chain:t,interval:e.interval??o,onTransports:e=>l=e,sampleCount:e.sampleCount,timeout:e.timeout,transports:l,weights:e.weights})}return h}}class gc extends hi.G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}var mc=n(2357),yc=null;"undefined"!=typeof WebSocket?yc=WebSocket:"undefined"!=typeof MozWebSocket?yc=MozWebSocket:void 0!==n.g?yc=n.g.WebSocket||n.g.MozWebSocket:"undefined"!=typeof window?yc=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(yc=self.WebSocket||self.MozWebSocket);const bc=yc;function wc(e,{errorInstance:t,timeout:n,signal:r}){return new Promise(((s,i)=>{(async()=>{let a;try{const o=new AbortController;n>0&&(a=setTimeout((()=>{r?o.abort():i(t)}),n)),s(await e({signal:o?.signal}))}catch(e){"AbortError"===e.name&&i(t),i(e)}finally{clearTimeout(a)}})()}))}let vc=0;const Ac=new Map;async function Ec(e){let t=Ac.get(e);if(t)return t;const{schedule:n}=(0,mc.S)({id:e,fn:async()=>{let n=bc;bc.constructor||(n=bc.WebSocket);const r=new n(e),s=new Map,i=new Map,a=({data:e})=>{const t=JSON.parse(e),n="eth_subscription"===t.method,r=n?t.params.subscription:t.id,a=n?i:s,o=a.get(r);o&&o({data:e}),n||a.delete(r)},o=()=>{Ac.delete(e),r.removeEventListener("close",o),r.removeEventListener("message",a)};return r.addEventListener("close",o),r.addEventListener("message",a),r.readyState===bc.CONNECTING&&await new Promise(((e,t)=>{r&&(r.onopen=e,r.onerror=t)})),t=Object.assign(r,{requests:s,subscriptions:i}),Ac.set(e,t),[t]}}),[r,[s]]=await n();return s}const kc={http:async function(e,{body:t,fetchOptions:n={},timeout:r=1e4}){const{headers:s,method:i,signal:a}=n;try{const o=await wc((async({signal:o})=>await fetch(e,{...n,body:Array.isArray(t)?(0,Aa.P)(t.map((e=>({jsonrpc:"2.0",id:e.id??vc++,...e})))):(0,Aa.P)({jsonrpc:"2.0",id:t.id??vc++,...t}),headers:{...s,"Content-Type":"application/json"},method:i||"POST",signal:a||(r>0?o:void 0)})),{errorInstance:new di.W5({body:t,url:e}),timeout:r,signal:!0});let c;if(c=o.headers.get("Content-Type")?.startsWith("application/json")?await o.json():await o.text(),!o.ok)throw new di.Gg({body:t,details:(0,Aa.P)(c.error)||o.statusText,headers:o.headers,status:o.status,url:e});return c}catch(n){if(n instanceof di.Gg)throw n;if(n instanceof di.W5)throw n;throw new di.Gg({body:t,details:n.message,url:e})}},webSocket:function(e,{body:t,onResponse:n}){if(e.readyState===e.CLOSED||e.readyState===e.CLOSING)throw new di.c9({body:t,url:e.url,details:"Socket is closed."});const r=vc++,s=({data:i})=>{const a=JSON.parse(i);"number"==typeof a.id&&r!==a.id||(n?.(a),"eth_subscribe"===t.method&&"string"==typeof a.result&&e.subscriptions.set(a.result,s),"eth_unsubscribe"===t.method&&e.subscriptions.delete(t.params?.[0]))};return e.requests.set(r,s),e.send(JSON.stringify({jsonrpc:"2.0",...t,id:r})),e},webSocketAsync:async function(e,{body:t,timeout:n=1e4}){return wc((()=>new Promise((n=>kc.webSocket(e,{body:t,onResponse:n})))),{errorInstance:new di.W5({body:t,url:e.url}),timeout:n})}};var _c=n(4192);const xc=e=>(t,n,r)=>{const s=r.subscribe;r.subscribe=(e,t,n)=>{let i=e;if(t){const s=(null==n?void 0:n.equalityFn)||Object.is;let a=e(r.getState());i=n=>{const r=e(n);if(!s(a,r)){const e=a;t(a=r,e)}},(null==n?void 0:n.fireImmediately)&&t(a,a)}return s(i)};return e(t,n,r)};function Pc(e,t){let n;try{n=e()}catch(e){return}const r={getItem:e=>{var r;const s=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(r=n.getItem(e))?r:null;return i instanceof Promise?i.then(s):s(i)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)};return r}const Cc=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>Cc(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>Cc(t)(e)}}},Sc=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),((e,t)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},a=!1;const o=new Set,c=new Set;let l;try{l=i.getStorage()}catch(e){}if(!l)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...e)}),r,s);const u=Cc(i.serialize),h=()=>{const e=i.partialize({...r()});let t;const n=u({state:e,version:i.version}).then((e=>l.setItem(i.name,e))).catch((e=>{t=e}));if(t)throw t;return n},d=s.setState;s.setState=(e,t)=>{d(e,t),h()};const f=e(((...e)=>{n(...e),h()}),r,s);let p;const g=()=>{var e;if(!l)return;a=!1,o.forEach((e=>e(r())));const t=(null==(e=i.onRehydrateStorage)?void 0:e.call(i,r()))||void 0;return Cc(l.getItem.bind(l))(i.name).then((e=>{if(e)return i.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return p=i.merge(e,null!=(t=r())?t:f),n(p,!0),h()})).then((()=>{null==t||t(p,void 0),a=!0,c.forEach((e=>e(p)))})).catch((e=>{null==t||t(void 0,e)}))};return s.persist={setOptions:e=>{i={...i,...e},e.getStorage&&(l=e.getStorage())},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},g(),p||f})(e,t)):((e,t)=>(n,r,s)=>{let i={storage:Pc((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},a=!1;const o=new Set,c=new Set;let l=i.storage;if(!l)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...e)}),r,s);const u=()=>{const e=i.partialize({...r()});return l.setItem(i.name,{state:e,version:i.version})},h=s.setState;s.setState=(e,t)=>{h(e,t),u()};const d=e(((...e)=>{n(...e),u()}),r,s);let f;const p=()=>{var e,t;if(!l)return;a=!1,o.forEach((e=>{var t;return e(null!=(t=r())?t:d)}));const s=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=r())?e:d))||void 0;return Cc(l.getItem.bind(l))(i.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return f=i.merge(e,null!=(t=r())?t:d),n(f,!0),u()})).then((()=>{null==s||s(f,void 0),f=r(),a=!0,c.forEach((e=>e(f)))})).catch((e=>{null==s||s(void 0,e)}))};return s.persist={setOptions:e=>{i={...i,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>a,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},i.skipHydration||p(),f||d})(e,t),Ic=e=>{let t;const n=new Set,r=(e,r)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=r?r:"object"!=typeof s)?s:Object.assign({},t,s),n.forEach((n=>n(t,e)))}},s=()=>t,i={setState:r,getState:s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,s,i),i},Oc=e=>e?Ic(e):Ic;var Tc=n(5229);function Nc(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function jc(e,t,{batch:n={multicall:{wait:32}},pollingInterval:r=4e3,rank:s,retryCount:i,retryDelay:a,stallTimeout:o}={}){if(!e.length)throw new Error("must have at least one chain");let c=[];const l={},u={};for(const n of e){let e=!1;for(const r of t){const t=r(n);t&&(e=!0,c.some((({id:e})=>e===n.id))||(c=[...c,t.chain]),l[n.id]=[...l[n.id]||[],...t.rpcUrls.http],t.rpcUrls.webSocket&&(u[n.id]=[...u[n.id]||[],...t.rpcUrls.webSocket]))}if(!e)throw new Error([`Could not find valid provider configuration for chain "${n.name}".\n`,"You may need to add `jsonRpcProvider` to `configureChains` with the chain's RPC URLs.","Read more: https://wagmi.sh/core/providers/jsonRpc"].join("\n"))}return{chains:c,publicClient:({chainId:t})=>{const u=c.find((e=>e.id===t))??e[0],h=l[u.id];if(!h||!h[0])throw new Error(`No providers configured for chain "${u.id}"`);const d=fc({batch:n,chain:u,transport:pc(h.map((e=>function(e,t={}){const{batch:n,fetchOptions:r,key:s="http",name:i="HTTP JSON-RPC",retryDelay:a}=t;return({chain:o,retryCount:c,timeout:l})=>{const{batchSize:u=1e3,wait:h=0}="object"==typeof n?n:{},d=t.retryCount??c,f=l??t.timeout??1e4,p=e||o?.rpcUrls.default.http[0];if(!p)throw new gc;return Ra({key:s,name:i,async request({method:t,params:s}){const i={method:t,params:s},{schedule:a}=(0,mc.S)({id:`${e}`,wait:h,shouldSplitBatch:e=>e.length>u,fn:e=>kc.http(p,{body:e,fetchOptions:r,timeout:f})}),[{error:o,result:c}]=await(async e=>n?a(e):[await kc.http(p,{body:e,fetchOptions:r,timeout:f})])(i);if(o)throw new di.bs({body:i,error:o,url:p});return c},retryCount:d,retryDelay:a,timeout:f,type:"http"},{url:e})}}(e,{timeout:o}))),{rank:s,retryCount:i,retryDelay:a}),pollingInterval:r});return Object.assign(d,{chains:c})},webSocketPublicClient:({chainId:t})=>{const l=c.find((e=>e.id===t))??e[0],h=u[l.id];if(!h||!h[0])return;const d=fc({batch:n,chain:l,transport:pc(h.map((e=>function(e,t={}){const{key:n="webSocket",name:r="WebSocket JSON-RPC",retryDelay:s}=t;return({chain:i,retryCount:a,timeout:o})=>{const c=t.retryCount??a,l=o??t.timeout??1e4,u=e||i?.rpcUrls.default.webSocket?.[0];if(!u)throw new gc;return Ra({key:n,name:r,async request({method:e,params:t}){const n={method:e,params:t},r=await Ec(u),{error:s,result:i}=await kc.webSocketAsync(r,{body:n,timeout:l});if(s)throw new di.bs({body:n,error:s,url:u});return i},retryCount:c,retryDelay:s,timeout:l,type:"webSocket"},{getSocket:()=>Ec(u),async subscribe({params:e,onData:t,onError:n}){const r=await Ec(u),{result:s}=await new Promise(((s,i)=>kc.webSocket(r,{body:{method:"eth_subscribe",params:e},onResponse(e){if(e.error)return i(e.error),void n?.(e.error);"number"!=typeof e.id?"eth_subscription"===e.method&&t(e.params):s(e)}})));return{subscriptionId:s,unsubscribe:async()=>new Promise((e=>kc.webSocket(r,{body:{method:"eth_unsubscribe",params:[s]},onResponse:e})))}}})}}(e,{timeout:o}))),{rank:s,retryCount:i,retryDelay:a}),pollingInterval:r});return Object.assign(d,{chains:c})}}}var Uc=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured${t?` for connector "${t}"`:""}.`),this.name="ChainNotConfigured"}},Lc=class extends Error{constructor(){super(...arguments),this.name="ConnectorAlreadyConnectedError",this.message="Connector already connected"}},Rc=class extends Error{constructor(){super(...arguments),this.name="ConfigChainsNotFound",this.message="No chains were found on the wagmi config. Some functions that require a chain may not work."}},Bc=class extends Error{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),this.name="SwitchChainNotSupportedError"}};var Mc=(e,{find:t,replace:n})=>e&&t(e)?n(e):"object"!=typeof e?e:Array.isArray(e)?e.map((e=>Mc(e,{find:t,replace:n}))):e instanceof Object?Object.entries(e).reduce(((e,[r,s])=>({...e,[r]:Mc(s,{find:t,replace:n})})),{}):e;function Dc(e){const t=JSON.parse(e),n=Mc(t,{find:e=>"string"==typeof e&&e.startsWith("#bigint."),replace:e=>BigInt(e.replace("#bigint.",""))});return n}function Fc(e){return"number"==typeof e?e:"wei"===e?0:Math.abs(_c.Bd[e])}function $c(e,t){return e.slice(0,t).join(".")||"."}function Gc(e,t){const{length:n}=e;for(let r=0;r<n;++r)if(e[r]===t)return r+1;return 0}function Hc(e,t,n,r){return JSON.stringify(e,function(e,t){const n="function"==typeof e,r="function"==typeof t,s=[],i=[];return function(a,o){if("object"==typeof o)if(s.length){const e=Gc(s,this);0===e?s[s.length]=this:(s.splice(e),i.splice(e)),i[i.length]=a;const n=Gc(s,o);if(0!==n)return r?t.call(this,a,o,$c(i,n)):`[ref=${$c(i,n)}]`}else s[0]=o,i[0]=a;return n?e.call(this,a,o):o}}(((e,n)=>{const r="bigint"==typeof n?`#bigint.${n.toString()}`:n;return t?.(e,r)||r}),r),n??void 0)}var zc={getItem:e=>"",setItem:(e,t)=>null,removeItem:e=>null};function Wc({deserialize:e=Dc,key:t="wagmi",serialize:n=Hc,storage:r}){return{...r,getItem:(n,s=null)=>{const i=r.getItem(`${t}.${n}`);try{return i?e(i):s}catch(e){return console.warn(e),s}},setItem:(e,s)=>{if(null===s)r.removeItem(`${t}.${e}`);else try{r.setItem(`${t}.${e}`,n(s))}catch(e){console.error(e)}},removeItem:e=>r.removeItem(`${t}.${e}`)}}var qc,Kc,Vc,Jc,Qc,Yc="store",Zc=class{constructor({autoConnect:e=!1,connectors:t=[new Da],publicClient:n,storage:r=Wc({storage:"undefined"!=typeof window?window.localStorage:zc}),logger:s={warn:console.warn},webSocketPublicClient:i}){Ga(this,Vc),this.publicClients=new Map,this.webSocketPublicClients=new Map,Ga(this,qc,void 0),Ga(this,Kc,void 0),this.args={autoConnect:e,connectors:t,logger:s,publicClient:n,storage:r,webSocketPublicClient:i};let a,o="disconnected";if(e)try{const e=r.getItem(Yc),t=e?.state?.data;o=t?.account?"reconnecting":"connecting",a=t?.chain?.id}catch(e){}const c="function"==typeof t?t():t;var l,u,h;c.forEach((e=>e.setStorage(r))),this.store=Oc(xc(Sc((()=>({connectors:c,publicClient:this.getPublicClient({chainId:a}),status:o,webSocketPublicClient:this.getWebSocketPublicClient({chainId:a})})),{name:Yc,storage:r,partialize:t=>({...e&&{data:{account:t?.data?.account,chain:t?.data?.chain}},chains:t?.chains}),version:2}))),this.storage=r,Ha(this,Kc,r?.getItem("wallet")),(l=this,u=Vc,h=Jc,Fa(l,u,"access private method"),h).call(this),e&&"undefined"!=typeof window&&setTimeout((async()=>await this.autoConnect()),0)}get chains(){return this.store.getState().chains}get connectors(){return this.store.getState().connectors}get connector(){return this.store.getState().connector}get data(){return this.store.getState().data}get error(){return this.store.getState().error}get lastUsedChainId(){return this.data?.chain?.id}get publicClient(){return this.store.getState().publicClient}get status(){return this.store.getState().status}get subscribe(){return this.store.subscribe}get webSocketPublicClient(){return this.store.getState().webSocketPublicClient}setState(e){const t="function"==typeof e?e(this.store.getState()):e;this.store.setState(t,!0)}clearState(){this.setState((e=>({...e,chains:void 0,connector:void 0,data:void 0,error:void 0,status:"disconnected"})))}async destroy(){this.connector&&await(this.connector.disconnect?.()),Ha(this,qc,!1),this.clearState(),this.store.destroy()}async autoConnect(){if($a(this,qc))return;Ha(this,qc,!0),this.setState((e=>({...e,status:e.data?.account?"reconnecting":"connecting"})));const e=$a(this,Kc)?[...this.connectors].sort((e=>e.id===$a(this,Kc)?-1:1)):this.connectors;let t=!1;for(const n of e){if(!n.ready||!n.isAuthorized)continue;if(!await n.isAuthorized())continue;const e=await n.connect();this.setState((t=>({...t,connector:n,chains:n?.chains,data:e,status:"connected"}))),t=!0;break}return t||this.setState((e=>({...e,data:void 0,status:"disconnected"}))),Ha(this,qc,!1),this.data}setConnectors(e){this.args={...this.args,connectors:e};const t="function"==typeof e?e():e;t.forEach((e=>e.setStorage(this.args.storage))),this.setState((e=>({...e,connectors:t})))}getPublicClient({chainId:e}={}){let t=this.publicClients.get(-1);if(t&&t?.chain.id===e)return t;if(t=this.publicClients.get(e??-1),t)return t;const{publicClient:n}=this.args;return t="function"==typeof n?n({chainId:e}):n,this.publicClients.set(e??-1,t),t}setPublicClient(e){const t=this.data?.chain?.id;this.args={...this.args,publicClient:e},this.publicClients.clear(),this.setState((e=>({...e,publicClient:this.getPublicClient({chainId:t})})))}getWebSocketPublicClient({chainId:e}={}){let t=this.webSocketPublicClients.get(-1);if(t&&t?.chain.id===e)return t;if(t=this.webSocketPublicClients.get(e??-1),t)return t;const{webSocketPublicClient:n}=this.args;return t="function"==typeof n?n({chainId:e}):n,t&&this.webSocketPublicClients.set(e??-1,t),t}setWebSocketPublicClient(e){const t=this.data?.chain?.id;this.args={...this.args,webSocketPublicClient:e},this.webSocketPublicClients.clear(),this.setState((e=>({...e,webSocketPublicClient:this.getWebSocketPublicClient({chainId:t})})))}setLastUsedConnector(e=null){this.storage?.setItem("wallet",e)}};function Xc(){if(!Qc)throw new Error("No wagmi config found. Ensure you have set up a config: https://wagmi.sh/react/config");return Qc}async function el({chainId:e,connector:t}){const n=Xc(),r=n.connector;if(r&&t.id===r.id)throw new Lc;try{n.setState((e=>({...e,status:"connecting"})));const r=await t.connect({chainId:e});return n.setLastUsedConnector(t.id),n.setState((e=>({...e,connector:t,chains:t?.chains,data:r,status:"connected"}))),n.storage.setItem("connected",!0),{...r,connector:t}}catch(e){throw n.setState((e=>({...e,status:e.connector?"connected":"disconnected"}))),e}}async function tl(){const e=Xc();e.connector&&await e.connector.disconnect(),e.clearState(),e.storage.removeItem("connected")}qc=new WeakMap,Kc=new WeakMap,Vc=new WeakSet,Jc=function(){const e=e=>{this.setState((t=>({...t,data:{...t.data,...e}})))},t=()=>{this.clearState()},n=e=>{this.setState((t=>({...t,error:e})))};this.store.subscribe((({connector:e})=>e),((r,s)=>{s?.off?.("change",e),s?.off?.("disconnect",t),s?.off?.("error",n),r&&(r.on?.("change",e),r.on?.("disconnect",t),r.on?.("error",n))}));const{publicClient:r,webSocketPublicClient:s}=this.args;("function"==typeof r||"function"==typeof s)&&this.store.subscribe((({data:e})=>e?.chain?.id),(e=>{this.setState((t=>({...t,publicClient:this.getPublicClient({chainId:e}),webSocketPublicClient:this.getWebSocketPublicClient({chainId:e})})))}))};var nl=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],rl=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];function sl({chainId:e}={}){const t=Xc();return e&&t.getPublicClient({chainId:e})||t.publicClient}async function il({chainId:e}={}){const t=Xc();return await(t.connector?.getWalletClient?.({chainId:e}))||null}async function al({chainId:e,contracts:t,blockNumber:n,blockTag:r,...s}){const i=sl({chainId:e});if(!i.chains)throw new Rc;if(e&&i.chain.id!==e)throw new Uc({chainId:e});return i.multicall({allowFailure:s.allowFailure??!0,blockNumber:n,blockTag:r,contracts:t})}async function ol({address:e,account:t,chainId:n,abi:r,args:s,functionName:i,blockNumber:a,blockTag:o}){return sl({chainId:n}).readContract({abi:r,address:e,account:t,functionName:i,args:s,blockNumber:a,blockTag:o})}async function cl({contracts:e,blockNumber:t,blockTag:n,...r}){const{allowFailure:s=!0}=r;try{const r=sl(),i=e.reduce(((e,t,n)=>{const s=t.chainId??r.chain.id;return{...e,[s]:[...e[s]||[],{contract:t,index:n}]}}),{}),a=()=>Object.entries(i).map((([e,r])=>al({allowFailure:s,chainId:parseInt(e),contracts:r.map((({contract:e})=>e)),blockNumber:t,blockTag:n}))),o=(await Promise.all(a())).flat(),c=Object.values(i).flatMap((e=>e.map((({index:e})=>e))));return o.reduce(((e,t,n)=>(e&&(e[c[n]]=t),e)),[])}catch(r){if(r instanceof Va.uq)throw r;const i=()=>e.map((e=>ol({...e,blockNumber:t,blockTag:n})));return s?(await Promise.allSettled(i())).map((e=>"fulfilled"===e.status?{result:e.value,status:"success"}:{error:e.reason,result:void 0,status:"failure"})):await Promise.all(i())}}async function ll({address:e,chainId:t,formatUnits:n,token:r}){const s=Xc(),i=sl({chainId:t});if(r){const s=async({abi:s})=>{const i={abi:s,address:r,chainId:t},[a,o,c]=await cl({allowFailure:!1,contracts:[{...i,functionName:"balanceOf",args:[e]},{...i,functionName:"decimals"},{...i,functionName:"symbol"}]});return{decimals:o,formatted:(0,Tc.b)(a??"0",Fc(n??o)),symbol:c,value:a}};try{return await s({abi:nl})}catch(e){if(e instanceof Va.uq){const{symbol:e,...t}=await s({abi:rl});return{symbol:(0,Fi.rR)((0,qa.f)(e,{dir:"right"})),...t}}throw e}}const a=[...s.publicClient.chains||[],...s.chains??[]],o=await i.getBalance({address:e}),c=a.find((e=>e.id===i.chain.id));return{decimals:c?.nativeCurrency.decimals??18,formatted:(0,Tc.b)(o??"0",Fc(n??18)),symbol:c?.nativeCurrency.symbol??"ETH",value:o}}function ul(){const{data:e,connector:t,status:n}=Xc();switch(n){case"connected":return{address:e?.account,connector:t,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:n};case"reconnecting":return{address:e?.account,connector:t,isConnected:!!e?.account,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:n};case"connecting":return{address:e?.account,connector:t,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:n};case"disconnected":return{address:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:n}}}function hl(){const e=Xc(),t=e.data?.chain?.id,n=e.chains??[],r=[...e.publicClient?.chains||[],...n].find((e=>e.id===t))??{id:t,name:`Chain ${t}`,network:`${t}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}};return{chain:t?{...r,...e.data?.chain,id:t}:void 0,chains:n}}async function dl({chainId:e}){const{connector:t}=Xc();if(!t)throw new Zs;if(!t.switchChain)throw new Bc({connector:t});return t.switchChain(e)}function fl(e,{selector:t=(e=>e)}={}){const n=Xc().subscribe((({data:e,connector:n,status:r})=>t({address:e?.account,connector:n,status:r})),(()=>e(ul())),{equalityFn:Nc});return n}function pl(e,{selector:t=(e=>e)}={}){const n=Xc().subscribe((({data:e,chains:n})=>t({chainId:e?.chain?.id,chains:n})),(()=>e(hl())),{equalityFn:Nc});return n}async function gl({name:e,chainId:t}){const{normalize:r}=await n.e(546).then(n.bind(n,9546)),s=sl({chainId:t});return await s.getEnsAvatar({name:r(e)})}async function ml({address:e,chainId:t}){return sl({chainId:t}).getEnsName({address:(0,ui.K)(e)})}const yl="6.7.1";function bl(e,t,n){const r=t.split("|").map((e=>e.trim()));for(let n=0;n<r.length;n++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=e,s}async function wl(e){const t=Object.keys(e);return(await Promise.all(t.map((t=>Promise.resolve(e[t]))))).reduce(((e,n,r)=>(e[t[r]]=n,e)),{})}function vl(e,t,n){for(let r in t){let s=t[r];const i=n?n[r]:null;i&&bl(s,i,r),Object.defineProperty(e,r,{enumerable:!0,value:s,writable:!1})}}function Al(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(Al).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let r=0;r<e.length;r++)n+=t[e[r]>>4],n+=t[15&e[r]];return n}if("object"==typeof e&&"function"==typeof e.toJSON)return Al(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map((t=>`${Al(t)}: ${Al(e[t])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function El(e,t){return e&&e.code===t}function kl(e){return El(e,"CALL_EXCEPTION")}function _l(e,t,n){{const r=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Al(n)}`);for(const e in n){const t=n[e];r.push(e+"="+Al(t))}}r.push(`code=${t}`),r.push(`version=${yl}`),r.length&&(e+=" ("+r.join(", ")+")")}let r;switch(t){case"INVALID_ARGUMENT":r=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(e);break;default:r=new Error(e)}return vl(r,{code:t}),n&&Object.assign(r,n),r}function xl(e,t,n,r){if(!e)throw _l(t,n,r)}function Pl(e,t,n,r){xl(e,t,"INVALID_ARGUMENT",{argument:n,value:r})}function Cl(e,t,n){null==n&&(n=""),n&&(n=": "+n),xl(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),xl(e<=t,"too many arguemnts"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const Sl=["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){const e=String.fromCharCode(233).normalize("NFD");if(e!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(e){}return e}),[]);function Il(e,t,n){if(null==n&&(n=""),e!==t){let e=n,t="new";n&&(e+=".",t+=" "+n),xl(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function Ol(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let n=2;for(let r=0;r<t.length;r++)t[r]=parseInt(e.substring(n,n+2),16),n+=2;return t}Pl(!1,"invalid BytesLike value",t||"value",e)}function Tl(e,t){return Ol(e,t,!1)}function Nl(e,t){return Ol(e,t,!0)}function jl(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0))}const Ul="0123456789abcdef";function Ll(e){const t=Tl(e);let n="0x";for(let e=0;e<t.length;e++){const r=t[e];n+=Ul[(240&r)>>4]+Ul[15&r]}return n}function Rl(e){return"0x"+e.map((e=>Ll(e).substring(2))).join("")}function Bl(e){return jl(e,!0)?(e.length-2)/2:Tl(e).length}function Ml(e,t,n){const r=Tl(e);return null!=n&&n>r.length&&xl(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Ll(r.slice(null==t?0:t,null==n?r.length:n))}function Dl(e,t,n){const r=Tl(e);xl(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),n?s.set(r,t-r.length):s.set(r,0),Ll(s)}function Fl(e,t){return Dl(e,t,!0)}const $l=BigInt(0),Gl=BigInt(1),Hl=9007199254740991;function zl(e,t){const n=Vl(e,"value"),r=BigInt(Yl(t,"width"));if(xl(n>>r===$l,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>r-Gl){return-((~n&(Gl<<r)-Gl)+Gl)}return n}function Wl(e,t){let n=Kl(e,"value");const r=BigInt(Yl(t,"width")),s=Gl<<r-Gl;if(n<$l){n=-n,xl(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return(~n&(Gl<<r)-Gl)+Gl}return xl(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),n}function ql(e,t){const n=Vl(e,"value"),r=BigInt(Yl(t,"bits"));return n&(Gl<<r)-Gl}function Kl(e,t){switch(typeof e){case"bigint":return e;case"number":return Pl(Number.isInteger(e),"underflow",t||"value",e),Pl(e>=-Hl&&e<=Hl,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(n){Pl(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}Pl(!1,"invalid BigNumberish value",t||"value",e)}function Vl(e,t){const n=Kl(e,t);return xl(n>=$l,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const Jl="0123456789abcdef";function Ql(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=Jl[n>>4],t+=Jl[15&n];return BigInt(t)}return Kl(e)}function Yl(e,t){switch(typeof e){case"bigint":return Pl(e>=-Hl&&e<=Hl,"overflow",t||"value",e),Number(e);case"number":return Pl(Number.isInteger(e),"underflow",t||"value",e),Pl(e>=-Hl&&e<=Hl,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return Yl(BigInt(e),t)}catch(n){Pl(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}Pl(!1,"invalid numeric value",t||"value",e)}function Zl(e,t){let n=Vl(e,"value").toString(16);if(null==t)n.length%2&&(n="0"+n);else{const r=Yl(t,"width");for(xl(2*r>=n.length,`value exceeds width (${r} bits)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*r;)n="0"+n}return"0x"+n}function Xl(e){const t=Vl(e,"value");if(t===$l)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let e=0;e<r.length;e++){const t=2*e;r[e]=parseInt(n.substring(t,t+2),16)}return r}function eu(e){let t=Ll(function(e){return jl(e,!0)||e instanceof Uint8Array}(e)?e:Xl(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const tu=32,nu=new Uint8Array(tu),ru=["then"],su={};function iu(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}class au extends Array{#e;constructor(...e){const t=e[0];let n=e[1],r=(e[2]||[]).slice(),s=!0;t!==su&&(n=e,r=[],s=!1),super(n.length),n.forEach(((e,t)=>{this[t]=e}));const i=r.reduce(((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e)),new Map);if(this.#e=Object.freeze(n.map(((e,t)=>{const n=r[t];return null!=n&&1===i.get(n)?n:null}))),s)return Object.freeze(this),new Proxy(this,{get:(e,t,n)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){const n=Yl(t,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const r=e[n];return r instanceof Error&&iu(`index ${n}`,r),r}if(ru.indexOf(t)>=0)return Reflect.get(e,t,n);const r=e[t];if(r instanceof Function)return function(...t){return r.apply(this===n?e:this,t)};if(!(t in e))return e.getValue.apply(this===n?e:this,[t])}return Reflect.get(e,t,n)}})}toArray(){const e=[];return this.forEach(((t,n)=>{t instanceof Error&&iu(`index ${n}`,t),e.push(t)})),e}toObject(){return this.#e.reduce(((e,t,n)=>(xl(null!=t,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),t in e||(e[t]=this.getValue(t)),e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);const n=[],r=[];for(let s=e;s<t;s++)n.push(this[s]),r.push(this.#e[s]);return new au(su,n,r)}filter(e,t){const n=[],r=[];for(let s=0;s<this.length;s++){const i=this[s];i instanceof Error&&iu(`index ${s}`,i),e.call(t,i,s,this)&&(n.push(i),r.push(this.#e[s]))}return new au(su,n,r)}map(e,t){const n=[];for(let r=0;r<this.length;r++){const s=this[r];s instanceof Error&&iu(`index ${r}`,s),n.push(e.call(t,s,r,this))}return n}getValue(e){const t=this.#e.indexOf(e);if(-1===t)return;const n=this[t];return n instanceof Error&&iu(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,t){return new au(su,e,t)}}function ou(e){let t=Xl(e);return xl(t.length<=tu,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:tu,offset:t.length}),t.length!==tu&&(t=Nl(Rl([nu.slice(t.length%tu),t]))),t}class cu{name;type;localName;dynamic;constructor(e,t,n,r){vl(this,{name:e,type:t,localName:n,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){Pl(!1,e,this.localName,t)}}class lu{#t;#n;constructor(){this.#t=[],this.#n=0}get data(){return Rl(this.#t)}get length(){return this.#n}#r(e){return this.#t.push(e),this.#n+=e.length,e.length}appendWriter(e){return this.#r(Nl(e.data))}writeBytes(e){let t=Nl(e);const n=t.length%tu;return n&&(t=Nl(Rl([t,nu.slice(n)]))),this.#r(t)}writeValue(e){return this.#r(ou(e))}writeUpdatableValue(){const e=this.#t.length;return this.#t.push(nu),this.#n+=tu,t=>{this.#t[e]=ou(t)}}}class uu{allowLoose;#t;#s;constructor(e,t){vl(this,{allowLoose:!!t}),this.#t=Nl(e),this.#s=0}get data(){return Ll(this.#t)}get dataLength(){return this.#t.length}get consumed(){return this.#s}get bytes(){return new Uint8Array(this.#t)}#i(e,t,n){let r=Math.ceil(t/tu)*tu;return this.#s+r>this.#t.length&&(this.allowLoose&&n&&this.#s+t<=this.#t.length?r=t:xl(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Nl(this.#t),length:this.#t.length,offset:this.#s+r})),this.#t.slice(this.#s,this.#s+r)}subReader(e){return new uu(this.#t.slice(this.#s+e),this.allowLoose)}readBytes(e,t){let n=this.#i(0,e,!!t);return this.#s+=n.length,n.slice(0,e)}readValue(){return Ql(this.readBytes(tu))}readIndex(){return Yl(Ql(this.readBytes(tu)))}}function hu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function du(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const fu={number:hu,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:du,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");hu(e.outputLen),hu(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){du(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},pu=fu,gu=BigInt(2**32-1),mu=BigInt(32);function yu(e,t=!1){return t?{h:Number(e&gu),l:Number(e>>mu&gu)}:{h:0|Number(e>>mu&gu),l:0|Number(e&gu)}}const bu={fromBig:yu,split:function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:a}=yu(e[s],t);[n[s],r[s]]=[i,a]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<mu|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:0|s}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,add5H:(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,add5L:(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0)},wu=bu,vu=("object"==typeof self&&"crypto"in self&&self.crypto,e=>new DataView(e.buffer,e.byteOffset,e.byteLength)),Au=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Eu(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class ku{clone(){return this._cloneInto()}}function _u(e){const t=t=>e().update(Eu(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const[xu,Pu,Cu]=[[],[],[]],Su=BigInt(0),Iu=BigInt(1),Ou=BigInt(2),Tu=BigInt(7),Nu=BigInt(256),ju=BigInt(113);for(let e=0,t=Iu,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],xu.push(2*(5*r+n)),Pu.push((e+1)*(e+2)/2%64);let s=Su;for(let e=0;e<7;e++)t=(t<<Iu^(t>>Tu)*ju)%Nu,t&Ou&&(s^=Iu<<(Iu<<BigInt(e))-Iu);Cu.push(s)}const[Uu,Lu]=wu.split(Cu,!0),Ru=(e,t,n)=>n>32?wu.rotlBH(e,t,n):wu.rotlSH(e,t,n),Bu=(e,t,n)=>n>32?wu.rotlBL(e,t,n):wu.rotlSL(e,t,n);class Mu extends ku{constructor(e,t,n,r=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,pu.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,s=(t+2)%10,i=n[s],a=n[s+1],o=Ru(i,a,1)^n[r],c=Bu(i,a,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=Pu[n],i=Ru(t,s,r),a=Bu(t,s,r),o=xu[n];t=e[o],s=e[o+1],e[o]=i,e[o+1]=a}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=Uu[r],e[1]^=Lu[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){pu.exists(this);const{blockLen:t,state:n}=this,r=(e=Eu(e)).length;for(let s=0;s<r;){const i=Math.min(t-this.pos,r-s);for(let t=0;t<i;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,0!=(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){pu.exists(this,!1),pu.bytes(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return pu.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(pu.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return e||(e=new Mu(t,n,r,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}const Du=(e,t,n)=>_u((()=>new Mu(t,e,n))),Fu=(Du(6,144,28),Du(6,136,32),Du(6,104,48),Du(6,72,64),Du(1,144,28),Du(1,136,32)),$u=(Du(1,104,48),Du(1,72,64),(e,t,n)=>function(e){const t=(t,n)=>e(n).update(Eu(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}(((r={})=>new Mu(t,e,void 0===r.dkLen?n:r.dkLen,!0))));$u(31,168,16),$u(31,136,32);let Gu=!1;const Hu=function(e){return Fu(e)};let zu=Hu;function Wu(e){const t=Tl(e,"data");return Ll(zu(t))}Wu._=Hu,Wu.lock=function(){Gu=!0},Wu.register=function(e){if(Gu)throw new TypeError("keccak256 is locked");zu=e},Object.freeze(Wu);const qu=BigInt(0),Ku=BigInt(36);function Vu(e){const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let e=0;e<40;e++)n[e]=t[e].charCodeAt(0);const r=Tl(Wu(n));for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&r[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const Ju={};for(let e=0;e<10;e++)Ju[String(e)]=String(e);for(let e=0;e<26;e++)Ju[String.fromCharCode(65+e)]=String(10+e);const Qu=15;function Yu(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>Ju[e])).join("");for(;t.length>=Qu;){let e=t.substring(0,Qu);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const Zu=function(){const e={};for(let t=0;t<36;t++){e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t)}return e}();function Xu(e){if(Pl("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=Vu(e);return Pl(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Pl(e.substring(2,4)===Yu(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=qu;for(let n=0;n<e.length;n++)t=t*Ku+Zu[e[n]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Vu("0x"+t)}Pl(!1,"invalid address","address",e)}const eh={};function th(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new sh(eh,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function nh(e,t){return new sh(eh,`bytes${t||""}`,e,{size:t})}const rh=Symbol.for("_ethers_typed");class sh{type;value;#a;_typedSymbol;constructor(e,t,n,r){null==r&&(r=null),Il(eh,e,"Typed"),vl(this,{_typedSymbol:rh,type:t,value:n}),this.#a=r,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((e=>e.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#a}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#a?-1:!1===this.#a?this.value.length:null}static from(e,t){return new sh(eh,e,t)}static uint8(e){return th(e,8)}static uint16(e){return th(e,16)}static uint24(e){return th(e,24)}static uint32(e){return th(e,32)}static uint40(e){return th(e,40)}static uint48(e){return th(e,48)}static uint56(e){return th(e,56)}static uint64(e){return th(e,64)}static uint72(e){return th(e,72)}static uint80(e){return th(e,80)}static uint88(e){return th(e,88)}static uint96(e){return th(e,96)}static uint104(e){return th(e,104)}static uint112(e){return th(e,112)}static uint120(e){return th(e,120)}static uint128(e){return th(e,128)}static uint136(e){return th(e,136)}static uint144(e){return th(e,144)}static uint152(e){return th(e,152)}static uint160(e){return th(e,160)}static uint168(e){return th(e,168)}static uint176(e){return th(e,176)}static uint184(e){return th(e,184)}static uint192(e){return th(e,192)}static uint200(e){return th(e,200)}static uint208(e){return th(e,208)}static uint216(e){return th(e,216)}static uint224(e){return th(e,224)}static uint232(e){return th(e,232)}static uint240(e){return th(e,240)}static uint248(e){return th(e,248)}static uint256(e){return th(e,256)}static uint(e){return th(e,256)}static int8(e){return th(e,-8)}static int16(e){return th(e,-16)}static int24(e){return th(e,-24)}static int32(e){return th(e,-32)}static int40(e){return th(e,-40)}static int48(e){return th(e,-48)}static int56(e){return th(e,-56)}static int64(e){return th(e,-64)}static int72(e){return th(e,-72)}static int80(e){return th(e,-80)}static int88(e){return th(e,-88)}static int96(e){return th(e,-96)}static int104(e){return th(e,-104)}static int112(e){return th(e,-112)}static int120(e){return th(e,-120)}static int128(e){return th(e,-128)}static int136(e){return th(e,-136)}static int144(e){return th(e,-144)}static int152(e){return th(e,-152)}static int160(e){return th(e,-160)}static int168(e){return th(e,-168)}static int176(e){return th(e,-176)}static int184(e){return th(e,-184)}static int192(e){return th(e,-192)}static int200(e){return th(e,-200)}static int208(e){return th(e,-208)}static int216(e){return th(e,-216)}static int224(e){return th(e,-224)}static int232(e){return th(e,-232)}static int240(e){return th(e,-240)}static int248(e){return th(e,-248)}static int256(e){return th(e,-256)}static int(e){return th(e,-256)}static bytes1(e){return nh(e,1)}static bytes2(e){return nh(e,2)}static bytes3(e){return nh(e,3)}static bytes4(e){return nh(e,4)}static bytes5(e){return nh(e,5)}static bytes6(e){return nh(e,6)}static bytes7(e){return nh(e,7)}static bytes8(e){return nh(e,8)}static bytes9(e){return nh(e,9)}static bytes10(e){return nh(e,10)}static bytes11(e){return nh(e,11)}static bytes12(e){return nh(e,12)}static bytes13(e){return nh(e,13)}static bytes14(e){return nh(e,14)}static bytes15(e){return nh(e,15)}static bytes16(e){return nh(e,16)}static bytes17(e){return nh(e,17)}static bytes18(e){return nh(e,18)}static bytes19(e){return nh(e,19)}static bytes20(e){return nh(e,20)}static bytes21(e){return nh(e,21)}static bytes22(e){return nh(e,22)}static bytes23(e){return nh(e,23)}static bytes24(e){return nh(e,24)}static bytes25(e){return nh(e,25)}static bytes26(e){return nh(e,26)}static bytes27(e){return nh(e,27)}static bytes28(e){return nh(e,28)}static bytes29(e){return nh(e,29)}static bytes30(e){return nh(e,30)}static bytes31(e){return nh(e,31)}static bytes32(e){return nh(e,32)}static address(e){return new sh(eh,"address",e)}static bool(e){return new sh(eh,"bool",!!e)}static bytes(e){return new sh(eh,"bytes",e)}static string(e){return new sh(eh,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new sh(eh,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===rh}static dereference(e,t){if(sh.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class ih extends cu{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=sh.dereference(t,"string");try{n=Xu(n)}catch(e){return this._throwError(e.message,t)}return e.writeValue(n)}decode(e){return Xu(Zl(e.readValue(),20))}}class ah extends cu{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function oh(e,t,n){let r=[];if(Array.isArray(n))r=n;else if(n&&"object"==typeof n){let e={};r=t.map((t=>{const r=t.localName;return xl(r,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),xl(!e[r],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),e[r]=!0,n[r]}))}else Pl(!1,"invalid tuple value","tuple",n);Pl(t.length===r.length,"types/value length mismatch","tuple",n);let s=new lu,i=new lu,a=[];t.forEach(((e,t)=>{let n=r[t];if(e.dynamic){let t=i.length;e.encode(i,n);let r=s.writeUpdatableValue();a.push((e=>{r(e+t)}))}else e.encode(s,n)})),a.forEach((e=>{e(s.length)}));let o=e.appendWriter(s);return o+=e.appendWriter(i),o}function ch(e,t){let n=[],r=[],s=e.subReader(0);return t.forEach((t=>{let i=null;if(t.dynamic){let n=e.readIndex(),r=s.subReader(n);try{i=t.decode(r)}catch(e){if(El(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(El(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}if(null==i)throw new Error("investigate");n.push(i),r.push(t.localName||null)})),au.fromItems(n,r)}class lh extends cu{coder;length;constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),vl(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=sh.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let r=this.length;-1===r&&(r=n.length,e.writeValue(n.length)),Cl(n.length,r,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let e=0;e<n.length;e++)s.push(this.coder);return oh(e,s,n)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),xl(t*tu<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*tu,length:e.dataLength}));let n=[];for(let e=0;e<t;e++)n.push(new ah(this.coder));return ch(e,n)}}class uh extends cu{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=sh.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class hh extends cu{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Nl(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class dh extends hh{constructor(e){super("bytes",e)}decode(e){return Ll(super.decode(e))}}class fh extends cu{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),vl(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=Nl(sh.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return Ll(e.readBytes(this.size))}}const ph=new Uint8Array([]);class gh extends cu{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(ph)}decode(e){return e.readBytes(0),null}}const mh=BigInt(0),yh=BigInt(1),bh=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class wh extends cu{size;signed;constructor(e,t,n){const r=(t?"int":"uint")+8*e;super(r,r,n,!1),vl(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=Kl(sh.dereference(t,this.type)),r=ql(bh,256);if(this.signed){let e=ql(r,8*this.size-1);(n>e||n<-(e+yh))&&this._throwError("value out-of-bounds",t),n=Wl(n,256)}else(n<mh||n>ql(r,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=ql(e.readValue(),8*this.size);return this.signed&&(t=zl(t,8*this.size)),t}}function vh(e,t,n,r,s){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let r=t+1;r<n.length&&n[r]>>6==2;r++)e++;return e}return"OVERRUN"===e?n.length-t-1:0}const Ah=Object.freeze({error:function(e,t,n,r,s){Pl(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)},ignore:vh,replace:function(e,t,n,r,s){return"OVERLONG"===e?(Pl("number"==typeof s,"invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),vh(e,t,n))}});function Eh(e,t){null==t&&(t=Ah.error);const n=Tl(e,"bytes"),r=[];let s=0;for(;s<n.length;){const e=n[s++];if(e>>7==0){r.push(e);continue}let i=null,a=null;if(192==(224&e))i=1,a=127;else if(224==(240&e))i=2,a=2047;else{if(240!=(248&e)){s+=t(128==(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",s-1,n,r);continue}i=3,a=65535}if(s-1+i>=n.length){s+=t("OVERRUN",s-1,n,r);continue}let o=e&(1<<8-i-1)-1;for(let e=0;e<i;e++){let e=n[s];if(128!=(192&e)){s+=t("MISSING_CONTINUE",s,n,r),o=null;break}o=o<<6|63&e,s++}null!==o&&(o>1114111?s+=t("OUT_OF_RANGE",s-1-i,n,r,o):o>=55296&&o<=57343?s+=t("UTF16_SURROGATE",s-1-i,n,r,o):o<=a?s+=t("OVERLONG",s-1-i,n,r,o):r.push(o))}return r}function kh(e,t){null!=t&&(!function(e){xl(Sl.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}(t),e=e.normalize(t));let n=[];for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(63&r|128);else if(55296==(64512&r)){t++;const s=e.charCodeAt(t);Pl(t<e.length&&56320==(64512&s),"invalid surrogate pair","str",e);const i=65536+((1023&r)<<10)+(1023&s);n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(63&r|128)}return new Uint8Array(n)}function _h(e,t){return Eh(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}class xh extends hh{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,kh(sh.dereference(t,"string")))}decode(e){return _h(super.decode(e))}}class Ph extends cu{coders;constructor(e,t){let n=!1;const r=[];e.forEach((e=>{e.dynamic&&(n=!0),r.push(e.type)}));super("tuple","tuple("+r.join(",")+")",t,n),vl(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,r)=>{let s=n.localName;s&&1===t[s]&&("length"===s&&(s="_length"),null==e[s]&&(e[s]=e[r]))})),Object.freeze(e)}encode(e,t){const n=sh.dereference(t,"tuple");return oh(e,this.coders,n)}decode(e){return ch(e,this.coders)}}function Ch(e){return Wu(kh(e))}function Sh(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}const Ih=Sh("external public payable".split(" ")),Oh="constant external internal payable private public pure view",Th=Sh(Oh.split(" ")),Nh="constructor error event fallback function receive struct",jh=Sh(Nh.split(" ")),Uh="calldata memory storage payable indexed",Lh=Sh(Uh.split(" ")),Rh=Sh([Nh,Uh,"tuple returns",Oh].join(" ").split(" ")),Bh={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Mh=new RegExp("^(\\s*)"),Dh=new RegExp("^([0-9]+)"),Fh=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),$h=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Gh=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Hh{#s;#o;get offset(){return this.#s}get length(){return this.#o.length-this.#s}constructor(e){this.#s=0,this.#o=e.slice()}clone(){return new Hh(this.#o)}reset(){this.#s=0}#c(e=0,t=0){return new Hh(this.#o.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e)throw new Error(`expected ${e}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=this.#c(this.#s+1,e.match+1);return this.#s=e.match+1,t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;this.#s<e.match-1;){const e=this.peek().linkNext;t.push(this.#c(this.#s+1,e)),this.#s=e}return this.#s=e.match+1,t}peek(){if(this.#s>=this.#o.length)throw new Error("out-of-bounds");return this.#o[this.#s]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#s++,e}toString(){const e=[];for(let t=this.#s;t<this.#o.length;t++){const n=this.#o[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function zh(e){const t=[],n=t=>{const n=i<e.length?JSON.stringify(e[i]):"$EOI";throw new Error(`invalid token ${n} at ${i}: ${t}`)};let r=[],s=[],i=0;for(;i<e.length;){let a=e.substring(i),o=a.match(Mh);o&&(i+=o[1].length,a=e.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let l=Bh[a[0]]||"";if(l){if(c.type=l,c.text=a[0],i++,"OPEN_PAREN"===l)r.push(t.length-1),s.push(t.length-1);else if("CLOSE_PAREN"==l)0===r.length&&n("no matching open bracket"),c.match=r.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if("COMMA"===l)c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const n=t.pop().text;e=n+e,t[t.length-1].value=Yl(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(o=a.match(Fh),o){if(c.text=o[1],i+=c.text.length,Rh.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Gh)){c.type="TYPE";continue}c.type="ID"}else{if(o=a.match(Dh),!o)throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`);c.text=o[1],c.type="NUMBER",i+=c.text.length}}return new Hh(t.map((e=>Object.freeze(e))))}function Wh(e,t){let n=[];for(const r in t.keys())e.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function qh(e,t){if(t.peekKeyword(jh)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function Kh(e,t){const n=new Set;for(;;){const r=e.peekType("KEYWORD");if(null==r||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Vh(e){let t=Kh(e,Th);return Wh(t,Sh("constant payable nonpayable".split(" "))),Wh(t,Sh("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function Jh(e,t){return e.popParams().map((e=>ld.from(e,t)))}function Qh(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return Kl(e.pop().text);throw new Error("invalid gas")}return null}function Yh(e){if(e.length)throw new Error(`unexpected tokens: ${e.toString()}`)}const Zh=new RegExp(/^(.*)\[([0-9]*)\]$/);function Xh(e){const t=e.match(Gh);if(Pl(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const n=parseInt(t[2]);Pl(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);Pl(0!==n&&n<=256&&n%8==0,"invalid numeric width","type",e)}return e}const ed={},td=Symbol.for("_ethers_internal"),nd="_ParamTypeInternal",rd="_ErrorInternal",sd="_EventInternal",id="_ConstructorInternal",ad="_FallbackInternal",od="_FunctionInternal",cd="_StructInternal";class ld{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,r,s,i,a,o){if(Il(e,ed,"ParamType"),Object.defineProperty(this,td,{value:nd}),i&&(i=Object.freeze(i.slice())),"array"===r){if(null==a||null==o)throw new Error("")}else if(null!=a||null!=o)throw new Error("");if("tuple"===r){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");vl(this,{name:t,type:n,baseType:r,indexed:s,components:i,arrayLength:a,arrayChildren:o})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(n)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?("sighash"!==e&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")"):t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map((e=>n.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map(((e,r)=>n.components[r].walk(e,t)))}return t(this.type,e)}#l(e,t,n,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const s=this.arrayChildren,i=t.slice();return i.forEach(((t,r)=>{s.#l(e,t,n,(e=>{i[r]=e}))})),void r(i)}if(this.isTuple()){const s=this.components;let i;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw new Error("invalid tuple value");i=s.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((t,r)=>{s[r].#l(e,t,n,(e=>{i[r]=e}))})),void r(i)}const s=n(this.type,t);s.then?e.push(async function(){r(await s)}()):r(s)}async walkAsync(e,t){const n=[],r=[e];return this.#l(n,e,t,(e=>{r[0]=e})),n.length&&await Promise.all(n),r[0]}static from(e,t){if(ld.isParamType(e))return e;if("string"==typeof e)try{return ld.from(zh(e),t)}catch(t){Pl(!1,"invalid param type","obj",e)}else if(e instanceof Hh){let n="",r="",s=null;Kh(e,Sh(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(r="tuple",s=e.popParams().map((e=>ld.from(e))),n=`tuple(${s.map((e=>e.format())).join(",")})`):(n=Xh(e.popType("TYPE")),r=n);let i=null,a=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();i=new ld(ed,"",n,r,null,s,a,i),a=t.value,n+=t.text,r="array",s=null}let o=null;if(Kh(e,Lh).has("indexed")){if(!t)throw new Error("");o=!0}const c=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new ld(ed,c,n,r,o,s,a,i)}const n=e.name;Pl(!n||"string"==typeof n&&n.match($h),"invalid name","obj.name",n);let r=e.indexed;null!=r&&(Pl(t,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let s=e.type,i=s.match(Zh);if(i){const t=parseInt(i[2]||"-1"),a=ld.from({type:i[1],components:e.components});return new ld(ed,n||"",s,"array",r,null,t,a)}if("tuple"===s||s.startsWith("tuple(")||s.startsWith("(")){const t=null!=e.components?e.components.map((e=>ld.from(e))):null;return new ld(ed,n||"",s,"tuple",r,t,null,null)}return s=Xh(e.type),new ld(ed,n||"",s,s,r,null,null,null)}static isParamType(e){return e&&e[td]===nd}}class ud{type;inputs;constructor(e,t,n){Il(e,ed,"Fragment"),vl(this,{type:t,inputs:n=Object.freeze(n.slice())})}static from(e){if("string"==typeof e){try{ud.from(JSON.parse(e))}catch(e){}return ud.from(zh(e))}if(e instanceof Hh){switch(e.peekKeyword(jh)){case"constructor":return gd.from(e);case"error":return fd.from(e);case"event":return pd.from(e);case"fallback":case"receive":return md.from(e);case"function":return yd.from(e);case"struct":return bd.from(e)}}else if("object"==typeof e){switch(e.type){case"constructor":return gd.from(e);case"error":return fd.from(e);case"event":return pd.from(e);case"fallback":case"receive":return md.from(e);case"function":return yd.from(e);case"struct":return bd.from(e)}xl(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Pl(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return gd.isFragment(e)}static isError(e){return fd.isFragment(e)}static isEvent(e){return pd.isFragment(e)}static isFunction(e){return yd.isFragment(e)}static isStruct(e){return bd.isFragment(e)}}class hd extends ud{name;constructor(e,t,n,r){super(e,t,r),Pl("string"==typeof n&&n.match($h),"invalid identifier","name",n),r=Object.freeze(r.slice()),vl(this,{name:n})}}function dd(e,t){return"("+t.map((t=>t.format(e))).join("full"===e?", ":",")+")"}class fd extends hd{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,td,{value:rd})}get selector(){return Ch(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+dd(e,this.inputs)),t.join(" ")}static from(e){if(fd.isFragment(e))return e;if("string"==typeof e)return fd.from(zh(e));if(e instanceof Hh){const t=qh("error",e),n=Jh(e);return Yh(e),new fd(ed,t,n)}return new fd(ed,e.name,e.inputs?e.inputs.map(ld.from):[])}static isFragment(e){return e&&e[td]===rd}}class pd extends hd{anonymous;constructor(e,t,n,r){super(e,"event",t,n),Object.defineProperty(this,td,{value:sd}),vl(this,{anonymous:r})}get topicHash(){return Ch(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+dd(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){t=(t||[]).map((e=>ld.from(e)));return new pd(ed,e,t,!1).topicHash}static from(e){if(pd.isFragment(e))return e;if("string"==typeof e)try{return pd.from(zh(e))}catch(t){Pl(!1,"invalid event fragment","obj",e)}else if(e instanceof Hh){const t=qh("event",e),n=Jh(e,!0),r=!!Kh(e,Sh(["anonymous"])).has("anonymous");return Yh(e),new pd(ed,t,n,r)}return new pd(ed,e.name,e.inputs?e.inputs.map((e=>ld.from(e,!0))):[],!!e.anonymous)}static isFragment(e){return e&&e[td]===sd}}class gd extends ud{payable;gas;constructor(e,t,n,r,s){super(e,t,n),Object.defineProperty(this,td,{value:id}),vl(this,{payable:r,gas:s})}format(e){if(xl(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[`constructor${dd(e,this.inputs)}`];return t.push(this.payable?"payable":"nonpayable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(gd.isFragment(e))return e;if("string"==typeof e)try{return gd.from(zh(e))}catch(t){Pl(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Hh){Kh(e,Sh(["constructor"]));const t=Jh(e),n=!!Kh(e,Ih).has("payable"),r=Qh(e);return Yh(e),new gd(ed,"constructor",t,n,r)}return new gd(ed,"constructor",e.inputs?e.inputs.map(ld.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[td]===id}}class md extends ud{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,td,{value:ad}),vl(this,{payable:n})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(md.isFragment(e))return e;if("string"==typeof e)try{return md.from(zh(e))}catch(t){Pl(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Hh){const t=e.toString();Pl(e.peekKeyword(Sh(["fallback","receive"])),"type must be fallback or receive","obj",t);if("receive"===e.popKeyword(Sh(["fallback","receive"]))){const t=Jh(e);return Pl(0===t.length,"receive cannot have arguments","obj.inputs",t),Kh(e,Sh(["payable"])),Yh(e),new md(ed,[],!0)}let n=Jh(e);n.length?Pl(1===n.length&&"bytes"===n[0].type,"invalid fallback inputs","obj.inputs",n.map((e=>e.format("minimal"))).join(", ")):n=[ld.from("bytes")];const r=Vh(e);if(Pl("nonpayable"===r||"payable"===r,"fallback cannot be constants","obj.stateMutability",r),Kh(e,Sh(["returns"])).has("returns")){const t=Jh(e);Pl(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}return Yh(e),new md(ed,n,"payable"===r)}if("receive"===e.type)return new md(ed,[],!0);if("fallback"===e.type){const t=[ld.from("bytes")],n="payable"===e.stateMutability;return new md(ed,t,n)}Pl(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[td]===ad}}class yd extends hd{constant;outputs;stateMutability;payable;gas;constructor(e,t,n,r,s,i){super(e,"function",t,r),Object.defineProperty(this,td,{value:od});vl(this,{constant:"view"===n||"pure"===n,gas:i,outputs:s=Object.freeze(s.slice()),payable:"payable"===n,stateMutability:n})}get selector(){return Ch(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+dd(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(dd(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){t=(t||[]).map((e=>ld.from(e)));return new yd(ed,e,"view",t,[],null).selector}static from(e){if(yd.isFragment(e))return e;if("string"==typeof e)try{return yd.from(zh(e))}catch(t){Pl(!1,"invalid function fragment","obj",e)}else if(e instanceof Hh){const t=qh("function",e),n=Jh(e),r=Vh(e);let s=[];Kh(e,Sh(["returns"])).has("returns")&&(s=Jh(e));const i=Qh(e);return Yh(e),new yd(ed,t,r,n,s,i)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new yd(ed,e.name,t,e.inputs?e.inputs.map(ld.from):[],e.outputs?e.outputs.map(ld.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[td]===od}}class bd extends hd{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,td,{value:cd})}format(){throw new Error("@TODO")}static from(e){if("string"==typeof e)try{return bd.from(zh(e))}catch(t){Pl(!1,"invalid struct fragment","obj",e)}else if(e instanceof Hh){const t=qh("struct",e),n=Jh(e);return Yh(e),new bd(ed,t,n)}return new bd(ed,e.name,e.inputs?e.inputs.map(ld.from):[])}static isFragment(e){return e&&e[td]===cd}}const wd=new Map;wd.set(0,"GENERIC_PANIC"),wd.set(1,"ASSERT_FALSE"),wd.set(17,"OVERFLOW"),wd.set(18,"DIVIDE_BY_ZERO"),wd.set(33,"ENUM_RANGE_ERROR"),wd.set(34,"BAD_STORAGE_DATA"),wd.set(49,"STACK_UNDERFLOW"),wd.set(50,"ARRAY_RANGE_ERROR"),wd.set(65,"OUT_OF_MEMORY"),wd.set(81,"UNINITIALIZED_FUNCTION_CALL");const vd=new RegExp(/^bytes([0-9]*)$/),Ad=new RegExp(/^(u?int)([0-9]*)$/);let Ed=null;class kd{#u(e){if(e.isArray())return new lh(this.#u(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Ph(e.components.map((e=>this.#u(e))),e.name);switch(e.baseType){case"address":return new ih(e.name);case"bool":return new uh(e.name);case"string":return new xh(e.name);case"bytes":return new dh(e.name);case"":return new gh(e.name)}let t=e.type.match(Ad);if(t){let n=parseInt(t[2]||"256");return Pl(0!==n&&n<=256&&n%8==0,"invalid "+t[1]+" bit length","param",e),new wh(n/8,"int"===t[1],e.name)}if(t=e.type.match(vd),t){let n=parseInt(t[1]);return Pl(0!==n&&n<=32,"invalid bytes length","param",e),new fh(n,e.name)}Pl(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map((e=>this.#u(ld.from(e))));return new Ph(t,"_").defaultValue()}encode(e,t){Cl(t.length,e.length,"types/values length mismatch");const n=e.map((e=>this.#u(ld.from(e)))),r=new Ph(n,"_"),s=new lu;return r.encode(s,t),s.data}decode(e,t,n){const r=e.map((e=>this.#u(ld.from(e))));return new Ph(r,"_").decode(new uu(t,n))}static defaultAbiCoder(){return null==Ed&&(Ed=new kd),Ed}static getBuiltinCallException(e,t,n){return function(e,t,n,r){let s="missing revert data",i=null,a=null;if(n){s="execution reverted";const e=Tl(n);if(n=Ll(n),0===e.length)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(e.length%32!=4)s+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===Ll(e.slice(0,4)))try{i=r.decode(["string"],e.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch(e){s+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===Ll(e.slice(0,4)))try{const t=Number(r.decode(["uint256"],e.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[t]},i=`Panic due to ${wd.get(t)||"UNKNOWN"}(${t})`,s+=`: ${i}`}catch(e){s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const o={to:t.to?Xu(t.to):null,data:t.data||"0x"};return t.from&&(o.from=Xu(t.from)),_l(s,"CALL_EXCEPTION",{action:e,data:n,reason:i,transaction:o,invocation:null,revert:a})}(e,t,n,kd.defaultAbiCoder())}}function _d(e){return e&&"function"==typeof e.getAddress}async function xd(e,t){const n=await t;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||(xl("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),Pl(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),Xu(n)}function Pd(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?Xu(e):(xl(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),xd(e,t.resolveName(e))):_d(e)?xd(e,e.getAddress()):e&&"function"==typeof e.then?xd(e,e):void Pl(!1,"unsupported addressable value","target",e)}const Cd=new Uint8Array(32);Cd.fill(0);const Sd=BigInt(-1),Id=BigInt(0),Od=BigInt(1),Td=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Nd=Zl(Od,32),jd=Zl(Id,32),Ud={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ld=["name","version","chainId","verifyingContract","salt"];function Rd(e){return function(t){return Pl("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Bd={name:Rd("name"),version:Rd("version"),chainId:function(e){const t=Kl(e,"domain.chainId");return Pl(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):eu(t)},verifyingContract:function(e){try{return Xu(e).toLowerCase()}catch(e){}Pl(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=Tl(e,"domain.salt");return Pl(32===t.length,'invalid domain value "salt"',"domain.salt",e),Ll(t)}};function Md(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const n=""===t[1],r=parseInt(t[2]||"256");Pl(r%8==0&&0!==r&&r<=256&&(null==t[2]||t[2]===String(r)),"invalid numeric width","type",e);const s=ql(Td,n?r-1:r),i=n?(s+Od)*Sd:Id;return function(t){const r=Kl(t,"value");return Pl(r>=i&&r<=s,`value out-of-bounds for ${e}`,"value",r),Zl(n?Wl(r,256):r,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return Pl(0!==n&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(t){return Pl(Tl(t).length===n,`invalid length for ${e}`,"value",t),function(e){const t=Tl(e),n=t.length%32;return n?Rl([t,Cd.slice(n)]):Ll(t)}(t)}}}switch(e){case"address":return function(e){return Fl(Xu(e),32)};case"bool":return function(e){return e?Nd:jd};case"bytes":return function(e){return Wu(e)};case"string":return function(e){return Ch(e)}}return null}function Dd(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class Fd{primaryType;#h;get types(){return JSON.parse(this.#h)}#d;#f;constructor(e){this.#h=JSON.stringify(e),this.#d=new Map,this.#f=new Map;const t=new Map,n=new Map,r=new Map;Object.keys(e).forEach((e=>{t.set(e,new Set),n.set(e,[]),r.set(e,new Set)}));for(const r in e){const s=new Set;for(const i of e[r]){Pl(!s.has(i.name),`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(r)}`,"types",e),s.add(i.name);const a=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;Pl(a!==r,`circular type reference to ${JSON.stringify(a)}`,"types",e);Md(a)||(Pl(n.has(a),`unknown type ${JSON.stringify(a)}`,"types",e),n.get(a).push(r),t.get(r).add(a))}}const s=Array.from(n.keys()).filter((e=>0===n.get(e).length));Pl(0!==s.length,"missing primary type","types",e),Pl(1===s.length,`ambiguous primary types or unused types: ${s.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),vl(this,{primaryType:s[0]}),function s(i,a){Pl(!a.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",e),a.add(i);for(const e of t.get(i))if(n.has(e)){s(e,a);for(const t of a)r.get(t).add(e)}a.delete(i)}(this.primaryType,new Set);for(const[t,n]of r){const r=Array.from(n);r.sort(),this.#d.set(t,Dd(t,e[t])+r.map((t=>Dd(t,e[t]))).join(""))}}getEncoder(e){let t=this.#f.get(e);return t||(t=this.#p(e),this.#f.set(e,t)),t}#p(e){{const t=Md(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],n=this.getEncoder(e);return r=>{Pl(!t[3]||parseInt(t[3])===r.length,`array length mismatch; expected length ${parseInt(t[3])}`,"value",r);let s=r.map(n);return this.#d.has(e)&&(s=s.map(Wu)),Wu(Rl(s))}}const n=this.types[e];if(n){const t=Ch(this.#d.get(e));return e=>{const r=n.map((({name:t,type:n})=>{const r=this.getEncoder(n)(e[t]);return this.#d.has(n)?Wu(r):r}));return r.unshift(t),Rl(r)}}Pl(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#d.get(e);return Pl(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Wu(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Md(e))return n(e,t);const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r)return Pl(!r[3]||parseInt(r[3])===t.length,`array length mismatch; expected length ${parseInt(r[3])}`,"value",t),t.map((e=>this._visit(r[1],e,n)));const s=this.types[e];if(s)return s.reduce(((e,{name:r,type:s})=>(e[r]=this._visit(s,t[r],n),e)),{});Pl(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Fd(e)}static getPrimaryType(e){return Fd.from(e).primaryType}static hashStruct(e,t,n){return Fd.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(null==e[n])continue;const r=Ud[n];Pl(r,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:r})}return t.sort(((e,t)=>Ld.indexOf(e.name)-Ld.indexOf(t.name))),Fd.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return Rl(["0x1901",Fd.hashDomain(e),Fd.from(t).hash(n)])}static hash(e,t,n){return Wu(Fd.encode(e,t,n))}static async resolveNames(e,t,n,r){e=Object.assign({},e);for(const t in e)null==e[t]&&delete e[t];const s={};e.verifyingContract&&!jl(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const i=Fd.from(t);i.visit(n,((e,t)=>("address"!==e||jl(t,20)||(s[t]="0x"),t)));for(const e in s)s[e]=await r(e);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=i.visit(n,((e,t)=>"address"===e&&s[t]?s[t]:t)),{domain:e,value:n}}static getPayload(e,t,n){Fd.hashDomain(e);const r={},s=[];Ld.forEach((t=>{const n=e[t];null!=n&&(r[t]=Bd[t](n),s.push({name:t,type:Ud[t]}))}));const i=Fd.from(t),a=Object.assign({},t);return Pl(null==a.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=s,i.encode(n),{types:a,domain:r,primaryType:i.primaryType,message:i.visit(n,((e,t)=>{if(e.match(/^bytes(\d*)/))return Ll(Tl(t));if(e.match(/^u?int/))return Kl(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return Pl("string"==typeof t,"invalid string","value",t),t}Pl(!1,"unsupported type","type",e)}))}}}function $d(e,t){return{address:Xu(e),storageKeys:t.map(((e,t)=>(Pl(jl(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase())))}}function Gd(e){if(Array.isArray(e))return e.map(((t,n)=>Array.isArray(t)?(Pl(2===t.length,"invalid slot set",`value[${n}]`,t),$d(t[0],t[1])):(Pl(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),$d(t.address,t.storageKeys))));Pl(null!=e&&"object"==typeof e,"invalid access list","value",e);const t=Object.keys(e).map((t=>{const n=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return $d(t,Object.keys(n).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}let Hd=async function(e,t){const n=e.url.split(":")[0].toLowerCase();let r;if(xl("http"===n||"https"===n,`unsupported protocol ${n}`,"UNSUPPORTED_OPERATION",{info:{protocol:n},operation:"request"}),xl("https"===n||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"}),t){const e=new AbortController;r=e.signal,t.addListener((()=>{e.abort()}))}const s={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:r},i=await fetch(e.url,s),a={};i.headers.forEach(((e,t)=>{a[t.toLowerCase()]=e}));const o=await i.arrayBuffer(),c=null==o?null:new Uint8Array(o);return{statusCode:i.status,statusMessage:i.statusText,headers:a,body:c}};const zd=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Wd=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let qd=!1;async function Kd(e,t){try{const t=e.match(zd);if(!t)throw new Error("invalid data");return new ef(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return Tl(t)}(t[3]):kh(t[3].replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new ef(599,"BAD REQUEST (invalid data: URI)",{},null,new Xd(e))}}function Vd(e){return async function(t,n){try{const n=t.match(Wd);if(!n)throw new Error("invalid link");return new Xd(`${e}${n[2]}`)}catch(e){return new ef(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Xd(t))}}}const Jd={data:Kd,ipfs:Vd("https://gateway.ipfs.io/ipfs/")},Qd=new WeakMap;class Yd{#g;#m;constructor(e){this.#g=[],this.#m=!1,Qd.set(e,(()=>{if(!this.#m){this.#m=!0;for(const e of this.#g)setTimeout((()=>{e()}),0);this.#g=[]}}))}addListener(e){xl(!this.#m,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#g.push(e)}get cancelled(){return this.#m}checkSignal(){xl(!this.cancelled,"cancelled","CANCELLED",{})}}function Zd(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}class Xd{#y;#b;#w;#v;#A;#E;#k;#_;#x;#P;#C;#S;#I;#O;get url(){return this.#E}set url(e){this.#E=String(e)}get body(){return null==this.#k?null:new Uint8Array(this.#k)}set body(e){if(null==e)this.#k=void 0,this.#_=void 0;else if("string"==typeof e)this.#k=kh(e),this.#_="text/plain";else if(e instanceof Uint8Array)this.#k=e,this.#_="application/octet-stream";else{if("object"!=typeof e)throw new Error("invalid body");this.#k=kh(JSON.stringify(e)),this.#_="application/json"}}hasBody(){return null!=this.#k}get method(){return this.#v?this.#v:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#v=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#w);return this.#x&&(e.authorization=`Basic ${function(e){const t=Tl(e);let n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(kh(this.#x))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#_&&(e["content-type"]=this.#_),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#w[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#w={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#x||null}setCredentials(e,t){Pl(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#x=`${e}:${t}`}get allowGzip(){return this.#b}set allowGzip(e){this.#b=!!e}get allowInsecureAuthentication(){return!!this.#y}set allowInsecureAuthentication(e){this.#y=!!e}get timeout(){return this.#A}set timeout(e){Pl(e>=0,"timeout must be non-zero","timeout",e),this.#A=e}get preflightFunc(){return this.#P||null}set preflightFunc(e){this.#P=e}get processFunc(){return this.#C||null}set processFunc(e){this.#C=e}get retryFunc(){return this.#S||null}set retryFunc(e){this.#S=e}constructor(e){this.#E=String(e),this.#y=!1,this.#b=!0,this.#w={},this.#v="",this.#A=3e5,this.#O={slotInterval:250,maxAttempts:12}}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#k?Ll(this.#k):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#O.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#O.maxAttempts=e.maxAttempts)}async#T(e,t,n,r,s){if(e>=this.#O.maxAttempts)return s.makeServerError("exceeded maximum retry limit");xl(tf()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),n>0&&await function(e){return new Promise((t=>setTimeout(t,e)))}(n);let i=this.clone();const a=(i.url.split(":")[0]||"").toLowerCase();if(a in Jd){const e=await Jd[a](i.url,Zd(r.#I));if(e instanceof ef){let t=e;if(this.processFunc){Zd(r.#I);try{t=await this.processFunc(i,t)}catch(e){null!=e.throttle&&"number"==typeof e.stall||t.makeServerError("error in post-processing function",e).assertOk()}}return t}i=e}this.preflightFunc&&(i=await this.preflightFunc(i));const o=await Hd(i,Zd(r.#I));let c=new ef(o.statusCode,o.statusMessage,o.headers,o.body,r);if(301===c.statusCode||302===c.statusCode){try{const n=c.headers.location||"";return i.redirect(n).#T(e+1,t,0,r,c)}catch(e){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,e))){const n=c.headers["retry-after"];let s=this.#O.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof n&&n.match(/^[1-9][0-9]*$/)&&(s=parseInt(n)),i.clone().#T(e+1,t,s,r,c)}if(this.processFunc){Zd(r.#I);try{c=await this.processFunc(i,c)}catch(n){null!=n.throttle&&"number"==typeof n.stall||c.makeServerError("error in post-processing function",n).assertOk();let s=this.#O.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return n.stall>=0&&(s=n.stall),i.clone().#T(e+1,t,s,r,c)}}return c}send(){return xl(null==this.#I,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#I=new Yd(this),this.#T(0,tf()+this.timeout,0,this,new ef(0,"",{},null,this))}cancel(){xl(null!=this.#I,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Qd.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();xl("GET"===this.method&&("https"!==t||"http"!==n)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const r=new Xd(e);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,r.#w=Object.assign({},this.#w),this.#k&&(r.#k=new Uint8Array(this.#k)),r.#_=this.#_,r}clone(){const e=new Xd(this.url);return e.#v=this.#v,this.#k&&(e.#k=this.#k),e.#_=this.#_,e.#w=Object.assign({},this.#w),e.#x=this.#x,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#P=this.#P,e.#C=this.#C,e.#S=this.#S,e}static lockConfig(){qd=!0}static getGateway(e){return Jd[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(qd)throw new Error("gateways locked");Jd[e]=t}static registerGetUrl(e){if(qd)throw new Error("gateways locked");Hd=e}static createDataGateway(){return Kd}static createIpfsGatewayFunc(e){return Vd(e)}}class ef{#N;#j;#w;#k;#U;#L;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#k?Ll(this.#k):"null"}>`}get statusCode(){return this.#N}get statusMessage(){return this.#j}get headers(){return Object.assign({},this.#w)}get body(){return null==this.#k?null:new Uint8Array(this.#k)}get bodyText(){try{return null==this.#k?"":_h(this.#k)}catch(e){xl(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){xl(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,n,r,s){this.#N=e,this.#j=t,this.#w=Object.keys(n).reduce(((e,t)=>(e[t.toLowerCase()]=String(n[t]),e)),{}),this.#k=null==r?null:new Uint8Array(r),this.#U=s||null,this.#L={message:""}}makeServerError(e,t){let n;n=e?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:`CLIENT ESCALATED SERVER ERROR (${e=`${this.statusCode} ${this.statusMessage}`})`;const r=new ef(599,n,this.headers,this.body,this.#U||void 0);return r.#L={message:e,error:t},r}throwThrottleError(e,t){null==t?t=-1:Pl(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw vl(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#k}get request(){return this.#U}ok(){return""===this.#L.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#L;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`),xl(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t})}}function tf(){return(new Date).getTime()}const nf="0x0000000000000000000000000000000000000000";class rf{fragment;name;signature;topic;args;constructor(e,t,n){const r=e.name,s=e.format();vl(this,{fragment:e,name:r,signature:s,topic:t,args:n})}}class sf{fragment;name;args;signature;selector;value;constructor(e,t,n,r){const s=e.name,i=e.format();vl(this,{fragment:e,name:s,args:n,signature:i,selector:t,value:r})}}class af{fragment;name;args;signature;selector;constructor(e,t,n){const r=e.name,s=e.format();vl(this,{fragment:e,name:r,args:n,signature:s,selector:t})}}class of{hash;_isIndexed;static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){vl(this,{hash:e,_isIndexed:!0})}}const cf={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},lf={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&cf[e.toString()]&&(t=cf[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class uf{fragments;deploy;fallback;receive;#R;#B;#M;#D;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#M=new Map,this.#R=new Map,this.#B=new Map;const n=[];for(const e of t)try{n.push(ud.from(e))}catch(e){console.log("EE",e)}vl(this,{fragments:Object.freeze(n)});let r=null,s=!1;this.#D=this.getAbiCoder(),this.fragments.forEach(((e,t)=>{let n;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void vl(this,{deploy:e});case"fallback":return void(0===e.inputs.length?s=!0:(Pl(!r||e.payable!==r.payable,"conflicting fallback fragments",`fragments[${t}]`,e),r=e,s=r.payable));case"function":n=this.#M;break;case"event":n=this.#B;break;case"error":n=this.#R;break;default:return}const i=e.format();n.has(i)||n.set(i,e)})),this.deploy||vl(this,{deploy:gd.from("constructor()")}),vl(this,{fallback:r,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map((e=>e.format(t)))}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return kd.defaultAbiCoder()}#F(e,t,n){if(jl(e)){const t=e.toLowerCase();for(const e of this.#M.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of this.#M)t.split("(")[0]===e&&r.push(n);if(t){const e=t.length>0?t[t.length-1]:null;let n=t.length,s=!0;sh.isTyped(e)&&"overrides"===e.type&&(s=!1,n--);for(let e=r.length-1;e>=0;e--){const t=r[e].inputs.length;t===n||s&&t===n-1||r.splice(e,1)}for(let e=r.length-1;e>=0;e--){const n=r[e].inputs;for(let s=0;s<t.length;s++)if(sh.isTyped(t[s])){if(s>=n.length){if("overrides"===t[s].type)continue;r.splice(e,1);break}if(t[s].type!==n[s].baseType){r.splice(e,1);break}}}}if(1===r.length&&t&&t.length!==r[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&r.splice(0,1)}if(0===r.length)return null;if(r.length>1&&n){Pl(!1,`ambiguous function description (i.e. matches ${r.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e)}return r[0]}const r=this.#M.get(yd.from(e).format());return r||null}getFunctionName(e){const t=this.#F(e,null,!1);return Pl(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#F(e,null,!1)}getFunction(e,t){return this.#F(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#M.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const r=t[n];e(this.#M.get(r),n)}}#$(e,t,n){if(jl(e)){const t=e.toLowerCase();for(const e of this.#B.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of this.#B)t.split("(")[0]===e&&r.push(n);if(t){for(let e=r.length-1;e>=0;e--)r[e].inputs.length<t.length&&r.splice(e,1);for(let e=r.length-1;e>=0;e--){const n=r[e].inputs;for(let s=0;s<t.length;s++)if(sh.isTyped(t[s])&&t[s].type!==n[s].baseType){r.splice(e,1);break}}}if(0===r.length)return null;if(r.length>1&&n){Pl(!1,`ambiguous event description (i.e. matches ${r.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e)}return r[0]}const r=this.#B.get(pd.from(e).format());return r||null}getEventName(e){const t=this.#$(e,null,!1);return Pl(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#$(e,null,!1)}getEvent(e,t){return this.#$(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#B.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const r=t[n];e(this.#B.get(r),n)}}getError(e,t){if(jl(e)){const t=e.toLowerCase();if(lf[t])return fd.from(lf[t].signature);for(const e of this.#R.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[n,r]of this.#R)n.split("(")[0]===e&&t.push(r);if(0===t.length)return"Error"===e?fd.from("error Error(string)"):"Panic"===e?fd.from("error Panic(uint256)"):null;if(t.length>1){Pl(!1,`ambiguous error description (i.e. ${t.map((e=>JSON.stringify(e.format()))).join(", ")})`,"name",e)}return t[0]}if("Error(string)"===(e=fd.from(e).format()))return fd.from("error Error(string)");if("Panic(uint256)"===e)return fd.from("error Panic(uint256)");const n=this.#R.get(e);return n||null}forEachError(e){const t=Array.from(this.#R.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const r=t[n];e(this.#R.get(r),n)}}_decodeParams(e,t){return this.#D.decode(e,t)}_encodeParams(e,t){return this.#D.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);Pl(t,"unknown error","fragment",e),e=t}return Pl(Ml(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ml(t,4))}encodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);Pl(t,"unknown error","fragment",e),e=t}return Rl([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);Pl(t,"unknown function","fragment",e),e=t}return Pl(Ml(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ml(t,4))}encodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);Pl(t,"unknown function","fragment",e),e=t}return Rl([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);Pl(t,"unknown function","fragment",e),e=t}let n="invalid length for result data";const r=Nl(t);if(r.length%32==0)try{return this.#D.decode(e.outputs,r)}catch(e){n="could not decode result data"}xl(!1,n,"BAD_DATA",{value:Ll(r),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=Tl(e,"data"),r=kd.getBuiltinCallException("call",t,n);if(r.message.startsWith("execution reverted (unknown custom error)")){const e=Ll(n.slice(0,4)),t=this.getError(e);if(t)try{const e=this.#D.decode(t.inputs,n.slice(4));r.revert={name:t.name,signature:t.format(),args:e},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch(e){r.message="execution reverted (coult not decode custom error)"}}const s=this.parseTransaction(t);return s&&(r.invocation={method:s.name,signature:s.signature,args:s.args}),r}encodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);Pl(t,"unknown function","fragment",e),e=t}return Ll(this.#D.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){const t=this.getEvent(e);Pl(t,"unknown event","eventFragment",e),e=t}xl(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const r=(e,t)=>"string"===e.type?Ch(t):"bytes"===e.type?Wu(Ll(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=Zl(t):e.type.match(/^bytes/)?t=function(e,t){return Dl(e,t,!1)}(t,32):"address"===e.type&&this.#D.encode(["address"],[t]),Fl(Ll(t),32));for(t.forEach(((t,s)=>{const i=e.inputs[s];i.indexed?null==t?n.push(null):"array"===i.baseType||"tuple"===i.baseType?Pl(!1,"filtering with tuples or arrays not supported","contract."+i.name,t):Array.isArray(t)?n.push(t.map((e=>r(i,e)))):n.push(r(i,t)):Pl(null==t,"cannot filter non-indexed parameters; must be null","contract."+i.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){if("string"==typeof e){const t=this.getEvent(e);Pl(t,"unknown event","eventFragment",e),e=t}const n=[],r=[],s=[];return e.anonymous||n.push(e.topicHash),Pl(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,i)=>{const a=t[i];if(e.indexed)if("string"===e.type)n.push(Ch(a));else if("bytes"===e.type)n.push(Wu(a));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this.#D.encode([e.type],[a]))}else r.push(e),s.push(a)})),{data:this.#D.encode(r,s),topics:n}}decodeEventLog(e,t,n){if("string"==typeof e){const t=this.getEvent(e);Pl(t,"unknown event","eventFragment",e),e=t}if(null!=n&&!e.anonymous){const t=e.topicHash;Pl(jl(n[0],32)&&n[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],s=[],i=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(ld.from({type:"bytes32",name:e.name})),i.push(!0)):(r.push(e),i.push(!1)):(s.push(e),i.push(!1))}));const a=null!=n?this.#D.decode(r,Rl(n)):null,o=this.#D.decode(s,t,!0),c=[],l=[];let u=0,h=0;return e.inputs.forEach(((e,t)=>{let n=null;if(e.indexed)if(null==a)n=new of(null);else if(i[t])n=new of(a[h++]);else try{n=a[h++]}catch(e){n=e}else try{n=o[u++]}catch(e){n=e}c.push(n),l.push(e.name||null)})),au.fromItems(c,l)}parseTransaction(e){const t=Tl(e.data,"tx.data"),n=Kl(null!=e.value?e.value:0,"tx.value"),r=this.getFunction(Ll(t.slice(0,4)));if(!r)return null;const s=this.#D.decode(r.inputs,t.slice(4));return new sf(r,r.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new rf(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=Ll(e),n=this.getError(Ml(t,0,4));if(!n)return null;const r=this.#D.decode(n.inputs,Ml(t,4));return new af(n,n.selector,r)}static from(e){return e instanceof uf?e:"string"==typeof e?new uf(JSON.parse(e)):"function"==typeof e.format?new uf(e.format("json")):new uf(e)}}const hf=BigInt(0);function df(e){return null==e?null:e}function ff(e){return null==e?null:e.toString()}class pf{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,n){vl(this,{gasPrice:df(e),maxFeePerGas:df(t),maxPriorityFeePerGas:df(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:ff(e),maxFeePerGas:ff(t),maxPriorityFeePerGas:ff(n)}}}function gf(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=Ll(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of n)r in e&&null!=e[r]&&(t[r]=Kl(e[r],`request.${r}`));const r="type,nonce".split(/,/);for(const n of r)n in e&&null!=e[n]&&(t[n]=Yl(e[n],`request.${n}`));return e.accessList&&(t.accessList=Gd(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),t}class mf{provider;number;hash;timestamp;parentHash;nonce;difficulty;gasLimit;gasUsed;miner;extraData;baseFeePerGas;#G;constructor(e,t){this.#G=e.transactions.map((e=>"string"!=typeof e?new wf(e,t):e)),vl(this,{provider:t,hash:df(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,miner:e.miner,extraData:e.extraData,baseFeePerGas:df(e.baseFeePerGas)})}get transactions(){return this.#G.map((e=>"string"==typeof e?e:e.hash))}get prefetchedTransactions(){const e=this.#G.slice();return 0===e.length?[]:(xl("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:r,gasUsed:s,hash:i,miner:a,nonce:o,number:c,parentHash:l,timestamp:u,transactions:h}=this;return{_type:"Block",baseFeePerGas:ff(e),difficulty:ff(t),extraData:n,gasLimit:ff(r),gasUsed:ff(s),hash:i,miner:a,nonce:o,number:c,parentHash:l,timestamp:u,transactions:h}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#G.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#G[e];else{const n=e.toLowerCase();for(const e of this.#G){if("string"==typeof e){if(e!==n)continue;t=e;break}if(e.hash!==n){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"==typeof e)return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;Pl(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:(e=this).hash,number:e.number};var e}}class yf{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const n=Object.freeze(e.topics.slice());vl(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:r,index:s,removed:i,topics:a,transactionHash:o,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:r,index:s,removed:i,topics:a,transactionHash:o,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return xl(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return xl(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return xl(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}class bf{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;cumulativeGasUsed;gasPrice;type;status;root;#H;constructor(e,t){this.#H=Object.freeze(e.logs.map((e=>new yf(e,t))));let n=hf;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),vl(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,gasPrice:n,type:e.type,status:e.status,root:e.root})}get logs(){return this.#H}toJSON(){const{to:e,from:t,contractAddress:n,hash:r,index:s,blockHash:i,blockNumber:a,logsBloom:o,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:a,contractAddress:n,cumulativeGasUsed:ff(this.cumulativeGasUsed),from:t,gasPrice:ff(this.gasPrice),gasUsed:ff(this.gasUsed),hash:r,index:s,logs:c,logsBloom:o,root:u,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Af(this)}reorderedEvent(e){return xl(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),vf(this,e)}}class wf{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;data;value;chainId;signature;accessList;#z;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.#z=-1}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:r,type:s,to:i,from:a,nonce:o,data:c,signature:l,accessList:u}=this;return{_type:"TransactionReceipt",accessList:u,blockNumber:e,blockHash:t,chainId:ff(this.chainId),data:c,from:a,gasLimit:ff(this.gasLimit),gasPrice:ff(this.gasPrice),hash:r,maxFeePerGas:ff(this.maxFeePerGas),maxPriorityFeePerGas:ff(this.maxPriorityFeePerGas),nonce:o,signature:l,to:i,index:n,type:s,value:ff(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await wl({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=null==e?1:e,r=null==t?0:t;let s=this.#z,i=-1,a=-1===s;const o=async()=>{if(a)return null;const{blockNumber:e,nonce:t}=await wl({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(s=e);if(a)return null;const r=await this.getTransaction();if(!r||null==r.blockNumber)for(-1===i&&(i=s-3,i<this.#z&&(i=this.#z));i<=e;){if(a)return null;const t=await this.provider.getBlock(i,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let r=0;r<t.length;r++){const i=await t.getTransaction(r);if(i.from===this.from&&i.nonce===this.nonce){if(a)return null;const t=await this.provider.getTransactionReceipt(i.hash);if(null==t)return;if(e-t.blockNumber+1<n)return;let r="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?r="repriced":"0x"===i.data&&i.from===i.to&&i.value===hf&&(r="cancelled"),xl(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===r||"cancelled"===r,reason:r,replacement:i.replaceableTransaction(s),hash:i.hash,receipt:t})}}i++}},c=e=>{if(null==e||0!==e.status)return e;xl(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},l=await this.provider.getTransactionReceipt(this.hash);if(0===n)return c(l);if(l){if(await l.confirmations()>=n)return c(l)}else if(await o(),0===n)return null;const u=new Promise(((e,t)=>{const i=[],l=()=>{i.forEach((e=>e()))};if(i.push((()=>{a=!0})),r>0){const e=setTimeout((()=>{l(),t(_l("wait for transaction timeout","TIMEOUT"))}),r);i.push((()=>{clearTimeout(e)}))}const u=async r=>{if(await r.confirmations()>=n){l();try{e(c(r))}catch(e){t(e)}}};if(i.push((()=>{this.provider.off(this.hash,u)})),this.provider.on(this.hash,u),s>=0){const e=async()=>{try{await o()}catch(e){if(El(e,"TRANSACTION_REPLACED"))return l(),void t(e)}a||this.provider.once("block",e)};i.push((()=>{this.provider.off("block",e)})),this.provider.once("block",e)}}));return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}removedEvent(){return xl(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Af(this)}reorderedEvent(e){return xl(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),xl(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),vf(this,e)}replaceableTransaction(e){Pl(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new wf(this,this.provider);return t.#z=e,t}}function vf(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function Af(e){return{orphan:"drop-transaction",tx:e}}class Ef{filter;emitter;#W;constructor(e,t,n){this.#W=t,vl(this,{emitter:e,filter:n})}async removeListener(){null!=this.#W&&await this.emitter.off(this.filter,this.#W)}}class kf extends yf{interface;fragment;args;constructor(e,t,n){super(e,e.provider);vl(this,{args:t.decodeEventLog(n,e.data,e.topics),fragment:n,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class _f extends yf{error;constructor(e,t){super(e,e.provider),vl(this,{error:t})}}class xf extends bf{#q;constructor(e,t,n){super(n,t),this.#q=e}get logs(){return super.logs.map((e=>{const t=e.topics.length?this.#q.getEvent(e.topics[0]):null;if(t)try{return new kf(e,this.#q,t)}catch(t){return new _f(e,t)}return e}))}}class Pf extends wf{#q;constructor(e,t,n){super(n,t),this.#q=e}async wait(e){const t=await super.wait(e);return null==t?null:new xf(this.#q,this.provider,t)}}class Cf extends Ef{log;constructor(e,t,n,r){super(e,t,n),vl(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Sf extends Cf{constructor(e,t,n,r,s){super(e,t,n,new kf(s,e.interface,r));vl(this,{args:e.interface.decodeEventLog(r,this.log.data,this.log.topics),fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const If=BigInt(0);function Of(e){return e&&"function"==typeof e.call}function Tf(e){return e&&"function"==typeof e.estimateGas}function Nf(e){return e&&"function"==typeof e.resolveName}function jf(e){return e&&"function"==typeof e.sendTransaction}class Uf{#K;fragment;constructor(e,t,n){if(vl(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const r=Lf(e.runner,"resolveName"),s=Nf(r)?r:null;this.#K=async function(){const r=await Promise.all(t.inputs.map(((e,t)=>null==n[t]?null:e.walkAsync(n[t],((e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map((e=>Pd(e,s)))):Pd(t,s):t)))));return e.interface.encodeFilterTopics(t,r)}()}getTopicFilter(){return this.#K}}function Lf(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function Rf(e){return null==e?null:e.provider||null}async function Bf(e,t){const n=sh.dereference(e,"overrides");Pl("object"==typeof n,"invalid overrides parameter","overrides",e);const r=gf(n);return Pl(null==r.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Pl(null==r.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=await Pd(r.from)),r}function Mf(e){const t=async function(t){const n=await Bf(t,["data"]);n.to=await e.getAddress();const r=e.interface,s=Kl(n.value||If,"overrides.value")===If,i="0x"===(n.data||"0x");!r.fallback||r.fallback.payable||!r.receive||i||s||Pl(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),Pl(r.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data);return Pl(r.receive||r.fallback&&r.fallback.payable||s,"cannot send value to non-payable fallback","overrides.value",n.value),Pl(r.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data),n},n=async function(n){const r=e.runner;xl(jf(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await r.sendTransaction(await t(n)),i=Rf(e.runner);return new Pf(e.interface,i,s)},r=async e=>await n(e);return vl(r,{_contract:e,estimateGas:async function(n){const r=Lf(e.runner,"estimateGas");return xl(Tf(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await t(n))},populateTransaction:t,send:n,staticCall:async function(n){const r=Lf(e.runner,"call");xl(Of(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const s=await t(n);try{return await r.call(s)}catch(t){if(kl(t)&&t.data)throw e.interface.makeError(t.data,s);throw t}}}),r}function Df(e,t){const n=function(...n){const r=e.interface.getFunction(t,n);return xl(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),r},r=async function(...t){const r=n(...t);let s={};if(r.inputs.length+1===t.length&&(s=await Bf(t.pop())),r.inputs.length!==t.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const i=await async function(e,t,n){const r=Lf(e,"resolveName"),s=Nf(r)?r:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(n[t],((e,t)=>(t=sh.dereference(t,e),"address"===e?Pd(t,s):t))))))}(e.runner,r.inputs,t);return Object.assign({},s,await wl({to:e.getAddress(),data:e.interface.encodeFunctionData(r,i)}))},s=async function(...e){const t=await a(...e);return 1===t.length?t[0]:t},i=async function(...t){const n=e.runner;xl(jf(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await n.sendTransaction(await r(...t)),i=Rf(e.runner);return new Pf(e.interface,i,s)},a=async function(...t){const s=Lf(e.runner,"call");xl(Of(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await r(...t);let a="0x";try{a=await s.call(i)}catch(t){if(kl(t)&&t.data)throw e.interface.makeError(t.data,i);throw t}const o=n(...t);return e.interface.decodeFunctionResult(o,a)},o=async(...e)=>n(...e).constant?await s(...e):await i(...e);return vl(o,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:async function(...t){const n=Lf(e.runner,"estimateGas");return xl(Tf(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await r(...t))},populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(o,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getFunction(t);return xl(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),o}const Ff=Symbol.for("_ethersInternal_contract"),$f=new WeakMap;function Gf(e){return $f.get(e[Ff])}async function Hf(e,t){let n,r=null;if(Array.isArray(t)){const r=function(t){if(jl(t,32))return t;const n=e.interface.getEvent(t);return Pl(n,"unknown fragment","name",t),n.topicHash};n=t.map((e=>null==e?null:Array.isArray(e)?e.map(r):r(e)))}else"*"===t?n=[null]:"string"==typeof t?jl(t,32)?n=[t]:(r=e.interface.getEvent(t),Pl(r,"unknown fragment","event",t),n=[r.topicHash]):(s=t)&&"object"==typeof s&&"getTopicFilter"in s&&"function"==typeof s.getTopicFilter&&s.fragment?n=await t.getTopicFilter():"fragment"in t?(r=t.fragment,n=[r.topicHash]):Pl(!1,"unknown event name","event",t);var s;n=n.map((e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()}));return{fragment:r,tag:n.map((e=>null==e?"null":Array.isArray(e)?e.join("|"):e)).join("&"),topics:n}}async function zf(e,t){const{subs:n}=Gf(e);return n.get((await Hf(e,t)).tag)||null}async function Wf(e,t,n){const r=Rf(e.runner);xl(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:a}=await Hf(e,n),{addr:o,subs:c}=Gf(e);let l=c.get(i);if(!l){const t={address:o||e,topics:a},u=t=>{let r=s;if(null==r)try{r=e.interface.getEvent(t.topics[0])}catch(e){}if(r){const i=r,a=s?e.interface.decodeEventLog(s,t.data,t.topics):[];Kf(e,n,a,(r=>new Sf(e,r,n,i,t)))}else Kf(e,n,[],(r=>new Cf(e,r,n,t)))};let h=[];l={tag:i,listeners:[],start:()=>{h.length||h.push(r.on(t,u))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),r.off(t,u)}},c.set(i,l)}return l}let qf=Promise.resolve();async function Kf(e,t,n,r){try{await qf}catch(e){}const s=async function(e,t,n,r){await qf;const s=await zf(e,t);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter((({listener:t,once:s})=>{const i=Array.from(n);r&&i.push(r(s?null:t));try{t.call(e,...i)}catch(e){}return!s})),0===s.listeners.length&&(s.stop(),Gf(e).subs.delete(s.tag)),i>0}(e,t,n,r);return qf=s,await s}const Vf=["then"];class Jf{target;interface;runner;filters;[Ff];fallback;constructor(e,t,n,r){Pl("string"==typeof e||_d(e),"invalid value for Contract target","target",e),null==n&&(n=null);const s=uf.from(t);let i;vl(this,{target:e,runner:n,interface:s}),Object.defineProperty(this,Ff,{value:{}});let a=null,o=null;if(r){const e=Rf(n);o=new Pf(this.interface,e,r)}let c=new Map;if("string"==typeof e)if(jl(e))a=e,i=Promise.resolve(e);else{const t=Lf(n,"resolveName");if(!Nf(t))throw _l("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=t.resolveName(e).then((t=>{if(null==t)throw _l("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Gf(this).addr=t,t}))}else i=e.getAddress().then((e=>{if(null==e)throw new Error("TODO");return Gf(this).addr=e,e}));!function(e,t){$f.set(e[Ff],t)}(this,{addrPromise:i,addr:a,deployTx:o,subs:c});const l=new Proxy({},{get:(e,t,n)=>{if("symbol"==typeof t||Vf.indexOf(t)>=0)return Reflect.get(e,t,n);try{return this.getEvent(t)}catch(e){if(!El(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>Vf.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return vl(this,{filters:l}),vl(this,{fallback:s.receive||s.fallback?Mf(this):null}),new Proxy(this,{get:(e,t,n)=>{if("symbol"==typeof t||t in e||Vf.indexOf(t)>=0)return Reflect.get(e,t,n);try{return e.getFunction(t)}catch(e){if(!El(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||Vf.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new Jf(this.target,this.interface,e)}attach(e){return new Jf(e,this.interface,this.runner)}async getAddress(){return await Gf(this).addrPromise}async getDeployedCode(){const e=Rf(this.runner);xl(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=Rf(this.runner);return xl(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((e,n)=>{const r=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",r)}catch(e){n(e)}};r()}))}deploymentTransaction(){return Gf(this).deployTx}getFunction(e){"string"!=typeof e&&(e=e.format());return Df(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const n=function(...n){const r=e.interface.getEvent(t,n);return xl(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),r},r=function(...t){return new Uf(e,n(...t),t)};return vl(r,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getEvent(t);return xl(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),r}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){null==t&&(t=0),null==n&&(n="latest");const{addr:r,addrPromise:s}=Gf(this),i=r||await s,{fragment:a,topics:o}=await Hf(this,e),c={address:i,topics:o,fromBlock:t,toBlock:n},l=Rf(this.runner);return xl(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(c)).map((e=>{let t=a;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new kf(e,this.interface,t)}catch(t){return new _f(e,t)}return new yf(e,l)}))}async on(e,t){const n=await Wf(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await Wf(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await Kf(this,e,t,null)}async listenerCount(e){if(e){const t=await zf(this,e);return t?t.listeners.length:0}const{subs:t}=Gf(this);let n=0;for(const{listeners:e}of t.values())n+=e.length;return n}async listeners(e){if(e){const t=await zf(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}const{subs:t}=Gf(this);let n=[];for(const{listeners:e}of t.values())n=n.concat(e.map((({listener:e})=>e)));return n}async off(e,t){const n=await zf(this,e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return null!=t&&0!==n.listeners.length||(n.stop(),Gf(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await zf(this,e);if(!t)return this;t.stop(),Gf(this).subs.delete(t.tag)}else{const{subs:e}=Gf(this);for(const{tag:t,stop:n}of e.values())n(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends Jf{constructor(t,n=null){super(t,e,n)}}}static from(e,t,n){null==n&&(n=null);return new this(e,t,n)}}class Qf extends(function(){return Jf}()){}function Yf(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function n(){return e[t++]<<8|e[t++]}let r=n(),s=1,i=[0,1];for(let e=1;e<r;e++)i.push(s+=n());let a=n(),o=t;t+=a;let c=0,l=0;function u(){return 0==c&&(l=l<<8|e[t++],c=8),l>>--c&1}const h=2**31,d=h>>>1,f=h-1;let p=0;for(let e=0;e<31;e++)p=p<<1|u();let g=[],m=0,y=h;for(;;){let e=Math.floor(((p-m+1)*s-1)/y),t=0,n=r;for(;n-t>1;){let r=t+n>>>1;e<i[r]?n=r:t=r}if(0==t)break;g.push(t);let a=m+Math.floor(y*i[t]/s),o=m+Math.floor(y*i[t+1]/s)-1;for(;0==((a^o)&d);)p=p<<1&f|u(),a=a<<1&f,o=o<<1&f|1;for(;a&~o&536870912;)p=p&d|p<<1&f>>>1|u(),a=a<<1^d,o=(o^d)<<1|d|1;m=a,y=1+o-a}let b=r-4;return g.map((t=>{switch(t-b){case 3:return b+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return b+256+(e[o++]<<8|e[o++]);case 1:return b+e[o++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,n)=>t[e.charCodeAt(0)]=n));let n=e.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,a=0,o=0;s<n;s++)o=o<<6|t[e.charCodeAt(s)],a+=6,a>=8&&(r[i++]=o>>(a-=8));return r}(e)))}function Zf(e){return 1&e?~e>>1:e>>1}function Xf(e,t){let n=Array(e);for(let r=0,s=0;r<e;r++)n[r]=s+=Zf(t());return n}function ep(e,t=0){let n=[];for(;;){let r=e(),s=e();if(!s)break;t+=r;for(let e=0;e<s;e++)n.push(t+e);t+=s+1}return n}function tp(e){return rp((()=>{let t=ep(e);if(t.length)return t}))}function np(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(ip(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(ap(n,e))}return t.flat()}function rp(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function sp(e,t,n){let r=Array(e).fill().map((()=>[]));for(let s=0;s<t;s++)Xf(e,n).forEach(((e,t)=>r[t].push(e)));return r}function ip(e,t){let n=1+t(),r=t(),s=rp(t);return sp(s.length,1+e,t).flatMap(((e,t)=>{let[i,...a]=e;return Array(s[t]).fill().map(((e,t)=>{let s=t*r;return[i+t*n,a.map((e=>e+s))]}))}))}function ap(e,t){return sp(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}var op=Yf("AEgSbwjEDVYByQKaAQsBOQDpATQAngDUAHsAoABoANQAagCNAEQAhABMAHIAOwA9ACsANgAmAGIAHgAvACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGAAeABMAFwAXAA0ADgAWAA8AFAAVBFsF1QEXE0o3xAXUALIArkABaACmAgPGAK6AMDAwMAE/qAYK7P4HQAblMgVYBVkAPSw5Afa3EgfJwgAPA8meNALGCjACjqIChtk/j2+KAsXMAoPzASDgCgDyrgFCAi6OCkCQAOQA4woWABjVuskNDD6eBBx4AP4COhi+D+wKBirqBgSCaA0cBy4ArABqku+mnIAAXAaUJAbqABwAPAyUFvyp/Mo8INAIvCoDshQ8APcubKQAon4ZABgEJtgXAR4AuhnOBPsKIE04CZgJiR8cVlpM5INDABQADQAWAA9sVQAiAA8ASO8W2T30OVnKluYvChEeX05ZPe0AFAANABYAD2wgXUCYAMPsABwAOgzGFryp/AHauQVcBeMC0KACxLEKTR2kZhR0Gm5M9gC8DmgC4gAMLjSKF8qSAoF8ARMcAL4OaALiAAwuAUlQJpJMCwMt/AUpCthqGK4B2EQAciwSeAIyFiIDKCi6OGwAOuIB9iYAyA7MtgEcZIIAsgYABgCK1EoFHNZsGACoKNIBogAAAAAAKy4DnABoAQoaPu43dQQZGACrAcgCIgDgLBJ0OvRQsTOiKDVJBfsoBVoFWbC5BWo7XkITO1hCmHuUZmCh+QwUA8YIJvJ4JASkTAJUVAJ2HKwoAZCkpjZcA0YYBIRiCgDSBqxAMCQHKgI6XgBsAWIgcgCEHhoAlgFKuAAoahgBsMYDOC4iRFQBcFoGZgJmAPJKGAMqAgYASkIArABeAHQALLYGCPTwGo6AAAAKIgAqALQcSAHSAdwIDDKXeYHpAAsAEgA1AD4AOTR3etTBEGAQXQJNCkxtOxUMAq0PpwvmERYM0irM09kANKoH7ANUB+wDVANUB+wH7ANUB+wDVANUA1QDVBwL8BvUwRBgD0kEbgWPBYwE1wiEJkoRggcpCNNUDnQfHEgDRgD9IyZJHTuUMwwlQ0wNTQQH/TZDbKh9OQNIMaxU9pCjA8wyUDltAh5yEqEAKw90HTW2Tn96SHGhCkxPr7WASWNOaAK/Oqk/+QoiCZRvvHdPBj4QGCeiEPQMMAGyATgN6kvVBO4GOATGH3oZFg/KlZkIoi3aDOom4C6egFcj8iqABepL8TzaC0pRZQ9WC2IJ4DpggUsDHgEKIogK2g02CGoQ8ArGaA3iEUIHNgPSSZcAogb+Cw4dMhWyJg1iqQsGOXQG+BrzC4wmrBMmevkF0BoeBkoBJhr8AMwu5IWtWi5cGU9cBgALIiPEFKVQHQ0iQLR4RRoYBxIlpgKOQ21KhFEzHpAh8zw6DWMuEFF5B/I8AhlMC348m0aoRQsRzz6KPUUiRkwpBDJ8LCwniAnMD4IMtnxvAVYJHgmuDG4TLhEUN8IINgcWKpchJxIIHkaSYJcE9JwD8BPOAwgFPAk+BxADshwqEysVJgUKgSHUAvA20i6wAoxWfQEUBcgPIh/cEE1H3Q7mCJgCYgOAJegAKhUeABQimAhAYABcj9VTAi7ICMRqaSNxA2QU5F4RcAeODlQHpBwwFbwc3nDFXgiGBSigrAlYAXIJlgFcBOAIBjVYjJ0gPmdQi1UYmCBeQTxd+QIuDGIVnES6h3UCiA9oEhgBMgFwBzYM/gJ0EeoRaBCSCOiGATWyM/U6IgRMIYAgDgokA0xsywskJvYM9WYBoBJfAwk0OnfrZ6hgsyEX+gcWMsJBXSHuC49PygyZGr4YP1QrGeEHvAPwGvAn50FUBfwDoAAQOkoz6wS6C2YIiAk8AEYOoBQH1BhnCm6MzQEuiAG0lgNUjoACbIwGNAcIAGQIhAV24gAaAqQIoAACAMwDVAA2AqoHmgAWAII+AToDJCwBHuICjAOQCC7IAZIsAfAmBBjADBIA9DRuRwLDrgKAZ2afBdpVAosCRjIBSiIEAktETgOsbt4A2ABIBhDcRAESqEfIF+BAAdxsKADEAPgAAjIHAj4BygHwagC0AVwLLgmfsLIBSuYmAIAAEmgB1AKGANoAMgB87gFQAEoFVvYF0AJMRgEOLhUoVF4BuAMcATABCgB2BsiKosYEHARqB9ACEBgV3gLvKweyAyLcE8pCwgK921IAMhMKNQqkCqNgWF0wAy5vPU0ACx+lPsQ/SwVOO1A7VTtQO1U7UDtVO1A7VTtQO1UDlLzfvN8KaV9CYegMow3RRMU6RhPYYE5gLxPFLbQUvhXLJVMZOhq5JwIl4VUGDwEt0GYtCCk0che5ADwpZYM+Y4MeLQpIHORTjlT1LRgArkufM6wNqRsSRD0FRHXqYicWCwofAmR+AmI/WEqsWDcdAqH0AmiVAmYGAp+BOBgIAmY4AmYjBGsEfAN/EAN+jzkDOXQUOX86ICACbBoCMjM4BwJtxAJtq+yHMGRCKAFkANsA3gBHAgeVDIoA+wi/AAqyAncsAnafPAJ5SEACeLcaWdhFq0bwAnw8AnrFAn0GAnztR/1IemAhACgSSVVKWBIUSskC0P4C0MlLJAOITAOH40TCkS8C8p5dAAMDq0vLTCoiAMxNSU2sAos8AorVvhgEGkBkArQCjjQCjlk9lH4CjtYCjll1UbFTMgdS0VSCApP4ApMJAOYAGVUbVaxVzQMsGCmSgzLeeGNFODYCl5wC769YHqUAViIClowClnmZAKZZqVoGfkoAOAKWsgKWS1xBXM4CmcgCmWFcx10EFgKcmDm/OpoCnBMCn5gCnrWHABoMLicMAp3uAp6PALI6YTFh7AKe0AKgawGmAp6cHAKeS6JjxWQkIigCJ6wCJnsCoPgCoEnUAqYsAqXLAqf8AHoCp+9oeWiuAABGahlqzgKs4AKsqwKtZAKs/wJXGgJV2QKx3tQDH0tslAKyugoCsuUUbN1tYG1FXAMlygK2WTg8bo0DKUICuFsCuUQSArkndHAzcN4CvRYDLa8DMg4CvoVx/wMzbgK+F3Mfc0wCw8gCwwFzf3RIMkJ03QM8pAM8lwM9vALFeQLGRALGDYYCyGZOAshBAslMAskrAmSaAt3PeHZeeKt5IkvNAxigZv8CYfEZ8JUhewhej164DgLPaALPaSxIUM/wEJwAw6oCz3ABJucDTg9+SAIC3CQC24cC0kwDUlkDU1wA/gNViYCGPMgT6l1CcoLLg4oC2sQC2duEDYRGpzkDhqIALANkC4ZuVvYAUgLfYgLetXB0AuIs7REB8y0kAfSYAfLPhALr8ALpbXYC6vYC6uEA9kQBtgLuhgLrmZanlwAC7jwDhd2YdnDdcZ4C8wAAZgOOE5mQAvcQA5FrA5KEAveVAvnWAvhjmhmaqLg0mxsDnYAC/vcBGAA2nxmfsAMFigOmZwOm1gDOwgMGZ6GFogIGAwxGAQwBHAdqBl62ZAIAuARovA6IHrAKABRyNgAgAzASSgOGfAFgJB4AjOwAHgDmoAScjgi0BhygwgCoBRK86h4+PxZ5BWk4P0EsQiJCtV9yEl+9AJbGBTMAkE0am7o7J2AzErrQDjAYxxiKyfcFWAVZBVgFWQVkBVkFWAVZBVgFWQVYBVkFWAVZRxYI2IZoAwMDCmVe6iwEygOyBjC8vAC8BKi8AOhBKhazBUc+aj5xQkBCt192OF/pAFgSM6wAjP/MbMv9puhGez4nJAUsFyg3Nn5u32vB8hnDLGoBbNdvMRgFYAVrycLJuQjQSlwBAQEKfV5+jL8AND+CAAQW0gbmriQGAIzEDAMCDgDlZh4+JSBLQrJCvUI5JF8oYDcoOSQJwj4KRT9EPnk+gj5xPnICikK9SkM8X8xPUGtOCy1sVTBrDG8gX+E0OxwJaJwKYyQsPR4nQqxCvSzMAsv9X8oPIC8KCQoAACN+nt9rOy5LGMmsya0JZsLMzQphQWAP5hCkEgCTjh5GQiYbqm06zjkKND9EPnFCQBwICx5NSG1cLS5a4rwTCn7uHixCQBxeCUsKDzRVREM4BTtEnC0KghwuQkAb9glUIyQZMTIBBo9i8F8KcmTKYAxgLiRvAERgGjoDHB9gtAcDbBFmT2BOEgIAZOhgFmCWYH5gtGBMYJJpFhgGtg/cVqq8WwtDF6wBvCzOwgMgFgEdBB8BegJtMDGWU4EBiwq5SBsA5SR0jwvLDqdN6wGcAoidUAVBYAD4AD4LATUXWHsMpg0lILuwSABQDTUAFhO4NVUC0wxLZhEcANlPBnYECx9bADIAtwKbKAsWcKwzOaAaAVwBhwn9A9ruEAarBksGugAey1aqWwq7YhOKCy1ADrwBvAEjA0hbKSkpIR8gIi0TJwciDY4AVQJvWJFKlgJvIA9ySAHUdRDPUiEaqrFN6wcSBU1gAPgAPgsBewAHJW0LiAymOTEuyLBXDgwAYL0MAGRKaFAiIhzAADIAtwKbKC08D88CkRh8ULxYyXRzjtilnA72mhU+G+0S2hIHDxwByAk7EJQGESwNNwwAPAC0zwEDAKUA4gCbizAAFQBcG8cvbXcrDsIRAzwlRNTiHR8MG34CfATCC6vxbQA4Oi4Opzkuz6IdB7wKABA7Ls8SGgB9rNsdD7wbSBzOoncfAT4qYB0C7KAJBE3z5R9mDL0M+wg9Cj8ABcELPgJMDbwIvQ09CT0KvS7PoisOvAaYAhwPjBriBBwLvBY8AKELPBC8BRihe90AO2wMPQACpwm9BRzR9QYFB2/LBnwAB7wSXBISvQECAOsCAAB1FVwHFswV/HAXvBg8AC68AuyovAAevAJWISuAAAG8AALkFT0VvCvso7zJqDwEAp8nTAACXADn3hm8CaVcD7/FAPUafAiiBQv/cQDfvKe8GNwavKOMeXMG/KmchAASvAcbDAADlABtvAcAC7ynPAIaPLsIopzLDvwHwak8AOF8L7dtvwNJAAPsABW8AAb8AAm8AGmMABq8AA68Axi8jmoV/AABXAAObAAuTB8ABrwAF7wIIgANSwC6vCcAA7wADpwq7ACyWwAcHAAbvAAB7AqiAAXHCxYV3AAHnABCvAEDAGm8AAt8AB28AAi8CaIABcsAbqAZ1gCSCCIABcsAATwAB9wAHZwIIgAGmwAJfAAbLABtHADmvIEACFwACDwAFLwAaPwJIgAGywDjjAAJPAuiDsX7YAAHPABunUBJAEgACrwFAAM8AAmuAzgABxwAGXwAAgym/AAKHAAKPAAJ/KfsBrwACRwAAwwAEDwBABQ8ABFsAA+MAA3sAA28ABkMBxYcABU8AG6cFrQBvAC7ABM8BABpLAsA4UwAAjwABFMAF3wFHAAG0QAYvB8BfClTADpGALAJBw4McwApK3EBpQYIXwJtJA0ACghwTG1gK4oggRVjLjcDogq1AALZABcC/ARvAXdzSFMVIgNQAhY/AS0GBHRHvnxTe0EAKgAyAvwAVAvcAHyRLQEsAHfmDhIzRwJLAFgGAAJRAQiLzQB5PAQhpgBbANcWAJZpOCCMAM5ssgDQ1RcJw3Z0HBlXHgrSAYmRrCNUVE5JEz3DivoAgB04QSos4RKYUABzASosMSlDGhADMVYE+MbvAExm3QBrAnICQBF7Osh4LzXWBhETIAUVCK6v/xPNACYAAQIbAIYAiQCONgDjALQA1QCdPQC7AKsApgChAOcAnwDTAJwA4AEBAPwAwAB6AFsAywDNAPwA1wDrAIkAogEqAOMA2ADVBAIIKzTT09PTtb/bzM/NQjEWAUsBVS5GAVMBYgFhAVQBRUpCRGcMAUwUBgkEMzcMBwAgDSQmKCs3OTk8PDw9Pg0/HVBQUFBSUlFSKFNUVlVVHFxgYF9hYCNlZ29ucXFxcXFxc3Nzc3Nzc3Nzc3N1dXZ1dFsAPesAQgCTAHEAKwBf8QCHAFAAUAAwAm/oAIT+8fEAXQCM6wCYAEgAWwBd+PipAH4AfgBiAE8AqgAdAK8AfAI5AjwA9QDgAPcA9wDhAPgA4gDiAOEA3wAoAnQBSgE5ATcBTQE3ATcBNwEyATEBMQExARUBURAAKgkBAEwYCxcEFhcPAIcAjwCfAEoAYxkCKgBvAGgAkAMOAyArAxpCP0gqAIoCSADAAlACnQC5Ao8CjwKPAo8CjwKPAoQCjwKPAo8CjwKPAo8CjgKOApECmQKQAo8CjwKNAo0CjQKNAosCjgJuAc0CkAKYAo8CjwKOF3oMAPcGA5gCWgIzGAFNETYC2xILLBQBRzgUTpIBdKU9AWJaAP4DOkgA/wCSKh4ZkGsAKmEAagAvAIoDlcyM8K+FWwa7LA/DEgKe1nUrCwQkWwGzAN5/gYB/gX+Cg4N/hIeFf4aJh4GIg4mDin+Lf4x/jYuOf49/kIORf5J/k3+Uf5WElomXg5h/AIMloQCEBDwEOQQ7BD4EPARCBD8EOgRABEIEQQQ9BD8EQgCkA4gAylIA0AINAPdbAPcBGgD3APUA9QD2APXVhSRmvwD3APUA9QD2APUdAIpbAPcAigEaAPcAigLtAPcAitWFJGa/HQD4WwEaAPcA9wD1APUA9gD1APgA9QD1APYA9dWFJGa/HQCKWwEaAPcAigD3AIoC7QD3AIrVhSRmvx0CRAE3AksBOgJMwgOfAu0Dn9WFJGa/HQCKWwEaA58AigOfAIoC7QOfAIrVhSRmvx0EMQCKBDIAigeOMm4hLQCKAT9vBCQA/gDHWwMAVVv/FDMDAIoDPtkASgMAigMAl2dBtv/TrfLzakaPh3aztmIuZQrR3ER2n5Yo+qNR2jK/aP/V04UK1njIJXLgkab9PjOxyJDVbIN3R/FZLoZVl2kYFQIZ7V6LpRqGDt9OdDohnJKp5yX/HLj0voPpLrneDaN11t5W3sSM4ALscgSw8fyWLVkKa/cNcQmjYOgTLZUgOLi2F05g4TR0RfgZ4PBdntxdV3qvdxQt8DeaMMgjJMgwUxYN3tUNpUNx21AvwADDAIa0+raTWaoBXmShAl5AThpMi282o+WzOKMlxjHj7a+DI6AM6VI9w+xyh3Eyg/1XvPmbqjeg2MGXugHt8wW03DQMRTd5iqqOhjLvyOCcKtViGwAHVLyl86KqvxVX7MxSW8HLq6KCrLpB8SspAOHO9IuOwCh9poLoMEha9CHCxlRAXJNDobducWjqhFHqCkzjTM2V9CHslwq4iU19IxqhIFZMve15lDTiMVZIPdADXGxTqzSTv0dDWyk1ht430yvaYCy9qY0MQ3cC5c1uw4mHcTGkMHTAGC99TkNXFAiLQgw9ZWhwKJjGCe+J5FIaMpYhhyUnEgfrF3zEtzn40DdgCIJUJfZ0mo3eXsDwneJ8AYCr7Vx2eHFnt2H6ZEyAHs9JoQ4Lzh5zBoGOGwAz37NOPuqSNmZf51hBEovtpm2T1wI79OBWDyvCFYkONqAKGVYgIL0F+uxTcMLSPtFbiNDbBPFgip8MGDmLLHbSyGXdCMO6f7teiW9EEmorZ+75KzanZwvUySgjoUQBTfHlOIerJs6Y9wLlgDw18AB1ne0tZRNgGjcrqHbtubSUooEpy4hWpDzTSrmvqw0H9AoXQLolMt9eOM+l9RitBB1OBnrdC1XL4yLFyXqZSgZhv7FnnDEXLUeffb4nVDqYTLY6X7gHVaK4ZZlepja2Oe6OhLDI/Ve5SQTCmJdH3HJeb14cw99XsBQAlDy5s5kil2sGezZA3tFok2IsNja7QuFgM30Hff3NGSsSVFYZLOcTBOvlPx8vLhjJrSI7xrNMA/BOzpBIJrdR1+v+zw4RZ7ry6aq4/tFfvPQxQCPDsXlcRvIZYl+E5g3kJ+zLMZon0yElBvEOQTh6SaAdIO6BwdqJqfvgU+e8Y65FQhdiHkZMVt9/39N2jGd26J6cNjq8cQIyp6RonRPgVn2fl89uRDcQ27GacaN0MPrcNyRlbUWelKfDfyrNVVGBG5sjd3jXzTx06ywyzuWn5jbvEfPPCTbpClkgEu9oPLKICxU5HuDe3jA1XnvU85IYYhaEtOU1YVWYhEFsa4/TQj3rHdsU2da2eVbF8YjSI0m619/8bLMZu3xildwqM7zf1cjn4Whx0PSYXcY5bR7wEQfGC7CTOXwZdmsdTO8q3uGm7Rh/RfCWwpzBHCAaVfjxgibL5vUeL0pH6bzDmI9yCXKC/okkmbc28OJvI87L/bjFzpq0DHepw4kT1Od+fL7cyuFaRgfaUWB2++TCFvz11J0leEtrGkpccfX9z2LY39sph4PBHCjNOOkd0ybUm+ZzS8GkFbqMpq8uiX2yHpa0jllTLfGTDBMYR6FT5FWLLDPMkYxt1Q0eyMvxJWztDjy0m6VvZPvamrFXjHmPpU6WxrZqH6WW//I37RwvqPQhPz8I3RPuXAk1C94ZprQWm9iGM/KgiGDO6SV9sjp+Jmk4TBajMNJ5zzWZ1k1jrteQQBp9C2dOvmbIeeEME8y573Q8TgGe+ZCzutM45gYLBzYm2LNvgq2kebAbMpHRDSyh6dQ27GbsAAdCqQVVXWC1C+zpwBM2Lr4eqtobmmu1vJEDlIQR1iN8CUWpztq50z7FFQBn3SKViX6wSqzVQCoYvAjByjeSa+h1PRnYWvBinTDB9cHt4eqDsPS4jcD3FwXJKT0RQsl8EvslI2SFaz2OtmYLFV8FwgvWroZ3fKmh7btewX9tfL2upXsrsqpLJzpzNGyNlnuZyetg7DIOxQTMBR7dqlrTlZ6FWi1g4j1NSjA2j1Yd7fzTH6k9LxCyUCneAKYCU581bnvKih6KJTeTeCX4Zhme/QIz7w2o+AdSgtLAkdrLS9nfweYEqrMLsrGGSWXtgWamAWp6+x6GM/Z8jNw3BqPNQ39hrzYLECn3tPvh/LqKbRSCiDGauDKBBj/kGbpnM1Bb/my8hv4NWStclkwjfl57y4oNDgw1JAG9VOti3QVVoSziMEsSdfEjaCPIDb7SgpLXykQsM+nbqbt97I0mIlzWv0uqFobLMAq8Rd9pszUBKxFhBPwOjf//gVOz2r7URJ2OnpviCXv9iz3a4X/YLBYbXoYwxBv/Kq0a5s4utQHzoTerJ7PmFW/no/ZAsid/hRIV82tD+Qabh5F1ssIM8Ri3chu0PuPD3sSJRMjDoxLAbwUbroiPAz/V52e8s3DIixxlO7OrvhMj3qfzA0kKxzwicr5wJmZwJxTXgrwYsqhRvpgC2Nfdyd+TYYxJSZgk+gk2g9KyHSlwQVAyPtWWgvVGyVBqsU2LpDlLNosSAtolC1uBKt5pQZLhAxTjeGCWIC/HVpagc5rRwkgpCHKEsjA8d+scp8aiMewwQBhp5dYTV5t/Nvl+HbDMu8F3S0psPyZb1bSnqlHPFUnMQeQqSqwDBT23fJO9gO3aVaa1icrXU0PKwlMM5K+iL3ATcVq2fFWKk0irCTF4LDVDG4gUpkyplq6efcZS+WDR1woApjD18x+2JQR9oOXzuA7uy4b+/91WsJd/tSd1QcAH8PVPXApieA37B7YXPhDPH1azP3PKR+HfHmOoDYLeuKsIi/ssSsdYs62qJo14Hw1P2N/6zpr8F3FTWmJ4ysAVcl84Iv/tl///Z8FaAWbBQbyMNDZjrZ2JwdRjtd1jOeNumSodFtr4/Zf45iRJf/8HSW+KIB/+GlKu8Rv1BPLr/4duoL+kFPRqrstEr41gfJupoJRf4hcYDWX93FOcfEBiIivxtjtV8g7mvOReiamYWKE7vfPbv3v2L9Kwq3cIDFGLyhyfOGuf/9vA5muH6Pjg7B4SUj2ydDXra9fSBI+DrsNHA6l51wfHssJb+11TfNk7B8OleUe3Y+ZmHboMFHdv7FFP2cfISFyeAQR0sk/Xv62HBTdW4HmnGSLFk/cqyWVVFJkdIIa+4hos3JRHcqLoRKM5h2Qtk1RZtzISMtlXTfTqIc77YsCCgQD0r61jtxskCctwJOtjE/pL8wC4LBD4AZFjh2wzzFCrT/PNqW0/DeBbkfMfzVm9yy06WiF+1mTdNNEAytVtohBKg3brWd2VQa+aF+cQ0mW5CvbwOlWCT07liX226PjiVLwFCRs/Ax2/u+ZNPjrNFIWIPf5GjHyUKp60OeXe9F01f7IaPf/SDTvyDAf7LSWWejtiZcsqtWZjrdn6A2MqBwnSeKhrZOlUMmgMionmiCIvXqKZfmhGZ1MwD3uMF4n9KJcfWLA3cL5pq48tm5NDYNh3SS/TKUtmFSlQR89MR4+kxcqJgpGbhm9gXneDELkyqAN5nitmIzTscKeJRXqd64RiaOALR2d295NWwbjHRNG2AU5oR9OS2oJg/5CY6BFPc1JvD2Mxdhp2/MZdI8dLePxiP4KRIp8VXmqfg+jqd/RNG7GNuq1U2SiI4735Bdc0MVFx6mH5UOWEa5HuhYykd6t4M1gYLVS8m1B+9bUqi5DziQq7qT8d94cxB6AB4WqMCOF/zPPtRSZUUaMSsvHOWxGASufywTX8ogy6HgUf9p+Z30wUEosl8qgmwm6o2AV6nO9HKQjRHpN6SUegI5pvR61RLnUJ1lqCtmfcsRQutEizVpAaPXN7xMp5UQ5OSZK6tniCK9CpyMd7LjR6+MxfoMEDPpWdf2p2m5N3KO4QMxf+V7vGdYjemQczQ+m2MGIkFNYDMf0Yop2eSx81sP36WHUczqEhKysp2iJSYAvfgJjinKwToPvRKb+HBi+7cJ96S5ngfLOXaHAFRLkulo4TnXTFO51gX0TCCo4ZUHdbpdgkMEwUZAPjh6M+hA8DzycbtxAgH3uD6i0nN1aTiIuQ4BYCE9dEHHwAmINU+4YEWx4EC3OZwFGfYZMPLScVlb+BAAJeARUh+gdWA3/gRqCrf1jecgqeFf1MdzrrP4SVlGm5mMihSP+zYYksAB7O+SBPwNQqSNMiLnkviY/klwgcRmvqtCqeWeA0gjuir4CMZqmw/ntP6M+l0pdN8/P9xI53aP7x/zavJbbKOz8VzO/nXxIr1tjparMnqd6iWdByHKw4lF4p/u57Yv07WeZPDnRl7wgmDVZZ44fQsjdYO/gmXQ+940PRGst8UMQApFC4OOV22e4N+lVOPyFLAOj4t8R3PFw/FjbSWy0ELuAFReNkee8ORcBOT2NPDcs7OfpUmzvn/F9Czk9o9naMyVYy/j8I5qVFmQDFcptBp65J/+sJA3w/j6y/eqUkKxTsf0CZjtNdRSBEmJ2tmfgmJbqpcsSagk+Ul9qdyV+NnqFBIJZFCB1XwPvWGDBOjVUmpWGHsWA5uDuMgLUNKZ4vlq5qfzY1LnRhCc/mh5/EX+hzuGdDy5aYYx4BAdwTTeZHcZpl3X0YyuxZFWNE6wFNppYs3LcFJePOyfKZ8KYb7dmRyvDOcORLPH0sytC6mH1US3JVj6paYM1GEr+CUmyHRnabHPqLlh6Kl0/BWd3ebziDfvpRQpPoR7N+LkUeYWtQ6Rn5v5+NtNeBPs2+DKDlzEVR5aYbTVPrZekJsZ9UC9qtVcP99thVIt1GREnN8zXP8mBfzS+wKYym8fcW6KqrE702Zco+hFQAEIR7qimo7dd7wO8B7R+QZPTuCWm1UAwblDTyURSbd85P4Pz+wBpQyGPeEpsEvxxIZkKsyfSOUcfE3UqzMFwZKYijb7sOkzpou+tC4bPXey5GI1GUAg9c3vLwIwAhcdPHRsYvpAfzkZHWY20vWxxJO0lvKfj6sG2g/pJ1vd/X2EBZkyEjLN4nUZOpOO7MewyHCrxQK8d5aF7rCeQlFX+XksK6l6z971BPuJqwdjj68ULOj9ZTDdOLopMdOLL0PFSS792SXE/EC9EDnIXZGYhr52aQb+9b2zEdBSnpkxAdBUkwJDqGCpZk/HkRidjdp0zKv/Cm52EenmfeKX6HkLUJgMbTTxxIZkIeL/6xuAaAAHbA7mONVduTHNX/UJj1nJEaI7f3HlUyiqKn7VfBE+bdb4HWln1HPJx001Ulq1tOxFf8WZEARvq5Da1+pE7fPVxLntGACz3nkoLsKcPdUqdCwwiyWkmXTd5+bv3j7HaReRt3ESn783Ew3SWsvkEjKtbocNksbrLmV+GVZn1+Uneo35MT1/4r8fngQX5/ptORfgmWfF6KSB/ssJmUSijXxQqUpzkANEkSkYgYj560OOjJr6uqckFuO15TRNgABEwNDjus1V3q2huLPYERMCLXUNmJJpbMrUQsSO7Qnxta55TvPWL6gWmMOvFknqETzqzFVO8SVkovEdYatypLGmDy9VWfgAc0KyIChiOhbd7UlbAeVLPZyEDp4POXKBwN/KP5pT6Cyqs6yaI00vXMn1ubk9OWT9Q/O2t/C25qlnO/zO0xcBzpMBCAB8vsdsh3U8fnPX1XlPEWfaYJxKVaTUgfCESWl4CCkIyjE6iQ5JFcwU6S4/IH0/Agacp8d5Gzq2+GzPnJ7+sqk40mfFQpKrDbAKwLlr3ONEati2k/ycLMSUu7V/7BBkDlNyXoN9tvqXCbbMc4SSQXgC/DBUY9QjtrCtQ+susEomCq8xcNJNNMWCH31GtlTw2BdCXkJBjT+/QNWlBWwQ5SWCh1LdQ99QVii/DyTxjSR6rmdap3l3L3aiplQpPYlrzNm9er88fXd2+ao+YdUNjtqmxiVxmyYPzJxl67OokDcTezEGqldkGgPbRdXA+fGcuZVkembZByo7J1dMnkGNjwwCny+FNcVcWvWYL9mg8oF7jACVWI3bA64EXpdM8bSIEVIAs5JJH+LHXgnCsgcMGPZyAAVBncvbLiexzg9YozcytjPXVlAbQAC7Tc4S0C8QN4LlAGjj4pQAVWrwkaDoUYGxxvkCWKRRHkdzJB5zpREleBDL1oDKEvAqmkDibVC4kTqF89YO6laUjgtJPebBfzr16tg4t10GmN1sJ5vezk2sUOq8blCn5mPZyT3ltaDcddKupQjqusNM9wtFVD0ABzv17fZDn7GPT1nkCtdcgYejcK1qOcTGtPxnCX1rErEjVWCnEJv5HaOAUjgpiKQjUKkQi64D5g2COgwas8FcgIl0Pw95H9dWxE3QG0VbMNffh6BPlAojLDf4es2/5Xfq7hw5NGcON2g8Qsy2UQm94KddKyy3kdJxWgpNaEc15xcylbLC3vnT26u8qS90qc2MU8LdOJc5VPF5KnSpXIhnj1eJJ/jszjZ01oR6JDFJRoeTPO/wh4IPFbdG9KljuSzeuI92p8JF/bpgDE8wG86/W2EBKgPrmzdLijxssQn8mM44ky/KLGOJcrSwXIpZa/Z3v7W6HCRk7ewds99LTsUW1LbeJytw8Q/BFZVZyfO9BUHOCe2suuEkO8DU4fLX0IQSQ2TdOkKXDtPf3sNV9tYhYFueuPRhfQlEEy+aYM/MCz7diDNmFSswYYlZZPmKr2Q5AxLsSVEqqBtn6hVl1BCFOFExnqnIsmyY/NA8jXnDaNzr7Zv3hu+I1Mf/PJjk0gALN2G8ABzdf9FNvWHvZHhv6xIoDCXf964MxG92vGZtx/LYU5PeZqgly8tT5tGeQGeJzMMsJc5p+a5Rn2PtEhiRzo/5Owjy1n0Lzx3ev8GHQmeWb8vagG6O5Qk5nrZuQTiKODI4UqL0LLAusS2Ve7j1Ivdxquu1BR9Rc4QkOiUPwQXJv6du2E8i5pDhVoQpUhyMWGUT2O2YODIhjAfI71gxep5r5zAY7GBUZpy51hAw0pcCCrhOmU8Wp6ujQTdZQsCjtq6SHX8QAMNiPCIIkoxhHEZPgsBcOlP4aErJZPhF7qvx6gHrn8hEwPwYbx8YmT/n7lbcmTip1v8kgsrIjFTAlvLY4Nuil0KDmgz3svYs0ZJ3O3Is/vSx4xpxF1e2VAtZE8dJxGYEIhCSuPvCjP54l/NSNDnwlKvAW8mG+AQkgp7a87Igh26uKMFGD0PoPHTSvoWxiHuk+su8XkQiHIjeYKl/RdcOHpxhQH3zHCNE3aARm83Bl6zGxU/vMltlVPQhubcqhW4RYkl6uXk5JdP/QpzaKFpw2M8zvysv2qj7xaQECuu2akM0Cssj/uB9+wDR7uA6XOnLNaoczalHoMj33eiiu+DRaFsUmlmUZuh9bjDY4INMNSSAivSh03uJvny4Gj+D+neudoa7iJi7c4VFlZ/J5gUR82308zSNAt/ZroBXDWw0fV3eVPAn3aX0mtJabF6RsUZmL+Ehn+wn51/4QipMjD+6y64t7bjL6bjENan2prQ4h7++hBJ9NXvX8CUocJqMC937IasLzm5K0qwXeFMAimMHkEIQIQI2LrQ9sLBfXuyp66zWvlsh74GPv7Xpabj993pRNNDuFud5oIcn/92isbADXdpRPbjmbCNOrwRbxGZx2XmYNGMiV5kjF4IKyxCBvKier9U4uVoheCdmk83rp5G0PihAm2fAtczI4b9BWqX+nrZTrJX5kSwQddi93NQrXG+Cl3eBGNkM77VBsMpEolhXex1MVvMkZN9fG59GGbciH11FEXaY1MxrArovaSjE/lUUqBg2cZBNmiWbvzCHCPJ4RVGFK2dTbObM1m+gJyEX53fa7u3+TZpm74mNEzWbkVL4vjNwfL9uzRCu1cgbrNx5Yv5dDruNrIOgwIk+UZWwJfdbu/WHul6PMmRflVCIzd7B37Pgm/Up/NuCiQW7RXyafevN3AL6ycciCc4ZPlTRzEu+aURGlUBOJbUEsheX7PPyrrhdUt5JAG12EEEZpY/N3Vhbl5uLAfT0CbC2XmpnryFkxZmBTs5prvEeuf0bn73i3O82WTiQtJWEPLsBXnQmdnKhB06NbbhLtlTZYJMxDMJpFeajSNRDB2v61BMUHqXggUwRJ19m6p5zl51v11q34T74lTXdJURuV6+bg2D6qpfGnLy7KGLuLZngobM4pIouz4+n0/UzFKxDgLM4h+fUwKZozQ9UGrHjcif51Ruonz7oIVZ56xWtZS8z7u5zay6J2LD4gCYh2RXoBRLDKsUlZ80R8kmoxlJiL8aZCy2wCAonnucFxCLT1HKoMhbPKt34D97EXPPh0joO93iJVF1Uruew61Qoy3ZUVNX9uIJDt9AQWKLLo+mSzmTibyLHq0D6hhzpvgUgI6ekyVEL3FD+Fi5R3A8MRHPXspN1VyKkfRlC+OGiNgPC4NREZpFETgVmdXrQ2TxChuS3aY+Ndc7CiYv5+CmzfiqeZrWIQJW/C4RvjbGUoJFf1K6ZdR2xL/bG4kVq1+I4jQWX+26YUijpp+lpN7o5c6ZodXJCF56UkFGsqz44sIg8jrdWvbjRCxi2Bk0iyM3a7ecAV93zB6h1Ei38c0s6+8nrbkopArccGP8vntQe1bFeEh2nJIFOHX/k3/UHb5PtKGpnzbkmnRETMX+9X/QduLZWw/feklW/kH/JnzToJe9Kgu9Hct1UGbH5BPCLo4OOtQnZonW0xnyCcdtKyPQ/sbLiSTYJdSx4sJqWLMnfn6fIqPB3WAgk00J+fCOkomPHqtS67pf0mFmKoItYZUlJu6BihSZ8qve8+/X+LX1MhQXF95AshfUleCtmdn6l6QFXzLg2sgLn1oyVFuZecv7fzsIHzoRlAGp0gwYDOn1S4qabWvB5xUaE+Svw4KmjWtxdnuQbI32dw87D4N95u8qQRJTSQg0wLxOLkxSrPMLEn1UIhNKjAa9VLs3WLaXGrtCIt8bKY2AQP/ZdyRU6zT/E8qP2ltyBE2CCZPgWgEYDoJJO4n92y61ylNaSFXKohJhLjkfvYWm592539sIpmBNLlDo1bExFBfmHJJ0lFEiC/fj8v42OoMC9Mo3whIoWvyHfq6Uacqq55mzFf/EGC+NP/gHjhd6urc6R0hES27VXux7UY8CGKPohplWIZtTrFSaPWslCWy78E22Pw8fvReSUZx/txqLtHrFqg1DY/Eus6Iq1heZdrdcqE0/c971Bz1HW/XNXHsXpUIbI4kHdOfCc6T5zHZzvzQJB0ggMFL6IGPAilU9bj/ASdPk6fNvNtZqPuwEDhMBtBnhCexo6D6VAGIOPvJPPV523Y8R8a9vCqZbswSZKzOT1291BsUbmUWehtbb1fdRX9hiJKXvwr1QX6GjnZMgyMvnwOo2Dr24amr7FqEAbVeJAjRNOceM2EQ1Mna9fInqPJ5mh5X8CzT1aDOv08An0blz0fF5Gq4mS2cwq5glwIOlY5nznE8X4j/UdZ3FJsVIXte1JH0A7iibuPfazStM5O/Vo3KXIpXBeGORV0M9XDXFvsYZUHGvFCUubWzTw248EHE0cpQM2zNg6rjavreq3NHCAWsoZ7wvVy7l5gvtKRmIj1MnvfWEm0yFnGcuOq192350a5WefpfKCcX3Sn+AgHU+qnpstNtddbdVebagJU390lq9ko4aI9rqdaWXYG8tv5O/ZQHSqDRYHC6zfH10l5z++opso7aOSaIczlQ13iAzXvLdEu0V7kwNUZ1c8Y8aq7SeIEe5p902FlNkW8DnwHyueHchbK8vVFJfmr9mz7P8nUSccl1ULaoWMRSI1ls32kvlK0h46h3J25Yd9AzfcJbp9qYF/SEt3H5j69mMdcsNxZcAzT/A89ov3tglTX54y/EwjMfuoDoxPwLJDm5I7q6F9Kp469yNy1zSxz0N4HbRRBj9xFFuogvBspv7DXUNIsGxTINEQfmctb42XImWAODgARNo7dfcTqFKq6aTfivmvunLmzP9f8yLsJvXD3JbcPcDGNriMAcjzeDTNr65t8YB5tsnFDFLa0Uwmd2OvUdkLMX9TsAUYUfooSv47sw5J88j7CpahRjjO3/UhOXjTS39W5YZAel2KTbQd1h7INOw9P23GW7GDAe4agIUFHP48MZr7ubq0efFmmtwYMyk7D0r1oeG/CGOODgb9Ur+JMHxkwzPbtCX2ZnENQuI0RN5SyTIZuoY4XS9Rd/tPe3vNAZGSHM/YYwqs9xkkENx0O+eC2YVW1cwOJ3ckE890nbQeHLKlW15L0P0W2VliyYrfNr0nrIYddoRyGaCtj4OYd2MT7ebApqZOAQIaSHJM4mphhfjNjtnjg6YRyx9qM2FT3xOiYIMqXPFWdzhSgFF8ItocqVV09CmIoO8k6U/oJB7++wSX/YksxfPXHyjSgAGZOj1aKEq9fSvXBqtp2wu8/FxEf5AxapAD06pPGuLVUYLdgEzHR8wqRGYEwiUO9MyYbgswstuLYhwYFpSVKOdzAihZ9LuHtD598EGhINU9xc9xhL+QgTLAstmPIvvm2xyRw/WTUPXkP3ZHu6GyPmj5xFH9/QGpkglKXRVUBgVmLOJx8uZO2AstxQYocZH2JhORlxawj66BAXUEs7K/gPxINIRAFyK3WLuyq9oBTF9wEbnmCot82WjIg7CPNwYK3KrZMrKAz5yFszg4wCVLJVnIL8+OYA0xRDH8cHQjQUiQ2i1mr/be32k/3Xej9sdf3iuGvZHyLFSJvPSqz/wltnxumTJYKZsrWXtx/Rmu39jjV9lFaJttfFn57/No2h/unsJmMHbrnZ8csxkp5HQ4xR1s0HH+t3Iz82a3iQWTUDGq/+l2W3TUYLE8zNdL8Y+5oXaIH/Y2UUcX67cXeN4WvENZjz4+8q7vjhowOI3rSjFhGZ6KzwmU7+5nFV+kGWAZ5z2UWvzq0TK0pk1hPwAN4jbw//1CApRvIaIjhSGhioY6TUmsToek9cF9XjJdHvLPcyyCV3lbR5Jiz/ts46ay2F820VjTXvllElwrGzKcNSyvQlWDXdwrUINXmHorAM3fE19ngLZmgeUaCJLsSITf2VcfAOuWwX7mTPdP8Zb/04KqRniufCpwnDUk7sP0RX6cud/sanFMagnzKInSRVey0YzlVSOtA/AjrofmSH6RYbJQ8b4NDeTkIGc6247+Mnbez/qhJ9GAv9fGNFercPnnrf285Qgs+UqThLRgflcAKFuqWhLzZaR4QqvSwa3xe0LPkqj9xJWub195r7NrrR0e78FR+0mRBNMPsraqZctAUVAJfYKehTDV1MGGQSeDsOK9J3sbUuKRIS/WilX/64CBms9jCZocBlsBSZaIAjWm/SUZ8daWL2a/cJFyUOFqE3Epc2RWbtjNyPwOGpWtzu32kUooUqsJud7IV4E8rstUBXM7tGEtBx99x60g1duhyvxeKJSl8s5E34HTMmADT0836aEdg5Dv9rVyCz8i2REOmiz6wtIVFN0HsjAoN37SrY0bV1Ms8CRUILhvZvvRaDzoVCaSI0u8EPuTe4b7OPowgRGODl22UBBmHSTUY8e4DyL+Bc7bngo+2T8HtNvzyATSL5iJZgFPKpmUyZv54vVL90+/RQGATUmNKnrIvcJMYON9fl83naW5sf6hRkbbTC9RUEE6XADwjgA46wWfUQ+QWZl0J4PVTWAln/YfAz/SV3q3J9+yCYDleruoN5uoc/wT2f4YONGTb6zTGq3V+3JqzmCOjwebKln+fExVLN7sqtqfMnsKVXWbb2Ai5m3D/fCTgX7oKYzTZvj+m28XnDqPbXuP4MyWdmPezcesdrh7rCzA7BWdObiuyDEKjjzBbQ0qnuwjliz+b+j7aPMKlkXyIznV3tGzAfYwIbzGGt098oh4eq3ruDjdgHtjxfFCjHrjjRbHajoz/YOY4raojPFQ910GIlBV7hq47UDgpyajBxQUmD8NctiLV1rTSLAEsQDLTeRKcmPBMVMFF0SPBBhZ5oXoxtD3lMhuAQXmA+57OcciczVW9e9zwSIAHS+FJmvfXMJGF1dMBsIUMaPjvgaVqUc3p32qVCMQYFEiRLzlVSOGMCmv/HJIxAHe3mL/XnoZ1IkWLeRZfgyByjnDbbeRK5KL7bYHSVJZ9UFq+yCiNKeRUaYjgbC3hVUvfJAhy/QNl/JqLKVvGMk9ZcfyGidNeo/VTxK9vUpodzfQI9Z2eAre4nmrkzgxKSnT5IJ1D69oHuUS5hp7pK9IAWuNrAOtOH0mAuwCrY8mXAtVXUeaNK3OXr6PRvmWg4VQqFSy+a1GZfFYgdsJELG8N0kvqmzvwZ02Plf5fH9QTy6br0oY/IDsEA+GBf9pEVWCIuBCjsup3LDSDqI+5+0IKSUFr7A96A2f0FbcU9fqljdqvsd8sG55KcKloHIFZem2Wb6pCLXybnVSB0sjCXzdS8IKvE");const cp=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),lp=4;function up(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function hp(e){let t=[];for(let n=0,r=e.length;n<r;){let r=e.codePointAt(n);n+=r<65536?1:2,t.push(r)}return t}function dp(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let n=[];for(let r=0;r<t;)n.push(String.fromCodePoint(...e.slice(r,r+=4096)));return n.join("")}var fp=Yf("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");function pp(e){return e>>24&255}function gp(e){return 16777215&e}const mp=new Map(tp(fp).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),yp=new Set(ep(fp)),bp=new Map,wp=new Map;for(let[e,t]of np(fp)){if(!yp.has(e)&&2==t.length){let[n,r]=t,s=wp.get(n);s||(s=new Map,wp.set(n,s)),s.set(r,e)}bp.set(e,t.reverse())}const vp=44032,Ap=4352,Ep=4449,kp=4519,_p=28,xp=21*_p,Pp=vp+19*xp,Cp=Ap+19,Sp=Ep+21,Ip=kp+_p;function Op(e){return e>=vp&&e<Pp}function Tp(e,t){if(e>=Ap&&e<Cp&&t>=Ep&&t<Sp)return vp+(e-Ap)*xp+(t-Ep)*_p;if(Op(e)&&t>kp&&t<Ip&&(e-vp)%_p==0)return e+(t-kp);{let n=wp.get(e);return n&&(n=n.get(t),n)?n:-1}}function Np(e){let t=[],n=[],r=!1;function s(e){let n=mp.get(e);n&&(r=!0,e|=n),t.push(e)}for(let r of e)for(;;){if(r<128)t.push(r);else if(Op(r)){let e=r-vp,t=e%xp/_p|0,n=e%_p;s(Ap+(e/xp|0)),s(Ep+t),n>0&&s(kp+n)}else{let e=bp.get(r);e?n.push(...e):s(r)}if(!n.length)break;r=n.pop()}if(r&&t.length>1){let e=pp(t[0]);for(let n=1;n<t.length;n++){let r=pp(t[n]);if(0==r||e<=r){e=r;continue}let s=n-1;for(;;){let n=t[s+1];if(t[s+1]=t[s],t[s]=n,!s)break;if(e=pp(t[--s]),e<=r)break}e=pp(t[n])}}return t}function jp(e){return Np(e).map(gp)}function Up(e){return function(e){let t=[],n=[],r=-1,s=0;for(let i of e){let e=pp(i),a=gp(i);if(-1==r)0==e?r=a:t.push(a);else if(s>0&&s>=e)0==e?(t.push(r,...n),n.length=0,r=a):n.push(a),s=e;else{let i=Tp(r,a);i>=0?r=i:0==s&&0==e?(t.push(r),r=a):(n.push(a),s=e)}}return r>=0&&t.push(r,...n),t}(Np(e))}const Lp=65039,Rp=".",Bp=1,Mp=45;function Dp(){return new Set(ep(op))}const Fp=new Map(np(op)),$p=Dp(),Gp=Dp(),Hp=new Set(ep(op).map((function(e){return this[e]}),[...Gp])),zp=Dp(),Wp=(Dp(),tp(op));function qp(){return new Set([ep(op).map((e=>Wp[e])),ep(op)].flat(2))}const Kp=op(),Vp=rp((e=>{let t=rp(op).map((e=>e+96));if(t.length){let n=e>=Kp;t[0]-=32,t=dp(t),n&&(t=`Restricted[${t}]`);let r=qp(),s=qp(),i=[...r,...s].sort(((e,t)=>e-t));return{N:t,P:r,M:!op(),R:n,V:new Set(i)}}})),Jp=Dp(),Qp=new Map;[...Jp,...Dp()].sort(((e,t)=>e-t)).map(((e,t,n)=>{let r=op(),s=n[t]=r?n[t-r]:{V:[],M:new Map};s.V.push(e),Jp.has(e)||Qp.set(e,s)}));for(let{V:e,M:t}of new Set(Qp.values())){let n=[];for(let t of e){let e=Vp.filter((e=>e.V.has(t))),r=n.find((({G:t})=>e.some((e=>t.has(e)))));r||(r={G:new Set,V:[]},n.push(r)),r.V.push(t),e.forEach((e=>r.G.add(e)))}let r=n.flatMap((({G:e})=>[...e]));for(let{G:e,V:s}of n){let n=new Set(r.filter((t=>!e.has(t))));for(let e of s)t.set(e,n)}}let Yp=new Set,Zp=new Set;for(let e of Vp)for(let t of e.V)(Yp.has(t)?Zp:Yp).add(t);for(let e of Yp)Qp.has(e)||Zp.has(e)||Qp.set(e,Bp);const Xp=new Set([...Yp,...jp(Yp)]),eg=ep(op),tg=function e(t){let n=rp((()=>{let t=ep(op).map((e=>eg[e]));if(t.length)return e(t)})).sort(((e,t)=>t.Q.size-e.Q.size)),r=op(),s=r%3;r=r/3|0;let i=1&r;return r>>=1,{B:n,V:s,F:i,S:1&r,C:2&r,Q:new Set(t)}}([]);class ng extends Array{get is_emoji(){return!0}}function rg(e,t=up){let n=[];var r;r=e[0],Gp.has(r)&&n.push("◌");let s=0,i=e.length;for(let r=0;r<i;r++){let i=e[r];og(i)&&(n.push(dp(e.slice(s,r))),n.push(t(i)),s=r+1)}return n.push(dp(e.slice(s,i))),n.join("")}function sg(e){return(og(e)?"":`${ig(rg([e]))} `)+up(e)}function ig(e){return`"${e}"‎`}function ag(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}function og(e){return zp.has(e)}function cg(e,t){let n=0;return e.split(Rp).map((e=>{let r,s=hp(e),i={input:s,offset:n};n+=s.length+1;try{let e,n=i.tokens=fg(s,Up),a=n.length;if(!a)throw new Error("empty label");{let s=n[0],o=a>1||s.is_emoji;if(!o&&s.every((e=>e<128)))r=s,ag(r),function(e){if(e.length>=4&&e[2]==Mp&&e[3]==Mp)throw new Error("invalid label extension")}(r),e="ASCII";else if(o&&(i.emoji=!0,s=n.flatMap((e=>e.is_emoji?[]:e))),r=n.flatMap((e=>!t&&e.is_emoji?pg(e):e)),ag(r),s.length){if(Gp.has(r[0]))throw dg("leading combining mark");for(let e=1;e<a;e++){let t=n[e];if(!t.is_emoji&&Gp.has(t[0]))throw dg(`emoji + combining mark: "${dp(n[e-1])} + ${rg([t[0]])}"`)}!function(e){let t=e[0],n=cp.get(t);if(n)throw dg(`leading ${n}`);let r=e.length,s=-1;for(let i=1;i<r;i++){t=e[i];let r=cp.get(t);if(r){if(s==i)throw dg(`${n} + ${r}`);s=i+1,n=r}}if(s==r)throw dg(`trailing ${n}`)}(r);let t=[...new Set(s)],[i]=function(e){let t=Vp;for(let n of e){let e=t.filter((e=>e.V.has(n)));if(!e.length)throw t===Vp?ug(n):hg(t[0],n);if(t=e,1==e.length)break}return t}(t);!function(e,t){let{V:n,M:r}=e;for(let r of t)if(!n.has(r))throw hg(e,r);if(r){let e=jp(t);for(let t=1,n=e.length;t<n;t++)if(Hp.has(e[t])){let r=t+1;for(let s;r<n&&Hp.has(s=e[r]);r++)for(let n=t;n<r;n++)if(e[n]==s)throw new Error(`non-spacing marks: repeated ${sg(s)}`);if(r-t>lp)throw new Error(`non-spacing marks: too many ${ig(rg(e.slice(t-1,r)))} (${r-t}/${lp})`);t=r}}}(i,s),function(e,t){let n,r=[];for(let e of t){let t=Qp.get(e);if(t===Bp)return;if(t){let r=t.M.get(e);if(n=n?n.filter((e=>r.has(e))):[...r],!n.length)return}else r.push(e)}if(n)for(let t of n)if(r.every((e=>t.V.has(e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(i,t),e=i.N}else e="Emoji"}i.type=e}catch(e){i.error=e}return i.output=r,i}))}function lg(e){return e.map((({input:t,error:n,output:r})=>{if(n){let r=n.message;throw new Error(1==e.length?r:`Invalid label ${ig(rg(t))}: ${r}`)}return dp(r)})).join(Rp)}function ug(e){return new Error(`disallowed character: ${sg(e)}`)}function hg(e,t){let n=sg(t),r=Vp.find((e=>e.P.has(t)));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function dg(e){return new Error(`illegal placement: ${e}`)}function fg(e,t){let n=[],r=[];for(e=e.slice().reverse();e.length;){let s=gg(e);if(s)r.length&&(n.push(t(r)),r=[]),n.push(s);else{let t=e.pop();if(Xp.has(t))r.push(t);else{let e=Fp.get(t);if(e)r.push(...e);else if(!$p.has(t))throw ug(t)}}}return r.length&&n.push(t(r)),n}function pg(e){return e.filter((e=>e!=Lp))}function gg(e,t){let n,r,s=tg,i=[],a=e.length;for(t&&(t.length=0);a;){let o=e[--a];if(s=s.B.find((e=>e.Q.has(o))),!s)break;if(s.S)r=o;else if(s.C&&o===r)break;i.push(o),s.F&&(i.push(Lp),a>0&&e[a-1]==Lp&&a--),s.V&&(n=mg(i,s),t&&t.push(...e.slice(a).reverse()),e.length=a)}return n}function mg(e,t){let n=ng.from(e);return 2==t.V&&n.splice(1,1),n}const yg=new Uint8Array(32);function bg(e){return Pl(0!==e.length,"invalid ENS name; empty component","comp",e),e}function wg(e){const t=kh(function(e){try{return function(e){return lg(cg(e))}(e)}catch(t){Pl(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),n=[];if(0===e.length)return n;let r=0;for(let e=0;e<t.length;e++){46===t[e]&&(n.push(bg(t.slice(r,e))),r=e+1)}return Pl(r<t.length,"invalid ENS name; empty component","name",e),n.push(bg(t.slice(r))),n}function vg(e){Pl("string"==typeof e,"invalid ENS name; not a string","name",e);let t=yg;const n=wg(e);for(;n.length;)t=Wu(Rl([t,Wu(n.pop())]));return Ll(t)}yg.fill(0);const Ag="0x0000000000000000000000000000000000000000000000000000000000000000",Eg=BigInt(0),kg=BigInt(1),_g=BigInt(2),xg=BigInt(27),Pg=BigInt(28),Cg=BigInt(35),Sg={};function Ig(e){return Fl(Xl(e),32)}class Og{#V;#J;#Q;#Y;get r(){return this.#V}set r(e){Pl(32===Bl(e),"invalid r","value",e),this.#V=Ll(e)}get s(){return this.#J}set s(e){Pl(32===Bl(e),"invalid s","value",e);const t=Ll(e);Pl(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),this.#J=t}get v(){return this.#Q}set v(e){const t=Yl(e,"value");Pl(27===t||28===t,"invalid v","v",e),this.#Q=t}get networkV(){return this.#Y}get legacyChainId(){const e=this.networkV;return null==e?null:Og.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=Tl(this.s);return this.yParity&&(e[0]|=128),Ll(e)}get compactSerialized(){return Rl([this.r,this.yParityAndS])}get serialized(){return Rl([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,r){Il(e,Sg,"Signature"),this.#V=t,this.#J=n,this.#Q=r,this.#Y=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Og(Sg,this.r,this.s,this.v);return this.networkV&&(e.#Y=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=Kl(e,"v");return t==xg||t==Pg?Eg:(Pl(t>=Cg,"invalid EIP-155 v","v",e),(t-Cg)/_g)}static getChainIdV(e,t){return Kl(e)*_g+BigInt(35+t-27)}static getNormalizedV(e){const t=Kl(e);return t===Eg||t===xg?27:t===kg||t===Pg?28:(Pl(t>=Cg,"invalid v","v",e),t&kg?27:28)}static from(e){function t(t,n){Pl(t,n,"signature",e)}if(null==e)return new Og(Sg,Ag,Ag,27);if("string"==typeof e){const n=Tl(e,"signature");if(64===n.length){const e=Ll(n.slice(0,32)),t=n.slice(32,64),r=128&t[0]?28:27;return t[0]&=127,new Og(Sg,e,Ll(t),r)}if(65===n.length){const e=Ll(n.slice(0,32)),r=n.slice(32,64);t(0==(128&r[0]),"non-canonical s");const s=Og.getNormalizedV(n[64]);return new Og(Sg,e,Ll(r),s)}t(!1,"invalid raw signature length")}if(e instanceof Og)return e.clone();const n=e.r;t(null!=n,"missing r");const r=Ig(n),s=function(e,n){if(null!=e)return Ig(e);if(null!=n){t(jl(n,32),"invalid yParityAndS");const e=Tl(n);return e[0]&=127,Ll(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t(0==(128&Tl(s)[0]),"non-canonical s");const{networkV:i,v:a}=function(e,n,r){if(null!=e){const t=Kl(e);return{networkV:t>=Cg?t:void 0,v:Og.getNormalizedV(t)}}if(null!=n)return t(jl(n,32),"invalid yParityAndS"),{v:128&Tl(n)[0]?28:27};if(null!=r){switch(Yl(r,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),o=new Og(Sg,r,s,a);return i&&(o.#Y=i),t(null==e.yParity||Yl(e.yParity,"sig.yParity")===o.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===o.yParityAndS,"yParityAndS mismatch"),o}}var Tg=n(5856),Ng=n.t(Tg,2);const jg=BigInt(0),Ug=BigInt(1),Lg=BigInt(2),Rg=BigInt(3),Bg=BigInt(8),Mg=Object.freeze({a:jg,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Ug,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Dg=(e,t)=>(e+t/Lg)/t,Fg={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=Mg,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ug*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=Dg(i*e,t),c=Dg(-r*e,t);let l=pm(e-o*n-c*s,t),u=pm(-o*r-c*i,t);const h=l>a,d=u>a;if(h&&(l=t-l),d&&(u=t-u),l>a||u>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:u}}},$g=32,Gg=32,Hg=$g+1,zg=2*$g+1;function Wg(e){const{a:t,b:n}=Mg,r=pm(e*e),s=pm(r*e);return pm(s+t*e+n)}const qg=Mg.a===jg;class Kg extends Error{constructor(e){super(e)}}function Vg(e){if(!(e instanceof Jg))throw new TypeError("JacobianPoint expected")}class Jg{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static fromAffine(e){if(!(e instanceof Zg))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Zg.ZERO)?Jg.ZERO:new Jg(e.x,e.y,Ug)}static toAffineBatch(e){const t=function(e,t=Mg.P){const n=new Array(e.length),r=e.reduce(((e,r,s)=>r===jg?e:(n[s]=e,pm(e*r,t))),Ug),s=mm(r,t);return e.reduceRight(((e,r,s)=>r===jg?e:(n[s]=pm(e*n[s],t),pm(e*r,t))),s),n}(e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}static normalizeZ(e){return Jg.toAffineBatch(e).map(Jg.fromAffine)}equals(e){Vg(e);const{x:t,y:n,z:r}=this,{x:s,y:i,z:a}=e,o=pm(r*r),c=pm(a*a),l=pm(t*c),u=pm(s*o),h=pm(pm(n*a)*c),d=pm(pm(i*r)*o);return l===u&&h===d}negate(){return new Jg(this.x,pm(-this.y),this.z)}double(){const{x:e,y:t,z:n}=this,r=pm(e*e),s=pm(t*t),i=pm(s*s),a=e+s,o=pm(Lg*(pm(a*a)-r-i)),c=pm(Rg*r),l=pm(c*c),u=pm(l-Lg*o),h=pm(c*(o-u)-Bg*i),d=pm(Lg*t*n);return new Jg(u,h,d)}add(e){Vg(e);const{x:t,y:n,z:r}=this,{x:s,y:i,z:a}=e;if(s===jg||i===jg)return this;if(t===jg||n===jg)return e;const o=pm(r*r),c=pm(a*a),l=pm(t*c),u=pm(s*o),h=pm(pm(n*a)*c),d=pm(pm(i*r)*o),f=pm(u-l),p=pm(d-h);if(f===jg)return p===jg?this.double():Jg.ZERO;const g=pm(f*f),m=pm(f*g),y=pm(l*g),b=pm(p*p-m-Lg*y),w=pm(p*(y-b)-h*m),v=pm(r*a*f);return new Jg(b,w,v)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=Jg.ZERO;if("bigint"==typeof e&&e===jg)return t;let n=fm(e);if(n===Ug)return this;if(!qg){let e=t,r=this;for(;n>jg;)n&Ug&&(e=e.add(r)),r=r.double(),n>>=Ug;return e}let{k1neg:r,k1:s,k2neg:i,k2:a}=Fg.splitScalar(n),o=t,c=t,l=this;for(;s>jg||a>jg;)s&Ug&&(o=o.add(l)),a&Ug&&(c=c.add(l)),l=l.double(),s>>=Ug,a>>=Ug;return r&&(o=o.negate()),i&&(c=c.negate()),c=new Jg(pm(c.x*Fg.beta),c.y,c.z),o.add(c)}precomputeWindow(e){const t=qg?128/e+1:256/e+1,n=[];let r=this,s=r;for(let i=0;i<t;i++){s=r,n.push(s);for(let t=1;t<2**(e-1);t++)s=s.add(r),n.push(s);r=s.double()}return n}wNAF(e,t){!t&&this.equals(Jg.BASE)&&(t=Zg.BASE);const n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=t&&Yg.get(t);r||(r=this.precomputeWindow(n),t&&1!==n&&(r=Jg.normalizeZ(r),Yg.set(t,r)));let s=Jg.ZERO,i=Jg.BASE;const a=1+(qg?128/n:256/n),o=2**(n-1),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let t=0;t<a;t++){const n=t*o;let a=Number(e&c);e>>=u,a>o&&(a-=l,e+=Ug);const h=n,d=n+Math.abs(a)-1,f=t%2!=0,p=a<0;0===a?i=i.add(Qg(f,r[h])):s=s.add(Qg(p,r[d]))}return{p:s,f:i}}multiply(e,t){let n,r,s=fm(e);if(qg){const{k1neg:e,k1:i,k2neg:a,k2:o}=Fg.splitScalar(s);let{p:c,f:l}=this.wNAF(i,t),{p:u,f:h}=this.wNAF(o,t);c=Qg(e,c),u=Qg(a,u),u=new Jg(pm(u.x*Fg.beta),u.y,u.z),n=c.add(u),r=l.add(h)}else{const{p:e,f:i}=this.wNAF(s,t);n=e,r=i}return Jg.normalizeZ([n,r])[0]}toAffine(e){const{x:t,y:n,z:r}=this,s=this.equals(Jg.ZERO);null==e&&(e=s?Bg:mm(r));const i=e,a=pm(i*i),o=pm(a*i),c=pm(t*a),l=pm(n*o),u=pm(r*i);if(s)return Zg.ZERO;if(u!==Ug)throw new Error("invZ was invalid");return new Zg(c,l)}}function Qg(e,t){const n=t.negate();return e?n:t}Jg.BASE=new Jg(Mg.Gx,Mg.Gy,Ug),Jg.ZERO=new Jg(jg,Ug,jg);const Yg=new WeakMap;class Zg{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,Yg.delete(this)}hasEvenY(){return this.y%Lg===jg}static fromCompressedHex(e){const t=32===e.length,n=hm(t?e:e.subarray(1));if(!Em(n))throw new Error("Point is not on curve");let r=function(e){const{P:t}=Mg,n=BigInt(6),r=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),o=BigInt(88),c=e*e*e%t,l=c*c*e%t,u=gm(l,Rg)*l%t,h=gm(u,Rg)*l%t,d=gm(h,Lg)*c%t,f=gm(d,r)*d%t,p=gm(f,s)*f%t,g=gm(p,a)*p%t,m=gm(g,o)*g%t,y=gm(m,a)*p%t,b=gm(y,Rg)*l%t,w=gm(b,i)*f%t,v=gm(w,n)*c%t,A=gm(v,Lg),E=A*A%t;if(E!==e)throw new Error("Cannot find square root");return A}(Wg(n));const s=(r&Ug)===Ug;if(t)s&&(r=pm(-r));else{1==(1&e[0])!==s&&(r=pm(-r))}const i=new Zg(n,r);return i.assertValidity(),i}static fromUncompressedHex(e){const t=hm(e.subarray(1,$g+1)),n=hm(e.subarray($g+1,2*$g+1)),r=new Zg(t,n);return r.assertValidity(),r}static fromHex(e){const t=dm(e),n=t.length,r=t[0];if(n===$g)return this.fromCompressedHex(t);if(n===Hg&&(2===r||3===r))return this.fromCompressedHex(t);if(n===zg&&4===r)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Hg} compressed bytes or ${zg} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return Zg.BASE.multiply(_m(e))}static fromSignature(e,t,n){const{r,s}=Pm(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const i=ym(dm(e)),{n:a}=Mg,o=2===n||3===n?r+a:r,c=mm(o,a),l=pm(-i*c,a),u=pm(s*c,a),h=1&n?"03":"02",d=Zg.fromHex(h+am(o)),f=Zg.BASE.multiplyAndAddUnsafe(d,l,u);if(!f)throw new Error("Cannot recover signature: point at infinify");return f.assertValidity(),f}toRawBytes(e=!1){return um(this.toHex(e))}toHex(e=!1){const t=am(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${am(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:n}=this;if(!Em(t)||!Em(n))throw new Error(e);const r=pm(n*n);if(pm(r-Wg(t))!==jg)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Zg(this.x,pm(-this.y))}double(){return Jg.fromAffine(this).double().toAffine()}add(e){return Jg.fromAffine(this).add(Jg.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Jg.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){const r=Jg.fromAffine(this),s=t===jg||t===Ug||this!==Zg.BASE?r.multiplyUnsafe(t):r.multiply(t),i=Jg.fromAffine(e).multiplyUnsafe(n),a=s.add(i);return a.equals(Jg.ZERO)?void 0:a.toAffine()}}function Xg(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function em(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${sm(e)}`);const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:hm(n),left:e.subarray(t+2)}}Zg.BASE=new Zg(Mg.Gx,Mg.Gy),Zg.ZERO=new Zg(jg,jg);class tm{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,n="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=t?sm(e):e;if(128!==r.length)throw new Error(`${n}: Expected 64-byte hex`);return new tm(lm(r.slice(0,64)),lm(r.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${sm(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:n}=em(e.subarray(2)),{data:r,left:s}=em(n);if(s.length)throw new Error(`Invalid signature: left bytes after parsing: ${sm(s)}`);return{r:t,s:r}}(t?e:um(e));return new tm(n,r)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!Am(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Am(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=Mg.n>>Ug;return this.s>e}normalizeS(){return this.hasHighS()?new tm(this.r,pm(-this.s,Mg.n)):this}toDERRawBytes(){return um(this.toDERHex())}toDERHex(){const e=Xg(cm(this.s)),t=Xg(cm(this.r)),n=e.length/2,r=t.length/2,s=cm(n),i=cm(r);return`30${cm(r+n+4)}02${i}${t}02${s}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return um(this.toCompactHex())}toCompactHex(){return am(this.r)+am(this.s)}}function nm(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}const rm=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function sm(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let n=0;n<e.length;n++)t+=rm[e[n]];return t}const im=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function am(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(jg<=e&&e<im))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function om(e){const t=um(am(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function cm(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function lm(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function um(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,s=e.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}function hm(e){return lm(sm(e))}function dm(e){return e instanceof Uint8Array?Uint8Array.from(e):um(e)}function fm(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&Am(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function pm(e,t=Mg.P){const n=e%t;return n>=jg?n:t+n}function gm(e,t){const{P:n}=Mg;let r=e;for(;t-- >jg;)r*=r,r%=n;return r}function mm(e,t=Mg.P){if(e===jg||t<=jg)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=pm(e,t),r=t,s=jg,i=Ug,a=Ug,o=jg;for(;n!==jg;){const e=r/n,t=r%n,c=s-a*e,l=i-o*e;r=n,n=t,s=a,i=o,a=c,o=l}if(r!==Ug)throw new Error("invert: does not exist");return pm(s,t)}function ym(e,t=!1){const n=function(e){const t=8*e.length-8*Gg,n=hm(e);return t>0?n>>BigInt(t):n}(e);if(t)return n;const{n:r}=Mg;return n>=r?n-r:n}let bm,wm;class vm{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return Lm.hmacSha256(this.k,...e)}hmacSync(...e){return wm(this.k,...e)}checkSync(){if("function"!=typeof wm)throw new Kg("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return nm(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return nm(...t)}}function Am(e){return jg<e&&e<Mg.n}function Em(e){return jg<e&&e<Mg.P}function km(e,t,n,r=!0){const{n:s}=Mg,i=ym(e,!0);if(!Am(i))return;const a=mm(i,s),o=Zg.BASE.multiply(i),c=pm(o.x,s);if(c===jg)return;const l=pm(a*pm(t+n*c,s),s);if(l===jg)return;let u=new tm(c,l),h=(o.x===u.r?0:2)|Number(o.y&Ug);return r&&u.hasHighS()&&(u=u.normalizeS(),h^=1),{sig:u,recovery:h}}function _m(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*Gg)throw new Error("Expected 32 bytes of private key");t=lm(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==Gg)throw new Error("Expected 32 bytes of private key");t=hm(e)}if(!Am(t))throw new Error("Expected private key: 0 < key < n");return t}function xm(e){return e instanceof Zg?(e.assertValidity(),e):Zg.fromHex(e)}function Pm(e){if(e instanceof tm)return e.assertValidity(),e;try{return tm.fromDER(e)}catch(t){return tm.fromCompact(e)}}function Cm(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===Hg||r===zg:n?r===2*Hg||r===2*zg:e instanceof Zg}function Sm(e){return hm(e.length>$g?e.slice(0,$g):e)}function Im(e){const t=Sm(e),n=pm(t,Mg.n);return Om(n<jg?t:n)}function Om(e){return om(e)}function Tm(e,t,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const r=dm(e),s=_m(t),i=[Om(s),Im(r)];if(null!=n){!0===n&&(n=Lm.randomBytes($g));const e=dm(n);if(e.length!==$g)throw new Error(`sign: Expected ${$g} bytes of extra data`);i.push(e)}return{seed:nm(...i),m:Sm(r),d:s}}function Nm(e,t){const{sig:n,recovery:r}=e,{der:s,recovered:i}=Object.assign({canonical:!0,der:!0},t),a=s?n.toDERRawBytes():n.toCompactRawBytes();return i?[a,r]:a}Zg.BASE._setWindowSize(8);const jm={node:Ng,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},Um={},Lm={bytesToHex:sm,hexToBytes:um,concatBytes:nm,mod:pm,invert:mm,isValidPrivateKey(e){try{return _m(e),!0}catch(e){return!1}},_bigintTo32Bytes:om,_normalizePrivateKey:_m,hashToPrivateKey:e=>{e=dm(e);const t=Gg+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return om(pm(hm(e),Mg.n-Ug)+Ug)},randomBytes:(e=32)=>{if(jm.web)return jm.web.getRandomValues(new Uint8Array(e));if(jm.node){const{randomBytes:t}=jm.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Lm.hashToPrivateKey(Lm.randomBytes(Gg+8)),precompute(e=8,t=Zg.BASE){const n=t===Zg.BASE?t:new Zg(t.x,t.y);return n._setWindowSize(e),n.multiply(Rg),n},sha256:async(...e)=>{if(jm.web){const t=await jm.web.subtle.digest("SHA-256",nm(...e));return new Uint8Array(t)}if(jm.node){const{createHash:t}=jm.node,n=t("sha256");return e.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(jm.web){const n=await jm.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=nm(...t),s=await jm.web.subtle.sign("HMAC",n,r);return new Uint8Array(s)}if(jm.node){const{createHmac:n}=jm.node,r=n("sha256",e);return t.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let n=Um[e];if(void 0===n){const t=await Lm.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=nm(t,t),Um[e]=n}return Lm.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof bm)throw new Kg("sha256Sync is undefined, you need to set it");let n=Um[e];if(void 0===n){const t=bm(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=nm(t,t),Um[e]=n}return bm(n,...t)},_JacobianPoint:Jg};Object.defineProperties(Lm,{sha256Sync:{configurable:!1,get:()=>bm,set(e){bm||(bm=e)}},hmacSha256Sync:{configurable:!1,get:()=>wm,set(e){wm||(wm=e)}}});class Rm extends ku{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,pu.hash(e);const n=Eu(t);if(this.iHash=e.create(),!(this.iHash instanceof ku))throw new TypeError("Expected instance of class which extends utils.Hash");const r=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const s=new Uint8Array(r);s.set(n.length>this.iHash.blockLen?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return pu.exists(this),this.iHash.update(e),this}digestInto(e){pu.exists(this),pu.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Bm=(e,t,n)=>new Rm(e,t).update(n).digest();Bm.create=(e,t)=>new Rm(e,t);class Mm extends ku{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vu(this.buffer)}update(e){pu.exists(this);const{view:t,buffer:n,blockLen:r}=this,s=(e=Eu(e)).length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=vu(e);for(;r<=s-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){pu.exists(this),pu.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+l,o,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const a=vu(e);this.get().forEach(((e,t)=>a.setUint32(4*t,e,s)))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}}const Dm=(e,t,n)=>e&t^~e&n,Fm=(e,t,n)=>e&t^e&n^t&n,$m=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Gm=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hm=new Uint32Array(64);class zm extends Mm{constructor(){super(64,32,8,!1),this.A=0|Gm[0],this.B=0|Gm[1],this.C=0|Gm[2],this.D=0|Gm[3],this.E=0|Gm[4],this.F=0|Gm[5],this.G=0|Gm[6],this.H=0|Gm[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:a,H:o}=this;return[e,t,n,r,s,i,a,o]}set(e,t,n,r,s,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)Hm[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Hm[e-15],n=Hm[e-2],r=Au(t,7)^Au(t,18)^t>>>3,s=Au(n,17)^Au(n,19)^n>>>10;Hm[e]=s+Hm[e-7]+r+Hm[e-16]|0}let{A:n,B:r,C:s,D:i,E:a,F:o,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(Au(a,6)^Au(a,11)^Au(a,25))+Dm(a,o,c)+$m[e]+Hm[e]|0,u=(Au(n,2)^Au(n,13)^Au(n,22))+Fm(n,r,s)|0;l=c,c=o,o=a,a=i+t|0,i=s,s=r,r=n,n=t+u|0}n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,s,i,a,o,c,l)}roundClean(){Hm.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Wm=_u((()=>new zm)),[qm,Km]=wu.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),Vm=new Uint32Array(80),Jm=new Uint32Array(80);class Qm extends Mm{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:a,Dl:o,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,n,r,s,i,a,o,c,l,u,h,d,f,p,g]}set(e,t,n,r,s,i,a,o,c,l,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let n=0;n<16;n++,t+=4)Vm[n]=e.getUint32(t),Jm[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Vm[e-15],n=0|Jm[e-15],r=wu.rotrSH(t,n,1)^wu.rotrSH(t,n,8)^wu.shrSH(t,n,7),s=wu.rotrSL(t,n,1)^wu.rotrSL(t,n,8)^wu.shrSL(t,n,7),i=0|Vm[e-2],a=0|Jm[e-2],o=wu.rotrSH(i,a,19)^wu.rotrBH(i,a,61)^wu.shrSH(i,a,6),c=wu.rotrSL(i,a,19)^wu.rotrBL(i,a,61)^wu.shrSL(i,a,6),l=wu.add4L(s,c,Jm[e-7],Jm[e-16]),u=wu.add4H(l,r,o,Vm[e-7],Vm[e-16]);Vm[e]=0|u,Jm[e]=0|l}let{Ah:n,Al:r,Bh:s,Bl:i,Ch:a,Cl:o,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=wu.rotrSH(u,h,14)^wu.rotrSH(u,h,18)^wu.rotrBH(u,h,41),b=wu.rotrSL(u,h,14)^wu.rotrSL(u,h,18)^wu.rotrBL(u,h,41),w=u&d^~u&p,v=h&f^~h&g,A=wu.add5L(y,b,v,Km[e],Jm[e]),E=wu.add5H(A,m,t,w,qm[e],Vm[e]),k=0|A,_=wu.rotrSH(n,r,28)^wu.rotrBH(n,r,34)^wu.rotrBH(n,r,39),x=wu.rotrSL(n,r,28)^wu.rotrBL(n,r,34)^wu.rotrBL(n,r,39),P=n&s^n&a^s&a,C=r&i^r&o^i&o;m=0|p,y=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=wu.add(0|c,0|l,0|E,0|k)),c=0|a,l=0|o,a=0|s,o=0|i,s=0|n,i=0|r;const S=wu.add3L(k,x,C);n=wu.add3H(S,E,_,P),r=0|S}({h:n,l:r}=wu.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:s,l:i}=wu.add(0|this.Bh,0|this.Bl,0|s,0|i)),({h:a,l:o}=wu.add(0|this.Ch,0|this.Cl,0|a,0|o)),({h:c,l}=wu.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=wu.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=wu.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=wu.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=wu.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(n,r,s,i,a,o,c,l,u,h,d,f,p,g,m,y)}roundClean(){Vm.fill(0),Jm.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Ym extends Qm{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Zm extends Qm{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Xm=_u((()=>new Qm));_u((()=>new Ym)),_u((()=>new Zm));const ey=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();ey.crypto||ey.msCrypto;let ty=!1;const ny=function(e,t,n){return function(e,t){const n={sha256:Wm,sha512:Xm}[e];return Pl(null!=n,"invalid hmac algorithm","algorithm",e),Bm.create(n,t)}(e,t).update(n).digest()};let ry=ny;function sy(e,t,n){const r=Tl(t,"key"),s=Tl(n,"data");return Ll(ry(e,r,s))}sy._=ny,sy.lock=function(){ty=!0},sy.register=function(e){if(ty)throw new Error("computeHmac is locked");ry=e},Object.freeze(sy),Lm.hmacSha256Sync=function(e,...t){return Tl(sy("sha256",e,Rl(t)))};class iy{#Z;constructor(e){Pl(32===Bl(e),"invalid private key","privateKey","[REDACTED]"),this.#Z=Ll(e)}get privateKey(){return this.#Z}get publicKey(){return iy.computePublicKey(this.#Z)}get compressedPublicKey(){return iy.computePublicKey(this.#Z,!0)}sign(e){Pl(32===Bl(e),"invalid digest length","digest",e);const[t,n]=function(e,t,n={}){const{seed:r,m:s,d:i}=Tm(e,t,n.extraEntropy),a=new vm(32,Gg);let o;for(a.reseedSync(r);!(o=km(a.generateSync(),s,i,n.canonical));)a.reseedSync();return Nm(o,n)}(Nl(e),Nl(this.#Z),{recovered:!0,canonical:!0}),r=tm.fromHex(t);return Og.from({r:Zl("0x"+r.r.toString(16),32),s:Zl("0x"+r.s.toString(16),32),v:n?28:27})}computeSharedSecret(e){const t=iy.computePublicKey(e);return Ll(function(e,t,n=!1){if(Cm(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!Cm(t))throw new TypeError("getSharedSecret: second arg must be public key");const r=xm(t);return r.assertValidity(),r.multiply(_m(e)).toRawBytes(n)}(Nl(this.#Z),Tl(t)))}static computePublicKey(e,t){let n=Tl(e,"key");if(32===n.length){return Ll(function(e,t=!1){return Zg.fromPrivateKey(e).toRawBytes(t)}(n,!!t))}if(64===n.length){const e=new Uint8Array(65);e[0]=4,e.set(n,1),n=e}return Ll(Zg.fromHex(n).toRawBytes(t))}static recoverPublicKey(e,t){Pl(32===Bl(e),"invalid digest length","digest",e);const n=Og.from(t),r=tm.fromCompact(Nl(Rl([n.r,n.s]))).toDERRawBytes(),s=function(e,t,n,r=!1){return Zg.fromSignature(e,t,n).toRawBytes(r)}(Nl(e),r,n.yParity);return Pl(null!=s,"invalid signature for digest","signature",t),Ll(s)}static addPoints(e,t,n){const r=Zg.fromHex(iy.computePublicKey(e).substring(2)),s=Zg.fromHex(iy.computePublicKey(t).substring(2));return"0x"+r.add(s).toHex(!!n)}}function ay(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function oy(e,t,n){let r=0;for(let s=0;s<n;s++)r=256*r+e[t+s];return r}function cy(e,t,n,r){const s=[];for(;n<t+1+r;){const i=ly(e,n);s.push(i.result),xl((n+=i.consumed)<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:e,length:r,offset:t})}return{consumed:1+r,result:s}}function ly(e,t){xl(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=t=>{xl(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const r=e[t]-247;n(t+1+r);const s=oy(e,t+1,r);return n(t+1+r+s),cy(e,t,t+1+r,r+s)}if(e[t]>=192){const r=e[t]-192;return n(t+1+r),cy(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;n(t+1+r);const s=oy(e,t+1,r);n(t+1+r+s);return{consumed:1+r+s,result:Ll(e.slice(t+1+r,t+1+r+s))}}if(e[t]>=128){const r=e[t]-128;n(t+1+r);return{consumed:1+r,result:Ll(e.slice(t+1,t+1+r))}}return{consumed:1,result:ay(e[t])}}function uy(e){const t=Tl(e,"data"),n=ly(t,0);return Pl(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function hy(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function dy(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(dy(e))})),t.length<=55)return t.unshift(192+t.length),t;const n=hy(t.length);return n.unshift(247+n.length),n.concat(t)}const t=Array.prototype.slice.call(Tl(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=hy(t.length);return n.unshift(183+n.length),n.concat(t)}const fy="0123456789abcdef";function py(e){let t="0x";for(const n of dy(e))t+=fy[n>>4],t+=fy[15&n];return t}function gy(e,t){return function(e){let t;return t="string"==typeof e?iy.computePublicKey(e,!1):e.publicKey,Xu(Wu("0x"+t.substring(4)).substring(26))}(iy.recoverPublicKey(e,t))}const my=BigInt(0),yy=BigInt(2),by=BigInt(27),wy=BigInt(28),vy=BigInt(35),Ay=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Ey(e){return"0x"===e?null:Xu(e)}function ky(e,t){try{return Gd(e)}catch(n){Pl(!1,n.message,t,e)}}function _y(e,t){return"0x"===e?0:Yl(e,t)}function xy(e,t){if("0x"===e)return my;const n=Kl(e,t);return Pl(n<=Ay,"value exceeds uint size",t,n),n}function Py(e,t){const n=Kl(e,"value"),r=Xl(n);return Pl(r.length<=32,"value too large",`tx.${t}`,n),r}function Cy(e){return Gd(e).map((e=>[e.address,e.storageKeys]))}function Sy(e,t){const n=[Py(e.nonce||0,"nonce"),Py(e.gasPrice||0,"gasPrice"),Py(e.gasLimit||0,"gasLimit"),null!=e.to?Xu(e.to):"0x",Py(e.value||0,"value"),e.data||"0x"];let r=my;if(e.chainId!=my)r=Kl(e.chainId,"tx.chainId"),Pl(!t||null==t.networkV||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(r=t)}if(!t)return r!==my&&(n.push(Xl(r)),n.push("0x"),n.push("0x")),py(n);let s=BigInt(27+t.yParity);return r!==my?s=Og.getChainIdV(r,t.v):BigInt(t.v)!==s&&Pl(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(Xl(s)),n.push(Xl(t.r)),n.push(Xl(t.s)),py(n)}function Iy(e,t){let n;try{if(n=_y(t[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(e){Pl(!1,"invalid yParity","yParity",t[0])}const r=Fl(t[1],32),s=Fl(t[2],32),i=Og.from({r,s,yParity:n});e.signature=i}function Oy(e,t){const n=[Py(e.chainId||0,"chainId"),Py(e.nonce||0,"nonce"),Py(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Py(e.maxFeePerGas||0,"maxFeePerGas"),Py(e.gasLimit||0,"gasLimit"),null!=e.to?Xu(e.to):"0x",Py(e.value||0,"value"),e.data||"0x",Cy(e.accessList||[])];return t&&(n.push(Py(t.yParity,"yParity")),n.push(Xl(t.r)),n.push(Xl(t.s))),Rl(["0x02",py(n)])}function Ty(e,t){const n=[Py(e.chainId||0,"chainId"),Py(e.nonce||0,"nonce"),Py(e.gasPrice||0,"gasPrice"),Py(e.gasLimit||0,"gasLimit"),null!=e.to?Xu(e.to):"0x",Py(e.value||0,"value"),e.data||"0x",Cy(e.accessList||[])];return t&&(n.push(Py(t.yParity,"recoveryParam")),n.push(Xl(t.r)),n.push(Xl(t.s))),Rl(["0x01",py(n)])}class Ny{#X;#ee;#t;#te;#ne;#re;#se;#ie;#ae;#oe;#ce;#le;get type(){return this.#X}set type(e){switch(e){case null:this.#X=null;break;case 0:case"legacy":this.#X=0;break;case 1:case"berlin":case"eip-2930":this.#X=1;break;case 2:case"london":case"eip-1559":this.#X=2;break;default:Pl(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#ee}set to(e){this.#ee=null==e?null:Xu(e)}get nonce(){return this.#te}set nonce(e){this.#te=Yl(e,"value")}get gasLimit(){return this.#ne}set gasLimit(e){this.#ne=Kl(e)}get gasPrice(){const e=this.#re;return null!=e||0!==this.type&&1!==this.type?e:my}set gasPrice(e){this.#re=null==e?null:Kl(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#se;return null==e?2===this.type?my:null:e}set maxPriorityFeePerGas(e){this.#se=null==e?null:Kl(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#ie;return null==e?2===this.type?my:null:e}set maxFeePerGas(e){this.#ie=null==e?null:Kl(e,"maxFeePerGas")}get data(){return this.#t}set data(e){this.#t=Ll(e)}get value(){return this.#ae}set value(e){this.#ae=Kl(e,"value")}get chainId(){return this.#oe}set chainId(e){this.#oe=Kl(e)}get signature(){return this.#ce||null}set signature(e){this.#ce=null==e?null:Og.from(e)}get accessList(){const e=this.#le||null;return null==e?1===this.type||2===this.type?[]:null:e}set accessList(e){this.#le=null==e?null:Gd(e)}constructor(){this.#X=null,this.#ee=null,this.#te=0,this.#ne=BigInt(0),this.#re=null,this.#se=null,this.#ie=null,this.#t="0x",this.#ae=BigInt(0),this.#oe=BigInt(0),this.#ce=null,this.#le=null}get hash(){return null==this.signature?null:Wu(this.serialized)}get unsignedHash(){return Wu(this.unsignedSerialized)}get from(){return null==this.signature?null:gy(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:iy.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){switch(xl(null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return Sy(this,this.signature);case 1:return Ty(this,this.signature);case 2:return Oy(this,this.signature)}xl(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return Sy(this);case 1:return Ty(this);case 2:return Oy(this)}xl(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&xl(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),xl(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),xl(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const r=[];return null!=this.type?r.push(this.type):t?r.push(2):e?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(r.push(0),r.push(1),r.push(2)),r.sort(),r}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}clone(){return Ny.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new Ny;if("string"==typeof e){const t=Tl(e);if(t[0]>=127)return Ny.from(function(e){const t=uy(e);Pl(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:_y(t[0],"nonce"),gasPrice:xy(t[1],"gasPrice"),gasLimit:xy(t[2],"gasLimit"),to:Ey(t[3]),value:xy(t[4],"value"),data:Ll(t[5]),chainId:my};if(6===t.length)return n;const r=xy(t[6],"v"),s=xy(t[7],"r"),i=xy(t[8],"s");if(s===my&&i===my)n.chainId=r;else{let s=(r-vy)/yy;s<my&&(s=my),n.chainId=s,Pl(s!==my||r===by||r===wy,"non-canonical legacy v","v",t[6]),n.signature=Og.from({r:Fl(t[7],32),s:Fl(t[8],32),v:r}),n.hash=Wu(e)}return n}(t));switch(t[0]){case 1:return Ny.from(function(e){const t=uy(Tl(e).slice(1));Pl(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",Ll(e));const n={type:1,chainId:xy(t[0],"chainId"),nonce:_y(t[1],"nonce"),gasPrice:xy(t[2],"gasPrice"),gasLimit:xy(t[3],"gasLimit"),to:Ey(t[4]),value:xy(t[5],"value"),data:Ll(t[6]),accessList:ky(t[7],"accessList")};return 8===t.length||(n.hash=Wu(e),Iy(n,t.slice(8))),n}(t));case 2:return Ny.from(function(e){const t=uy(Tl(e).slice(1));Pl(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",Ll(e));const n=xy(t[2],"maxPriorityFeePerGas"),r=xy(t[3],"maxFeePerGas"),s={type:2,chainId:xy(t[0],"chainId"),nonce:_y(t[1],"nonce"),maxPriorityFeePerGas:n,maxFeePerGas:r,gasPrice:null,gasLimit:xy(t[4],"gasLimit"),to:Ey(t[5]),value:xy(t[6],"value"),data:Ll(t[7]),accessList:ky(t[8],"accessList")};return 9===t.length||(s.hash=Wu(e),Iy(s,t.slice(9))),s}(t))}xl(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Ny;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=Og.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.hash&&(Pl(t.isSigned(),"unsigned transaction cannot define hash","tx",e),Pl(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(Pl(t.isSigned(),"unsigned transaction cannot define from","tx",e),Pl(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}const jy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Uy=BigInt(58);function Ly(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Pl(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class Ry{name;constructor(e){vl(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const By=new RegExp("^(ipfs)://(.*)$","i"),My=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),By,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Dy{provider;address;name;#ue;#he;constructor(e,t,n){vl(this,{provider:e,address:t,name:n}),this.#ue=null,this.#he=new Qf(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#ue&&(this.#ue=(async()=>{try{return await this.#he.supportsInterface("0x9061b923")}catch(e){if(El(e,"CALL_EXCEPTION"))return!1;throw this.#ue=null,e}})()),await this.#ue}async#de(e,t){t=(t||[]).slice();const n=this.#he.interface;t.unshift(vg(this.name));let r=null;var s;await this.supportsWildcard()&&(r=n.getFunction(e),xl(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[(s=this.name,Ll(Rl(wg(s).map((e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t}))))+"00"),n.encodeFunctionData(r,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await this.#he[e](...t);return r?n.decodeFunctionResult(r,s)[0]:s}catch(e){if(!El(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await this.#de("addr(bytes32)");return null==e||e===nf?null:e}catch(e){if(El(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<2147483648){let t=e+2147483648;const n=await this.#de("addr(bytes32,uint)",[t]);if(jl(n,20))return Xu(n)}let t=null;for(const n of this.provider.plugins)if(n instanceof Ry&&n.supportsCoinType(e)){t=n;break}if(null==t)return null;const n=await this.#de("addr(bytes32,uint)",[e]);if(null==n||"0x"===n)return null;const r=await t.decodeAddress(e,n);if(null!=r)return r;xl(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await this.#de("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await this.#de("contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",n=parseInt(t[4],16);if(t[5].length===2*n)return`${e}://${function(e){let t=Ql(Tl(e)),n="";for(;t;)n=jy[Number(t%Uy)]+n,t/=Uy;return n}("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return`bzz://${n[1]}`;xl(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<My.length;n++){const r=t.match(My[n]);if(null==r)continue;const s=r[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const n=Ly(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:n}),{linkage:e,url:n}}case"erc721":case"erc1155":{const n="erc721"===s?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});const i=await this.getAddress();if(null==i)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const a=(r[2]||"").split("/");if(2!==a.length)return e.push({type:`!${s}caip`,value:r[2]||""}),{url:null,linkage:e};const o=a[1],c=new Qf(a[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===s){const t=await c.ownerOf(o);if(i!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===s){const t=await c.balanceOf(i,o);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let l=await c[n](o);if(null==l||"0x"===l)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:l}),"erc1155"===s&&(l=l.replace("{id}",Zl(o,32).substring(2)),e.push({type:"metadata-url-expanded",value:l})),l.match(/^ipfs:/i)&&(l=Ly(l)),e.push({type:"metadata-url",value:l});let u={};const h=await new Xd(l).send();h.assertOk();try{u=h.bodyJson}catch(t){try{e.push({type:"!metadata",value:h.bodyText})}catch(t){const n=h.body;return n&&e.push({type:"!metadata",value:Ll(n)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!u)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(u)});let d=u.image;if("string"!=typeof d)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(By))return e.push({type:"!imageUrl-ipfs",value:d}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:d}),d=Ly(d)}return e.push({type:"url",value:d}),{linkage:e,url:d}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return xl(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async#fe(e,t){const n=await Dy.getEnsAddress(e);try{const r=new Qf(n,["function resolver(bytes32) view returns (address)"],e),s=await r.resolver(vg(t),{enableCcipRead:!0});return s===nf?null:s}catch(e){throw e}return null}static async fromName(e,t){let n=t;for(;;){if(""===n||"."===n)return null;if("eth"!==t&&"eth"===n)return null;const r=await Dy.#fe(e,n);if(null!=r){const s=new Dy(e,r,t);return n===t||await s.supportsWildcard()?s:null}n=n.split(".").slice(1).join(".")}}}const Fy=BigInt(0);function $y(e,t){return function(n){return null==n?t:e(n)}}function Gy(e){return t=>{if(!Array.isArray(t))throw new Error("not an array");return t.map((t=>e(t)))}}function Hy(e,t){return n=>{const r={};for(const s in e){let i=s;if(t&&s in t&&!(i in n))for(const e of t[s])if(e in n){i=e;break}try{const t=e[s](n[i]);void 0!==t&&(r[s]=t)}catch(e){xl(!1,`invalid value for value.${s} (${e instanceof Error?e.message:"not-an-error"})`,"BAD_DATA",{value:n})}}return r}}function zy(e){return Pl(jl(e,!0),"invalid data","value",e),e}function Wy(e){return Pl(jl(e,32),"invalid hash","value",e),e}const qy=Hy({address:Xu,blockHash:Wy,blockNumber:Yl,data:zy,index:Yl,removed:$y((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}Pl(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}),!1),topics:Gy(Wy),transactionHash:Wy,transactionIndex:Yl},{index:["logIndex"]});const Ky=Hy({hash:$y(Wy),parentHash:Wy,number:Yl,timestamp:Yl,nonce:$y(zy),difficulty:Kl,gasLimit:Kl,gasUsed:Kl,miner:$y(Xu),extraData:zy,baseFeePerGas:$y(Kl)});const Vy=Hy({transactionIndex:Yl,blockNumber:Yl,transactionHash:Wy,address:Xu,topics:Gy(Wy),data:zy,index:Yl,blockHash:Wy},{index:["logIndex"]});const Jy=Hy({to:$y(Xu,null),from:$y(Xu,null),contractAddress:$y(Xu,null),index:Yl,root:$y(Ll),gasUsed:Kl,logsBloom:$y(zy),blockHash:Wy,hash:Wy,logs:Gy((function(e){return Vy(e)})),blockNumber:Yl,cumulativeGasUsed:Kl,effectiveGasPrice:$y(Kl),status:$y(Yl),type:$y(Yl,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Qy(e){e.to&&Kl(e.to)===Fy&&(e.to="0x0000000000000000000000000000000000000000");const t=Hy({hash:Wy,type:e=>"0x"===e||null==e?0:Yl(e),accessList:$y(Gd,null),blockHash:$y(Wy,null),blockNumber:$y(Yl,null),transactionIndex:$y(Yl,null),from:Xu,gasPrice:$y(Kl),maxPriorityFeePerGas:$y(Kl),maxFeePerGas:$y(Kl),gasLimit:Kl,to:$y(Xu,null),value:Kl,nonce:Yl,data:zy,creates:$y(Xu,null),chainId:$y(Kl,null)},{data:["input"],gasLimit:["gas"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=Xu(e.from);let n=Kl(e.nonce,"tx.nonce").toString(16);return n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n,Xu(Ml(Wu(py([t,n])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=Og.from(e.signature):t.signature=Og.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&Kl(t.blockHash)===Fy&&(t.blockHash=null),t}class Yy{name;constructor(e){vl(this,{name:e})}clone(){return new Yy(this.name)}}class Zy extends Yy{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const n={effectiveBlock:e};function r(e,r){let s=(t||{})[e];null==s&&(s=r),Pl("number"==typeof s,`invalud value for ${e}`,"costs",t),n[e]=s}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),vl(this,n)}clone(){return new Zy(this.effectiveBlock,this)}}class Xy extends Yy{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),vl(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new Xy(this.address,this.targetNetwork)}}class eb extends Yy{#E;#pe;get url(){return this.#E}get processFunc(){return this.#pe}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#E=e,this.#pe=t}clone(){return this}}const tb=new Map;class nb{#ge;#oe;#me;constructor(e,t){this.#ge=e,this.#oe=Kl(t),this.#me=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#ge}set name(e){this.#ge=e}get chainId(){return this.#oe}set chainId(e){this.#oe=Kl(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===Kl(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===Kl(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===Kl(e.chainId)}catch(e){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(this.#me.values())}attachPlugin(e){if(this.#me.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#me.set(e.name,e.clone()),this}getPlugin(e){return this.#me.get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const e=new nb(this.name,this.chainId);return this.plugins.forEach((t=>{e.attachPlugin(t.clone())})),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Zy;let n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)"00"===e.data.substring(r,r+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const r=Gd(e.accessList);for(const e in r)n+=t.txAccessListAddress+t.txAccessListStorageKey*r[e].storageKeys.length}return n}static from(e){if(function(){if(ab)return;function e(e,t,n){const r=function(){const r=new nb(e,t);return null!=n.ensNetwork&&r.attachPlugin(new Xy(null,n.ensNetwork)),r.attachPlugin(new Zy),(n.plugins||[]).forEach((e=>{r.attachPlugin(e)})),r};nb.register(e,r),nb.register(t,r),n.altNames&&n.altNames.forEach((e=>{nb.register(e,r)}))}ab=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("matic",137,{ensNetwork:1,plugins:[sb("https://gasstation.polygon.technology/v2")]}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[sb("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[ib(BigInt("1000000"))]}),e("optimism-goerli",420,{}),e("xdai",100,{ensNetwork:1})}(),null==e)return nb.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){const t=tb.get(e);if(t)return t();if("bigint"==typeof e)return new nb("unknown",e);Pl(!1,"unknown network","network",e)}if("function"==typeof e.clone){return e.clone()}if("object"==typeof e){Pl("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);const t=new nb(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new Xy(e.ensAddress,e.ensNetwork)),t}Pl(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));const n=tb.get(e);n&&Pl(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),tb.set(e,t)}}function rb(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const r=n.split(".");if(1===r.length&&r.push(""),2!==r.length)throw new Error(`invalid gwei value: ${e}`);for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let e=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||e++,r[1]=e.toString()}return BigInt(r[0]+r[1])}function sb(e){return new eb(e,(async(e,t,n)=>{let r;n.setHeader("User-Agent","ethers");try{const[t,s]=await Promise.all([n.send(),e()]);r=t;const i=r.bodyJson.standard;return{gasPrice:s.gasPrice,maxFeePerGas:rb(i.maxFee,9),maxPriorityFeePerGas:rb(i.maxPriorityFee,9)}}catch(e){xl(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:r,error:e})}}))}function ib(e){return new eb("data:",(async(t,n,r)=>{const s=await t();if(null==s.maxFeePerGas||null==s.maxPriorityFeePerGas)return s;const i=s.maxFeePerGas-s.maxPriorityFeePerGas;return{gasPrice:s.gasPrice,maxFeePerGas:i+e,maxPriorityFeePerGas:e}}))}let ab=!1;function ob(e){return JSON.parse(JSON.stringify(e))}class cb{#ye;#be;#we;#ve;constructor(e){this.#ye=e,this.#be=null,this.#we=4e3,this.#ve=-2}get pollingInterval(){return this.#we}set pollingInterval(e){this.#we=e}async#Ae(){try{const e=await this.#ye.getBlockNumber();if(-2===this.#ve)return void(this.#ve=e);if(e!==this.#ve){for(let t=this.#ve+1;t<=e;t++){if(null==this.#be)return;await this.#ye.emit("block",t)}this.#ve=e}}catch(e){}null!=this.#be&&(this.#be=this.#ye._setTimeout(this.#Ae.bind(this),this.#we))}start(){this.#be||(this.#be=this.#ye._setTimeout(this.#Ae.bind(this),this.#we),this.#Ae())}stop(){this.#be&&(this.#ye._clearTimeout(this.#be),this.#be=null)}pause(e){this.stop(),e&&(this.#ve=-2)}resume(){this.start()}}class lb{#ye;#Ae;#Ee;constructor(e){this.#ye=e,this.#Ee=!1,this.#Ae=e=>{this._poll(e,this.#ye)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#Ee||(this.#Ee=!0,this.#Ae(-2),this.#ye.on("block",this.#Ae))}stop(){this.#Ee&&(this.#Ee=!1,this.#ye.off("block",this.#Ae))}pause(e){this.stop()}resume(){this.start()}}class ub extends lb{#K;constructor(e,t){super(e),this.#K=ob(t)}async _poll(e,t){throw new Error("@TODO")}}class hb extends lb{#ke;constructor(e,t){super(e),this.#ke=t}async _poll(e,t){const n=await t.getTransactionReceipt(this.#ke);n&&t.emit(this.#ke,n)}}class db{#ye;#K;#be;#Ee;#ve;constructor(e,t){this.#ye=e,this.#K=ob(t),this.#be=this.#Ae.bind(this),this.#Ee=!1,this.#ve=-2}async#Ae(e){if(-2===this.#ve)return;const t=ob(this.#K);t.fromBlock=this.#ve+1,t.toBlock=e;const n=await this.#ye.getLogs(t);if(0!==n.length)for(const e of n)this.#ye.emit(this.#K,e),this.#ve=e.blockNumber;else this.#ve<e-60&&(this.#ve=e-60)}start(){this.#Ee||(this.#Ee=!0,-2===this.#ve&&this.#ye.getBlockNumber().then((e=>{this.#ve=e})),this.#ye.on("block",this.#be))}stop(){this.#Ee&&(this.#Ee=!1,this.#ye.off("block",this.#be))}pause(e){this.stop(),e&&(this.#ve=-2)}resume(){this.start()}}const fb=BigInt(2);function pb(e){return e&&"function"==typeof e.then}function gb(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce(((e,n)=>(e[n]=t[n],e)),{})}return t}))}class mb{name;constructor(e){vl(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function yb(e){return(e=Array.from(new Set(e).values())).sort(),e}async function bb(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"pending":case"debug":case"error":case"network":return{type:e,tag:e}}if(jl(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:gb("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:gb("orphan",t),filter:(n=t,JSON.parse(JSON.stringify(n)))}}var n;if(e.address||e.topics){const n=e,r={topics:(n.topics||[]).map((e=>null==e?null:Array.isArray(e)?yb(e.map((e=>e.toLowerCase()))):e.toLowerCase()))};if(n.address){const e=[],s=[],i=n=>{jl(n)?e.push(n):s.push((async()=>{e.push(await Pd(n,t))})())};Array.isArray(n.address)?n.address.forEach(i):i(n.address),s.length&&await Promise.all(s),r.address=yb(e.map((e=>e.toLowerCase())))}return{filter:r,tag:gb("event",r),type:"event"}}Pl(!1,"unknown ProviderEvent","event",e)}function wb(){return(new Date).getTime()}const vb={cacheTimeout:250,pollingInterval:4e3};class Ab{#_e;#me;#xe;#Pe;#Ce;#Se;#Ie;#Oe;#Te;#Ne;#je;#a;constructor(e,t){if(this.#a=Object.assign({},vb,t||{}),"any"===e)this.#Se=!0,this.#Ce=null;else if(e){const t=nb.from(e);this.#Se=!1,this.#Ce=Promise.resolve(t),setTimeout((()=>{this.emit("network",t,null)}),0)}else this.#Se=!1,this.#Ce=null;this.#Oe=-1,this.#Ie=new Map,this.#_e=new Map,this.#me=new Map,this.#xe=null,this.#Pe=!1,this.#Te=1,this.#Ne=new Map,this.#je=!1}get pollingInterval(){return this.#a.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#me.values())}attachPlugin(e){if(this.#me.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#me.set(e.name,e.connect(this)),this}getPlugin(e){return this.#me.get(e)||null}get disableCcipRead(){return this.#je}set disableCcipRead(e){this.#je=!!e}async#Ue(e){const t=this.#a.cacheTimeout;if(t<0)return await this._perform(e);const n=gb(e.method,e);let r=this.#Ie.get(n);return r||(r=this._perform(e),this.#Ie.set(n,r),setTimeout((()=>{this.#Ie.get(n)===r&&this.#Ie.delete(n)}),t)),await r}async ccipReadFetch(e,t,n){if(this.disableCcipRead||0===n.length||null==e.to)return null;const r=e.to.toLowerCase(),s=t.toLowerCase(),i=[];for(let t=0;t<n.length;t++){const a=n[t],o=a.replace("{sender}",r).replace("{data}",s),c=new Xd(o);-1===a.indexOf("{data}")&&(c.body={data:s,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:t,urls:n});let l="unknown error";const u=await c.send();try{const e=u.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:e}),e.data;e.message&&(l=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:e})}catch(e){}xl(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${l}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:a,errorMessage:l}}),i.push(l)}xl(!1,`error encountered during CCIP fetch: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:i}})}_wrapBlock(e,t){return new mf(function(e){const t=Ky(e);return t.transactions=e.transactions.map((e=>"string"==typeof e?e:Qy(e))),t}(e),this)}_wrapLog(e,t){return new yf(function(e){return qy(e)}(e),this)}_wrapTransactionReceipt(e,t){return new bf(function(e){return Jy(e)}(e),this)}_wrapTransactionResponse(e,t){return new wf(Qy(e),this)}_detectNetwork(){xl(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){xl(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Yl(await this.#Ue({method:"getBlockNumber"}),"%response");return this.#Oe>=0&&(this.#Oe=e),e}_getAddress(e){return Pd(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}return jl(e)?jl(e,32)?e:eu(e):("bigint"==typeof e&&(e=Yl(e,"blockTag")),"number"==typeof e?e>=0?eu(e):this.#Oe>=0?eu(this.#Oe+e):this.getBlockNumber().then((t=>eu(t+e))):void Pl(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map((e=>null==e?null:Array.isArray(e)?yb(e.map((e=>e.toLowerCase()))):e.toLowerCase())),n="blockHash"in e?e.blockHash:void 0,r=(e,r,s)=>{let i;switch(e.length){case 0:break;case 1:i=e[0];break;default:e.sort(),i=e}if(n&&(null!=r||null!=s))throw new Error("invalid filter");const a={};return i&&(a.address=i),t.length&&(a.topics=t),r&&(a.fromBlock=r),s&&(a.toBlock=s),n&&(a.blockHash=n),a};let s,i,a=[];if(e.address)if(Array.isArray(e.address))for(const t of e.address)a.push(this._getAddress(t));else a.push(this._getAddress(e.address));return"fromBlock"in e&&(s=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(i=this._getBlockTag(e.toBlock)),a.filter((e=>"string"!=typeof e)).length||null!=s&&"string"!=typeof s||null!=i&&"string"!=typeof i?Promise.all([Promise.all(a),s,i]).then((e=>r(e[0],e[1],e[2]))):r(a,s,i)}_getTransactionRequest(e){const t=gf(e),n=[];if(["to","from"].forEach((e=>{if(null==t[e])return;const r=Pd(t[e]);pb(r)?n.push(async function(){t[e]=await r}()):t[e]=r})),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);pb(e)?n.push(async function(){t.blockTag=await e}()):t.blockTag=e}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(null==this.#Ce){const e=this._detectNetwork().then((e=>(this.emit("network",e,null),e)),(t=>{throw this.#Ce===e&&(this.#Ce=null),t}));return this.#Ce=e,(await e).clone()}const e=this.#Ce,[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(this.#Se?(this.emit("network",n,t),this.#Ce===e&&(this.#Ce=Promise.resolve(n))):xl(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:n}=await wl({_block:this.#Le("latest",!1),gasPrice:(async()=>{try{return Kl(await this.#Ue({method:"getGasPrice"}),"%response")}catch(e){}return null})()});let r=null,s=null;const i=this._wrapBlock(t,e);return i&&i.baseFeePerGas&&(s=BigInt("1000000000"),r=i.baseFeePerGas*fb+s),new pf(n,r,s)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const e=new Xd(n.url),r=await n.processFunc(t,this,e);return new pf(r.gasPrice,r.maxFeePerGas,r.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return pb(t)&&(t=await t),Kl(await this.#Ue({method:"estimateGas",transaction:t}),"%response")}async#Re(e,t,n){xl(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const r=gf(e);try{return Ll(await this._perform({method:"call",transaction:r,blockTag:t}))}catch(e){if(!this.disableCcipRead&&kl(e)&&e.data&&n>=0&&"latest"===t&&null!=r.to&&"0x556f1830"===Ml(e.data,0,4)){const s=e.data,i=await Pd(r.to,this);let a;try{a=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};xl(Bl(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Ml(e,0,32);xl(Ml(n,0,12)===Ml(Sb,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=Ml(n,12);try{const n=[],r=Yl(Ml(e,32,64)),s=Yl(Ml(e,r,r+32)),i=Ml(e,r+32);for(let e=0;e<s;e++){const t=Eb(i,32*e);if(null==t)throw new Error("abort");n.push(t)}t.urls=n}catch(e){xl(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=kb(e,64);if(null==n)throw new Error("abort");t.calldata=n}catch(e){xl(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}xl(Ml(e,100,128)===Ml(Sb,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=Ml(e,96,100);try{const n=kb(e,128);if(null==n)throw new Error("abort");t.extraData=n}catch(e){xl(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e])),t}(Ml(e.data,4))}catch(e){xl(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:s}})}xl(a.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:a.errorArgs}});const o=await this.ccipReadFetch(r,a.calldata,a.urls);xl(null!=o,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:e.data,errorArgs:a.errorArgs}});const c={to:i,data:Rl([a.selector,Cb([o,a.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const e=await this.#Re(c,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:e}),e}}throw e}}async#Be(e){const{value:t}=await wl({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:n}=await wl({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#Be(this.#Re(t,n,e.enableCcipRead?0:-1))}async#Me(e,t,n){let r=this._getAddress(t),s=this._getBlockTag(n);return"string"==typeof r&&"string"==typeof s||([r,s]=await Promise.all([r,s])),await this.#Be(this.#Ue(Object.assign(e,{address:r,blockTag:s})))}async getBalance(e,t){return Kl(await this.#Me({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Yl(await this.#Me({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return Ll(await this.#Me({method:"getCode"},e,t))}async getStorage(e,t,n){const r=Kl(t,"position");return Ll(await this.#Me({method:"getStorage",position:r},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:r}=await wl({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=Ny.from(e);if(s.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,r).replaceableTransaction(t)}async#Le(e,t){if(jl(e,32))return await this.#Ue({method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return"string"!=typeof n&&(n=await n),await this.#Ue({method:"getBlock",blockTag:n,includeTransactions:t})}async getBlock(e,t){const{network:n,params:r}=await wl({network:this.getNetwork(),params:this.#Le(e,!!t)});return null==r?null:this._wrapBlock(r,n)}async getTransaction(e){const{network:t,params:n}=await wl({network:this.getNetwork(),params:this.#Ue({method:"getTransaction",hash:e})});return null==n?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await wl({network:this.getNetwork(),params:this.#Ue({method:"getTransactionReceipt",hash:e})});if(null==n)return null;if(null==n.gasPrice&&null==n.effectiveGasPrice){const t=await this.#Ue({method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await wl({network:this.getNetwork(),result:this.#Ue({method:"getTransactionResult",hash:e})});return null==t?null:Ll(t)}async getLogs(e){let t=this._getFilter(e);pb(t)&&(t=await t);const{network:n,params:r}=await wl({network:this.getNetwork(),params:this.#Ue({method:"getLogs",filter:t})});return r.map((e=>this._wrapLog(e,n)))}_getProvider(e){xl(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Dy.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=vg((e=Xu(e)).substring(2).toLowerCase()+".addr.reverse");try{const n=await Dy.getEnsAddress(this),r=new Qf(n,["function resolver(bytes32) view returns (address)"],this),s=await r.resolver(t);if(null==s||s===nf)return null;const i=new Qf(s,["function name(bytes32) view returns (string)"],this),a=await i.name(t);return await this.resolveName(a)!==e?null:a}catch(e){if(El(e,"BAD_DATA")&&"0x"===e.value)return null;if(El(e,"CALL_EXCEPTION"))return null;throw e}return null}async waitForTransaction(e,t,n){const r=null!=t?t:1;return 0===r?this.getTransactionReceipt(e):new Promise((async(t,s)=>{let i=null;const a=async n=>{try{const s=await this.getTransactionReceipt(e);if(null!=s&&n-s.blockNumber+1>=r)return t(s),void(i&&(clearTimeout(i),i=null))}catch(e){console.log("EEE",e)}this.once("block",a)};null!=n&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",a),s(_l("timeout","TIMEOUT",{reason:"timeout"})))}),n)),a(await this.getBlockNumber())}))}async waitForBlock(e){xl(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#Ne.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#Ne.delete(e))}_setTimeout(e,t){null==t&&(t=0);const n=this.#Te++,r=()=>{this.#Ne.delete(n),e()};if(this.paused)this.#Ne.set(n,{timer:null,func:r,time:t});else{const e=setTimeout(r,t);this.#Ne.set(n,{timer:e,func:r,time:wb()})}return n}_forEachSubscriber(e){for(const t of this.#_e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new mb(e.type);case"block":{const e=new cb(this);return e.pollingInterval=this.pollingInterval,e}case"event":return new db(this,e.filter);case"transaction":return new hb(this,e.hash);case"orphan":return new ub(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of this.#_e.values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),null!=this.#xe&&t.pause(this.#xe);break}}async#De(e,t){let n=await bb(e,this);return"event"===n.type&&t&&t.length>0&&!0===t[0].removed&&(n=await bb({orphan:"drop-log",log:t[0]},this)),this.#_e.get(n.tag)||null}async#Fe(e){const t=await bb(e,this),n=t.tag;let r=this.#_e.get(n);if(!r){r={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#_e.set(n,r)}return r}async on(e,t){const n=await this.#Fe(e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#xe&&n.subscriber.pause(this.#xe)),this}async once(e,t){const n=await this.#Fe(e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#xe&&n.subscriber.pause(this.#xe)),this}async emit(e,...t){const n=await this.#De(e,t);if(!n||0===n.listeners.length)return!1;const r=n.listeners.length;return n.listeners=n.listeners.filter((({listener:n,once:r})=>{const s=new Ef(this,r?null:n,e);try{n.call(this,...t,s)}catch(e){}return!r})),0===n.listeners.length&&(n.started&&n.subscriber.stop(),this.#_e.delete(n.tag)),r>0}async listenerCount(e){if(e){const t=await this.#De(e);return t?t.listeners.length:0}let t=0;for(const{listeners:e}of this.#_e.values())t+=e.length;return t}async listeners(e){if(e){const t=await this.#De(e);return t?t.listeners.map((({listener:e})=>e)):[]}let t=[];for(const{listeners:e}of this.#_e.values())t=t.concat(e.map((({listener:e})=>e)));return t}async off(e,t){const n=await this.#De(e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return t&&0!==n.listeners.length||(n.started&&n.subscriber.stop(),this.#_e.delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:r}=await this.#Fe(e);n&&r.stop(),this.#_e.delete(t)}else for(const[e,{started:t,subscriber:n}]of this.#_e)t&&n.stop(),this.#_e.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#Pe}destroy(){this.removeAllListeners();for(const e of this.#Ne.keys())this._clearTimeout(e);this.#Pe=!0}get paused(){return null!=this.#xe}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#Oe=-1,null!=this.#xe){if(this.#xe==!!e)return;xl(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e))),this.#xe=!!e;for(const e of this.#Ne.values())e.timer&&clearTimeout(e.timer),e.time=wb()-e.time}resume(){if(null!=this.#xe){this._forEachSubscriber((e=>e.resume())),this.#xe=null;for(const e of this.#Ne.values()){let t=e.time;t<0&&(t=0),e.time=wb(),setTimeout(e.func,t)}}}}function Eb(e,t){try{const n=kb(e,t);if(n)return _h(n)}catch(e){}return null}function kb(e,t){if("0x"===e)return null;try{const n=Yl(Ml(e,t,t+32)),r=Yl(Ml(e,n,n+32));return Ml(e,n+32,n+32+r)}catch(e){}return null}function _b(e){const t=Xl(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function xb(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}const Pb=new Uint8Array([]);function Cb(e){const t=[];let n=0;for(let r=0;r<e.length;r++)t.push(Pb),n+=32;for(let r=0;r<e.length;r++){const s=Tl(e[r]);t[r]=_b(n),t.push(_b(s.length)),t.push(xb(s)),n+=32+32*Math.ceil(s.length/32)}return Rl(t)}const Sb="0x0000000000000000000000000000000000000000000000000000000000000000";function Ib(e,t){if(e.provider)return e.provider;xl(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Ob(e,t){let n=gf(t);if(null!=n.to&&(n.to=Pd(n.to,e)),null!=n.from){const t=n.from;n.from=Promise.all([e.getAddress(),Pd(t,e)]).then((([e,t])=>(Pl(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e)))}else n.from=e.getAddress();return await wl(n)}class Tb{provider;constructor(e){vl(this,{provider:e||null})}async getNonce(e){return Ib(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Ob(this,e)}async populateTransaction(e){const t=Ib(this,"populateTransaction"),n=await Ob(this,e);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const r=await this.provider.getNetwork();if(null!=n.chainId){Pl(Kl(n.chainId)===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=r.chainId;const s=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!s?0!==n.type&&1!==n.type||!s||Pl(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):Pl(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const e=await t.getFeeData();xl(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==n.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(n.type=2,null!=n.gasPrice){const e=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=e,n.maxPriorityFeePerGas=e}else null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(xl(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice),n.type=0):xl(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2===n.type&&(null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else n.type=2;return await wl(n)}async estimateGas(e){return Ib(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Ib(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=Ib(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=Ib(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const r=Ny.from(n);return await t.broadcastTransaction(await this.signTransaction(r))}}class Nb{#ye;#$e;#be;#Ee;#Ge;#He;constructor(e){this.#ye=e,this.#$e=null,this.#be=this.#Ae.bind(this),this.#Ee=!1,this.#Ge=null,this.#He=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#Ae(e){try{null==this.#$e&&(this.#$e=this._subscribe(this.#ye));let e=null;try{e=await this.#$e}catch(e){if(!El(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e)return this.#$e=null,void this.#ye._recoverSubscriber(this,this._recover(this.#ye));const t=await this.#ye.getNetwork();if(this.#Ge||(this.#Ge=t),this.#Ge.chainId!==t.chainId)throw new Error("chaid changed");if(this.#He)return;const n=await this.#ye.send("eth_getFilterChanges",[e]);await this._emitResults(this.#ye,n)}catch(e){console.log("@TODO",e)}this.#ye.once("block",this.#be)}#ze(){const e=this.#$e;e&&(this.#$e=null,e.then((e=>{this.#ye.send("eth_uninstallFilter",[e])})))}start(){this.#Ee||(this.#Ee=!0,this.#Ae(-2))}stop(){this.#Ee&&(this.#Ee=!1,this.#He=!0,this.#ze(),this.#ye.off("block",this.#be))}pause(e){e&&this.#ze(),this.#ye.off("block",this.#be)}resume(){this.start()}}class jb extends Nb{#We;constructor(e,t){var n;super(e),this.#We=(n=t,JSON.parse(JSON.stringify(n)))}_recover(e){return new db(e,this.#We)}async _subscribe(e){return await e.send("eth_newFilter",[this.#We])}async _emitResults(e,t){for(const n of t)e.emit(this.#We,e._wrapLog(n,e._network))}}class Ub extends Nb{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const Lb="bigint,boolean,function,number,string,symbol".split(/,/g);function Rb(e){if(null==e||Lb.indexOf(typeof e)>=0)return e;if("function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(Rb);if("object"==typeof e)return Object.keys(e).reduce(((t,n)=>(t[n]=e[n],t)),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function Bb(e){return new Promise((t=>{setTimeout(t,e)}))}function Mb(e){return e?e.toLowerCase():e}function Db(e){return e&&"number"==typeof e.pollingInterval}const Fb={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class $b extends Tb{address;constructor(e,t){super(e),vl(this,{address:t=Xu(t)})}connect(e){xl(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=Rb(e),n=[];if(t.from){const r=t.from;n.push((async()=>{const n=await Pd(r,this.provider);Pl(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n})())}else t.from=this.address;if(null==t.gasLimit&&n.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){const e=t.to;n.push((async()=>{t.to=await Pd(e,this.provider)})())}n.length&&await Promise.all(n);const r=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise(((e,r)=>{const s=[1e3,100],i=async()=>{const r=await this.provider.getTransaction(n);null==r?this.provider._setTimeout((()=>{i()}),s.pop()||4e3):e(r.replaceableTransaction(t))};i()}))}async signTransaction(e){const t=Rb(e);if(t.from){const n=await Pd(t.from,this.provider);Pl(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n}else t.from=this.address;const n=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const t="string"==typeof e?kh(e):e;return await this.provider.send("personal_sign",[Ll(t),this.address.toLowerCase()])}async signTypedData(e,t,n){const r=Rb(n),s=await Fd.resolveNames(e,t,r,(async e=>{const t=await Pd(e);return Pl(null!=t,"TypedData does not support null address","value",e),t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Fd.getPayload(s.domain,t,s.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"==typeof e?kh(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ll(t)])}}class Gb extends Ab{#a;#qe;#Ke;#Ve;#Je;#Ge;#Qe(){if(this.#Ve)return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#Ve=setTimeout((()=>{this.#Ve=null;const e=this.#Ke;for(this.#Ke=[];e.length;){const t=[e.shift()];for(;e.length&&t.length!==this.#a.batchMaxCount;){t.push(e.shift());if(JSON.stringify(t.map((e=>e.payload))).length>this.#a.batchMaxSize){e.unshift(t.pop());break}}(async()=>{const e=1===t.length?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const n=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:n});for(const{resolve:e,reject:r,payload:s}of t){if(this.destroyed){r(_l("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:s.method}));continue}const t=n.filter((e=>e.id===s.id))[0];if(null!=t)"error"in t?r(this.getRpcError(s,t)):e(t.result);else{const e=_l("missing response for request","BAD_DATA",{value:n,info:{payload:s}});this.emit("error",e),r(e)}}}catch(e){this.emit("debug",{action:"receiveRpcError",error:e});for(const{reject:n}of t)n(e)}})()}}),e)}constructor(e,t){super(e,t),this.#qe=1,this.#a=Object.assign({},Fb,t||{}),this.#Ke=[],this.#Ve=null,this.#Ge=null;{let e=null;const t=new Promise((t=>{e=t}));this.#Je={promise:t,resolve:e}}const n=this._getOption("staticNetwork");n&&(Pl(null==e||n.matches(e),"staticNetwork MUST match network object","options",t),this.#Ge=n)}_getOption(e){return this.#a[e]}get _network(){return xl(this.#Ge,"network is not available yet","NETWORK_ERROR"),this.#Ge}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&Kl(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const n=await this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)return e;if(this.ready)return nb.from(Kl(await this.send("eth_chainId",[])));const t={id:this.#qe++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let n;this.emit("debug",{action:"sendRpcPayload",payload:t});try{n=(await this._send(t))[0]}catch(e){throw this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:n}),"result"in n)return nb.from(Kl(n.result));throw this.getRpcError(t,n)}_start(){null!=this.#Je&&null!=this.#Je.resolve&&(this.#Je.resolve(),this.#Je=null,(async()=>{for(;null==this.#Ge&&!this.destroyed;)try{this.#Ge=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",_l("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await Bb(1e3)}this.#Qe()})())}async _waitUntilReady(){if(null!=this.#Je)return await this.#Je.promise}_getSubscriber(e){return"pending"===e.type?new Ub(this):"event"===e.type?this._getOption("polling")?new db(this,e.filter):new jb(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new mb("orphan"):super._getSubscriber(e)}get ready(){return null==this.#Je}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((n=>{if(null==e[n])return;let r=n;"gasLimit"===n&&(r="gas"),t[r]=eu(Kl(e[n],`tx.${n}`))})),["from","to","data"].forEach((n=>{null!=e[n]&&(t[n]=Ll(e[n]))})),e.accessList&&(t.accessList=Gd(e.accessList)),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Mb(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Mb(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Mb(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Mb(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Mb):e.filter.address=Mb(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:n}=e,{error:r}=t;if("eth_estimateGas"===n&&r.message){const t=r.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return _l("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}})}if("eth_call"===n||"eth_estimateGas"===n){const t=Wb(r),s=kd.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],t?t.data:null);return s.info={error:r,payload:e},s}const s=JSON.stringify(function(e){const t=[];return qb(e,t),t}(r));if("string"==typeof r.message&&r.message.match(/user denied|ethers-user-denied/i)){return _l("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:r}})}if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){const t=e.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return _l("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:r}});if(s.match(/nonce/i)&&s.match(/too low/i))return _l("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:r}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return _l("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:r}});if(s.match(/only replay-protected/i))return _l("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:t,info:{error:r}}})}let i=!!s.match(/the method .* does not exist/i);return i||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(i=!0),i?_l("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):_l("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(_l("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const n=this.#qe++,r=new Promise(((r,s)=>{this.#Ke.push({resolve:r,reject:s,payload:{method:e,params:t,id:n,jsonrpc:"2.0"}})}));return this.#Qe(),r}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"==typeof e){const n=await t;if(e>=n.length)throw new Error("no such account");return new $b(this,n[e])}const{accounts:n}=await wl({network:this.getNetwork(),accounts:t});e=Xu(e);for(const t of n)if(Xu(t)===e)return new $b(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((e=>new $b(this,e)))}destroy(){this.#Ve&&(clearTimeout(this.#Ve),this.#Ve=null);for(const{payload:e,reject:t}of this.#Ke)t(_l("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#Ke=[],super.destroy()}}class Hb extends Gb{#Ye;constructor(e,t){super(e,t),this.#Ye=4e3}_getSubscriber(e){const t=super._getSubscriber(e);return Db(t)&&(t.pollingInterval=this.#Ye),t}get pollingInterval(){return this.#Ye}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#Ye=e,this._forEachSubscriber((e=>{Db(e)&&(e.pollingInterval=this.#Ye)}))}}class zb extends Hb{#Ze;constructor(e,t,n){null==e&&(e="http://localhost:8545"),super(t,n),this.#Ze="string"==typeof e?new Xd(e):e.clone()}_getConnection(){return this.#Ze.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){const t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");const n=await t.send();n.assertOk();let r=n.bodyJson;return Array.isArray(r)||(r=[r]),r}}function Wb(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&jl(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(const t in e){const n=Wb(e[t]);if(n)return n}return null}if("string"==typeof e)try{return Wb(JSON.parse(e))}catch(e){}return null}function qb(e,t){if(null!=e){if("string"==typeof e.message&&t.push(e.message),"object"==typeof e)for(const n in e)qb(e[n],t);if("string"==typeof e)try{return qb(JSON.parse(e),t)}catch(e){}}}class Kb extends Hb{#U;constructor(e,t){super(t,{batchMaxCount:1}),this.#U=async(t,n)=>{const r={method:t,params:n};this.emit("debug",{action:"sendEip1193Request",payload:r});try{const t=await e.request(r);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(e){const t=new Error(e.message);throw t.code=e.code,t.data=e.data,t.payload=r,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}}}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){Pl(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#U(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter((t=>t.toLowerCase()===e)).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#U("eth_requestAccounts",[])}catch(e){const t=e.payload;throw this.getRpcError(t,{id:t.id,error:e})}return await super.getSigner(e)}}const Vb=new class{dev=!1;avaxRpc;avaxChainId};const Jb=new class extends a{store=new s("cached-follows");constructor(){super(),this.addAllowedEvents("follow","unfollow")}async fetchSignedUserFollows(){const{data:e,error:t}=await Ds.client.from("follows").select().eq("follower_id",Lw.userId);if(t)throw t;const n=new Set(Object.keys(this.store.getAll()));for(const t of e){const e=t.followee_id;n.has(e)||this._follow(e),n.delete(e)}for(const e of n)this._unfollow(e)}clearCache(){this.store.clear()}_follow(e){this.store.set(e,!0),this.fireEvent("follow",e)}async follow(e){const t=this.isFollowing(e);this._follow(e);const{error:n}=await Ds.client.from("follows").insert({followee_id:e});if(n)throw t||this._unfollow(e),n}_unfollow(e){this.store.delete(e),this.fireEvent("unfollow",e)}async unfollow(e){const t=this.isFollowing(e);this._unfollow(e);const{error:n}=await Ds.client.from("follows").delete().eq("follower_id",Lw.userId).eq("followee_id",e);if(n)throw t&&this._follow(e),n}isFollowing(e){return!0===this.store.get(e)}},Qb={user_id:"",total_earned_trading_fees:"0",follower_count:0,following_count:0,blocked:!1,created_at:"-infinity"},Yb="*, total_earned_trading_fees::text",Zb=(e,t)=>e.user_id===t.user_id&&e.wallet_address===t.wallet_address&&e.total_earned_trading_fees===t.total_earned_trading_fees&&e.display_name===t.display_name&&e.profile_image===t.profile_image&&e.x_username===t.x_username&&(e.metadata,t.metadata,!0)&&e.follower_count===t.follower_count&&e.following_count===t.following_count&&e.blocked===t.blocked;const Xb=new class extends a{store=new s("cached-user-details");constructor(){super(),this.addAllowedEvents("update")}init(){Ds.client.channel("user-details-changes").on("postgres_changes",{event:"*",schema:"public",table:"user_details"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.user_id)})).subscribe()}cache(e,t){Zb(t,this.get(e))||(this.store.set(e,t,!0),this.fireEvent("update",t))}get(e){const t=this.store.get(e);return t||{...Qb,user_id:e}}async refresh(e){const{data:t,error:n}=await Ds.client.from("user_details").select(Yb).eq("user_id",e);if(n)throw n;const r=t?.[0];r&&!Zb(r,this.get(e))&&this.cache(e,r)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing user details:",e))),t}getByXUsername(e){const t=Object.values(this.store.getAll()).find((t=>t.x_username===e));return t||{...Qb,x_username:e}}async refreshByXUsername(e){const{data:t,error:n}=await Ds.client.from("user_details").select(Yb).eq("x_username",e);if(n)throw n;const r=t?.[0];r&&(Zb(r,this.getByXUsername(e))||this.cache(r.user_id,r))}getAndRefreshByXUsername(e){const t=this.getByXUsername(e);return this.refreshByXUsername(e).catch((e=>console.error("Error refreshing user details:",e))),t}getByWalletAddress(e){const t=Object.values(this.store.getAll()).find((t=>t.wallet_address===e));return t||{...Qb,wallet_address:e}}async refreshByWalletAddress(e){const{data:t,error:n}=await Ds.client.from("user_details").select(Yb).eq("wallet_address",e);if(n)throw n;const r=t?.[0];r&&(Zb(r,this.getByWalletAddress(e))||this.cache(r.user_id,r))}getAndRefreshByWalletAddress(e){const t=this.getByWalletAddress(e);return this.refreshByWalletAddress(e).catch((e=>console.error("Error refreshing user details:",e))),t}cacheMultiple(e){for(const t of e)this.cache(t.user_id,t)}},ew=(0,ti.ax)({id:43114,name:"Avalanche",network:"avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]},public:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://snowtrace.io"},default:{name:"SnowTrace",url:"https://snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}}),tw=(0,ti.ax)({id:43113,name:"Avalanche Fuji",network:"avalanche-fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]},public:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://testnet.snowtrace.io"},default:{name:"SnowTrace",url:"https://testnet.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7096959}},testnet:!0});var nw,rw,sw,iw,aw,ow,cw,lw,uw,hw,dw,fw,pw,gw,mw,yw,bw,ww,vw,Aw,Ew=n(9795),kw="eip155",_w="requestedChains",xw="wallet_addEthereumChain",Pw=class extends li{constructor(e){super({...e,options:{isNewChainsStale:!0,...e.options}}),ai(this,sw),ai(this,aw),ai(this,cw),ai(this,uw),ai(this,dw),ai(this,pw),ai(this,mw),ai(this,bw),ai(this,vw),this.id="walletConnect",this.name="WalletConnect",this.ready=!0,ai(this,nw,void 0),ai(this,rw,void 0),this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,ui.K)(e[0])})},this.onChainChanged=e=>{const t=Number(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=()=>{ci(this,pw,gw).call(this,[]),this.emit("disconnect")},this.onDisplayUri=e=>{this.emit("message",{type:"display_uri",data:e})},this.onConnect=()=>{this.emit("connect",{})},ci(this,sw,iw).call(this)}async connect({chainId:e,pairingTopic:t}={}){try{let n=e;if(!n){const e=this.storage?.getItem("store"),t=e?.state?.data?.chain?.id;n=t&&!this.isChainUnsupported(t)?t:this.chains[0]?.id}if(!n)throw new Error("No chains found on connector.");const r=await this.getProvider();ci(this,uw,hw).call(this);const s=ci(this,cw,lw).call(this);if(r.session&&s&&await r.disconnect(),!r.session||s){const e=this.chains.filter((e=>e.id!==n)).map((e=>e.id));this.emit("message",{type:"connecting"}),await r.connect({pairingTopic:t,chains:[n],optionalChains:e.length?e:void 0}),ci(this,pw,gw).call(this,this.chains.map((({id:e})=>e)))}const i=await r.enable(),a=(0,ui.K)(i[0]),o=await this.getChainId();return{account:a,chain:{id:o,unsupported:this.isChainUnsupported(o)}}}catch(e){if(/user rejected/i.test(e?.message))throw new Ci(e);throw e}}async disconnect(){const e=await this.getProvider();try{await e.disconnect()}catch(e){if(!/No matching key/i.test(e.message))throw e}finally{ci(this,dw,fw).call(this),ci(this,pw,gw).call(this,[])}}async getAccount(){const{accounts:e}=await this.getProvider();return(0,ui.K)(e[0])}async getChainId(){const{chainId:e}=await this.getProvider();return e}async getProvider({chainId:e}={}){return ii(this,nw)||await ci(this,sw,iw).call(this),e&&await this.switchChain(e),ii(this,nw)}async getWalletClient({chainId:e}={}){const[t,n]=await Promise.all([this.getProvider({chainId:e}),this.getAccount()]),r=this.chains.find((t=>t.id===e));if(!t)throw new Error("provider is required.");return Ta({account:n,chain:r,transport:Ba(t)})}async isAuthorized(){try{const[e,t]=await Promise.all([this.getAccount(),this.getProvider()]),n=ci(this,cw,lw).call(this);if(!e)return!1;if(n&&t.session){try{await t.disconnect()}catch{}return!1}return!0}catch{return!1}}async switchChain(e){const t=this.chains.find((t=>t.id===e));if(!t)throw new Ni(new Error("chain not found on connector."));try{const n=await this.getProvider(),r=ci(this,bw,ww).call(this),s=ci(this,vw,Aw).call(this);if(!r.includes(e)&&s.includes(xw)){await n.request({method:xw,params:[{chainId:(0,Gi.eC)(t.id),blockExplorerUrls:[t.blockExplorers?.default?.url],chainName:t.name,nativeCurrency:t.nativeCurrency,rpcUrls:[...t.rpcUrls.default.http]}]});const r=ci(this,mw,yw).call(this);r.push(e),ci(this,pw,gw).call(this,r)}return await n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,Gi.eC)(e)}]}),t}catch(e){if(/user rejected request/i.test("string"==typeof e?e:e?.message))throw new Ci(e);throw new Ni(e)}}};nw=new WeakMap,rw=new WeakMap,sw=new WeakSet,iw=async function(){return ii(this,rw)||"undefined"==typeof window||oi(this,rw,ci(this,aw,ow).call(this)),ii(this,rw)},aw=new WeakSet,ow=async function(){const{EthereumProvider:e,OPTIONAL_EVENTS:t,OPTIONAL_METHODS:r}=await n.e(979).then(n.bind(n,7979)),[s,...i]=this.chains.map((({id:e})=>e));if(s){const{projectId:n,showQrModal:a=!0,qrModalOptions:o,metadata:c,relayUrl:l}=this.options;oi(this,nw,await e.init({showQrModal:a,qrModalOptions:o,projectId:n,optionalMethods:r,optionalEvents:t,chains:[s],optionalChains:i.length?i:void 0,rpcMap:Object.fromEntries(this.chains.map((e=>[e.id,e.rpcUrls.default.http[0]]))),metadata:c,relayUrl:l}))}},cw=new WeakSet,lw=function(){if(ci(this,vw,Aw).call(this).includes(xw))return!1;if(!this.options.isNewChainsStale)return!1;const e=ci(this,mw,yw).call(this),t=this.chains.map((({id:e})=>e)),n=ci(this,bw,ww).call(this);return!(n.length&&!n.some((e=>t.includes(e))))&&!t.every((t=>e.includes(t)))},uw=new WeakSet,hw=function(){ii(this,nw)&&(ci(this,dw,fw).call(this),ii(this,nw).on("accountsChanged",this.onAccountsChanged),ii(this,nw).on("chainChanged",this.onChainChanged),ii(this,nw).on("disconnect",this.onDisconnect),ii(this,nw).on("session_delete",this.onDisconnect),ii(this,nw).on("display_uri",this.onDisplayUri),ii(this,nw).on("connect",this.onConnect))},dw=new WeakSet,fw=function(){ii(this,nw)&&(ii(this,nw).removeListener("accountsChanged",this.onAccountsChanged),ii(this,nw).removeListener("chainChanged",this.onChainChanged),ii(this,nw).removeListener("disconnect",this.onDisconnect),ii(this,nw).removeListener("session_delete",this.onDisconnect),ii(this,nw).removeListener("display_uri",this.onDisplayUri),ii(this,nw).removeListener("connect",this.onConnect))},pw=new WeakSet,gw=function(e){this.storage?.setItem(_w,e)},mw=new WeakSet,yw=function(){return this.storage?.getItem(_w)??[]},bw=new WeakSet,ww=function(){if(!ii(this,nw))return[];const e=ii(this,nw).session?.namespaces;if(!e)return[];const t=(0,Ew.fK)(e),n=t[kw]?.chains?.map((e=>parseInt(e.split(":")[1]||"")));return n??[]},vw=new WeakSet,Aw=function(){if(!ii(this,nw))return[];const e=ii(this,nw).session?.namespaces;if(!e)return[];const t=(0,Ew.fK)(e),n=t[kw]?.methods;return n??[]};class Cw{constructor(e,t){this.wagmi={},this.chains=[],this.namespace="eip155",this.disconnect=tl,this.getAccount=ul,this.watchAccount=fl,this.fetchBalance=ll,this.getNetwork=hl,this.watchNetwork=pl,this.switchNetwork=dl,this.fetchEnsName=ml,this.fetchEnsAvatar=gl,this.wagmi=e,this.chains=t}getWalletConnectConnector(){const e=this.wagmi.connectors.find((e=>"walletConnect"===e.id));if(!e)throw new Error("WalletConnectConnector is required");return e}async connectWalletConnectProvider(e,t){return await e.getProvider(),new Promise((n=>{e.once("message",(e=>{"display_uri"===e.type&&(t(e.data),n())}))}))}getConnectorById(e){const t=this.wagmi.connectors.find((t=>t.id===e));if(!t)throw new Error(`Connector for id ${e} was not found`);return t}getConnectors(){return this.wagmi.connectors.filter((e=>!e.id.includes("walletConnect")))}async connectWalletConnect(e,t){const n=this.getWalletConnectConnector(),r={connector:n};return t&&(r.chainId=t),Promise.all([el(r),this.connectWalletConnectProvider(n,e)])}async connectConnector(e,t){const n={connector:this.getConnectorById(e)};return t&&(n.chainId=t),await el(n)}isInjectedProviderInstalled(){return typeof window.ethereum<"u"}safeCheckInjectedProvider(e){var t;try{const n=String(e);return Boolean(null==(t=window.ethereum)?void 0:t[n])}catch(e){return console.error(e),!1}}async getConnectedChainIds(){var e,t,n;const r=null==(t=null==(e=(await this.getWalletConnectConnector().getProvider()).signer)?void 0:e.session)?void 0:t.namespaces,s=null==(n=r?.[this.namespace])?void 0:n.methods;if(null!=s&&s.includes("wallet_addEthereumChain"))return"ALL";if(r){const e=[];return Object.keys(r).forEach((t=>{t.includes(this.namespace)&&e.push(...r[t].accounts)})),e?.map((e=>e.split(":")[1]))}return"ALL"}}function Sw({projectId:e}){return function({rpc:e}){return function(t){const n=e(t);return n&&""!==n.http?{chain:{...t,rpcUrls:{...t.rpcUrls,default:{http:[n.http]}}},rpcUrls:{http:[n.http],webSocket:n.webSocket?[n.webSocket]:void 0}}:null}}({rpc:t=>{var n;return[1,3,4,5,10,42,56,69,97,100,137,280,324,420,42161,42220,43114,80001,421611,421613,1313161554,1313161555].includes(t.id)?{http:`https://rpc.walletconnect.com/v1/?chainId=eip155:${t.id}&projectId=${e}`}:{http:t.rpcUrls.default.http[0],webSocket:null==(n=t.rpcUrls.default.webSocket)?void 0:n[0]}}})}function Iw({chains:e,projectId:t}){return[new Pw({chains:e,options:{projectId:t,showQrModal:!1}}),new Da({chains:e,options:{shimDisconnect:!0}})]}var Ow=n(9015);class Tw{constructor(e,t){this.openModal=Ow.jb.open,this.closeModal=Ow.jb.close,this.subscribeModal=Ow.jb.subscribe,this.setTheme=Ow.ThemeCtrl.setThemeConfig,this.setDefaultChain=Ow.OptionsCtrl.setSelectedChain,this.subscribeEvents=Ow.uA.subscribe,Ow.ThemeCtrl.setThemeConfig(e),Ow.Id.setEthereumClient(t),Ow.ConfigCtrl.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.all([n.e(152),n.e(968)]).then(n.bind(n,7968));const e=document.createElement("w3m-modal");document.body.insertAdjacentElement("beforeend",e),Ow.OptionsCtrl.setIsUiLoaded(!0)}}}const Nw=new class extends a{web3modal;_resolveConnection;connected=!1;get address(){return ul().address}constructor(){super(),this.addAllowedEvents("accountChanged")}init(e){const t=[ew,tw],{publicClient:n}=jc(t,[Sw({projectId:e})]),r=function(e){const t=new Zc(e);return Qc=t,t}({autoConnect:!0,connectors:Iw({projectId:e,chains:t}),publicClient:n}),s=new Cw(r,t);this.web3modal=new Tw({projectId:e,themeMode:"light",themeVariables:{"--w3m-accent-color":"#5585FF","--w3m-background-color":"#5585FF","--w3m-z-index":"999999"}},s),this.connected=void 0!==this.address;let i=this.address;fl((e=>{this.connected=void 0!==e.address,this.connected&&this._resolveConnection&&this._resolveConnection(),i!==e.address&&(this.fireEvent("accountChanged"),i=e.address)}))}async signMessage(e){if(!this.address)throw new Error("Wallet is not connected");return await async function(e){const t=await il();if(!t)throw new Zs;return await t.signMessage({message:e.message})}({message:e})}async connect(){return void 0!==this.address&&(this.connected=!0,this.fireEvent("accountChanged")),new Promise((e=>{this._resolveConnection=e,this.web3modal.openModal()}))}async getBalance(){if(!this.address)throw new Error("Wallet is not connected");return(await ll({address:this.address})).value}};const jw=new class{messageForWalletLinking;init(e){this.messageForWalletLinking=e}async link(){const e=Nw.address;if(!e)throw new Error("Wallet is not connected");const{data:t,error:n}=await Ds.client.functions.invoke("new-wallet-linking-nonce",{body:{walletAddress:e}});if(n)throw n;const r=await Nw.signMessage(`${this.messageForWalletLinking}\n\nNonce: ${t.nonce}`),{error:s}=await Ds.client.functions.invoke("link-wallet-to-user",{body:{walletAddress:e,signedMessage:r}});if(s)throw s;Lw.userId&&Xb.refresh(Lw.userId)}};class Uw extends w{content;linkButton;constructor(){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.link-wallet-popup",m("header",m("h1","Link Wallet")),m("main",m("p","To link your wallet to account, please follow the steps below:"),m("ol",m("li","Ensure your crypto wallet is connected.",m("w3m-core-button")),m("li",'Click the "Link Wallet" button below.'))),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"}),this.linkButton=new v({tag:".link-wallet-button",click:async(e,t)=>{try{t.disable().title="Linking...",await jw.link(),this.delete()}catch(e){console.error(e),t.enable().title="Link Wallet"}},title:"Link Wallet"})))),this.checkWallet(),this.onDelegate(Nw,"accountChanged",(()=>this.checkWallet()))}checkWallet(){Nw.connected?this.linkButton.enable():this.linkButton.disable()}}const Lw=new class extends a{user;get userId(){return this.user?.id}get name(){return this.user?.user_metadata.full_name}get xUsername(){if("twitter"===this.user?.app_metadata.provider)return this.user.user_metadata.user_name}get avatarUrl(){return this.user?.user_metadata.avatar_url}get signed(){return void 0!==this.user}get walletAddress(){if(this.user)return Xb.get(this.user.id).wallet_address}get walletLinked(){return void 0!==this.walletAddress}constructor(){super(),this.addAllowedEvents("userFetched")}async fetchUserOnInit(){const{data:e,error:t}=await Ds.client.auth.getSession();if(t)throw t;this.user=e?.session?.user,this.user&&(this.fireEvent("userFetched"),this.onDelegate(Xb,"update",(e=>{e.user_id===this.user?.id&&this.fireEvent("userFetched")})),Xb.refresh(this.user.id).then((()=>{this.walletLinked||new P({title:"Wallet Link Required",message:"You must link your wallet to access all features of Igloo. Would you like to link your wallet now?",confirmTitle:"Link Wallet",cancelTitle:"Later"},(()=>{new Uw}))})),Jb.fetchSignedUserFollows())}async signIn(){await Ds.client.auth.signInWithOAuth({provider:"twitter",options:Vb.dev?{redirectTo:"http://localhost:8413/"}:void 0})}linkWallet(){new Uw}async signOut(){const{error:e}=await Ds.client.auth.signOut();if(e)throw e;Jb.clearCache(),location.reload()}async getContractSigner(){if(!this.user)throw new Error("User not signed in");if(!0!==Nw.connected)throw new Error("Wallet not connected");if(!this.walletAddress)throw new Error("Wallet not linked");const e=await il();if(!e)throw new Error("Wallet not connected");const{account:t,transport:n}=e;if(t.address!==this.walletAddress)throw new Error("Wallet address mismatch");const{chain:r}=hl();if(!r)throw new Error("Chain not found");if(r.id!==Vb.avaxChainId)throw new Error("Wrong chain");if(r&&t&&n)return new $b(new Kb(n,{chainId:r.id,name:r.name,ensAddress:r.contracts?.ensRegistry?.address}),t.address)}};class Rw{static LIMIT=50;async fetchFollowers(e,t){const{data:n,error:r}=await Ds.client.from("follows").select("follower_id, followed_at").eq("followee_id",e).lt("followed_at",t??"infinity").order("followed_at",{ascending:!1}).limit(Rw.LIMIT);if(r)throw r;const{data:s,error:i}=await Ds.client.from("user_details").select(Yb).in("user_id",n.map((e=>e.follower_id)));if(i)throw i;return{userDetailsSet:s,lastFetchedFollowedAt:n[n.length-1]?.followed_at}}async fetchFollowing(e,t){const{data:n,error:r}=await Ds.client.from("follows").select("followee_id, followed_at").eq("follower_id",e).lt("followed_at",t??"infinity").order("followed_at",{ascending:!1}).limit(Rw.LIMIT);if(r)throw r;const{data:s,error:i}=await Ds.client.from("user_details").select(Yb).in("user_id",n.map((e=>e.followee_id)));if(i)throw i;return{userDetailsSet:s,lastFetchedFollowedAt:n[n.length-1]?.followed_at}}async fetchByWalletAddresses(e){const{data:t,error:n}=await Ds.client.from("user_details").select(Yb).in("wallet_address",e);if(n)throw n;return t}}const Bw=new Rw;class Mw extends c{emptyMessage;emptyMessageDisplay;constructor(e,t){super(e+".chat-room-list"),this.emptyMessage=t,this.showEmptyMessage()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class Dw extends c{constructor(e){super(e+".chat-room-list-item")}}class Fw extends Dw{subjectDetails;userDetails;constructor(e){super(".subject-list-item"),this.subjectDetails=e,this.userDetails=Xb.getByWalletAddress(e.subject),this.render(),this.onDelegate(Js,"update",(e=>{e.subject===this.subjectDetails.subject&&(this.subjectDetails=e,this.render())})),this.onDelegate(Xb,"update",(e=>{e.wallet_address===this.subjectDetails.subject&&(this.userDetails=e,this.render())})),this.onDom("click",(()=>f.go(`/chats/${e.subject}`)))}render(){this.empty().append(m(".subject-owner-profile-image",{style:{backgroundImage:`url(${this.userDetails.profile_image})`}}),m(".subject-owner-info",m(".name",this.userDetails.display_name),this.userDetails.x_username?m(".x-username",`@${this.userDetails.x_username}`):void 0))}}class $w extends Mw{constructor(e,t){super(e+".subject-list",t)}addSubjectDetails(e){this.emptyMessageDisplay?.delete(),this.append(new Fw(e))}async fetchUsers(e){const t=e.map((e=>e.subject)),n=await Bw.fetchByWalletAddresses(t);Xb.cacheMultiple(n)}}class Gw extends $w{store=new s("hoding-subject-list");constructor(){if(super(".holding-subject-list","No holding subjects yet."),Lw.walletAddress&&Lw.walletAddress===this.store.get("cached-wallet-address")){const e=this.store.get("cached-holding-subjects");if(e)for(const t of e)this.addSubjectDetails(t)}this.fetchSubjects()}async fetchSubjects(){if(Lw.walletAddress){this.store.set("cached-wallet-address",Lw.walletAddress,!0);const e=await Qs.fetchHoldingSubjects(Lw.walletAddress);if(this.store.set("cached-holding-subjects",e,!0),Js.cacheMultiple(e),await this.fetchUsers(e),!this.deleted){this.empty();for(const t of e)this.addSubjectDetails(t)}}}}class Hw extends $w{store=new s("my-subject-list");constructor(){if(super(".my-subject-list","No my subjects yet."),Lw.walletAddress&&Lw.walletAddress===this.store.get("cached-wallet-address")){const e=this.store.get("cached-my-subjects");if(e)for(const t of e)this.addSubjectDetails(t)}this.fetchSubjects()}async fetchSubjects(){if(Lw.walletAddress){this.store.set("cached-wallet-address",Lw.walletAddress,!0);const e=await Qs.fetchSubject(Lw.walletAddress);e&&(this.store.set("cached-my-subjects",[e],!0),Js.cache(e),await this.fetchUsers([e]),this.deleted||(this.empty(),this.addSubjectDetails(e)))}}}class zw extends Dw{constructor(e){super(".topic-list-item"),this.append(m("h3",e)),this.onDom("click",(()=>f.go(`/chats/${e}`)))}}class Ww extends Mw{constructor(e,t){super(e+".topic-list",t)}addTopic(e){this.emptyMessageDisplay?.delete(),this.append(new zw(e))}}class qw extends Ww{constructor(){super(".general-topic-list","No general topics yet."),this.addTopic("general")}}class Kw extends c{welcomeMessage="Welcome to Igloo!";logo;backButton;titleDisplay;loginButton;signedUser;settingsButton;constructor(){super(".mobile-title-bar"),this.append(this.logo=m("h1",m("img",{src:"/images/logo.png"}),{click:()=>f.go("/")}),this.backButton=m("button.back",new b("arrow_back"),{click:()=>history.back()}),this.titleDisplay=m("p"),this.loginButton=m("button.login",new b("login"),{click:()=>Lw.signIn()}),this.signedUser=m("a.signed-user",{click:()=>f.go(`/${Lw.xUsername}`)}),this.settingsButton=m("button.settings",new b("settings"),{click:()=>f.go("/settings")})),this.checkSigned(),this.onDelegate(Lw,"userFetched",(()=>this.checkSigned()))}checkSigned(){this.showLoginOrSignedUser(),this.titleDisplay.text=this.welcomeMessage=Lw.signed?"Hello, "+Lw.name+"!":"Welcome to Igloo!",Lw.signed&&this.signedUser.style({backgroundImage:`url(${Lw.avatarUrl})`})}showLogo(){this.logo.deleteClass("hidden"),this.backButton.addClass("hidden")}showBackButton(){this.logo.addClass("hidden"),this.backButton.deleteClass("hidden")}hideAllButtons(){[this.loginButton,this.signedUser,this.settingsButton].forEach((e=>e.addClass("hidden")))}showLoginOrSignedUser(){Lw.signed?this.showSignedUser():this.showLoginButton()}showLoginButton(){this.hideAllButtons(),this.loginButton.deleteClass("hidden")}showSignedUser(){this.hideAllButtons(),this.signedUser.deleteClass("hidden")}showSettingsButton(){this.hideAllButtons(),this.settingsButton.deleteClass("hidden")}set uri(e){""===e||"chats"===e||e.startsWith("chats/")||"explore"===e||"notifications"===e||"settings"===e?(this.titleDisplay.text=""===e?this.welcomeMessage:Fs.toTitleCase(e),this.showLogo(),this.showLoginOrSignedUser()):e.startsWith("post/")?(this.titleDisplay.text="Post",this.showBackButton(),this.showLoginOrSignedUser()):(this.titleDisplay.text="@"+e,this.showBackButton(),Lw.xUsername===e?this.showSettingsButton():this.showLoginOrSignedUser())}}class Vw extends c{currentActiveButton;loginButton;signedUser;constructor(){super(".nav-bar"),this.append(m("h1",m("img",{src:"/images/logo.png"}),{click:()=>f.go("/")}),m("button.home",new b("home"),{click:()=>f.go("/")}),m("button.chats",new b("chat"),{click:()=>f.go("/chats")}),m("button.explore",new b("search"),{click:()=>f.go("/explore")}),m("button.notifications",new b("notifications"),{click:()=>f.go("/notifications")}),m("button.settings",new b("settings"),{click:()=>f.go("/settings")}),this.loginButton=m("button.login-button",new b("login"),{click:()=>Lw.signIn()}),this.signedUser=m("a.signed-user",{click:()=>f.go(`/${Lw.xUsername}`)})),this.checkSigned(),this.onDelegate(Lw,"userFetched",(()=>this.checkSigned()))}checkSigned(){Lw.signed?this.showSignedUser():this.showLoginButton(),Lw.signed&&this.signedUser.style({backgroundImage:`url(${Lw.avatarUrl})`})}showLoginButton(){this.loginButton.addClass("show"),this.signedUser.deleteClass("show")}showSignedUser(){this.loginButton.deleteClass("show"),this.signedUser.addClass("show")}activeButton(e){this.currentActiveButton&&this.currentActiveButton.deleteClass("active"),this.currentActiveButton=this.children.find((t=>t.hasClass(e))),this.currentActiveButton?.addClass("active")}}class Jw extends c{constructor(){super(".top-user-section"),this.append()}hide(){this.addClass("hidden")}show(){this.deleteClass("hidden")}}class Qw extends c{constructor(){super(".trend-section"),this.append(m("label.search-bar",new b("search"),m("input",{placeholder:"Search"})),m(".trend-list"))}hide(){this.addClass("hidden")}show(){this.deleteClass("hidden")}}class Yw extends $s{static current;static append(e){Yw.current.content.append(e)}container;mobileTitleBar;navBar;content;trendSection;topUserSection;constructor(e,t){super(),Yw.current=this,l.append(this.container=m(".layout",this.mobileTitleBar=new Kw,this.navBar=new Vw,this.content=m("main"),this.trendSection=new Qw,this.topUserSection=new Jw)),this.activeNavBarButton(t)}changeParams(e,t){this.activeNavBarButton(t)}activeNavBarButton(e){this.navBar.activeButton(""===e?"home":e.substring(0,-1===e.indexOf("/")?e.length:e.indexOf("/"))),"explore"===e||"chats"===e||e.startsWith("chats/")?this.trendSection.hide():this.trendSection.show(),"explore"===e?this.topUserSection.show():this.topUserSection.hide(),this.mobileTitleBar.uri=e}close(){this.container.delete(),super.close()}}class Zw extends c{constructor(){super(".login-required"),this.append(m("p","This page requires login. Would you like to login?"),m("button","Login with 𝕏",{click:()=>Lw.signIn()}))}}class Xw extends $s{container;constructor(e){super(),Yw.append(this.container=m(".chats-view")),this.render(),this.container.onDelegate(Lw,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("h1","Chats")),Lw.signed?this.container.append(m("main",m("section.chat",m("h2","General"),new qw),m("section.chat",m("h2","My"),new Hw),m("section.chat",m("h2","Holding"),new Gw))):this.container.append(m("main",m("section.chat",m("h2","General"),new qw),new Zw))}close(){this.container.delete(),super.close()}}class ev extends $s{container;constructor(e,t){super(),Yw.append(this.container=m(t+".chat-room-view"))}close(){this.container.delete(),super.close()}}class tv extends c{uploadInput;uploadButton;messageInput;constructor(e){super(e+".chat-message-form"),this.append(this.uploadInput=m("input.upload",{type:"file",accept:"image/*",change:e=>{const t=e.target.files?.[0];t&&this.upload(t)}}),this.uploadButton=m("button.upload",new b("upload"),{}),m("form",this.messageInput=m("input"),new v({tag:".send",title:"Send"}),{submit:e=>{e.preventDefault();const t=this.messageInput.domElement.value;t&&this.sendMessage(t),this.messageInput.domElement.value=""}})),this.on("visible",(()=>this.messageInput.domElement.focus()))}getOptimisticData(e,t,n){if(!Lw.signed)throw new Error("User is not signed");return{id:-1,author:Lw.userId,author_name:Lw.name,author_avatar_url:Lw.avatarUrl,message_type:e,message:t,rich:n,created_at:(new Date).toISOString()}}}var nv;!function(e){e[e.MESSAGE=0]="MESSAGE",e[e.FILE_UPLOAD=1]="FILE_UPLOAD",e[e.POST_REF=2]="POST_REF"}(nv||(nv={}));class rv{static FETCH_MESSAGE_LIMIT=100;async sendMessage(e,t){const{data:n,error:r}=await Ds.client.from("subject_chat_messages").insert({subject:e,message_type:nv.MESSAGE,message:t}).select().single();if(r)throw r;return n.id}async upload(e,t){}async fetchLatestMessages(e){const{data:t,error:n}=await Ds.client.from("subject_chat_messages").select().eq("subject",e).order("created_at",{ascending:!1}).limit(rv.FETCH_MESSAGE_LIMIT);if(n)throw n;return t}}const sv=new rv;class iv extends tv{messageList;constructor(e){super(".subject-chat-message-form"),this.messageList=e}async sendMessage(e){const t={subject:this.messageList.subject,...this.getOptimisticData(nv.MESSAGE,e)},n=this.messageList.addMessage(t).wait(),r=await sv.sendMessage(this.messageList.subject,e);this.messageList.findMessageItem(r)?.delete(),n.message.id=r,n.done()}upload(e){throw new Error("Method not implemented.")}}class av extends c{message;constructor(e){super(".chat-message-list-item"),this.message=e,this.addAllowedEvents("imageLoaded"),this.render(),this.onDelegate(Lw,"userFetched",(()=>this.render()))}render(){this.empty().deleteClass("owner"),Lw.signed&&this.message.author===Lw.userId?this.append(m("main",m("header",m(".author",m(".name",this.message.author_name,{click:()=>f.go(`/${this.message.author_x_username}`)}))),m("p.message",this.message.message)),m(".author-profile-image",{style:{backgroundImage:`url(${this.message.author_avatar_url})`},click:()=>f.go(`/${this.message.author_x_username}`)})).addClass("owner"):this.append(m(".author-profile-image",{style:{backgroundImage:`url(${this.message.author_avatar_url})`},click:()=>f.go(`/${this.message.author_x_username}`)}),m("main",m("header",m(".author",m(".name",this.message.author_name,{click:()=>f.go(`/${this.message.author_x_username}`)}))),m("p.message",this.message.message)))}wait(){return this.addClass("waiting"),this}done(){return this.deleteClass("waiting"),this}}class ov extends c{emptyMessage;emptyMessageDisplay;constructor(e,t){super(e+".chat-message-list"),this.emptyMessage=t,this.showEmptyMessage(),this.on("visible",(()=>{this.scrollToBottom(),setTimeout((()=>{this.deleted||this.scrollToBottom()}))}))}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addMessage(e){this.emptyMessageDisplay?.delete();const t=new av(e);return t.on("imageLoaded",(()=>this.scrollToBottom())),this.append(t),this.scrollToBottom(),t}findMessageItem(e){return this.children.find((t=>t instanceof av&&t.message.id===e))}scrollToBottom(){this.domElement.scrollTo(0,this.domElement.scrollHeight)}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class cv extends ov{subject;store=new s("subject-chat-message-list");isContentFromCache=!0;channel;constructor(e){super(".subject-chat-message-list","No messages yet."),this.subject=e;const t=this.store.get("cached-messages");if(t)for(const e of t)this.addMessage(e);this.fetchMessages(),this.channel=Ds.client.channel(`subject-${e}-chat-message-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"subject_chat_messages",filter:"subject=eq."+e},(e=>{this.findMessageItem(e.new.id)?.delete();const t=this.store.get("cached-messages")??[];t.push(e.new),this.store.set("cached-messages",t,!0),this.addMessage(e.new)})).subscribe()}async fetchMessages(){const e=(await sv.fetchLatestMessages(this.subject)).reverse();if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-messages",e,!0),this.deleted||this.empty()),!this.deleted)for(const t of e)this.addMessage(t)}delete(){this.channel.unsubscribe(),super.delete()}}class lv extends c{constructor(e){super(e+".chat-room-header")}}class uv extends lv{subject;subjectDetails;userDetails;constructor(e){super(".subject-chat-room-header"),this.subject=e,this.subjectDetails=Js.getAndRefresh(e),this.userDetails=Xb.getAndRefreshByWalletAddress(e),this.render(),this.onDelegate(Js,"update",(e=>{e.subject===this.subject&&(this.subjectDetails=e,this.render())})),this.onDelegate(Xb,"update",(e=>{e.wallet_address===this.subject&&(this.userDetails=e,this.render())}))}render(){this.empty().append(m("header",m("button.back",new b("arrow_back"),{click:()=>history.back()}),m(".subject-owner-profile-image",{style:{backgroundImage:`url(${this.userDetails.profile_image})`},click:()=>f.go(`/${this.userDetails.x_username}`)}),m(".subject-owner-info",m(".name",this.userDetails.display_name,{click:()=>f.go(`/${this.userDetails.x_username}`)}),this.userDetails.x_username?m(".x-username",`@${this.userDetails.x_username}`,{click:()=>f.go(`/${this.userDetails.x_username}`)}):void 0)),m("footer"))}}class hv extends ev{subject;messageList;constructor(e){super(e,".subject-chat-room-view"),this.subject="0x"+e.subject,this.render()}changeParams(e,t){this.subject="0x"+e.subject,this.render()}render(){const e=Xu(this.subject);this.container.empty().append(new uv(e),this.messageList=new cv(e),new iv(this.messageList))}}class dv{static FETCH_MESSAGE_LIMIT=100;async sendMessage(e,t){const{data:n,error:r}=await Ds.client.from("topic_chat_messages").insert({topic:e,message_type:nv.MESSAGE,message:t}).select().single();if(r)throw r;return n.id}async upload(e,t){}async fetchLatestMessages(e){const{data:t,error:n}=await Ds.client.from("topic_chat_messages").select().eq("topic",e).order("created_at",{ascending:!1}).limit(dv.FETCH_MESSAGE_LIMIT);if(n)throw n;return t}}const fv=new dv;class pv extends tv{messageList;constructor(e){super(".topic-chat-message-form"),this.messageList=e}async sendMessage(e){const t={topic:this.messageList.topic,...this.getOptimisticData(nv.MESSAGE,e)},n=this.messageList.addMessage(t).wait(),r=await fv.sendMessage(this.messageList.topic,e);this.messageList.findMessageItem(r)?.delete(),n.message.id=r,n.done()}upload(e){throw new Error("Method not implemented.")}}class gv extends ov{topic;store=new s("topic-chat-message-list");isContentFromCache=!0;channel;constructor(e){super(".topic-chat-message-list","No messages yet."),this.topic=e;const t=this.store.get("cached-messages");if(t)for(const e of t)this.addMessage(e);this.fetchMessages(),this.channel=Ds.client.channel(`topic-${e}-chat-message-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"topic_chat_messages",filter:"topic=eq."+e},(e=>{this.findMessageItem(e.new.id)?.delete();const t=this.store.get("cached-messages")??[];t.push(e.new),this.store.set("cached-messages",t,!0),this.addMessage(e.new)})).subscribe()}async fetchMessages(){const e=(await fv.fetchLatestMessages(this.topic)).reverse();if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-messages",e,!0),this.deleted||this.empty()),!this.deleted)for(const t of e)this.addMessage(t)}delete(){this.channel.unsubscribe(),super.delete()}}class mv extends lv{constructor(e){super(".topic-chat-room-header"),this.append(m("header",m("button.back",new b("arrow_back"),{click:()=>history.back()}),m("h1",e)),m("footer"))}}class yv extends ev{topic;messageList;constructor(e){super(e,".topic-chat-room-view"),this.topic=e.topic,this.render()}changeParams(e,t){this.topic=e.topic,this.render()}render(){this.container.deleteClass("mobile-hidden"),this.topic||this.container.addClass("mobile-hidden");const e=this.topic?this.topic.toLowerCase():"general";this.container.empty().append(new mv(e),this.messageList=new gv(e),new pv(this.messageList))}}class bv extends w{content;constructor(){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.switch-to-avax-popup",m("header",m("h1","Switch to Avalanche for Igloo")),m("main",m("img.banner",{src:"/images/avax-banner.jpg"}),m("p","Igloo operates on Avalanche. To utilize Igloo, please change your wallet's chain to Avalanche."),m("p",m("a","What is Avalanche?",{href:"https://www.avax.network/",target:"_blank"}))),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>{new x({title:"Warning",message:"If you do not switch to Avalanche, Igloo may not function properly. Ensure you change the chain for a seamless experience.",confirmTitle:"Understood"}),this.delete()},title:"Later"}),new v({tag:".switch-button",click:async()=>{await dl({chainId:Vb.avaxChainId}),this.delete()},title:"Switch Now"}))))}}class wv extends a{abi;viewContract;address;constructor(e){super(),this.abi=e}init(e){this.address=e,this.viewContract=new Qf(this.address,this.abi,new zb(Vb.avaxRpc))}async getWriteContract(){if(!Lw.signed)return void new P({title:"Not signed in",message:"You need to sign in to perform this action",confirmTitle:"Sign in"},(()=>Lw.signIn()));!0!==Nw.connected&&await Nw.connect();const e=await il();if(!e)return void new C({title:"No wallet connected",message:"You need to connect a wallet to perform this action"});if(!Lw.walletAddress)return void new P({title:"No wallet linked",message:"You need to link a wallet to perform this action",confirmTitle:"Link wallet"},(()=>Lw.linkWallet()));const{account:t}=e;if(t.address!==Lw.walletAddress)return void new C({title:"Wallet address mismatch",message:"The wallet address associated with your account and the current crypto wallet address do not match. Please change the crypto wallet address."});const{chain:n}=hl();if(!n)return void new C({title:"Invalid network",message:"You need to be on the Avalanche network to perform this action"});if(n.id!==Vb.avaxChainId)return void new bv;const r=await Lw.getContractSigner();return r?new Qf(this.address,this.abi,r):void 0}}const vv=JSON.parse('{"Mt":[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"token","type":"address"}],"name":"SetMembershipToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"weight","type":"uint256"}],"name":"SetMembershipWeight","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"destination","type":"address"}],"name":"SetProtocolFeeDestination","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"percent","type":"uint256"}],"name":"SetProtocolFeePercent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"percent","type":"uint256"}],"name":"SetSubjectFeePercent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"trader","type":"address"},{"indexed":true,"internalType":"address","name":"subject","type":"address"},{"indexed":true,"internalType":"bool","name":"isBuy","type":"bool"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"protocolFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"subjectFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"supply","type":"uint256"}],"name":"Trade","type":"event"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"buyKeys","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"subject","type":"address"}],"name":"calculateAdditionalFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getBuyPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getBuyPriceAfterFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"supply","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getSellPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getSellPriceAfterFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address payable","name":"_protocolFeeDestination","type":"address"},{"internalType":"uint256","name":"_protocolFeePercent","type":"uint256"},{"internalType":"uint256","name":"_subjectFeePercent","type":"uint256"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"keysBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"keysSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"membershipToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"membershipWeight","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"sellKeys","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_token","type":"address"}],"name":"setMembershipToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_weight","type":"uint256"}],"name":"setMembershipWeight","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"setProtocolFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_feePercent","type":"uint256"}],"name":"setProtocolFeePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_feePercent","type":"uint256"}],"name":"setSubjectFeePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"subjectFeePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]}');const Av=new class extends wv{constructor(){super(vv.Mt)}async getBuyPrice(e,t){return this.viewContract.getBuyPrice(e,t)}async getSellPrice(e,t){return this.viewContract.getSellPrice(e,t)}async getBuyPriceAfterFee(e,t){return this.viewContract.getBuyPriceAfterFee(e,t)}async getSellPriceAfterFee(e,t){return this.viewContract.getSellPriceAfterFee(e,t)}async buyKeys(e,t,n){const r=await this.getWriteContract();if(!r)throw new Error("No signer");return(await r.buyKeys(e,t,{value:n})).wait()}async sellKeys(e,t){const n=await this.getWriteContract();if(!n)throw new Error("No signer");return(await n.sellKeys(e,t)).wait()}};class Ev extends $s{container;constructor(e){super(),Yw.append(this.container=m(".explore-view",m("h1","Explorer"),m("label.search-bar",new b("search"),m("input",{placeholder:"Search"})),new I("explore",[{id:"trending",label:"Trending"},{id:"top",label:"Top"},{id:"new",label:"New"},{id:"activity",label:"Activity"}])))}close(){this.container.delete(),super.close()}}var kv;!function(e){e[e.EVERYONE=0]="EVERYONE",e[e.KEY_HOLDERS=1]="KEY_HOLDERS"}(kv||(kv={}));const _v=new class extends a{store=new s("cached-posts");constructor(){super(),this.addAllowedEvents("update","delete")}init(){Ds.client.channel("posts-changes").on("postgres_changes",{event:"*",schema:"public",table:"posts"},(e=>{"INSERT"===e.eventType||"UPDATE"===e.eventType?this.refresh(e.new.id):"DELETE"===e.eventType&&this.deleteCache(e.old.id)})).subscribe()}deleteCache(e){this.store.delete(String(e)),this.fireEvent("delete",e)}cache(e,t){t?((e,t)=>e?.id===t?.id&&e?.guild_id===t?.guild_id&&e?.target===t?.target&&e?.author===t?.author&&e?.author_name===t?.author_name&&e?.author_avatar_url===t?.author_avatar_url&&e?.author_x_username===t?.author_x_username&&e?.message===t?.message&&((e,t)=>e.files?.length===t.files?.length&&(e.files?.every(((e,n)=>{const r=t.files?.[n];return e.url===r?.url&&e.thumbnailURL===r?.thumbnailURL&&e.fileName===r?.fileName&&e.fileType===r?.fileType&&e.fileSize===r?.fileSize}))??!1))(e?.rich??{},t?.rich??{})&&e?.post_ref===t?.post_ref)(t,this.get(e))||(this.store.set(String(e),t,!0),this.fireEvent("update",t)):this.deleteCache(e)}get(e){const t=this.store.get(String(e));if(t)return t}async refresh(e){const{data:t,error:n}=await Ds.client.from("posts").select().eq("id",e);if(n)throw n;const r=t?.[0];this.cache(e,r)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing post:",e))),t}cachePosts(e){for(const t of e)this.cache(t.id,t)}};class xv{static LIMIT=50;async post(e,t){const{data:n,error:r}=await Ds.client.from("posts").insert({target:e,message:t}).select().single();if(r)throw r;return n.id}async deletePost(e){const{error:t}=await Ds.client.from("posts").delete().eq("id",e);if(t)throw t}async fetchGlobalPosts(e){const{data:t,error:n}=await Ds.client.from("posts").select().lt("id",e??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(xv.LIMIT);if(n)throw n;return t}async fetchUserPosts(e,t){const{data:n,error:r}=await Ds.client.from("posts").select().eq("author",e).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(xv.LIMIT);if(r)throw r;return n}async fetchFollowingPosts(e,t){const{data:n,error:r}=await Ds.client.from("follows").select().eq("follower_id",e).order("followed_at",{ascending:!1});if(r)throw r;const s=n.map((e=>e.followee_id)),{data:i,error:a}=await Ds.client.from("posts").select().in("author",s).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(xv.LIMIT);if(a)throw a;return{followeeIds:s,posts:i}}}const Pv=new xv;class Cv extends c{post;constructor(e){super(".post-list-item"),this.post=e,this.onDom("click",(()=>f.go(`/post/${e.id}`))),this.render(),this.onDelegate(_v,"update",(e=>{e.id===this.post.id&&(this.post=e,this.render())})),this.onDelegate(_v,"delete",(e=>{e===this.post.id&&this.delete()})),this.checkSigned(),this.onDelegate(Lw,"userFetched",(()=>this.checkSigned()))}render(){this.empty().append(m(".author-profile-image",{style:{backgroundImage:`url(${this.post.author_avatar_url})`},click:e=>this.goAuthorProfile(e)}),m("main",m("header",m(".author",m(".name",this.post.author_name,{click:e=>this.goAuthorProfile(e)}),this.post.author_x_username?m(".x-username",`@${this.post.author_x_username}`,{click:e=>this.goAuthorProfile(e)}):void 0),m("button.owner-menu",new b("more_vert"),{click:(e,t)=>{e.stopPropagation();const n=t.rect;new y({left:n.right-160,top:n.top,items:[{title:"Delete",click:()=>{new P({title:"Delete Post",message:"Are you sure you want to delete this post?",confirmTitle:"Delete",loadingTitle:"Deleting..."},(()=>Pv.deletePost(this.post.id)))}}]})}})),m("p.message",this.post.message)))}checkSigned(){this.post.author===Lw.userId&&this.addClass("owned")}goAuthorProfile(e){e.stopPropagation(),f.go(`/${this.post.author_x_username}`)}}class Sv extends c{emptyMessage;contentFetched=!1;emptyMessageDisplay;lastFetchedPostId;constructor(e,t){super(e+".post-list"),this.emptyMessage=t,this.showEmptyMessage()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addPost(e){this.emptyMessageDisplay?.delete(),new Cv(e).appendTo(this,0)}show(){return this.deleteClass("hidden"),this.contentFetched||(this.fetchContent(),this.contentFetched=!0),this}hide(){return this.addClass("hidden"),this}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class Iv extends Sv{userId;store=new s("following-post-list");isContentFromCache=!0;channel;constructor(e){super(".following-post-list","No posts from followed users yet"),this.userId=e;const t=this.store.get("cached-posts");if(t)for(const e of t)this.addPost(e)}async fetchContent(){const e=await Pv.fetchFollowingPosts(this.userId,this.lastFetchedPostId),t=e.posts.reverse();if(_v.cachePosts(t),this.lastFetchedPostId=t[t.length-1]?.id,this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",t,!0),this.deleted||this.empty()),!this.deleted)for(const e of t)this.addPost(e);this.channel?.unsubscribe(),this.channel=Ds.client.channel(`following-${this.userId}-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"author=in.("+e.followeeIds.join(",")+")"},(e=>{const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new)})).subscribe()}delete(){this.channel?.unsubscribe(),super.delete()}}class Ov extends Sv{store=new s("global-post-list");isContentFromCache=!0;channel;constructor(){super(".global-post-list","No posts yet");const e=this.store.get("cached-posts");if(e)for(const t of e)this.addPost(t);this.channel=Ds.client.channel("global-post-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},(e=>{const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new)})).subscribe()}async fetchContent(){const e=(await Pv.fetchGlobalPosts(this.lastFetchedPostId)).reverse();if(_v.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id,this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",e,!0),this.deleted||this.empty()),!this.deleted)for(const t of e)this.addPost(t)}delete(){this.channel.unsubscribe(),super.delete()}}class Tv extends Sv{constructor(){super(".key-held-post-list","No posts from users you hold keys for yet")}fetchContent(){}}class Nv extends w{content;targetSelect;textarea;postButton;constructor(){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.post-popup",m(".signed-user",{style:{backgroundImage:`url(${Lw.avatarUrl})`}}),m(".form",m("header",this.targetSelect=m("select",m("option",{value:"0"},"Everyone"),m("option",{value:"1"},"Key Holders")),m("button",new b("close"),{click:()=>this.delete()})),m("main",this.textarea=m("textarea",{placeholder:"What's on your mind?"})),m("footer",m("button.icon-button",new b("image")),this.postButton=new v({tag:".post-button",click:()=>this.post(),title:"Post"}))))),this.textarea.domElement.focus()}async post(){this.postButton.disable().text="Posting...";try{const e=await Pv.post(parseInt(this.targetSelect.domElement.value),this.textarea.domElement.value);new k({message:"Your post has been successfully published.",action:{title:"View",click:()=>f.go(`/post/${e}`)}}),this.delete()}catch(e){console.error(e),this.postButton.enable().text="Post"}}}class jv extends $s{container;tabs;globalPostList;followingPostList;keyHeldPostList;postButton;constructor(e){super(),Yw.append(this.container=m(".home-view")),this.render(),this.container.onDelegate(Lw,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("main",m("h1","Home"),Lw.signed?this.tabs=new I("home-view-tabs",Lw.walletLinked?[{id:"global",label:"Global"},{id:"following",label:"Following"},{id:"held",label:"Held"}]:[{id:"global",label:"Global"},{id:"following",label:"Following"}]):void 0,this.globalPostList=new Ov,Lw.userId?this.followingPostList=new Iv(Lw.userId):void 0,this.keyHeldPostList=new Tv),this.postButton=m("button.post",new b("add"),{click:()=>new Nv})),this.tabs?this.tabs.on("select",(e=>{[this.globalPostList,this.followingPostList,this.keyHeldPostList].forEach((e=>e.hide())),"global"===e?this.globalPostList.show():"following"===e?this.followingPostList.show():"held"===e&&this.keyHeldPostList.show()})).init():this.globalPostList.show()}close(){this.container.delete(),super.close()}}class Uv extends $s{container;constructor(e){super(),Yw.append(this.container=m(".notifications-view")),this.render(),this.container.onDelegate(Lw,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("h1","Notifications")),Lw.signed||this.container.append(new Zw)}close(){this.container.delete(),super.close()}}class Lv extends $s{container;post;constructor(e){super(),Yw.append(this.container=m(".post-view")),this.renderPost(parseInt(e.postId)),this.checkSigned(),this.container.onDelegate(Lw,"userFetched",(()=>this.checkSigned()))}renderPost(e){this.container.offDelegate(_v),this.post=_v.getAndRefresh(e),this.render(),this.container.onDelegate(_v,"update",(e=>{this.post&&e.id===this.post.id&&(this.post=e,this.render())}))}render(){this.container.empty().append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","Post"))),this.post?this.container.append(m("main",m("header",m(".author-profile-image",{style:{backgroundImage:`url(${this.post.author_avatar_url})`},click:()=>f.go(`/${this.post?.author_x_username}`)}),m(".author",m(".name",this.post.author_name,{click:()=>f.go(`/${this.post?.author_x_username}`)}),this.post.author_x_username?m(".x-username",`@${this.post.author_x_username}`,{click:()=>f.go(`/${this.post?.author_x_username}`)}):void 0),m("button.owner-menu",new b("more_vert"),{click:(e,t)=>{e.stopPropagation();const n=t.rect;new y({left:n.right-160,top:n.top,items:[{title:"Delete",click:()=>{new P({title:"Delete Post",message:"Are you sure you want to delete this post?",confirmTitle:"Delete",loadingTitle:"Deleting..."},(()=>{this.post&&Pv.deletePost(this.post.id)}))}}]})}})),m("p.message",this.post.message)),m("footer")):this.container.append(m("main",m("p.empty-message","Post not found")))}checkSigned(){this.post?.author===Lw.userId&&this.container.addClass("owned")}changeParams(e,t){this.renderPost(parseInt(e.postId))}close(){this.container.delete(),super.close()}}class Rv extends $s{container;constructor(e){super(),Yw.append(this.container=m(".settings-view")),this.render(),this.container.onDelegate(Lw,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("h1","Settings"),m("main",m("section.x"),m("section.actions",Lw.signed?m("section.link-wallet",m("h2","Link Wallet"),Lw.walletLinked?m("p.linked","Linked: ",m("a",Lw.walletAddress,{href:`https://snowtrace.io/address/${Lw.walletAddress}`,target:"_blank"})):m("p","You can link your wallet to use Igloo."),m("button","Link Wallet",{click:()=>Lw.linkWallet()})):void 0,Lw.signed?m("section.logout",m("h2","Log Out"),m("p","You can log out from this device."),m("button","Log Out",{click:()=>Lw.signOut()})):m("section.login",m("h2","Login"),m("p","You can login to this device."),m("button","Login with 𝕏",{click:()=>Lw.signIn()})))))}close(){this.container.delete(),super.close()}}class Bv extends $s{container;xUsername;constructor(e){super(),Yw.append(this.container=m(".followers-view")),this.xUsername=e.xUsername,this.render()}render(){this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)))}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class Mv extends $s{container;xUsername;constructor(e){super(),Yw.append(this.container=m(".following-view")),this.xUsername=e.xUsername,this.render()}render(){this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)))}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class Dv extends $s{container;xUsername;constructor(e){super(),Yw.append(this.container=m(".holders-view")),this.xUsername=e.xUsername,this.render()}render(){this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)))}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class Fv extends Sv{userId;store=new s("user-post-list");isContentFromCache=!0;channel;constructor(e){super(".user-post-list","No posts from this user yet"),this.userId=e;const t=this.store.get(`user-${e}-cached-posts`);if(t)for(const e of t)this.addPost(e);this.channel=Ds.client.channel(`user-${e}-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"author=eq."+e},(e=>{const t=this.store.get(`user-${this.userId}-cached-posts`)??[];t.push(e.new),this.store.set(`user-${this.userId}-cached-posts`,t,!0),this.addPost(e.new)})).subscribe()}async fetchContent(){const e=(await Pv.fetchUserPosts(this.userId,this.lastFetchedPostId)).reverse();if(_v.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id,this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set(`user-${this.userId}-cached-posts`,e,!0),this.deleted||this.empty()),!this.deleted)for(const t of e)this.addPost(t)}delete(){this.channel.unsubscribe(),super.delete()}}const $v=new class extends a{store=new s("cached-total-subject-key-balances");constructor(){super(),this.addAllowedEvents("update")}init(){Ds.client.channel("total-subject-key-balances-changes").on("postgres_changes",{event:"*",schema:"public",table:"total_subject_key_balances"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.wallet_address)})).subscribe()}cache(e,t){t!==this.get(e)&&(this.store.set(e,t,!0),this.fireEvent("update",{walletAddress:e,totalKeyBalance:t}))}get(e){const t=this.store.get(e);return t||0}async refresh(e){const{data:t,error:n}=await Ds.client.from("total_subject_key_balances").select("*, total_key_balance::text").eq("wallet_address",e);if(n)throw n;const r=t?.[0];r&&r.total_key_balance!==this.get(e)&&this.cache(e,r.total_key_balance)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing total subject key balance details:",e))),t}};class Gv extends c{userDetails;constructor(e){super(".user-list-item"),this.userDetails=e,this.render(),this.onDelegate(Xb,"update",(e=>{e.user_id===this.userDetails.user_id&&(this.userDetails=e,this.render())})),this.onDom("click",(()=>f.go(`/${this.userDetails.x_username}`)))}render(){this.empty().append(m(".profile-image",{style:{backgroundImage:`url(${this.userDetails.profile_image})`}}),m(".info",m(".name",this.userDetails.display_name),this.userDetails.x_username?m(".x-username",`@${this.userDetails.x_username}`):void 0))}}class Hv extends c{emptyMessage;contentFetched=!1;emptyMessageDisplay;constructor(e,t){super(e+".user-list"),this.emptyMessage=t,this.showEmptyMessage()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addUserDetails(e){this.emptyMessageDisplay?.delete(),this.append(new Gv(e))}show(){this.deleteClass("hidden"),this.contentFetched||(this.fetchContent(),this.contentFetched=!0)}hide(){this.addClass("hidden")}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class zv extends Hv{userId;store=new s("follower-list");isContentFromCache=!0;lastFetchedFollowedAt;constructor(e){super(".follower-list","No followers yet"),this.userId=e;const t=this.store.get(`user-${e}-cached-followers`);if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await Bw.fetchFollowers(this.userId,this.lastFetchedFollowedAt);if(Xb.cacheMultiple(e.userDetailsSet),this.lastFetchedFollowedAt=e.lastFetchedFollowedAt,this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set(`user-${this.userId}-cached-followers`,e.userDetailsSet,!0),this.deleted||this.empty()),!this.deleted)for(const t of e.userDetailsSet)this.addUserDetails(t)}}class Wv extends Hv{userId;store=new s("following-list");isContentFromCache=!0;lastFetchedFollowedAt;constructor(e){super(".following-list","Not following anyone yet"),this.userId=e;const t=this.store.get(`user-${e}-cached-following`);if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await Bw.fetchFollowing(this.userId,this.lastFetchedFollowedAt);if(Xb.cacheMultiple(e.userDetailsSet),this.lastFetchedFollowedAt=e.lastFetchedFollowedAt,this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set(`user-${this.userId}-cached-following`,e.userDetailsSet,!0),this.deleted||this.empty()),!this.deleted)for(const t of e.userDetailsSet)this.addUserDetails(t)}}class qv extends Hv{userId;constructor(e){super(".holder-list","No holders yet"),this.userId=e}async fetchContent(){}}class Kv extends Hv{userId;constructor(e){super(".holding-list","No holdings"),this.userId=e}async fetchContent(){}}const Vv=BigInt(-1),Jv=BigInt(0),Qv=BigInt(1),Yv=BigInt(5),Zv={};let Xv="0000";for(;Xv.length<80;)Xv+=Xv;function eA(e){let t=Xv;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function tA(e,t,n){const r=BigInt(t.width);if(t.signed){const t=Qv<<r-Qv;xl(null==n||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=e>Jv?zl(ql(e,r),r):-zl(ql(-e,r),r)}else{const t=Qv<<r;xl(null==n||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%t+t)%t&t-Qv}return e}function nA(e){"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,n=128,r=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Pl(s,"invalid fixed format","format",e),t="u"!==s[1],n=parseInt(s[2]),r=parseInt(s[3])}else if(e){const s=e,i=(e,t,n)=>null==s[e]?n:(Pl(typeof s[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,s[e]),s[e]);t=i("signed","boolean",t),n=i("width","number",n),r=i("decimals","number",r)}Pl(n%8==0,"invalid FixedNumber width (not byte aligned)","format.width",n),Pl(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);return{signed:t,width:n,decimals:r,name:(t?"":"u")+"fixed"+String(n)+"x"+String(r)}}class rA{format;#Xe;#et;#tt;_value;constructor(e,t,n){Il(e,Zv,"FixedNumber"),this.#et=t,this.#Xe=n;const r=function(e,t){let n="";e<Jv&&(n="-",e*=Vv);let r=e.toString();if(0===t)return n+r;for(;r.length<=t;)r=Xv+r;const s=r.length-t;for(r=r.substring(0,s)+"."+r.substring(s);"0"===r[0]&&"."!==r[1];)r=r.substring(1);for(;"0"===r[r.length-1]&&"."!==r[r.length-2];)r=r.substring(0,r.length-1);return n+r}(t,n.decimals);vl(this,{format:n.name,_value:r}),this.#tt=eA(n.decimals)}get signed(){return this.#Xe.signed}get width(){return this.#Xe.width}get decimals(){return this.#Xe.decimals}get value(){return this.#et}#nt(e){Pl(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#rt(e,t){return e=tA(e,this.#Xe,t),new rA(Zv,e,this.#Xe)}#st(e,t){return this.#nt(e),this.#rt(this.#et+e.#et,t)}addUnsafe(e){return this.#st(e)}add(e){return this.#st(e,"add")}#it(e,t){return this.#nt(e),this.#rt(this.#et-e.#et,t)}subUnsafe(e){return this.#it(e)}sub(e){return this.#it(e,"sub")}#at(e,t){return this.#nt(e),this.#rt(this.#et*e.#et/this.#tt,t)}mulUnsafe(e){return this.#at(e)}mul(e){return this.#at(e,"mul")}mulSignal(e){this.#nt(e);const t=this.#et*e.#et;return xl(t%this.#tt===Jv,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#rt(t/this.#tt,"mulSignal")}#ot(e,t){return xl(e.#et!==Jv,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#nt(e),this.#rt(this.#et*this.#tt/e.#et,t)}divUnsafe(e){return this.#ot(e)}div(e){return this.#ot(e,"div")}divSignal(e){xl(e.#et!==Jv,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#nt(e);const t=this.#et*this.#tt;return xl(t%e.#et===Jv,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#rt(t/e.#et,"divSignal")}cmp(e){let t=this.value,n=e.value;const r=this.decimals-e.decimals;return r>0?n*=eA(r):r<0&&(t*=eA(-r)),t<n?-1:t>n?1:0}eq(e){return 0===this.cmp(e)}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#et;return this.#et<Jv&&(e-=this.#tt-Qv),e=this.#et/this.#tt*this.#tt,this.#rt(e,"floor")}ceiling(){let e=this.#et;return this.#et>Jv&&(e+=this.#tt-Qv),e=this.#et/this.#tt*this.#tt,this.#rt(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=Yv*eA(t-1);let r=this.value+n;const s=eA(t);return r=r/s*s,tA(r,this.#Xe,"round"),new rA(Zv,r,this.#Xe)}isZero(){return this.#et===Jv}isNegative(){return this.#et<Jv}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return rA.fromString(this.toString(),e)}static fromValue(e,t,n){const r=null==t?0:Yl(t),s=nA(n);let i=Kl(e,"value");const a=r-s.decimals;if(a>0){const t=eA(a);xl(i%t===Jv,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),i/=t}else a<0&&(i*=eA(-a));return tA(i,s,"fromValue"),new rA(Zv,i,s)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Pl(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const r=nA(t);let s=n[2]||"0",i=n[3]||"";for(;i.length<r.decimals;)i+=Xv;xl(i.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),i=i.substring(0,r.decimals);const a=BigInt(n[1]+s+i);return tA(a,r,"fromString"),new rA(Zv,a,r)}static fromBytes(e,t){let n=Ql(Tl(e,"value"));const r=nA(t);return r.signed&&(n=zl(n,r.width)),tA(n,r,"fromBytes"),new rA(Zv,n,r)}}const sA=["wei","kwei","mwei","gwei","szabo","finney","ether"];function iA(e){return function(e,t){let n=18;if("string"==typeof t){const e=sA.indexOf(t);Pl(e>=0,"invalid unit","unit",t),n=3*e}else null!=t&&(n=Yl(t,"unit"));return rA.fromValue(e,n,{decimals:n,width:512}).toString()}(e,18)}const aA=new class extends a{store=new s("cached-subject-key-balances");constructor(){super(),this.addAllowedEvents("update")}init(){Ds.client.channel("subject-key-balances-changes").on("postgres_changes",{event:"*",schema:"public",table:"subject_key_holders"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.subject,e.new.wallet_address)})).subscribe()}cache(e,t,n){n!==this.get(e,t)&&(this.store.set(`${e}-${t}`,n,!0),this.fireEvent("update",{subject:e,walletAddress:t,balance:n}))}get(e,t){const n=this.store.get(`${e}-${t}`);return n||0}async refresh(e,t){const{data:n,error:r}=await Ds.client.from("subject_key_holders").select("*, last_fetched_balance::text").eq("wallet_address",t);if(r)throw r;const s=n?.[0];s&&s.last_fetched_balance!==this.get(e,t)&&this.cache(e,t,s.total_key_balance)}getAndRefresh(e,t){const n=this.get(e,t);return this.refresh(e,t).catch((e=>console.error("Error refreshing subject key balance details:",e))),n}increaseKeyBalanceInstantly(e,t){const n=this.get(t,e);this.cache(t,e,n+1)}};const oA=new class{async buyKey(e,t){await Av.buyKeys(e,1n,t),Ds.client.functions.invoke("track-subject-events"),Ds.client.functions.invoke("track-subject-price-and-balance",{body:{subjects:[e]}}),aA.increaseKeyBalanceInstantly(Lw.userId,e)}};class cA extends w{userDetails;content;priceDisplay;totalPriceDisplay;buyButton;constructor(e){super({barrierDismissible:!0}),this.userDetails=e,this.append(this.content=new g(".popup.buy-subject-key-popup",m("header",m("h1",`Buy 1 ${e.display_name}'s Key`)),m("main",m(".owner-profile-image-wrapper",m(".owner-profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m(".price-info",m(".price",m("label","Price"),m(".value",this.priceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))),m(".price",m("label","Total (including fee)"),m(".value",this.totalPriceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"}),this.buyButton=new v({type:E.Contained,tag:".buy-token-button",click:()=>this.buyKey(),title:`Buy 1 ${e.display_name}'s Key`})))),this.fetchPrice(),this.fetchTotalPrice()}async fetchPrice(){const e=await Av.getBuyPrice(this.userDetails.wallet_address,1n);this.priceDisplay.text=`${iA(e)}`}async fetchTotalPrice(){const e=await Av.getBuyPriceAfterFee(this.userDetails.wallet_address,1n);this.totalPriceDisplay.text=`${iA(e)}`}async buyKey(){this.buyButton.disable().title="Buying...";try{const e=this.userDetails.wallet_address;Nw.connected||await Nw.connect();const[t,n]=await Promise.all([Nw.getBalance(),Av.getBuyPriceAfterFee(e,1n)]);t<n?new C({title:"Insufficient balance",message:`You need at least ${iA(n)} AVAX to buy this key.`}):(await oA.buyKey(e,n),this.delete())}catch(e){console.error(e),this.buyButton.enable().title=`Buy 1 ${this.userDetails.display_name}'s Key`}}}class lA extends c{userDetails;settingsButton;followButton;constructor(e,t,n){super(".user-profile-display"),this.userDetails=e,this.append(m(".profile",m(".profile-image-wrapper",m(".profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m("h2",e.display_name),m("h3",m("a","@"+e.x_username,{href:`https://x.com/${e.x_username}`,target:"_blank"})),m(".socials",m("a",m("img.x-symbol",{src:"/images/x-symbol.svg"}),{href:`https://x.com/${e.x_username}`,target:"_blank"}))),m(".trading-metrics",m("section.trading-volume",m(".icon-container",new b("analytics")),m(".metric",m("h3","Volume"),m(".value",t?iA(t.total_trading_key_volume):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"})))),m("section.earned",m(".icon-container",new b("savings")),m(".metric",m("h3","Fees Earned"),m(".value",e?iA(e.total_earned_trading_fees):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"})))),m("section.price",m(".icon-container",new b("sell")),m(".metric",m("h3","Price"),m(".value","0.00",m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))),m(".action-buttons",this.followButton=m("button.follow","Follow",{click:()=>{Lw.userId?Jb.isFollowing(e.user_id)?Jb.unfollow(e.user_id):Jb.follow(e.user_id):new P({title:"Login Required",message:"You must be logged in to follow users.",confirmTitle:"Login"},(()=>Lw.signIn()))}}),m("button.buy-key"+(e.wallet_address?"":".disabled"),"Buy Key",{click:()=>{Lw.userId?Lw.walletLinked?e.wallet_address?new cA(e):new C({title:"No wallet address",message:"This user has not linked a wallet."}):new P({title:"Wallet Required",message:"You must link a wallet to buy keys.",confirmTitle:"Link Wallet"},(()=>Lw.linkWallet())):new P({title:"Login Required",message:"You must be logged in to buy keys.",confirmTitle:"Login"},(()=>Lw.signIn()))}}),this.settingsButton=m("button.settings","Settings",{click:()=>f.go("/settings")})),m(".social-metrics",m("section.holdings",m("a",m("span.value",String(n)),m("span","Holdings"),{click:()=>f.go(`/${e.x_username}/holdings`)})),m("section.holders",m("a",m("span.value",t?String(t.key_holder_count):"0"),m("span","Holders"),{click:()=>f.go(`/${e.x_username}/holders`)})),m("section.following",m("a",m("span.value",String(e.following_count)),m("span","Following"),{click:()=>f.go(`/${e.x_username}/following`)})),m("section.followers",m("a",m("span.value",String(e.follower_count)),m("span","Followers"),{click:()=>f.go(`/${e.x_username}/followers`)})))),this.checkSignedUser(),this.onDelegate(Lw,"userFetched",(()=>this.checkSignedUser())),this.checkFollowing(),this.onDelegate(Jb,["follow","unfollow"],(t=>{t===e.user_id&&this.checkFollowing()}))}checkSignedUser(){Lw.userId===this.userDetails.user_id?this.followButton.addClass("hidden"):this.settingsButton.addClass("hidden")}checkFollowing(){Jb.isFollowing(this.userDetails.user_id)?this.followButton.text="Unfollow":this.followButton.text="Follow"}}class uA extends $s{container;tabs;xUsername;userDetails;subjectDetails;holdingCount=0;holdingList;holderList;followingList;followerList;constructor(e){super(),Yw.append(this.container=m(".user-view")),this.xUsername=e.xUsername,this.userDetails=Xb.getAndRefreshByXUsername(this.xUsername),this.subjectDetails=this.userDetails.wallet_address?Js.getAndRefresh(this.userDetails.wallet_address):void 0,this.holdingCount=this.userDetails.wallet_address?$v.getAndRefresh(this.userDetails.wallet_address):0,this.render(),this.container.onDelegate(Xb,"update",(e=>{e.x_username===this.xUsername&&(this.userDetails=e,this.render())})),this.container.onDelegate(Js,"update",(e=>{e.subject===this.userDetails.wallet_address&&(this.subjectDetails=e,this.render())})),this.container.onDelegate($v,"update",(({walletAddress:e,totalKeyBalance:t})=>{e===this.userDetails.wallet_address&&(this.holdingCount=t,this.render())}))}render(){this.container.empty().append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1",`${this.userDetails.display_name}'s Igloo`)),m("section.profile",new lA(this.userDetails,this.subjectDetails,this.holdingCount),m(".user-connections",this.tabs=new I("user-connections",[{id:"holdings",label:[m("span.value",String(this.holdingCount)),"Holdings"]},{id:"holders",label:[m("span.value",this.subjectDetails?String(this.subjectDetails.key_holder_count):"0"),"Holders"]},{id:"following",label:[m("span.value",String(this.userDetails.following_count)),"Following"]},{id:"followers",label:[m("span.value",String(this.userDetails.follower_count)),"Followers"]}]),this.holdingList=new Kv(this.userDetails.user_id),this.holderList=new qv(this.userDetails.user_id),this.followingList=new Wv(this.userDetails.user_id),this.followerList=new zv(this.userDetails.user_id))),new Fv(this.userDetails.user_id).show()),this.tabs.on("select",(e=>{[this.holdingList,this.holderList,this.followingList,this.followerList].forEach((e=>e.hide())),"holdings"===e?this.holdingList.show():"holders"===e?this.holderList.show():"following"===e?this.followingList.show():"followers"===e&&this.followerList.show()})).init()}changeParams(e,t){this.xUsername=e.xUsername,this.userDetails=Xb.getAndRefreshByXUsername(this.xUsername),this.subjectDetails=this.userDetails.wallet_address?Js.getAndRefresh(this.userDetails.wallet_address):void 0,this.render()}close(){this.container.delete(),super.close()}}async function hA(e){Vb.dev=e.dev,Vb.avaxRpc=e.avaxRpc,Vb.avaxChainId=e.avaxChainId,sessionStorage.__spa_path&&(f.goNoHistory(sessionStorage.__spa_path),sessionStorage.removeItem("__spa_path")),Ds.connect(e.supabaseUrl,e.supabaseAnonKey),[Xb,Js,_v].forEach((e=>e.init())),Nw.init(e.walletConnectProjectId),jw.init(e.messageForWalletLinking),Av.init(e.iglooSubjectAddress);const t=new _(m("img",{src:"/images/igloo-character.png"}));await Promise.all([Lw.fetchUserOnInit(),En.loadYAMLs({en:["/locales/en.yml"]})]),t.delete(),f.route("**",Yw),f.route("",jv),f.route(["chats","chats/{topic}"],Xw),f.route("chats/0x{subject}",hv),f.route(["chats","chats/{topic}"],yv,["chats/0x{subject}"]),f.route("explore",Ev),f.route("notifications",Uv),f.route("settings",Rv),f.route("post/{postId}",Lv),f.route("{xUsername}",uA,["chats","explore","notifications","settings","post/{postId}","{xUsername}/holders","{xUsername}/following","{xUsername}/followers"]),f.route("{xUsername}/holders",Dv,["post/{postId}"]),f.route("{xUsername}/following",Mv,["post/{postId}"]),f.route("{xUsername}/followers",Bv,["post/{postId}"])}Hs().extend(Ws())},1831:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var r=n(5495);await(0,r.Z)({dev:!1,supabaseUrl:"https://diffcrvgnspbzzbqwtvt.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpZmZjcnZnbnNwYnp6YnF3dHZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY3MzU2MjIsImV4cCI6MjAxMjMxMTYyMn0.CtVuTA_yY1t6zQ4NUZJUWEp7aDG2JBpR_6SFdU3vNJg",walletConnectProjectId:"53ce7f51ed886a719bf634b25061f424",messageForWalletLinking:"Link Wallet to Igloo",avaxRpc:"https://api.avax.network/ext/bc/C/rpc",avaxChainId:43114,iglooSubjectAddress:"0xa6940B0A43B4832dbfD6Db8a57bb441B905D6dAC"}),t()}catch(e){t(e)}}),1)},5856:()=>{},5883:()=>{},9015:(e,t,n)=>{"use strict";n.d(t,{AccountCtrl:()=>_,Id:()=>g,ConfigCtrl:()=>A,zv:()=>f,uA:()=>y,ExplorerCtrl:()=>G,jb:()=>q,OptionsCtrl:()=>w,AV:()=>d,ThemeCtrl:()=>X,ToastCtrl:()=>te,WcConnectionCtrl:()=>z});var r=n(2478);const s=e=>"object"==typeof e&&null!==e,i=new WeakMap,a=new WeakSet,o=(e=Object.is,t=((e,t)=>new Proxy(e,t)),n=(e=>s(e)&&!a.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)),o=(e=>e.configurable&&e.enumerable&&e.writable),c=(e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}}),l=new WeakMap,u=((e,t,n=c)=>{const s=l.get(e);if((null==s?void 0:s[0])===t)return s[1];const o=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return(0,r.jc)(o,!0),l.set(e,[t,o]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(o,t))return;const s=Reflect.get(e,t),c={value:s,enumerable:!0,configurable:!0};if(a.has(s))(0,r.jc)(s,!1);else if(s instanceof Promise)delete c.value,c.get=()=>n(s);else if(i.has(s)){const[e,t]=i.get(s);c.value=u(e,t(),n)}Object.defineProperty(o,t,c)})),Object.preventExtensions(o)}),h=new WeakMap,d=[1,1],f=(c=>{if(!s(c))throw new Error("object required");const l=h.get(c);if(l)return l;let p=d[0];const g=new Set,m=(e,t=++d[0])=>{p!==t&&(p=t,g.forEach((n=>n(e,t))))};let y=d[1];const b=e=>(t,n)=>{const r=[...t];r[1]=[e,...r[1]],m(r,n)},w=new Map,v=e=>{var t;const n=w.get(e);n&&(w.delete(e),null==(t=n[1])||t.call(n))},A=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),E=(t,o,c,l,u)=>{if(t&&(e(o,l)||h.has(l)&&e(o,h.get(l))))return;v(c),s(l)&&(l=(0,r.o5)(l)||l);let d=l;if(l instanceof Promise)l.then((e=>{l.status="fulfilled",l.value=e,m(["resolve",[c],e])})).catch((e=>{l.status="rejected",l.reason=e,m(["reject",[c],e])}));else{!i.has(l)&&n(l)&&(d=f(l));const e=!a.has(d)&&i.get(d);e&&((e,t)=>{if(w.has(e))throw new Error("prop listener already exists");if(g.size){const n=t[3](b(e));w.set(e,[t,n])}else w.set(e,[t])})(c,e)}u(d),m(["set",[c],l,o])},k=t(A,{deleteProperty(e,t){const n=Reflect.get(e,t);v(t);const r=Reflect.deleteProperty(e,t);return r&&m(["delete",[t],n]),r},set(e,t,n,r){const s=Reflect.has(e,t),i=Reflect.get(e,t,r);return E(s,i,t,n,(n=>{Reflect.set(e,t,n,r)})),!0},defineProperty(e,t,n){if(o(n)){const r=Reflect.getOwnPropertyDescriptor(e,t);if(!r||o(r))return E(!!r&&"value"in r,null==r?void 0:r.value,t,n.value,(r=>{Reflect.defineProperty(e,t,{...n,value:r})})),!0}return Reflect.defineProperty(e,t,n)}});h.set(c,k);const _=[A,(e=++d[1])=>(y===e||g.size||(y=e,w.forEach((([t])=>{const n=t[1](e);n>p&&(p=n)}))),p),u,e=>{g.add(e),1===g.size&&w.forEach((([e,t],n)=>{if(t)throw new Error("remove already exists");const r=e[3](b(n));w.set(n,[e,r])}));return()=>{g.delete(e),0===g.size&&w.forEach((([e,t],n)=>{t&&(t(),w.set(n,[e]))}))}}];return i.set(k,_),Reflect.ownKeys(c).forEach((e=>{const t=Object.getOwnPropertyDescriptor(c,e);"value"in t&&(k[e]=c[e],delete t.value,delete t.writable),Object.defineProperty(A,e,t)})),k}))=>[f,i,a,e,t,n,o,c,l,u,h,d],[c]=o();function l(e={}){return c(e)}function u(e,t,n){const r=i.get(e);let s;r||console.warn("Please use proxy object");const a=[],o=r[3];let c=!1;const l=o((e=>{a.push(e),n?t(a.splice(0)):s||(s=Promise.resolve().then((()=>{s=void 0,c&&t(a.splice(0))})))}));return c=!0,()=>{c=!1,l()}}const h=l({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),d={state:h,subscribe:e=>u(h,(()=>e(h))),push(e,t){e!==h.view&&(h.view=e,t&&(h.data=t),h.history.push(e))},reset(e){h.view=e,h.history=[e]},replace(e){h.history.length>1&&(h.history[h.history.length-1]=e,h.view=e)},goBack(){if(h.history.length>1){h.history.pop();const[e]=h.history.slice(-1);h.view=e}},setData(e){h.data=e}},f={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",W3M_VERSION:"W3M_VERSION",W3M_PREFER_INJECTED_URL_FLAG:"w3mPreferInjected",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>typeof window<"u"&&Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>f.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){const e=navigator.userAgent.toLowerCase();return f.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,formatNativeUrl(e,t,n){if(f.isHttpUrl(e))return this.formatUniversalUrl(e,t,n);let r=e;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);return`${r}wc?uri=${encodeURIComponent(t)}`},formatUniversalUrl(e,t,n){if(!f.isHttpUrl(e))return this.formatNativeUrl(e,t,n);let r=e;r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,n);return`${r}wc?uri=${encodeURIComponent(t)}`},wait:async e=>new Promise((t=>{setTimeout(t,e)})),openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(f.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(f.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(f.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setWeb3ModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(f.W3M_VERSION,"2.7.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=null==(e=d.state.data)?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t},getSwitchNetworkRouterData(){var e;const t=null==(e=d.state.data)?void 0:e.SwitchNetwork;if(!t)throw new Error('Missing "SwitchNetwork" view data');return t},isPreferInjectedFlag:()=>typeof location<"u"&&new URLSearchParams(location.search).has(f.W3M_PREFER_INJECTED_URL_FLAG)};let p;const g={ethereumClient:void 0,setEthereumClient(e){p=e},client(){if(p)return p;throw new Error("ClientCtrl has no client set")}},m=l({enabled:typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),userSessionId:"",events:[],connectedWalletId:void 0}),y={state:m,subscribe:e=>u(m.events,(()=>e(function(e,t){const n=i.get(e);n||console.warn("Please use proxy object");const[r,s,a]=n;return a(r,s(),t)}(m.events[m.events.length-1])))),initialize(){m.enabled&&typeof(null==crypto?void 0:crypto.randomUUID)<"u"&&(m.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){m.connectedWalletId=e},click(e){if(m.enabled){const t={type:"CLICK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},track(e){if(m.enabled){const t={type:"TRACK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},view(e){if(m.enabled){const t={type:"VIEW",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}}},b=l({selectedChain:void 0,chains:void 0,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,isPreferInjected:!1}),w={state:b,subscribe:e=>u(b,(()=>e(b))),setChains(e){b.chains=e},getSelectedChain(){const e=g.client().getNetwork().chain;return e&&(b.selectedChain=e),b.selectedChain},setSelectedChain(e){b.selectedChain=e},setIsCustomDesktop(e){b.isCustomDesktop=e},setIsCustomMobile(e){b.isCustomMobile=e},setIsDataLoaded(e){b.isDataLoaded=e},setIsUiLoaded(e){b.isUiLoaded=e},setIsPreferInjected(e){b.isPreferInjected=e}},v=l({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,tokenContracts:void 0,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,defaultChain:void 0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),A={state:v,subscribe:e=>u(v,(()=>e(v))),setConfig(e){var t,n;y.initialize(),w.setIsCustomMobile(Boolean(null==(t=e.mobileWallets)?void 0:t.length)),w.setIsCustomDesktop(Boolean(null==(n=e.desktopWallets)?void 0:n.length)),w.setChains(g.client().chains),w.setIsPreferInjected(g.client().isInjectedProviderInstalled()&&f.isPreferInjectedFlag()),e.defaultChain&&w.setSelectedChain(e.defaultChain),f.setWeb3ModalVersionInStorage(),Object.assign(v,e)}},E={async getIdentity(e,t){const{projectId:n}=A.state,r=`https://rpc.walletconnect.com/v1/identity/${e}?chainId=${`eip155:${t}`}&projectId=${n}`;return(await fetch(r)).json()}},k=l({address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1}),_={state:k,subscribe:e=>u(k,(()=>e(k))),getAccount(){const e=g.client().getAccount();k.address=e.address,k.isConnected=e.isConnected},async fetchProfile(e,t){var n;try{k.profileLoading=!0,k.profileName=null,k.profileAvatar=null;const r=t??k.address,s=1,i=null==(n=w.state.chains)?void 0:n.find((e=>e.id===s));if(r&&i){try{const e=await E.getIdentity(r,s);k.profileName=e.name,k.profileAvatar=e.avatar}catch{const e=await g.client().fetchEnsName({address:r,chainId:s});if(k.profileName=e,e){const t=await g.client().fetchEnsAvatar({name:e,chainId:s});k.profileAvatar=t}}k.profileAvatar&&await e(k.profileAvatar)}}finally{k.profileLoading=!1}},async fetchBalance(e){try{const{chain:t}=g.client().getNetwork(),{tokenContracts:n}=A.state;let r;t&&n&&(r=n[t.id]),k.balanceLoading=!0;const s=e??k.address;if(s){const e=await g.client().fetchBalance({address:s,token:r});k.balance={amount:e.formatted,symbol:e.symbol}}}finally{k.balanceLoading=!1}},setAddress(e){k.address=e},setIsConnected(e){k.isConnected=e},resetBalance(){k.balance=void 0},resetAccount(){k.address=void 0,k.isConnected=!1,k.profileName=void 0,k.profileAvatar=void 0,k.balance=void 0}};var x=Object.defineProperty,P=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,I=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const O="https://explorer-api.walletconnect.com",T="w3m",N="js-2.7.1";async function j(e,t){const n=((e,t)=>{for(var n in t||(t={}))C.call(t,n)&&I(e,n,t[n]);if(P)for(var n of P(t))S.call(t,n)&&I(e,n,t[n]);return e})({sdkType:T,sdkVersion:N},t),r=new URL(e,O);return r.searchParams.append("projectId",A.state.projectId),Object.entries(n).forEach((([e,t])=>{t&&r.searchParams.append(e,String(t))})),(await fetch(r)).json()}const U={getDesktopListings:async e=>j("/w3m/v1/getDesktopListings",e),getMobileListings:async e=>j("/w3m/v1/getMobileListings",e),getInjectedListings:async e=>j("/w3m/v1/getInjectedListings",e),getAllListings:async e=>j("/w3m/v1/getAllListings",e),getWalletImageUrl:e=>`${O}/w3m/v1/getWalletImage/${e}?projectId=${A.state.projectId}&sdkType=${T}&sdkVersion=${N}`,getAssetImageUrl:e=>`${O}/w3m/v1/getAssetImage/${e}?projectId=${A.state.projectId}&sdkType=${T}&sdkVersion=${N}`};var L=Object.defineProperty,R=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,D=(e,t,n)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const F=f.isMobile(),$=l({wallets:{listings:[],total:0,page:1},injectedWallets:[],search:{listings:[],total:0,page:1},recomendedWallets:[]}),G={state:$,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=A.state;if("NONE"===e||"ALL"===t&&!e)return $.recomendedWallets;if(f.isArray(e)){const t={recommendedIds:e.join(",")},{listings:n}=await U.getAllListings(t),r=Object.values(n);r.sort(((t,n)=>e.indexOf(t.id)-e.indexOf(n.id))),$.recomendedWallets=r}else{const e=f.isArray(t),n={page:1,entries:f.RECOMMENDED_WALLET_AMOUNT,version:2,excludedIds:e?t.join(","):void 0},{listings:r}=F?await U.getMobileListings(n):await U.getDesktopListings(n);$.recomendedWallets=Object.values(r)}return $.recomendedWallets},async getWallets(e){const t=((e,t)=>{for(var n in t||(t={}))B.call(t,n)&&D(e,n,t[n]);if(R)for(var n of R(t))M.call(t,n)&&D(e,n,t[n]);return e})({},e),{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:r}=A.state,{recomendedWallets:s}=$;if("ALL"===r)return $.wallets;s.length?t.excludedIds=s.map((e=>e.id)).join(","):f.isArray(n)&&(t.excludedIds=n.join(",")),f.isArray(r)&&(t.excludedIds=[t.excludedIds,r].filter(Boolean).join(","));const{page:i,search:a}=e,{listings:o,total:c}=F?await U.getMobileListings(t):await U.getDesktopListings(t),l=Object.values(o),u=a?"search":"wallets";return $[u]={listings:[...$[u].listings,...l],total:c,page:i??1},{listings:l,total:c}},async getInjectedWallets(){const{listings:e}=await U.getInjectedListings({}),t=Object.values(e);return $.injectedWallets=t,$.injectedWallets},getWalletImageUrl:e=>U.getWalletImageUrl(e),getAssetImageUrl:e=>U.getAssetImageUrl(e),resetSearch(){$.search={listings:[],total:0,page:1}}},H=l({pairingEnabled:!1,pairingUri:"",pairingError:!1}),z={state:H,subscribe:e=>u(H,(()=>e(H))),setPairingUri(e){H.pairingUri=e},setPairingError(e){H.pairingError=e},setPairingEnabled(e){H.pairingEnabled=e}},W=l({open:!1}),q={state:W,subscribe:e=>u(W,(()=>e(W))),open:async e=>new Promise((t=>{const{isUiLoaded:n,isDataLoaded:r,isPreferInjected:s,selectedChain:i}=w.state,{isConnected:a}=_.state,{enableNetworkView:o}=A.state;if(z.setPairingEnabled(!0),a||f.removeWalletConnectDeepLink(),null!=e&&e.route)d.reset(e.route);else if(a)d.reset("Account");else if(o)d.reset("SelectNetwork");else{if(s)return g.client().connectConnector("injected",i?.id).catch((e=>console.error(e))),void t();d.reset("ConnectWallet")}const{pairingUri:c}=z.state;if(n&&r&&(c||a))W.open=!0,t();else{const e=setInterval((()=>{const n=w.state,r=z.state;n.isUiLoaded&&n.isDataLoaded&&(r.pairingUri||a)&&(clearInterval(e),W.open=!0,t())}),200)}})),close(){W.open=!1}};var K=Object.defineProperty,V=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,Y=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Z=l({themeMode:typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),X={state:Z,subscribe:e=>u(Z,(()=>e(Z))),setThemeConfig(e){const{themeMode:t,themeVariables:n}=e;t&&(Z.themeMode=t),n&&(Z.themeVariables=((e,t)=>{for(var n in t||(t={}))J.call(t,n)&&Y(e,n,t[n]);if(V)for(var n of V(t))Q.call(t,n)&&Y(e,n,t[n]);return e})({},n))}},ee=l({open:!1,message:"",variant:"success"}),te={state:ee,subscribe:e=>u(ee,(()=>e(ee))),openToast(e,t){ee.open=!0,ee.message=e,ee.variant=t},closeToast(){ee.open=!1}}},3160:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});var r=n(6867);function s(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?(0,r.P)(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}},605:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(3160),s=n(6867);function i(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const n=(0,r.E)(t);let i=0;for(const t of e)n.set(t,i),i+=t.length;return(0,s.P)(n)}},2217:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var r=n(5114),s=n(6867);function i(e,t="utf8"){const n=r.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):(0,s.P)(globalThis.Buffer.from(e,"utf-8"))}},7466:(e,t,n)=>{"use strict";n.d(t,{BB:()=>i.B,mL:()=>s.m,zo:()=>r.z});var r=n(605),s=n(2217),i=n(2263)},2263:(e,t,n)=>{"use strict";n.d(t,{B:()=>s});var r=n(5114);function s(e,t="utf8"){const n=r.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},6867:(e,t,n)=>{"use strict";function r(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}n.d(t,{P:()=>r})},5114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ze});var r={};n.r(r),n.d(r,{identity:()=>S});var s={};n.r(s),n.d(s,{base2:()=>I});var i={};n.r(i),n.d(i,{base8:()=>O});var a={};n.r(a),n.d(a,{base10:()=>T});var o={};n.r(o),n.d(o,{base16:()=>N,base16upper:()=>j});var c={};n.r(c),n.d(c,{base32:()=>U,base32hex:()=>M,base32hexpad:()=>F,base32hexpadupper:()=>$,base32hexupper:()=>D,base32pad:()=>R,base32padupper:()=>B,base32upper:()=>L,base32z:()=>G});var l={};n.r(l),n.d(l,{base36:()=>H,base36upper:()=>z});var u={};n.r(u),n.d(u,{base58btc:()=>W,base58flickr:()=>q});var h={};n.r(h),n.d(h,{base64:()=>K,base64pad:()=>V,base64url:()=>J,base64urlpad:()=>Q});var d={};n.r(d),n.d(d,{base256emoji:()=>ee});var f={};n.r(f),n.d(f,{sha256:()=>xe,sha512:()=>Pe});var p={};n.r(p),n.d(p,{identity:()=>Se});var g={};n.r(g),n.d(g,{code:()=>Oe,decode:()=>Ne,encode:()=>Te,name:()=>Ie});var m={};n.r(m),n.d(m,{code:()=>Re,decode:()=>Me,encode:()=>Be,name:()=>Le});var y=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),a=i.charCodeAt(0);if(255!==n[a])throw new TypeError(i+" is ambiguous");n[a]=s}var o=e.length,c=e.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var i=(e.length-t)*l+1>>>0,a=new Uint8Array(i);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=i-1;(0!==u||h<s)&&-1!==d;d--,h++)u+=o*a[d]>>>0,a[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");s=h,t++}if(" "!==e[t]){for(var f=i-s;f!==i&&0===a[f];)f++;for(var p=new Uint8Array(r+(i-f)),g=r;f!==i;)p[g++]=a[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,s=0,i=t.length;s!==i&&0===t[s];)s++,n++;for(var a=(i-s)*u+1>>>0,l=new Uint8Array(a);s!==i;){for(var h=t[s],d=0,f=a-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*l[f]>>>0,l[f]=h%o>>>0,h=h/o>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,s++}for(var p=a-r;p!==a&&0===l[p];)p++;for(var g=c.repeat(n);p<a;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:h,decode:function(e){var n=h(e);if(n)return n;throw new Error(`Non-${t} character`)}}};const b=y,w=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class v{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class A{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return k(this,e)}}class E{constructor(e){this.decoders=e}or(e){return k(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const k=(e,t)=>new E({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class _{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new v(e,t,n),this.decoder=new A(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const x=({name:e,prefix:t,encode:n,decode:r})=>new _(e,t,n,r),P=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=b(n,t);return x({prefix:e,name:t,encode:r,decode:e=>w(s(e))})},C=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>x({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],s=(1<<n)-1;let i="",a=0,o=0;for(let r=0;r<e.length;++r)for(o=o<<8|e[r],a+=8;a>n;)a-=n,i+=t[s&o>>a];if(a&&(i+=t[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{const s={};for(let e=0;e<t.length;++e)s[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,l=0;for(let t=0;t<i;++t){const i=s[e[t]];if(void 0===i)throw new SyntaxError(`Non-${r} character`);c=c<<n|i,o+=n,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a})(t,r,n,e)}),S=x({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),I=C({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),O=C({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),T=P({prefix:"9",name:"base10",alphabet:"0123456789"}),N=C({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),j=C({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),U=C({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),L=C({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),R=C({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),B=C({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),M=C({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),D=C({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),F=C({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$=C({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G=C({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),H=P({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z=P({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),W=P({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),q=P({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),K=C({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),V=C({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),J=C({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Q=C({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Y=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Z=Y.reduce(((e,t,n)=>(e[n]=t,e)),[]),X=Y.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);const ee=x({prefix:"🚀",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Z[t]),"")},decode:function(e){const t=[];for(const n of e){const e=X[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var te=function e(t,n,r){n=n||[];var s=r=r||0;for(;t>=se;)n[r++]=255&t|ne,t/=128;for(;t&re;)n[r++]=255&t|ne,t>>>=7;return n[r]=0|t,e.bytes=r-s+1,n},ne=128,re=-128,se=Math.pow(2,31);var ie=function e(t,n){var r,s=0,i=0,a=n=n||0,o=t.length;do{if(a>=o)throw e.bytes=0,new RangeError("Could not decode varint");r=t[a++],s+=i<28?(r&oe)<<i:(r&oe)*Math.pow(2,i),i+=7}while(r>=ae);return e.bytes=a-n,s},ae=128,oe=127;var ce=Math.pow(2,7),le=Math.pow(2,14),ue=Math.pow(2,21),he=Math.pow(2,28),de=Math.pow(2,35),fe=Math.pow(2,42),pe=Math.pow(2,49),ge=Math.pow(2,56),me=Math.pow(2,63);const ye={encode:te,decode:ie,encodingLength:function(e){return e<ce?1:e<le?2:e<ue?3:e<he?4:e<de?5:e<fe?6:e<pe?7:e<ge?8:e<me?9:10}},be=(e,t,n=0)=>(ye.encode(e,t,n),t),we=e=>ye.encodingLength(e),ve=(e,t)=>{const n=t.byteLength,r=we(e),s=r+we(n),i=new Uint8Array(s+n);return be(e,i,0),be(n,i,r),i.set(t,s),new Ae(e,n,t,i)};class Ae{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const Ee=({name:e,code:t,encode:n})=>new ke(e,t,n);class ke{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ve(this.code,t):t.then((e=>ve(this.code,e)))}throw Error("Unknown type, must be binary type")}}const _e=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),xe=Ee({name:"sha2-256",code:18,encode:_e("SHA-256")}),Pe=Ee({name:"sha2-512",code:19,encode:_e("SHA-512")}),Ce=w,Se={code:0,name:"identity",encode:Ce,digest:e=>ve(0,Ce(e))},Ie="raw",Oe=85,Te=e=>w(e),Ne=e=>w(e),je=new TextEncoder,Ue=new TextDecoder,Le="json",Re=512,Be=e=>je.encode(JSON.stringify(e)),Me=e=>JSON.parse(Ue.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const De={...r,...s,...i,...a,...o,...c,...l,...u,...h,...d};var Fe=n(3160);function $e(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Ge=$e("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),He=$e("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{e=e.substring(1);const t=(0,Fe.E)(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),ze={utf8:Ge,"utf-8":Ge,hex:De.base16,latin1:He,ascii:He,binary:He,...De}},4503:(e,t,n)=>{"use strict";function r(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}n.d(t,{T:()=>r})},6143:(e,t,n)=>{"use strict";n.d(t,{R:()=>w});var r=n(4503),s=n(6693);const i="0x82ad56cb";var a=n(2027),o=n(377),c=n(5980),l=n(7210),u=n(7799),h=n(2676),d=n(2106),f=n(6445),p=n(7469);var g=n(1163),m=n(4688),y=n(2357),b=n(7531);async function w(e,t){const{account:w=e.account,batch:v=Boolean(e.batch?.multicall),blockNumber:A,blockTag:E="latest",accessList:k,data:_,gas:x,gasPrice:P,maxFeePerGas:C,maxPriorityFeePerGas:S,nonce:I,to:O,value:T,...N}=t,j=w?(0,r.T)(w):void 0;try{(0,b.F)(t);const n=(A?(0,d.eC)(A):void 0)||E,r=e.chain?.formatters?.transactionRequest?.format||m.tG,a=r({...(0,g.K)(N,{format:r}),from:j?.address,accessList:k,data:_,gas:x,gasPrice:P,maxFeePerGas:C,maxPriorityFeePerGas:S,nonce:I,to:O,value:T});if(v&&function({request:e}){const{data:t,to:n,...r}=e;return!!t&&(!t.startsWith(i)&&(!!n&&!(Object.values(r).filter((e=>void 0!==e)).length>0)))}({request:a}))try{return await async function(e,t){const{batchSize:n=1024,wait:r=0}="object"==typeof e.batch?.multicall?e.batch.multicall:{},{blockNumber:i,blockTag:a="latest",data:f,multicallAddress:p,to:g}=t;let m=p;if(!m){if(!e.chain)throw new o.pZ;m=(0,h.LI)({blockNumber:i,chain:e.chain,contract:"multicall3"})}const b=i?(0,d.eC)(i):void 0,w=b||a,{schedule:v}=(0,y.S)({id:`${e.uid}.${w}`,wait:r,shouldSplitBatch(e){const t=e.reduce(((e,{data:t})=>e+(t.length-2)),0);return t>2*n},fn:async t=>{const n=t.map((e=>({allowFailure:!0,callData:e.data,target:e.to}))),r=(0,u.R)({abi:s.F8,args:[n],functionName:"aggregate3"}),i=await e.request({method:"eth_call",params:[{data:r,to:m},w]});return(0,l.k)({abi:s.F8,args:[n],functionName:"aggregate3",data:i||"0x"})}}),[{returnData:A,success:E}]=await v({data:f,to:g});if(!E)throw new c.VQ({data:A});return"0x"===A?{data:void 0}:{data:A}}(e,{...a,blockNumber:A,blockTag:E})}catch(e){if(!(e instanceof o.pZ||e instanceof o.mm))throw e}const f=await e.request({method:"eth_call",params:n?[a,n]:[a]});return"0x"===f?{data:void 0}:{data:f}}catch(r){const s=function(e){if(!(e instanceof a.G))return;const t=e.walk();return"object"==typeof t.data?t.data.data:t.data}(r),{offchainLookup:i,offchainLookupSignature:o}=await n.e(770).then(n.bind(n,9770));if(s?.slice(0,10)===o&&O)return{data:await i(e,{data:s,to:O})};throw function(e,{docsPath:t,...n}){const r=(()=>{const t=(0,p.k)(e,n);return t instanceof f.cj?e:t})();return new c.cg(r,{docsPath:t,...n})}(r,{...t,account:j,chain:e.chain})}}},6693:(e,t,n)=>{"use strict";n.d(t,{$o:()=>l,F8:()=>r,X$:()=>c,du:()=>a,k3:()=>i,nZ:()=>o});const r=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],s=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"}],i=[...s,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],a=[...s,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],o=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],c=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],l=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}]},1746:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,Up:()=>s,hZ:()=>i});const r={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},s={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},i={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}},4192:(e,t,n)=>{"use strict";n.d(t,{Bd:()=>i,Zn:()=>s,ez:()=>r});const r={gwei:9,wei:18},s={ether:-9,wei:9},i={ether:-18,gwei:-9}},7412:(e,t,n)=>{"use strict";n.d(t,{CI:()=>k,FM:()=>p,Gy:()=>A,KY:()=>w,M4:()=>h,MX:()=>b,SM:()=>v,cO:()=>o,dh:()=>E,fM:()=>a,fs:()=>d,gr:()=>u,hn:()=>_,lC:()=>g,mv:()=>m,wM:()=>x,wb:()=>l,xB:()=>c,xL:()=>y,yP:()=>f});var r=n(522),s=n(9135),i=n(2027);class a extends i.G{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class o extends i.G{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class c extends i.G{constructor({data:e,params:t,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${(0,r.h)(t,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=n}}class l extends i.G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class u extends i.G{constructor({expectedLength:e,givenLength:t,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class h extends i.G{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${(0,s.d)(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class d extends i.G{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class f extends i.G{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class p extends i.G{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class g extends i.G{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class m extends i.G{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class y extends i.G{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class b extends i.G{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class w extends i.G{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class v extends i.G{constructor({abiItem:e,data:t,params:n,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join("\n"),{metaMessages:[`Params: (${(0,r.h)(n,{includeName:!0})})`,`Data:   ${t} (${s} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=n,this.size=s}}class A extends i.G{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${(0,r.t)(e,{includeName:!0})}".`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class E extends i.G{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class k extends i.G{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class _ extends i.G{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class x extends i.G{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}},6087:(e,t,n)=>{"use strict";n.d(t,{b:()=>s});var r=n(2027);class s extends r.G{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}},2027:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var r=n(8673);class s extends Error{constructor(e,t={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:(0,r.bo)()});const n=t.cause instanceof s?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof s&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: https://viem.sh${i}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return i(this,e)}}function i(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e?i(e.cause,t):t?null:e}},377:(e,t,n)=>{"use strict";n.d(t,{Bk:()=>a,Yl:()=>i,mm:()=>s,pZ:()=>o});var r=n(2027);class s extends r.G{constructor({blockNumber:e,chain:t,contract:n}){super(`Chain "${t.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class i extends r.G{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} – ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class a extends r.G{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class o extends r.G{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}},5980:(e,t,n)=>{"use strict";n.d(t,{cg:()=>m,uq:()=>y,Lu:()=>b,Dk:()=>w,VQ:()=>v});var r=n(4503),s=n(1746),i=n(6899),a=n(522),o=n(6070);function c({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map(((e,n)=>`${r&&e.name?`${e.name}: `:""}${"object"==typeof t[n]?(0,o.P)(t[n]):t[n]}`)).join(", ")})`}var l=n(840),u=n(9625),h=n(7795),d=n(7412),f=n(2027),p=n(3639),g=n(8673);class m extends f.G{constructor(e,{account:t,docsPath:n,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:d,to:f,value:g}){const m=t?(0,r.T)(t):void 0,y=(0,p.xr)({from:m?.address,to:f,value:void 0!==g&&`${(0,u.d)(g)} ${s?.nativeCurrency.symbol||"ETH"}`,data:i,gas:a,gasPrice:void 0!==o&&`${(0,h.o)(o)} gwei`,maxFeePerGas:void 0!==c&&`${(0,h.o)(c)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${(0,h.o)(l)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",y].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=e}}class y extends f.G{constructor(e,{abi:t,args:n,contractAddress:r,docsPath:s,functionName:i,sender:o}){const u=(0,l.m)({abi:t,args:n,name:i}),h=u?c({abiItem:u,args:n,includeFunctionName:!1,includeName:!1}):void 0,d=u?(0,a.t)(u,{includeName:!0}):void 0,f=(0,p.xr)({address:r&&(0,g.CR)(r),function:d,args:h&&"()"!==h&&`${[...Array(i?.length??0).keys()].map((()=>" ")).join("")}${h}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Contract Call:",f].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=t,this.args=n,this.cause=e,this.contractAddress=r,this.functionName=i,this.sender=o}}class b extends f.G{constructor({abi:e,data:t,functionName:n,message:r}){let o,l,u,h,f;if(t&&"0x"!==t)try{l=(0,i.p)({abi:e,data:t});const{abiItem:n,errorName:r,args:o}=l;if("Error"===r)h=o[0];else if("Panic"===r){const[e]=o;h=s.$[e]}else{const e=n?(0,a.t)(n,{includeName:!0}):void 0,t=n&&o?c({abiItem:n,args:o,includeFunctionName:!1,includeName:!1}):void 0;u=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(r?.length??0).keys()].map((()=>" ")).join("")}${t}`:""]}}catch(e){o=e}else r&&(h=r);o instanceof d.yP&&(f=o.signature,u=[`Unable to decode signature "${f}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${f}.`]),super(h&&"execution reverted"!==h||f?[`The contract function "${n}" reverted with the following ${f?"signature":"reason"}:`,h||f].join("\n"):`The contract function "${n}" reverted.`,{cause:o,metaMessages:u}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=l,this.reason=h,this.signature=f}}class w extends f.G{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class v extends f.G{constructor({data:e,message:t}){super(t||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}},9760:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,m:()=>s});var r=n(2027);class s extends r.G{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class i extends r.G{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}},7788:(e,t,n)=>{"use strict";n.d(t,{Cd:()=>i,J5:()=>s,M6:()=>a});var r=n(2027);class s extends r.G{constructor({max:e,min:t,signed:n,size:r,value:s}){super(`Number "${s}" is not in safe ${r?`${8*r}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class i extends r.G{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}class a extends r.G{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}},6445:(e,t,n)=>{"use strict";n.d(t,{C_:()=>h,G$:()=>o,Hh:()=>a,M_:()=>i,WF:()=>d,ZI:()=>c,cj:()=>m,cs:()=>g,dR:()=>f,pZ:()=>p,se:()=>u,vU:()=>l});var r=n(7795),s=n(2027);class i extends s.G{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class a extends s.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,r.o)(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class o extends s.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,r.o)(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class c extends s.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class l extends s.G{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class u extends s.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class h extends s.G{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class d extends s.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class f extends s.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class p extends s.G{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class g extends s.G{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${(0,r.o)(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${(0,r.o)(n)} gwei`:""}).`].join("\n"),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(g,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class m extends s.G{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}},8863:(e,t,n)=>{"use strict";n.d(t,{Gg:()=>a,W5:()=>l,bs:()=>c,c9:()=>o});var r=n(6070),s=n(2027),i=n(8673);class a extends s.G{constructor({body:e,details:t,headers:n,status:s,url:a}){super("HTTP request failed.",{details:t,metaMessages:[s&&`Status: ${s}`,`URL: ${(0,i.Gr)(a)}`,e&&`Request body: ${(0,r.P)(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=s,this.url=a}}class o extends s.G{constructor({body:e,details:t,url:n}){super("WebSocket request failed.",{details:t,metaMessages:[`URL: ${(0,i.Gr)(n)}`,`Request body: ${(0,r.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class c extends s.G{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${(0,i.Gr)(n)}`,`Request body: ${(0,r.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class l extends s.G{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,i.Gr)(t)}`,`Request body: ${(0,r.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}},3639:(e,t,n)=>{"use strict";n.d(t,{Bh:()=>u,Yb:()=>h,j3:()=>c,mc:()=>d,mk:()=>l,xY:()=>o,xr:()=>a});var r=n(9625),s=n(7795),i=n(2027);function a(e){const t=Object.entries(e).map((([e,t])=>void 0===t||!1===t?null:[e,t])).filter(Boolean),n=t.reduce(((e,[t])=>Math.max(e,t.length)),0);return t.map((([e,t])=>`  ${`${e}:`.padEnd(n+1)}  ${t}`)).join("\n")}class o extends i.G{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class c extends i.G{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",a(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class l extends i.G{constructor(e,{account:t,docsPath:n,chain:i,data:o,gas:c,gasPrice:l,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:d,to:f,value:p}){const g=a({chain:i&&`${i?.name} (id: ${i?.id})`,from:t?.address,to:f,value:void 0!==p&&`${(0,r.d)(p)} ${i?.nativeCurrency.symbol||"ETH"}`,data:o,gas:c,gasPrice:void 0!==l&&`${(0,s.o)(l)} gwei`,maxFeePerGas:void 0!==u&&`${(0,s.o)(u)} gwei`,maxPriorityFeePerGas:void 0!==h&&`${(0,s.o)(h)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",g].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}class u extends i.G{constructor({blockHash:e,blockNumber:t,blockTag:n,hash:r,index:s}){let i="Transaction";n&&void 0!==s&&(i=`Transaction at block time "${n}" at index "${s}"`),e&&void 0!==s&&(i=`Transaction at block hash "${e}" at index "${s}"`),t&&void 0!==s&&(i=`Transaction at block number "${t}" at index "${s}"`),r&&(i=`Transaction with hash "${r}"`),super(`${i} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class h extends i.G{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class d extends i.G{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}},8673:(e,t,n)=>{"use strict";n.d(t,{CR:()=>r,Gr:()=>s,bo:()=>i});const r=e=>e,s=e=>e,i=()=>"viem@1.15.3"},4450:(e,t,n)=>{"use strict";n.d(t,{r:()=>u});var r=n(7412),s=n(5775),i=n(9135),a=n(3972),o=n(1836),c=n(5946),l=n(5444);function u(e,t){if("0x"===t&&e.length>0)throw new r.wb;if((0,i.d)(t)&&(0,i.d)(t)<32)throw new r.xB({data:t,params:e,size:(0,i.d)(t)});return function({data:e,params:t}){const n=[];let s=0;for(let a=0;a<t.length;a++){if(s>=(0,i.d)(e))throw new r.xB({data:e,params:t,size:(0,i.d)(e)});const o=t[a],{consumed:c,value:l}=h({data:e,param:o,position:s});n.push(l),s+=c}return n}({data:t,params:e})}function h({data:e,param:t,position:n}){const i=(0,l.S)(t.type);if(i){const[r,s]=i;return function(e,{param:t,length:n,position:r}){if(!n){const n=(0,c.ly)((0,a.tP)(e,r,r+32,{strict:!0})),s=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0}));let i=0;const o=[];for(let r=0;r<s;++r){const r=h({data:(0,a.tP)(e,n+32),param:t,position:i});i+=r.consumed,o.push(r.value)}return{value:o,consumed:32}}if(d(t)){const s=(0,l.S)(t.type),i=!s?.[0];let o=0;const u=[];for(let s=0;s<n;++s){const n=(0,c.ly)((0,a.tP)(e,r,r+32,{strict:!0})),l=h({data:(0,a.tP)(e,n),param:t,position:i?o:32*s});o+=l.consumed,u.push(l.value)}return{value:u,consumed:32}}let s=0;const i=[];for(let a=0;a<n;++a){const n=h({data:e,param:t,position:r+s});s+=n.consumed,i.push(n.value)}return{value:i,consumed:s}}(e,{length:r,param:{...t,type:s},position:n})}if("tuple"===t.type)return function(e,{param:t,position:n}){const r=0===t.components.length||t.components.some((({name:e})=>!e)),s=r?[]:{};let i=0;if(d(t)){const o=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0}));for(let n=0;n<t.components.length;++n){const c=t.components[n],l=h({data:(0,a.tP)(e,o),param:c,position:i});i+=l.consumed,s[r?n:c?.name]=l.value}return{consumed:32,value:s}}for(let a=0;a<t.components.length;++a){const o=t.components[a],c=h({data:e,param:o,position:n+i});i+=c.consumed,s[r?a:o?.name]=c.value}return{consumed:i,value:s}}(e,{param:t,position:n});if("string"===t.type)return function(e,{position:t}){const n=(0,c.ly)((0,a.tP)(e,t,t+32,{strict:!0})),r=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0}));if(0===r)return{consumed:32,value:""};const s=(0,c.rR)((0,o.f)((0,a.tP)(e,n+32,n+32+r,{strict:!0})));return{consumed:32,value:s}}(e,{position:n});if(t.type.startsWith("bytes"))return function(e,{param:t,position:n}){const[r,s]=t.type.split("bytes");if(!s){const t=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0})),r=(0,c.ly)((0,a.tP)(e,t,t+32,{strict:!0}));if(0===r)return{consumed:32,value:"0x"};return{consumed:32,value:(0,a.tP)(e,t+32,t+32+r,{strict:!0})}}const i=(0,a.tP)(e,n,n+parseInt(s),{strict:!0});return{consumed:32,value:i}}(e,{param:t,position:n});const u=(0,a.tP)(e,n,n+32,{strict:!0});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,{param:t}){const n=t.type.startsWith("int"),r=parseInt(t.type.split("int")[1]||"256");return{consumed:32,value:r>48?(0,c.y_)(e,{signed:n}):(0,c.ly)(e,{signed:n})}}(u,{param:t});if("address"===t.type)return function(e){return{consumed:32,value:(0,s.x)((0,a.tP)(e,-20))}}(u);if("bool"===t.type)return function(e){return{consumed:32,value:(0,c.XA)(e)}}(u);throw new r.CI(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function d(e){const{type:t}=e;if("string"===t)return!0;if("bytes"===t)return!0;if(t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(d);const n=(0,l.S)(e.type);return!(!n||!d({...e,type:n[1]}))}},6899:(e,t,n)=>{"use strict";n.d(t,{p:()=>l});var r=n(1746),s=n(7412),i=n(3972),a=n(552),o=n(4450),c=n(522);function l({abi:e,data:t}){const n=(0,i.tP)(t,0,4);if("0x"===n)throw new s.wb;const l=[...e||[],r.Up,r.hZ].find((e=>"error"===e.type&&n===(0,a.o)((0,c.t)(e))));if(!l)throw new s.yP(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:l,args:"inputs"in l&&l.inputs&&l.inputs.length>0?(0,o.r)(l.inputs,(0,i.tP)(t,4)):void 0,errorName:l.name}}},7210:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var r=n(7412),s=n(4450),i=n(840);const a="/docs/contract/decodeFunctionResult";function o({abi:e,args:t,functionName:n,data:o}){let c=e[0];if(n&&(c=(0,i.m)({abi:e,args:t,name:n}),!c))throw new r.xL(n,{docsPath:a});if("function"!==c.type)throw new r.xL(void 0,{docsPath:a});if(!c.outputs)throw new r.MX(c.name,{docsPath:a});const l=(0,s.r)(c.outputs,o);return l&&l.length>1?l:l&&1===l.length?l[0]:void 0}},5444:(e,t,n)=>{"use strict";n.d(t,{E:()=>h,S:()=>p});var r=n(7412),s=n(6087),i=n(9321),a=n(7040),o=n(1769),c=n(9135),l=n(3972),u=n(2106);function h(e,t){if(e.length!==t.length)throw new r.fs({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(d({param:e[r],value:t[r]}));return n}({params:e,values:t}),s=f(n);return 0===s.length?"0x":s}function d({param:e,value:t}){const n=p(e.type);if(n){const[s,i]=n;return function(e,{length:t,param:n}){const s=null===t;if(!Array.isArray(e))throw new r.hn(e);if(!s&&e.length!==t)throw new r.gr({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let i=!1;const o=[];for(let t=0;t<e.length;t++){const r=d({param:n,value:e[t]});r.dynamic&&(i=!0),o.push(r)}if(s||i){const e=f(o);if(s){const t=(0,u.eC)(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?(0,a.zo)([t,e]):t}}if(i)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:(0,a.zo)(o.map((({encoded:e})=>e)))}}(t,{length:s,param:{...e,type:i}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],a=d({param:i,value:e[Array.isArray(e)?s:i.name]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?f(r):(0,a.zo)(r.map((({encoded:e})=>e)))}}(t,{param:e});if("address"===e.type)return function(e){if(!(0,i.U)(e))throw new s.b({address:e});return{dynamic:!1,encoded:(0,o.gc)(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){return{dynamic:!1,encoded:(0,o.gc)((0,u.C4)(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){return function(e,{signed:t}){return{dynamic:!1,encoded:(0,u.eC)(e,{size:32,signed:t})}}(t,{signed:e.type.startsWith("int")})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),s=(0,c.d)(e);if(!n){let t=e;return s%32!=0&&(t=(0,o.gc)(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:(0,a.zo)([(0,o.gc)((0,u.eC)(s,{size:32})),t])}}if(s!==parseInt(n))throw new r.M4({expectedSize:parseInt(n),value:e});return{dynamic:!1,encoded:(0,o.gc)(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=(0,u.$G)(e),n=Math.ceil((0,c.d)(t)/32),r=[];for(let e=0;e<n;e++)r.push((0,o.gc)((0,l.tP)(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:(0,a.zo)([(0,o.gc)((0,u.eC)((0,c.d)(t),{size:32})),...r])}}(t);throw new r.dh(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function f(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:r,encoded:s}=e[n];t+=r?32:(0,c.d)(s)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push((0,u.eC)(t+s,{size:32})),r.push(o),s+=(0,c.d)(o)):n.push(o)}return(0,a.zo)([...n,...r])}function p(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}},7799:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var r=n(7412),s=n(7040),i=n(552),a=n(5444),o=n(522),c=n(840);function l({abi:e,args:t,functionName:n}){let l=e[0];if(n&&(l=(0,c.m)({abi:e,args:t,name:n}),!l))throw new r.xL(n,{docsPath:"/docs/contract/encodeFunctionData"});if("function"!==l.type)throw new r.xL(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const u=(0,o.t)(l),h=(0,i.o)(u),d="inputs"in l&&l.inputs?(0,a.E)(l.inputs,t??[]):void 0;return(0,s.SM)([h,d??"0x"])}},522:(e,t,n)=>{"use strict";n.d(t,{h:()=>i,t:()=>s});var r=n(7412);function s(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new r.wM(e.type);return`${e.name}(${i(e.inputs,{includeName:t})})`}function i(e,{includeName:t=!1}={}){return e?e.map((e=>function(e,{includeName:t}){if(e.type.startsWith("tuple"))return`(${i(e.components,{includeName:t})})${e.type.slice(5)}`;return e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}},840:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(5102),s=n(4092),i=n(552),a=n(9321);function o({abi:e,args:t=[],name:n}){const a=(0,r.v)(n,{strict:!1}),o=e.filter((e=>a?"function"===e.type?(0,i.o)(e)===n:"event"===e.type&&(0,s.e)(e)===n:"name"in e&&e.name===n));if(0!==o.length){if(1===o.length)return o[0];for(const e of o){if(!("inputs"in e))continue;if(!t||0===t.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==t.length)continue;if(t.every(((t,n)=>{const r="inputs"in e&&e.inputs[n];return!!r&&c(t,r)})))return e}return o[0]}}function c(e,t){const n=typeof e,r=t.type;switch(r){case"address":return(0,a.U)(e);case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===r&&"components"in t?Object.values(t.components).every(((t,n)=>c(Object.values(e)[n],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)&&(Array.isArray(e)&&e.every((e=>c(e,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")}))))}}},5775:(e,t,n)=>{"use strict";n.d(t,{K:()=>c,x:()=>o});var r=n(6087),s=n(1187),i=n(4813),a=n(9321);function o(e,t){const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),r=(0,i.w)((0,s.qX)(n),"bytes"),a=(t?n.substring(`${t}0x`.length):n).split("");for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&a[e]&&(a[e]=a[e].toUpperCase()),(15&r[e>>1])>=8&&a[e+1]&&(a[e+1]=a[e+1].toUpperCase());return`0x${a.join("")}`}function c(e,t){if(!(0,a.U)(e))throw new r.b({address:e});return o(e,t)}},9321:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});const r=/^0x[a-fA-F0-9]{40}$/;function s(e){return r.test(e)}},2676:(e,t,n)=>{"use strict";n.d(t,{LI:()=>a,ax:()=>i,qg:()=>s});var r=n(377);function s({chain:e,currentChainId:t}){if(!e)throw new r.Bk;if(t!==e.id)throw new r.Yl({chain:e,currentChainId:t})}function i(e,t={}){const{fees:n=e.fees,formatters:r=e.formatters,serializers:s=e.serializers}=t;return{...e,fees:n,formatters:r,serializers:s}}function a({blockNumber:e,chain:t,contract:n}){const s=t?.contracts?.[n];if(!s)throw new r.mm({chain:t,contract:{name:n}});if(e&&s.blockCreated&&s.blockCreated>e)throw new r.mm({blockNumber:e,chain:t,contract:{name:n,blockCreated:s.blockCreated}});return s.address}},7040:(e,t,n)=>{"use strict";function r(e){return"string"==typeof e[0]?s(e):function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(e)}function s(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}n.d(t,{SM:()=>s,zo:()=>r})},5102:(e,t,n)=>{"use strict";function r(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}n.d(t,{v:()=>r})},1769:(e,t,n)=>{"use strict";n.d(t,{gc:()=>i,vk:()=>s});var r=n(9760);function s(e,{dir:t,size:n=32}={}){return"string"==typeof e?i(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new r.$({size:e.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let r=0;r<n;r++){const i="right"===t;s[i?r:n-r-1]=e[i?r:e.length-r-1]}return s}(e,{dir:t,size:n})}function i(e,{dir:t,size:n=32}={}){if(null===n)return e;const s=e.replace("0x","");if(s.length>2*n)throw new r.$({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s["right"===t?"padEnd":"padStart"](2*n,"0")}`}},9135:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var r=n(5102);function s(e){return(0,r.v)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},3972:(e,t,n)=>{"use strict";n.d(t,{tP:()=>a});var r=n(9760),s=n(5102),i=n(9135);function a(e,t,n,{strict:r}={}){return(0,s.v)(e,{strict:!1})?function(e,t,n,{strict:r}={}){o(e,t);const s=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;r&&c(s,t,n);return s}(e,t,n,{strict:r}):function(e,t,n,{strict:r}={}){o(e,t);const s=e.slice(t,n);r&&c(s,t,n);return s}(e,t,n,{strict:r})}function o(e,t){if("number"==typeof t&&t>0&&t>(0,i.d)(e)-1)throw new r.m({offset:t,position:"start",size:(0,i.d)(e)})}function c(e,t,n){if("number"==typeof t&&"number"==typeof n&&(0,i.d)(e)!==n-t)throw new r.m({offset:n,position:"end",size:(0,i.d)(e)})}},1836:(e,t,n)=>{"use strict";function r(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,r=0;for(let e=0;e<n.length-1&&"0"===n["left"===t?e:n.length-e-1].toString();e++)r++;return n="left"===t?n.slice(r):n.slice(0,n.length-r),"string"==typeof e?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}n.d(t,{f:()=>r})},5946:(e,t,n)=>{"use strict";n.d(t,{XA:()=>l,Yf:()=>o,ly:()=>u,rR:()=>h,y_:()=>c});var r=n(7788),s=n(9135),i=n(1836),a=n(1187);function o(e,{size:t}){if((0,s.d)(e)>t)throw new r.M6({givenSize:(0,s.d)(e),maxSize:t})}function c(e,t={}){const{signed:n}=t;t.size&&o(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2;return r<=(1n<<8n*BigInt(s)-1n)-1n?r:r-BigInt(`0x${"f".padStart(2*s,"f")}`)-1n}function l(e,t={}){let n=e;if(t.size&&(o(n,{size:t.size}),n=(0,i.f)(n)),"0x00"===(0,i.f)(n))return!1;if("0x01"===(0,i.f)(n))return!0;throw new r.Cd(n)}function u(e,t={}){return Number(c(e,t))}function h(e,t={}){let n=(0,a.nr)(e);return t.size&&(o(n,{size:t.size}),n=(0,i.f)(n,{dir:"right"})),(new TextDecoder).decode(n)}},1187:(e,t,n)=>{"use strict";n.d(t,{O0:()=>l,nr:()=>d,qX:()=>f});var r=n(2027),s=n(5102),i=n(1769),a=n(5946),o=n(2106);const c=new TextEncoder;function l(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const n=(0,o.eC)(e,t);return d(n)}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);if(n[0]=Number(e),"number"==typeof t.size)return(0,a.Yf)(n,{size:t.size}),(0,i.vk)(n,{size:t.size});return n}(e,t):(0,s.v)(e)?d(e,t):f(e,t)}const u={zero:48,nine:57,A:65,F:70,a:97,f:102};function h(e){return e>=u.zero&&e<=u.nine?e-u.zero:e>=u.A&&e<=u.F?e-(u.A-10):e>=u.a&&e<=u.f?e-(u.a-10):void 0}function d(e,t={}){let n=e;t.size&&((0,a.Yf)(n,{size:t.size}),n=(0,i.vk)(n,{dir:"right",size:t.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const o=s.length/2,c=new Uint8Array(o);for(let e=0,t=0;e<o;e++){const n=h(s.charCodeAt(t++)),i=h(s.charCodeAt(t++));if(void 0===n||void 0===i)throw new r.G(`Invalid byte sequence ("${s[t-2]}${s[t-1]}" in "${s}").`);c[e]=16*n+i}return c}function f(e,t={}){const n=c.encode(e);return"number"==typeof t.size?((0,a.Yf)(n,{size:t.size}),(0,i.vk)(n,{dir:"right",size:t.size})):n}},2106:(e,t,n)=>{"use strict";n.d(t,{$G:()=>d,C4:()=>c,NC:()=>o,ci:()=>l,eC:()=>u});var r=n(7788),s=n(1769),i=n(5946);const a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function o(e,t={}){return"number"==typeof e||"bigint"==typeof e?u(e,t):"string"==typeof e?d(e,t):"boolean"==typeof e?c(e,t):l(e,t)}function c(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?((0,i.Yf)(n,{size:t.size}),(0,s.vk)(n,{size:t.size})):n}function l(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=a[e[t]];const r=`0x${n}`;return"number"==typeof t.size?((0,i.Yf)(r,{size:t.size}),(0,s.vk)(r,{dir:"right",size:t.size})):r}function u(e,t={}){const{signed:n,size:i}=t,a=BigInt(e);let o;i?o=n?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(o=BigInt(Number.MAX_SAFE_INTEGER));const c="bigint"==typeof o&&n?-o-1n:0;if(o&&a>o||a<c){const t="bigint"==typeof e?"n":"";throw new r.J5({max:o?`${o}${t}`:void 0,min:`${c}${t}`,signed:n,size:i,value:`${e}${t}`})}const l=`0x${(n&&a<0?(1n<<BigInt(8*i))+BigInt(a):a).toString(16)}`;return i?(0,s.vk)(l,{size:i}):l}const h=new TextEncoder;function d(e,t={}){return l(h.encode(e),t)}},7469:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(2027),s=n(6445);function i(e,t){const n=(e.details||"").toLowerCase(),i=e.walk((e=>e.code===s.M_.code));return i instanceof r.G?new s.M_({cause:e,message:i.details}):s.M_.nodeMessage.test(n)?new s.M_({cause:e,message:e.details}):s.Hh.nodeMessage.test(n)?new s.Hh({cause:e,maxFeePerGas:t?.maxFeePerGas}):s.G$.nodeMessage.test(n)?new s.G$({cause:e,maxFeePerGas:t?.maxFeePerGas}):s.ZI.nodeMessage.test(n)?new s.ZI({cause:e,nonce:t?.nonce}):s.vU.nodeMessage.test(n)?new s.vU({cause:e,nonce:t?.nonce}):s.se.nodeMessage.test(n)?new s.se({cause:e,nonce:t?.nonce}):s.C_.nodeMessage.test(n)?new s.C_({cause:e}):s.WF.nodeMessage.test(n)?new s.WF({cause:e,gas:t?.gas}):s.dR.nodeMessage.test(n)?new s.dR({cause:e,gas:t?.gas}):s.pZ.nodeMessage.test(n)?new s.pZ({cause:e}):s.cs.nodeMessage.test(n)?new s.cs({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new s.cj({cause:e})}},1163:(e,t,n)=>{"use strict";function r(e,{format:t}){if(!t)return{};return Object.keys(t({})).reduce(((t,n)=>(e?.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}n.d(t,{K:()=>r})},4688:(e,t,n)=>{"use strict";n.d(t,{tG:()=>i});var r=n(2106);const s={legacy:"0x0",eip2930:"0x1",eip1559:"0x2"};function i(e){return{...e,gas:void 0!==e.gas?(0,r.eC)(e.gas):void 0,gasPrice:void 0!==e.gasPrice?(0,r.eC)(e.gasPrice):void 0,maxFeePerGas:void 0!==e.maxFeePerGas?(0,r.eC)(e.maxFeePerGas):void 0,maxPriorityFeePerGas:void 0!==e.maxPriorityFeePerGas?(0,r.eC)(e.maxPriorityFeePerGas):void 0,nonce:void 0!==e.nonce?(0,r.eC)(e.nonce):void 0,type:void 0!==e.type?s[e.type]:void 0,value:void 0!==e.value?(0,r.eC)(e.value):void 0}}},4092:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var r=n(1187),s=n(4154);var i=n(4813);const a=e=>{return t=(e=>(0,s.r)(e))(e),(0,i.w)((0,r.O0)(t));var t}},552:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});var r=n(3972),s=n(1187),i=n(4154),a=n(4813);const o=e=>{return(0,r.tP)((t=(0,i.r)(e),(0,a.w)((0,s.O0)(t))),0,4);var t}},4154:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var r=n(522);const s=/((function|event)\s)?(.*)(\((.*)\))/;function i(e){const t=e.match(s),n=t?.[2]||void 0,r=t?.[3];return{type:n,name:r,params:t?.[5]||void 0}}const a=e=>{if("string"==typeof e){const t=i(e).name,n=function(e){const t=i(e).params,n=t?.split(",").map((e=>e.trim().split(" ")));return n?.map((e=>({type:e[0],name:"indexed"===e[1]?e[2]:e[1],..."indexed"===e[1]?{indexed:!0}:{}})))}(e)||[];return`${t}(${n.map((({type:e})=>e)).join(",")})`}return(0,r.t)(e)}},4813:(e,t,n)=>{"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){s(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}n.d(t,{w:()=>B});const o=BigInt(2**32-1),c=BigInt(32);function l(e,t=!1){return t?{h:Number(e&o),l:Number(e>>c&o)}:{h:0|Number(e>>c&o),l:0|Number(e&o)}}function u(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:a}=l(e[s],t);[n[s],r[s]]=[i,a]}return[n,r]}const h=(e,t,n)=>e<<n|t>>>32-n,d=(e,t,n)=>t<<n|e>>>32-n,f=(e,t,n)=>t<<n-32|e>>>64-n,p=(e,t,n)=>e<<n-32|t>>>64-n;const g=e=>e instanceof Uint8Array;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function m(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!g(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class y{clone(){return this._cloneInto()}}const[b,w,v]=[[],[],[]],A=BigInt(0),E=BigInt(1),k=BigInt(2),_=BigInt(7),x=BigInt(256),P=BigInt(113);for(let e=0,t=E,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],b.push(2*(5*r+n)),w.push((e+1)*(e+2)/2%64);let s=A;for(let e=0;e<7;e++)t=(t<<E^(t>>_)*P)%x,t&k&&(s^=E<<(E<<BigInt(e))-E);v.push(s)}const[C,S]=u(v,!0),I=(e,t,n)=>n>32?f(e,t,n):h(e,t,n),O=(e,t,n)=>n>32?p(e,t,n):d(e,t,n);class T extends y{constructor(e,t,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,r(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,s=(t+2)%10,i=n[s],a=n[s+1],o=I(i,a,1)^n[r],c=O(i,a,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=w[n],i=I(t,s,r),a=O(t,s,r),o=b[n];t=e[o],s=e[o+1],e[o]=i,e[o+1]=a}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=C[r],e[1]^=S[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){i(this);const{blockLen:t,state:n}=this,r=(e=m(e)).length;for(let s=0;s<r;){const i=Math.min(t-this.pos,r-s);for(let t=0;t<i;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,0!=(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){i(this,!1),s(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return r(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(a(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return e||(e=new T(t,n,r,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}const N=(e,t,n)=>function(e){const t=t=>e().update(m(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}((()=>new T(t,e,n))),j=N(1,136,32);var U=n(5102),L=n(1187),R=n(2106);function B(e,t){const n=t||"hex",r=j((0,U.v)(e,{strict:!1})?(0,L.O0)(e):e);return"bytes"===n?r:(0,R.NC)(r)}},2357:(e,t,n)=>{"use strict";n.d(t,{S:()=>s});const r=new Map;function s({fn:e,id:t,shouldSplitBatch:n,wait:s=0}){const i=async()=>{const t=o();a();const n=t.map((({args:e})=>e));0!==n.length&&e(n).then((e=>{t.forEach((({pendingPromise:t},n)=>t.resolve?.([e[n],e])))})).catch((e=>{t.forEach((({pendingPromise:t})=>t.reject?.(e)))}))},a=()=>r.delete(t),o=()=>r.get(t)||[],c=e=>r.set(t,[...o(),e]);return{flush:a,async schedule(e){const t={},r=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),a=n?.([...o().map((({args:e})=>e)),e]);a&&i();return o().length>0?(c({args:e,pendingPromise:t}),r):(c({args:e,pendingPromise:t}),setTimeout(i,s),r)}}}},6070:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});const r=(e,t,n)=>JSON.stringify(e,((e,n)=>{const r="bigint"==typeof n?n.toString():n;return"function"==typeof t?t(e,r):r}),n)},7531:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});var r=n(4503),s=n(6087),i=n(6445),a=n(3639),o=n(9321);function c(e){const{account:t,gasPrice:n,maxFeePerGas:c,maxPriorityFeePerGas:l,to:u}=e,h=t?(0,r.T)(t):void 0;if(h&&!(0,o.U)(h.address))throw new s.b({address:h.address});if(u&&!(0,o.U)(u))throw new s.b({address:u});if(void 0!==n&&(void 0!==c||void 0!==l))throw new a.xY;if(c&&c>2n**256n-1n)throw new i.Hh({maxFeePerGas:c});if(l&&c&&l>c)throw new i.cs({maxFeePerGas:c,maxPriorityFeePerGas:l})}},9625:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(4192),s=n(5229);function i(e,t="wei"){return(0,s.b)(e,r.ez[t])}},7795:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var r=n(4192),s=n(5229);function i(e,t="wei"){return(0,s.b)(e,r.Zn[t])}},5229:(e,t,n)=>{"use strict";function r(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,i]=[n.slice(0,n.length-t),n.slice(n.length-t)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}n.d(t,{b:()=>r})},9050:e=>{"use strict";e.exports={version:"1.0.34"}}},c={};function l(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=o,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(s,i,a)=>{var o;a&&((o=[]).d=-1);var c,l,u,h=new Set,d=s.exports,f=new Promise(((e,t)=>{u=t,l=e}));f[t]=d,f[e]=e=>(o&&e(o),h.forEach(e),f.catch((e=>{}))),s.exports=f,i((s=>{var i;c=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var i=[];i.d=0,s.then((e=>{a[t]=e,r(i)}),(e=>{a[n]=e,r(i)}));var a={};return a[e]=e=>e(i),a}}var o={};return o[e]=e=>{},o[t]=s,o})))(s);var a=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(i=()=>t(a)).r=0;var n=e=>e!==o&&!h.has(e)&&(h.add(e),e&&!e.d&&(i.r++,e.push(i)));c.map((t=>t[e](n)))}));return i.r?l:a()}),(e=>(e?u(f[n]=e):l(d),r(o)))),o&&o.d<0&&(o.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var r={};s=s||[null,i({}),i([]),i(i)];for(var a=2&t&&e;"object"==typeof a&&!~s.indexOf(a);a=i(a))Object.getOwnPropertyNames(a).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,l.d(n,r),n},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".js",l.miniCssF=e=>{},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},l.l=(e,t,n,r)=>{if(a[e])a[e].push(t);else{var s,i;if(void 0!==n)for(var o=document.getElementsByTagName("script"),c=0;c<o.length;c++){var u=o[c];if(u.getAttribute("src")==e){s=u;break}}s||(i=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=e),a[e]=[t];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(d);var r=a[e];if(delete a[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),i&&document.head.appendChild(s)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={296:0};l.f.j=(t,n)=>{var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var s=new Promise(((n,s)=>r=e[t]=[n,s]));n.push(r[2]=s);var i=l.p+l.u(t),a=new Error;l.l(i,(n=>{if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",a.name="ChunkLoadError",a.type=s,a.request=i,r[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,s,[i,a,o]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in a)l.o(a,r)&&(l.m[r]=a[r]);if(o)o(l)}for(t&&t(n);c<i.length;c++)s=i[c],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();l(1831)})();