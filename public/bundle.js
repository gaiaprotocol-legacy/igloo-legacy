(()=>{var e,t,n,s,r,i,a,o={3975:(e,t,n)=>{"use strict";var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();e.exports=t=s.fetch,s.fetch&&(t.default=s.fetch.bind(s)),t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response},6687:e=>{var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},1074:e=>{var t=function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};t.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},t.prototype.init_by_array=function(e,t){var n,s,r;for(this.init_seed(19650218),n=1,s=0,r=this.N>t?this.N:t;r;r--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[s]+s,this.mt[n]>>>=0,s++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),s>=t&&(s=0)}for(r=this.N-1;r;r--){i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},t.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},t.prototype.random_int31=function(){return this.random_int()>>>1},t.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},t.prototype.random=function(){return this.random_int()*(1/4294967296)},t.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},t.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},e.exports=t},47:(e,t,n)=>{var s;if("object"==typeof globalThis)s=globalThis;else try{s=n(6687)}catch(e){}finally{if(s||"undefined"==typeof window||(s=window),!s)throw new Error("Could not determine global this")}var r=s.WebSocket||s.MozWebSocket,i=n(9763);function a(e,t){return t?new r(e,t):new r(e)}r&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(a,e,{get:function(){return r[e]}})})),e.exports={w3cwebsocket:r?a:null,version:i}},9763:(e,t,n)=>{e.exports=n(2284).version},8099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(7117);function r(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function i(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function a(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function o(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function l(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function u(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function h(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function d(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),u(e/4294967296>>>0,t,n),u(e>>>0,t,n+4),t}function f(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),h(e>>>0,t,n),h(e/4294967296>>>0,t,n+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=r,t.writeInt16BE=r,t.writeUint16LE=i,t.writeInt16LE=i,t.readInt32BE=a,t.readUint32BE=o,t.readInt32LE=c,t.readUint32LE=l,t.writeUint32BE=u,t.writeInt32BE=u,t.writeUint32LE=h,t.writeInt32LE=h,t.readInt64BE=function(e,t){void 0===t&&(t=0);var n=a(e,t),s=a(e,t+4);return 4294967296*n+s-4294967296*(s>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*o(e,t)+o(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var n=c(e,t);return 4294967296*c(e,t+4)+n-4294967296*(n>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var n=l(e,t);return 4294967296*l(e,t+4)+n},t.writeUint64BE=d,t.writeInt64BE=d,t.writeUint64LE=f,t.writeInt64LE=f,t.readUintBE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,r=1,i=e/8+n-1;i>=n;i--)s+=t[i]*r,r*=256;return s},t.readUintLE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,r=1,i=n;i<n+e/8;i++)s+=t[i]*r,r*=256;return s},t.writeUintBE=function(e,t,n,r){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===r&&(r=0),e%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!s.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,a=e/8+r-1;a>=r;a--)n[a]=t/i&255,i*=256;return n},t.writeUintLE=function(e,t,n,r){if(void 0===n&&(n=new Uint8Array(e/8)),void 0===r&&(r=0),e%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!s.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,a=r;a<r+e/8;a++)n[a]=t/i&255,i*=256;return n},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e),t},t.writeFloat32LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),t},t.writeFloat64BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e),t},t.writeFloat64LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),t}},5439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(8099),r=n(7309),i=20;function a(e,t,n){for(var r=1634760805,a=857760878,o=2036477234,c=1797285236,l=n[3]<<24|n[2]<<16|n[1]<<8|n[0],u=n[7]<<24|n[6]<<16|n[5]<<8|n[4],h=n[11]<<24|n[10]<<16|n[9]<<8|n[8],d=n[15]<<24|n[14]<<16|n[13]<<8|n[12],f=n[19]<<24|n[18]<<16|n[17]<<8|n[16],p=n[23]<<24|n[22]<<16|n[21]<<8|n[20],g=n[27]<<24|n[26]<<16|n[25]<<8|n[24],m=n[31]<<24|n[30]<<16|n[29]<<8|n[28],y=t[3]<<24|t[2]<<16|t[1]<<8|t[0],b=t[7]<<24|t[6]<<16|t[5]<<8|t[4],w=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],A=r,E=a,k=o,_=c,P=l,C=u,x=h,S=d,I=f,T=p,O=g,N=m,j=y,U=b,L=w,B=v,R=0;R<i;R+=2)P=(P^=I=I+(j=(j^=A=A+P|0)>>>16|j<<16)|0)>>>20|P<<12,C=(C^=T=T+(U=(U^=E=E+C|0)>>>16|U<<16)|0)>>>20|C<<12,x=(x^=O=O+(L=(L^=k=k+x|0)>>>16|L<<16)|0)>>>20|x<<12,S=(S^=N=N+(B=(B^=_=_+S|0)>>>16|B<<16)|0)>>>20|S<<12,x=(x^=O=O+(L=(L^=k=k+x|0)>>>24|L<<8)|0)>>>25|x<<7,S=(S^=N=N+(B=(B^=_=_+S|0)>>>24|B<<8)|0)>>>25|S<<7,C=(C^=T=T+(U=(U^=E=E+C|0)>>>24|U<<8)|0)>>>25|C<<7,P=(P^=I=I+(j=(j^=A=A+P|0)>>>24|j<<8)|0)>>>25|P<<7,C=(C^=O=O+(B=(B^=A=A+C|0)>>>16|B<<16)|0)>>>20|C<<12,x=(x^=N=N+(j=(j^=E=E+x|0)>>>16|j<<16)|0)>>>20|x<<12,S=(S^=I=I+(U=(U^=k=k+S|0)>>>16|U<<16)|0)>>>20|S<<12,P=(P^=T=T+(L=(L^=_=_+P|0)>>>16|L<<16)|0)>>>20|P<<12,S=(S^=I=I+(U=(U^=k=k+S|0)>>>24|U<<8)|0)>>>25|S<<7,P=(P^=T=T+(L=(L^=_=_+P|0)>>>24|L<<8)|0)>>>25|P<<7,x=(x^=N=N+(j=(j^=E=E+x|0)>>>24|j<<8)|0)>>>25|x<<7,C=(C^=O=O+(B=(B^=A=A+C|0)>>>24|B<<8)|0)>>>25|C<<7;s.writeUint32LE(A+r|0,e,0),s.writeUint32LE(E+a|0,e,4),s.writeUint32LE(k+o|0,e,8),s.writeUint32LE(_+c|0,e,12),s.writeUint32LE(P+l|0,e,16),s.writeUint32LE(C+u|0,e,20),s.writeUint32LE(x+h|0,e,24),s.writeUint32LE(S+d|0,e,28),s.writeUint32LE(I+f|0,e,32),s.writeUint32LE(T+p|0,e,36),s.writeUint32LE(O+g|0,e,40),s.writeUint32LE(N+m|0,e,44),s.writeUint32LE(j+y|0,e,48),s.writeUint32LE(U+b|0,e,52),s.writeUint32LE(L+w|0,e,56),s.writeUint32LE(B+v|0,e,60)}function o(e,t,n,s,i){if(void 0===i&&(i=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<n.length)throw new Error("ChaCha: destination is shorter than source");var o,l;if(0===i){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=(o=new Uint8Array(16)).length-t.length,o.set(t,l)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");o=t,l=i}for(var u=new Uint8Array(64),h=0;h<n.length;h+=64){a(u,o,e);for(var d=h;d<h+64&&d<n.length;d++)s[d]=n[d]^u[d-h];c(o,0,l)}return r.wipe(u),0===i&&r.wipe(o),s}function c(e,t,n){for(var s=1;n--;)s=s+(255&e[t])|0,e[t]=255&s,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=o,t.stream=function(e,t,n,s){return void 0===s&&(s=0),r.wipe(n),o(e,t,n,n,s)}},5501:(e,t,n)=>{"use strict";var s=n(5439),r=n(3027),i=n(7309),a=n(8099),o=n(4153);t.Cv=32,t.WH=12,t.pg=16;var c=new Uint8Array(16),l=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,n,r){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var a=new Uint8Array(16);a.set(e,a.length-e.length);var o=new Uint8Array(32);s.stream(this._key,a,o,4);var c,l=t.length+this.tagLength;if(r){if(r.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");c=r}else c=new Uint8Array(l);return s.streamXOR(this._key,a,t,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),o,c.subarray(0,c.length-this.tagLength),n),i.wipe(a),c},e.prototype.open=function(e,t,n,r){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var a=new Uint8Array(16);a.set(e,a.length-e.length);var c=new Uint8Array(32);s.stream(this._key,a,c,4);var l=new Uint8Array(this.tagLength);if(this._authenticate(l,c,t.subarray(0,t.length-this.tagLength),n),!o.equal(l,t.subarray(t.length-this.tagLength,t.length)))return null;var u,h=t.length-this.tagLength;if(r){if(r.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");u=r}else u=new Uint8Array(h);return s.streamXOR(this._key,a,t.subarray(0,t.length-this.tagLength),u,4),i.wipe(a),u},e.prototype.clean=function(){return i.wipe(this._key),this},e.prototype._authenticate=function(e,t,n,s){var o=new r.Poly1305(t);s&&(o.update(s),s.length%16>0&&o.update(c.subarray(s.length%16))),o.update(n),n.length%16>0&&o.update(c.subarray(n.length%16));var l=new Uint8Array(8);s&&a.writeUint64LE(s.length,l),o.update(l),a.writeUint64LE(n.length,l),o.update(l);for(var u=o.digest(),h=0;h<u.length;h++)e[h]=u[h];o.clean(),i.wipe(u),i.wipe(l)},e}();t.OK=l},4153:(e,t)=>{"use strict";function n(e,t){if(e.length!==t.length)return 0;for(var n=0,s=0;s<e.length;s++)n|=e[s]^t[s];return 1&n-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,n){return~(e-1)&t|e-1&n},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=n,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==n(e,t)}},9984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState}},512:(e,t,n)=>{"use strict";var s=n(5629),r=n(7309),i=function(){function e(e,t,n,r){void 0===n&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=r;var i=s.hmac(this._hash,n,t);this._hmac=new s.HMAC(e,i),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),r.wipe(this._buffer),r.wipe(this._counter),this._bufpos=0},e}();t.t=i},5629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(9984),r=n(4153),i=n(7309),a=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var r=0;r<n.length;r++)n[r]^=54;this._inner.update(n);for(r=0;r<n.length;r++)n[r]^=106;this._outer.update(n),s.isSerializableHash(this._inner)&&s.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),i.wipe(n)}return e.prototype.reset=function(){if(!s.isSerializableHash(this._inner)||!s.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){s.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),s.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!s.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!s.isSerializableHash(this._inner)||!s.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!s.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=a,t.hmac=function(e,t,n){var s=new a(e,t);s.update(n);var r=s.digest();return s.clean(),r},t.equal=r.equal},7117:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var n=65535&e,s=65535&t;return n*s+((e>>>16&65535)*s+n*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},3027:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(4153),r=n(7309);t.DIGEST_LENGTH=16;var i=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var n=e[0]|e[1]<<8;this._r[0]=8191&n;var s=e[2]|e[3]<<8;this._r[1]=8191&(n>>>13|s<<3);var r=e[4]|e[5]<<8;this._r[2]=7939&(s>>>10|r<<6);var i=e[6]|e[7]<<8;this._r[3]=8191&(r>>>7|i<<9);var a=e[8]|e[9]<<8;this._r[4]=255&(i>>>4|a<<12),this._r[5]=a>>>1&8190;var o=e[10]|e[11]<<8;this._r[6]=8191&(a>>>14|o<<2);var c=e[12]|e[13]<<8;this._r[7]=8065&(o>>>11|c<<5);var l=e[14]|e[15]<<8;this._r[8]=8191&(c>>>8|l<<8),this._r[9]=l>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,n){for(var s=this._fin?0:2048,r=this._h[0],i=this._h[1],a=this._h[2],o=this._h[3],c=this._h[4],l=this._h[5],u=this._h[6],h=this._h[7],d=this._h[8],f=this._h[9],p=this._r[0],g=this._r[1],m=this._r[2],y=this._r[3],b=this._r[4],w=this._r[5],v=this._r[6],A=this._r[7],E=this._r[8],k=this._r[9];n>=16;){var _=e[t+0]|e[t+1]<<8;r+=8191&_;var P=e[t+2]|e[t+3]<<8;i+=8191&(_>>>13|P<<3);var C=e[t+4]|e[t+5]<<8;a+=8191&(P>>>10|C<<6);var x=e[t+6]|e[t+7]<<8;o+=8191&(C>>>7|x<<9);var S=e[t+8]|e[t+9]<<8;c+=8191&(x>>>4|S<<12),l+=S>>>1&8191;var I=e[t+10]|e[t+11]<<8;u+=8191&(S>>>14|I<<2);var T=e[t+12]|e[t+13]<<8;h+=8191&(I>>>11|T<<5);var O=e[t+14]|e[t+15]<<8,N=0,j=N;j+=r*p,j+=i*(5*k),j+=a*(5*E),j+=o*(5*A),N=(j+=c*(5*v))>>>13,j&=8191,j+=l*(5*w),j+=u*(5*b),j+=h*(5*y),j+=(d+=8191&(T>>>8|O<<8))*(5*m);var U=N+=(j+=(f+=O>>>5|s)*(5*g))>>>13;U+=r*g,U+=i*p,U+=a*(5*k),U+=o*(5*E),N=(U+=c*(5*A))>>>13,U&=8191,U+=l*(5*v),U+=u*(5*w),U+=h*(5*b),U+=d*(5*y),N+=(U+=f*(5*m))>>>13,U&=8191;var L=N;L+=r*m,L+=i*g,L+=a*p,L+=o*(5*k),N=(L+=c*(5*E))>>>13,L&=8191,L+=l*(5*A),L+=u*(5*v),L+=h*(5*w),L+=d*(5*b);var B=N+=(L+=f*(5*y))>>>13;B+=r*y,B+=i*m,B+=a*g,B+=o*p,N=(B+=c*(5*k))>>>13,B&=8191,B+=l*(5*E),B+=u*(5*A),B+=h*(5*v),B+=d*(5*w);var R=N+=(B+=f*(5*b))>>>13;R+=r*b,R+=i*y,R+=a*m,R+=o*g,N=(R+=c*p)>>>13,R&=8191,R+=l*(5*k),R+=u*(5*E),R+=h*(5*A),R+=d*(5*v);var M=N+=(R+=f*(5*w))>>>13;M+=r*w,M+=i*b,M+=a*y,M+=o*m,N=(M+=c*g)>>>13,M&=8191,M+=l*p,M+=u*(5*k),M+=h*(5*E),M+=d*(5*A);var D=N+=(M+=f*(5*v))>>>13;D+=r*v,D+=i*w,D+=a*b,D+=o*y,N=(D+=c*m)>>>13,D&=8191,D+=l*g,D+=u*p,D+=h*(5*k),D+=d*(5*E);var F=N+=(D+=f*(5*A))>>>13;F+=r*A,F+=i*v,F+=a*w,F+=o*b,N=(F+=c*y)>>>13,F&=8191,F+=l*m,F+=u*g,F+=h*p,F+=d*(5*k);var $=N+=(F+=f*(5*E))>>>13;$+=r*E,$+=i*A,$+=a*v,$+=o*w,N=($+=c*b)>>>13,$&=8191,$+=l*y,$+=u*m,$+=h*g,$+=d*p;var G=N+=($+=f*(5*k))>>>13;G+=r*k,G+=i*E,G+=a*A,G+=o*v,N=(G+=c*w)>>>13,G&=8191,G+=l*b,G+=u*y,G+=h*m,G+=d*g,r=j=8191&(N=(N=((N+=(G+=f*p)>>>13)<<2)+N|0)+(j&=8191)|0),i=U+=N>>>=13,a=L&=8191,o=B&=8191,c=R&=8191,l=M&=8191,u=D&=8191,h=F&=8191,d=$&=8191,f=G&=8191,t+=16,n-=16}this._h[0]=r,this._h[1]=i,this._h[2]=a,this._h[3]=o,this._h[4]=c,this._h[5]=l,this._h[6]=u,this._h[7]=h,this._h[8]=d,this._h[9]=f},e.prototype.finish=function(e,t){void 0===t&&(t=0);var n,s,r,i,a=new Uint16Array(10);if(this._leftover){for(i=this._leftover,this._buffer[i++]=1;i<16;i++)this._buffer[i]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,i=2;i<10;i++)this._h[i]+=n,n=this._h[i]>>>13,this._h[i]&=8191;for(this._h[0]+=5*n,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,a[0]=this._h[0]+5,n=a[0]>>>13,a[0]&=8191,i=1;i<10;i++)a[i]=this._h[i]+n,n=a[i]>>>13,a[i]&=8191;for(a[9]-=8192,s=(1^n)-1,i=0;i<10;i++)a[i]&=s;for(s=~s,i=0;i<10;i++)this._h[i]=this._h[i]&s|a[i];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),r=this._h[0]+this._pad[0],this._h[0]=65535&r,i=1;i<8;i++)r=(this._h[i]+this._pad[i]|0)+(r>>>16)|0,this._h[i]=65535&r;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,n=0,s=e.length;if(this._leftover){(t=16-this._leftover)>s&&(t=s);for(var r=0;r<t;r++)this._buffer[this._leftover+r]=e[n+r];if(s-=t,n+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(s>=16&&(t=s-s%16,this._blocks(e,n,t),n+=t,s-=t),s){for(r=0;r<s;r++)this._buffer[this._leftover+r]=e[n+r];this._leftover+=s}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=i,t.oneTimeAuth=function(e,t){var n=new i(e);n.update(t);var s=n.digest();return n.clean(),s},t.equal=function(e,n){return e.length===t.DIGEST_LENGTH&&n.length===t.DIGEST_LENGTH&&s.equal(e,n)}},1416:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const s=n(6008),r=n(8099),i=n(7309);function a(e,n=t.defaultRandomSource){return n.randomBytes(e)}t.defaultRandomSource=new s.SystemRandomSource,t.randomBytes=a,t.randomUint32=function(e=t.defaultRandomSource){const n=a(4,e),s=(0,r.readUint32LE)(n);return(0,i.wipe)(n),s};const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e,n=o,s=t.defaultRandomSource){if(n.length<2)throw new Error("randomString charset is too short");if(n.length>256)throw new Error("randomString charset is too long");let r="";const c=n.length,l=256-256%c;for(;e>0;){const t=a(Math.ceil(256*e/l),s);for(let s=0;s<t.length&&e>0;s++){const i=t[s];i<l&&(r+=n.charAt(i%c),e--)}(0,i.wipe)(t)}return r}t.randomString=c,t.randomStringForEntropy=function(e,n=o,s=t.defaultRandomSource){return c(Math.ceil(e/(Math.log(n.length)/Math.LN2)),n,s)}},5455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;t.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}},8871:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const s=n(7309);t.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=n(5883);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let e=0;e<n.length;e++)n[e]=t[e];return(0,s.wipe)(t),n}}},6008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const s=n(5455),r=n(8871);t.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new s.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new r.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}},3294:(e,t,n)=>{"use strict";var s=n(8099),r=n(7309);t.k=32,t.cn=64;var i=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=o(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,n=this._bufferLength,r=t/536870912|0,i=t<<3,a=t%64<56?64:128;this._buffer[n]=128;for(var c=n+1;c<a-8;c++)this._buffer[c]=0;s.writeUint32BE(r,this._buffer,a-8),s.writeUint32BE(i,this._buffer,a-4),o(this._temp,this._state,this._buffer,0,a),this._finished=!0}for(c=0;c<this.digestLength/4;c++)s.writeUint32BE(this._state[c],e,4*c);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){r.wipe(e.state),e.buffer&&r.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=i;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(e,t,n,r,i){for(;i>=64;){for(var o=t[0],c=t[1],l=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=0;g<16;g++){var m=r+4*g;e[g]=s.readUint32BE(n,m)}for(g=16;g<64;g++){var y=e[g-2],b=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,w=((y=e[g-15])>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(b+e[g-7]|0)+(w+e[g-16]|0)}for(g=0;g<64;g++){b=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&f)|0)+(p+(a[g]+e[g]|0)|0)|0,w=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&c^o&l^c&l)|0;p=f,f=d,d=h,h=u+b|0,u=l,l=c,c=o,o=b+w|0}t[0]+=o,t[1]+=c,t[2]+=l,t[3]+=u,t[4]+=h,t[5]+=d,t[6]+=f,t[7]+=p,r+=64,i-=64}return r}t.vp=function(e){var t=new i;t.update(e);var n=t.digest();return t.clean(),n}},7309:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},7664:(e,t,n)=>{"use strict";t.gi=t.Au=t.KS=t.kz=void 0;const s=n(1416),r=n(7309);function i(e){const t=new Float64Array(16);if(e)for(let n=0;n<e.length;n++)t[n]=e[n];return t}t.kz=32,t.KS=32;const a=new Uint8Array(32);a[0]=9;const o=i([56129,1]);function c(e){let t=1;for(let n=0;n<16;n++){let s=e[n]+t+65535;t=Math.floor(s/65536),e[n]=s-65536*t}e[0]+=t-1+37*(t-1)}function l(e,t,n){const s=~(n-1);for(let n=0;n<16;n++){const r=s&(e[n]^t[n]);e[n]^=r,t[n]^=r}}function u(e,t,n){for(let s=0;s<16;s++)e[s]=t[s]+n[s]}function h(e,t,n){for(let s=0;s<16;s++)e[s]=t[s]-n[s]}function d(e,t,n){let s,r,i=0,a=0,o=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0,y=0,b=0,w=0,v=0,A=0,E=0,k=0,_=0,P=0,C=0,x=0,S=0,I=0,T=0,O=0,N=0,j=0,U=0,L=0,B=n[0],R=n[1],M=n[2],D=n[3],F=n[4],$=n[5],G=n[6],H=n[7],W=n[8],z=n[9],q=n[10],K=n[11],V=n[12],J=n[13],Q=n[14],Y=n[15];s=t[0],i+=s*B,a+=s*R,o+=s*M,c+=s*D,l+=s*F,u+=s*$,h+=s*G,d+=s*H,f+=s*W,p+=s*z,g+=s*q,m+=s*K,y+=s*V,b+=s*J,w+=s*Q,v+=s*Y,s=t[1],a+=s*B,o+=s*R,c+=s*M,l+=s*D,u+=s*F,h+=s*$,d+=s*G,f+=s*H,p+=s*W,g+=s*z,m+=s*q,y+=s*K,b+=s*V,w+=s*J,v+=s*Q,A+=s*Y,s=t[2],o+=s*B,c+=s*R,l+=s*M,u+=s*D,h+=s*F,d+=s*$,f+=s*G,p+=s*H,g+=s*W,m+=s*z,y+=s*q,b+=s*K,w+=s*V,v+=s*J,A+=s*Q,E+=s*Y,s=t[3],c+=s*B,l+=s*R,u+=s*M,h+=s*D,d+=s*F,f+=s*$,p+=s*G,g+=s*H,m+=s*W,y+=s*z,b+=s*q,w+=s*K,v+=s*V,A+=s*J,E+=s*Q,k+=s*Y,s=t[4],l+=s*B,u+=s*R,h+=s*M,d+=s*D,f+=s*F,p+=s*$,g+=s*G,m+=s*H,y+=s*W,b+=s*z,w+=s*q,v+=s*K,A+=s*V,E+=s*J,k+=s*Q,_+=s*Y,s=t[5],u+=s*B,h+=s*R,d+=s*M,f+=s*D,p+=s*F,g+=s*$,m+=s*G,y+=s*H,b+=s*W,w+=s*z,v+=s*q,A+=s*K,E+=s*V,k+=s*J,_+=s*Q,P+=s*Y,s=t[6],h+=s*B,d+=s*R,f+=s*M,p+=s*D,g+=s*F,m+=s*$,y+=s*G,b+=s*H,w+=s*W,v+=s*z,A+=s*q,E+=s*K,k+=s*V,_+=s*J,P+=s*Q,C+=s*Y,s=t[7],d+=s*B,f+=s*R,p+=s*M,g+=s*D,m+=s*F,y+=s*$,b+=s*G,w+=s*H,v+=s*W,A+=s*z,E+=s*q,k+=s*K,_+=s*V,P+=s*J,C+=s*Q,x+=s*Y,s=t[8],f+=s*B,p+=s*R,g+=s*M,m+=s*D,y+=s*F,b+=s*$,w+=s*G,v+=s*H,A+=s*W,E+=s*z,k+=s*q,_+=s*K,P+=s*V,C+=s*J,x+=s*Q,S+=s*Y,s=t[9],p+=s*B,g+=s*R,m+=s*M,y+=s*D,b+=s*F,w+=s*$,v+=s*G,A+=s*H,E+=s*W,k+=s*z,_+=s*q,P+=s*K,C+=s*V,x+=s*J,S+=s*Q,I+=s*Y,s=t[10],g+=s*B,m+=s*R,y+=s*M,b+=s*D,w+=s*F,v+=s*$,A+=s*G,E+=s*H,k+=s*W,_+=s*z,P+=s*q,C+=s*K,x+=s*V,S+=s*J,I+=s*Q,T+=s*Y,s=t[11],m+=s*B,y+=s*R,b+=s*M,w+=s*D,v+=s*F,A+=s*$,E+=s*G,k+=s*H,_+=s*W,P+=s*z,C+=s*q,x+=s*K,S+=s*V,I+=s*J,T+=s*Q,O+=s*Y,s=t[12],y+=s*B,b+=s*R,w+=s*M,v+=s*D,A+=s*F,E+=s*$,k+=s*G,_+=s*H,P+=s*W,C+=s*z,x+=s*q,S+=s*K,I+=s*V,T+=s*J,O+=s*Q,N+=s*Y,s=t[13],b+=s*B,w+=s*R,v+=s*M,A+=s*D,E+=s*F,k+=s*$,_+=s*G,P+=s*H,C+=s*W,x+=s*z,S+=s*q,I+=s*K,T+=s*V,O+=s*J,N+=s*Q,j+=s*Y,s=t[14],w+=s*B,v+=s*R,A+=s*M,E+=s*D,k+=s*F,_+=s*$,P+=s*G,C+=s*H,x+=s*W,S+=s*z,I+=s*q,T+=s*K,O+=s*V,N+=s*J,j+=s*Q,U+=s*Y,s=t[15],v+=s*B,A+=s*R,E+=s*M,k+=s*D,_+=s*F,P+=s*$,C+=s*G,x+=s*H,S+=s*W,I+=s*z,T+=s*q,O+=s*K,N+=s*V,j+=s*J,U+=s*Q,L+=s*Y,i+=38*A,a+=38*E,o+=38*k,c+=38*_,l+=38*P,u+=38*C,h+=38*x,d+=38*S,f+=38*I,p+=38*T,g+=38*O,m+=38*N,y+=38*j,b+=38*U,w+=38*L,r=1,s=i+r+65535,r=Math.floor(s/65536),i=s-65536*r,s=a+r+65535,r=Math.floor(s/65536),a=s-65536*r,s=o+r+65535,r=Math.floor(s/65536),o=s-65536*r,s=c+r+65535,r=Math.floor(s/65536),c=s-65536*r,s=l+r+65535,r=Math.floor(s/65536),l=s-65536*r,s=u+r+65535,r=Math.floor(s/65536),u=s-65536*r,s=h+r+65535,r=Math.floor(s/65536),h=s-65536*r,s=d+r+65535,r=Math.floor(s/65536),d=s-65536*r,s=f+r+65535,r=Math.floor(s/65536),f=s-65536*r,s=p+r+65535,r=Math.floor(s/65536),p=s-65536*r,s=g+r+65535,r=Math.floor(s/65536),g=s-65536*r,s=m+r+65535,r=Math.floor(s/65536),m=s-65536*r,s=y+r+65535,r=Math.floor(s/65536),y=s-65536*r,s=b+r+65535,r=Math.floor(s/65536),b=s-65536*r,s=w+r+65535,r=Math.floor(s/65536),w=s-65536*r,s=v+r+65535,r=Math.floor(s/65536),v=s-65536*r,i+=r-1+37*(r-1),r=1,s=i+r+65535,r=Math.floor(s/65536),i=s-65536*r,s=a+r+65535,r=Math.floor(s/65536),a=s-65536*r,s=o+r+65535,r=Math.floor(s/65536),o=s-65536*r,s=c+r+65535,r=Math.floor(s/65536),c=s-65536*r,s=l+r+65535,r=Math.floor(s/65536),l=s-65536*r,s=u+r+65535,r=Math.floor(s/65536),u=s-65536*r,s=h+r+65535,r=Math.floor(s/65536),h=s-65536*r,s=d+r+65535,r=Math.floor(s/65536),d=s-65536*r,s=f+r+65535,r=Math.floor(s/65536),f=s-65536*r,s=p+r+65535,r=Math.floor(s/65536),p=s-65536*r,s=g+r+65535,r=Math.floor(s/65536),g=s-65536*r,s=m+r+65535,r=Math.floor(s/65536),m=s-65536*r,s=y+r+65535,r=Math.floor(s/65536),y=s-65536*r,s=b+r+65535,r=Math.floor(s/65536),b=s-65536*r,s=w+r+65535,r=Math.floor(s/65536),w=s-65536*r,s=v+r+65535,r=Math.floor(s/65536),v=s-65536*r,i+=r-1+37*(r-1),e[0]=i,e[1]=a,e[2]=o,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=m,e[12]=y,e[13]=b,e[14]=w,e[15]=v}function f(e,t){d(e,t,t)}function p(e,t){const n=new Uint8Array(32),s=new Float64Array(80),r=i(),a=i(),p=i(),g=i(),m=i(),y=i();for(let t=0;t<31;t++)n[t]=e[t];n[31]=127&e[31]|64,n[0]&=248,function(e,t){for(let n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(s,t);for(let e=0;e<16;e++)a[e]=s[e];r[0]=g[0]=1;for(let e=254;e>=0;--e){const t=n[e>>>3]>>>(7&e)&1;l(r,a,t),l(p,g,t),u(m,r,p),h(r,r,p),u(p,a,g),h(a,a,g),f(g,m),f(y,r),d(r,p,r),d(p,a,m),u(m,r,p),h(r,r,p),f(a,r),h(p,g,y),d(r,p,o),u(r,r,g),d(p,p,r),d(r,g,y),d(g,a,s),f(a,m),l(r,a,t),l(p,g,t)}for(let e=0;e<16;e++)s[e+16]=r[e],s[e+32]=p[e],s[e+48]=a[e],s[e+64]=g[e];const b=s.subarray(32),w=s.subarray(16);!function(e,t){const n=i();for(let e=0;e<16;e++)n[e]=t[e];for(let e=253;e>=0;e--)f(n,n),2!==e&&4!==e&&d(n,n,t);for(let t=0;t<16;t++)e[t]=n[t]}(b,b),d(w,w,b);const v=new Uint8Array(32);return function(e,t){const n=i(),s=i();for(let e=0;e<16;e++)s[e]=t[e];c(s),c(s),c(s);for(let e=0;e<2;e++){n[0]=s[0]-65517;for(let e=1;e<15;e++)n[e]=s[e]-65535-(n[e-1]>>16&1),n[e-1]&=65535;n[15]=s[15]-32767-(n[14]>>16&1);const e=n[15]>>16&1;n[14]&=65535,l(s,n,1-e)}for(let t=0;t<16;t++)e[2*t]=255&s[t],e[2*t+1]=s[t]>>8}(v,w),v}function g(e){return p(e,a)}function m(e){if(e.length!==t.KS)throw new Error(`x25519: seed must be ${t.KS} bytes`);const n=new Uint8Array(e);return{publicKey:g(n),secretKey:n}}t.Au=function(e){const t=(0,s.randomBytes)(32,e),n=m(t);return(0,r.wipe)(t),n},t.gi=function(e,n,s=!1){if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(n.length!==t.kz)throw new Error("X25519: incorrect public key length");const r=p(e,n);if(s){let e=0;for(let t=0;t<r.length;t++)e|=r[t];if(0===e)throw new Error("X25519: invalid shared key")}return r}},1882:()=>{},6900:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(4);s.__exportStar(n(6869),t),s.__exportStar(n(8033),t)},6869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},8033:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},6736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(4);s.__exportStar(n(4273),t),s.__exportStar(n(7001),t),s.__exportStar(n(2939),t),s.__exportStar(n(6900),t)},2939:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(4).__exportStar(n(8766),t)},8766:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;t.IWatch=class{}},3207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const s=n(6900);t.toMiliseconds=function(e){return e*s.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/s.ONE_THOUSAND)}},3873:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},4273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(4);s.__exportStar(n(3873),t),s.__exportStar(n(3207),t)},7001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const n=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:n})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=n,t.default=n},4:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__assign:()=>i,__asyncDelegator:()=>v,__asyncGenerator:()=>w,__asyncValues:()=>A,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>P,__classPrivateFieldSet:()=>C,__createBinding:()=>d,__decorate:()=>o,__exportStar:()=>f,__extends:()=>r,__generator:()=>h,__importDefault:()=>_,__importStar:()=>k,__makeTemplateObject:()=>E,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>a,__spread:()=>m,__spreadArrays:()=>y,__values:()=>p});var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},s(e,t)};function r(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};function a(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}function o(e,t,n,s){var r,i=arguments.length,a=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,s){t(n,s,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))}function h(e,t){var n,s,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&i[0]?s.return:i[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function d(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var s,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var s=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,o=i.length;a<o;a++,r++)s[r]=i[a];return s}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=n.apply(e,t||[]),i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(e){r[e]&&(s[e]=function(t){return new Promise((function(n,s){i.push([e,t,n,s])>1||o(e,t)}))})}function o(e,t){try{(n=r[e](t)).value instanceof b?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){o("next",e)}function l(e){o("throw",e)}function u(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}function v(e){var t,n;return t={},s("next"),s("throw",(function(e){throw e})),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,r){t[s]=e[s]?function(t){return(n=!n)?{value:b(e[s](t)),done:"return"===s}:r?r(t):t}:r}}function A(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(n){t[n]=e[n]&&function(t){return new Promise((function(s,r){(function(e,t,n,s){Promise.resolve(s).then((function(t){e({value:t,done:n})}),t)})(s,r,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},9795:(e,t,n)=>{"use strict";n.d(t,{AW:()=>U,O6:()=>Gt,rV:()=>M,gn:()=>Ce,H1:()=>ve,hF:()=>Ae,WG:()=>V,pe:()=>Q,m$:()=>z,vB:()=>Y,HI:()=>J,E0:()=>Se,Gq:()=>_e,$0:()=>me,Z4:()=>ke,Bv:()=>He,Au:()=>H,jd:()=>W,gu:()=>O,D:()=>pe,Z7:()=>at,cO:()=>je,_H:()=>Ne,fc:()=>et,D6:()=>ot,Hh:()=>Te,Ym:()=>q,rj:()=>K,jU:()=>de,gp:()=>tt,rF:()=>Bt,Bw:()=>xe,UG:()=>ue,Gg:()=>Dt,xW:()=>mt,b$:()=>he,Ih:()=>ft,h1:()=>yt,Q8:()=>ee,o8:()=>ut,qt:()=>ct,Dd:()=>bt,$t:()=>It,nf:()=>Nt,Q0:()=>xt,in:()=>_t,p8:()=>jt,sI:()=>Lt,al:()=>Ut,L5:()=>lt,EJ:()=>St,Z2:()=>Pt,PM:()=>Ct,hH:()=>Tt,ON:()=>Mt,n:()=>kt,JT:()=>Ot,M_:()=>ht,jv:()=>gt,KC:()=>be,eG:()=>Ie,fK:()=>st,IP:()=>we,DQ:()=>T,iP:()=>Pe,M:()=>nt,he:()=>$e,uw:()=>Ft,Ll:()=>X,EN:()=>Z});var s=n(5501),r=n(512),i=n(1416),a=n(3294),o=n(7664),c=n(7466),l=n(4155),u=function(e,t,n){if(n||2===arguments.length)for(var s,r=0,i=t.length;r<i;r++)!s&&r in t||(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},h=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},d=function(e){this.version=e,this.type="node",this.name="node",this.os=l.platform},f=function(e,t,n,s){this.name=e,this.version=t,this.os=n,this.bot=s,this.type="bot-device"},p=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},g=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},m=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,y=3,b=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],w=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function v(e){return e?E(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new g:"undefined"!=typeof navigator?E(navigator.userAgent):void 0!==l&&l.version?new d(l.version.slice(1)):null}function A(e){return""!==e&&b.reduce((function(t,n){var s=n[0],r=n[1];if(t)return t;var i=r.exec(e);return!!i&&[s,i]}),!1)}function E(e){var t=A(e);if(!t)return null;var n=t[0],s=t[1];if("searchbot"===n)return new p;var r=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);r?r.length<y&&(r=u(u([],r,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(y-r.length),!0)):r=[];var i=r.join("."),a=function(e){for(var t=0,n=w.length;t<n;t++){var s=w[t],r=s[0];if(s[1].exec(e))return r}return null}(e),o=m.exec(e);return o&&o[1]?new f(n,i,a,o[1]):new h(n,i,a)}var k=n(6736),_=n(2873),P=n(5755),C=n(6151);n(1882);const x={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var S=n(4155);const I=":";function T(e){const[t,n]=e.split(I);return{namespace:t,reference:n}}function O(e,t=[]){const n=[];return Object.keys(e).forEach((s=>{if(t.length&&!t.includes(s))return;const r=e[s];n.push(...r.accounts)})),n}function N(e,t){return e.includes(":")?[e]:t.chains||[]}const j="base10",U="base16",L="base64pad",B="utf8",R=0,M=1,D=0,F=1,$=12,G=32;function H(){const e=o.Au();return{privateKey:(0,c.BB)(e.secretKey,U),publicKey:(0,c.BB)(e.publicKey,U)}}function W(){const e=(0,i.randomBytes)(G);return(0,c.BB)(e,U)}function z(e,t){const n=o.gi((0,c.mL)(e,U),(0,c.mL)(t,U),!0),s=new r.t(a.mE,n).expand(G);return(0,c.BB)(s,U)}function q(e){const t=(0,a.vp)((0,c.mL)(e,U));return(0,c.BB)(t,U)}function K(e){const t=(0,a.vp)((0,c.mL)(e,B));return(0,c.BB)(t,U)}function V(e){return Number((0,c.BB)(e,j))}function J(e){const t=function(e){return(0,c.mL)(`${e}`,j)}(typeof e.type<"u"?e.type:R);if(V(t)===M&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?(0,c.mL)(e.senderPublicKey,U):void 0,r=typeof e.iv<"u"?(0,c.mL)(e.iv,U):(0,i.randomBytes)($);return function(e){if(V(e.type)===M){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,c.BB)((0,c.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),L)}return(0,c.BB)((0,c.zo)([e.type,e.iv,e.sealed]),L)}({type:t,sealed:new s.OK((0,c.mL)(e.symKey,U)).seal(r,(0,c.mL)(e.message,B)),iv:r,senderPublicKey:n})}function Q(e){const t=new s.OK((0,c.mL)(e.symKey,U)),{sealed:n,iv:r}=Y(e.encoded),i=t.open(r,n);if(null===i)throw new Error("Failed to decrypt");return(0,c.BB)(i,B)}function Y(e){const t=(0,c.mL)(e,L),n=t.slice(D,F),s=F;if(V(n)===M){const e=s+G,r=e+$,i=t.slice(s,e),a=t.slice(e,r);return{type:n,sealed:t.slice(r),iv:a,senderPublicKey:i}}const r=s+$,i=t.slice(s,r);return{type:n,sealed:t.slice(r),iv:i}}function X(e,t){const n=Y(e);return Z({type:V(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,c.BB)(n.senderPublicKey,U):void 0,receiverPublicKey:t?.receiverPublicKey})}function Z(e){const t=e?.type||R;if(t===M){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function ee(e){return e.type===M&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var te=Object.defineProperty,ne=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ie=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ae=(e,t)=>{for(var n in t||(t={}))se.call(t,n)&&ie(e,n,t[n]);if(ne)for(var n of ne(t))re.call(t,n)&&ie(e,n,t[n]);return e};const oe="ReactNative",ce={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},le="js";function ue(){return typeof S<"u"&&typeof S.versions<"u"&&typeof S.versions.node<"u"}function he(){return!(0,_.getDocument)()&&!!(0,_.getNavigator)()&&navigator.product===oe}function de(){return!ue()&&!!(0,_.getNavigator)()}function fe(){return he()?ce.reactNative:ue()?ce.node:de()?ce.browser:ce.unknown}function pe(){return(0,P.D)()||{name:"",description:"",url:"",icons:[""]}}function ge(e,t,s){const r=function(){if(fe()===ce.reactNative&&typeof n.g<"u"&&typeof(null==n.g?void 0:n.g.Platform)<"u"){const{OS:e,Version:t}=n.g.Platform;return[e,t].join("-")}const e=v();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),i=function(){var e;const t=fe();return t===ce.browser?[t,(null==(e=(0,_.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[le,s].join("-"),r,i].join("/")}function me({protocol:e,version:t,relayUrl:n,sdkVersion:s,auth:r,projectId:i,useOnCloseEvent:a}){const o=n.split("?"),c={auth:r,ua:ge(e,t,s),projectId:i,useOnCloseEvent:a||void 0},l=function(e,t){let n=C.parse(e);return n=ae(ae({},n),t),C.stringify(n)}(o[1]||"",c);return o[0]+"?"+l}function ye(e,t){return e.filter((e=>t.includes(e))).length===e.length}function be(e){return Object.fromEntries(e.entries())}function we(e){return new Map(Object.entries(e))}function ve(e=k.FIVE_MINUTES,t){const n=(0,k.toMiliseconds)(e||k.FIVE_MINUTES);let s,r,i;return{resolve:e=>{i&&s&&(clearTimeout(i),s(e))},reject:e=>{i&&r&&(clearTimeout(i),r(e))},done:()=>new Promise(((e,a)=>{i=setTimeout((()=>{a(new Error(t))}),n),s=e,r=a}))}}function Ae(e,t,n){return new Promise((async(s,r)=>{const i=setTimeout((()=>r(new Error(n))),t);try{s(await e)}catch(e){r(e)}clearTimeout(i)}))}function Ee(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function ke(e){return Ee("topic",e)}function _e(e){return Ee("id",e)}function Pe(e){const[t,n]=e.split(":"),s={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof n)s.topic=n;else{if("id"!==t||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);s.id=Number(n)}return s}function Ce(e,t){return(0,k.fromMiliseconds)((t||Date.now())+(0,k.toMiliseconds)(e))}function xe(e){return Date.now()>=(0,k.toMiliseconds)(e)}function Se(e,t){return`${e}${t?`:${t}`:""}`}function Ie(e=[],t=[]){return[...new Set([...e,...t])]}async function Te({id:e,topic:t,wcDeepLink:s}){try{if(!s)return;const r="string"==typeof s?JSON.parse(s):s;let i=r?.href;if("string"!=typeof i)return;i.endsWith("/")&&(i=i.slice(0,-1));const a=`${i}/wc?requestId=${e}&sessionTopic=${t}`,o=fe();o===ce.browser?a.startsWith("https://")?window.open(a,"_blank","noreferrer noopener"):window.open(a,"_self","noreferrer noopener"):o===ce.reactNative&&typeof(null==n.g?void 0:n.g.Linking)<"u"&&await n.g.Linking.openURL(a)}catch(e){console.error(e)}}const Oe="irn";function Ne(e){return e?.relay||{protocol:Oe}}function je(e){const t=x[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Ue=Object.defineProperty,Le=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Me=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,De=(e,t)=>{for(var n in t||(t={}))Be.call(t,n)&&Me(e,n,t[n]);if(Le)for(var n of Le(t))Re.call(t,n)&&Me(e,n,t[n]);return e};function Fe(e,t="-"){const n={},s="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(s)){const r=t.replace(s,""),i=e[t];n[r]=i}})),n}function $e(e){const t=e.indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,s=e.substring(0,t),r=e.substring(t+1,n).split("@"),i=typeof n<"u"?e.substring(n):"",a=C.parse(i);return{protocol:s,topic:Ge(r[0]),version:parseInt(r[1],10),symKey:a.symKey,relay:Fe(a)}}function Ge(e){return e.startsWith("//")?e.substring(2):e}function He(e){return`${e.protocol}:${e.topic}@${e.version}?`+C.stringify(De({symKey:e.symKey},function(e,t="-"){const n={};return Object.keys(e).forEach((s=>{const r="relay"+t+s;e[s]&&(n[r]=e[s])})),n}(e.relay)))}var We=Object.defineProperty,ze=Object.defineProperties,qe=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Qe=(e,t,n)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ye=(e,t)=>{for(var n in t||(t={}))Ve.call(t,n)&&Qe(e,n,t[n]);if(Ke)for(var n of Ke(t))Je.call(t,n)&&Qe(e,n,t[n]);return e},Xe=(e,t)=>ze(e,qe(t));function Ze(e){const t=[];return e.forEach((e=>{const[n,s]=e.split(":");t.push(`${n}:${s}`)})),t}function et(e,t){const n=_t(e,t);if(n)throw new Error(n.message);const s={};for(const[t,n]of Object.entries(e))s[t]={methods:n.methods,events:n.events,chains:n.accounts.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))};return s}function tt(e){return e.includes(":")}function nt(e){return tt(e)?e.split(":")[0]:e}function st(e){var t,n,s;const r={};if(!lt(e))return r;for(const[i,a]of Object.entries(e)){const e=tt(i)?[i]:a.chains,o=a.methods||[],c=a.events||[],l=nt(i);r[l]=Xe(Ye({},r[l]),{chains:Ie(e,null==(t=r[l])?void 0:t.chains),methods:Ie(o,null==(n=r[l])?void 0:n.methods),events:Ie(c,null==(s=r[l])?void 0:s.events)})}return r}const rt={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},it={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function at(e,t){const{message:n,code:s}=it[e];return{message:t?`${n} ${t}`:n,code:s}}function ot(e,t){const{message:n,code:s}=rt[e];return{message:t?`${n} ${t}`:n,code:s}}function ct(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function lt(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function ut(e){return typeof e>"u"}function ht(e,t){return!(!t||!ut(e))||"string"==typeof e&&!!e.trim().length}function dt(e,t){return!(!t||!ut(e))||"number"==typeof e&&!isNaN(e)}function ft(e,t){const{requiredNamespaces:n}=t,s=Object.keys(e.namespaces),r=Object.keys(n);let i=!0;return!!ye(r,s)&&(s.forEach((t=>{const{accounts:s,methods:r,events:a}=e.namespaces[t],o=Ze(s),c=n[t];ye(N(t,c),o)&&ye(c.methods,r)&&ye(c.events,a)||(i=!1)})),i)}function pt(e){return!(!ht(e,!1)||!e.includes(":"))&&2===e.split(":").length}function gt(e){if(ht(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function mt(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}function yt(e){return e?.topic}function bt(e,t){let n=null;return ht(e?.publicKey,!1)||(n=at("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function wt(e){let t=!0;return ct(e)?e.length&&(t=e.every((e=>ht(e,!1)))):t=!1,t}function vt(e,t,n){let s=null;return Object.entries(e).forEach((([e,r])=>{if(s)return;const i=function(e,t,n){let s=null;return ct(t)&&t.length?t.forEach((e=>{s||pt(e)||(s=ot("UNSUPPORTED_CHAINS",`${n}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):pt(e)||(s=ot("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}(e,N(e,r),`${t} ${n}`);i&&(s=i)})),s}function At(e,t){let n=null;return ct(e)?e.forEach((e=>{n||function(e){if(ht(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&pt(e)}}return!1}(e)||(n=ot("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):n=ot("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Et(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const s=function(e,t){let n=null;return wt(e?.methods)?wt(e?.events)||(n=ot("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=ot("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}(e,`${t}, namespace`);s&&(n=s)})),n}function kt(e,t,n){let s=null;if(e&&lt(e)){const r=Et(e,t);r&&(s=r);const i=vt(e,t,n);i&&(s=i)}else s=at("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return s}function _t(e,t){let n=null;if(e&&lt(e)){const s=Et(e,t);s&&(n=s);const r=function(e,t){let n=null;return Object.values(e).forEach((e=>{if(n)return;const s=At(e?.accounts,`${t} namespace`);s&&(n=s)})),n}(e,t);r&&(n=r)}else n=at("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function Pt(e){return ht(e.protocol,!0)}function Ct(e,t){let n=!1;return t&&!e?n=!0:e&&ct(e)&&e.length&&e.forEach((e=>{n=Pt(e)})),n}function xt(e){return"number"==typeof e}function St(e){return typeof e<"u"&&null!==typeof e}function It(e){return!!(e&&"object"==typeof e&&e.code&&dt(e.code,!1)&&e.message&&ht(e.message,!1))}function Tt(e){return!(ut(e)||!ht(e.method,!1))}function Ot(e){return!(ut(e)||ut(e.result)&&ut(e.error)||!dt(e.id,!1)||!ht(e.jsonrpc,!1))}function Nt(e){return!(ut(e)||!ht(e.name,!1))}function jt(e,t){return!(!pt(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...Ze(e.accounts))})),t}(e).includes(t))}function Ut(e,t,n){return!!ht(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{Ze(e.accounts).includes(t)&&n.push(...e.methods)})),n}(e,t).includes(n)}function Lt(e,t,n){return!!ht(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach((e=>{Ze(e.accounts).includes(t)&&n.push(...e.events)})),n}(e,t).includes(n)}function Bt(e,t,n){let s=null;const r=function(e){const t={};return Object.keys(e).forEach((n=>{var s;n.includes(":")?t[n]=e[n]:null==(s=e[n].chains)||s.forEach((s=>{t[s]={methods:e[n].methods,events:e[n].events}}))})),t}(e),i=function(e){const t={};return Object.keys(e).forEach((n=>{if(n.includes(":"))t[n]=e[n];else{const s=Ze(e[n].accounts);s?.forEach((s=>{t[s]={accounts:e[n].accounts.filter((e=>e.includes(`${s}:`))),methods:e[n].methods,events:e[n].events}}))}})),t}(t),a=Object.keys(r),o=Object.keys(i),c=Rt(Object.keys(e)),l=Rt(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(s=at("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),ye(a,o)||(s=at("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${a.toString()}\n      Approved: ${o.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||s)return;const r=Ze(t[e].accounts);r.includes(e)||(s=at("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${r.toString()}`))})),a.forEach((e=>{s||(ye(r[e].methods,i[e].methods)?ye(r[e].events,i[e].events)||(s=at("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${e}`)):s=at("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${e}`))})),s}function Rt(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function Mt(e,t){return dt(e,!1)&&e<=t.max&&e>=t.min}function Dt(){const e=fe();return new Promise((t=>{switch(e){case ce.browser:t(de()&&navigator?.onLine);break;case ce.reactNative:t(async function(){if(he()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo){const e=await(null==n.g?void 0:n.g.NetInfo.fetch());return e?.isConnected}return!0}());break;case ce.node:default:t(!0)}}))}function Ft(e){switch(fe()){case ce.browser:!function(e){de()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case ce.reactNative:!function(e){he()&&typeof n.g<"u"&&null!=n.g&&n.g.NetInfo&&n.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e);case ce.node:}}const $t={};class Gt{static get(e){return $t[e]}static set(e,t){$t[e]=t}static delete(e){delete $t[e]}}},6151:(e,t,n)=>{"use strict";const s=n(610),r=n(4020),i=n(500),a=n(2806),o=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function u(e,t){return t.decode?r(e):e}function h(e){return Array.isArray(e)?e.sort():"object"==typeof e?h(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,s)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===s[e]&&(s[e]={}),s[e][t[1]]=n):s[e]=n};case"bracket":return(e,n,s)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],n):s[e]=[n]:s[e]=n};case"colon-list-separator":return(e,n,s)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],n):s[e]=[n]:s[e]=n};case"comma":case"separator":return(t,n,s)=>{const r="string"==typeof n&&n.includes(e.arrayFormatSeparator),i="string"==typeof n&&!r&&u(n,e).includes(e.arrayFormatSeparator);n=i?u(n,e):n;const a=r||i?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);s[t]=a};case"bracket-separator":return(t,n,s)=>{const r=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!r)return void(s[t]=n?u(n,e):n);const i=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==s[t]?s[t]=[].concat(s[t],i):s[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const r of e.split("&")){if(""===r)continue;let[e,a]=i(t.decode?r.replace(/\+/g," "):r,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:u(a,t),n(u(e,t),a,s)}for(const e of Object.keys(s)){const n=s[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=p(n[e],t);else s[e]=p(n,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce(((e,t)=>{const n=s[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=h(n):e[t]=n,e}),Object.create(null))}t.extract=f,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],s=function(e){switch(e.arrayFormat){case"index":return t=>(n,s)=>{const r=n.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[l(t,e),"[",r,"]"].join("")]:[...n,[l(t,e),"[",l(r,e),"]=",l(s,e)].join("")]};case"bracket":return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[l(t,e),"[]"].join("")]:[...n,[l(t,e),"[]=",l(s,e)].join("")];case"colon-list-separator":return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[l(t,e),":list="].join("")]:[...n,[l(t,e),":list=",l(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(s,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?s:(r=null===r?"":r,0===s.length?[[l(n,e),t,l(r,e)].join("")]:[[s,l(r,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,l(t,e)]:[...n,[l(t,e),"=",l(s,e)].join("")]}}(t),r={};for(const t of Object.keys(e))n(t)||(r[t]=e[t]);const i=Object.keys(r);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const r=e[n];return void 0===r?"":null===r?l(n,t):Array.isArray(r)?0===r.length&&"bracket-separator"===t.arrayFormat?l(n,t)+"[]":r.reduce(s(n),[]).join("&"):l(n,t)+"="+l(r,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,s]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:g(f(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:u(s,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[o]:!0},n);const s=d(e.url).split("?")[0]||"",r=t.extract(e.url),i=t.parse(r,{sort:!1}),a=Object.assign(i,e.query);let c=t.stringify(a,n);c&&(c=`?${c}`);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u=`#${n[o]?l(e.fragmentIdentifier,n):e.fragmentIdentifier}`),`${s}${c}${u}`},t.pick=(e,n,s)=>{s=Object.assign({parseFragmentIdentifier:!0,[o]:!1},s);const{url:r,query:i,fragmentIdentifier:c}=t.parseUrl(e,s);return t.stringifyUrl({url:r,query:a(i,n),fragmentIdentifier:c},s)},t.exclude=(e,n,s)=>{const r=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,r,s)}},2873:(e,t)=>{"use strict";function n(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function s(e){const t=n(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=n,t.getFromWindowOrThrow=s,t.getDocumentOrThrow=function(){return s("document")},t.getDocument=function(){return n("document")},t.getNavigatorOrThrow=function(){return s("navigator")},t.getNavigator=function(){return n("navigator")},t.getLocationOrThrow=function(){return s("location")},t.getLocation=function(){return n("location")},t.getCryptoOrThrow=function(){return s("crypto")},t.getCrypto=function(){return n("crypto")},t.getLocalStorageOrThrow=function(){return s("localStorage")},t.getLocalStorage=function(){return n("localStorage")}},5755:(e,t,n)=>{"use strict";t.D=void 0;const s=n(2873);t.D=function(){let e,t;try{e=s.getDocumentOrThrow(),t=s.getLocationOrThrow()}catch(e){return null}function n(...t){const n=e.getElementsByTagName("meta");for(let e=0;e<n.length;e++){const s=n[e],r=["itemprop","property","name"].map((e=>s.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(r.length&&r){const e=s.getAttribute("content");if(e)return e}}return""}const r=function(){let t=n("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:n("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const n=e.getElementsByTagName("link"),s=[];for(let e=0;e<n.length;e++){const r=n[e],i=r.getAttribute("rel");if(i&&i.toLowerCase().indexOf("icon")>-1){const e=r.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let n=t.protocol+"//"+t.host;if(0===e.indexOf("/"))n+=e;else{const s=t.pathname.split("/");s.pop();n+=s.join("/")+"/"+e}s.push(n)}else if(0===e.indexOf("//")){const n=t.protocol+e;s.push(n)}else s.push(e)}}return s}(),name:r}}},7484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,s="millisecond",r="second",i="minute",a="hour",o="day",c="week",l="month",u="quarter",h="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(n)+e},b={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),s=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+y(s,2,"0")+":"+y(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var s=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(s,l),i=n-r<0,a=t.clone().add(s+(i?-1:1),l);return+(-(s+(n-r)/(i?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:h,w:c,d:o,D:d,h:a,m:i,s:r,ms:s,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",v={};v[w]=m;var A="$isDayjsObject",E=function(e){return e instanceof C||!(!e||!e[A])},k=function e(t,n,s){var r;if(!t)return w;if("string"==typeof t){var i=t.toLowerCase();v[i]&&(r=i),n&&(v[i]=n,r=i);var a=t.split("-");if(!r&&a.length>1)return e(a[0])}else{var o=t.name;v[o]=t,r=o}return!s&&r&&(w=r),r||!s&&w},_=function(e,t){if(E(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new C(n)},P=b;P.l=k,P.i=E,P.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function m(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[A]=!0}var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(P.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(p);if(s){var r=s[2]-1||0,i=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return P},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(e,t){var n=_(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return _(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<_(e)},y.$g=function(e,t,n){return P.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,s=!!P.u(t)||t,u=P.p(e),f=function(e,t){var r=P.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return s?r:r.endOf(o)},p=function(e,t){return P.w(n.toDate()[e].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,y=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case h:return s?f(1,0):f(31,11);case l:return s?f(1,m):f(0,m+1);case c:var w=this.$locale().weekStart||0,v=(g<w?g+7:g)-w;return f(s?y-v:y+(6-v),m);case o:case d:return p(b+"Hours",0);case a:return p(b+"Minutes",1);case i:return p(b+"Seconds",2);case r:return p(b+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,c=P.p(e),u="set"+(this.$u?"UTC":""),f=(n={},n[o]=u+"Date",n[d]=u+"Date",n[l]=u+"Month",n[h]=u+"FullYear",n[a]=u+"Hours",n[i]=u+"Minutes",n[r]=u+"Seconds",n[s]=u+"Milliseconds",n)[c],p=c===o?this.$D+(t-this.$W):t;if(c===l||c===h){var g=this.clone().set(d,1);g.$d[f](p),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[P.p(e)]()},y.add=function(s,u){var d,f=this;s=Number(s);var p=P.p(u),g=function(e){var t=_(f);return P.w(t.date(t.date()+Math.round(e*s)),f)};if(p===l)return this.set(l,this.$M+s);if(p===h)return this.set(h,this.$y+s);if(p===o)return g(1);if(p===c)return g(7);var m=(d={},d[i]=t,d[a]=n,d[r]=e,d)[p]||1,y=this.$d.getTime()+s*m;return P.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var s=e||"YYYY-MM-DDTHH:mm:ssZ",r=P.z(this),i=this.$H,a=this.$m,o=this.$M,c=n.weekdays,l=n.months,u=n.meridiem,h=function(e,n,r,i){return e&&(e[n]||e(t,s))||r[n].slice(0,i)},d=function(e){return P.s(i%12||12,e,"0")},p=u||function(e,t,n){var s=e<12?"AM":"PM";return n?s.toLowerCase():s};return s.replace(g,(function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return P.s(t.$y,4,"0");case"M":return o+1;case"MM":return P.s(o+1,2,"0");case"MMM":return h(n.monthsShort,o,l,3);case"MMMM":return h(l,o);case"D":return t.$D;case"DD":return P.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(n.weekdaysMin,t.$W,c,2);case"ddd":return h(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(i);case"HH":return P.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return p(i,a,!0);case"A":return p(i,a,!1);case"m":return String(a);case"mm":return P.s(a,2,"0");case"s":return String(t.$s);case"ss":return P.s(t.$s,2,"0");case"SSS":return P.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(s,d,f){var p,g=this,m=P.p(d),y=_(s),b=(y.utcOffset()-this.utcOffset())*t,w=this-y,v=function(){return P.m(g,y)};switch(m){case h:p=v()/12;break;case l:p=v();break;case u:p=v()/3;break;case c:p=(w-b)/6048e5;break;case o:p=(w-b)/864e5;break;case a:p=w/n;break;case i:p=w/t;break;case r:p=w/e;break;default:p=w}return f?p:P.a(p)},y.daysInMonth=function(){return this.endOf(l).$D},y.$locale=function(){return v[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),s=k(e,t,!0);return s&&(n.$L=s),n},y.clone=function(){return P.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),x=C.prototype;return _.prototype=x,[["$ms",s],["$s",r],["$m",i],["$H",a],["$W",o],["$M",l],["$y",h],["$D",d]].forEach((function(e){x[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,C,_),e.$i=!0),_},_.locale=k,_.isDayjs=E,_.unix=function(e){return _(1e3*e)},_.en=v[w],_.Ls=v,_.p={},_}()},4110:function(e){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var s=t.prototype,r={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,n,r){return s.fromToBase(e,t,n,r)}n.en.relativeTime=r,s.fromToBase=function(t,s,i,a,o){for(var c,l,u,h=i.$locale().relativeTime||r,d=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=d.length,p=0;p<f;p+=1){var g=d[p];g.d&&(c=a?n(t).diff(i,g.d,!0):i.diff(t,g.d,!0));var m=(e.rounding||Math.round)(Math.abs(c));if(u=c>0,m<=g.r||!g.r){m<=1&&p>0&&(g=d[p-1]);var y=h[g.l];o&&(m=o(""+m)),l="string"==typeof y?y.replace("%d",m):y(m,s,g.l,u);break}}if(s)return l;var b=u?h.future:h.past;return"function"==typeof b?b(l):b.replace("%s",l)},s.to=function(e,t){return i(e,t,this,!0)},s.from=function(e,t){return i(e,t,this)};var a=function(e){return e.$u?n.utc():n()};s.toNow=function(e){return this.to(a(this),e)},s.fromNow=function(e){return this.from(a(this),e)}}}()},4020:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),s=new RegExp("("+t+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],r(n),r(s))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n)||[],s=1;s<t.length;s++)t=(e=r(t,s).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=s.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=s.exec(e)}t["%C2"]="";for(var a=Object.keys(t),o=0;o<a.length;o++){var c=a[o];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function s(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,s,i,a){if("function"!=typeof s)throw new TypeError("The listener must be a function");var o=new r(s,i||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,s,r=[];if(0===this._eventsCount)return r;for(s in e=this._events)t.call(e,s)&&r.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,i=s.length,a=new Array(i);r<i;r++)a[r]=s[r].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,s=this._events[t];return s?s.fn?1:s.length:0},o.prototype.emit=function(e,t,s,r,i,a){var o=n?n+e:e;if(!this._events[o])return!1;var c,l,u=this._events[o],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,s),!0;case 4:return u.fn.call(u.context,t,s,r),!0;case 5:return u.fn.call(u.context,t,s,r,i),!0;case 6:return u.fn.call(u.context,t,s,r,i,a),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,s);break;case 4:u[l].fn.call(u[l].context,t,s,r);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,s,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||r&&!o.once||s&&o.context!==s||a(this,i);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||r&&!o[c].once||s&&o[c].context!==s)&&l.push(o[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},2806:e=>{"use strict";e.exports=function(e,t){for(var n={},s=Object.keys(e),r=Array.isArray(t),i=0;i<s.length;i++){var a=s[i],o=e[a];(r?-1!==t.indexOf(a):t(a,o,e))&&(n[a]=o)}return n}},4155:e=>{var t,n,s=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var o,c=[],l=!1,u=-1;function h(){l&&o&&(l=!1,o.length?c=o.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(o=c,c=[];++u<t;)o&&o[u].run();u=-1,t=c.length}o=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},2478:(e,t,n)=>{"use strict";n.d(t,{jc:()=>c,o5:()=>o});Symbol();const s=Symbol();const r=Object.getPrototypeOf,i=new WeakMap,a=e=>e&&(i.has(e)?i.get(e):r(e)===Object.prototype||r(e)===Array.prototype),o=e=>a(e)&&e[s]||null,c=(e,t=!0)=>{i.set(e,t)}},500:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},610:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},2765:(e,t,n)=>{"use strict";n.d(t,{Z:()=>RA});class s{static parseWithUndefined(e){if(null!==e)return JSON.parse(e,((e,t)=>null===t?void 0:t))}}class r{name;constructor(e){this.name=e}selectStorage(e){return e?localStorage:sessionStorage}getKey(e){return`${this.name}/${e}`}set(e,t,n=!1){this.selectStorage(!n).removeItem(this.getKey(e));const s=this.selectStorage(n);try{s.setItem(this.getKey(e),JSON.stringify(t))}catch(e){if(!(e instanceof DOMException)||22!==e.code&&1014!==e.code&&"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name)throw e;s.clear(),location.reload()}}get(e,t){let n=sessionStorage.getItem(this.getKey(e))||localStorage.getItem(this.getKey(e));return null===n?t:s.parseWithUndefined(n)}getAll(){const e={};for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=s.parseWithUndefined(sessionStorage.getItem(n)))}for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(this.name)&&(e[n.substring(this.name.length+1)]=s.parseWithUndefined(localStorage.getItem(n)))}return e}checkPermanently(e){return null!==localStorage.getItem(this.getKey(e))}delete(e){sessionStorage.removeItem(this.getKey(e)),localStorage.removeItem(this.getKey(e))}clear(){for(let e=0;e<sessionStorage.length;e++){const t=sessionStorage.key(e);t&&t.startsWith(this.name)&&sessionStorage.removeItem(t)}for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(this.name)&&localStorage.removeItem(t)}}}class i{static pull(e,...t){const n=new Set(t);for(let t=e.length-1;t>=0;t--)n.has(e[t])&&e.splice(t,1)}static insert(e,t,n){e.splice(t,0,n)}static shuffle(e){let t=e.length;for(;0!==t;){const n=Math.floor(Math.random()*t);t-=1,[e[t],e[n]]=[e[n],e[t]]}return e}static checkSame(e,t){if(e.length!==t.length)return!1;const n=new Set(t);for(const t of e)if(!n.has(t))return!1;return!0}}class a{static NEXT_ID=0;id=a.NEXT_ID++;allowedEvents=["delete"];eventMap={};delegateEvents=[];deleted=!1;addAllowedEvents(...e){this.allowedEvents.push(...e)}addEventHandler(e,t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);void 0===this.eventMap[e]&&(this.eventMap[e]=[]),this.eventMap[e].push(t)}removeDelegateEvents(e){for(const[t,n]of Object.entries(e.events))for(const s of n)e.delegate.off(t,s);i.pull(this.delegateEvents,e)}on(e,t){if(Array.isArray(e))for(const n of e)this.addEventHandler(n,t);else this.addEventHandler(e,t);return this}once(e,t){const n=(...s)=>{this.off(e,n),t(...s)};this.addEventHandler(e,n)}off(e,t){void 0!==this.eventMap?.[e]&&(i.pull(this.eventMap[e],t),0===this.eventMap[e].length&&delete this.eventMap[e])}async fireEvent(e,...t){if(!this.allowedEvents.includes(e))throw new Error(`EventContainer ${this.constructor.name} does not allow event ${e}`);const n=[],s=[],r=this.eventMap[e];if(void 0!==r)for(const e of[...r])if(r.includes(e)){const r=e(...t);r instanceof Promise?s.push(r):n.push(r)}return n.concat(await Promise.all(s))}onDelegate(e,t,n){let s=this.delegateEvents.find((t=>t.delegate===e));void 0===s&&(s={delegate:e,events:{}},this.delegateEvents.push(s)),"string"==typeof t&&(t=[t]);for(const r of t)void 0===s.events[r]&&(s.events[r]=[]),s.events[r].push(n),e.on(r,n)}offDelegate(e){const t=this.delegateEvents.find((t=>t.delegate===e));void 0!==t&&this.removeDelegateEvents(t)}offAll(){this.eventMap={};for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=[]}delete(){for(const e of[...this.delegateEvents])this.removeDelegateEvents(e);this.delegateEvents=void 0,this.fireEvent("delete"),this.allowedEvents=void 0,this.eventMap=void 0,this.deleted=!0}}class o extends a{parent;children=[];append(...e){for(const t of e)void 0!==t&&t.appendTo(this);return this}appendTo(e,t){return this.parent===e&&void 0!==t&&this.parent.children.indexOf(this)<t&&(t-=1),this.removeFromParent(),void 0!==t&&t<e.children.length?e.children.splice(t,0,this):e.children.push(this),this.parent=e,this}removeFromParent(){void 0!==this.parent&&(i.pull(this.parent.children,this),this.parent=void 0)}empty(){for(;this.children.length>0;)this.children[0].delete();return this}checkChild(e){const t=[...this.children];for(;t.length>0;){const n=t.pop();if(n===e)return!0;t.push(...n.children)}return!1}delete(){super.delete(),this.removeFromParent(),this.empty(),this.children=void 0}}class c extends o{static NUMBER_STYLE_KEY=["zIndex","opacity","flexGrow","flexShrink","gridGap","order","zoom"];static keyframesCount=0;static createElement(e){let t;const n=e.indexOf("#");if(-1!==n){t=e.substring(n+1),e=e.substring(0,n);const s=t.indexOf(".");-1!==s&&(e+=t.substring(s),t=t.substring(0,s))}let s;const r=e.indexOf(".");-1!==r&&(s=e.substring(r+1).replace(/\./g," "),e=e.substring(0,r)),""===e&&(e="div");const i=document.createElement(e);return void 0!==t&&(i.id=t),void 0!==s&&(i.className=s),i}children=[];domEventMap={};windowEventMap={};domElement;constructor(e,...t){super(),this.addAllowedEvents("visible"),e instanceof HTMLElement?this.domElement=e:this.domElement=c.createElement(e),this.append(...t)}style(e){for(const[t,n]of Object.entries(e))void 0===n?this.domElement.style[t]=null:"number"==typeof n&&!0!==c.NUMBER_STYLE_KEY.includes(t)?this.domElement.style[t]=`${n}px`:this.domElement.style[t]=n;return this}get rect(){return this.domElement.getBoundingClientRect()}get innerScrollPosition(){let e=0,t=0;if(this.domElement!==document.body){let n=this.domElement.parentNode;for(;n!==document.body&&null!==n;)n instanceof HTMLElement&&(e+=n.scrollLeft,t+=n.scrollTop),n=n.parentNode}return{left:e,top:t}}onDom(e,t){void 0===this.domEventMap[e]&&(this.domEventMap[e]=[]);const n=e=>t(e,this);this.domEventMap[e].push({eventHandler:t,domEventHandler:n}),this.domElement.addEventListener(e,n)}onWindow(e,t){void 0===this.windowEventMap[e]&&(this.windowEventMap[e]=[]);const n=e=>t(e,this);this.windowEventMap[e].push({eventHandler:t,domEventHandler:n}),window.addEventListener(e,n)}offDom(e,t){const n=this.domEventMap[e];if(void 0!==n){const s=n.find((e=>e.eventHandler===t));void 0!==s&&(this.domElement.removeEventListener(e,s.domEventHandler),i.pull(n,s),0===n.length&&delete this.domEventMap[e])}}fireDomEvent(e){this.domElement.dispatchEvent(new Event(e))}appendText(e){if("TEXTAREA"===this.domElement.tagName)this.domElement.append(e);else{const t=new DocumentFragment,n=e.split("\n");for(const[e,s]of n.entries())e>0&&t.append(document.createElement("br")),t.append(s);this.domElement.append(t)}return this}set text(e){this.empty().appendText(e)}append(...e){for(const t of e)if(void 0!==t)if("string"==typeof t)this.appendText(t);else if(t instanceof c)t.appendTo(this);else for(const[e,n]of Object.entries(t))"function"==typeof n?this.onDom(e,n):"style"===e&&"object"==typeof n?this.style(n):void 0===n?this.domElement.removeAttribute(e):this.domElement.setAttribute(e,String(n));return this}checkVisible(){return void 0!==this.parent&&(this.parent.domElement===document.body||this.parent.checkVisible())}fireVisible(){this.fireEvent("visible");for(const e of this.children)e.fireVisible()}appendTo(e,t){void 0!==t&&t<e.children.length?e.domElement.insertBefore(this.domElement,e.children[t].domElement):e.domElement.append(this.domElement);const n=super.appendTo(e,t);return!0===this.checkVisible()&&this.fireVisible(),n}empty(){for(super.empty();this.domElement.firstChild;)this.domElement.removeChild(this.domElement.firstChild);return this}addClass(e){return this.domElement.classList.add(e),this}deleteClass(e){this.domElement.classList.remove(e)}hasClass(e){return this.domElement.classList.contains(e)}toggleClass(e){this.domElement.classList.toggle(e)}clone(){return new c(this.domElement.cloneNode(!0))}delete(){this.domElement.remove(),this.domEventMap=void 0;for(const[e,t]of Object.entries(this.windowEventMap))for(const n of t)window.removeEventListener(e,n.domEventHandler);this.windowEventMap=void 0,super.delete(),this.domElement=void 0}animate({keyframes:e,duration:t=.5,timingFunction:n="ease",delay:s=0,iterationCount:r=1,direction:i="normal",onEnd:a=(()=>{})}){const o="__KEYFRAMES_"+c.keyframesCount++;let l="",u={};for(const[t,n]of Object.entries(e)){l+=`${t}{`;for(let[e,t]of Object.entries(n))"number"!=typeof t||["zIndex","opacity"].includes(e)||(t+="px"),l+=`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}:${t};`;l+="}","from"===t||"0%"===t?u={...u,...n}:"to"!==t&&"100%"!==t||(u={...u,...n})}const h=document.createElement("style");h.setAttribute("type","text/css"),h.appendChild(document.createTextNode(`@keyframes ${o}{${l}}`)),document.head.appendChild(h),u={...u,animation:`${o} ${t}s ${n} ${s}s ${r} ${i}`},this.style(u),1===r&&setTimeout((()=>{this.deleted||a(),h.remove()}),1e3*t)}}const l=new class extends c{constructor(){super(document.body)}};const u=new class{paramRegex=/{(.+)}/;match(e,t,n){for(let s=0;s<e.length;s++){const r=t[s];if(void 0===r)return!1;let i=e[s];if("**"===r)return!0;const a=this.paramRegex.exec(r);if(!r.startsWith("{")){const e=r.indexOf("{");if(i.substring(0,e)!==r.substring(0,e))return!1;i=i.substring(e)}if(i&&a)n&&(n[a[1]]=i);else if("*"!==r&&r!==i)return!1;if(s===e.length-1&&s<t.length-1&&""!==t[t.length-1])return!1}return!0}parse(e,t,n){const s=e.split("/"),r=t.split("/");return this.match(s,r,n)}},h=e=>decodeURIComponent(e.endsWith("/")?e.slice(0,-1).substring(1):e.substring(1)),d=(e,t,n,s)=>t.some((t=>u.match(e,t.split("/"),s)))&&!n.some((t=>u.match(e,t.split("/"))));const f=new class extends a{routes=[];redirects=[];openingViews=[];forwarding=!1;constructor(){super(),this.addAllowedEvents("go"),window.addEventListener("popstate",(e=>{if(!0===this.forwarding)this.forwarding=!1;else{const t=l.children.findLast((e=>e.hasClass("popup-background")));t?(this.forwarding=!0,window.history.forward(),t.delete()):this.check(e.state??void 0)}for(const e of l.children)e.hasClass("dropdown-menu")&&e.delete()}))}closeAllPopup(){for(const e of l.children)e.hasClass("popup-background")&&e.delete()}check(e){const t=h(location.pathname),n=t.split("/");let s=!1;const r=[];for(const{patterns:t,excludes:s,to:r}of this.redirects){const i=e?{...e}:{};if(d(n,t,s,i)){let e=r;for(const[t,n]of Object.entries(i))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");return void this.goNoHistory(`/${e}`)}}for(const{patterns:a,excludes:o,viewType:c}of this.routes){const l=e?{...e}:{},u=this.openingViews.find((e=>e instanceof c));d(n,a,o,l)?void 0===u?(this.openingViews.push(new c(l,t)),s=!0):u.changeParams(l,t):void 0!==u&&(r.push(u),i.pull(this.openingViews,u))}for(const e of r.reverse())e.close();!0===s&&this.fireEvent("go")}route(e,t,n=[]){"string"==typeof e&&(e=[e]),this.routes.push({patterns:e,excludes:n,viewType:t});const s=h(location.pathname),r=s.split("/"),i={};d(r,e,n,i)&&this.openingViews.push(new t(i,s))}redirect(e,t,n=[]){"string"==typeof e&&(e=[e]),this.redirects.push({patterns:e,excludes:n,to:t});const s=h(location.pathname).split("/"),r={};if(d(s,e,n,r)){let e=t;for(const[t,n]of Object.entries(r))e=e.replace(new RegExp(`{${t}}`,"g"),n??"");this.goNoHistory(`/${e}`)}}go(e,t){location.pathname!==e&&(history.pushState(void 0,"",e),this.check(t),window.scrollTo(0,0))}goNoHistory(e,t){location.pathname!==e&&(history.replaceState(void 0,"",e),this.check(t),window.scrollTo(0,0))}waitAndGo(e,t){setTimeout((()=>this.go(e,t)))}refresh(){for(const e of this.openingViews.reverse())e.close();this.openingViews=[];const e=h(location.pathname),t=e.split("/");for(const{patterns:n,excludes:s,viewType:r}of this.routes){const i={};d(t,n,s,i)&&this.openingViews.push(new r(i,e))}}};const p=new class{store=new r("__BROWSER_INFO_STORE");normalizeLanguage(e){return-1!==e.indexOf("-")&&"zh-TC"!==e&&"zh-SC"!==e&&(e=e.substring(0,e.indexOf("-"))),e}get language(){let e=this.store.get("lang")||navigator.language;return this.normalizeLanguage(e)}set language(e){this.store.set("lang",this.normalizeLanguage(e))}changeLanguage(e){if(!e)throw new Error("Invalid language code.");this.language=e,f.refresh()}get isPhoneSize(){return window.innerWidth<=859}};class g extends c{constructor(e,...t){super(e+".component"),this.append(...t)}}const m=(e,...t)=>new c(c.createElement(e),...t);class y extends g{constructor(e){super("ul.dropdown-menu");for(const t of e.items)this.append(m("li",m("button",t.title,{click:e=>{e.stopPropagation(),t.click(),this.delete()}})));this.style({left:e.left,top:e.top}),l.append(this),window.addEventListener("click",this.windowClickHandler)}windowClickHandler=e=>{this.domElement.contains(e.target)||this.delete()};delete(){window.removeEventListener("click",this.windowClickHandler),super.delete()}}n(1074);class b extends g{constructor(e){super("span.material-icon.material-symbols-outlined"),this.text=e}}class w extends c{constructor(e){super(".popup-background"),this.onDom("click",(t=>{!0===e.barrierDismissible&&t.target===this.domElement&&this.delete()})),l.append(this)}}class v extends g{titleContainer;titleText;constructor(e){super("button"+(void 0!==e.type?"."+e.type:".contained")+(e.tag??"")),void 0!==e.icon&&this.append(e.icon),void 0!==e.title&&this.append(this.titleContainer=m("span.title",this.titleText=e.title)),void 0!==e.href&&(this.domElement.href=e.href,this.domElement.target="_blank"),!0===e.disabled&&this.disable(),void 0!==e.click&&this.onDom("click",(t=>{!0!==this.hasClass("disabled")&&e.click(t,this)}))}set title(e){void 0!==this.titleContainer?this.titleContainer.text=e:this.append(this.titleContainer=m("span.title",e)),this.titleText=e}disable(){return this.addClass("disabled"),this}enable(){return this.deleteClass("disabled"),this}}var A;!function(e){e.Contained="contained",e.Outlined="outlined",e.Text="text"}(A||(A={}));const E=A;class k extends g{timeoutId;constructor(e){super(".snackbar"),this.append(m("main",m("p",e.message),e.action?new v({tag:".action",type:E.Text,title:e.action.title,click:()=>{e.action?.click(),this.delete()}}):void 0,m("button.close",new b("close"),{click:()=>this.delete()}))),l.append(this),this.timeoutId=setTimeout((()=>this.delete()),5e3)}delete(){clearTimeout(this.timeoutId),super.delete()}}class _ extends g{constructor(e){super(".splash-screen"),this.append(e),this.appendTo(l)}}class P extends w{content;constructor(e){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.alert",m("header",m("h1",e.title)),m("main",m("p",e.message)),m("footer",new v({type:E.Text,tag:".confirm-button",title:e.confirmTitle??"OK",click:()=>this.delete()}))))}}class C extends w{content;constructor(e,t,n){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.confirm",m("header",m("h1",e.title)),m("main",m("p",e.message)),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>{n&&n(),this.delete()},title:e.cancelTitle??"Cancel"}),new v({type:E.Contained,tag:".confirm-button",click:async(n,s)=>{s.domElement.setAttribute("disabled","disabled"),e.loadingTitle&&(s.text=e.loadingTitle),await t(),this.delete()},title:e.confirmTitle??"Confirm"}))))}}class x extends w{content;constructor(e){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.error-alert",m("header",m("h1",new b("error"),e.title)),m("main",m("p",e.message)),m("footer",new v({type:E.Text,tag:".confirm-button",title:e.confirmTitle??"OK",click:()=>this.delete()}))))}}class S extends g{_id;constructor(e,t){super("li.tab"),this._id=e,this.append(...Array.isArray(t)?t:[t])}set active(e){e?this.addClass("active"):this.deleteClass("active")}}class I extends g{children=[];store;constructor(e,t){super("ul.tabs"),this.addAllowedEvents("select"),this.store=new r(`tabs-${e}`);for(const e of t){const t=new S(e.id,e.label);t.onDom("click",(()=>this.select(e.id))),this.append(t)}}init(){if(this.store.get("selected"))this.select(this.store.get("selected"));else{const e=this.children[0]?._id;e&&this.select(e)}}select(e){for(const t of this.children)t.active=t._id===e;this.store.set("selected",e,!0),this.fireEvent("select",e)}}function T(e){return null==e}var O=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},N=function(e,t){var n,s,r,i;if(t)for(n=0,s=(i=Object.keys(t)).length;n<s;n+=1)e[r=i[n]]=t[r];return e},j={isNothing:T,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:T(e)?[]:[e]},repeat:function(e,t){var n,s="";for(n=0;n<t;n+=1)s+=e;return s},isNegativeZero:O,extend:N};function U(e,t){var n="",s=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),s+" "+n):s}function L(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=U(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}L.prototype=Object.create(Error.prototype),L.prototype.constructor=L,L.prototype.toString=function(e){return this.name+": "+U(this,e)};var B=L;function R(e,t,n,s,r){var i="",a="",o=Math.floor(r/2)-1;return s-t>o&&(t=s-o+(i=" ... ").length),n-s>o&&(n=s+o-(a=" ...").length),{str:i+e.slice(t,n).replace(/\t/g,"")+a,pos:s-t+i.length}}function M(e,t){return j.repeat(" ",t-e.length)+e}var D=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,s=/\r?\n|\r|\0/g,r=[0],i=[],a=-1;n=s.exec(e.buffer);)i.push(n.index),r.push(n.index+n[0].length),e.position<=n.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var o,c,l="",u=Math.min(e.line+t.linesAfter,i.length).toString().length,h=t.maxLength-(t.indent+u+3);for(o=1;o<=t.linesBefore&&!(a-o<0);o++)c=R(e.buffer,r[a-o],i[a-o],e.position-(r[a]-r[a-o]),h),l=j.repeat(" ",t.indent)+M((e.line-o+1).toString(),u)+" | "+c.str+"\n"+l;for(c=R(e.buffer,r[a],i[a],e.position,h),l+=j.repeat(" ",t.indent)+M((e.line+1).toString(),u)+" | "+c.str+"\n",l+=j.repeat("-",t.indent+u+3+c.pos)+"^\n",o=1;o<=t.linesAfter&&!(a+o>=i.length);o++)c=R(e.buffer,r[a+o],i[a+o],e.position-(r[a]-r[a+o]),h),l+=j.repeat(" ",t.indent)+M((e.line+o+1).toString(),u)+" | "+c.str+"\n";return l.replace(/\n$/,"")},F=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$=["scalar","sequence","mapping"];var G=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===F.indexOf(t))throw new B('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===$.indexOf(this.kind))throw new B('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function H(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,s){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=s)})),n[t]=e})),n}function W(e){return this.extend(e)}W.prototype.extend=function(e){var t=[],n=[];if(e instanceof G)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new B("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof G))throw new B("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new B("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new B("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof G))throw new B("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var s=Object.create(W.prototype);return s.implicit=(this.implicit||[]).concat(t),s.explicit=(this.explicit||[]).concat(n),s.compiledImplicit=H(s,"implicit"),s.compiledExplicit=H(s,"explicit"),s.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function s(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(s);return n}(s.compiledImplicit,s.compiledExplicit),s};var z=W,q=new G("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),K=new G("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),V=new G("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),J=new z({explicit:[q,K,V]});var Q=new G("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var Y=new G("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function X(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Z(e){return 48<=e&&e<=55}function ee(e){return 48<=e&&e<=57}var te=new G("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,s=0,r=!1;if(!n)return!1;if("-"!==(t=e[s])&&"+"!==t||(t=e[++s]),"0"===t){if(s+1===n)return!0;if("b"===(t=e[++s])){for(s++;s<n;s++)if("_"!==(t=e[s])){if("0"!==t&&"1"!==t)return!1;r=!0}return r&&"_"!==t}if("x"===t){for(s++;s<n;s++)if("_"!==(t=e[s])){if(!X(e.charCodeAt(s)))return!1;r=!0}return r&&"_"!==t}if("o"===t){for(s++;s<n;s++)if("_"!==(t=e[s])){if(!Z(e.charCodeAt(s)))return!1;r=!0}return r&&"_"!==t}}if("_"===t)return!1;for(;s<n;s++)if("_"!==(t=e[s])){if(!ee(e.charCodeAt(s)))return!1;r=!0}return!(!r||"_"===t)},construct:function(e){var t,n=e,s=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(s=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return s*parseInt(n.slice(2),2);if("x"===n[1])return s*parseInt(n.slice(2),16);if("o"===n[1])return s*parseInt(n.slice(2),8)}return s*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!j.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ne=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var se=/^[-+]?[0-9]+e/;var re=new G("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!ne.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||j.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(j.isNegativeZero(e))return"-0.0";return n=e.toString(10),se.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),ie=J.extend({implicit:[Q,Y,te,re]}),ae=ie,oe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ce=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var le=new G("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==oe.exec(e)||null!==ce.exec(e))},construct:function(e){var t,n,s,r,i,a,o,c,l=0,u=null;if(null===(t=oe.exec(e))&&(t=ce.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],s=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,s,r));if(i=+t[4],a=+t[5],o=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),c=new Date(Date.UTC(n,s,r,i,a,o,l)),u&&c.setTime(c.getTime()-u),c},instanceOf:Date,represent:function(e){return e.toISOString()}});var ue=new G("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var de=new G("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,s=0,r=e.length,i=he;for(n=0;n<r;n++)if(!((t=i.indexOf(e.charAt(n)))>64)){if(t<0)return!1;s+=6}return s%8==0},construct:function(e){var t,n,s=e.replace(/[\r\n=]/g,""),r=s.length,i=he,a=0,o=[];for(t=0;t<r;t++)t%4==0&&t&&(o.push(a>>16&255),o.push(a>>8&255),o.push(255&a)),a=a<<6|i.indexOf(s.charAt(t));return 0===(n=r%4*6)?(o.push(a>>16&255),o.push(a>>8&255),o.push(255&a)):18===n?(o.push(a>>10&255),o.push(a>>2&255)):12===n&&o.push(a>>4&255),new Uint8Array(o)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,s="",r=0,i=e.length,a=he;for(t=0;t<i;t++)t%3==0&&t&&(s+=a[r>>18&63],s+=a[r>>12&63],s+=a[r>>6&63],s+=a[63&r]),r=(r<<8)+e[t];return 0===(n=i%3)?(s+=a[r>>18&63],s+=a[r>>12&63],s+=a[r>>6&63],s+=a[63&r]):2===n?(s+=a[r>>10&63],s+=a[r>>4&63],s+=a[r<<2&63],s+=a[64]):1===n&&(s+=a[r>>2&63],s+=a[r<<4&63],s+=a[64],s+=a[64]),s}}),fe=Object.prototype.hasOwnProperty,pe=Object.prototype.toString;var ge=new G("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,s,r,i,a=[],o=e;for(t=0,n=o.length;t<n;t+=1){if(s=o[t],i=!1,"[object Object]"!==pe.call(s))return!1;for(r in s)if(fe.call(s,r)){if(i)return!1;i=!0}if(!i)return!1;if(-1!==a.indexOf(r))return!1;a.push(r)}return!0},construct:function(e){return null!==e?e:[]}}),me=Object.prototype.toString;var ye=new G("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,s,r,i,a=e;for(i=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(s=a[t],"[object Object]"!==me.call(s))return!1;if(1!==(r=Object.keys(s)).length)return!1;i[t]=[r[0],s[r[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,s,r,i,a=e;for(i=new Array(a.length),t=0,n=a.length;t<n;t+=1)s=a[t],r=Object.keys(s),i[t]=[r[0],s[r[0]]];return i}}),be=Object.prototype.hasOwnProperty;var we=new G("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(be.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),ve=ae.extend({implicit:[le,ue],explicit:[de,ge,ye,we]}),Ae=Object.prototype.hasOwnProperty,Ee=1,ke=2,_e=3,Pe=4,Ce=1,xe=2,Se=3,Ie=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Te=/[\x85\u2028\u2029]/,Oe=/[,\[\]\{\}]/,Ne=/^(?:!|!!|![a-z\-]+!)$/i,je=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ue(e){return Object.prototype.toString.call(e)}function Le(e){return 10===e||13===e}function Be(e){return 9===e||32===e}function Re(e){return 9===e||32===e||10===e||13===e}function Me(e){return 44===e||91===e||93===e||123===e||125===e}function De(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Fe(e){return 120===e?2:117===e?4:85===e?8:0}function $e(e){return 48<=e&&e<=57?e-48:-1}function Ge(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function He(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var We=new Array(256),ze=new Array(256),qe=0;qe<256;qe++)We[qe]=Ge(qe)?1:0,ze[qe]=Ge(qe);function Ke(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||ve,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ve(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=D(n),new B(t,n)}function Je(e,t){throw Ve(e,t)}function Qe(e,t){e.onWarning&&e.onWarning.call(null,Ve(e,t))}var Ye={YAML:function(e,t,n){var s,r,i;null!==e.version&&Je(e,"duplication of %YAML directive"),1!==n.length&&Je(e,"YAML directive accepts exactly one argument"),null===(s=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Je(e,"ill-formed argument of the YAML directive"),r=parseInt(s[1],10),i=parseInt(s[2],10),1!==r&&Je(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&Qe(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var s,r;2!==n.length&&Je(e,"TAG directive accepts exactly two arguments"),s=n[0],r=n[1],Ne.test(s)||Je(e,"ill-formed tag handle (first argument) of the TAG directive"),Ae.call(e.tagMap,s)&&Je(e,'there is a previously declared suffix for "'+s+'" tag handle'),je.test(r)||Je(e,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch(t){Je(e,"tag prefix is malformed: "+r)}e.tagMap[s]=r}};function Xe(e,t,n,s){var r,i,a,o;if(t<n){if(o=e.input.slice(t,n),s)for(r=0,i=o.length;r<i;r+=1)9===(a=o.charCodeAt(r))||32<=a&&a<=1114111||Je(e,"expected valid JSON character");else Ie.test(o)&&Je(e,"the stream contains non-printable characters");e.result+=o}}function Ze(e,t,n,s){var r,i,a,o;for(j.isObject(n)||Je(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,o=(r=Object.keys(n)).length;a<o;a+=1)i=r[a],Ae.call(t,i)||(t[i]=n[i],s[i]=!0)}function et(e,t,n,s,r,i,a,o,c){var l,u;if(Array.isArray(r))for(l=0,u=(r=Array.prototype.slice.call(r)).length;l<u;l+=1)Array.isArray(r[l])&&Je(e,"nested arrays are not supported inside keys"),"object"==typeof r&&"[object Object]"===Ue(r[l])&&(r[l]="[object Object]");if("object"==typeof r&&"[object Object]"===Ue(r)&&(r="[object Object]"),r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===s)if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)Ze(e,t,i[l],n);else Ze(e,t,i,n);else e.json||Ae.call(n,r)||!Ae.call(t,r)||(e.line=a||e.line,e.lineStart=o||e.lineStart,e.position=c||e.position,Je(e,"duplicated mapping key")),"__proto__"===r?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[r]=i,delete n[r];return t}function tt(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):Je(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function nt(e,t,n){for(var s=0,r=e.input.charCodeAt(e.position);0!==r;){for(;Be(r);)9===r&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&35===r)do{r=e.input.charCodeAt(++e.position)}while(10!==r&&13!==r&&0!==r);if(!Le(r))break;for(tt(e),r=e.input.charCodeAt(e.position),s++,e.lineIndent=0;32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position)}return-1!==n&&0!==s&&e.lineIndent<n&&Qe(e,"deficient indentation"),s}function st(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!Re(t)))}function rt(e,t){1===t?e.result+=" ":t>1&&(e.result+=j.repeat("\n",t-1))}function it(e,t){var n,s,r=e.tag,i=e.anchor,a=[],o=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),s=e.input.charCodeAt(e.position);0!==s&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,Je(e,"tab characters must not be used in indentation")),45===s)&&Re(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,nt(e,!0,-1)&&e.lineIndent<=t)a.push(null),s=e.input.charCodeAt(e.position);else if(n=e.line,ct(e,t,_e,!1,!0),a.push(e.result),nt(e,!0,-1),s=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==s)Je(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=r,e.anchor=i,e.kind="sequence",e.result=a,!0)}function at(e){var t,n,s,r,i=!1,a=!1;if(33!==(r=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&Je(e,"duplication of a tag property"),60===(r=e.input.charCodeAt(++e.position))?(i=!0,r=e.input.charCodeAt(++e.position)):33===r?(a=!0,n="!!",r=e.input.charCodeAt(++e.position)):n="!",t=e.position,i){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&62!==r);e.position<e.length?(s=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):Je(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==r&&!Re(r);)33===r&&(a?Je(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),Ne.test(n)||Je(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),Oe.test(s)&&Je(e,"tag suffix cannot contain flow indicator characters")}s&&!je.test(s)&&Je(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch(t){Je(e,"tag name is malformed: "+s)}return i?e.tag=s:Ae.call(e.tagMap,n)?e.tag=e.tagMap[n]+s:"!"===n?e.tag="!"+s:"!!"===n?e.tag="tag:yaml.org,2002:"+s:Je(e,'undeclared tag handle "'+n+'"'),!0}function ot(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&Je(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!Re(n)&&!Me(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Je(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function ct(e,t,n,s,r){var i,a,o,c,l,u,h,d,f,p=1,g=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=a=o=Pe===n||_e===n,s&&nt(e,!0,-1)&&(g=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;at(e)||ot(e);)nt(e,!0,-1)?(g=!0,o=i,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):o=!1;if(o&&(o=g||r),1!==p&&Pe!==n||(d=Ee===n||ke===n?t:t+1,f=e.position-e.lineStart,1===p?o&&(it(e,f)||function(e,t,n){var s,r,i,a,o,c,l,u=e.tag,h=e.anchor,d={},f=Object.create(null),p=null,g=null,m=null,y=!1,b=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),l=e.input.charCodeAt(e.position);0!==l;){if(y||-1===e.firstTabInLine||(e.position=e.firstTabInLine,Je(e,"tab characters must not be used in indentation")),s=e.input.charCodeAt(e.position+1),i=e.line,63!==l&&58!==l||!Re(s)){if(a=e.line,o=e.lineStart,c=e.position,!ct(e,n,ke,!1,!0))break;if(e.line===i){for(l=e.input.charCodeAt(e.position);Be(l);)l=e.input.charCodeAt(++e.position);if(58===l)Re(l=e.input.charCodeAt(++e.position))||Je(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(et(e,d,f,p,g,null,a,o,c),p=g=m=null),b=!0,y=!1,r=!1,p=e.tag,g=e.result;else{if(!b)return e.tag=u,e.anchor=h,!0;Je(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=u,e.anchor=h,!0;Je(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(y&&(et(e,d,f,p,g,null,a,o,c),p=g=m=null),b=!0,y=!0,r=!0):y?(y=!1,r=!0):Je(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=s;if((e.line===i||e.lineIndent>t)&&(y&&(a=e.line,o=e.lineStart,c=e.position),ct(e,t,Pe,!0,r)&&(y?g=e.result:m=e.result),y||(et(e,d,f,p,g,m,a,o,c),p=g=m=null),nt(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&0!==l)Je(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&et(e,d,f,p,g,null,a,o,c),b&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),b}(e,f,d))||function(e,t){var n,s,r,i,a,o,c,l,u,h,d,f,p=!0,g=e.tag,m=e.anchor,y=Object.create(null);if(91===(f=e.input.charCodeAt(e.position)))a=93,l=!1,i=[];else{if(123!==f)return!1;a=125,l=!0,i={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),f=e.input.charCodeAt(++e.position);0!==f;){if(nt(e,!0,t),(f=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=g,e.anchor=m,e.kind=l?"mapping":"sequence",e.result=i,!0;p?44===f&&Je(e,"expected the node content, but found ','"):Je(e,"missed comma between flow collection entries"),d=null,o=c=!1,63===f&&Re(e.input.charCodeAt(e.position+1))&&(o=c=!0,e.position++,nt(e,!0,t)),n=e.line,s=e.lineStart,r=e.position,ct(e,t,Ee,!1,!0),h=e.tag,u=e.result,nt(e,!0,t),f=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==f||(o=!0,f=e.input.charCodeAt(++e.position),nt(e,!0,t),ct(e,t,Ee,!1,!0),d=e.result),l?et(e,i,y,h,u,d,n,s,r):o?i.push(et(e,null,y,h,u,d,n,s,r)):i.push(u),nt(e,!0,t),44===(f=e.input.charCodeAt(e.position))?(p=!0,f=e.input.charCodeAt(++e.position)):p=!1}Je(e,"unexpected end of the stream within a flow collection")}(e,d)?m=!0:(a&&function(e,t){var n,s,r,i,a=Ce,o=!1,c=!1,l=t,u=0,h=!1;if(124===(i=e.input.charCodeAt(e.position)))s=!1;else{if(62!==i)return!1;s=!0}for(e.kind="scalar",e.result="";0!==i;)if(43===(i=e.input.charCodeAt(++e.position))||45===i)Ce===a?a=43===i?Se:xe:Je(e,"repeat of a chomping mode identifier");else{if(!((r=$e(i))>=0))break;0===r?Je(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?Je(e,"repeat of an indentation width identifier"):(l=t+r-1,c=!0)}if(Be(i)){do{i=e.input.charCodeAt(++e.position)}while(Be(i));if(35===i)do{i=e.input.charCodeAt(++e.position)}while(!Le(i)&&0!==i)}for(;0!==i;){for(tt(e),e.lineIndent=0,i=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),Le(i))u++;else{if(e.lineIndent<l){a===Se?e.result+=j.repeat("\n",o?1+u:u):a===Ce&&o&&(e.result+="\n");break}for(s?Be(i)?(h=!0,e.result+=j.repeat("\n",o?1+u:u)):h?(h=!1,e.result+=j.repeat("\n",u+1)):0===u?o&&(e.result+=" "):e.result+=j.repeat("\n",u):e.result+=j.repeat("\n",o?1+u:u),o=!0,c=!0,u=0,n=e.position;!Le(i)&&0!==i;)i=e.input.charCodeAt(++e.position);Xe(e,n,e.position,!1)}}return!0}(e,d)||function(e,t){var n,s,r;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,s=r=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(Xe(e,s,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;s=e.position,e.position++,r=e.position}else Le(n)?(Xe(e,s,r,!0),rt(e,nt(e,!1,t)),s=r=e.position):e.position===e.lineStart&&st(e)?Je(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);Je(e,"unexpected end of the stream within a single quoted scalar")}(e,d)||function(e,t){var n,s,r,i,a,o;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return Xe(e,n,e.position,!0),e.position++,!0;if(92===o){if(Xe(e,n,e.position,!0),Le(o=e.input.charCodeAt(++e.position)))nt(e,!1,t);else if(o<256&&We[o])e.result+=ze[o],e.position++;else if((a=Fe(o))>0){for(r=a,i=0;r>0;r--)(a=De(o=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+a:Je(e,"expected hexadecimal character");e.result+=He(i),e.position++}else Je(e,"unknown escape sequence");n=s=e.position}else Le(o)?(Xe(e,n,s,!0),rt(e,nt(e,!1,t)),n=s=e.position):e.position===e.lineStart&&st(e)?Je(e,"unexpected end of the document within a double quoted scalar"):(e.position++,s=e.position)}Je(e,"unexpected end of the stream within a double quoted scalar")}(e,d)?m=!0:!function(e){var t,n,s;if(42!==(s=e.input.charCodeAt(e.position)))return!1;for(s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!Re(s)&&!Me(s);)s=e.input.charCodeAt(++e.position);return e.position===t&&Je(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Ae.call(e.anchorMap,n)||Je(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],nt(e,!0,-1),!0}(e)?function(e,t,n){var s,r,i,a,o,c,l,u,h=e.kind,d=e.result;if(Re(u=e.input.charCodeAt(e.position))||Me(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(Re(s=e.input.charCodeAt(e.position+1))||n&&Me(s)))return!1;for(e.kind="scalar",e.result="",r=i=e.position,a=!1;0!==u;){if(58===u){if(Re(s=e.input.charCodeAt(e.position+1))||n&&Me(s))break}else if(35===u){if(Re(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&st(e)||n&&Me(u))break;if(Le(u)){if(o=e.line,c=e.lineStart,l=e.lineIndent,nt(e,!1,-1),e.lineIndent>=t){a=!0,u=e.input.charCodeAt(e.position);continue}e.position=i,e.line=o,e.lineStart=c,e.lineIndent=l;break}}a&&(Xe(e,r,i,!1),rt(e,e.line-o),r=i=e.position,a=!1),Be(u)||(i=e.position+1),u=e.input.charCodeAt(++e.position)}return Xe(e,r,i,!1),!!e.result||(e.kind=h,e.result=d,!1)}(e,d,Ee===n)&&(m=!0,null===e.tag&&(e.tag="?")):(m=!0,null===e.tag&&null===e.anchor||Je(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(m=o&&it(e,f))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&Je(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,l=e.implicitTypes.length;c<l;c+=1)if((h=e.implicitTypes[c]).resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(Ae.call(e.typeMap[e.kind||"fallback"],e.tag))h=e.typeMap[e.kind||"fallback"][e.tag];else for(h=null,c=0,l=(u=e.typeMap.multi[e.kind||"fallback"]).length;c<l;c+=1)if(e.tag.slice(0,u[c].tag.length)===u[c].tag){h=u[c];break}h||Je(e,"unknown tag !<"+e.tag+">"),null!==e.result&&h.kind!==e.kind&&Je(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result,e.tag)?(e.result=h.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):Je(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function lt(e){var t,n,s,r,i=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(r=e.input.charCodeAt(e.position))&&(nt(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==r));){for(a=!0,r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!Re(r);)r=e.input.charCodeAt(++e.position);for(s=[],(n=e.input.slice(t,e.position)).length<1&&Je(e,"directive name must not be less than one character in length");0!==r;){for(;Be(r);)r=e.input.charCodeAt(++e.position);if(35===r){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&!Le(r));break}if(Le(r))break;for(t=e.position;0!==r&&!Re(r);)r=e.input.charCodeAt(++e.position);s.push(e.input.slice(t,e.position))}0!==r&&tt(e),Ae.call(Ye,n)?Ye[n](e,n,s):Qe(e,'unknown document directive "'+n+'"')}nt(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,nt(e,!0,-1)):a&&Je(e,"directives end mark is expected"),ct(e,e.lineIndent-1,Pe,!1,!0),nt(e,!0,-1),e.checkLineBreaks&&Te.test(e.input.slice(i,e.position))&&Qe(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&st(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,nt(e,!0,-1)):e.position<e.length-1&&Je(e,"end of the stream or a document separator is expected")}function ut(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new Ke(e,t),s=e.indexOf("\0");for(-1!==s&&(n.position=s,Je(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)lt(n);return n.documents}var ht=function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var s=ut(e,n);if("function"!=typeof t)return s;for(var r=0,i=s.length;r<i;r+=1)t(s[r])},dt={loadAll:ht,load:function(e,t){var n=ut(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new B("expected a single document in the stream, but found more")}}},ft=Object.prototype.toString,pt=Object.prototype.hasOwnProperty,gt=65279,mt=9,yt=10,bt=13,wt=32,vt=33,At=34,Et=35,kt=37,_t=38,Pt=39,Ct=42,xt=44,St=45,It=58,Tt=61,Ot=62,Nt=63,jt=64,Ut=91,Lt=93,Bt=96,Rt=123,Mt=124,Dt=125,Ft={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},$t=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Gt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ht(e){var t,n,s;if(t=e.toString(16).toUpperCase(),e<=255)n="x",s=2;else if(e<=65535)n="u",s=4;else{if(!(e<=4294967295))throw new B("code point within a string may not be greater than 0xFFFFFFFF");n="U",s=8}return"\\"+n+j.repeat("0",s-t.length)+t}var Wt=1,zt=2;function qt(e){this.schema=e.schema||ve,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=j.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,s,r,i,a,o,c;if(null===t)return{};for(n={},r=0,i=(s=Object.keys(t)).length;r<i;r+=1)a=s[r],o=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(c=e.compiledTypeMap.fallback[a])&&pt.call(c.styleAliases,o)&&(o=c.styleAliases[o]),n[a]=o;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?zt:Wt,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Kt(e,t){for(var n,s=j.repeat(" ",t),r=0,i=-1,a="",o=e.length;r<o;)-1===(i=e.indexOf("\n",r))?(n=e.slice(r),r=o):(n=e.slice(r,i+1),r=i+1),n.length&&"\n"!==n&&(a+=s),a+=n;return a}function Vt(e,t){return"\n"+j.repeat(" ",e.indent*t)}function Jt(e){return e===wt||e===mt}function Qt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==gt||65536<=e&&e<=1114111}function Yt(e){return Qt(e)&&e!==gt&&e!==bt&&e!==yt}function Xt(e,t,n){var s=Yt(e),r=s&&!Jt(e);return(n?s:s&&e!==xt&&e!==Ut&&e!==Lt&&e!==Rt&&e!==Dt)&&e!==Et&&!(t===It&&!r)||Yt(t)&&!Jt(t)&&e===Et||t===It&&r}function Zt(e,t){var n,s=e.charCodeAt(t);return s>=55296&&s<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(s-55296)+n-56320+65536:s}function en(e){return/^\n* /.test(e)}var tn=1,nn=2,sn=3,rn=4,an=5;function on(e,t,n,s,r,i,a,o){var c,l=0,u=null,h=!1,d=!1,f=-1!==s,p=-1,g=function(e){return Qt(e)&&e!==gt&&!Jt(e)&&e!==St&&e!==Nt&&e!==It&&e!==xt&&e!==Ut&&e!==Lt&&e!==Rt&&e!==Dt&&e!==Et&&e!==_t&&e!==Ct&&e!==vt&&e!==Mt&&e!==Tt&&e!==Ot&&e!==Pt&&e!==At&&e!==kt&&e!==jt&&e!==Bt}(Zt(e,0))&&function(e){return!Jt(e)&&e!==It}(Zt(e,e.length-1));if(t||a)for(c=0;c<e.length;l>=65536?c+=2:c++){if(!Qt(l=Zt(e,c)))return an;g=g&&Xt(l,u,o),u=l}else{for(c=0;c<e.length;l>=65536?c+=2:c++){if((l=Zt(e,c))===yt)h=!0,f&&(d=d||c-p-1>s&&" "!==e[p+1],p=c);else if(!Qt(l))return an;g=g&&Xt(l,u,o),u=l}d=d||f&&c-p-1>s&&" "!==e[p+1]}return h||d?n>9&&en(e)?an:a?i===zt?an:nn:d?rn:sn:!g||a||r(e)?i===zt?an:nn:tn}function cn(e,t,n,s,r){e.dump=function(){if(0===t.length)return e.quotingType===zt?'""':"''";if(!e.noCompatMode&&(-1!==$t.indexOf(t)||Gt.test(t)))return e.quotingType===zt?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),o=s||e.flowLevel>-1&&n>=e.flowLevel;switch(on(t,o,e.indent,a,(function(t){return function(e,t){var n,s;for(n=0,s=e.implicitTypes.length;n<s;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!s,r)){case tn:return t;case nn:return"'"+t.replace(/'/g,"''")+"'";case sn:return"|"+ln(t,e.indent)+un(Kt(t,i));case rn:return">"+ln(t,e.indent)+un(Kt(function(e,t){var n,s,r=/(\n+)([^\n]*)/g,i=(o=e.indexOf("\n"),o=-1!==o?o:e.length,r.lastIndex=o,hn(e.slice(0,o),t)),a="\n"===e[0]||" "===e[0];var o;for(;s=r.exec(e);){var c=s[1],l=s[2];n=" "===l[0],i+=c+(a||n||""===l?"":"\n")+hn(l,t),a=n}return i}(t,a),i));case an:return'"'+function(e){for(var t,n="",s=0,r=0;r<e.length;s>=65536?r+=2:r++)s=Zt(e,r),!(t=Ft[s])&&Qt(s)?(n+=e[r],s>=65536&&(n+=e[r+1])):n+=t||Ht(s);return n}(t)+'"';default:throw new B("impossible error: invalid scalar style")}}()}function ln(e,t){var n=en(e)?String(t):"",s="\n"===e[e.length-1];return n+(s&&("\n"===e[e.length-2]||"\n"===e)?"+":s?"":"-")+"\n"}function un(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function hn(e,t){if(""===e||" "===e[0])return e;for(var n,s,r=/ [^ ]/g,i=0,a=0,o=0,c="";n=r.exec(e);)(o=n.index)-i>t&&(s=a>i?a:o,c+="\n"+e.slice(i,s),i=s+1),a=o;return c+="\n",e.length-i>t&&a>i?c+=e.slice(i,a)+"\n"+e.slice(a+1):c+=e.slice(i),c.slice(1)}function dn(e,t,n,s){var r,i,a,o="",c=e.tag;for(r=0,i=n.length;r<i;r+=1)a=n[r],e.replacer&&(a=e.replacer.call(n,String(r),a)),(pn(e,t+1,a,!0,!0,!1,!0)||void 0===a&&pn(e,t+1,null,!0,!0,!1,!0))&&(s&&""===o||(o+=Vt(e,t)),e.dump&&yt===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=c,e.dump=o||"[]"}function fn(e,t,n){var s,r,i,a,o,c;for(i=0,a=(r=n?e.explicitTypes:e.implicitTypes).length;i<a;i+=1)if(((o=r[i]).instanceOf||o.predicate)&&(!o.instanceOf||"object"==typeof t&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(n?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(c=e.styleMap[o.tag]||o.defaultStyle,"[object Function]"===ft.call(o.represent))s=o.represent(t,c);else{if(!pt.call(o.represent,c))throw new B("!<"+o.tag+'> tag resolver accepts not "'+c+'" style');s=o.represent[c](t,c)}e.dump=s}return!0}return!1}function pn(e,t,n,s,r,i,a){e.tag=null,e.dump=n,fn(e,n,!1)||fn(e,n,!0);var o,c=ft.call(e.dump),l=s;s&&(s=e.flowLevel<0||e.flowLevel>t);var u,h,d="[object Object]"===c||"[object Array]"===c;if(d&&(h=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||h||2!==e.indent&&t>0)&&(r=!1),h&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(d&&h&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===c)s&&0!==Object.keys(e.dump).length?(!function(e,t,n,s){var r,i,a,o,c,l,u="",h=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new B("sortKeys must be a boolean or a function");for(r=0,i=d.length;r<i;r+=1)l="",s&&""===u||(l+=Vt(e,t)),o=n[a=d[r]],e.replacer&&(o=e.replacer.call(n,a,o)),pn(e,t+1,a,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&yt===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,c&&(l+=Vt(e,t)),pn(e,t+1,o,!0,c)&&(e.dump&&yt===e.dump.charCodeAt(0)?l+=":":l+=": ",u+=l+=e.dump));e.tag=h,e.dump=u||"{}"}(e,t,e.dump,r),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var s,r,i,a,o,c="",l=e.tag,u=Object.keys(n);for(s=0,r=u.length;s<r;s+=1)o="",""!==c&&(o+=", "),e.condenseFlow&&(o+='"'),a=n[i=u[s]],e.replacer&&(a=e.replacer.call(n,i,a)),pn(e,t,i,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),pn(e,t,a,!1,!1)&&(c+=o+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===c)s&&0!==e.dump.length?(e.noArrayIndent&&!a&&t>0?dn(e,t-1,e.dump,r):dn(e,t,e.dump,r),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var s,r,i,a="",o=e.tag;for(s=0,r=n.length;s<r;s+=1)i=n[s],e.replacer&&(i=e.replacer.call(n,String(s),i)),(pn(e,t,i,!1,!1)||void 0===i&&pn(e,t,null,!1,!1))&&(""!==a&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=o,e.dump="["+a+"]"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new B("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&cn(e,e.dump,t,i,l)}null!==e.tag&&"?"!==e.tag&&(o=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),o="!"===e.tag[0]?"!"+o:"tag:yaml.org,2002:"===o.slice(0,18)?"!!"+o.slice(18):"!<"+o+">",e.dump=o+" "+e.dump)}return!0}function gn(e,t){var n,s,r=[],i=[];for(mn(e,r,i),n=0,s=i.length;n<s;n+=1)t.duplicates.push(r[i[n]]);t.usedDuplicates=new Array(s)}function mn(e,t,n){var s,r,i;if(null!==e&&"object"==typeof e)if(-1!==(r=t.indexOf(e)))-1===n.indexOf(r)&&n.push(r);else if(t.push(e),Array.isArray(e))for(r=0,i=e.length;r<i;r+=1)mn(e[r],t,n);else for(r=0,i=(s=Object.keys(e)).length;r<i;r+=1)mn(e[s[r]],t,n)}function yn(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}const bn={Type:G,Schema:z,FAILSAFE_SCHEMA:J,JSON_SCHEMA:ie,CORE_SCHEMA:ae,DEFAULT_SCHEMA:ve,load:dt.load,loadAll:dt.loadAll,dump:{dump:function(e,t){var n=new qt(t=t||{});n.noRefs||gn(e,n);var s=e;return n.replacer&&(s=n.replacer.call({"":s},"",s)),pn(n,0,s,!0,!0)?n.dump+"\n":""}}.dump,YAMLException:B,types:{binary:de,float:re,map:V,null:Q,pairs:ye,set:we,timestamp:le,bool:Y,int:te,merge:ue,omap:ge,seq:K,str:q},safeLoad:yn("safeLoad","load"),safeLoadAll:yn("safeLoadAll","loadAll"),safeDump:yn("safeDump","dump")},wn=JSON.parse('{"confirm_button":{"en":"Confirm","ko":"","es":"Confirmar","fr":"Confirmer","de":"Besttigen","it":"Conferma","pt":"Confirmar","ru":"","zh-CN":"","zh-TW":"","ja":""}}'),vn=()=>{let e="",t="";return 2===p.language.length?e=p.language.toLowerCase():(e=p.language.substring(0,2).toLowerCase(),t=p.language.substring(3).toLowerCase()),{language:e,locale:t}},An=(e,t={},n="en")=>{const s="string"==typeof e?wn[e]:e;if(void 0!==s){let e=s[p.language];if(void 0===e){const{language:t,locale:n}=vn();e=s[t],"object"==typeof e&&(e=void 0!==e[n]?e[n]:e[Object.keys(e)[0]])}if(void 0===e){const t=s[n];e=void 0!==t?t:s[Object.keys(s)[0]]}if(void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),void 0!==e)for(const[n,s]of Object.entries(t)){const t=new RegExp(`{${n}}`,"g");e=e.replace(t,String(s))}return void 0===e?"":e}return console.error(`${e} not exists.`),""};An.loadYAML=(e,t)=>{const n=bn.load(t);for(const[t,s]of Object.entries(n))void 0===wn[t]&&(wn[t]={}),wn[t][e]=s},An.loadYAMLs=async e=>{const t=[];for(const[n,s]of Object.entries(e))for(const e of s)t.push((async()=>{const t=bn.load(await(await fetch(e)).text());if(void 0!==t)for(const[e,s]of Object.entries(t))void 0===wn[e]&&(wn[e]={}),wn[e][n]=s})());await Promise.all(t)},An.getMessages=e=>wn[e],An.getLangMessages=(e,t="en")=>{const{language:n,locale:s}=vn(),r="string"==typeof e?wn[e]:e;if(void 0!==r){let e=r[p.language];if(void 0===e&&(e=r[n],void 0!==e&&"object"==typeof e&&(e=void 0!==e[s]?e[s]:e[Object.keys(e)[0]])),void 0===e){const n=r[t];e=void 0!==n?n:r[Object.keys(r)[0]]}return void 0!==e&&"object"==typeof e&&(e=e[Object.keys(e)[0]]),{[n]:void 0===e?"":e}}return console.error(`${e} not exists.`),{[n]:""}};const En=An;class kn extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class _n extends kn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Pn extends kn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Cn extends kn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xn=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};class Sn{constructor(e,{headers:t={},customFetch:s}={}){this.url=e,this.headers=t,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,3975,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return xn(this,void 0,void 0,(function*(){try{const{headers:s,method:r,body:i}=t;let a,o={};i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=i):"string"==typeof i?(o["Content-Type"]="text/plain",a=i):"undefined"!=typeof FormData&&i instanceof FormData?a=i:(o["Content-Type"]="application/json",a=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${e}`,{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:a}).catch((e=>{throw new _n(e)})),l=c.headers.get("x-relay-error");if(l&&"true"===l)throw new Pn(c);if(!c.ok)throw new Cn(c);let u,h=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"multipart/form-data"===h?yield c.formData():yield c.text(),{data:u,error:null}}catch(e){return{data:null,error:e}}}))}}var In=n(3975),Tn=n.n(In);class On{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=Tn():this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,s;let r=null,i=null,a=null,o=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),l=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");s&&l&&l.length>1&&(a=parseInt(l[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(r={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,a=null,o=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{r=JSON.parse(t),Array.isArray(r)&&404===e.status&&(i=[],r=null,o=200,c="OK")}catch(n){404===e.status&&""===t?(o=204,c="No Content"):r={message:t}}if(r&&this.isMaybeSingle&&(null===(s=null==r?void 0:r.details)||void 0===s?void 0:s.includes("0 rows"))&&(r=null,o=200,c="OK"),r&&this.shouldThrowOnError)throw r}return{error:r,data:i,count:a,status:o,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}}class Nn extends On{select(e){let t=!1;const n=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s}={}){const r=s?`${s}.order`:"order",i=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const s=void 0===n?"offset":`${n}.offset`,r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(r,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}={}){const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),o=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${o}"; options=${a};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class jn extends Nn{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class Un{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let r=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new jn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new jn({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){const i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new jn({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new jn({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new jn({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Ln={"X-Client-Info":"postgrest-js/1.8.5"};class Bn{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ln),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Un(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Bn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:s}={}){let r;const i=new URL(`${this.url}/rpc/${e}`);let a;n?(r="HEAD",Object.entries(t).forEach((([e,t])=>{i.searchParams.append(e,`${t}`)}))):(r="POST",a=t);const o=Object.assign({},this.headers);return s&&(o.Prefer=`count=${s}`),new jn({method:r,url:i,headers:o,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}var Rn=n(47);const Mn={"X-Client-Info":"realtime-js/2.8.4"};var Dn,Fn,$n,Gn,Hn,Wn,zn;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Dn||(Dn={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Fn||(Fn={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}($n||($n={})),function(e){e.websocket="websocket"}(Gn||(Gn={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Hn||(Hn={}));class qn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class Kn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+s));i+=s;const o=n.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class Vn{constructor(e,t,n={},s=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Wn||(Wn={}));class Jn{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jn.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=Jn.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],s()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Jn.syncDiff(this.state,e,t,n),s())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,s){const r=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(r,((e,t)=>{i[e]||(o[e]=t)})),this.map(i,((e,t)=>{const n=r[e];if(n){const s=t.map((e=>e.presence_ref)),r=n.map((e=>e.presence_ref)),i=t.filter((e=>r.indexOf(e.presence_ref)<0)),c=n.filter((e=>s.indexOf(e.presence_ref)<0));i.length>0&&(a[e]=i),c.length>0&&(o[e]=c)}else a[e]=t})),this.syncDiff(r,{joins:a,leaves:o},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,((t,s)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),i.length>0){const n=e[t].map((e=>e.presence_ref)),s=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...s)}n(t,i,s)})),this.map(i,((t,n)=>{let r=e[t];if(!r)return;const i=n.map((e=>e.presence_ref));r=r.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=r,s(t,r,n),0===r.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):s,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(zn||(zn={}));const Qn=(e,t,n={})=>{var s;const r=null!==(s=n.skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce(((n,s)=>(n[s]=Yn(s,e,t,r),n)),{})},Yn=(e,t,n,s)=>{const r=t.find((t=>t.name===e)),i=null==r?void 0:r.type,a=n[e];return i&&!s.includes(i)?Xn(i,a):Zn(a)},Xn=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return ss(t,n)}switch(e){case zn.bool:return es(t);case zn.float4:case zn.float8:case zn.int2:case zn.int4:case zn.int8:case zn.numeric:case zn.oid:return ts(t);case zn.json:case zn.jsonb:return ns(t);case zn.timestamp:return rs(t);case zn.abstime:case zn.date:case zn.daterange:case zn.int4range:case zn.int8range:case zn.money:case zn.reltime:case zn.text:case zn.time:case zn.timestamptz:case zn.timetz:case zn.tsrange:case zn.tstzrange:default:return Zn(t)}},Zn=e=>e,es=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ts=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ns=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ss=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch(e){s=r?r.split(","):[]}return s.map((e=>Xn(t,e)))}return e},rs=e=>"string"==typeof e?e.replace(" ","T"):e;var is,as,os;!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(is||(is={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(as||(as={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(os||(os={}));class cs{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Fn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vn(this,$n.join,this.params,this.timeout),this.rejoinTimer=new qn((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=Fn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fn.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Fn.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fn.errored,this.rejoinTimer.scheduleTimeout())})),this._on($n.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new Jn(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:i}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const a={},o={broadcast:r,presence:i,postgres_changes:null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==s?s:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:o},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var n;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const s=this.bindings.postgres_changes,r=null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0,i=[];for(let n=0;n<r;n++){const r=s[n],{filter:{event:a,schema:o,table:c,filter:l}}=r,u=t&&t[n];if(!u||u.event!==a||u.schema!==o||u.table!==c||u.filter!==l)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var s,r,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",(()=>n("ok"))),a.receive("timeout",(()=>n("timed out")))}));{const{event:r,payload:i}=e,a={method:"POST",headers:{apikey:null!==(n=this.socket.accessToken)&&void 0!==n?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(s=t.timeout)&&void 0!==s?s:this.timeout)).ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($n.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const s=new Vn(this,$n.leave,{},e);s.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),s.send(),this._canPush()||s.trigger("ok",{})}))}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout((()=>s.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Vn(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:c,join:l}=$n;if(n&&[a,o,c,l].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter((e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===i})).map((e=>e.callback(u,n))):null===(r=this.bindings[i])||void 0===r||r.filter((e=>{var n,s,r,a,o,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(s=t.ids)||void 0===s?void 0:s.includes(i))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:i}=e,a={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:i};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)}))}_isClosed(){return this.state===Fn.closed}_isJoined(){return this.state===Fn.joined}_isJoining(){return this.state===Fn.joining}_isLeaving(){return this.state===Fn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&cs.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($n.close,{},e)}_onError(e){this._on($n.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Qn(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Qn(e.columns,e.old_record)),t}}const ls=()=>{};class us{constructor(e,t){var s;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Mn,this.params={},this.timeout=1e4,this.transport=Rn.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ls,this.conn=null,this.sendBuffer=[],this.serializer=new Kn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,3975,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Gn.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey;r&&(this.accessToken=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qn((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Dn.connecting:return Hn.Connecting;case Dn.open:return Hn.Open;case Dn.closing:return Hn.Closing;default:return Hn.Closed}}isConnected(){return this.connectionState()===Hn.Open}channel(e,t={config:{}}){const n=new cs(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:r}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${r})`,s),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push($n.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:s,ref:r}=e;(r&&r===this.pendingHeartbeatRef||n===(null==s?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${r&&"("+r+")"||""}`,s),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,s,r))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger($n.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class hs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ds(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class fs extends hs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ps extends hs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var gs=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const ms=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,3975,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)};var ys=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const bs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ws=(e,t)=>ys(void 0,void 0,void 0,(function*(){const s=yield gs(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(n.t.bind(n,3975,23))).Response:Response}));e instanceof s?e.json().then((n=>{t(new fs(bs(n),e.status||500))})).catch((e=>{t(new ps(bs(e),e))})):t(new ps(bs(e),e))})),vs=(e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};function As(e,t,n,s,r,i){return ys(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(n,vs(t,s,r,i)).then((e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>ws(e,o)))}))}))}function Es(e,t,n,s){return ys(this,void 0,void 0,(function*(){return As(e,"GET",t,n,s)}))}function ks(e,t,n,s,r){return ys(this,void 0,void 0,(function*(){return As(e,"POST",t,s,r,n)}))}function _s(e,t,n,s,r){return ys(this,void 0,void 0,(function*(){return As(e,"DELETE",t,s,r,n)}))}var Ps=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const Cs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ss{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=ms(s)}uploadOrUpdate(e,t,n,s){return Ps(this,void 0,void 0,(function*(){try{let r;const i=Object.assign(Object.assign({},xs),s),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),r.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",i.cacheControl)):(r=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType);const o=this._removeEmptyFolders(t),c=this._getFinalPath(o),l=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:r,headers:a},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));if(l.ok)return{data:{path:o},error:null};return{data:null,error:yield l.json()}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}upload(e,t,n){return Ps(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,s){return Ps(this,void 0,void 0,(function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:xs.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:i});if(o.ok)return{data:{path:r},error:null};return{data:null,error:yield o.json()}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}createSignedUploadUrl(e){return Ps(this,void 0,void 0,(function*(){try{let t=this._getFinalPath(e);const n=yield ks(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+n.url),r=s.searchParams.get("token");if(!r)throw new hs("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:r},error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}update(e,t,n){return Ps(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t){return Ps(this,void 0,void 0,(function*(){try{return{data:yield ks(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}copy(e,t){return Ps(this,void 0,void 0,(function*(){try{return{data:{path:(yield ks(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,n){return Ps(this,void 0,void 0,(function*(){try{let s=this._getFinalPath(e),r=yield ks(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${i}`)},{data:r,error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,n){return Ps(this,void 0,void 0,(function*(){try{const s=yield ks(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:s.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null}))),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}download(e,t){return Ps(this,void 0,void 0,(function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),r=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield Es(this.fetch,`${this.url}/${n}/${t}${r}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==r&&s.push(r);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&s.push(a);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}remove(e){return Ps(this,void 0,void 0,(function*(){try{return{data:yield _s(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}list(e,t,n){return Ps(this,void 0,void 0,(function*(){try{const s=Object.assign(Object.assign(Object.assign({},Cs),t),{prefix:e||""});return{data:yield ks(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Is={"X-Client-Info":"storage-js/2.5.4"};var Ts=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};class Os{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Is),t),this.fetch=ms(n)}listBuckets(){return Ts(this,void 0,void 0,(function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}getBucket(e){return Ts(this,void 0,void 0,(function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return Ts(this,void 0,void 0,(function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return Ts(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,s,r){return ys(this,void 0,void 0,(function*(){return As(e,"PUT",t,s,r,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return Ts(this,void 0,void 0,(function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return Ts(this,void 0,void 0,(function*(){try{return{data:yield _s(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(ds(e))return{data:null,error:e};throw e}}))}}class Ns extends Os{constructor(e,t={},n){super(e,t,n)}from(e){return new Ss(this.url,this.headers,e,this.fetch)}}let js="";js="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Us={"X-Client-Info":`supabase-js-${js}/2.38.4`};var Ls=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const Bs=e=>{let t;return t=e||("undefined"==typeof fetch?Tn():fetch),(...e)=>t(...e)},Rs=(e,t,n)=>{const s=Bs(n),r="undefined"==typeof Headers?In.Headers:Headers;return(n,i)=>Ls(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let c=new r(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),s(n,Object.assign(Object.assign({},i),{headers:c}))}))};const Ms=()=>"undefined"!=typeof document,Ds={tested:!1,writable:!1},Fs=()=>{if(!Ms())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Ds.tested)return Ds.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ds.tested=!0,Ds.writable=!0}catch(e){Ds.tested=!0,Ds.writable=!1}return Ds.writable};function $s(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(e){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}const Gs=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(n.t.bind(n,3975,23)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Hs=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json,Ws=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},zs=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return n}},qs=async(e,t)=>{await e.removeItem(t)};class Ks{constructor(){this.promise=new Ks.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function Vs(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,s,r,i,a,o,c,l="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),n=i<<2|a>>4,s=(15&a)<<4|o>>2,r=(3&o)<<6|c,l+=String.fromCharCode(n),64!=o&&0!=s&&(l+=String.fromCharCode(s)),64!=c&&0!=r&&(l+=String.fromCharCode(r));return l}(n))}function Js(e){return("0"+e.toString(16)).substr(-2)}function Qs(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Js).join("")}async function Ys(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map((e=>String.fromCharCode(e))).join("")}(e);return function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(t)}Ks.promiseConstructor=Promise;class Xs extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Zs(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class er extends Xs{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class tr extends Xs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class nr extends Xs{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class sr extends nr{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class rr extends nr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class ir extends nr{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class ar extends nr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class or extends nr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cr extends nr{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function lr(e){return Zs(e)&&"AuthRetryableFetchError"===e.name}var ur=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const hr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dr=[502,503,504];async function fr(e){if(!Hs(e))throw new cr(hr(e),0);if(dr.includes(e.status))throw new cr(hr(e),e.status);let t;try{t=await e.json()}catch(e){throw new tr(hr(e),e)}throw new er(hr(t),e.status||500)}const pr=(e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function gr(e,t,n,s){var r;const i=Object.assign({},null==s?void 0:s.headers);(null==s?void 0:s.jwt)&&(i.Authorization=`Bearer ${s.jwt}`);const a=null!==(r=null==s?void 0:s.query)&&void 0!==r?r:{};(null==s?void 0:s.redirectTo)&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await async function(e,t,n,s,r,i){const a=pr(t,s,r,i);let o;try{o=await e(n,a)}catch(e){throw console.error(e),new cr(hr(e),0)}o.ok||await fr(o);if(null==s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(e){await fr(e)}}(e,t,n+o,{headers:i,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(c):{data:Object.assign({},c),error:null}}function mr(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function yr(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function br(e){return{data:e,error:null}}function wr(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=e,a=ur(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},user:Object.assign({},a)},error:null}}function vr(e){return e}var Ar=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};class Er{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Gs(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await gr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await gr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,n=Ar(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null==n?void 0:n.newEmail,delete s.newEmail),await gr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:wr,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(Zs(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await gr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,n,s,r,i,a,o;try{const c={nextPage:null,lastPage:0,total:0},l=await gr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:vr});if(l.error)throw l.error;const u=await l.json(),h=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(o=null===(a=l.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t})),c.total=parseInt(h)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(e){if(Zs(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await gr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await gr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await gr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:yr})}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{const{data:t,error:n}=await gr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await gr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(Zs(e))return{data:null,error:e};throw e}}}const kr="2.57.0",_r={"X-Client-Info":`gotrue-js/${kr}`},Pr={getItem:e=>Fs()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Fs()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Fs()&&globalThis.localStorage.removeItem(e)}};function Cr(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}globalThis&&Fs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class xr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Sr={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_r,flowType:"implicit",debug:!1},Ir=3e4;async function Tr(e,t,n){return await n()}class Or{constructor(e){var t;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Or.nextInstanceID,Or.nextInstanceID+=1,this.instanceID>0&&Ms()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Sr),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Er({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Gs(n.fetch),this.lock=n.lock||Tr,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Fs()?this.storage=Pr:(this.memoryStorage={},this.storage=Cr(this.memoryStorage)):(this.memoryStorage={},this.storage=Cr(this.memoryStorage)),Ms()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kr}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const e=!!Ms()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),await this._removeSession(),{error:n};const{session:s,redirectType:r}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",r),await this._saveSession(s),setTimeout((async()=>{"recovery"===r?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Zs(e)?{error:e}:{error:new tr("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var t,n,s;try{let r;if(await this._removeSession(),"email"in e){const{email:n,password:s,options:i}=e;let a=null,o=null;if("pkce"===this.flowType){const e=Qs();await Ws(this.storage,`${this.storageKey}-code-verifier`,e),a=await Ys(e),o=e===a?"plain":"s256"}r=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:mr})}else{if(!("phone"in e))throw new ir("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;r=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(s=null==a?void 0:a.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:mr})}}const{data:i,error:a}=r;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){const{email:n,password:s,options:r}=e;t=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:mr})}else{if(!("phone"in e))throw new ir("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:mr})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:s}):{data:{user:null,session:null},error:new rr}}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,n,s,r;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await zs(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:s}=await gr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:mr});return await qs(this.storage,`${this.storageKey}-code-verifier`),s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:s}):{data:{user:null,session:null},error:new rr}}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:n,token:s,access_token:r,nonce:i}=e,a=await gr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:mr}),{data:o,error:c}=a;return c?{data:{user:null,session:null},error:c}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c}):{data:{user:null,session:null},error:new rr}}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,n,s,r,i;try{if(await this._removeSession(),"email"in e){const{email:s,options:r}=e;let i=null,a=null;if("pkce"===this.flowType){const e=Qs();await Ws(this.storage,`${this.storageKey}-code-verifier`,e),i=await Ys(e),a=e===i?"plain":"s256"}const{error:o}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null==r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null==n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new ir("You must provide either an email or phone number.")}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,n;try{let s,r;"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession(),"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await gr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:mr});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,c=i.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,n,s;try{await this._removeSession();let r=null,i=null;if("pkce"===this.flowType){const e=Qs();await Ws(this.storage,`${this.storageKey}-code-verifier`,e),r=await Ys(e),i=e===r?"plain":"s256"}return await gr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:br})}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new sr;const{error:s}=await gr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:r}=e,{error:i}=await gr(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:i,error:a}=await gr(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:a}}throw new ir("You must provide either an email or phone number and a type")}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n)return{data:{session:e},error:null};const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,(async()=>await this._getUser())))}async _getUser(e){try{return e?await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yr}):await this._useSession((async e=>{var t,n;const{data:s,error:r}=e;if(r)throw r;return await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(t=s.session)||void 0===t?void 0:t.access_token)&&void 0!==n?n:void 0,xform:yr})}))}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new sr;const i=s.session;let a=null,o=null;if("pkce"===this.flowType&&null!=e.email){const e=Qs();await Ws(this.storage,`${this.storageKey}-code-verifier`,e),a=await Ys(e),o=e===a?"plain":"s256"}const{data:c,error:l}=await gr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:yr});if(l)throw l;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(e){if(Zs(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return Vs(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new sr;const t=Date.now()/1e3;let n=t,s=!0,r=null;const i=Vs(e.access_token);if(i.exp&&(n=i.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(Zs(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new sr;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(Zs(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e){try{if(!Ms())throw new ar("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new ar("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new or("Not a valid PKCE flow url.");const t=$s(window.location.href);if(e){if(!t.code)throw new or("No code detected.");const{data:e,error:n}=await this._exchangeCodeForSession(t.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new ar(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:i,expires_in:a,expires_at:o,token_type:c}=t;if(!(r&&a&&i&&c))throw new ar("No session defined in URL");const l=Math.round(Date.now()/1e3),u=parseInt(a);let h=l+u;o&&(h=parseInt(o));const d=h-l;1e3*d<=Ir&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${u}s`);const f=h-u;l-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,l):l-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",f,h,l);const{data:p,error:g}=await this._getUser(r);if(g)throw g;const m={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:u,expires_at:h,refresh_token:i,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(e){if(Zs(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const e=$s(window.location.href);return!(!Ms()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=$s(window.location.href),t=await zs(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const i=null===(n=s.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Zs(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await qs(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(t){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}}))}async resetPasswordForEmail(e,t={}){let n=null,s=null;if("pkce"===this.flowType){const e=Qs();await Ws(this.storage,`${this.storageKey}-code-verifier`,e),n=await Ys(e),s=e===n?"plain":"s256"}try{return await gr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*n),this._debug(t,"refreshing attempt",n),await gr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mr})),s=(e,t,n)=>n&&n.error&&lr(n.error)&&Date.now()+200*(e+1)-r<Ir,new Promise(((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await n(r);if(!s(r,null,t))return void e(t)}catch(e){if(!s(r,e))return void t(e)}})()})))}catch(e){if(this._debug(t,"error",e),Zs(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ms()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await zs(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const s=Math.round(Date.now()/1e3),r=(null!==(e=n.expires_at)&&void 0!==e?e:1/0)<s+10;if(this._debug(t,`session has${r?"":" not"} expired with margin of 10s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),lr(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(e){return this._debug(t,"error",e),void console.error(e)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ks;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new sr;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(e){if(this._debug(s,"error",e),Zs(e)){const n={session:null,error:e};return null===(t=this.refreshingDeferred)||void 0===t||t.resolve(n),n}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(e){s.push(e)}}));if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Ws(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await qs(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ms()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Ir);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-e)/Ir);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof xr))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ms()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const n=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===this.flowType){const e=Qs();await Ws(this.storage,`${this.storageKey}-code-verifier`,e);const t=await Ys(e),s=e===t?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",t,"method",s);const r=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(s)}`});n.push(r.toString())}if(null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);n.push(e.toString())}return`${this.url}/authorize?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await gr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession((async t=>{var n,s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await gr(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:((null===(s=null==a?void 0:a.totp)||void 0===s?void 0:s.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}))}catch(e){if(Zs(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:a}=await gr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})}))}catch(e){if(Zs(e))return{data:null,error:e};throw e}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await gr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Zs(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],s=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(s.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))))}}Or.nextInstanceID=0;class Nr extends Or{constructor(e){super(e)}}var jr=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};const Ur={headers:Us},Lr={schema:"public"},Br={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Rr={};class Mr{constructor(e,t,n){var s,r,i,a,o,c,l,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=e.replace(/\/$/,"");this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f=function(e,t){const{db:n,auth:s,realtime:r,global:i}=e,{db:a,auth:o,realtime:c,global:l}=t;return{db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},l),i)}}(null!=n?n:{},{db:Lr,realtime:Rr,auth:Object.assign(Object.assign({},Br),{storageKey:d}),global:Ur});this.storageKey=null!==(r=null===(s=f.auth)||void 0===s?void 0:s.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=null===(i=f.global)||void 0===i?void 0:i.headers)&&void 0!==a?a:{},this.auth=this._initSupabaseAuthClient(null!==(o=f.auth)&&void 0!==o?o:{},this.headers,null===(c=f.global)||void 0===c?void 0:c.fetch),this.fetch=Rs(t,this._getAccessToken.bind(this),null===(l=f.global)||void 0===l?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new Bn(`${h}/rest/v1`,{headers:this.headers,schema:null===(u=f.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Sn(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ns(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return jr(this,void 0,void 0,(function*(){const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:r,flowType:i,debug:a},o,c){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nr({url:this.authUrl,headers:Object.assign(Object.assign({},l),o),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:i,debug:a,fetch:c})}_initRealtimeClient(e){return new us(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=n?n:null),this.changedAccessToken=n)}}const Dr=new class extends a{client;connect(e,t){this.client=((e,t,n)=>new Mr(e,t,n))(e,t,{auth:{autoRefreshToken:!0,persistSession:!0}})}};class Fr{static toTitleCase(e){return e.replace(/(^\w|\s\w)(\S*)/g,((e,t,n)=>t.toUpperCase()+n.toLowerCase()))}static shortenEthereumAddress(e){return 42===e.length&&e.startsWith("0x")?`${e.substring(0,6)}...${e.substring(38)}`:e}static numberWithCommas(e,t){if(void 0===t||+ +e>Number.MAX_SAFE_INTEGER){const t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"0"===t[1]?t[0]:t.join(".")}const n=String(+(+e).toFixed(t)).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")}}function $r(e){return null===e?void 0:e}class Gr{closed=!1;changeParams(e,t){}close(){this.closed=!0}}var Hr=n(7484),Wr=n.n(Hr),zr=n(4110),qr=n.n(zr);const Kr="6.7.1";function Vr(e,t,n){const s=t.split("|").map((e=>e.trim()));for(let n=0;n<s.length;n++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const r=new Error(`invalid value for type ${t}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${n}`,r.value=e,r}async function Jr(e){const t=Object.keys(e);return(await Promise.all(t.map((t=>Promise.resolve(e[t]))))).reduce(((e,n,s)=>(e[t[s]]=n,e)),{})}function Qr(e,t,n){for(let s in t){let r=t[s];const i=n?n[s]:null;i&&Vr(r,i,s),Object.defineProperty(e,s,{enumerable:!0,value:r,writable:!1})}}function Yr(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(Yr).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let s=0;s<e.length;s++)n+=t[e[s]>>4],n+=t[15&e[s]];return n}if("object"==typeof e&&"function"==typeof e.toJSON)return Yr(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map((t=>`${Yr(t)}: ${Yr(e[t])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Xr(e,t){return e&&e.code===t}function Zr(e){return Xr(e,"CALL_EXCEPTION")}function ei(e,t,n){{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Yr(n)}`);for(const e in n){const t=n[e];s.push(e+"="+Yr(t))}}s.push(`code=${t}`),s.push(`version=${Kr}`),s.length&&(e+=" ("+s.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(e);break;default:s=new Error(e)}return Qr(s,{code:t}),n&&Object.assign(s,n),s}function ti(e,t,n,s){if(!e)throw ei(t,n,s)}function ni(e,t,n,s){ti(e,t,"INVALID_ARGUMENT",{argument:n,value:s})}function si(e,t,n){null==n&&(n=""),n&&(n=": "+n),ti(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),ti(e<=t,"too many arguemnts"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const ri=["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){const e=String.fromCharCode(233).normalize("NFD");if(e!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(e){}return e}),[]);function ii(e,t,n){if(null==n&&(n=""),e!==t){let e=n,t="new";n&&(e+=".",t+=" "+n),ti(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function ai(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let n=2;for(let s=0;s<t.length;s++)t[s]=parseInt(e.substring(n,n+2),16),n+=2;return t}ni(!1,"invalid BytesLike value",t||"value",e)}function oi(e,t){return ai(e,t,!1)}function ci(e,t){return ai(e,t,!0)}function li(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0))}const ui="0123456789abcdef";function hi(e){const t=oi(e);let n="0x";for(let e=0;e<t.length;e++){const s=t[e];n+=ui[(240&s)>>4]+ui[15&s]}return n}function di(e){return"0x"+e.map((e=>hi(e).substring(2))).join("")}function fi(e){return li(e,!0)?(e.length-2)/2:oi(e).length}function pi(e,t,n){const s=oi(e);return null!=n&&n>s.length&&ti(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),hi(s.slice(null==t?0:t,null==n?s.length:n))}function gi(e,t,n){const s=oi(e);ti(t>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:t,offset:t+1});const r=new Uint8Array(t);return r.fill(0),n?r.set(s,t-s.length):r.set(s,0),hi(r)}function mi(e,t){return gi(e,t,!0)}const yi=BigInt(0),bi=BigInt(1),wi=9007199254740991;function vi(e,t){const n=_i(e,"value"),s=BigInt(xi(t,"width"));if(ti(n>>s===yi,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>s-bi){return-((~n&(bi<<s)-bi)+bi)}return n}function Ai(e,t){let n=ki(e,"value");const s=BigInt(xi(t,"width")),r=bi<<s-bi;if(n<yi){n=-n,ti(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return(~n&(bi<<s)-bi)+bi}return ti(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),n}function Ei(e,t){const n=_i(e,"value"),s=BigInt(xi(t,"bits"));return n&(bi<<s)-bi}function ki(e,t){switch(typeof e){case"bigint":return e;case"number":return ni(Number.isInteger(e),"underflow",t||"value",e),ni(e>=-wi&&e<=wi,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(n){ni(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}ni(!1,"invalid BigNumberish value",t||"value",e)}function _i(e,t){const n=ki(e,t);return ti(n>=yi,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const Pi="0123456789abcdef";function Ci(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=Pi[n>>4],t+=Pi[15&n];return BigInt(t)}return ki(e)}function xi(e,t){switch(typeof e){case"bigint":return ni(e>=-wi&&e<=wi,"overflow",t||"value",e),Number(e);case"number":return ni(Number.isInteger(e),"underflow",t||"value",e),ni(e>=-wi&&e<=wi,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return xi(BigInt(e),t)}catch(n){ni(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}ni(!1,"invalid numeric value",t||"value",e)}function Si(e,t){let n=_i(e,"value").toString(16);if(null==t)n.length%2&&(n="0"+n);else{const s=xi(t,"width");for(ti(2*s>=n.length,`value exceeds width (${s} bits)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*s;)n="0"+n}return"0x"+n}function Ii(e){const t=_i(e,"value");if(t===yi)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const s=new Uint8Array(n.length/2);for(let e=0;e<s.length;e++){const t=2*e;s[e]=parseInt(n.substring(t,t+2),16)}return s}function Ti(e){let t=hi(function(e){return li(e,!0)||e instanceof Uint8Array}(e)?e:Ii(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const Oi=32,Ni=new Uint8Array(Oi),ji=["then"],Ui={};function Li(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}class Bi extends Array{#e;constructor(...e){const t=e[0];let n=e[1],s=(e[2]||[]).slice(),r=!0;t!==Ui&&(n=e,s=[],r=!1),super(n.length),n.forEach(((e,t)=>{this[t]=e}));const i=s.reduce(((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e)),new Map);if(this.#e=Object.freeze(n.map(((e,t)=>{const n=s[t];return null!=n&&1===i.get(n)?n:null}))),r)return Object.freeze(this),new Proxy(this,{get:(e,t,n)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){const n=xi(t,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const s=e[n];return s instanceof Error&&Li(`index ${n}`,s),s}if(ji.indexOf(t)>=0)return Reflect.get(e,t,n);const s=e[t];if(s instanceof Function)return function(...t){return s.apply(this===n?e:this,t)};if(!(t in e))return e.getValue.apply(this===n?e:this,[t])}return Reflect.get(e,t,n)}})}toArray(){const e=[];return this.forEach(((t,n)=>{t instanceof Error&&Li(`index ${n}`,t),e.push(t)})),e}toObject(){return this.#e.reduce(((e,t,n)=>(ti(null!=t,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),t in e||(e[t]=this.getValue(t)),e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);const n=[],s=[];for(let r=e;r<t;r++)n.push(this[r]),s.push(this.#e[r]);return new Bi(Ui,n,s)}filter(e,t){const n=[],s=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&Li(`index ${r}`,i),e.call(t,i,r,this)&&(n.push(i),s.push(this.#e[r]))}return new Bi(Ui,n,s)}map(e,t){const n=[];for(let s=0;s<this.length;s++){const r=this[s];r instanceof Error&&Li(`index ${s}`,r),n.push(e.call(t,r,s,this))}return n}getValue(e){const t=this.#e.indexOf(e);if(-1===t)return;const n=this[t];return n instanceof Error&&Li(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,t){return new Bi(Ui,e,t)}}function Ri(e){let t=Ii(e);return ti(t.length<=Oi,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Oi,offset:t.length}),t.length!==Oi&&(t=ci(di([Ni.slice(t.length%Oi),t]))),t}class Mi{name;type;localName;dynamic;constructor(e,t,n,s){Qr(this,{name:e,type:t,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){ni(!1,e,this.localName,t)}}class Di{#t;#n;constructor(){this.#t=[],this.#n=0}get data(){return di(this.#t)}get length(){return this.#n}#s(e){return this.#t.push(e),this.#n+=e.length,e.length}appendWriter(e){return this.#s(ci(e.data))}writeBytes(e){let t=ci(e);const n=t.length%Oi;return n&&(t=ci(di([t,Ni.slice(n)]))),this.#s(t)}writeValue(e){return this.#s(Ri(e))}writeUpdatableValue(){const e=this.#t.length;return this.#t.push(Ni),this.#n+=Oi,t=>{this.#t[e]=Ri(t)}}}class Fi{allowLoose;#t;#r;constructor(e,t){Qr(this,{allowLoose:!!t}),this.#t=ci(e),this.#r=0}get data(){return hi(this.#t)}get dataLength(){return this.#t.length}get consumed(){return this.#r}get bytes(){return new Uint8Array(this.#t)}#i(e,t,n){let s=Math.ceil(t/Oi)*Oi;return this.#r+s>this.#t.length&&(this.allowLoose&&n&&this.#r+t<=this.#t.length?s=t:ti(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:ci(this.#t),length:this.#t.length,offset:this.#r+s})),this.#t.slice(this.#r,this.#r+s)}subReader(e){return new Fi(this.#t.slice(this.#r+e),this.allowLoose)}readBytes(e,t){let n=this.#i(0,e,!!t);return this.#r+=n.length,n.slice(0,e)}readValue(){return Ci(this.readBytes(Oi))}readIndex(){return xi(Ci(this.readBytes(Oi)))}}function $i(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Gi(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const Hi={number:$i,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:Gi,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");$i(e.outputLen),$i(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){Gi(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},Wi=Hi,zi=BigInt(2**32-1),qi=BigInt(32);function Ki(e,t=!1){return t?{h:Number(e&zi),l:Number(e>>qi&zi)}:{h:0|Number(e>>qi&zi),l:0|Number(e&zi)}}const Vi={fromBig:Ki,split:function(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:a}=Ki(e[r],t);[n[r],s[r]]=[i,a]}return[n,s]},toBig:(e,t)=>BigInt(e>>>0)<<qi|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,s){const r=(t>>>0)+(s>>>0);return{h:e+n+(r/2**32|0)|0,l:0|r}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,s)=>t+n+s+(e/2**32|0)|0,add4L:(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),add4H:(e,t,n,s,r)=>t+n+s+r+(e/2**32|0)|0,add5H:(e,t,n,s,r,i)=>t+n+s+r+i+(e/2**32|0)|0,add5L:(e,t,n,s,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(r>>>0)},Ji=Vi,Qi=("object"==typeof self&&"crypto"in self&&self.crypto,e=>new DataView(e.buffer,e.byteOffset,e.byteLength)),Yi=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Xi(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class Zi{clone(){return this._cloneInto()}}function ea(e){const t=t=>e().update(Xi(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const[ta,na,sa]=[[],[],[]],ra=BigInt(0),ia=BigInt(1),aa=BigInt(2),oa=BigInt(7),ca=BigInt(256),la=BigInt(113);for(let e=0,t=ia,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],ta.push(2*(5*s+n)),na.push((e+1)*(e+2)/2%64);let r=ra;for(let e=0;e<7;e++)t=(t<<ia^(t>>oa)*la)%ca,t&aa&&(r^=ia<<(ia<<BigInt(e))-ia);sa.push(r)}const[ua,ha]=Ji.split(sa,!0),da=(e,t,n)=>n>32?Ji.rotlBH(e,t,n):Ji.rotlSH(e,t,n),fa=(e,t,n)=>n>32?Ji.rotlBL(e,t,n):Ji.rotlSL(e,t,n);class pa extends Zi{constructor(e,t,n,s=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Wi.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,r=(t+2)%10,i=n[r],a=n[r+1],o=da(i,a,1)^n[s],c=fa(i,a,1)^n[s+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],r=e[3];for(let n=0;n<24;n++){const s=na[n],i=da(t,r,s),a=fa(t,r,s),o=ta[n];t=e[o],r=e[o+1],e[o]=i,e[o+1]=a}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)n[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=ua[s],e[1]^=ha[s]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Wi.exists(this);const{blockLen:t,state:n}=this,s=(e=Xi(e)).length;for(let r=0;r<s;){const i=Math.min(t-this.pos,s-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,0!=(128&t)&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Wi.exists(this,!1),Wi.bytes(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,r=e.length;s<r;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,r-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Wi.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Wi.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:r,enableXOF:i}=this;return e||(e=new pa(t,n,s,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const ga=(e,t,n)=>ea((()=>new pa(t,e,n))),ma=(ga(6,144,28),ga(6,136,32),ga(6,104,48),ga(6,72,64),ga(1,144,28),ga(1,136,32)),ya=(ga(1,104,48),ga(1,72,64),(e,t,n)=>function(e){const t=(t,n)=>e(n).update(Xi(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}(((s={})=>new pa(t,e,void 0===s.dkLen?n:s.dkLen,!0))));ya(31,168,16),ya(31,136,32);let ba=!1;const wa=function(e){return ma(e)};let va=wa;function Aa(e){const t=oi(e,"data");return hi(va(t))}Aa._=wa,Aa.lock=function(){ba=!0},Aa.register=function(e){if(ba)throw new TypeError("keccak256 is locked");va=e},Object.freeze(Aa);const Ea=BigInt(0),ka=BigInt(36);function _a(e){const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let e=0;e<40;e++)n[e]=t[e].charCodeAt(0);const s=oi(Aa(n));for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&s[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const Pa={};for(let e=0;e<10;e++)Pa[String(e)]=String(e);for(let e=0;e<26;e++)Pa[String.fromCharCode(65+e)]=String(10+e);const Ca=15;function xa(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>Pa[e])).join("");for(;t.length>=Ca;){let e=t.substring(0,Ca);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const Sa=function(){const e={};for(let t=0;t<36;t++){e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t)}return e}();function Ia(e){if(ni("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=_a(e);return ni(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ni(e.substring(2,4)===xa(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=Ea;for(let n=0;n<e.length;n++)t=t*ka+Sa[e[n]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return _a("0x"+t)}ni(!1,"invalid address","address",e)}const Ta={};function Oa(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new Ua(Ta,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function Na(e,t){return new Ua(Ta,`bytes${t||""}`,e,{size:t})}const ja=Symbol.for("_ethers_typed");class Ua{type;value;#a;_typedSymbol;constructor(e,t,n,s){null==s&&(s=null),ii(Ta,e,"Typed"),Qr(this,{_typedSymbol:ja,type:t,value:n}),this.#a=s,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((e=>e.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#a}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#a?-1:!1===this.#a?this.value.length:null}static from(e,t){return new Ua(Ta,e,t)}static uint8(e){return Oa(e,8)}static uint16(e){return Oa(e,16)}static uint24(e){return Oa(e,24)}static uint32(e){return Oa(e,32)}static uint40(e){return Oa(e,40)}static uint48(e){return Oa(e,48)}static uint56(e){return Oa(e,56)}static uint64(e){return Oa(e,64)}static uint72(e){return Oa(e,72)}static uint80(e){return Oa(e,80)}static uint88(e){return Oa(e,88)}static uint96(e){return Oa(e,96)}static uint104(e){return Oa(e,104)}static uint112(e){return Oa(e,112)}static uint120(e){return Oa(e,120)}static uint128(e){return Oa(e,128)}static uint136(e){return Oa(e,136)}static uint144(e){return Oa(e,144)}static uint152(e){return Oa(e,152)}static uint160(e){return Oa(e,160)}static uint168(e){return Oa(e,168)}static uint176(e){return Oa(e,176)}static uint184(e){return Oa(e,184)}static uint192(e){return Oa(e,192)}static uint200(e){return Oa(e,200)}static uint208(e){return Oa(e,208)}static uint216(e){return Oa(e,216)}static uint224(e){return Oa(e,224)}static uint232(e){return Oa(e,232)}static uint240(e){return Oa(e,240)}static uint248(e){return Oa(e,248)}static uint256(e){return Oa(e,256)}static uint(e){return Oa(e,256)}static int8(e){return Oa(e,-8)}static int16(e){return Oa(e,-16)}static int24(e){return Oa(e,-24)}static int32(e){return Oa(e,-32)}static int40(e){return Oa(e,-40)}static int48(e){return Oa(e,-48)}static int56(e){return Oa(e,-56)}static int64(e){return Oa(e,-64)}static int72(e){return Oa(e,-72)}static int80(e){return Oa(e,-80)}static int88(e){return Oa(e,-88)}static int96(e){return Oa(e,-96)}static int104(e){return Oa(e,-104)}static int112(e){return Oa(e,-112)}static int120(e){return Oa(e,-120)}static int128(e){return Oa(e,-128)}static int136(e){return Oa(e,-136)}static int144(e){return Oa(e,-144)}static int152(e){return Oa(e,-152)}static int160(e){return Oa(e,-160)}static int168(e){return Oa(e,-168)}static int176(e){return Oa(e,-176)}static int184(e){return Oa(e,-184)}static int192(e){return Oa(e,-192)}static int200(e){return Oa(e,-200)}static int208(e){return Oa(e,-208)}static int216(e){return Oa(e,-216)}static int224(e){return Oa(e,-224)}static int232(e){return Oa(e,-232)}static int240(e){return Oa(e,-240)}static int248(e){return Oa(e,-248)}static int256(e){return Oa(e,-256)}static int(e){return Oa(e,-256)}static bytes1(e){return Na(e,1)}static bytes2(e){return Na(e,2)}static bytes3(e){return Na(e,3)}static bytes4(e){return Na(e,4)}static bytes5(e){return Na(e,5)}static bytes6(e){return Na(e,6)}static bytes7(e){return Na(e,7)}static bytes8(e){return Na(e,8)}static bytes9(e){return Na(e,9)}static bytes10(e){return Na(e,10)}static bytes11(e){return Na(e,11)}static bytes12(e){return Na(e,12)}static bytes13(e){return Na(e,13)}static bytes14(e){return Na(e,14)}static bytes15(e){return Na(e,15)}static bytes16(e){return Na(e,16)}static bytes17(e){return Na(e,17)}static bytes18(e){return Na(e,18)}static bytes19(e){return Na(e,19)}static bytes20(e){return Na(e,20)}static bytes21(e){return Na(e,21)}static bytes22(e){return Na(e,22)}static bytes23(e){return Na(e,23)}static bytes24(e){return Na(e,24)}static bytes25(e){return Na(e,25)}static bytes26(e){return Na(e,26)}static bytes27(e){return Na(e,27)}static bytes28(e){return Na(e,28)}static bytes29(e){return Na(e,29)}static bytes30(e){return Na(e,30)}static bytes31(e){return Na(e,31)}static bytes32(e){return Na(e,32)}static address(e){return new Ua(Ta,"address",e)}static bool(e){return new Ua(Ta,"bool",!!e)}static bytes(e){return new Ua(Ta,"bytes",e)}static string(e){return new Ua(Ta,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Ua(Ta,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===ja}static dereference(e,t){if(Ua.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class La extends Mi{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=Ua.dereference(t,"string");try{n=Ia(n)}catch(e){return this._throwError(e.message,t)}return e.writeValue(n)}decode(e){return Ia(Si(e.readValue(),20))}}class Ba extends Mi{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function Ra(e,t,n){let s=[];if(Array.isArray(n))s=n;else if(n&&"object"==typeof n){let e={};s=t.map((t=>{const s=t.localName;return ti(s,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),ti(!e[s],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),e[s]=!0,n[s]}))}else ni(!1,"invalid tuple value","tuple",n);ni(t.length===s.length,"types/value length mismatch","tuple",n);let r=new Di,i=new Di,a=[];t.forEach(((e,t)=>{let n=s[t];if(e.dynamic){let t=i.length;e.encode(i,n);let s=r.writeUpdatableValue();a.push((e=>{s(e+t)}))}else e.encode(r,n)})),a.forEach((e=>{e(r.length)}));let o=e.appendWriter(r);return o+=e.appendWriter(i),o}function Ma(e,t){let n=[],s=[],r=e.subReader(0);return t.forEach((t=>{let i=null;if(t.dynamic){let n=e.readIndex(),s=r.subReader(n);try{i=t.decode(s)}catch(e){if(Xr(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(Xr(e,"BUFFER_OVERRUN"))throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}if(null==i)throw new Error("investigate");n.push(i),s.push(t.localName||null)})),Bi.fromItems(n,s)}class Da extends Mi{coder;length;constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),Qr(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=Ua.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let s=this.length;-1===s&&(s=n.length,e.writeValue(n.length)),si(n.length,s,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let e=0;e<n.length;e++)r.push(this.coder);return Ra(e,r,n)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),ti(t*Oi<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*Oi,length:e.dataLength}));let n=[];for(let e=0;e<t;e++)n.push(new Ba(this.coder));return Ma(e,n)}}class Fa extends Mi{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=Ua.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class $a extends Mi{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=ci(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class Ga extends $a{constructor(e){super("bytes",e)}decode(e){return hi(super.decode(e))}}class Ha extends Mi{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),Qr(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=ci(Ua.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return hi(e.readBytes(this.size))}}const Wa=new Uint8Array([]);class za extends Mi{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(Wa)}decode(e){return e.readBytes(0),null}}const qa=BigInt(0),Ka=BigInt(1),Va=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ja extends Mi{size;signed;constructor(e,t,n){const s=(t?"int":"uint")+8*e;super(s,s,n,!1),Qr(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=ki(Ua.dereference(t,this.type)),s=Ei(Va,256);if(this.signed){let e=Ei(s,8*this.size-1);(n>e||n<-(e+Ka))&&this._throwError("value out-of-bounds",t),n=Ai(n,256)}else(n<qa||n>Ei(s,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=Ei(e.readValue(),8*this.size);return this.signed&&(t=vi(t,8*this.size)),t}}function Qa(e,t,n,s,r){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let s=t+1;s<n.length&&n[s]>>6==2;s++)e++;return e}return"OVERRUN"===e?n.length-t-1:0}const Ya=Object.freeze({error:function(e,t,n,s,r){ni(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)},ignore:Qa,replace:function(e,t,n,s,r){return"OVERLONG"===e?(ni("number"==typeof r,"invalid bad code point for replacement","badCodepoint",r),s.push(r),0):(s.push(65533),Qa(e,t,n))}});function Xa(e,t){null==t&&(t=Ya.error);const n=oi(e,"bytes"),s=[];let r=0;for(;r<n.length;){const e=n[r++];if(e>>7==0){s.push(e);continue}let i=null,a=null;if(192==(224&e))i=1,a=127;else if(224==(240&e))i=2,a=2047;else{if(240!=(248&e)){r+=t(128==(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",r-1,n,s);continue}i=3,a=65535}if(r-1+i>=n.length){r+=t("OVERRUN",r-1,n,s);continue}let o=e&(1<<8-i-1)-1;for(let e=0;e<i;e++){let e=n[r];if(128!=(192&e)){r+=t("MISSING_CONTINUE",r,n,s),o=null;break}o=o<<6|63&e,r++}null!==o&&(o>1114111?r+=t("OUT_OF_RANGE",r-1-i,n,s,o):o>=55296&&o<=57343?r+=t("UTF16_SURROGATE",r-1-i,n,s,o):o<=a?r+=t("OVERLONG",r-1-i,n,s,o):s.push(o))}return s}function Za(e,t){null!=t&&(!function(e){ti(ri.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}(t),e=e.normalize(t));let n=[];for(let t=0;t<e.length;t++){const s=e.charCodeAt(t);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(63&s|128);else if(55296==(64512&s)){t++;const r=e.charCodeAt(t);ni(t<e.length&&56320==(64512&r),"invalid surrogate pair","str",e);const i=65536+((1023&s)<<10)+(1023&r);n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(63&s|128)}return new Uint8Array(n)}function eo(e,t){return Xa(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}class to extends $a{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Za(Ua.dereference(t,"string")))}decode(e){return eo(super.decode(e))}}class no extends Mi{coders;constructor(e,t){let n=!1;const s=[];e.forEach((e=>{e.dynamic&&(n=!0),s.push(e.type)}));super("tuple","tuple("+s.join(",")+")",t,n),Qr(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,s)=>{let r=n.localName;r&&1===t[r]&&("length"===r&&(r="_length"),null==e[r]&&(e[r]=e[s]))})),Object.freeze(e)}encode(e,t){const n=Ua.dereference(t,"tuple");return Ra(e,this.coders,n)}decode(e){return Ma(e,this.coders)}}function so(e){return Aa(Za(e))}function ro(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}const io=ro("external public payable".split(" ")),ao="constant external internal payable private public pure view",oo=ro(ao.split(" ")),co="constructor error event fallback function receive struct",lo=ro(co.split(" ")),uo="calldata memory storage payable indexed",ho=ro(uo.split(" ")),fo=ro([co,uo,"tuple returns",ao].join(" ").split(" ")),po={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},go=new RegExp("^(\\s*)"),mo=new RegExp("^([0-9]+)"),yo=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),bo=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),wo=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class vo{#r;#o;get offset(){return this.#r}get length(){return this.#o.length-this.#r}constructor(e){this.#r=0,this.#o=e.slice()}clone(){return new vo(this.#o)}reset(){this.#r=0}#c(e=0,t=0){return new vo(this.#o.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e)throw new Error(`expected ${e}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=this.#c(this.#r+1,e.match+1);return this.#r=e.match+1,t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;this.#r<e.match-1;){const e=this.peek().linkNext;t.push(this.#c(this.#r+1,e)),this.#r=e}return this.#r=e.match+1,t}peek(){if(this.#r>=this.#o.length)throw new Error("out-of-bounds");return this.#o[this.#r]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#r++,e}toString(){const e=[];for(let t=this.#r;t<this.#o.length;t++){const n=this.#o[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function Ao(e){const t=[],n=t=>{const n=i<e.length?JSON.stringify(e[i]):"$EOI";throw new Error(`invalid token ${n} at ${i}: ${t}`)};let s=[],r=[],i=0;for(;i<e.length;){let a=e.substring(i),o=a.match(go);o&&(i+=o[1].length,a=e.substring(i));const c={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let l=po[a[0]]||"";if(l){if(c.type=l,c.text=a[0],i++,"OPEN_PAREN"===l)s.push(t.length-1),r.push(t.length-1);else if("CLOSE_PAREN"==l)0===s.length&&n("no matching open bracket"),c.match=s.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1;else if("COMMA"===l)c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1,r.push(t.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const n=t.pop().text;e=n+e,t[t.length-1].value=xi(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(o=a.match(yo),o){if(c.text=o[1],i+=c.text.length,fo.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(wo)){c.type="TYPE";continue}c.type="ID"}else{if(o=a.match(mo),!o)throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`);c.text=o[1],c.type="NUMBER",i+=c.text.length}}return new vo(t.map((e=>Object.freeze(e))))}function Eo(e,t){let n=[];for(const s in t.keys())e.has(s)&&n.push(s);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function ko(e,t){if(t.peekKeyword(lo)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function _o(e,t){const n=new Set;for(;;){const s=e.peekType("KEYWORD");if(null==s||t&&!t.has(s))break;if(e.pop(),n.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);n.add(s)}return Object.freeze(n)}function Po(e){let t=_o(e,oo);return Eo(t,ro("constant payable nonpayable".split(" "))),Eo(t,ro("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function Co(e,t){return e.popParams().map((e=>Fo.from(e,t)))}function xo(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return ki(e.pop().text);throw new Error("invalid gas")}return null}function So(e){if(e.length)throw new Error(`unexpected tokens: ${e.toString()}`)}const Io=new RegExp(/^(.*)\[([0-9]*)\]$/);function To(e){const t=e.match(wo);if(ni(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const n=parseInt(t[2]);ni(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);ni(0!==n&&n<=256&&n%8==0,"invalid numeric width","type",e)}return e}const Oo={},No=Symbol.for("_ethers_internal"),jo="_ParamTypeInternal",Uo="_ErrorInternal",Lo="_EventInternal",Bo="_ConstructorInternal",Ro="_FallbackInternal",Mo="_FunctionInternal",Do="_StructInternal";class Fo{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,s,r,i,a,o){if(ii(e,Oo,"ParamType"),Object.defineProperty(this,No,{value:jo}),i&&(i=Object.freeze(i.slice())),"array"===s){if(null==a||null==o)throw new Error("")}else if(null!=a||null!=o)throw new Error("");if("tuple"===s){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");Qr(this,{name:t,type:n,baseType:s,indexed:r,components:i,arrayLength:a,arrayChildren:o})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(n)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?("sighash"!==e&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")"):t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map((e=>n.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map(((e,s)=>n.components[s].walk(e,t)))}return t(this.type,e)}#l(e,t,n,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this.arrayChildren,i=t.slice();return i.forEach(((t,s)=>{r.#l(e,t,n,(e=>{i[s]=e}))})),void s(i)}if(this.isTuple()){const r=this.components;let i;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw new Error("invalid tuple value");i=r.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((t,s)=>{r[s].#l(e,t,n,(e=>{i[s]=e}))})),void s(i)}const r=n(this.type,t);r.then?e.push(async function(){s(await r)}()):s(r)}async walkAsync(e,t){const n=[],s=[e];return this.#l(n,e,t,(e=>{s[0]=e})),n.length&&await Promise.all(n),s[0]}static from(e,t){if(Fo.isParamType(e))return e;if("string"==typeof e)try{return Fo.from(Ao(e),t)}catch(t){ni(!1,"invalid param type","obj",e)}else if(e instanceof vo){let n="",s="",r=null;_o(e,ro(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(s="tuple",r=e.popParams().map((e=>Fo.from(e))),n=`tuple(${r.map((e=>e.format())).join(",")})`):(n=To(e.popType("TYPE")),s=n);let i=null,a=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();i=new Fo(Oo,"",n,s,null,r,a,i),a=t.value,n+=t.text,s="array",r=null}let o=null;if(_o(e,ho).has("indexed")){if(!t)throw new Error("");o=!0}const c=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Fo(Oo,c,n,s,o,r,a,i)}const n=e.name;ni(!n||"string"==typeof n&&n.match(bo),"invalid name","obj.name",n);let s=e.indexed;null!=s&&(ni(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let r=e.type,i=r.match(Io);if(i){const t=parseInt(i[2]||"-1"),a=Fo.from({type:i[1],components:e.components});return new Fo(Oo,n||"",r,"array",s,null,t,a)}if("tuple"===r||r.startsWith("tuple(")||r.startsWith("(")){const t=null!=e.components?e.components.map((e=>Fo.from(e))):null;return new Fo(Oo,n||"",r,"tuple",s,t,null,null)}return r=To(e.type),new Fo(Oo,n||"",r,r,s,null,null,null)}static isParamType(e){return e&&e[No]===jo}}class $o{type;inputs;constructor(e,t,n){ii(e,Oo,"Fragment"),Qr(this,{type:t,inputs:n=Object.freeze(n.slice())})}static from(e){if("string"==typeof e){try{$o.from(JSON.parse(e))}catch(e){}return $o.from(Ao(e))}if(e instanceof vo){switch(e.peekKeyword(lo)){case"constructor":return qo.from(e);case"error":return Wo.from(e);case"event":return zo.from(e);case"fallback":case"receive":return Ko.from(e);case"function":return Vo.from(e);case"struct":return Jo.from(e)}}else if("object"==typeof e){switch(e.type){case"constructor":return qo.from(e);case"error":return Wo.from(e);case"event":return zo.from(e);case"fallback":case"receive":return Ko.from(e);case"function":return Vo.from(e);case"struct":return Jo.from(e)}ti(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ni(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return qo.isFragment(e)}static isError(e){return Wo.isFragment(e)}static isEvent(e){return zo.isFragment(e)}static isFunction(e){return Vo.isFragment(e)}static isStruct(e){return Jo.isFragment(e)}}class Go extends $o{name;constructor(e,t,n,s){super(e,t,s),ni("string"==typeof n&&n.match(bo),"invalid identifier","name",n),s=Object.freeze(s.slice()),Qr(this,{name:n})}}function Ho(e,t){return"("+t.map((t=>t.format(e))).join("full"===e?", ":",")+")"}class Wo extends Go{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,No,{value:Uo})}get selector(){return so(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+Ho(e,this.inputs)),t.join(" ")}static from(e){if(Wo.isFragment(e))return e;if("string"==typeof e)return Wo.from(Ao(e));if(e instanceof vo){const t=ko("error",e),n=Co(e);return So(e),new Wo(Oo,t,n)}return new Wo(Oo,e.name,e.inputs?e.inputs.map(Fo.from):[])}static isFragment(e){return e&&e[No]===Uo}}class zo extends Go{anonymous;constructor(e,t,n,s){super(e,"event",t,n),Object.defineProperty(this,No,{value:Lo}),Qr(this,{anonymous:s})}get topicHash(){return so(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+Ho(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){t=(t||[]).map((e=>Fo.from(e)));return new zo(Oo,e,t,!1).topicHash}static from(e){if(zo.isFragment(e))return e;if("string"==typeof e)try{return zo.from(Ao(e))}catch(t){ni(!1,"invalid event fragment","obj",e)}else if(e instanceof vo){const t=ko("event",e),n=Co(e,!0),s=!!_o(e,ro(["anonymous"])).has("anonymous");return So(e),new zo(Oo,t,n,s)}return new zo(Oo,e.name,e.inputs?e.inputs.map((e=>Fo.from(e,!0))):[],!!e.anonymous)}static isFragment(e){return e&&e[No]===Lo}}class qo extends $o{payable;gas;constructor(e,t,n,s,r){super(e,t,n),Object.defineProperty(this,No,{value:Bo}),Qr(this,{payable:s,gas:r})}format(e){if(ti(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[`constructor${Ho(e,this.inputs)}`];return t.push(this.payable?"payable":"nonpayable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(qo.isFragment(e))return e;if("string"==typeof e)try{return qo.from(Ao(e))}catch(t){ni(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof vo){_o(e,ro(["constructor"]));const t=Co(e),n=!!_o(e,io).has("payable"),s=xo(e);return So(e),new qo(Oo,"constructor",t,n,s)}return new qo(Oo,"constructor",e.inputs?e.inputs.map(Fo.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[No]===Bo}}class Ko extends $o{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,No,{value:Ro}),Qr(this,{payable:n})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(Ko.isFragment(e))return e;if("string"==typeof e)try{return Ko.from(Ao(e))}catch(t){ni(!1,"invalid fallback fragment","obj",e)}else if(e instanceof vo){const t=e.toString();ni(e.peekKeyword(ro(["fallback","receive"])),"type must be fallback or receive","obj",t);if("receive"===e.popKeyword(ro(["fallback","receive"]))){const t=Co(e);return ni(0===t.length,"receive cannot have arguments","obj.inputs",t),_o(e,ro(["payable"])),So(e),new Ko(Oo,[],!0)}let n=Co(e);n.length?ni(1===n.length&&"bytes"===n[0].type,"invalid fallback inputs","obj.inputs",n.map((e=>e.format("minimal"))).join(", ")):n=[Fo.from("bytes")];const s=Po(e);if(ni("nonpayable"===s||"payable"===s,"fallback cannot be constants","obj.stateMutability",s),_o(e,ro(["returns"])).has("returns")){const t=Co(e);ni(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}return So(e),new Ko(Oo,n,"payable"===s)}if("receive"===e.type)return new Ko(Oo,[],!0);if("fallback"===e.type){const t=[Fo.from("bytes")],n="payable"===e.stateMutability;return new Ko(Oo,t,n)}ni(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[No]===Ro}}class Vo extends Go{constant;outputs;stateMutability;payable;gas;constructor(e,t,n,s,r,i){super(e,"function",t,s),Object.defineProperty(this,No,{value:Mo});Qr(this,{constant:"view"===n||"pure"===n,gas:i,outputs:r=Object.freeze(r.slice()),payable:"payable"===n,stateMutability:n})}get selector(){return so(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+Ho(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Ho(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){t=(t||[]).map((e=>Fo.from(e)));return new Vo(Oo,e,"view",t,[],null).selector}static from(e){if(Vo.isFragment(e))return e;if("string"==typeof e)try{return Vo.from(Ao(e))}catch(t){ni(!1,"invalid function fragment","obj",e)}else if(e instanceof vo){const t=ko("function",e),n=Co(e),s=Po(e);let r=[];_o(e,ro(["returns"])).has("returns")&&(r=Co(e));const i=xo(e);return So(e),new Vo(Oo,t,s,n,r,i)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new Vo(Oo,e.name,t,e.inputs?e.inputs.map(Fo.from):[],e.outputs?e.outputs.map(Fo.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[No]===Mo}}class Jo extends Go{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,No,{value:Do})}format(){throw new Error("@TODO")}static from(e){if("string"==typeof e)try{return Jo.from(Ao(e))}catch(t){ni(!1,"invalid struct fragment","obj",e)}else if(e instanceof vo){const t=ko("struct",e),n=Co(e);return So(e),new Jo(Oo,t,n)}return new Jo(Oo,e.name,e.inputs?e.inputs.map(Fo.from):[])}static isFragment(e){return e&&e[No]===Do}}const Qo=new Map;Qo.set(0,"GENERIC_PANIC"),Qo.set(1,"ASSERT_FALSE"),Qo.set(17,"OVERFLOW"),Qo.set(18,"DIVIDE_BY_ZERO"),Qo.set(33,"ENUM_RANGE_ERROR"),Qo.set(34,"BAD_STORAGE_DATA"),Qo.set(49,"STACK_UNDERFLOW"),Qo.set(50,"ARRAY_RANGE_ERROR"),Qo.set(65,"OUT_OF_MEMORY"),Qo.set(81,"UNINITIALIZED_FUNCTION_CALL");const Yo=new RegExp(/^bytes([0-9]*)$/),Xo=new RegExp(/^(u?int)([0-9]*)$/);let Zo=null;class ec{#u(e){if(e.isArray())return new Da(this.#u(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new no(e.components.map((e=>this.#u(e))),e.name);switch(e.baseType){case"address":return new La(e.name);case"bool":return new Fa(e.name);case"string":return new to(e.name);case"bytes":return new Ga(e.name);case"":return new za(e.name)}let t=e.type.match(Xo);if(t){let n=parseInt(t[2]||"256");return ni(0!==n&&n<=256&&n%8==0,"invalid "+t[1]+" bit length","param",e),new Ja(n/8,"int"===t[1],e.name)}if(t=e.type.match(Yo),t){let n=parseInt(t[1]);return ni(0!==n&&n<=32,"invalid bytes length","param",e),new Ha(n,e.name)}ni(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map((e=>this.#u(Fo.from(e))));return new no(t,"_").defaultValue()}encode(e,t){si(t.length,e.length,"types/values length mismatch");const n=e.map((e=>this.#u(Fo.from(e)))),s=new no(n,"_"),r=new Di;return s.encode(r,t),r.data}decode(e,t,n){const s=e.map((e=>this.#u(Fo.from(e))));return new no(s,"_").decode(new Fi(t,n))}static defaultAbiCoder(){return null==Zo&&(Zo=new ec),Zo}static getBuiltinCallException(e,t,n){return function(e,t,n,s){let r="missing revert data",i=null,a=null;if(n){r="execution reverted";const e=oi(n);if(n=hi(n),0===e.length)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(e.length%32!=4)r+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===hi(e.slice(0,4)))try{i=s.decode(["string"],e.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch(e){r+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===hi(e.slice(0,4)))try{const t=Number(s.decode(["uint256"],e.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[t]},i=`Panic due to ${Qo.get(t)||"UNKNOWN"}(${t})`,r+=`: ${i}`}catch(e){r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const o={to:t.to?Ia(t.to):null,data:t.data||"0x"};return t.from&&(o.from=Ia(t.from)),ei(r,"CALL_EXCEPTION",{action:e,data:n,reason:i,transaction:o,invocation:null,revert:a})}(e,t,n,ec.defaultAbiCoder())}}function tc(e){return e&&"function"==typeof e.getAddress}async function nc(e,t){const n=await t;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||(ti("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),ni(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),Ia(n)}function sc(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?Ia(e):(ti(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),nc(e,t.resolveName(e))):tc(e)?nc(e,e.getAddress()):e&&"function"==typeof e.then?nc(e,e):void ni(!1,"unsupported addressable value","target",e)}const rc=new Uint8Array(32);rc.fill(0);const ic=BigInt(-1),ac=BigInt(0),oc=BigInt(1),cc=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const lc=Si(oc,32),uc=Si(ac,32),hc={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},dc=["name","version","chainId","verifyingContract","salt"];function fc(e){return function(t){return ni("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const pc={name:fc("name"),version:fc("version"),chainId:function(e){const t=ki(e,"domain.chainId");return ni(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):Ti(t)},verifyingContract:function(e){try{return Ia(e).toLowerCase()}catch(e){}ni(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=oi(e,"domain.salt");return ni(32===t.length,'invalid domain value "salt"',"domain.salt",e),hi(t)}};function gc(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const n=""===t[1],s=parseInt(t[2]||"256");ni(s%8==0&&0!==s&&s<=256&&(null==t[2]||t[2]===String(s)),"invalid numeric width","type",e);const r=Ei(cc,n?s-1:s),i=n?(r+oc)*ic:ac;return function(t){const s=ki(t,"value");return ni(s>=i&&s<=r,`value out-of-bounds for ${e}`,"value",s),Si(n?Ai(s,256):s,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return ni(0!==n&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(t){return ni(oi(t).length===n,`invalid length for ${e}`,"value",t),function(e){const t=oi(e),n=t.length%32;return n?di([t,rc.slice(n)]):hi(t)}(t)}}}switch(e){case"address":return function(e){return mi(Ia(e),32)};case"bool":return function(e){return e?lc:uc};case"bytes":return function(e){return Aa(e)};case"string":return function(e){return so(e)}}return null}function mc(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class yc{primaryType;#h;get types(){return JSON.parse(this.#h)}#d;#f;constructor(e){this.#h=JSON.stringify(e),this.#d=new Map,this.#f=new Map;const t=new Map,n=new Map,s=new Map;Object.keys(e).forEach((e=>{t.set(e,new Set),n.set(e,[]),s.set(e,new Set)}));for(const s in e){const r=new Set;for(const i of e[s]){ni(!r.has(i.name),`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(s)}`,"types",e),r.add(i.name);const a=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;ni(a!==s,`circular type reference to ${JSON.stringify(a)}`,"types",e);gc(a)||(ni(n.has(a),`unknown type ${JSON.stringify(a)}`,"types",e),n.get(a).push(s),t.get(s).add(a))}}const r=Array.from(n.keys()).filter((e=>0===n.get(e).length));ni(0!==r.length,"missing primary type","types",e),ni(1===r.length,`ambiguous primary types or unused types: ${r.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),Qr(this,{primaryType:r[0]}),function r(i,a){ni(!a.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",e),a.add(i);for(const e of t.get(i))if(n.has(e)){r(e,a);for(const t of a)s.get(t).add(e)}a.delete(i)}(this.primaryType,new Set);for(const[t,n]of s){const s=Array.from(n);s.sort(),this.#d.set(t,mc(t,e[t])+s.map((t=>mc(t,e[t]))).join(""))}}getEncoder(e){let t=this.#f.get(e);return t||(t=this.#p(e),this.#f.set(e,t)),t}#p(e){{const t=gc(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],n=this.getEncoder(e);return s=>{ni(!t[3]||parseInt(t[3])===s.length,`array length mismatch; expected length ${parseInt(t[3])}`,"value",s);let r=s.map(n);return this.#d.has(e)&&(r=r.map(Aa)),Aa(di(r))}}const n=this.types[e];if(n){const t=so(this.#d.get(e));return e=>{const s=n.map((({name:t,type:n})=>{const s=this.getEncoder(n)(e[t]);return this.#d.has(n)?Aa(s):s}));return s.unshift(t),di(s)}}ni(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#d.get(e);return ni(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Aa(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(gc(e))return n(e,t);const s=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s)return ni(!s[3]||parseInt(s[3])===t.length,`array length mismatch; expected length ${parseInt(s[3])}`,"value",t),t.map((e=>this._visit(s[1],e,n)));const r=this.types[e];if(r)return r.reduce(((e,{name:s,type:r})=>(e[s]=this._visit(r,t[s],n),e)),{});ni(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new yc(e)}static getPrimaryType(e){return yc.from(e).primaryType}static hashStruct(e,t,n){return yc.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(null==e[n])continue;const s=hc[n];ni(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:s})}return t.sort(((e,t)=>dc.indexOf(e.name)-dc.indexOf(t.name))),yc.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return di(["0x1901",yc.hashDomain(e),yc.from(t).hash(n)])}static hash(e,t,n){return Aa(yc.encode(e,t,n))}static async resolveNames(e,t,n,s){e=Object.assign({},e);for(const t in e)null==e[t]&&delete e[t];const r={};e.verifyingContract&&!li(e.verifyingContract,20)&&(r[e.verifyingContract]="0x");const i=yc.from(t);i.visit(n,((e,t)=>("address"!==e||li(t,20)||(r[t]="0x"),t)));for(const e in r)r[e]=await s(e);return e.verifyingContract&&r[e.verifyingContract]&&(e.verifyingContract=r[e.verifyingContract]),n=i.visit(n,((e,t)=>"address"===e&&r[t]?r[t]:t)),{domain:e,value:n}}static getPayload(e,t,n){yc.hashDomain(e);const s={},r=[];dc.forEach((t=>{const n=e[t];null!=n&&(s[t]=pc[t](n),r.push({name:t,type:hc[t]}))}));const i=yc.from(t),a=Object.assign({},t);return ni(null==a.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=r,i.encode(n),{types:a,domain:s,primaryType:i.primaryType,message:i.visit(n,((e,t)=>{if(e.match(/^bytes(\d*)/))return hi(oi(t));if(e.match(/^u?int/))return ki(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return ni("string"==typeof t,"invalid string","value",t),t}ni(!1,"unsupported type","type",e)}))}}}function bc(e,t){return{address:Ia(e),storageKeys:t.map(((e,t)=>(ni(li(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase())))}}function wc(e){if(Array.isArray(e))return e.map(((t,n)=>Array.isArray(t)?(ni(2===t.length,"invalid slot set",`value[${n}]`,t),bc(t[0],t[1])):(ni(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),bc(t.address,t.storageKeys))));ni(null!=e&&"object"==typeof e,"invalid access list","value",e);const t=Object.keys(e).map((t=>{const n=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return bc(t,Object.keys(n).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}let vc=async function(e,t){const n=e.url.split(":")[0].toLowerCase();let s;if(ti("http"===n||"https"===n,`unsupported protocol ${n}`,"UNSUPPORTED_OPERATION",{info:{protocol:n},operation:"request"}),ti("https"===n||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"}),t){const e=new AbortController;s=e.signal,t.addListener((()=>{e.abort()}))}const r={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:s},i=await fetch(e.url,r),a={};i.headers.forEach(((e,t)=>{a[t.toLowerCase()]=e}));const o=await i.arrayBuffer(),c=null==o?null:new Uint8Array(o);return{statusCode:i.status,statusMessage:i.statusText,headers:a,body:c}};const Ac=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Ec=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let kc=!1;async function _c(e,t){try{const t=e.match(Ac);if(!t)throw new Error("invalid data");return new Oc(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return oi(t)}(t[3]):Za(t[3].replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new Oc(599,"BAD REQUEST (invalid data: URI)",{},null,new Tc(e))}}function Pc(e){return async function(t,n){try{const n=t.match(Ec);if(!n)throw new Error("invalid link");return new Tc(`${e}${n[2]}`)}catch(e){return new Oc(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Tc(t))}}}const Cc={data:_c,ipfs:Pc("https://gateway.ipfs.io/ipfs/")},xc=new WeakMap;class Sc{#g;#m;constructor(e){this.#g=[],this.#m=!1,xc.set(e,(()=>{if(!this.#m){this.#m=!0;for(const e of this.#g)setTimeout((()=>{e()}),0);this.#g=[]}}))}addListener(e){ti(!this.#m,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#g.push(e)}get cancelled(){return this.#m}checkSignal(){ti(!this.cancelled,"cancelled","CANCELLED",{})}}function Ic(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}class Tc{#y;#b;#w;#v;#A;#E;#k;#_;#P;#C;#x;#S;#I;#T;get url(){return this.#E}set url(e){this.#E=String(e)}get body(){return null==this.#k?null:new Uint8Array(this.#k)}set body(e){if(null==e)this.#k=void 0,this.#_=void 0;else if("string"==typeof e)this.#k=Za(e),this.#_="text/plain";else if(e instanceof Uint8Array)this.#k=e,this.#_="application/octet-stream";else{if("object"!=typeof e)throw new Error("invalid body");this.#k=Za(JSON.stringify(e)),this.#_="application/json"}}hasBody(){return null!=this.#k}get method(){return this.#v?this.#v:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#v=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#w);return this.#P&&(e.authorization=`Basic ${function(e){const t=oi(e);let n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(Za(this.#P))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#_&&(e["content-type"]=this.#_),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#w[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#w={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#P||null}setCredentials(e,t){ni(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#P=`${e}:${t}`}get allowGzip(){return this.#b}set allowGzip(e){this.#b=!!e}get allowInsecureAuthentication(){return!!this.#y}set allowInsecureAuthentication(e){this.#y=!!e}get timeout(){return this.#A}set timeout(e){ni(e>=0,"timeout must be non-zero","timeout",e),this.#A=e}get preflightFunc(){return this.#C||null}set preflightFunc(e){this.#C=e}get processFunc(){return this.#x||null}set processFunc(e){this.#x=e}get retryFunc(){return this.#S||null}set retryFunc(e){this.#S=e}constructor(e){this.#E=String(e),this.#y=!1,this.#b=!0,this.#w={},this.#v="",this.#A=3e5,this.#T={slotInterval:250,maxAttempts:12}}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#k?hi(this.#k):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#T.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#T.maxAttempts=e.maxAttempts)}async#O(e,t,n,s,r){if(e>=this.#T.maxAttempts)return r.makeServerError("exceeded maximum retry limit");ti(Nc()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await function(e){return new Promise((t=>setTimeout(t,e)))}(n);let i=this.clone();const a=(i.url.split(":")[0]||"").toLowerCase();if(a in Cc){const e=await Cc[a](i.url,Ic(s.#I));if(e instanceof Oc){let t=e;if(this.processFunc){Ic(s.#I);try{t=await this.processFunc(i,t)}catch(e){null!=e.throttle&&"number"==typeof e.stall||t.makeServerError("error in post-processing function",e).assertOk()}}return t}i=e}this.preflightFunc&&(i=await this.preflightFunc(i));const o=await vc(i,Ic(s.#I));let c=new Oc(o.statusCode,o.statusMessage,o.headers,o.body,s);if(301===c.statusCode||302===c.statusCode){try{const n=c.headers.location||"";return i.redirect(n).#O(e+1,t,0,s,c)}catch(e){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,e))){const n=c.headers["retry-after"];let r=this.#T.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof n&&n.match(/^[1-9][0-9]*$/)&&(r=parseInt(n)),i.clone().#O(e+1,t,r,s,c)}if(this.processFunc){Ic(s.#I);try{c=await this.processFunc(i,c)}catch(n){null!=n.throttle&&"number"==typeof n.stall||c.makeServerError("error in post-processing function",n).assertOk();let r=this.#T.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return n.stall>=0&&(r=n.stall),i.clone().#O(e+1,t,r,s,c)}}return c}send(){return ti(null==this.#I,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#I=new Sc(this),this.#O(0,Nc()+this.timeout,0,this,new Oc(0,"",{},null,this))}cancel(){ti(null!=this.#I,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=xc.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();ti("GET"===this.method&&("https"!==t||"http"!==n)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Tc(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,s.#w=Object.assign({},this.#w),this.#k&&(s.#k=new Uint8Array(this.#k)),s.#_=this.#_,s}clone(){const e=new Tc(this.url);return e.#v=this.#v,this.#k&&(e.#k=this.#k),e.#_=this.#_,e.#w=Object.assign({},this.#w),e.#P=this.#P,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#C=this.#C,e.#x=this.#x,e.#S=this.#S,e}static lockConfig(){kc=!0}static getGateway(e){return Cc[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(kc)throw new Error("gateways locked");Cc[e]=t}static registerGetUrl(e){if(kc)throw new Error("gateways locked");vc=e}static createDataGateway(){return _c}static createIpfsGatewayFunc(e){return Pc(e)}}class Oc{#N;#j;#w;#k;#U;#L;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#k?hi(this.#k):"null"}>`}get statusCode(){return this.#N}get statusMessage(){return this.#j}get headers(){return Object.assign({},this.#w)}get body(){return null==this.#k?null:new Uint8Array(this.#k)}get bodyText(){try{return null==this.#k?"":eo(this.#k)}catch(e){ti(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){ti(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,n,s,r){this.#N=e,this.#j=t,this.#w=Object.keys(n).reduce(((e,t)=>(e[t.toLowerCase()]=String(n[t]),e)),{}),this.#k=null==s?null:new Uint8Array(s),this.#U=r||null,this.#L={message:""}}makeServerError(e,t){let n;n=e?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:`CLIENT ESCALATED SERVER ERROR (${e=`${this.statusCode} ${this.statusMessage}`})`;const s=new Oc(599,n,this.headers,this.body,this.#U||void 0);return s.#L={message:e,error:t},s}throwThrottleError(e,t){null==t?t=-1:ni(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw Qr(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#k}get request(){return this.#U}ok(){return""===this.#L.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#L;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`),ti(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t})}}function Nc(){return(new Date).getTime()}const jc="0x0000000000000000000000000000000000000000";class Uc{fragment;name;signature;topic;args;constructor(e,t,n){const s=e.name,r=e.format();Qr(this,{fragment:e,name:s,signature:r,topic:t,args:n})}}class Lc{fragment;name;args;signature;selector;value;constructor(e,t,n,s){const r=e.name,i=e.format();Qr(this,{fragment:e,name:r,args:n,signature:i,selector:t,value:s})}}class Bc{fragment;name;args;signature;selector;constructor(e,t,n){const s=e.name,r=e.format();Qr(this,{fragment:e,name:s,args:n,signature:r,selector:t})}}class Rc{hash;_isIndexed;static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){Qr(this,{hash:e,_isIndexed:!0})}}const Mc={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Dc={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&Mc[e.toString()]&&(t=Mc[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class Fc{fragments;deploy;fallback;receive;#B;#R;#M;#D;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#M=new Map,this.#B=new Map,this.#R=new Map;const n=[];for(const e of t)try{n.push($o.from(e))}catch(e){console.log("EE",e)}Qr(this,{fragments:Object.freeze(n)});let s=null,r=!1;this.#D=this.getAbiCoder(),this.fragments.forEach(((e,t)=>{let n;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void Qr(this,{deploy:e});case"fallback":return void(0===e.inputs.length?r=!0:(ni(!s||e.payable!==s.payable,"conflicting fallback fragments",`fragments[${t}]`,e),s=e,r=s.payable));case"function":n=this.#M;break;case"event":n=this.#R;break;case"error":n=this.#B;break;default:return}const i=e.format();n.has(i)||n.set(i,e)})),this.deploy||Qr(this,{deploy:qo.from("constructor()")}),Qr(this,{fallback:s,receive:r})}format(e){const t=e?"minimal":"full";return this.fragments.map((e=>e.format(t)))}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return ec.defaultAbiCoder()}#F(e,t,n){if(li(e)){const t=e.toLowerCase();for(const e of this.#M.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,n]of this.#M)t.split("(")[0]===e&&s.push(n);if(t){const e=t.length>0?t[t.length-1]:null;let n=t.length,r=!0;Ua.isTyped(e)&&"overrides"===e.type&&(r=!1,n--);for(let e=s.length-1;e>=0;e--){const t=s[e].inputs.length;t===n||r&&t===n-1||s.splice(e,1)}for(let e=s.length-1;e>=0;e--){const n=s[e].inputs;for(let r=0;r<t.length;r++)if(Ua.isTyped(t[r])){if(r>=n.length){if("overrides"===t[r].type)continue;s.splice(e,1);break}if(t[r].type!==n[r].baseType){s.splice(e,1);break}}}}if(1===s.length&&t&&t.length!==s[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&s.splice(0,1)}if(0===s.length)return null;if(s.length>1&&n){ni(!1,`ambiguous function description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e)}return s[0]}const s=this.#M.get(Vo.from(e).format());return s||null}getFunctionName(e){const t=this.#F(e,null,!1);return ni(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#F(e,null,!1)}getFunction(e,t){return this.#F(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#M.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#M.get(s),n)}}#$(e,t,n){if(li(e)){const t=e.toLowerCase();for(const e of this.#R.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,n]of this.#R)t.split("(")[0]===e&&s.push(n);if(t){for(let e=s.length-1;e>=0;e--)s[e].inputs.length<t.length&&s.splice(e,1);for(let e=s.length-1;e>=0;e--){const n=s[e].inputs;for(let r=0;r<t.length;r++)if(Ua.isTyped(t[r])&&t[r].type!==n[r].baseType){s.splice(e,1);break}}}if(0===s.length)return null;if(s.length>1&&n){ni(!1,`ambiguous event description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e)}return s[0]}const s=this.#R.get(zo.from(e).format());return s||null}getEventName(e){const t=this.#$(e,null,!1);return ni(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#$(e,null,!1)}getEvent(e,t){return this.#$(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#R.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#R.get(s),n)}}getError(e,t){if(li(e)){const t=e.toLowerCase();if(Dc[t])return Wo.from(Dc[t].signature);for(const e of this.#B.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[n,s]of this.#B)n.split("(")[0]===e&&t.push(s);if(0===t.length)return"Error"===e?Wo.from("error Error(string)"):"Panic"===e?Wo.from("error Panic(uint256)"):null;if(t.length>1){ni(!1,`ambiguous error description (i.e. ${t.map((e=>JSON.stringify(e.format()))).join(", ")})`,"name",e)}return t[0]}if("Error(string)"===(e=Wo.from(e).format()))return Wo.from("error Error(string)");if("Panic(uint256)"===e)return Wo.from("error Panic(uint256)");const n=this.#B.get(e);return n||null}forEachError(e){const t=Array.from(this.#B.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#B.get(s),n)}}_decodeParams(e,t){return this.#D.decode(e,t)}_encodeParams(e,t){return this.#D.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);ni(t,"unknown error","fragment",e),e=t}return ni(pi(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,pi(t,4))}encodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);ni(t,"unknown error","fragment",e),e=t}return di([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);ni(t,"unknown function","fragment",e),e=t}return ni(pi(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,pi(t,4))}encodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);ni(t,"unknown function","fragment",e),e=t}return di([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);ni(t,"unknown function","fragment",e),e=t}let n="invalid length for result data";const s=ci(t);if(s.length%32==0)try{return this.#D.decode(e.outputs,s)}catch(e){n="could not decode result data"}ti(!1,n,"BAD_DATA",{value:hi(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=oi(e,"data"),s=ec.getBuiltinCallException("call",t,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const e=hi(n.slice(0,4)),t=this.getError(e);if(t)try{const e=this.#D.decode(t.inputs,n.slice(4));s.revert={name:t.name,signature:t.format(),args:e},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch(e){s.message="execution reverted (coult not decode custom error)"}}const r=this.parseTransaction(t);return r&&(s.invocation={method:r.name,signature:r.signature,args:r.args}),s}encodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);ni(t,"unknown function","fragment",e),e=t}return hi(this.#D.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){const t=this.getEvent(e);ni(t,"unknown event","eventFragment",e),e=t}ti(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const s=(e,t)=>"string"===e.type?so(t):"bytes"===e.type?Aa(hi(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=Si(t):e.type.match(/^bytes/)?t=function(e,t){return gi(e,t,!1)}(t,32):"address"===e.type&&this.#D.encode(["address"],[t]),mi(hi(t),32));for(t.forEach(((t,r)=>{const i=e.inputs[r];i.indexed?null==t?n.push(null):"array"===i.baseType||"tuple"===i.baseType?ni(!1,"filtering with tuples or arrays not supported","contract."+i.name,t):Array.isArray(t)?n.push(t.map((e=>s(i,e)))):n.push(s(i,t)):ni(null==t,"cannot filter non-indexed parameters; must be null","contract."+i.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){if("string"==typeof e){const t=this.getEvent(e);ni(t,"unknown event","eventFragment",e),e=t}const n=[],s=[],r=[];return e.anonymous||n.push(e.topicHash),ni(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,i)=>{const a=t[i];if(e.indexed)if("string"===e.type)n.push(so(a));else if("bytes"===e.type)n.push(Aa(a));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this.#D.encode([e.type],[a]))}else s.push(e),r.push(a)})),{data:this.#D.encode(s,r),topics:n}}decodeEventLog(e,t,n){if("string"==typeof e){const t=this.getEvent(e);ni(t,"unknown event","eventFragment",e),e=t}if(null!=n&&!e.anonymous){const t=e.topicHash;ni(li(n[0],32)&&n[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],r=[],i=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(s.push(Fo.from({type:"bytes32",name:e.name})),i.push(!0)):(s.push(e),i.push(!1)):(r.push(e),i.push(!1))}));const a=null!=n?this.#D.decode(s,di(n)):null,o=this.#D.decode(r,t,!0),c=[],l=[];let u=0,h=0;return e.inputs.forEach(((e,t)=>{let n=null;if(e.indexed)if(null==a)n=new Rc(null);else if(i[t])n=new Rc(a[h++]);else try{n=a[h++]}catch(e){n=e}else try{n=o[u++]}catch(e){n=e}c.push(n),l.push(e.name||null)})),Bi.fromItems(c,l)}parseTransaction(e){const t=oi(e.data,"tx.data"),n=ki(null!=e.value?e.value:0,"tx.value"),s=this.getFunction(hi(t.slice(0,4)));if(!s)return null;const r=this.#D.decode(s.inputs,t.slice(4));return new Lc(s,s.selector,r,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Uc(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=hi(e),n=this.getError(pi(t,0,4));if(!n)return null;const s=this.#D.decode(n.inputs,pi(t,4));return new Bc(n,n.selector,s)}static from(e){return e instanceof Fc?e:"string"==typeof e?new Fc(JSON.parse(e)):"function"==typeof e.format?new Fc(e.format("json")):new Fc(e)}}const $c=BigInt(0);function Gc(e){return null==e?null:e}function Hc(e){return null==e?null:e.toString()}class Wc{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,n){Qr(this,{gasPrice:Gc(e),maxFeePerGas:Gc(t),maxPriorityFeePerGas:Gc(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:Hc(e),maxFeePerGas:Hc(t),maxPriorityFeePerGas:Hc(n)}}}function zc(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=hi(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)s in e&&null!=e[s]&&(t[s]=ki(e[s],`request.${s}`));const s="type,nonce".split(/,/);for(const n of s)n in e&&null!=e[n]&&(t[n]=xi(e[n],`request.${n}`));return e.accessList&&(t.accessList=wc(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),t}class qc{provider;number;hash;timestamp;parentHash;nonce;difficulty;gasLimit;gasUsed;miner;extraData;baseFeePerGas;#G;constructor(e,t){this.#G=e.transactions.map((e=>"string"!=typeof e?new Jc(e,t):e)),Qr(this,{provider:t,hash:Gc(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,miner:e.miner,extraData:e.extraData,baseFeePerGas:Gc(e.baseFeePerGas)})}get transactions(){return this.#G.map((e=>"string"==typeof e?e:e.hash))}get prefetchedTransactions(){const e=this.#G.slice();return 0===e.length?[]:(ti("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:s,gasUsed:r,hash:i,miner:a,nonce:o,number:c,parentHash:l,timestamp:u,transactions:h}=this;return{_type:"Block",baseFeePerGas:Hc(e),difficulty:Hc(t),extraData:n,gasLimit:Hc(s),gasUsed:Hc(r),hash:i,miner:a,nonce:o,number:c,parentHash:l,timestamp:u,transactions:h}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#G.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#G[e];else{const n=e.toLowerCase();for(const e of this.#G){if("string"==typeof e){if(e!==n)continue;t=e;break}if(e.hash!==n){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"==typeof e)return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;ni(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:(e=this).hash,number:e.number};var e}}class Kc{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const n=Object.freeze(e.topics.slice());Qr(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:s,index:r,removed:i,topics:a,transactionHash:o,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:s,index:r,removed:i,topics:a,transactionHash:o,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ti(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ti(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ti(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}class Vc{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;cumulativeGasUsed;gasPrice;type;status;root;#H;constructor(e,t){this.#H=Object.freeze(e.logs.map((e=>new Kc(e,t))));let n=$c;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),Qr(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,gasPrice:n,type:e.type,status:e.status,root:e.root})}get logs(){return this.#H}toJSON(){const{to:e,from:t,contractAddress:n,hash:s,index:r,blockHash:i,blockNumber:a,logsBloom:o,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:a,contractAddress:n,cumulativeGasUsed:Hc(this.cumulativeGasUsed),from:t,gasPrice:Hc(this.gasPrice),gasUsed:Hc(this.gasUsed),hash:s,index:r,logs:c,logsBloom:o,root:u,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Yc(this)}reorderedEvent(e){return ti(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Qc(this,e)}}class Jc{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;data;value;chainId;signature;accessList;#W;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.#W=-1}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:s,type:r,to:i,from:a,nonce:o,data:c,signature:l,accessList:u}=this;return{_type:"TransactionReceipt",accessList:u,blockNumber:e,blockHash:t,chainId:Hc(this.chainId),data:c,from:a,gasLimit:Hc(this.gasLimit),gasPrice:Hc(this.gasPrice),hash:s,maxFeePerGas:Hc(this.maxFeePerGas),maxPriorityFeePerGas:Hc(this.maxPriorityFeePerGas),nonce:o,signature:l,to:i,index:n,type:r,value:Hc(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await Jr({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=null==e?1:e,s=null==t?0:t;let r=this.#W,i=-1,a=-1===r;const o=async()=>{if(a)return null;const{blockNumber:e,nonce:t}=await Jr({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(r=e);if(a)return null;const s=await this.getTransaction();if(!s||null==s.blockNumber)for(-1===i&&(i=r-3,i<this.#W&&(i=this.#W));i<=e;){if(a)return null;const t=await this.provider.getBlock(i,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let s=0;s<t.length;s++){const i=await t.getTransaction(s);if(i.from===this.from&&i.nonce===this.nonce){if(a)return null;const t=await this.provider.getTransactionReceipt(i.hash);if(null==t)return;if(e-t.blockNumber+1<n)return;let s="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?s="repriced":"0x"===i.data&&i.from===i.to&&i.value===$c&&(s="cancelled"),ti(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===s||"cancelled"===s,reason:s,replacement:i.replaceableTransaction(r),hash:i.hash,receipt:t})}}i++}},c=e=>{if(null==e||0!==e.status)return e;ti(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},l=await this.provider.getTransactionReceipt(this.hash);if(0===n)return c(l);if(l){if(await l.confirmations()>=n)return c(l)}else if(await o(),0===n)return null;const u=new Promise(((e,t)=>{const i=[],l=()=>{i.forEach((e=>e()))};if(i.push((()=>{a=!0})),s>0){const e=setTimeout((()=>{l(),t(ei("wait for transaction timeout","TIMEOUT"))}),s);i.push((()=>{clearTimeout(e)}))}const u=async s=>{if(await s.confirmations()>=n){l();try{e(c(s))}catch(e){t(e)}}};if(i.push((()=>{this.provider.off(this.hash,u)})),this.provider.on(this.hash,u),r>=0){const e=async()=>{try{await o()}catch(e){if(Xr(e,"TRANSACTION_REPLACED"))return l(),void t(e)}a||this.provider.once("block",e)};i.push((()=>{this.provider.off("block",e)})),this.provider.once("block",e)}}));return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}removedEvent(){return ti(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Yc(this)}reorderedEvent(e){return ti(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ti(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Qc(this,e)}replaceableTransaction(e){ni(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Jc(this,this.provider);return t.#W=e,t}}function Qc(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function Yc(e){return{orphan:"drop-transaction",tx:e}}class Xc{filter;emitter;#z;constructor(e,t,n){this.#z=t,Qr(this,{emitter:e,filter:n})}async removeListener(){null!=this.#z&&await this.emitter.off(this.filter,this.#z)}}class Zc extends Kc{interface;fragment;args;constructor(e,t,n){super(e,e.provider);Qr(this,{args:t.decodeEventLog(n,e.data,e.topics),fragment:n,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class el extends Kc{error;constructor(e,t){super(e,e.provider),Qr(this,{error:t})}}class tl extends Vc{#q;constructor(e,t,n){super(n,t),this.#q=e}get logs(){return super.logs.map((e=>{const t=e.topics.length?this.#q.getEvent(e.topics[0]):null;if(t)try{return new Zc(e,this.#q,t)}catch(t){return new el(e,t)}return e}))}}class nl extends Jc{#q;constructor(e,t,n){super(n,t),this.#q=e}async wait(e){const t=await super.wait(e);return null==t?null:new tl(this.#q,this.provider,t)}}class sl extends Xc{log;constructor(e,t,n,s){super(e,t,n),Qr(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class rl extends sl{constructor(e,t,n,s,r){super(e,t,n,new Zc(r,e.interface,s));Qr(this,{args:e.interface.decodeEventLog(s,this.log.data,this.log.topics),fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const il=BigInt(0);function al(e){return e&&"function"==typeof e.call}function ol(e){return e&&"function"==typeof e.estimateGas}function cl(e){return e&&"function"==typeof e.resolveName}function ll(e){return e&&"function"==typeof e.sendTransaction}class ul{#K;fragment;constructor(e,t,n){if(Qr(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const s=hl(e.runner,"resolveName"),r=cl(s)?s:null;this.#K=async function(){const s=await Promise.all(t.inputs.map(((e,t)=>null==n[t]?null:e.walkAsync(n[t],((e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map((e=>sc(e,r)))):sc(t,r):t)))));return e.interface.encodeFilterTopics(t,s)}()}getTopicFilter(){return this.#K}}function hl(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function dl(e){return null==e?null:e.provider||null}async function fl(e,t){const n=Ua.dereference(e,"overrides");ni("object"==typeof n,"invalid overrides parameter","overrides",e);const s=zc(n);return ni(null==s.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),ni(null==s.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=await sc(s.from)),s}function pl(e){const t=async function(t){const n=await fl(t,["data"]);n.to=await e.getAddress();const s=e.interface,r=ki(n.value||il,"overrides.value")===il,i="0x"===(n.data||"0x");!s.fallback||s.fallback.payable||!s.receive||i||r||ni(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),ni(s.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data);return ni(s.receive||s.fallback&&s.fallback.payable||r,"cannot send value to non-payable fallback","overrides.value",n.value),ni(s.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data),n},n=async function(n){const s=e.runner;ti(ll(s),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await s.sendTransaction(await t(n)),i=dl(e.runner);return new nl(e.interface,i,r)},s=async e=>await n(e);return Qr(s,{_contract:e,estimateGas:async function(n){const s=hl(e.runner,"estimateGas");return ti(ol(s),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await s.estimateGas(await t(n))},populateTransaction:t,send:n,staticCall:async function(n){const s=hl(e.runner,"call");ti(al(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const r=await t(n);try{return await s.call(r)}catch(t){if(Zr(t)&&t.data)throw e.interface.makeError(t.data,r);throw t}}}),s}function gl(e,t){const n=function(...n){const s=e.interface.getFunction(t,n);return ti(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),s},s=async function(...t){const s=n(...t);let r={};if(s.inputs.length+1===t.length&&(r=await fl(t.pop())),s.inputs.length!==t.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const i=await async function(e,t,n){const s=hl(e,"resolveName"),r=cl(s)?s:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(n[t],((e,t)=>(t=Ua.dereference(t,e),"address"===e?sc(t,r):t))))))}(e.runner,s.inputs,t);return Object.assign({},r,await Jr({to:e.getAddress(),data:e.interface.encodeFunctionData(s,i)}))},r=async function(...e){const t=await a(...e);return 1===t.length?t[0]:t},i=async function(...t){const n=e.runner;ti(ll(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await n.sendTransaction(await s(...t)),i=dl(e.runner);return new nl(e.interface,i,r)},a=async function(...t){const r=hl(e.runner,"call");ti(al(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await s(...t);let a="0x";try{a=await r.call(i)}catch(t){if(Zr(t)&&t.data)throw e.interface.makeError(t.data,i);throw t}const o=n(...t);return e.interface.decodeFunctionResult(o,a)},o=async(...e)=>n(...e).constant?await r(...e):await i(...e);return Qr(o,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:async function(...t){const n=hl(e.runner,"estimateGas");return ti(ol(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await s(...t))},populateTransaction:s,send:i,staticCall:r,staticCallResult:a}),Object.defineProperty(o,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getFunction(t);return ti(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),o}const ml=Symbol.for("_ethersInternal_contract"),yl=new WeakMap;function bl(e){return yl.get(e[ml])}async function wl(e,t){let n,s=null;if(Array.isArray(t)){const s=function(t){if(li(t,32))return t;const n=e.interface.getEvent(t);return ni(n,"unknown fragment","name",t),n.topicHash};n=t.map((e=>null==e?null:Array.isArray(e)?e.map(s):s(e)))}else"*"===t?n=[null]:"string"==typeof t?li(t,32)?n=[t]:(s=e.interface.getEvent(t),ni(s,"unknown fragment","event",t),n=[s.topicHash]):(r=t)&&"object"==typeof r&&"getTopicFilter"in r&&"function"==typeof r.getTopicFilter&&r.fragment?n=await t.getTopicFilter():"fragment"in t?(s=t.fragment,n=[s.topicHash]):ni(!1,"unknown event name","event",t);var r;n=n.map((e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()}));return{fragment:s,tag:n.map((e=>null==e?"null":Array.isArray(e)?e.join("|"):e)).join("&"),topics:n}}async function vl(e,t){const{subs:n}=bl(e);return n.get((await wl(e,t)).tag)||null}async function Al(e,t,n){const s=dl(e.runner);ti(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:r,tag:i,topics:a}=await wl(e,n),{addr:o,subs:c}=bl(e);let l=c.get(i);if(!l){const t={address:o||e,topics:a},u=t=>{let s=r;if(null==s)try{s=e.interface.getEvent(t.topics[0])}catch(e){}if(s){const i=s,a=r?e.interface.decodeEventLog(r,t.data,t.topics):[];kl(e,n,a,(s=>new rl(e,s,n,i,t)))}else kl(e,n,[],(s=>new sl(e,s,n,t)))};let h=[];l={tag:i,listeners:[],start:()=>{h.length||h.push(s.on(t,u))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),s.off(t,u)}},c.set(i,l)}return l}let El=Promise.resolve();async function kl(e,t,n,s){try{await El}catch(e){}const r=async function(e,t,n,s){await El;const r=await vl(e,t);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter((({listener:t,once:r})=>{const i=Array.from(n);s&&i.push(s(r?null:t));try{t.call(e,...i)}catch(e){}return!r})),0===r.listeners.length&&(r.stop(),bl(e).subs.delete(r.tag)),i>0}(e,t,n,s);return El=r,await r}const _l=["then"];class Pl{target;interface;runner;filters;[ml];fallback;constructor(e,t,n,s){ni("string"==typeof e||tc(e),"invalid value for Contract target","target",e),null==n&&(n=null);const r=Fc.from(t);let i;Qr(this,{target:e,runner:n,interface:r}),Object.defineProperty(this,ml,{value:{}});let a=null,o=null;if(s){const e=dl(n);o=new nl(this.interface,e,s)}let c=new Map;if("string"==typeof e)if(li(e))a=e,i=Promise.resolve(e);else{const t=hl(n,"resolveName");if(!cl(t))throw ei("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=t.resolveName(e).then((t=>{if(null==t)throw ei("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return bl(this).addr=t,t}))}else i=e.getAddress().then((e=>{if(null==e)throw new Error("TODO");return bl(this).addr=e,e}));!function(e,t){yl.set(e[ml],t)}(this,{addrPromise:i,addr:a,deployTx:o,subs:c});const l=new Proxy({},{get:(e,t,n)=>{if("symbol"==typeof t||_l.indexOf(t)>=0)return Reflect.get(e,t,n);try{return this.getEvent(t)}catch(e){if(!Xr(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>_l.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return Qr(this,{filters:l}),Qr(this,{fallback:r.receive||r.fallback?pl(this):null}),new Proxy(this,{get:(e,t,n)=>{if("symbol"==typeof t||t in e||_l.indexOf(t)>=0)return Reflect.get(e,t,n);try{return e.getFunction(t)}catch(e){if(!Xr(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||_l.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new Pl(this.target,this.interface,e)}attach(e){return new Pl(e,this.interface,this.runner)}async getAddress(){return await bl(this).addrPromise}async getDeployedCode(){const e=dl(this.runner);ti(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=dl(this.runner);return ti(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((e,n)=>{const s=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",s)}catch(e){n(e)}};s()}))}deploymentTransaction(){return bl(this).deployTx}getFunction(e){"string"!=typeof e&&(e=e.format());return gl(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const n=function(...n){const s=e.interface.getEvent(t,n);return ti(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),s},s=function(...t){return new ul(e,n(...t),t)};return Qr(s,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getEvent(t);return ti(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),s}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){null==t&&(t=0),null==n&&(n="latest");const{addr:s,addrPromise:r}=bl(this),i=s||await r,{fragment:a,topics:o}=await wl(this,e),c={address:i,topics:o,fromBlock:t,toBlock:n},l=dl(this.runner);return ti(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(c)).map((e=>{let t=a;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new Zc(e,this.interface,t)}catch(t){return new el(e,t)}return new Kc(e,l)}))}async on(e,t){const n=await Al(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await Al(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await kl(this,e,t,null)}async listenerCount(e){if(e){const t=await vl(this,e);return t?t.listeners.length:0}const{subs:t}=bl(this);let n=0;for(const{listeners:e}of t.values())n+=e.length;return n}async listeners(e){if(e){const t=await vl(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}const{subs:t}=bl(this);let n=[];for(const{listeners:e}of t.values())n=n.concat(e.map((({listener:e})=>e)));return n}async off(e,t){const n=await vl(this,e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return null!=t&&0!==n.listeners.length||(n.stop(),bl(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await vl(this,e);if(!t)return this;t.stop(),bl(this).subs.delete(t.tag)}else{const{subs:e}=bl(this);for(const{tag:t,stop:n}of e.values())n(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends Pl{constructor(t,n=null){super(t,e,n)}}}static from(e,t,n){null==n&&(n=null);return new this(e,t,n)}}class Cl extends(function(){return Pl}()){}function xl(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function n(){return e[t++]<<8|e[t++]}let s=n(),r=1,i=[0,1];for(let e=1;e<s;e++)i.push(r+=n());let a=n(),o=t;t+=a;let c=0,l=0;function u(){return 0==c&&(l=l<<8|e[t++],c=8),l>>--c&1}const h=2**31,d=h>>>1,f=h-1;let p=0;for(let e=0;e<31;e++)p=p<<1|u();let g=[],m=0,y=h;for(;;){let e=Math.floor(((p-m+1)*r-1)/y),t=0,n=s;for(;n-t>1;){let s=t+n>>>1;e<i[s]?n=s:t=s}if(0==t)break;g.push(t);let a=m+Math.floor(y*i[t]/r),o=m+Math.floor(y*i[t+1]/r)-1;for(;0==((a^o)&d);)p=p<<1&f|u(),a=a<<1&f,o=o<<1&f|1;for(;a&~o&536870912;)p=p&d|p<<1&f>>>1|u(),a=a<<1^d,o=(o^d)<<1|d|1;m=a,y=1+o-a}let b=s-4;return g.map((t=>{switch(t-b){case 3:return b+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return b+256+(e[o++]<<8|e[o++]);case 1:return b+e[o++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,n)=>t[e.charCodeAt(0)]=n));let n=e.length,s=new Uint8Array(6*n>>3);for(let r=0,i=0,a=0,o=0;r<n;r++)o=o<<6|t[e.charCodeAt(r)],a+=6,a>=8&&(s[i++]=o>>(a-=8));return s}(e)))}function Sl(e){return 1&e?~e>>1:e>>1}function Il(e,t){let n=Array(e);for(let s=0,r=0;s<e;s++)n[s]=r+=Sl(t());return n}function Tl(e,t=0){let n=[];for(;;){let s=e(),r=e();if(!r)break;t+=s;for(let e=0;e<r;e++)n.push(t+e);t+=r+1}return n}function Ol(e){return jl((()=>{let t=Tl(e);if(t.length)return t}))}function Nl(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(Ll(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(Bl(n,e))}return t.flat()}function jl(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function Ul(e,t,n){let s=Array(e).fill().map((()=>[]));for(let r=0;r<t;r++)Il(e,n).forEach(((e,t)=>s[t].push(e)));return s}function Ll(e,t){let n=1+t(),s=t(),r=jl(t);return Ul(r.length,1+e,t).flatMap(((e,t)=>{let[i,...a]=e;return Array(r[t]).fill().map(((e,t)=>{let r=t*s;return[i+t*n,a.map((e=>e+r))]}))}))}function Bl(e,t){return Ul(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}var Rl=xl("AEgSbwjEDVYByQKaAQsBOQDpATQAngDUAHsAoABoANQAagCNAEQAhABMAHIAOwA9ACsANgAmAGIAHgAvACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGAAeABMAFwAXAA0ADgAWAA8AFAAVBFsF1QEXE0o3xAXUALIArkABaACmAgPGAK6AMDAwMAE/qAYK7P4HQAblMgVYBVkAPSw5Afa3EgfJwgAPA8meNALGCjACjqIChtk/j2+KAsXMAoPzASDgCgDyrgFCAi6OCkCQAOQA4woWABjVuskNDD6eBBx4AP4COhi+D+wKBirqBgSCaA0cBy4ArABqku+mnIAAXAaUJAbqABwAPAyUFvyp/Mo8INAIvCoDshQ8APcubKQAon4ZABgEJtgXAR4AuhnOBPsKIE04CZgJiR8cVlpM5INDABQADQAWAA9sVQAiAA8ASO8W2T30OVnKluYvChEeX05ZPe0AFAANABYAD2wgXUCYAMPsABwAOgzGFryp/AHauQVcBeMC0KACxLEKTR2kZhR0Gm5M9gC8DmgC4gAMLjSKF8qSAoF8ARMcAL4OaALiAAwuAUlQJpJMCwMt/AUpCthqGK4B2EQAciwSeAIyFiIDKCi6OGwAOuIB9iYAyA7MtgEcZIIAsgYABgCK1EoFHNZsGACoKNIBogAAAAAAKy4DnABoAQoaPu43dQQZGACrAcgCIgDgLBJ0OvRQsTOiKDVJBfsoBVoFWbC5BWo7XkITO1hCmHuUZmCh+QwUA8YIJvJ4JASkTAJUVAJ2HKwoAZCkpjZcA0YYBIRiCgDSBqxAMCQHKgI6XgBsAWIgcgCEHhoAlgFKuAAoahgBsMYDOC4iRFQBcFoGZgJmAPJKGAMqAgYASkIArABeAHQALLYGCPTwGo6AAAAKIgAqALQcSAHSAdwIDDKXeYHpAAsAEgA1AD4AOTR3etTBEGAQXQJNCkxtOxUMAq0PpwvmERYM0irM09kANKoH7ANUB+wDVANUB+wH7ANUB+wDVANUA1QDVBwL8BvUwRBgD0kEbgWPBYwE1wiEJkoRggcpCNNUDnQfHEgDRgD9IyZJHTuUMwwlQ0wNTQQH/TZDbKh9OQNIMaxU9pCjA8wyUDltAh5yEqEAKw90HTW2Tn96SHGhCkxPr7WASWNOaAK/Oqk/+QoiCZRvvHdPBj4QGCeiEPQMMAGyATgN6kvVBO4GOATGH3oZFg/KlZkIoi3aDOom4C6egFcj8iqABepL8TzaC0pRZQ9WC2IJ4DpggUsDHgEKIogK2g02CGoQ8ArGaA3iEUIHNgPSSZcAogb+Cw4dMhWyJg1iqQsGOXQG+BrzC4wmrBMmevkF0BoeBkoBJhr8AMwu5IWtWi5cGU9cBgALIiPEFKVQHQ0iQLR4RRoYBxIlpgKOQ21KhFEzHpAh8zw6DWMuEFF5B/I8AhlMC348m0aoRQsRzz6KPUUiRkwpBDJ8LCwniAnMD4IMtnxvAVYJHgmuDG4TLhEUN8IINgcWKpchJxIIHkaSYJcE9JwD8BPOAwgFPAk+BxADshwqEysVJgUKgSHUAvA20i6wAoxWfQEUBcgPIh/cEE1H3Q7mCJgCYgOAJegAKhUeABQimAhAYABcj9VTAi7ICMRqaSNxA2QU5F4RcAeODlQHpBwwFbwc3nDFXgiGBSigrAlYAXIJlgFcBOAIBjVYjJ0gPmdQi1UYmCBeQTxd+QIuDGIVnES6h3UCiA9oEhgBMgFwBzYM/gJ0EeoRaBCSCOiGATWyM/U6IgRMIYAgDgokA0xsywskJvYM9WYBoBJfAwk0OnfrZ6hgsyEX+gcWMsJBXSHuC49PygyZGr4YP1QrGeEHvAPwGvAn50FUBfwDoAAQOkoz6wS6C2YIiAk8AEYOoBQH1BhnCm6MzQEuiAG0lgNUjoACbIwGNAcIAGQIhAV24gAaAqQIoAACAMwDVAA2AqoHmgAWAII+AToDJCwBHuICjAOQCC7IAZIsAfAmBBjADBIA9DRuRwLDrgKAZ2afBdpVAosCRjIBSiIEAktETgOsbt4A2ABIBhDcRAESqEfIF+BAAdxsKADEAPgAAjIHAj4BygHwagC0AVwLLgmfsLIBSuYmAIAAEmgB1AKGANoAMgB87gFQAEoFVvYF0AJMRgEOLhUoVF4BuAMcATABCgB2BsiKosYEHARqB9ACEBgV3gLvKweyAyLcE8pCwgK921IAMhMKNQqkCqNgWF0wAy5vPU0ACx+lPsQ/SwVOO1A7VTtQO1U7UDtVO1A7VTtQO1UDlLzfvN8KaV9CYegMow3RRMU6RhPYYE5gLxPFLbQUvhXLJVMZOhq5JwIl4VUGDwEt0GYtCCk0che5ADwpZYM+Y4MeLQpIHORTjlT1LRgArkufM6wNqRsSRD0FRHXqYicWCwofAmR+AmI/WEqsWDcdAqH0AmiVAmYGAp+BOBgIAmY4AmYjBGsEfAN/EAN+jzkDOXQUOX86ICACbBoCMjM4BwJtxAJtq+yHMGRCKAFkANsA3gBHAgeVDIoA+wi/AAqyAncsAnafPAJ5SEACeLcaWdhFq0bwAnw8AnrFAn0GAnztR/1IemAhACgSSVVKWBIUSskC0P4C0MlLJAOITAOH40TCkS8C8p5dAAMDq0vLTCoiAMxNSU2sAos8AorVvhgEGkBkArQCjjQCjlk9lH4CjtYCjll1UbFTMgdS0VSCApP4ApMJAOYAGVUbVaxVzQMsGCmSgzLeeGNFODYCl5wC769YHqUAViIClowClnmZAKZZqVoGfkoAOAKWsgKWS1xBXM4CmcgCmWFcx10EFgKcmDm/OpoCnBMCn5gCnrWHABoMLicMAp3uAp6PALI6YTFh7AKe0AKgawGmAp6cHAKeS6JjxWQkIigCJ6wCJnsCoPgCoEnUAqYsAqXLAqf8AHoCp+9oeWiuAABGahlqzgKs4AKsqwKtZAKs/wJXGgJV2QKx3tQDH0tslAKyugoCsuUUbN1tYG1FXAMlygK2WTg8bo0DKUICuFsCuUQSArkndHAzcN4CvRYDLa8DMg4CvoVx/wMzbgK+F3Mfc0wCw8gCwwFzf3RIMkJ03QM8pAM8lwM9vALFeQLGRALGDYYCyGZOAshBAslMAskrAmSaAt3PeHZeeKt5IkvNAxigZv8CYfEZ8JUhewhej164DgLPaALPaSxIUM/wEJwAw6oCz3ABJucDTg9+SAIC3CQC24cC0kwDUlkDU1wA/gNViYCGPMgT6l1CcoLLg4oC2sQC2duEDYRGpzkDhqIALANkC4ZuVvYAUgLfYgLetXB0AuIs7REB8y0kAfSYAfLPhALr8ALpbXYC6vYC6uEA9kQBtgLuhgLrmZanlwAC7jwDhd2YdnDdcZ4C8wAAZgOOE5mQAvcQA5FrA5KEAveVAvnWAvhjmhmaqLg0mxsDnYAC/vcBGAA2nxmfsAMFigOmZwOm1gDOwgMGZ6GFogIGAwxGAQwBHAdqBl62ZAIAuARovA6IHrAKABRyNgAgAzASSgOGfAFgJB4AjOwAHgDmoAScjgi0BhygwgCoBRK86h4+PxZ5BWk4P0EsQiJCtV9yEl+9AJbGBTMAkE0am7o7J2AzErrQDjAYxxiKyfcFWAVZBVgFWQVkBVkFWAVZBVgFWQVYBVkFWAVZRxYI2IZoAwMDCmVe6iwEygOyBjC8vAC8BKi8AOhBKhazBUc+aj5xQkBCt192OF/pAFgSM6wAjP/MbMv9puhGez4nJAUsFyg3Nn5u32vB8hnDLGoBbNdvMRgFYAVrycLJuQjQSlwBAQEKfV5+jL8AND+CAAQW0gbmriQGAIzEDAMCDgDlZh4+JSBLQrJCvUI5JF8oYDcoOSQJwj4KRT9EPnk+gj5xPnICikK9SkM8X8xPUGtOCy1sVTBrDG8gX+E0OxwJaJwKYyQsPR4nQqxCvSzMAsv9X8oPIC8KCQoAACN+nt9rOy5LGMmsya0JZsLMzQphQWAP5hCkEgCTjh5GQiYbqm06zjkKND9EPnFCQBwICx5NSG1cLS5a4rwTCn7uHixCQBxeCUsKDzRVREM4BTtEnC0KghwuQkAb9glUIyQZMTIBBo9i8F8KcmTKYAxgLiRvAERgGjoDHB9gtAcDbBFmT2BOEgIAZOhgFmCWYH5gtGBMYJJpFhgGtg/cVqq8WwtDF6wBvCzOwgMgFgEdBB8BegJtMDGWU4EBiwq5SBsA5SR0jwvLDqdN6wGcAoidUAVBYAD4AD4LATUXWHsMpg0lILuwSABQDTUAFhO4NVUC0wxLZhEcANlPBnYECx9bADIAtwKbKAsWcKwzOaAaAVwBhwn9A9ruEAarBksGugAey1aqWwq7YhOKCy1ADrwBvAEjA0hbKSkpIR8gIi0TJwciDY4AVQJvWJFKlgJvIA9ySAHUdRDPUiEaqrFN6wcSBU1gAPgAPgsBewAHJW0LiAymOTEuyLBXDgwAYL0MAGRKaFAiIhzAADIAtwKbKC08D88CkRh8ULxYyXRzjtilnA72mhU+G+0S2hIHDxwByAk7EJQGESwNNwwAPAC0zwEDAKUA4gCbizAAFQBcG8cvbXcrDsIRAzwlRNTiHR8MG34CfATCC6vxbQA4Oi4Opzkuz6IdB7wKABA7Ls8SGgB9rNsdD7wbSBzOoncfAT4qYB0C7KAJBE3z5R9mDL0M+wg9Cj8ABcELPgJMDbwIvQ09CT0KvS7PoisOvAaYAhwPjBriBBwLvBY8AKELPBC8BRihe90AO2wMPQACpwm9BRzR9QYFB2/LBnwAB7wSXBISvQECAOsCAAB1FVwHFswV/HAXvBg8AC68AuyovAAevAJWISuAAAG8AALkFT0VvCvso7zJqDwEAp8nTAACXADn3hm8CaVcD7/FAPUafAiiBQv/cQDfvKe8GNwavKOMeXMG/KmchAASvAcbDAADlABtvAcAC7ynPAIaPLsIopzLDvwHwak8AOF8L7dtvwNJAAPsABW8AAb8AAm8AGmMABq8AA68Axi8jmoV/AABXAAObAAuTB8ABrwAF7wIIgANSwC6vCcAA7wADpwq7ACyWwAcHAAbvAAB7AqiAAXHCxYV3AAHnABCvAEDAGm8AAt8AB28AAi8CaIABcsAbqAZ1gCSCCIABcsAATwAB9wAHZwIIgAGmwAJfAAbLABtHADmvIEACFwACDwAFLwAaPwJIgAGywDjjAAJPAuiDsX7YAAHPABunUBJAEgACrwFAAM8AAmuAzgABxwAGXwAAgym/AAKHAAKPAAJ/KfsBrwACRwAAwwAEDwBABQ8ABFsAA+MAA3sAA28ABkMBxYcABU8AG6cFrQBvAC7ABM8BABpLAsA4UwAAjwABFMAF3wFHAAG0QAYvB8BfClTADpGALAJBw4McwApK3EBpQYIXwJtJA0ACghwTG1gK4oggRVjLjcDogq1AALZABcC/ARvAXdzSFMVIgNQAhY/AS0GBHRHvnxTe0EAKgAyAvwAVAvcAHyRLQEsAHfmDhIzRwJLAFgGAAJRAQiLzQB5PAQhpgBbANcWAJZpOCCMAM5ssgDQ1RcJw3Z0HBlXHgrSAYmRrCNUVE5JEz3DivoAgB04QSos4RKYUABzASosMSlDGhADMVYE+MbvAExm3QBrAnICQBF7Osh4LzXWBhETIAUVCK6v/xPNACYAAQIbAIYAiQCONgDjALQA1QCdPQC7AKsApgChAOcAnwDTAJwA4AEBAPwAwAB6AFsAywDNAPwA1wDrAIkAogEqAOMA2ADVBAIIKzTT09PTtb/bzM/NQjEWAUsBVS5GAVMBYgFhAVQBRUpCRGcMAUwUBgkEMzcMBwAgDSQmKCs3OTk8PDw9Pg0/HVBQUFBSUlFSKFNUVlVVHFxgYF9hYCNlZ29ucXFxcXFxc3Nzc3Nzc3Nzc3N1dXZ1dFsAPesAQgCTAHEAKwBf8QCHAFAAUAAwAm/oAIT+8fEAXQCM6wCYAEgAWwBd+PipAH4AfgBiAE8AqgAdAK8AfAI5AjwA9QDgAPcA9wDhAPgA4gDiAOEA3wAoAnQBSgE5ATcBTQE3ATcBNwEyATEBMQExARUBURAAKgkBAEwYCxcEFhcPAIcAjwCfAEoAYxkCKgBvAGgAkAMOAyArAxpCP0gqAIoCSADAAlACnQC5Ao8CjwKPAo8CjwKPAoQCjwKPAo8CjwKPAo8CjgKOApECmQKQAo8CjwKNAo0CjQKNAosCjgJuAc0CkAKYAo8CjwKOF3oMAPcGA5gCWgIzGAFNETYC2xILLBQBRzgUTpIBdKU9AWJaAP4DOkgA/wCSKh4ZkGsAKmEAagAvAIoDlcyM8K+FWwa7LA/DEgKe1nUrCwQkWwGzAN5/gYB/gX+Cg4N/hIeFf4aJh4GIg4mDin+Lf4x/jYuOf49/kIORf5J/k3+Uf5WElomXg5h/AIMloQCEBDwEOQQ7BD4EPARCBD8EOgRABEIEQQQ9BD8EQgCkA4gAylIA0AINAPdbAPcBGgD3APUA9QD2APXVhSRmvwD3APUA9QD2APUdAIpbAPcAigEaAPcAigLtAPcAitWFJGa/HQD4WwEaAPcA9wD1APUA9gD1APgA9QD1APYA9dWFJGa/HQCKWwEaAPcAigD3AIoC7QD3AIrVhSRmvx0CRAE3AksBOgJMwgOfAu0Dn9WFJGa/HQCKWwEaA58AigOfAIoC7QOfAIrVhSRmvx0EMQCKBDIAigeOMm4hLQCKAT9vBCQA/gDHWwMAVVv/FDMDAIoDPtkASgMAigMAl2dBtv/TrfLzakaPh3aztmIuZQrR3ER2n5Yo+qNR2jK/aP/V04UK1njIJXLgkab9PjOxyJDVbIN3R/FZLoZVl2kYFQIZ7V6LpRqGDt9OdDohnJKp5yX/HLj0voPpLrneDaN11t5W3sSM4ALscgSw8fyWLVkKa/cNcQmjYOgTLZUgOLi2F05g4TR0RfgZ4PBdntxdV3qvdxQt8DeaMMgjJMgwUxYN3tUNpUNx21AvwADDAIa0+raTWaoBXmShAl5AThpMi282o+WzOKMlxjHj7a+DI6AM6VI9w+xyh3Eyg/1XvPmbqjeg2MGXugHt8wW03DQMRTd5iqqOhjLvyOCcKtViGwAHVLyl86KqvxVX7MxSW8HLq6KCrLpB8SspAOHO9IuOwCh9poLoMEha9CHCxlRAXJNDobducWjqhFHqCkzjTM2V9CHslwq4iU19IxqhIFZMve15lDTiMVZIPdADXGxTqzSTv0dDWyk1ht430yvaYCy9qY0MQ3cC5c1uw4mHcTGkMHTAGC99TkNXFAiLQgw9ZWhwKJjGCe+J5FIaMpYhhyUnEgfrF3zEtzn40DdgCIJUJfZ0mo3eXsDwneJ8AYCr7Vx2eHFnt2H6ZEyAHs9JoQ4Lzh5zBoGOGwAz37NOPuqSNmZf51hBEovtpm2T1wI79OBWDyvCFYkONqAKGVYgIL0F+uxTcMLSPtFbiNDbBPFgip8MGDmLLHbSyGXdCMO6f7teiW9EEmorZ+75KzanZwvUySgjoUQBTfHlOIerJs6Y9wLlgDw18AB1ne0tZRNgGjcrqHbtubSUooEpy4hWpDzTSrmvqw0H9AoXQLolMt9eOM+l9RitBB1OBnrdC1XL4yLFyXqZSgZhv7FnnDEXLUeffb4nVDqYTLY6X7gHVaK4ZZlepja2Oe6OhLDI/Ve5SQTCmJdH3HJeb14cw99XsBQAlDy5s5kil2sGezZA3tFok2IsNja7QuFgM30Hff3NGSsSVFYZLOcTBOvlPx8vLhjJrSI7xrNMA/BOzpBIJrdR1+v+zw4RZ7ry6aq4/tFfvPQxQCPDsXlcRvIZYl+E5g3kJ+zLMZon0yElBvEOQTh6SaAdIO6BwdqJqfvgU+e8Y65FQhdiHkZMVt9/39N2jGd26J6cNjq8cQIyp6RonRPgVn2fl89uRDcQ27GacaN0MPrcNyRlbUWelKfDfyrNVVGBG5sjd3jXzTx06ywyzuWn5jbvEfPPCTbpClkgEu9oPLKICxU5HuDe3jA1XnvU85IYYhaEtOU1YVWYhEFsa4/TQj3rHdsU2da2eVbF8YjSI0m619/8bLMZu3xildwqM7zf1cjn4Whx0PSYXcY5bR7wEQfGC7CTOXwZdmsdTO8q3uGm7Rh/RfCWwpzBHCAaVfjxgibL5vUeL0pH6bzDmI9yCXKC/okkmbc28OJvI87L/bjFzpq0DHepw4kT1Od+fL7cyuFaRgfaUWB2++TCFvz11J0leEtrGkpccfX9z2LY39sph4PBHCjNOOkd0ybUm+ZzS8GkFbqMpq8uiX2yHpa0jllTLfGTDBMYR6FT5FWLLDPMkYxt1Q0eyMvxJWztDjy0m6VvZPvamrFXjHmPpU6WxrZqH6WW//I37RwvqPQhPz8I3RPuXAk1C94ZprQWm9iGM/KgiGDO6SV9sjp+Jmk4TBajMNJ5zzWZ1k1jrteQQBp9C2dOvmbIeeEME8y573Q8TgGe+ZCzutM45gYLBzYm2LNvgq2kebAbMpHRDSyh6dQ27GbsAAdCqQVVXWC1C+zpwBM2Lr4eqtobmmu1vJEDlIQR1iN8CUWpztq50z7FFQBn3SKViX6wSqzVQCoYvAjByjeSa+h1PRnYWvBinTDB9cHt4eqDsPS4jcD3FwXJKT0RQsl8EvslI2SFaz2OtmYLFV8FwgvWroZ3fKmh7btewX9tfL2upXsrsqpLJzpzNGyNlnuZyetg7DIOxQTMBR7dqlrTlZ6FWi1g4j1NSjA2j1Yd7fzTH6k9LxCyUCneAKYCU581bnvKih6KJTeTeCX4Zhme/QIz7w2o+AdSgtLAkdrLS9nfweYEqrMLsrGGSWXtgWamAWp6+x6GM/Z8jNw3BqPNQ39hrzYLECn3tPvh/LqKbRSCiDGauDKBBj/kGbpnM1Bb/my8hv4NWStclkwjfl57y4oNDgw1JAG9VOti3QVVoSziMEsSdfEjaCPIDb7SgpLXykQsM+nbqbt97I0mIlzWv0uqFobLMAq8Rd9pszUBKxFhBPwOjf//gVOz2r7URJ2OnpviCXv9iz3a4X/YLBYbXoYwxBv/Kq0a5s4utQHzoTerJ7PmFW/no/ZAsid/hRIV82tD+Qabh5F1ssIM8Ri3chu0PuPD3sSJRMjDoxLAbwUbroiPAz/V52e8s3DIixxlO7OrvhMj3qfzA0kKxzwicr5wJmZwJxTXgrwYsqhRvpgC2Nfdyd+TYYxJSZgk+gk2g9KyHSlwQVAyPtWWgvVGyVBqsU2LpDlLNosSAtolC1uBKt5pQZLhAxTjeGCWIC/HVpagc5rRwkgpCHKEsjA8d+scp8aiMewwQBhp5dYTV5t/Nvl+HbDMu8F3S0psPyZb1bSnqlHPFUnMQeQqSqwDBT23fJO9gO3aVaa1icrXU0PKwlMM5K+iL3ATcVq2fFWKk0irCTF4LDVDG4gUpkyplq6efcZS+WDR1woApjD18x+2JQR9oOXzuA7uy4b+/91WsJd/tSd1QcAH8PVPXApieA37B7YXPhDPH1azP3PKR+HfHmOoDYLeuKsIi/ssSsdYs62qJo14Hw1P2N/6zpr8F3FTWmJ4ysAVcl84Iv/tl///Z8FaAWbBQbyMNDZjrZ2JwdRjtd1jOeNumSodFtr4/Zf45iRJf/8HSW+KIB/+GlKu8Rv1BPLr/4duoL+kFPRqrstEr41gfJupoJRf4hcYDWX93FOcfEBiIivxtjtV8g7mvOReiamYWKE7vfPbv3v2L9Kwq3cIDFGLyhyfOGuf/9vA5muH6Pjg7B4SUj2ydDXra9fSBI+DrsNHA6l51wfHssJb+11TfNk7B8OleUe3Y+ZmHboMFHdv7FFP2cfISFyeAQR0sk/Xv62HBTdW4HmnGSLFk/cqyWVVFJkdIIa+4hos3JRHcqLoRKM5h2Qtk1RZtzISMtlXTfTqIc77YsCCgQD0r61jtxskCctwJOtjE/pL8wC4LBD4AZFjh2wzzFCrT/PNqW0/DeBbkfMfzVm9yy06WiF+1mTdNNEAytVtohBKg3brWd2VQa+aF+cQ0mW5CvbwOlWCT07liX226PjiVLwFCRs/Ax2/u+ZNPjrNFIWIPf5GjHyUKp60OeXe9F01f7IaPf/SDTvyDAf7LSWWejtiZcsqtWZjrdn6A2MqBwnSeKhrZOlUMmgMionmiCIvXqKZfmhGZ1MwD3uMF4n9KJcfWLA3cL5pq48tm5NDYNh3SS/TKUtmFSlQR89MR4+kxcqJgpGbhm9gXneDELkyqAN5nitmIzTscKeJRXqd64RiaOALR2d295NWwbjHRNG2AU5oR9OS2oJg/5CY6BFPc1JvD2Mxdhp2/MZdI8dLePxiP4KRIp8VXmqfg+jqd/RNG7GNuq1U2SiI4735Bdc0MVFx6mH5UOWEa5HuhYykd6t4M1gYLVS8m1B+9bUqi5DziQq7qT8d94cxB6AB4WqMCOF/zPPtRSZUUaMSsvHOWxGASufywTX8ogy6HgUf9p+Z30wUEosl8qgmwm6o2AV6nO9HKQjRHpN6SUegI5pvR61RLnUJ1lqCtmfcsRQutEizVpAaPXN7xMp5UQ5OSZK6tniCK9CpyMd7LjR6+MxfoMEDPpWdf2p2m5N3KO4QMxf+V7vGdYjemQczQ+m2MGIkFNYDMf0Yop2eSx81sP36WHUczqEhKysp2iJSYAvfgJjinKwToPvRKb+HBi+7cJ96S5ngfLOXaHAFRLkulo4TnXTFO51gX0TCCo4ZUHdbpdgkMEwUZAPjh6M+hA8DzycbtxAgH3uD6i0nN1aTiIuQ4BYCE9dEHHwAmINU+4YEWx4EC3OZwFGfYZMPLScVlb+BAAJeARUh+gdWA3/gRqCrf1jecgqeFf1MdzrrP4SVlGm5mMihSP+zYYksAB7O+SBPwNQqSNMiLnkviY/klwgcRmvqtCqeWeA0gjuir4CMZqmw/ntP6M+l0pdN8/P9xI53aP7x/zavJbbKOz8VzO/nXxIr1tjparMnqd6iWdByHKw4lF4p/u57Yv07WeZPDnRl7wgmDVZZ44fQsjdYO/gmXQ+940PRGst8UMQApFC4OOV22e4N+lVOPyFLAOj4t8R3PFw/FjbSWy0ELuAFReNkee8ORcBOT2NPDcs7OfpUmzvn/F9Czk9o9naMyVYy/j8I5qVFmQDFcptBp65J/+sJA3w/j6y/eqUkKxTsf0CZjtNdRSBEmJ2tmfgmJbqpcsSagk+Ul9qdyV+NnqFBIJZFCB1XwPvWGDBOjVUmpWGHsWA5uDuMgLUNKZ4vlq5qfzY1LnRhCc/mh5/EX+hzuGdDy5aYYx4BAdwTTeZHcZpl3X0YyuxZFWNE6wFNppYs3LcFJePOyfKZ8KYb7dmRyvDOcORLPH0sytC6mH1US3JVj6paYM1GEr+CUmyHRnabHPqLlh6Kl0/BWd3ebziDfvpRQpPoR7N+LkUeYWtQ6Rn5v5+NtNeBPs2+DKDlzEVR5aYbTVPrZekJsZ9UC9qtVcP99thVIt1GREnN8zXP8mBfzS+wKYym8fcW6KqrE702Zco+hFQAEIR7qimo7dd7wO8B7R+QZPTuCWm1UAwblDTyURSbd85P4Pz+wBpQyGPeEpsEvxxIZkKsyfSOUcfE3UqzMFwZKYijb7sOkzpou+tC4bPXey5GI1GUAg9c3vLwIwAhcdPHRsYvpAfzkZHWY20vWxxJO0lvKfj6sG2g/pJ1vd/X2EBZkyEjLN4nUZOpOO7MewyHCrxQK8d5aF7rCeQlFX+XksK6l6z971BPuJqwdjj68ULOj9ZTDdOLopMdOLL0PFSS792SXE/EC9EDnIXZGYhr52aQb+9b2zEdBSnpkxAdBUkwJDqGCpZk/HkRidjdp0zKv/Cm52EenmfeKX6HkLUJgMbTTxxIZkIeL/6xuAaAAHbA7mONVduTHNX/UJj1nJEaI7f3HlUyiqKn7VfBE+bdb4HWln1HPJx001Ulq1tOxFf8WZEARvq5Da1+pE7fPVxLntGACz3nkoLsKcPdUqdCwwiyWkmXTd5+bv3j7HaReRt3ESn783Ew3SWsvkEjKtbocNksbrLmV+GVZn1+Uneo35MT1/4r8fngQX5/ptORfgmWfF6KSB/ssJmUSijXxQqUpzkANEkSkYgYj560OOjJr6uqckFuO15TRNgABEwNDjus1V3q2huLPYERMCLXUNmJJpbMrUQsSO7Qnxta55TvPWL6gWmMOvFknqETzqzFVO8SVkovEdYatypLGmDy9VWfgAc0KyIChiOhbd7UlbAeVLPZyEDp4POXKBwN/KP5pT6Cyqs6yaI00vXMn1ubk9OWT9Q/O2t/C25qlnO/zO0xcBzpMBCAB8vsdsh3U8fnPX1XlPEWfaYJxKVaTUgfCESWl4CCkIyjE6iQ5JFcwU6S4/IH0/Agacp8d5Gzq2+GzPnJ7+sqk40mfFQpKrDbAKwLlr3ONEati2k/ycLMSUu7V/7BBkDlNyXoN9tvqXCbbMc4SSQXgC/DBUY9QjtrCtQ+susEomCq8xcNJNNMWCH31GtlTw2BdCXkJBjT+/QNWlBWwQ5SWCh1LdQ99QVii/DyTxjSR6rmdap3l3L3aiplQpPYlrzNm9er88fXd2+ao+YdUNjtqmxiVxmyYPzJxl67OokDcTezEGqldkGgPbRdXA+fGcuZVkembZByo7J1dMnkGNjwwCny+FNcVcWvWYL9mg8oF7jACVWI3bA64EXpdM8bSIEVIAs5JJH+LHXgnCsgcMGPZyAAVBncvbLiexzg9YozcytjPXVlAbQAC7Tc4S0C8QN4LlAGjj4pQAVWrwkaDoUYGxxvkCWKRRHkdzJB5zpREleBDL1oDKEvAqmkDibVC4kTqF89YO6laUjgtJPebBfzr16tg4t10GmN1sJ5vezk2sUOq8blCn5mPZyT3ltaDcddKupQjqusNM9wtFVD0ABzv17fZDn7GPT1nkCtdcgYejcK1qOcTGtPxnCX1rErEjVWCnEJv5HaOAUjgpiKQjUKkQi64D5g2COgwas8FcgIl0Pw95H9dWxE3QG0VbMNffh6BPlAojLDf4es2/5Xfq7hw5NGcON2g8Qsy2UQm94KddKyy3kdJxWgpNaEc15xcylbLC3vnT26u8qS90qc2MU8LdOJc5VPF5KnSpXIhnj1eJJ/jszjZ01oR6JDFJRoeTPO/wh4IPFbdG9KljuSzeuI92p8JF/bpgDE8wG86/W2EBKgPrmzdLijxssQn8mM44ky/KLGOJcrSwXIpZa/Z3v7W6HCRk7ewds99LTsUW1LbeJytw8Q/BFZVZyfO9BUHOCe2suuEkO8DU4fLX0IQSQ2TdOkKXDtPf3sNV9tYhYFueuPRhfQlEEy+aYM/MCz7diDNmFSswYYlZZPmKr2Q5AxLsSVEqqBtn6hVl1BCFOFExnqnIsmyY/NA8jXnDaNzr7Zv3hu+I1Mf/PJjk0gALN2G8ABzdf9FNvWHvZHhv6xIoDCXf964MxG92vGZtx/LYU5PeZqgly8tT5tGeQGeJzMMsJc5p+a5Rn2PtEhiRzo/5Owjy1n0Lzx3ev8GHQmeWb8vagG6O5Qk5nrZuQTiKODI4UqL0LLAusS2Ve7j1Ivdxquu1BR9Rc4QkOiUPwQXJv6du2E8i5pDhVoQpUhyMWGUT2O2YODIhjAfI71gxep5r5zAY7GBUZpy51hAw0pcCCrhOmU8Wp6ujQTdZQsCjtq6SHX8QAMNiPCIIkoxhHEZPgsBcOlP4aErJZPhF7qvx6gHrn8hEwPwYbx8YmT/n7lbcmTip1v8kgsrIjFTAlvLY4Nuil0KDmgz3svYs0ZJ3O3Is/vSx4xpxF1e2VAtZE8dJxGYEIhCSuPvCjP54l/NSNDnwlKvAW8mG+AQkgp7a87Igh26uKMFGD0PoPHTSvoWxiHuk+su8XkQiHIjeYKl/RdcOHpxhQH3zHCNE3aARm83Bl6zGxU/vMltlVPQhubcqhW4RYkl6uXk5JdP/QpzaKFpw2M8zvysv2qj7xaQECuu2akM0Cssj/uB9+wDR7uA6XOnLNaoczalHoMj33eiiu+DRaFsUmlmUZuh9bjDY4INMNSSAivSh03uJvny4Gj+D+neudoa7iJi7c4VFlZ/J5gUR82308zSNAt/ZroBXDWw0fV3eVPAn3aX0mtJabF6RsUZmL+Ehn+wn51/4QipMjD+6y64t7bjL6bjENan2prQ4h7++hBJ9NXvX8CUocJqMC937IasLzm5K0qwXeFMAimMHkEIQIQI2LrQ9sLBfXuyp66zWvlsh74GPv7Xpabj993pRNNDuFud5oIcn/92isbADXdpRPbjmbCNOrwRbxGZx2XmYNGMiV5kjF4IKyxCBvKier9U4uVoheCdmk83rp5G0PihAm2fAtczI4b9BWqX+nrZTrJX5kSwQddi93NQrXG+Cl3eBGNkM77VBsMpEolhXex1MVvMkZN9fG59GGbciH11FEXaY1MxrArovaSjE/lUUqBg2cZBNmiWbvzCHCPJ4RVGFK2dTbObM1m+gJyEX53fa7u3+TZpm74mNEzWbkVL4vjNwfL9uzRCu1cgbrNx5Yv5dDruNrIOgwIk+UZWwJfdbu/WHul6PMmRflVCIzd7B37Pgm/Up/NuCiQW7RXyafevN3AL6ycciCc4ZPlTRzEu+aURGlUBOJbUEsheX7PPyrrhdUt5JAG12EEEZpY/N3Vhbl5uLAfT0CbC2XmpnryFkxZmBTs5prvEeuf0bn73i3O82WTiQtJWEPLsBXnQmdnKhB06NbbhLtlTZYJMxDMJpFeajSNRDB2v61BMUHqXggUwRJ19m6p5zl51v11q34T74lTXdJURuV6+bg2D6qpfGnLy7KGLuLZngobM4pIouz4+n0/UzFKxDgLM4h+fUwKZozQ9UGrHjcif51Ruonz7oIVZ56xWtZS8z7u5zay6J2LD4gCYh2RXoBRLDKsUlZ80R8kmoxlJiL8aZCy2wCAonnucFxCLT1HKoMhbPKt34D97EXPPh0joO93iJVF1Uruew61Qoy3ZUVNX9uIJDt9AQWKLLo+mSzmTibyLHq0D6hhzpvgUgI6ekyVEL3FD+Fi5R3A8MRHPXspN1VyKkfRlC+OGiNgPC4NREZpFETgVmdXrQ2TxChuS3aY+Ndc7CiYv5+CmzfiqeZrWIQJW/C4RvjbGUoJFf1K6ZdR2xL/bG4kVq1+I4jQWX+26YUijpp+lpN7o5c6ZodXJCF56UkFGsqz44sIg8jrdWvbjRCxi2Bk0iyM3a7ecAV93zB6h1Ei38c0s6+8nrbkopArccGP8vntQe1bFeEh2nJIFOHX/k3/UHb5PtKGpnzbkmnRETMX+9X/QduLZWw/feklW/kH/JnzToJe9Kgu9Hct1UGbH5BPCLo4OOtQnZonW0xnyCcdtKyPQ/sbLiSTYJdSx4sJqWLMnfn6fIqPB3WAgk00J+fCOkomPHqtS67pf0mFmKoItYZUlJu6BihSZ8qve8+/X+LX1MhQXF95AshfUleCtmdn6l6QFXzLg2sgLn1oyVFuZecv7fzsIHzoRlAGp0gwYDOn1S4qabWvB5xUaE+Svw4KmjWtxdnuQbI32dw87D4N95u8qQRJTSQg0wLxOLkxSrPMLEn1UIhNKjAa9VLs3WLaXGrtCIt8bKY2AQP/ZdyRU6zT/E8qP2ltyBE2CCZPgWgEYDoJJO4n92y61ylNaSFXKohJhLjkfvYWm592539sIpmBNLlDo1bExFBfmHJJ0lFEiC/fj8v42OoMC9Mo3whIoWvyHfq6Uacqq55mzFf/EGC+NP/gHjhd6urc6R0hES27VXux7UY8CGKPohplWIZtTrFSaPWslCWy78E22Pw8fvReSUZx/txqLtHrFqg1DY/Eus6Iq1heZdrdcqE0/c971Bz1HW/XNXHsXpUIbI4kHdOfCc6T5zHZzvzQJB0ggMFL6IGPAilU9bj/ASdPk6fNvNtZqPuwEDhMBtBnhCexo6D6VAGIOPvJPPV523Y8R8a9vCqZbswSZKzOT1291BsUbmUWehtbb1fdRX9hiJKXvwr1QX6GjnZMgyMvnwOo2Dr24amr7FqEAbVeJAjRNOceM2EQ1Mna9fInqPJ5mh5X8CzT1aDOv08An0blz0fF5Gq4mS2cwq5glwIOlY5nznE8X4j/UdZ3FJsVIXte1JH0A7iibuPfazStM5O/Vo3KXIpXBeGORV0M9XDXFvsYZUHGvFCUubWzTw248EHE0cpQM2zNg6rjavreq3NHCAWsoZ7wvVy7l5gvtKRmIj1MnvfWEm0yFnGcuOq192350a5WefpfKCcX3Sn+AgHU+qnpstNtddbdVebagJU390lq9ko4aI9rqdaWXYG8tv5O/ZQHSqDRYHC6zfH10l5z++opso7aOSaIczlQ13iAzXvLdEu0V7kwNUZ1c8Y8aq7SeIEe5p902FlNkW8DnwHyueHchbK8vVFJfmr9mz7P8nUSccl1ULaoWMRSI1ls32kvlK0h46h3J25Yd9AzfcJbp9qYF/SEt3H5j69mMdcsNxZcAzT/A89ov3tglTX54y/EwjMfuoDoxPwLJDm5I7q6F9Kp469yNy1zSxz0N4HbRRBj9xFFuogvBspv7DXUNIsGxTINEQfmctb42XImWAODgARNo7dfcTqFKq6aTfivmvunLmzP9f8yLsJvXD3JbcPcDGNriMAcjzeDTNr65t8YB5tsnFDFLa0Uwmd2OvUdkLMX9TsAUYUfooSv47sw5J88j7CpahRjjO3/UhOXjTS39W5YZAel2KTbQd1h7INOw9P23GW7GDAe4agIUFHP48MZr7ubq0efFmmtwYMyk7D0r1oeG/CGOODgb9Ur+JMHxkwzPbtCX2ZnENQuI0RN5SyTIZuoY4XS9Rd/tPe3vNAZGSHM/YYwqs9xkkENx0O+eC2YVW1cwOJ3ckE890nbQeHLKlW15L0P0W2VliyYrfNr0nrIYddoRyGaCtj4OYd2MT7ebApqZOAQIaSHJM4mphhfjNjtnjg6YRyx9qM2FT3xOiYIMqXPFWdzhSgFF8ItocqVV09CmIoO8k6U/oJB7++wSX/YksxfPXHyjSgAGZOj1aKEq9fSvXBqtp2wu8/FxEf5AxapAD06pPGuLVUYLdgEzHR8wqRGYEwiUO9MyYbgswstuLYhwYFpSVKOdzAihZ9LuHtD598EGhINU9xc9xhL+QgTLAstmPIvvm2xyRw/WTUPXkP3ZHu6GyPmj5xFH9/QGpkglKXRVUBgVmLOJx8uZO2AstxQYocZH2JhORlxawj66BAXUEs7K/gPxINIRAFyK3WLuyq9oBTF9wEbnmCot82WjIg7CPNwYK3KrZMrKAz5yFszg4wCVLJVnIL8+OYA0xRDH8cHQjQUiQ2i1mr/be32k/3Xej9sdf3iuGvZHyLFSJvPSqz/wltnxumTJYKZsrWXtx/Rmu39jjV9lFaJttfFn57/No2h/unsJmMHbrnZ8csxkp5HQ4xR1s0HH+t3Iz82a3iQWTUDGq/+l2W3TUYLE8zNdL8Y+5oXaIH/Y2UUcX67cXeN4WvENZjz4+8q7vjhowOI3rSjFhGZ6KzwmU7+5nFV+kGWAZ5z2UWvzq0TK0pk1hPwAN4jbw//1CApRvIaIjhSGhioY6TUmsToek9cF9XjJdHvLPcyyCV3lbR5Jiz/ts46ay2F820VjTXvllElwrGzKcNSyvQlWDXdwrUINXmHorAM3fE19ngLZmgeUaCJLsSITf2VcfAOuWwX7mTPdP8Zb/04KqRniufCpwnDUk7sP0RX6cud/sanFMagnzKInSRVey0YzlVSOtA/AjrofmSH6RYbJQ8b4NDeTkIGc6247+Mnbez/qhJ9GAv9fGNFercPnnrf285Qgs+UqThLRgflcAKFuqWhLzZaR4QqvSwa3xe0LPkqj9xJWub195r7NrrR0e78FR+0mRBNMPsraqZctAUVAJfYKehTDV1MGGQSeDsOK9J3sbUuKRIS/WilX/64CBms9jCZocBlsBSZaIAjWm/SUZ8daWL2a/cJFyUOFqE3Epc2RWbtjNyPwOGpWtzu32kUooUqsJud7IV4E8rstUBXM7tGEtBx99x60g1duhyvxeKJSl8s5E34HTMmADT0836aEdg5Dv9rVyCz8i2REOmiz6wtIVFN0HsjAoN37SrY0bV1Ms8CRUILhvZvvRaDzoVCaSI0u8EPuTe4b7OPowgRGODl22UBBmHSTUY8e4DyL+Bc7bngo+2T8HtNvzyATSL5iJZgFPKpmUyZv54vVL90+/RQGATUmNKnrIvcJMYON9fl83naW5sf6hRkbbTC9RUEE6XADwjgA46wWfUQ+QWZl0J4PVTWAln/YfAz/SV3q3J9+yCYDleruoN5uoc/wT2f4YONGTb6zTGq3V+3JqzmCOjwebKln+fExVLN7sqtqfMnsKVXWbb2Ai5m3D/fCTgX7oKYzTZvj+m28XnDqPbXuP4MyWdmPezcesdrh7rCzA7BWdObiuyDEKjjzBbQ0qnuwjliz+b+j7aPMKlkXyIznV3tGzAfYwIbzGGt098oh4eq3ruDjdgHtjxfFCjHrjjRbHajoz/YOY4raojPFQ910GIlBV7hq47UDgpyajBxQUmD8NctiLV1rTSLAEsQDLTeRKcmPBMVMFF0SPBBhZ5oXoxtD3lMhuAQXmA+57OcciczVW9e9zwSIAHS+FJmvfXMJGF1dMBsIUMaPjvgaVqUc3p32qVCMQYFEiRLzlVSOGMCmv/HJIxAHe3mL/XnoZ1IkWLeRZfgyByjnDbbeRK5KL7bYHSVJZ9UFq+yCiNKeRUaYjgbC3hVUvfJAhy/QNl/JqLKVvGMk9ZcfyGidNeo/VTxK9vUpodzfQI9Z2eAre4nmrkzgxKSnT5IJ1D69oHuUS5hp7pK9IAWuNrAOtOH0mAuwCrY8mXAtVXUeaNK3OXr6PRvmWg4VQqFSy+a1GZfFYgdsJELG8N0kvqmzvwZ02Plf5fH9QTy6br0oY/IDsEA+GBf9pEVWCIuBCjsup3LDSDqI+5+0IKSUFr7A96A2f0FbcU9fqljdqvsd8sG55KcKloHIFZem2Wb6pCLXybnVSB0sjCXzdS8IKvE");const Ml=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Dl=4;function Fl(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function $l(e){let t=[];for(let n=0,s=e.length;n<s;){let s=e.codePointAt(n);n+=s<65536?1:2,t.push(s)}return t}function Gl(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let n=[];for(let s=0;s<t;)n.push(String.fromCodePoint(...e.slice(s,s+=4096)));return n.join("")}var Hl=xl("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");function Wl(e){return e>>24&255}function zl(e){return 16777215&e}const ql=new Map(Ol(Hl).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),Kl=new Set(Tl(Hl)),Vl=new Map,Jl=new Map;for(let[e,t]of Nl(Hl)){if(!Kl.has(e)&&2==t.length){let[n,s]=t,r=Jl.get(n);r||(r=new Map,Jl.set(n,r)),r.set(s,e)}Vl.set(e,t.reverse())}const Ql=44032,Yl=4352,Xl=4449,Zl=4519,eu=28,tu=21*eu,nu=Ql+19*tu,su=Yl+19,ru=Xl+21,iu=Zl+eu;function au(e){return e>=Ql&&e<nu}function ou(e,t){if(e>=Yl&&e<su&&t>=Xl&&t<ru)return Ql+(e-Yl)*tu+(t-Xl)*eu;if(au(e)&&t>Zl&&t<iu&&(e-Ql)%eu==0)return e+(t-Zl);{let n=Jl.get(e);return n&&(n=n.get(t),n)?n:-1}}function cu(e){let t=[],n=[],s=!1;function r(e){let n=ql.get(e);n&&(s=!0,e|=n),t.push(e)}for(let s of e)for(;;){if(s<128)t.push(s);else if(au(s)){let e=s-Ql,t=e%tu/eu|0,n=e%eu;r(Yl+(e/tu|0)),r(Xl+t),n>0&&r(Zl+n)}else{let e=Vl.get(s);e?n.push(...e):r(s)}if(!n.length)break;s=n.pop()}if(s&&t.length>1){let e=Wl(t[0]);for(let n=1;n<t.length;n++){let s=Wl(t[n]);if(0==s||e<=s){e=s;continue}let r=n-1;for(;;){let n=t[r+1];if(t[r+1]=t[r],t[r]=n,!r)break;if(e=Wl(t[--r]),e<=s)break}e=Wl(t[n])}}return t}function lu(e){return cu(e).map(zl)}function uu(e){return function(e){let t=[],n=[],s=-1,r=0;for(let i of e){let e=Wl(i),a=zl(i);if(-1==s)0==e?s=a:t.push(a);else if(r>0&&r>=e)0==e?(t.push(s,...n),n.length=0,s=a):n.push(a),r=e;else{let i=ou(s,a);i>=0?s=i:0==r&&0==e?(t.push(s),s=a):(n.push(a),r=e)}}return s>=0&&t.push(s,...n),t}(cu(e))}const hu=65039,du=".",fu=1,pu=45;function gu(){return new Set(Tl(Rl))}const mu=new Map(Nl(Rl)),yu=gu(),bu=gu(),wu=new Set(Tl(Rl).map((function(e){return this[e]}),[...bu])),vu=gu(),Au=(gu(),Ol(Rl));function Eu(){return new Set([Tl(Rl).map((e=>Au[e])),Tl(Rl)].flat(2))}const ku=Rl(),_u=jl((e=>{let t=jl(Rl).map((e=>e+96));if(t.length){let n=e>=ku;t[0]-=32,t=Gl(t),n&&(t=`Restricted[${t}]`);let s=Eu(),r=Eu(),i=[...s,...r].sort(((e,t)=>e-t));return{N:t,P:s,M:!Rl(),R:n,V:new Set(i)}}})),Pu=gu(),Cu=new Map;[...Pu,...gu()].sort(((e,t)=>e-t)).map(((e,t,n)=>{let s=Rl(),r=n[t]=s?n[t-s]:{V:[],M:new Map};r.V.push(e),Pu.has(e)||Cu.set(e,r)}));for(let{V:e,M:t}of new Set(Cu.values())){let n=[];for(let t of e){let e=_u.filter((e=>e.V.has(t))),s=n.find((({G:t})=>e.some((e=>t.has(e)))));s||(s={G:new Set,V:[]},n.push(s)),s.V.push(t),e.forEach((e=>s.G.add(e)))}let s=n.flatMap((({G:e})=>[...e]));for(let{G:e,V:r}of n){let n=new Set(s.filter((t=>!e.has(t))));for(let e of r)t.set(e,n)}}let xu=new Set,Su=new Set;for(let e of _u)for(let t of e.V)(xu.has(t)?Su:xu).add(t);for(let e of xu)Cu.has(e)||Su.has(e)||Cu.set(e,fu);const Iu=new Set([...xu,...lu(xu)]),Tu=Tl(Rl),Ou=function e(t){let n=jl((()=>{let t=Tl(Rl).map((e=>Tu[e]));if(t.length)return e(t)})).sort(((e,t)=>t.Q.size-e.Q.size)),s=Rl(),r=s%3;s=s/3|0;let i=1&s;return s>>=1,{B:n,V:r,F:i,S:1&s,C:2&s,Q:new Set(t)}}([]);class Nu extends Array{get is_emoji(){return!0}}function ju(e,t=Fl){let n=[];var s;s=e[0],bu.has(s)&&n.push("");let r=0,i=e.length;for(let s=0;s<i;s++){let i=e[s];Ru(i)&&(n.push(Gl(e.slice(r,s))),n.push(t(i)),r=s+1)}return n.push(Gl(e.slice(r,i))),n.join("")}function Uu(e){return(Ru(e)?"":`${Lu(ju([e]))} `)+Fl(e)}function Lu(e){return`"${e}"`}function Bu(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}function Ru(e){return vu.has(e)}function Mu(e,t){let n=0;return e.split(du).map((e=>{let s,r=$l(e),i={input:r,offset:n};n+=r.length+1;try{let e,n=i.tokens=Hu(r,uu),a=n.length;if(!a)throw new Error("empty label");{let r=n[0],o=a>1||r.is_emoji;if(!o&&r.every((e=>e<128)))s=r,Bu(s),function(e){if(e.length>=4&&e[2]==pu&&e[3]==pu)throw new Error("invalid label extension")}(s),e="ASCII";else if(o&&(i.emoji=!0,r=n.flatMap((e=>e.is_emoji?[]:e))),s=n.flatMap((e=>!t&&e.is_emoji?Wu(e):e)),Bu(s),r.length){if(bu.has(s[0]))throw Gu("leading combining mark");for(let e=1;e<a;e++){let t=n[e];if(!t.is_emoji&&bu.has(t[0]))throw Gu(`emoji + combining mark: "${Gl(n[e-1])} + ${ju([t[0]])}"`)}!function(e){let t=e[0],n=Ml.get(t);if(n)throw Gu(`leading ${n}`);let s=e.length,r=-1;for(let i=1;i<s;i++){t=e[i];let s=Ml.get(t);if(s){if(r==i)throw Gu(`${n} + ${s}`);r=i+1,n=s}}if(r==s)throw Gu(`trailing ${n}`)}(s);let t=[...new Set(r)],[i]=function(e){let t=_u;for(let n of e){let e=t.filter((e=>e.V.has(n)));if(!e.length)throw t===_u?Fu(n):$u(t[0],n);if(t=e,1==e.length)break}return t}(t);!function(e,t){let{V:n,M:s}=e;for(let s of t)if(!n.has(s))throw $u(e,s);if(s){let e=lu(t);for(let t=1,n=e.length;t<n;t++)if(wu.has(e[t])){let s=t+1;for(let r;s<n&&wu.has(r=e[s]);s++)for(let n=t;n<s;n++)if(e[n]==r)throw new Error(`non-spacing marks: repeated ${Uu(r)}`);if(s-t>Dl)throw new Error(`non-spacing marks: too many ${Lu(ju(e.slice(t-1,s)))} (${s-t}/${Dl})`);t=s}}}(i,r),function(e,t){let n,s=[];for(let e of t){let t=Cu.get(e);if(t===fu)return;if(t){let s=t.M.get(e);if(n=n?n.filter((e=>s.has(e))):[...s],!n.length)return}else s.push(e)}if(n)for(let t of n)if(s.every((e=>t.V.has(e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(i,t),e=i.N}else e="Emoji"}i.type=e}catch(e){i.error=e}return i.output=s,i}))}function Du(e){return e.map((({input:t,error:n,output:s})=>{if(n){let s=n.message;throw new Error(1==e.length?s:`Invalid label ${Lu(ju(t))}: ${s}`)}return Gl(s)})).join(du)}function Fu(e){return new Error(`disallowed character: ${Uu(e)}`)}function $u(e,t){let n=Uu(t),s=_u.find((e=>e.P.has(t)));return s&&(n=`${s.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function Gu(e){return new Error(`illegal placement: ${e}`)}function Hu(e,t){let n=[],s=[];for(e=e.slice().reverse();e.length;){let r=zu(e);if(r)s.length&&(n.push(t(s)),s=[]),n.push(r);else{let t=e.pop();if(Iu.has(t))s.push(t);else{let e=mu.get(t);if(e)s.push(...e);else if(!yu.has(t))throw Fu(t)}}}return s.length&&n.push(t(s)),n}function Wu(e){return e.filter((e=>e!=hu))}function zu(e,t){let n,s,r=Ou,i=[],a=e.length;for(t&&(t.length=0);a;){let o=e[--a];if(r=r.B.find((e=>e.Q.has(o))),!r)break;if(r.S)s=o;else if(r.C&&o===s)break;i.push(o),r.F&&(i.push(hu),a>0&&e[a-1]==hu&&a--),r.V&&(n=qu(i,r),t&&t.push(...e.slice(a).reverse()),e.length=a)}return n}function qu(e,t){let n=Nu.from(e);return 2==t.V&&n.splice(1,1),n}const Ku=new Uint8Array(32);function Vu(e){return ni(0!==e.length,"invalid ENS name; empty component","comp",e),e}function Ju(e){const t=Za(function(e){try{return function(e){return Du(Mu(e))}(e)}catch(t){ni(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),n=[];if(0===e.length)return n;let s=0;for(let e=0;e<t.length;e++){46===t[e]&&(n.push(Vu(t.slice(s,e))),s=e+1)}return ni(s<t.length,"invalid ENS name; empty component","name",e),n.push(Vu(t.slice(s))),n}function Qu(e){ni("string"==typeof e,"invalid ENS name; not a string","name",e);let t=Ku;const n=Ju(e);for(;n.length;)t=Aa(di([t,Aa(n.pop())]));return hi(t)}Ku.fill(0);const Yu="0x0000000000000000000000000000000000000000000000000000000000000000",Xu=BigInt(0),Zu=BigInt(1),eh=BigInt(2),th=BigInt(27),nh=BigInt(28),sh=BigInt(35),rh={};function ih(e){return mi(Ii(e),32)}class ah{#V;#J;#Q;#Y;get r(){return this.#V}set r(e){ni(32===fi(e),"invalid r","value",e),this.#V=hi(e)}get s(){return this.#J}set s(e){ni(32===fi(e),"invalid s","value",e);const t=hi(e);ni(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),this.#J=t}get v(){return this.#Q}set v(e){const t=xi(e,"value");ni(27===t||28===t,"invalid v","v",e),this.#Q=t}get networkV(){return this.#Y}get legacyChainId(){const e=this.networkV;return null==e?null:ah.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=oi(this.s);return this.yParity&&(e[0]|=128),hi(e)}get compactSerialized(){return di([this.r,this.yParityAndS])}get serialized(){return di([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,s){ii(e,rh,"Signature"),this.#V=t,this.#J=n,this.#Q=s,this.#Y=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new ah(rh,this.r,this.s,this.v);return this.networkV&&(e.#Y=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=ki(e,"v");return t==th||t==nh?Xu:(ni(t>=sh,"invalid EIP-155 v","v",e),(t-sh)/eh)}static getChainIdV(e,t){return ki(e)*eh+BigInt(35+t-27)}static getNormalizedV(e){const t=ki(e);return t===Xu||t===th?27:t===Zu||t===nh?28:(ni(t>=sh,"invalid v","v",e),t&Zu?27:28)}static from(e){function t(t,n){ni(t,n,"signature",e)}if(null==e)return new ah(rh,Yu,Yu,27);if("string"==typeof e){const n=oi(e,"signature");if(64===n.length){const e=hi(n.slice(0,32)),t=n.slice(32,64),s=128&t[0]?28:27;return t[0]&=127,new ah(rh,e,hi(t),s)}if(65===n.length){const e=hi(n.slice(0,32)),s=n.slice(32,64);t(0==(128&s[0]),"non-canonical s");const r=ah.getNormalizedV(n[64]);return new ah(rh,e,hi(s),r)}t(!1,"invalid raw signature length")}if(e instanceof ah)return e.clone();const n=e.r;t(null!=n,"missing r");const s=ih(n),r=function(e,n){if(null!=e)return ih(e);if(null!=n){t(li(n,32),"invalid yParityAndS");const e=oi(n);return e[0]&=127,hi(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t(0==(128&oi(r)[0]),"non-canonical s");const{networkV:i,v:a}=function(e,n,s){if(null!=e){const t=ki(e);return{networkV:t>=sh?t:void 0,v:ah.getNormalizedV(t)}}if(null!=n)return t(li(n,32),"invalid yParityAndS"),{v:128&oi(n)[0]?28:27};if(null!=s){switch(xi(s,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),o=new ah(rh,s,r,a);return i&&(o.#Y=i),t(null==e.yParity||xi(e.yParity,"sig.yParity")===o.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===o.yParityAndS,"yParityAndS mismatch"),o}}var oh=n(5856),ch=n.t(oh,2);const lh=BigInt(0),uh=BigInt(1),hh=BigInt(2),dh=BigInt(3),fh=BigInt(8),ph=Object.freeze({a:lh,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:uh,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),gh=(e,t)=>(e+t/hh)/t,mh={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=ph,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-uh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=gh(i*e,t),c=gh(-s*e,t);let l=Wh(e-o*n-c*r,t),u=Wh(-o*s-c*i,t);const h=l>a,d=u>a;if(h&&(l=t-l),d&&(u=t-u),l>a||u>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:u}}},yh=32,bh=32,wh=yh+1,vh=2*yh+1;function Ah(e){const{a:t,b:n}=ph,s=Wh(e*e),r=Wh(s*e);return Wh(r+t*e+n)}const Eh=ph.a===lh;class kh extends Error{constructor(e){super(e)}}function _h(e){if(!(e instanceof Ph))throw new TypeError("JacobianPoint expected")}class Ph{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static fromAffine(e){if(!(e instanceof Sh))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Sh.ZERO)?Ph.ZERO:new Ph(e.x,e.y,uh)}static toAffineBatch(e){const t=function(e,t=ph.P){const n=new Array(e.length),s=e.reduce(((e,s,r)=>s===lh?e:(n[r]=e,Wh(e*s,t))),uh),r=qh(s,t);return e.reduceRight(((e,s,r)=>s===lh?e:(n[r]=Wh(e*n[r],t),Wh(e*s,t))),r),n}(e.map((e=>e.z)));return e.map(((e,n)=>e.toAffine(t[n])))}static normalizeZ(e){return Ph.toAffineBatch(e).map(Ph.fromAffine)}equals(e){_h(e);const{x:t,y:n,z:s}=this,{x:r,y:i,z:a}=e,o=Wh(s*s),c=Wh(a*a),l=Wh(t*c),u=Wh(r*o),h=Wh(Wh(n*a)*c),d=Wh(Wh(i*s)*o);return l===u&&h===d}negate(){return new Ph(this.x,Wh(-this.y),this.z)}double(){const{x:e,y:t,z:n}=this,s=Wh(e*e),r=Wh(t*t),i=Wh(r*r),a=e+r,o=Wh(hh*(Wh(a*a)-s-i)),c=Wh(dh*s),l=Wh(c*c),u=Wh(l-hh*o),h=Wh(c*(o-u)-fh*i),d=Wh(hh*t*n);return new Ph(u,h,d)}add(e){_h(e);const{x:t,y:n,z:s}=this,{x:r,y:i,z:a}=e;if(r===lh||i===lh)return this;if(t===lh||n===lh)return e;const o=Wh(s*s),c=Wh(a*a),l=Wh(t*c),u=Wh(r*o),h=Wh(Wh(n*a)*c),d=Wh(Wh(i*s)*o),f=Wh(u-l),p=Wh(d-h);if(f===lh)return p===lh?this.double():Ph.ZERO;const g=Wh(f*f),m=Wh(f*g),y=Wh(l*g),b=Wh(p*p-m-hh*y),w=Wh(p*(y-b)-h*m),v=Wh(s*a*f);return new Ph(b,w,v)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=Ph.ZERO;if("bigint"==typeof e&&e===lh)return t;let n=Hh(e);if(n===uh)return this;if(!Eh){let e=t,s=this;for(;n>lh;)n&uh&&(e=e.add(s)),s=s.double(),n>>=uh;return e}let{k1neg:s,k1:r,k2neg:i,k2:a}=mh.splitScalar(n),o=t,c=t,l=this;for(;r>lh||a>lh;)r&uh&&(o=o.add(l)),a&uh&&(c=c.add(l)),l=l.double(),r>>=uh,a>>=uh;return s&&(o=o.negate()),i&&(c=c.negate()),c=new Ph(Wh(c.x*mh.beta),c.y,c.z),o.add(c)}precomputeWindow(e){const t=Eh?128/e+1:256/e+1,n=[];let s=this,r=s;for(let i=0;i<t;i++){r=s,n.push(r);for(let t=1;t<2**(e-1);t++)r=r.add(s),n.push(r);s=r.double()}return n}wNAF(e,t){!t&&this.equals(Ph.BASE)&&(t=Sh.BASE);const n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=t&&xh.get(t);s||(s=this.precomputeWindow(n),t&&1!==n&&(s=Ph.normalizeZ(s),xh.set(t,s)));let r=Ph.ZERO,i=Ph.BASE;const a=1+(Eh?128/n:256/n),o=2**(n-1),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let t=0;t<a;t++){const n=t*o;let a=Number(e&c);e>>=u,a>o&&(a-=l,e+=uh);const h=n,d=n+Math.abs(a)-1,f=t%2!=0,p=a<0;0===a?i=i.add(Ch(f,s[h])):r=r.add(Ch(p,s[d]))}return{p:r,f:i}}multiply(e,t){let n,s,r=Hh(e);if(Eh){const{k1neg:e,k1:i,k2neg:a,k2:o}=mh.splitScalar(r);let{p:c,f:l}=this.wNAF(i,t),{p:u,f:h}=this.wNAF(o,t);c=Ch(e,c),u=Ch(a,u),u=new Ph(Wh(u.x*mh.beta),u.y,u.z),n=c.add(u),s=l.add(h)}else{const{p:e,f:i}=this.wNAF(r,t);n=e,s=i}return Ph.normalizeZ([n,s])[0]}toAffine(e){const{x:t,y:n,z:s}=this,r=this.equals(Ph.ZERO);null==e&&(e=r?fh:qh(s));const i=e,a=Wh(i*i),o=Wh(a*i),c=Wh(t*a),l=Wh(n*o),u=Wh(s*i);if(r)return Sh.ZERO;if(u!==uh)throw new Error("invZ was invalid");return new Sh(c,l)}}function Ch(e,t){const n=t.negate();return e?n:t}Ph.BASE=new Ph(ph.Gx,ph.Gy,uh),Ph.ZERO=new Ph(lh,uh,lh);const xh=new WeakMap;class Sh{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,xh.delete(this)}hasEvenY(){return this.y%hh===lh}static fromCompressedHex(e){const t=32===e.length,n=$h(t?e:e.subarray(1));if(!Xh(n))throw new Error("Point is not on curve");let s=function(e){const{P:t}=ph,n=BigInt(6),s=BigInt(11),r=BigInt(22),i=BigInt(23),a=BigInt(44),o=BigInt(88),c=e*e*e%t,l=c*c*e%t,u=zh(l,dh)*l%t,h=zh(u,dh)*l%t,d=zh(h,hh)*c%t,f=zh(d,s)*d%t,p=zh(f,r)*f%t,g=zh(p,a)*p%t,m=zh(g,o)*g%t,y=zh(m,a)*p%t,b=zh(y,dh)*l%t,w=zh(b,i)*f%t,v=zh(w,n)*c%t,A=zh(v,hh),E=A*A%t;if(E!==e)throw new Error("Cannot find square root");return A}(Ah(n));const r=(s&uh)===uh;if(t)r&&(s=Wh(-s));else{1==(1&e[0])!==r&&(s=Wh(-s))}const i=new Sh(n,s);return i.assertValidity(),i}static fromUncompressedHex(e){const t=$h(e.subarray(1,yh+1)),n=$h(e.subarray(yh+1,2*yh+1)),s=new Sh(t,n);return s.assertValidity(),s}static fromHex(e){const t=Gh(e),n=t.length,s=t[0];if(n===yh)return this.fromCompressedHex(t);if(n===wh&&(2===s||3===s))return this.fromCompressedHex(t);if(n===vh&&4===s)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${wh} compressed bytes or ${vh} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return Sh.BASE.multiply(ed(e))}static fromSignature(e,t,n){const{r:s,s:r}=nd(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const i=Kh(Gh(e)),{n:a}=ph,o=2===n||3===n?s+a:s,c=qh(o,a),l=Wh(-i*c,a),u=Wh(r*c,a),h=1&n?"03":"02",d=Sh.fromHex(h+Bh(o)),f=Sh.BASE.multiplyAndAddUnsafe(d,l,u);if(!f)throw new Error("Cannot recover signature: point at infinify");return f.assertValidity(),f}toRawBytes(e=!1){return Fh(this.toHex(e))}toHex(e=!1){const t=Bh(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${Bh(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:n}=this;if(!Xh(t)||!Xh(n))throw new Error(e);const s=Wh(n*n);if(Wh(s-Ah(t))!==lh)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Sh(this.x,Wh(-this.y))}double(){return Ph.fromAffine(this).double().toAffine()}add(e){return Ph.fromAffine(this).add(Ph.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Ph.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){const s=Ph.fromAffine(this),r=t===lh||t===uh||this!==Sh.BASE?s.multiplyUnsafe(t):s.multiply(t),i=Ph.fromAffine(e).multiplyUnsafe(n),a=r.add(i);return a.equals(Ph.ZERO)?void 0:a.toAffine()}}function Ih(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function Th(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${Uh(e)}`);const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:$h(n),left:e.subarray(t+2)}}Sh.BASE=new Sh(ph.Gx,ph.Gy),Sh.ZERO=new Sh(lh,lh);class Oh{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,n="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);const s=t?Uh(e):e;if(128!==s.length)throw new Error(`${n}: Expected 64-byte hex`);return new Oh(Dh(s.slice(0,64)),Dh(s.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${Uh(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:n}=Th(e.subarray(2)),{data:s,left:r}=Th(n);if(r.length)throw new Error(`Invalid signature: left bytes after parsing: ${Uh(r)}`);return{r:t,s}}(t?e:Fh(e));return new Oh(n,s)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!Yh(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Yh(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=ph.n>>uh;return this.s>e}normalizeS(){return this.hasHighS()?new Oh(this.r,Wh(-this.s,ph.n)):this}toDERRawBytes(){return Fh(this.toDERHex())}toDERHex(){const e=Ih(Mh(this.s)),t=Ih(Mh(this.r)),n=e.length/2,s=t.length/2,r=Mh(n),i=Mh(s);return`30${Mh(s+n+4)}02${i}${t}02${r}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Fh(this.toCompactHex())}toCompactHex(){return Bh(this.r)+Bh(this.s)}}function Nh(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const r=e[t];n.set(r,s),s+=r.length}return n}const jh=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Uh(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let n=0;n<e.length;n++)t+=jh[e[n]];return t}const Lh=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Bh(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(lh<=e&&e<Lh))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Rh(e){const t=Fh(Bh(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function Mh(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Dh(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Fh(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const s=2*n,r=e.slice(s,s+2),i=Number.parseInt(r,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}function $h(e){return Dh(Uh(e))}function Gh(e){return e instanceof Uint8Array?Uint8Array.from(e):Fh(e)}function Hh(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&Yh(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Wh(e,t=ph.P){const n=e%t;return n>=lh?n:t+n}function zh(e,t){const{P:n}=ph;let s=e;for(;t-- >lh;)s*=s,s%=n;return s}function qh(e,t=ph.P){if(e===lh||t<=lh)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Wh(e,t),s=t,r=lh,i=uh,a=uh,o=lh;for(;n!==lh;){const e=s/n,t=s%n,c=r-a*e,l=i-o*e;s=n,n=t,r=a,i=o,a=c,o=l}if(s!==uh)throw new Error("invert: does not exist");return Wh(r,t)}function Kh(e,t=!1){const n=function(e){const t=8*e.length-8*bh,n=$h(e);return t>0?n>>BigInt(t):n}(e);if(t)return n;const{n:s}=ph;return n>=s?n-s:n}let Vh,Jh;class Qh{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return hd.hmacSha256(this.k,...e)}hmacSync(...e){return Jh(this.k,...e)}checkSync(){if("function"!=typeof Jh)throw new kh("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return Nh(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const n=this.v.slice();t.push(n),e+=this.v.length}return Nh(...t)}}function Yh(e){return lh<e&&e<ph.n}function Xh(e){return lh<e&&e<ph.P}function Zh(e,t,n,s=!0){const{n:r}=ph,i=Kh(e,!0);if(!Yh(i))return;const a=qh(i,r),o=Sh.BASE.multiply(i),c=Wh(o.x,r);if(c===lh)return;const l=Wh(a*Wh(t+n*c,r),r);if(l===lh)return;let u=new Oh(c,l),h=(o.x===u.r?0:2)|Number(o.y&uh);return s&&u.hasHighS()&&(u=u.normalizeS(),h^=1),{sig:u,recovery:h}}function ed(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*bh)throw new Error("Expected 32 bytes of private key");t=Dh(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==bh)throw new Error("Expected 32 bytes of private key");t=$h(e)}if(!Yh(t))throw new Error("Expected private key: 0 < key < n");return t}function td(e){return e instanceof Sh?(e.assertValidity(),e):Sh.fromHex(e)}function nd(e){if(e instanceof Oh)return e.assertValidity(),e;try{return Oh.fromDER(e)}catch(t){return Oh.fromCompact(e)}}function sd(e){const t=e instanceof Uint8Array,n="string"==typeof e,s=(t||n)&&e.length;return t?s===wh||s===vh:n?s===2*wh||s===2*vh:e instanceof Sh}function rd(e){return $h(e.length>yh?e.slice(0,yh):e)}function id(e){const t=rd(e),n=Wh(t,ph.n);return ad(n<lh?t:n)}function ad(e){return Rh(e)}function od(e,t,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const s=Gh(e),r=ed(t),i=[ad(r),id(s)];if(null!=n){!0===n&&(n=hd.randomBytes(yh));const e=Gh(n);if(e.length!==yh)throw new Error(`sign: Expected ${yh} bytes of extra data`);i.push(e)}return{seed:Nh(...i),m:rd(s),d:r}}function cd(e,t){const{sig:n,recovery:s}=e,{der:r,recovered:i}=Object.assign({canonical:!0,der:!0},t),a=r?n.toDERRawBytes():n.toCompactRawBytes();return i?[a,s]:a}Sh.BASE._setWindowSize(8);const ld={node:ch,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},ud={},hd={bytesToHex:Uh,hexToBytes:Fh,concatBytes:Nh,mod:Wh,invert:qh,isValidPrivateKey(e){try{return ed(e),!0}catch(e){return!1}},_bigintTo32Bytes:Rh,_normalizePrivateKey:ed,hashToPrivateKey:e=>{e=Gh(e);const t=bh+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return Rh(Wh($h(e),ph.n-uh)+uh)},randomBytes:(e=32)=>{if(ld.web)return ld.web.getRandomValues(new Uint8Array(e));if(ld.node){const{randomBytes:t}=ld.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>hd.hashToPrivateKey(hd.randomBytes(bh+8)),precompute(e=8,t=Sh.BASE){const n=t===Sh.BASE?t:new Sh(t.x,t.y);return n._setWindowSize(e),n.multiply(dh),n},sha256:async(...e)=>{if(ld.web){const t=await ld.web.subtle.digest("SHA-256",Nh(...e));return new Uint8Array(t)}if(ld.node){const{createHash:t}=ld.node,n=t("sha256");return e.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(ld.web){const n=await ld.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),s=Nh(...t),r=await ld.web.subtle.sign("HMAC",n,s);return new Uint8Array(r)}if(ld.node){const{createHmac:n}=ld.node,s=n("sha256",e);return t.forEach((e=>s.update(e))),Uint8Array.from(s.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let n=ud[e];if(void 0===n){const t=await hd.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=Nh(t,t),ud[e]=n}return hd.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof Vh)throw new kh("sha256Sync is undefined, you need to set it");let n=ud[e];if(void 0===n){const t=Vh(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=Nh(t,t),ud[e]=n}return Vh(n,...t)},_JacobianPoint:Ph};Object.defineProperties(hd,{sha256Sync:{configurable:!1,get:()=>Vh,set(e){Vh||(Vh=e)}},hmacSha256Sync:{configurable:!1,get:()=>Jh,set(e){Jh||(Jh=e)}}});class dd extends Zi{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Wi.hash(e);const n=Xi(t);if(this.iHash=e.create(),!(this.iHash instanceof Zi))throw new TypeError("Expected instance of class which extends utils.Hash");const s=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const r=new Uint8Array(s);r.set(n.length>this.iHash.blockLen?e.create().update(n).digest():n);for(let e=0;e<r.length;e++)r[e]^=54;this.iHash.update(r),this.oHash=e.create();for(let e=0;e<r.length;e++)r[e]^=106;this.oHash.update(r),r.fill(0)}update(e){return Wi.exists(this),this.iHash.update(e),this}digestInto(e){Wi.exists(this),Wi.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:r,blockLen:i,outputLen:a}=this;return e.finished=s,e.destroyed=r,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fd=(e,t,n)=>new dd(e,t).update(n).digest();fd.create=(e,t)=>new dd(e,t);class pd extends Zi{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Qi(this.buffer)}update(e){Wi.exists(this);const{view:t,buffer:n,blockLen:s}=this,r=(e=Xi(e)).length;for(let i=0;i<r;){const a=Math.min(s-this.pos,r-i);if(a!==s)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=Qi(e);for(;s<=r-i;i+=s)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wi.exists(this),Wi.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:r}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(n,0),i=0);for(let e=i;e<s;e++)t[e]=0;!function(e,t,n,s){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,s);const r=BigInt(32),i=BigInt(4294967295),a=Number(n>>r&i),o=Number(n&i),c=s?4:0,l=s?0:4;e.setUint32(t+c,a,s),e.setUint32(t+l,o,s)}(n,s-8,BigInt(8*this.length),r),this.process(n,0);const a=Qi(e);this.get().forEach(((e,t)=>a.setUint32(4*t,e,r)))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:r,destroyed:i,pos:a}=this;return e.length=s,e.pos=a,e.finished=r,e.destroyed=i,s%t&&e.buffer.set(n),e}}const gd=(e,t,n)=>e&t^~e&n,md=(e,t,n)=>e&t^e&n^t&n,yd=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wd=new Uint32Array(64);class vd extends pd{constructor(){super(64,32,8,!1),this.A=0|bd[0],this.B=0|bd[1],this.C=0|bd[2],this.D=0|bd[3],this.E=0|bd[4],this.F=0|bd[5],this.G=0|bd[6],this.H=0|bd[7]}get(){const{A:e,B:t,C:n,D:s,E:r,F:i,G:a,H:o}=this;return[e,t,n,s,r,i,a,o]}set(e,t,n,s,r,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|s,this.E=0|r,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)wd[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=wd[e-15],n=wd[e-2],s=Yi(t,7)^Yi(t,18)^t>>>3,r=Yi(n,17)^Yi(n,19)^n>>>10;wd[e]=r+wd[e-7]+s+wd[e-16]|0}let{A:n,B:s,C:r,D:i,E:a,F:o,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(Yi(a,6)^Yi(a,11)^Yi(a,25))+gd(a,o,c)+yd[e]+wd[e]|0,u=(Yi(n,2)^Yi(n,13)^Yi(n,22))+md(n,s,r)|0;l=c,c=o,o=a,a=i+t|0,i=r,r=s,s=n,n=t+u|0}n=n+this.A|0,s=s+this.B|0,r=r+this.C|0,i=i+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,r,i,a,o,c,l)}roundClean(){wd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ad=ea((()=>new vd)),[Ed,kd]=Ji.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),_d=new Uint32Array(80),Pd=new Uint32Array(80);class Cd extends pd{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:r,Cl:i,Dh:a,Dl:o,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,n,s,r,i,a,o,c,l,u,h,d,f,p,g]}set(e,t,n,s,r,i,a,o,c,l,u,h,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|s,this.Ch=0|r,this.Cl=0|i,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let n=0;n<16;n++,t+=4)_d[n]=e.getUint32(t),Pd[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|_d[e-15],n=0|Pd[e-15],s=Ji.rotrSH(t,n,1)^Ji.rotrSH(t,n,8)^Ji.shrSH(t,n,7),r=Ji.rotrSL(t,n,1)^Ji.rotrSL(t,n,8)^Ji.shrSL(t,n,7),i=0|_d[e-2],a=0|Pd[e-2],o=Ji.rotrSH(i,a,19)^Ji.rotrBH(i,a,61)^Ji.shrSH(i,a,6),c=Ji.rotrSL(i,a,19)^Ji.rotrBL(i,a,61)^Ji.shrSL(i,a,6),l=Ji.add4L(r,c,Pd[e-7],Pd[e-16]),u=Ji.add4H(l,s,o,_d[e-7],_d[e-16]);_d[e]=0|u,Pd[e]=0|l}let{Ah:n,Al:s,Bh:r,Bl:i,Ch:a,Cl:o,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=Ji.rotrSH(u,h,14)^Ji.rotrSH(u,h,18)^Ji.rotrBH(u,h,41),b=Ji.rotrSL(u,h,14)^Ji.rotrSL(u,h,18)^Ji.rotrBL(u,h,41),w=u&d^~u&p,v=h&f^~h&g,A=Ji.add5L(y,b,v,kd[e],Pd[e]),E=Ji.add5H(A,m,t,w,Ed[e],_d[e]),k=0|A,_=Ji.rotrSH(n,s,28)^Ji.rotrBH(n,s,34)^Ji.rotrBH(n,s,39),P=Ji.rotrSL(n,s,28)^Ji.rotrBL(n,s,34)^Ji.rotrBL(n,s,39),C=n&r^n&a^r&a,x=s&i^s&o^i&o;m=0|p,y=0|g,p=0|d,g=0|f,d=0|u,f=0|h,({h:u,l:h}=Ji.add(0|c,0|l,0|E,0|k)),c=0|a,l=0|o,a=0|r,o=0|i,r=0|n,i=0|s;const S=Ji.add3L(k,P,x);n=Ji.add3H(S,E,_,C),s=0|S}({h:n,l:s}=Ji.add(0|this.Ah,0|this.Al,0|n,0|s)),({h:r,l:i}=Ji.add(0|this.Bh,0|this.Bl,0|r,0|i)),({h:a,l:o}=Ji.add(0|this.Ch,0|this.Cl,0|a,0|o)),({h:c,l}=Ji.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=Ji.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=Ji.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=Ji.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=Ji.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(n,s,r,i,a,o,c,l,u,h,d,f,p,g,m,y)}roundClean(){_d.fill(0),Pd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class xd extends Cd{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Sd extends Cd{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Id=ea((()=>new Cd));ea((()=>new xd)),ea((()=>new Sd));const Td=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();Td.crypto||Td.msCrypto;let Od=!1;const Nd=function(e,t,n){return function(e,t){const n={sha256:Ad,sha512:Id}[e];return ni(null!=n,"invalid hmac algorithm","algorithm",e),fd.create(n,t)}(e,t).update(n).digest()};let jd=Nd;function Ud(e,t,n){const s=oi(t,"key"),r=oi(n,"data");return hi(jd(e,s,r))}Ud._=Nd,Ud.lock=function(){Od=!0},Ud.register=function(e){if(Od)throw new Error("computeHmac is locked");jd=e},Object.freeze(Ud),hd.hmacSha256Sync=function(e,...t){return oi(Ud("sha256",e,di(t)))};class Ld{#X;constructor(e){ni(32===fi(e),"invalid private key","privateKey","[REDACTED]"),this.#X=hi(e)}get privateKey(){return this.#X}get publicKey(){return Ld.computePublicKey(this.#X)}get compressedPublicKey(){return Ld.computePublicKey(this.#X,!0)}sign(e){ni(32===fi(e),"invalid digest length","digest",e);const[t,n]=function(e,t,n={}){const{seed:s,m:r,d:i}=od(e,t,n.extraEntropy),a=new Qh(32,bh);let o;for(a.reseedSync(s);!(o=Zh(a.generateSync(),r,i,n.canonical));)a.reseedSync();return cd(o,n)}(ci(e),ci(this.#X),{recovered:!0,canonical:!0}),s=Oh.fromHex(t);return ah.from({r:Si("0x"+s.r.toString(16),32),s:Si("0x"+s.s.toString(16),32),v:n?28:27})}computeSharedSecret(e){const t=Ld.computePublicKey(e);return hi(function(e,t,n=!1){if(sd(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!sd(t))throw new TypeError("getSharedSecret: second arg must be public key");const s=td(t);return s.assertValidity(),s.multiply(ed(e)).toRawBytes(n)}(ci(this.#X),oi(t)))}static computePublicKey(e,t){let n=oi(e,"key");if(32===n.length){return hi(function(e,t=!1){return Sh.fromPrivateKey(e).toRawBytes(t)}(n,!!t))}if(64===n.length){const e=new Uint8Array(65);e[0]=4,e.set(n,1),n=e}return hi(Sh.fromHex(n).toRawBytes(t))}static recoverPublicKey(e,t){ni(32===fi(e),"invalid digest length","digest",e);const n=ah.from(t),s=Oh.fromCompact(ci(di([n.r,n.s]))).toDERRawBytes(),r=function(e,t,n,s=!1){return Sh.fromSignature(e,t,n).toRawBytes(s)}(ci(e),s,n.yParity);return ni(null!=r,"invalid signature for digest","signature",t),hi(r)}static addPoints(e,t,n){const s=Sh.fromHex(Ld.computePublicKey(e).substring(2)),r=Sh.fromHex(Ld.computePublicKey(t).substring(2));return"0x"+s.add(r).toHex(!!n)}}function Bd(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function Rd(e,t,n){let s=0;for(let r=0;r<n;r++)s=256*s+e[t+r];return s}function Md(e,t,n,s){const r=[];for(;n<t+1+s;){const i=Dd(e,n);r.push(i.result),ti((n+=i.consumed)<=t+1+s,"child data too short","BUFFER_OVERRUN",{buffer:e,length:s,offset:t})}return{consumed:1+s,result:r}}function Dd(e,t){ti(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=t=>{ti(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const s=e[t]-247;n(t+1+s);const r=Rd(e,t+1,s);return n(t+1+s+r),Md(e,t,t+1+s,s+r)}if(e[t]>=192){const s=e[t]-192;return n(t+1+s),Md(e,t,t+1,s)}if(e[t]>=184){const s=e[t]-183;n(t+1+s);const r=Rd(e,t+1,s);n(t+1+s+r);return{consumed:1+s+r,result:hi(e.slice(t+1+s,t+1+s+r))}}if(e[t]>=128){const s=e[t]-128;n(t+1+s);return{consumed:1+s,result:hi(e.slice(t+1,t+1+s))}}return{consumed:1,result:Bd(e[t])}}function Fd(e){const t=oi(e,"data"),n=Dd(t,0);return ni(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function $d(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function Gd(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(Gd(e))})),t.length<=55)return t.unshift(192+t.length),t;const n=$d(t.length);return n.unshift(247+n.length),n.concat(t)}const t=Array.prototype.slice.call(oi(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=$d(t.length);return n.unshift(183+n.length),n.concat(t)}const Hd="0123456789abcdef";function Wd(e){let t="0x";for(const n of Gd(e))t+=Hd[n>>4],t+=Hd[15&n];return t}function zd(e,t){return function(e){let t;return t="string"==typeof e?Ld.computePublicKey(e,!1):e.publicKey,Ia(Aa("0x"+t.substring(4)).substring(26))}(Ld.recoverPublicKey(e,t))}const qd=BigInt(0),Kd=BigInt(2),Vd=BigInt(27),Jd=BigInt(28),Qd=BigInt(35),Yd=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Xd(e){return"0x"===e?null:Ia(e)}function Zd(e,t){try{return wc(e)}catch(n){ni(!1,n.message,t,e)}}function ef(e,t){return"0x"===e?0:xi(e,t)}function tf(e,t){if("0x"===e)return qd;const n=ki(e,t);return ni(n<=Yd,"value exceeds uint size",t,n),n}function nf(e,t){const n=ki(e,"value"),s=Ii(n);return ni(s.length<=32,"value too large",`tx.${t}`,n),s}function sf(e){return wc(e).map((e=>[e.address,e.storageKeys]))}function rf(e,t){const n=[nf(e.nonce||0,"nonce"),nf(e.gasPrice||0,"gasPrice"),nf(e.gasLimit||0,"gasLimit"),null!=e.to?Ia(e.to):"0x",nf(e.value||0,"value"),e.data||"0x"];let s=qd;if(e.chainId!=qd)s=ki(e.chainId,"tx.chainId"),ni(!t||null==t.networkV||t.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(s=t)}if(!t)return s!==qd&&(n.push(Ii(s)),n.push("0x"),n.push("0x")),Wd(n);let r=BigInt(27+t.yParity);return s!==qd?r=ah.getChainIdV(s,t.v):BigInt(t.v)!==r&&ni(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(Ii(r)),n.push(Ii(t.r)),n.push(Ii(t.s)),Wd(n)}function af(e,t){let n;try{if(n=ef(t[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(e){ni(!1,"invalid yParity","yParity",t[0])}const s=mi(t[1],32),r=mi(t[2],32),i=ah.from({r:s,s:r,yParity:n});e.signature=i}function of(e,t){const n=[nf(e.chainId||0,"chainId"),nf(e.nonce||0,"nonce"),nf(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),nf(e.maxFeePerGas||0,"maxFeePerGas"),nf(e.gasLimit||0,"gasLimit"),null!=e.to?Ia(e.to):"0x",nf(e.value||0,"value"),e.data||"0x",sf(e.accessList||[])];return t&&(n.push(nf(t.yParity,"yParity")),n.push(Ii(t.r)),n.push(Ii(t.s))),di(["0x02",Wd(n)])}function cf(e,t){const n=[nf(e.chainId||0,"chainId"),nf(e.nonce||0,"nonce"),nf(e.gasPrice||0,"gasPrice"),nf(e.gasLimit||0,"gasLimit"),null!=e.to?Ia(e.to):"0x",nf(e.value||0,"value"),e.data||"0x",sf(e.accessList||[])];return t&&(n.push(nf(t.yParity,"recoveryParam")),n.push(Ii(t.r)),n.push(Ii(t.s))),di(["0x01",Wd(n)])}class lf{#Z;#ee;#t;#te;#ne;#se;#re;#ie;#ae;#oe;#ce;#le;get type(){return this.#Z}set type(e){switch(e){case null:this.#Z=null;break;case 0:case"legacy":this.#Z=0;break;case 1:case"berlin":case"eip-2930":this.#Z=1;break;case 2:case"london":case"eip-1559":this.#Z=2;break;default:ni(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#ee}set to(e){this.#ee=null==e?null:Ia(e)}get nonce(){return this.#te}set nonce(e){this.#te=xi(e,"value")}get gasLimit(){return this.#ne}set gasLimit(e){this.#ne=ki(e)}get gasPrice(){const e=this.#se;return null!=e||0!==this.type&&1!==this.type?e:qd}set gasPrice(e){this.#se=null==e?null:ki(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#re;return null==e?2===this.type?qd:null:e}set maxPriorityFeePerGas(e){this.#re=null==e?null:ki(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#ie;return null==e?2===this.type?qd:null:e}set maxFeePerGas(e){this.#ie=null==e?null:ki(e,"maxFeePerGas")}get data(){return this.#t}set data(e){this.#t=hi(e)}get value(){return this.#ae}set value(e){this.#ae=ki(e,"value")}get chainId(){return this.#oe}set chainId(e){this.#oe=ki(e)}get signature(){return this.#ce||null}set signature(e){this.#ce=null==e?null:ah.from(e)}get accessList(){const e=this.#le||null;return null==e?1===this.type||2===this.type?[]:null:e}set accessList(e){this.#le=null==e?null:wc(e)}constructor(){this.#Z=null,this.#ee=null,this.#te=0,this.#ne=BigInt(0),this.#se=null,this.#re=null,this.#ie=null,this.#t="0x",this.#ae=BigInt(0),this.#oe=BigInt(0),this.#ce=null,this.#le=null}get hash(){return null==this.signature?null:Aa(this.serialized)}get unsignedHash(){return Aa(this.unsignedSerialized)}get from(){return null==this.signature?null:zd(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:Ld.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){switch(ti(null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return rf(this,this.signature);case 1:return cf(this,this.signature);case 2:return of(this,this.signature)}ti(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return rf(this);case 1:return cf(this);case 2:return of(this)}ti(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&ti(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ti(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ti(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return null!=this.type?s.push(this.type):t?s.push(2):e?(s.push(1),n||s.push(0)):n?(s.push(1),s.push(2)):(s.push(0),s.push(1),s.push(2)),s.sort(),s}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}clone(){return lf.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new lf;if("string"==typeof e){const t=oi(e);if(t[0]>=127)return lf.from(function(e){const t=Fd(e);ni(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:ef(t[0],"nonce"),gasPrice:tf(t[1],"gasPrice"),gasLimit:tf(t[2],"gasLimit"),to:Xd(t[3]),value:tf(t[4],"value"),data:hi(t[5]),chainId:qd};if(6===t.length)return n;const s=tf(t[6],"v"),r=tf(t[7],"r"),i=tf(t[8],"s");if(r===qd&&i===qd)n.chainId=s;else{let r=(s-Qd)/Kd;r<qd&&(r=qd),n.chainId=r,ni(r!==qd||s===Vd||s===Jd,"non-canonical legacy v","v",t[6]),n.signature=ah.from({r:mi(t[7],32),s:mi(t[8],32),v:s}),n.hash=Aa(e)}return n}(t));switch(t[0]){case 1:return lf.from(function(e){const t=Fd(oi(e).slice(1));ni(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",hi(e));const n={type:1,chainId:tf(t[0],"chainId"),nonce:ef(t[1],"nonce"),gasPrice:tf(t[2],"gasPrice"),gasLimit:tf(t[3],"gasLimit"),to:Xd(t[4]),value:tf(t[5],"value"),data:hi(t[6]),accessList:Zd(t[7],"accessList")};return 8===t.length||(n.hash=Aa(e),af(n,t.slice(8))),n}(t));case 2:return lf.from(function(e){const t=Fd(oi(e).slice(1));ni(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",hi(e));const n=tf(t[2],"maxPriorityFeePerGas"),s=tf(t[3],"maxFeePerGas"),r={type:2,chainId:tf(t[0],"chainId"),nonce:ef(t[1],"nonce"),maxPriorityFeePerGas:n,maxFeePerGas:s,gasPrice:null,gasLimit:tf(t[4],"gasLimit"),to:Xd(t[5]),value:tf(t[6],"value"),data:hi(t[7]),accessList:Zd(t[8],"accessList")};return 9===t.length||(r.hash=Aa(e),af(r,t.slice(9))),r}(t))}ti(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new lf;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=ah.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.hash&&(ni(t.isSigned(),"unsigned transaction cannot define hash","tx",e),ni(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(ni(t.isSigned(),"unsigned transaction cannot define from","tx",e),ni(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}const uf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const hf=BigInt(58);function df(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):ni(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class ff{name;constructor(e){Qr(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const pf=new RegExp("^(ipfs)://(.*)$","i"),gf=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),pf,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class mf{provider;address;name;#ue;#he;constructor(e,t,n){Qr(this,{provider:e,address:t,name:n}),this.#ue=null,this.#he=new Cl(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#ue&&(this.#ue=(async()=>{try{return await this.#he.supportsInterface("0x9061b923")}catch(e){if(Xr(e,"CALL_EXCEPTION"))return!1;throw this.#ue=null,e}})()),await this.#ue}async#de(e,t){t=(t||[]).slice();const n=this.#he.interface;t.unshift(Qu(this.name));let s=null;var r;await this.supportsWildcard()&&(s=n.getFunction(e),ti(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[(r=this.name,hi(di(Ju(r).map((e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t}))))+"00"),n.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const r=await this.#he[e](...t);return s?n.decodeFunctionResult(s,r)[0]:r}catch(e){if(!Xr(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await this.#de("addr(bytes32)");return null==e||e===jc?null:e}catch(e){if(Xr(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<2147483648){let t=e+2147483648;const n=await this.#de("addr(bytes32,uint)",[t]);if(li(n,20))return Ia(n)}let t=null;for(const n of this.provider.plugins)if(n instanceof ff&&n.supportsCoinType(e)){t=n;break}if(null==t)return null;const n=await this.#de("addr(bytes32,uint)",[e]);if(null==n||"0x"===n)return null;const s=await t.decodeAddress(e,n);if(null!=s)return s;ti(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await this.#de("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await this.#de("contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",n=parseInt(t[4],16);if(t[5].length===2*n)return`${e}://${function(e){let t=Ci(oi(e)),n="";for(;t;)n=uf[Number(t%hf)]+n,t/=hf;return n}("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return`bzz://${n[1]}`;ti(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<gf.length;n++){const s=t.match(gf[n]);if(null==s)continue;const r=s[1].toLowerCase();switch(r){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const n=df(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:n}),{linkage:e,url:n}}case"erc721":case"erc1155":{const n="erc721"===r?"tokenURI(uint256)":"uri(uint256)";e.push({type:r,value:t});const i=await this.getAddress();if(null==i)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const a=(s[2]||"").split("/");if(2!==a.length)return e.push({type:`!${r}caip`,value:s[2]||""}),{url:null,linkage:e};const o=a[1],c=new Cl(a[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===r){const t=await c.ownerOf(o);if(i!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===r){const t=await c.balanceOf(i,o);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let l=await c[n](o);if(null==l||"0x"===l)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:l}),"erc1155"===r&&(l=l.replace("{id}",Si(o,32).substring(2)),e.push({type:"metadata-url-expanded",value:l})),l.match(/^ipfs:/i)&&(l=df(l)),e.push({type:"metadata-url",value:l});let u={};const h=await new Tc(l).send();h.assertOk();try{u=h.bodyJson}catch(t){try{e.push({type:"!metadata",value:h.bodyText})}catch(t){const n=h.body;return n&&e.push({type:"!metadata",value:hi(n)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!u)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(u)});let d=u.image;if("string"!=typeof d)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(pf))return e.push({type:"!imageUrl-ipfs",value:d}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:d}),d=df(d)}return e.push({type:"url",value:d}),{linkage:e,url:d}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return ti(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async#fe(e,t){const n=await mf.getEnsAddress(e);try{const s=new Cl(n,["function resolver(bytes32) view returns (address)"],e),r=await s.resolver(Qu(t),{enableCcipRead:!0});return r===jc?null:r}catch(e){throw e}return null}static async fromName(e,t){let n=t;for(;;){if(""===n||"."===n)return null;if("eth"!==t&&"eth"===n)return null;const s=await mf.#fe(e,n);if(null!=s){const r=new mf(e,s,t);return n===t||await r.supportsWildcard()?r:null}n=n.split(".").slice(1).join(".")}}}const yf=BigInt(0);function bf(e,t){return function(n){return null==n?t:e(n)}}function wf(e){return t=>{if(!Array.isArray(t))throw new Error("not an array");return t.map((t=>e(t)))}}function vf(e,t){return n=>{const s={};for(const r in e){let i=r;if(t&&r in t&&!(i in n))for(const e of t[r])if(e in n){i=e;break}try{const t=e[r](n[i]);void 0!==t&&(s[r]=t)}catch(e){ti(!1,`invalid value for value.${r} (${e instanceof Error?e.message:"not-an-error"})`,"BAD_DATA",{value:n})}}return s}}function Af(e){return ni(li(e,!0),"invalid data","value",e),e}function Ef(e){return ni(li(e,32),"invalid hash","value",e),e}const kf=vf({address:Ia,blockHash:Ef,blockNumber:xi,data:Af,index:xi,removed:bf((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}ni(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}),!1),topics:wf(Ef),transactionHash:Ef,transactionIndex:xi},{index:["logIndex"]});const _f=vf({hash:bf(Ef),parentHash:Ef,number:xi,timestamp:xi,nonce:bf(Af),difficulty:ki,gasLimit:ki,gasUsed:ki,miner:bf(Ia),extraData:Af,baseFeePerGas:bf(ki)});const Pf=vf({transactionIndex:xi,blockNumber:xi,transactionHash:Ef,address:Ia,topics:wf(Ef),data:Af,index:xi,blockHash:Ef},{index:["logIndex"]});const Cf=vf({to:bf(Ia,null),from:bf(Ia,null),contractAddress:bf(Ia,null),index:xi,root:bf(hi),gasUsed:ki,logsBloom:bf(Af),blockHash:Ef,hash:Ef,logs:wf((function(e){return Pf(e)})),blockNumber:xi,cumulativeGasUsed:ki,effectiveGasPrice:bf(ki),status:bf(xi),type:bf(xi,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function xf(e){e.to&&ki(e.to)===yf&&(e.to="0x0000000000000000000000000000000000000000");const t=vf({hash:Ef,type:e=>"0x"===e||null==e?0:xi(e),accessList:bf(wc,null),blockHash:bf(Ef,null),blockNumber:bf(xi,null),transactionIndex:bf(xi,null),from:Ia,gasPrice:bf(ki),maxPriorityFeePerGas:bf(ki),maxFeePerGas:bf(ki),gasLimit:ki,to:bf(Ia,null),value:ki,nonce:xi,data:Af,creates:bf(Ia,null),chainId:bf(ki,null)},{data:["input"],gasLimit:["gas"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=Ia(e.from);let n=ki(e.nonce,"tx.nonce").toString(16);return n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n,Ia(pi(Aa(Wd([t,n])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=ah.from(e.signature):t.signature=ah.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&ki(t.blockHash)===yf&&(t.blockHash=null),t}class Sf{name;constructor(e){Qr(this,{name:e})}clone(){return new Sf(this.name)}}class If extends Sf{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const n={effectiveBlock:e};function s(e,s){let r=(t||{})[e];null==r&&(r=s),ni("number"==typeof r,`invalud value for ${e}`,"costs",t),n[e]=r}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Qr(this,n)}clone(){return new If(this.effectiveBlock,this)}}class Tf extends Sf{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),Qr(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new Tf(this.address,this.targetNetwork)}}class Of extends Sf{#E;#pe;get url(){return this.#E}get processFunc(){return this.#pe}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#E=e,this.#pe=t}clone(){return this}}const Nf=new Map;class jf{#ge;#oe;#me;constructor(e,t){this.#ge=e,this.#oe=ki(t),this.#me=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#ge}set name(e){this.#ge=e}get chainId(){return this.#oe}set chainId(e){this.#oe=ki(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===ki(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===ki(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===ki(e.chainId)}catch(e){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(this.#me.values())}attachPlugin(e){if(this.#me.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#me.set(e.name,e.clone()),this}getPlugin(e){return this.#me.get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const e=new jf(this.name,this.chainId);return this.plugins.forEach((t=>{e.attachPlugin(t.clone())})),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new If;let n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)"00"===e.data.substring(s,s+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const s=wc(e.accessList);for(const e in s)n+=t.txAccessListAddress+t.txAccessListStorageKey*s[e].storageKeys.length}return n}static from(e){if(function(){if(Rf)return;function e(e,t,n){const s=function(){const s=new jf(e,t);return null!=n.ensNetwork&&s.attachPlugin(new Tf(null,n.ensNetwork)),s.attachPlugin(new If),(n.plugins||[]).forEach((e=>{s.attachPlugin(e)})),s};jf.register(e,s),jf.register(t,s),n.altNames&&n.altNames.forEach((e=>{jf.register(e,s)}))}Rf=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("matic",137,{ensNetwork:1,plugins:[Lf("https://gasstation.polygon.technology/v2")]}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Lf("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[Bf(BigInt("1000000"))]}),e("optimism-goerli",420,{}),e("xdai",100,{ensNetwork:1})}(),null==e)return jf.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){const t=Nf.get(e);if(t)return t();if("bigint"==typeof e)return new jf("unknown",e);ni(!1,"unknown network","network",e)}if("function"==typeof e.clone){return e.clone()}if("object"==typeof e){ni("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);const t=new jf(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new Tf(e.ensAddress,e.ensNetwork)),t}ni(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));const n=Nf.get(e);n&&ni(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),Nf.set(e,t)}}function Uf(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const s=n.split(".");if(1===s.length&&s.push(""),2!==s.length)throw new Error(`invalid gwei value: ${e}`);for(;s[1].length<t;)s[1]+="0";if(s[1].length>9){let e=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||e++,s[1]=e.toString()}return BigInt(s[0]+s[1])}function Lf(e){return new Of(e,(async(e,t,n)=>{let s;n.setHeader("User-Agent","ethers");try{const[t,r]=await Promise.all([n.send(),e()]);s=t;const i=s.bodyJson.standard;return{gasPrice:r.gasPrice,maxFeePerGas:Uf(i.maxFee,9),maxPriorityFeePerGas:Uf(i.maxPriorityFee,9)}}catch(e){ti(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:e})}}))}function Bf(e){return new Of("data:",(async(t,n,s)=>{const r=await t();if(null==r.maxFeePerGas||null==r.maxPriorityFeePerGas)return r;const i=r.maxFeePerGas-r.maxPriorityFeePerGas;return{gasPrice:r.gasPrice,maxFeePerGas:i+e,maxPriorityFeePerGas:e}}))}let Rf=!1;function Mf(e){return JSON.parse(JSON.stringify(e))}class Df{#ye;#be;#we;#ve;constructor(e){this.#ye=e,this.#be=null,this.#we=4e3,this.#ve=-2}get pollingInterval(){return this.#we}set pollingInterval(e){this.#we=e}async#Ae(){try{const e=await this.#ye.getBlockNumber();if(-2===this.#ve)return void(this.#ve=e);if(e!==this.#ve){for(let t=this.#ve+1;t<=e;t++){if(null==this.#be)return;await this.#ye.emit("block",t)}this.#ve=e}}catch(e){}null!=this.#be&&(this.#be=this.#ye._setTimeout(this.#Ae.bind(this),this.#we))}start(){this.#be||(this.#be=this.#ye._setTimeout(this.#Ae.bind(this),this.#we),this.#Ae())}stop(){this.#be&&(this.#ye._clearTimeout(this.#be),this.#be=null)}pause(e){this.stop(),e&&(this.#ve=-2)}resume(){this.start()}}class Ff{#ye;#Ae;#Ee;constructor(e){this.#ye=e,this.#Ee=!1,this.#Ae=e=>{this._poll(e,this.#ye)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#Ee||(this.#Ee=!0,this.#Ae(-2),this.#ye.on("block",this.#Ae))}stop(){this.#Ee&&(this.#Ee=!1,this.#ye.off("block",this.#Ae))}pause(e){this.stop()}resume(){this.start()}}class $f extends Ff{#K;constructor(e,t){super(e),this.#K=Mf(t)}async _poll(e,t){throw new Error("@TODO")}}class Gf extends Ff{#ke;constructor(e,t){super(e),this.#ke=t}async _poll(e,t){const n=await t.getTransactionReceipt(this.#ke);n&&t.emit(this.#ke,n)}}class Hf{#ye;#K;#be;#Ee;#ve;constructor(e,t){this.#ye=e,this.#K=Mf(t),this.#be=this.#Ae.bind(this),this.#Ee=!1,this.#ve=-2}async#Ae(e){if(-2===this.#ve)return;const t=Mf(this.#K);t.fromBlock=this.#ve+1,t.toBlock=e;const n=await this.#ye.getLogs(t);if(0!==n.length)for(const e of n)this.#ye.emit(this.#K,e),this.#ve=e.blockNumber;else this.#ve<e-60&&(this.#ve=e-60)}start(){this.#Ee||(this.#Ee=!0,-2===this.#ve&&this.#ye.getBlockNumber().then((e=>{this.#ve=e})),this.#ye.on("block",this.#be))}stop(){this.#Ee&&(this.#Ee=!1,this.#ye.off("block",this.#be))}pause(e){this.stop(),e&&(this.#ve=-2)}resume(){this.start()}}const Wf=BigInt(2);function zf(e){return e&&"function"==typeof e.then}function qf(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce(((e,n)=>(e[n]=t[n],e)),{})}return t}))}class Kf{name;constructor(e){Qr(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Vf(e){return(e=Array.from(new Set(e).values())).sort(),e}async function Jf(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"pending":case"debug":case"error":case"network":return{type:e,tag:e}}if(li(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:qf("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:qf("orphan",t),filter:(n=t,JSON.parse(JSON.stringify(n)))}}var n;if(e.address||e.topics){const n=e,s={topics:(n.topics||[]).map((e=>null==e?null:Array.isArray(e)?Vf(e.map((e=>e.toLowerCase()))):e.toLowerCase()))};if(n.address){const e=[],r=[],i=n=>{li(n)?e.push(n):r.push((async()=>{e.push(await sc(n,t))})())};Array.isArray(n.address)?n.address.forEach(i):i(n.address),r.length&&await Promise.all(r),s.address=Vf(e.map((e=>e.toLowerCase())))}return{filter:s,tag:qf("event",s),type:"event"}}ni(!1,"unknown ProviderEvent","event",e)}function Qf(){return(new Date).getTime()}const Yf={cacheTimeout:250,pollingInterval:4e3};class Xf{#_e;#me;#Pe;#Ce;#xe;#Se;#Ie;#Te;#Oe;#Ne;#je;#a;constructor(e,t){if(this.#a=Object.assign({},Yf,t||{}),"any"===e)this.#Se=!0,this.#xe=null;else if(e){const t=jf.from(e);this.#Se=!1,this.#xe=Promise.resolve(t),setTimeout((()=>{this.emit("network",t,null)}),0)}else this.#Se=!1,this.#xe=null;this.#Te=-1,this.#Ie=new Map,this.#_e=new Map,this.#me=new Map,this.#Pe=null,this.#Ce=!1,this.#Oe=1,this.#Ne=new Map,this.#je=!1}get pollingInterval(){return this.#a.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#me.values())}attachPlugin(e){if(this.#me.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#me.set(e.name,e.connect(this)),this}getPlugin(e){return this.#me.get(e)||null}get disableCcipRead(){return this.#je}set disableCcipRead(e){this.#je=!!e}async#Ue(e){const t=this.#a.cacheTimeout;if(t<0)return await this._perform(e);const n=qf(e.method,e);let s=this.#Ie.get(n);return s||(s=this._perform(e),this.#Ie.set(n,s),setTimeout((()=>{this.#Ie.get(n)===s&&this.#Ie.delete(n)}),t)),await s}async ccipReadFetch(e,t,n){if(this.disableCcipRead||0===n.length||null==e.to)return null;const s=e.to.toLowerCase(),r=t.toLowerCase(),i=[];for(let t=0;t<n.length;t++){const a=n[t],o=a.replace("{sender}",s).replace("{data}",r),c=new Tc(o);-1===a.indexOf("{data}")&&(c.body={data:r,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:t,urls:n});let l="unknown error";const u=await c.send();try{const e=u.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:e}),e.data;e.message&&(l=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:e})}catch(e){}ti(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${l}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:a,errorMessage:l}}),i.push(l)}ti(!1,`error encountered during CCIP fetch: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:i}})}_wrapBlock(e,t){return new qc(function(e){const t=_f(e);return t.transactions=e.transactions.map((e=>"string"==typeof e?e:xf(e))),t}(e),this)}_wrapLog(e,t){return new Kc(function(e){return kf(e)}(e),this)}_wrapTransactionReceipt(e,t){return new Vc(function(e){return Cf(e)}(e),this)}_wrapTransactionResponse(e,t){return new Jc(xf(e),this)}_detectNetwork(){ti(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ti(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=xi(await this.#Ue({method:"getBlockNumber"}),"%response");return this.#Te>=0&&(this.#Te=e),e}_getAddress(e){return sc(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}return li(e)?li(e,32)?e:Ti(e):("bigint"==typeof e&&(e=xi(e,"blockTag")),"number"==typeof e?e>=0?Ti(e):this.#Te>=0?Ti(this.#Te+e):this.getBlockNumber().then((t=>Ti(t+e))):void ni(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map((e=>null==e?null:Array.isArray(e)?Vf(e.map((e=>e.toLowerCase()))):e.toLowerCase())),n="blockHash"in e?e.blockHash:void 0,s=(e,s,r)=>{let i;switch(e.length){case 0:break;case 1:i=e[0];break;default:e.sort(),i=e}if(n&&(null!=s||null!=r))throw new Error("invalid filter");const a={};return i&&(a.address=i),t.length&&(a.topics=t),s&&(a.fromBlock=s),r&&(a.toBlock=r),n&&(a.blockHash=n),a};let r,i,a=[];if(e.address)if(Array.isArray(e.address))for(const t of e.address)a.push(this._getAddress(t));else a.push(this._getAddress(e.address));return"fromBlock"in e&&(r=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(i=this._getBlockTag(e.toBlock)),a.filter((e=>"string"!=typeof e)).length||null!=r&&"string"!=typeof r||null!=i&&"string"!=typeof i?Promise.all([Promise.all(a),r,i]).then((e=>s(e[0],e[1],e[2]))):s(a,r,i)}_getTransactionRequest(e){const t=zc(e),n=[];if(["to","from"].forEach((e=>{if(null==t[e])return;const s=sc(t[e]);zf(s)?n.push(async function(){t[e]=await s}()):t[e]=s})),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);zf(e)?n.push(async function(){t.blockTag=await e}()):t.blockTag=e}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(null==this.#xe){const e=this._detectNetwork().then((e=>(this.emit("network",e,null),e)),(t=>{throw this.#xe===e&&(this.#xe=null),t}));return this.#xe=e,(await e).clone()}const e=this.#xe,[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(this.#Se?(this.emit("network",n,t),this.#xe===e&&(this.#xe=Promise.resolve(n))):ti(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:n}=await Jr({_block:this.#Le("latest",!1),gasPrice:(async()=>{try{return ki(await this.#Ue({method:"getGasPrice"}),"%response")}catch(e){}return null})()});let s=null,r=null;const i=this._wrapBlock(t,e);return i&&i.baseFeePerGas&&(r=BigInt("1000000000"),s=i.baseFeePerGas*Wf+r),new Wc(n,s,r)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const e=new Tc(n.url),s=await n.processFunc(t,this,e);return new Wc(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return zf(t)&&(t=await t),ki(await this.#Ue({method:"estimateGas",transaction:t}),"%response")}async#Be(e,t,n){ti(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const s=zc(e);try{return hi(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(e){if(!this.disableCcipRead&&Zr(e)&&e.data&&n>=0&&"latest"===t&&null!=s.to&&"0x556f1830"===pi(e.data,0,4)){const r=e.data,i=await sc(s.to,this);let a;try{a=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ti(fi(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=pi(e,0,32);ti(pi(n,0,12)===pi(ip,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=pi(n,12);try{const n=[],s=xi(pi(e,32,64)),r=xi(pi(e,s,s+32)),i=pi(e,s+32);for(let e=0;e<r;e++){const t=Zf(i,32*e);if(null==t)throw new Error("abort");n.push(t)}t.urls=n}catch(e){ti(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=ep(e,64);if(null==n)throw new Error("abort");t.calldata=n}catch(e){ti(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ti(pi(e,100,128)===pi(ip,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=pi(e,96,100);try{const n=ep(e,128);if(null==n)throw new Error("abort");t.extraData=n}catch(e){ti(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e])),t}(pi(e.data,4))}catch(e){ti(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:r}})}ti(a.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:r,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:a.errorArgs}});const o=await this.ccipReadFetch(s,a.calldata,a.urls);ti(null!=o,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:e.data,errorArgs:a.errorArgs}});const c={to:i,data:di([a.selector,rp([o,a.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const e=await this.#Be(c,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:e}),e}}throw e}}async#Re(e){const{value:t}=await Jr({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:n}=await Jr({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#Re(this.#Be(t,n,e.enableCcipRead?0:-1))}async#Me(e,t,n){let s=this._getAddress(t),r=this._getBlockTag(n);return"string"==typeof s&&"string"==typeof r||([s,r]=await Promise.all([s,r])),await this.#Re(this.#Ue(Object.assign(e,{address:s,blockTag:r})))}async getBalance(e,t){return ki(await this.#Me({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return xi(await this.#Me({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return hi(await this.#Me({method:"getCode"},e,t))}async getStorage(e,t,n){const s=ki(t,"position");return hi(await this.#Me({method:"getStorage",position:s},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:s}=await Jr({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),r=lf.from(e);if(r.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(r,s).replaceableTransaction(t)}async#Le(e,t){if(li(e,32))return await this.#Ue({method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return"string"!=typeof n&&(n=await n),await this.#Ue({method:"getBlock",blockTag:n,includeTransactions:t})}async getBlock(e,t){const{network:n,params:s}=await Jr({network:this.getNetwork(),params:this.#Le(e,!!t)});return null==s?null:this._wrapBlock(s,n)}async getTransaction(e){const{network:t,params:n}=await Jr({network:this.getNetwork(),params:this.#Ue({method:"getTransaction",hash:e})});return null==n?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await Jr({network:this.getNetwork(),params:this.#Ue({method:"getTransactionReceipt",hash:e})});if(null==n)return null;if(null==n.gasPrice&&null==n.effectiveGasPrice){const t=await this.#Ue({method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await Jr({network:this.getNetwork(),result:this.#Ue({method:"getTransactionResult",hash:e})});return null==t?null:hi(t)}async getLogs(e){let t=this._getFilter(e);zf(t)&&(t=await t);const{network:n,params:s}=await Jr({network:this.getNetwork(),params:this.#Ue({method:"getLogs",filter:t})});return s.map((e=>this._wrapLog(e,n)))}_getProvider(e){ti(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await mf.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=Qu((e=Ia(e)).substring(2).toLowerCase()+".addr.reverse");try{const n=await mf.getEnsAddress(this),s=new Cl(n,["function resolver(bytes32) view returns (address)"],this),r=await s.resolver(t);if(null==r||r===jc)return null;const i=new Cl(r,["function name(bytes32) view returns (string)"],this),a=await i.name(t);return await this.resolveName(a)!==e?null:a}catch(e){if(Xr(e,"BAD_DATA")&&"0x"===e.value)return null;if(Xr(e,"CALL_EXCEPTION"))return null;throw e}return null}async waitForTransaction(e,t,n){const s=null!=t?t:1;return 0===s?this.getTransactionReceipt(e):new Promise((async(t,r)=>{let i=null;const a=async n=>{try{const r=await this.getTransactionReceipt(e);if(null!=r&&n-r.blockNumber+1>=s)return t(r),void(i&&(clearTimeout(i),i=null))}catch(e){console.log("EEE",e)}this.once("block",a)};null!=n&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",a),r(ei("timeout","TIMEOUT",{reason:"timeout"})))}),n)),a(await this.getBlockNumber())}))}async waitForBlock(e){ti(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#Ne.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#Ne.delete(e))}_setTimeout(e,t){null==t&&(t=0);const n=this.#Oe++,s=()=>{this.#Ne.delete(n),e()};if(this.paused)this.#Ne.set(n,{timer:null,func:s,time:t});else{const e=setTimeout(s,t);this.#Ne.set(n,{timer:e,func:s,time:Qf()})}return n}_forEachSubscriber(e){for(const t of this.#_e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Kf(e.type);case"block":{const e=new Df(this);return e.pollingInterval=this.pollingInterval,e}case"event":return new Hf(this,e.filter);case"transaction":return new Gf(this,e.hash);case"orphan":return new $f(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of this.#_e.values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),null!=this.#Pe&&t.pause(this.#Pe);break}}async#De(e,t){let n=await Jf(e,this);return"event"===n.type&&t&&t.length>0&&!0===t[0].removed&&(n=await Jf({orphan:"drop-log",log:t[0]},this)),this.#_e.get(n.tag)||null}async#Fe(e){const t=await Jf(e,this),n=t.tag;let s=this.#_e.get(n);if(!s){s={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#_e.set(n,s)}return s}async on(e,t){const n=await this.#Fe(e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Pe&&n.subscriber.pause(this.#Pe)),this}async once(e,t){const n=await this.#Fe(e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Pe&&n.subscriber.pause(this.#Pe)),this}async emit(e,...t){const n=await this.#De(e,t);if(!n||0===n.listeners.length)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter((({listener:n,once:s})=>{const r=new Xc(this,s?null:n,e);try{n.call(this,...t,r)}catch(e){}return!s})),0===n.listeners.length&&(n.started&&n.subscriber.stop(),this.#_e.delete(n.tag)),s>0}async listenerCount(e){if(e){const t=await this.#De(e);return t?t.listeners.length:0}let t=0;for(const{listeners:e}of this.#_e.values())t+=e.length;return t}async listeners(e){if(e){const t=await this.#De(e);return t?t.listeners.map((({listener:e})=>e)):[]}let t=[];for(const{listeners:e}of this.#_e.values())t=t.concat(e.map((({listener:e})=>e)));return t}async off(e,t){const n=await this.#De(e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return t&&0!==n.listeners.length||(n.started&&n.subscriber.stop(),this.#_e.delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:s}=await this.#Fe(e);n&&s.stop(),this.#_e.delete(t)}else for(const[e,{started:t,subscriber:n}]of this.#_e)t&&n.stop(),this.#_e.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#Ce}destroy(){this.removeAllListeners();for(const e of this.#Ne.keys())this._clearTimeout(e);this.#Ce=!0}get paused(){return null!=this.#Pe}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#Te=-1,null!=this.#Pe){if(this.#Pe==!!e)return;ti(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e))),this.#Pe=!!e;for(const e of this.#Ne.values())e.timer&&clearTimeout(e.timer),e.time=Qf()-e.time}resume(){if(null!=this.#Pe){this._forEachSubscriber((e=>e.resume())),this.#Pe=null;for(const e of this.#Ne.values()){let t=e.time;t<0&&(t=0),e.time=Qf(),setTimeout(e.func,t)}}}}function Zf(e,t){try{const n=ep(e,t);if(n)return eo(n)}catch(e){}return null}function ep(e,t){if("0x"===e)return null;try{const n=xi(pi(e,t,t+32)),s=xi(pi(e,n,n+32));return pi(e,n+32,n+32+s)}catch(e){}return null}function tp(e){const t=Ii(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function np(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}const sp=new Uint8Array([]);function rp(e){const t=[];let n=0;for(let s=0;s<e.length;s++)t.push(sp),n+=32;for(let s=0;s<e.length;s++){const r=oi(e[s]);t[s]=tp(n),t.push(tp(r.length)),t.push(np(r)),n+=32+32*Math.ceil(r.length/32)}return di(t)}const ip="0x0000000000000000000000000000000000000000000000000000000000000000";function ap(e,t){if(e.provider)return e.provider;ti(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function op(e,t){let n=zc(t);if(null!=n.to&&(n.to=sc(n.to,e)),null!=n.from){const t=n.from;n.from=Promise.all([e.getAddress(),sc(t,e)]).then((([e,t])=>(ni(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e)))}else n.from=e.getAddress();return await Jr(n)}class cp{provider;constructor(e){Qr(this,{provider:e||null})}async getNonce(e){return ap(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await op(this,e)}async populateTransaction(e){const t=ap(this,"populateTransaction"),n=await op(this,e);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(null!=n.chainId){ni(ki(n.chainId)===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=s.chainId;const r=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!r?0!==n.type&&1!==n.type||!r||ni(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):ni(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const e=await t.getFeeData();ti(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==n.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(n.type=2,null!=n.gasPrice){const e=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=e,n.maxPriorityFeePerGas=e}else null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(ti(!r,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice),n.type=0):ti(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2===n.type&&(null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else n.type=2;return await Jr(n)}async estimateGas(e){return ap(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ap(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=ap(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=ap(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const s=lf.from(n);return await t.broadcastTransaction(await this.signTransaction(s))}}class lp{#ye;#$e;#be;#Ee;#Ge;#He;constructor(e){this.#ye=e,this.#$e=null,this.#be=this.#Ae.bind(this),this.#Ee=!1,this.#Ge=null,this.#He=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#Ae(e){try{null==this.#$e&&(this.#$e=this._subscribe(this.#ye));let e=null;try{e=await this.#$e}catch(e){if(!Xr(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e)return this.#$e=null,void this.#ye._recoverSubscriber(this,this._recover(this.#ye));const t=await this.#ye.getNetwork();if(this.#Ge||(this.#Ge=t),this.#Ge.chainId!==t.chainId)throw new Error("chaid changed");if(this.#He)return;const n=await this.#ye.send("eth_getFilterChanges",[e]);await this._emitResults(this.#ye,n)}catch(e){console.log("@TODO",e)}this.#ye.once("block",this.#be)}#We(){const e=this.#$e;e&&(this.#$e=null,e.then((e=>{this.#ye.send("eth_uninstallFilter",[e])})))}start(){this.#Ee||(this.#Ee=!0,this.#Ae(-2))}stop(){this.#Ee&&(this.#Ee=!1,this.#He=!0,this.#We(),this.#ye.off("block",this.#be))}pause(e){e&&this.#We(),this.#ye.off("block",this.#be)}resume(){this.start()}}class up extends lp{#ze;constructor(e,t){var n;super(e),this.#ze=(n=t,JSON.parse(JSON.stringify(n)))}_recover(e){return new Hf(e,this.#ze)}async _subscribe(e){return await e.send("eth_newFilter",[this.#ze])}async _emitResults(e,t){for(const n of t)e.emit(this.#ze,e._wrapLog(n,e._network))}}class hp extends lp{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const dp="bigint,boolean,function,number,string,symbol".split(/,/g);function fp(e){if(null==e||dp.indexOf(typeof e)>=0)return e;if("function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(fp);if("object"==typeof e)return Object.keys(e).reduce(((t,n)=>(t[n]=e[n],t)),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function pp(e){return new Promise((t=>{setTimeout(t,e)}))}function gp(e){return e?e.toLowerCase():e}function mp(e){return e&&"number"==typeof e.pollingInterval}const yp={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class bp extends cp{address;constructor(e,t){super(e),Qr(this,{address:t=Ia(t)})}connect(e){ti(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=fp(e),n=[];if(t.from){const s=t.from;n.push((async()=>{const n=await sc(s,this.provider);ni(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n})())}else t.from=this.address;if(null==t.gasLimit&&n.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){const e=t.to;n.push((async()=>{t.to=await sc(e,this.provider)})())}n.length&&await Promise.all(n);const s=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise(((e,s)=>{const r=[1e3,100],i=async()=>{const s=await this.provider.getTransaction(n);null==s?this.provider._setTimeout((()=>{i()}),r.pop()||4e3):e(s.replaceableTransaction(t))};i()}))}async signTransaction(e){const t=fp(e);if(t.from){const n=await sc(t.from,this.provider);ni(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n}else t.from=this.address;const n=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const t="string"==typeof e?Za(e):e;return await this.provider.send("personal_sign",[hi(t),this.address.toLowerCase()])}async signTypedData(e,t,n){const s=fp(n),r=await yc.resolveNames(e,t,s,(async e=>{const t=await sc(e);return ni(null!=t,"TypedData does not support null address","value",e),t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(yc.getPayload(r.domain,t,r.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"==typeof e?Za(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),hi(t)])}}class wp extends Xf{#a;#qe;#Ke;#Ve;#Je;#Ge;#Qe(){if(this.#Ve)return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#Ve=setTimeout((()=>{this.#Ve=null;const e=this.#Ke;for(this.#Ke=[];e.length;){const t=[e.shift()];for(;e.length&&t.length!==this.#a.batchMaxCount;){t.push(e.shift());if(JSON.stringify(t.map((e=>e.payload))).length>this.#a.batchMaxSize){e.unshift(t.pop());break}}(async()=>{const e=1===t.length?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const n=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:n});for(const{resolve:e,reject:s,payload:r}of t){if(this.destroyed){s(ei("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r.method}));continue}const t=n.filter((e=>e.id===r.id))[0];if(null!=t)"error"in t?s(this.getRpcError(r,t)):e(t.result);else{const e=ei("missing response for request","BAD_DATA",{value:n,info:{payload:r}});this.emit("error",e),s(e)}}}catch(e){this.emit("debug",{action:"receiveRpcError",error:e});for(const{reject:n}of t)n(e)}})()}}),e)}constructor(e,t){super(e,t),this.#qe=1,this.#a=Object.assign({},yp,t||{}),this.#Ke=[],this.#Ve=null,this.#Ge=null;{let e=null;const t=new Promise((t=>{e=t}));this.#Je={promise:t,resolve:e}}const n=this._getOption("staticNetwork");n&&(ni(null==e||n.matches(e),"staticNetwork MUST match network object","options",t),this.#Ge=n)}_getOption(e){return this.#a[e]}get _network(){return ti(this.#Ge,"network is not available yet","NETWORK_ERROR"),this.#Ge}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&ki(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const n=await this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)return e;if(this.ready)return jf.from(ki(await this.send("eth_chainId",[])));const t={id:this.#qe++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let n;this.emit("debug",{action:"sendRpcPayload",payload:t});try{n=(await this._send(t))[0]}catch(e){throw this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:n}),"result"in n)return jf.from(ki(n.result));throw this.getRpcError(t,n)}_start(){null!=this.#Je&&null!=this.#Je.resolve&&(this.#Je.resolve(),this.#Je=null,(async()=>{for(;null==this.#Ge&&!this.destroyed;)try{this.#Ge=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",ei("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await pp(1e3)}this.#Qe()})())}async _waitUntilReady(){if(null!=this.#Je)return await this.#Je.promise}_getSubscriber(e){return"pending"===e.type?new hp(this):"event"===e.type?this._getOption("polling")?new Hf(this,e.filter):new up(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new Kf("orphan"):super._getSubscriber(e)}get ready(){return null==this.#Je}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((n=>{if(null==e[n])return;let s=n;"gasLimit"===n&&(s="gas"),t[s]=Ti(ki(e[n],`tx.${n}`))})),["from","to","data"].forEach((n=>{null!=e[n]&&(t[n]=hi(e[n]))})),e.accessList&&(t.accessList=wc(e.accessList)),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getBalance":return{method:"eth_getBalance",args:[gp(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[gp(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[gp(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[gp(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(gp):e.filter.address=gp(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:n}=e,{error:s}=t;if("eth_estimateGas"===n&&s.message){const t=s.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return ei("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:s}})}if("eth_call"===n||"eth_estimateGas"===n){const t=Ep(s),r=ec.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],t?t.data:null);return r.info={error:s,payload:e},r}const r=JSON.stringify(function(e){const t=[];return kp(e,t),t}(s));if("string"==typeof s.message&&s.message.match(/user denied|ethers-user-denied/i)){return ei("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:s}})}if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){const t=e.params[0];if(r.match(/insufficient funds|base fee exceeds gas limit/i))return ei("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:s}});if(r.match(/nonce/i)&&r.match(/too low/i))return ei("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:s}});if(r.match(/replacement transaction/i)&&r.match(/underpriced/i))return ei("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:s}});if(r.match(/only replay-protected/i))return ei("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:t,info:{error:s}}})}let i=!!r.match(/the method .* does not exist/i);return i||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(i=!0),i?ei("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:s,payload:e}}):ei("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(ei("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const n=this.#qe++,s=new Promise(((s,r)=>{this.#Ke.push({resolve:s,reject:r,payload:{method:e,params:t,id:n,jsonrpc:"2.0"}})}));return this.#Qe(),s}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"==typeof e){const n=await t;if(e>=n.length)throw new Error("no such account");return new bp(this,n[e])}const{accounts:n}=await Jr({network:this.getNetwork(),accounts:t});e=Ia(e);for(const t of n)if(Ia(t)===e)return new bp(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((e=>new bp(this,e)))}destroy(){this.#Ve&&(clearTimeout(this.#Ve),this.#Ve=null);for(const{payload:e,reject:t}of this.#Ke)t(ei("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#Ke=[],super.destroy()}}class vp extends wp{#Ye;constructor(e,t){super(e,t),this.#Ye=4e3}_getSubscriber(e){const t=super._getSubscriber(e);return mp(t)&&(t.pollingInterval=this.#Ye),t}get pollingInterval(){return this.#Ye}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#Ye=e,this._forEachSubscriber((e=>{mp(e)&&(e.pollingInterval=this.#Ye)}))}}class Ap extends vp{#Xe;constructor(e,t,n){null==e&&(e="http://localhost:8545"),super(t,n),this.#Xe="string"==typeof e?new Tc(e):e.clone()}_getConnection(){return this.#Xe.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){const t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");const n=await t.send();n.assertOk();let s=n.bodyJson;return Array.isArray(s)||(s=[s]),s}}function Ep(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&li(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(const t in e){const n=Ep(e[t]);if(n)return n}return null}if("string"==typeof e)try{return Ep(JSON.parse(e))}catch(e){}return null}function kp(e,t){if(null!=e){if("string"==typeof e.message&&t.push(e.message),"object"==typeof e)for(const n in e)kp(e[n],t);if("string"==typeof e)try{return kp(JSON.parse(e),t)}catch(e){}}}const _p=new class{dev=!1;avaxRpc;avaxChainId};const Pp=new class{blockNumber;blockTime;async init(){const e=new Ap(_p.avaxRpc),t=await e.getBlock("latest");this.blockNumber=t.number,this.blockTime=1e3*t.timestamp}blockToTime(e){return this.blockTime+2*(e-this.blockNumber)*1e3}};var Cp=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured for connector "${t}".`),this.name="ChainNotConfiguredForConnectorError"}},xp=class extends Error{constructor(){super(...arguments),this.name="ConnectorNotFoundError",this.message="Connector not found"}};function Sp(e){return"string"==typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"==typeof e?Number(e):e}var Ip=n(6729),Tp=n(2676);const Op=(0,Tp.ax)({id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc0497E381f536Be9ce14B0dD3817cBcAe57d2F62",blockCreated:16966585},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),Np=(0,Tp.ax)({id:5,network:"goerli",name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-goerli.g.alchemy.com/v2"],webSocket:["wss://eth-goerli.g.alchemy.com/v2"]},infura:{http:["https://goerli.infura.io/v3"],webSocket:["wss://goerli.infura.io/ws/v3"]},default:{http:["https://rpc.ankr.com/eth_goerli"]},public:{http:["https://rpc.ankr.com/eth_goerli"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://goerli.etherscan.io"},default:{name:"Etherscan",url:"https://goerli.etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0x56522D00C410a43BFfDF00a9A569489297385790",blockCreated:8765204},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:6507670}},testnet:!0});var jp=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Up=(e,t,n)=>(jp(e,t,"read from private field"),n?n.call(e):t.get(e)),Lp=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Bp=(e,t,n,s)=>(jp(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Rp=(e,t,n)=>(jp(e,t,"access private method"),n),Mp=class extends Ip{constructor({chains:e=[Op,Np],options:t}){super(),this.chains=e,this.options=t}getBlockExplorerUrls(e){const{default:t,...n}=e.blockExplorers??{};if(t)return[t.url,...Object.values(n).map((e=>e.url))]}isChainUnsupported(e){return!this.chains.some((t=>t.id===e))}setStorage(e){this.storage=e}},Dp=n(5775),Fp=n(2027),$p=n(8863);class Gp extends Fp.G{constructor(e,{code:t,docsPath:n,metaMessages:s,shortMessage:r}){super(r,{cause:e,docsPath:n,metaMessages:s||e?.metaMessages}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof $p.bs?e.code:t??-1}}class Hp extends Gp{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class Wp extends Gp{constructor(e){super(e,{code:Wp.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(Wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class zp extends Gp{constructor(e){super(e,{code:zp.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class qp extends Gp{constructor(e){super(e,{code:qp.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Kp extends Gp{constructor(e){super(e,{code:Kp.code,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Vp extends Gp{constructor(e){super(e,{code:Vp.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Jp extends Gp{constructor(e){super(e,{code:Jp.code,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(Jp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Qp extends Gp{constructor(e){super(e,{code:Qp.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Yp extends Gp{constructor(e){super(e,{code:Yp.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(Yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Xp extends Gp{constructor(e){super(e,{code:Xp.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(Xp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Zp extends Gp{constructor(e){super(e,{code:Zp.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(Zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class eg extends Gp{constructor(e){super(e,{code:eg.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(eg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class tg extends Gp{constructor(e){super(e,{code:tg.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(tg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class ng extends Hp{constructor(e){super(e,{code:ng.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty(ng,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class sg extends Hp{constructor(e){super(e,{code:sg.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(sg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class rg extends Hp{constructor(e){super(e,{code:rg.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(rg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class ig extends Hp{constructor(e){super(e,{code:ig.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty(ig,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class ag extends Hp{constructor(e){super(e,{code:ag.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(ag,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class og extends Hp{constructor(e){super(e,{code:og.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(og,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class cg extends Gp{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}var lg=n(4503);const ug=256;let hg,dg=ug;function fg(e=11){if(!hg||dg+e>2*ug){hg="",dg=0;for(let e=0;e<ug;e++)hg+=(256+256*Math.random()|0).toString(16).substring(1)}return hg.substring(dg,dg+++e)}function pg(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,key:s="base",name:r="Base Client",pollingInterval:i=4e3,type:a="base"}=e,o=e.chain,c=e.account?(0,lg.T)(e.account):void 0,{config:l,request:u,value:h}=e.transport({chain:o,pollingInterval:i}),d={account:c,batch:t,cacheTime:n,chain:o,key:s,name:r,pollingInterval:i,request:u,transport:{...l,...h},type:a,uid:fg()};return Object.assign(d,{extend:function e(t){return n=>{const s=n(t);for(const e in d)delete s[e];const r={...t,...s};return Object.assign(r,{extend:e(r)})}}(d)})}var gg=n(5946);async function mg(e){const t=await e.request({method:"eth_chainId"});return(0,gg.ly)(t)}var yg=n(2106);var bg=n(7412),wg=n(7040),vg=n(5444);const Ag="/docs/contract/encodeDeployData";function Eg({abi:e,args:t,bytecode:n}){if(!t||0===t.length)return n;const s=e.find((e=>"type"in e&&"constructor"===e.type));if(!s)throw new bg.fM({docsPath:Ag});if(!("inputs"in s))throw new bg.cO({docsPath:Ag});if(!s.inputs||0===s.inputs.length)throw new bg.cO({docsPath:Ag});const r=(0,vg.E)(s.inputs,t);return(0,wg.SM)([n,r])}class kg extends Fp.G{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join("\n"),{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}var _g=n(6445),Pg=n(3639),Cg=n(7469);var xg=n(1163),Sg=n(4688),Ig=n(7531),Tg=n(7795);class Og extends Fp.G{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class Ng extends Fp.G{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class jg extends Fp.G{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,Tg.o)(e)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class Ug extends Fp.G{constructor({blockHash:e,blockNumber:t}){let n="Block";e&&(n=`Block at hash "${e}"`),t&&(n=`Block at number "${t}"`),super(`${n} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const Lg={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function Bg(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?(0,gg.ly)(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?(0,gg.ly)(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Lg[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip2930"===t.type&&(delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t}function Rg(e){const t=e.transactions?.map((e=>"string"==typeof e?e:Bg(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,difficulty:e.difficulty?BigInt(e.difficulty):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function Mg(e,{blockHash:t,blockNumber:n,blockTag:s,includeTransactions:r}={}){const i=s??"latest",a=r??!1,o=void 0!==n?(0,yg.eC)(n):void 0;let c=null;if(c=t?await e.request({method:"eth_getBlockByHash",params:[t,a]}):await e.request({method:"eth_getBlockByNumber",params:[o||i,a]}),!c)throw new Ug({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||Rg)(c)}async function Dg(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Fg(e,t){const{block:n,chain:s=e.chain,request:r}=t||{};if("function"==typeof s?.fees?.defaultPriorityFee){const t=n||await Mg(e);return s.fees.defaultPriorityFee({block:t,client:e,request:r})}if(void 0!==s?.fees?.defaultPriorityFee)return s?.fees?.defaultPriorityFee;try{const t=await e.request({method:"eth_maxPriorityFeePerGas"});return(0,gg.y_)(t)}catch{const[t,s]=await Promise.all([n?Promise.resolve(n):Mg(e),Dg(e)]);if("bigint"!=typeof t.baseFeePerGas)throw new Ng;const r=s-t.baseFeePerGas;return r<0n?0n:r}}async function $g(e,t){const{block:n,chain:s=e.chain,request:r,type:i="eip1559"}=t||{},a=await(async()=>"function"==typeof s?.fees?.baseFeeMultiplier?s.fees.baseFeeMultiplier({block:n,client:e,request:r}):s?.fees?.baseFeeMultiplier??1.2)();if(a<1)throw new Og;const o=10**(a.toString().split(".")[1]?.length??0),c=e=>e*BigInt(Math.ceil(a*o))/BigInt(o),l=n||await Mg(e);if("function"==typeof s?.fees?.estimateFeesPerGas)return s.fees.estimateFeesPerGas({block:n,client:e,multiply:c,request:r,type:i});if("eip1559"===i){if("bigint"!=typeof l.baseFeePerGas)throw new Ng;const t=r?.maxPriorityFeePerGas?r.maxPriorityFeePerGas:await Fg(e,{block:l,chain:s,request:r}),n=c(l.baseFeePerGas);return{maxFeePerGas:r?.maxFeePerGas??n+t,maxPriorityFeePerGas:t}}return{gasPrice:r?.gasPrice??c(await Dg(e))}}var Gg=n(9625);class Hg extends Fp.G{constructor(e,{account:t,docsPath:n,chain:s,data:r,gas:i,gasPrice:a,maxFeePerGas:o,maxPriorityFeePerGas:c,nonce:l,to:u,value:h}){const d=(0,Pg.xr)({from:t?.address,to:u,value:void 0!==h&&`${(0,Gg.d)(h)} ${s?.nativeCurrency.symbol||"ETH"}`,data:r,gas:i,gasPrice:void 0!==a&&`${(0,Tg.o)(a)} gwei`,maxFeePerGas:void 0!==o&&`${(0,Tg.o)(o)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${(0,Tg.o)(c)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",d].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}async function Wg(e,t){const n=t.account??e.account;if(!n)throw new kg({docsPath:"/docs/actions/public/estimateGas"});const s=(0,lg.T)(n);try{const{accessList:n,blockNumber:r,blockTag:i,data:a,gas:o,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:h,to:d,value:f,...p}="local"===s.type?await qg(e,t):t,g=(r?(0,yg.eC)(r):void 0)||i;(0,Ig.F)(t);const m=e.chain?.formatters?.transactionRequest?.format||Sg.tG,y=m({...(0,xg.K)(p,{format:m}),from:s.address,accessList:n,data:a,gas:o,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:h,to:d,value:f}),b=await e.request({method:"eth_estimateGas",params:g?[y,g]:[y]});return BigInt(b)}catch(n){throw function(e,{docsPath:t,...n}){const s=(()=>{const t=(0,Cg.k)(e,n);return t instanceof _g.cj?e:t})();return new Hg(s,{docsPath:t,...n})}(n,{...t,account:s,chain:e.chain})}}async function zg(e,{address:t,blockTag:n="latest",blockNumber:s}){const r=await e.request({method:"eth_getTransactionCount",params:[t,s?(0,yg.eC)(s):n]});return(0,gg.ly)(r)}async function qg(e,t){const{account:n=e.account,chain:s,gas:r,nonce:i,type:a}=t;if(!n)throw new kg;const o=(0,lg.T)(n),c=await Mg(e,{blockTag:"latest"}),l={...t,from:o.address};if(void 0===i&&(l.nonce=await zg(e,{address:o.address,blockTag:"pending"})),void 0===a)try{l.type=function(e){if(e.type)return e.type;if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new Pg.j3({transaction:e})}(l)}catch{l.type="bigint"==typeof c.baseFeePerGas?"eip1559":"legacy"}if("eip1559"===l.type){const{maxFeePerGas:n,maxPriorityFeePerGas:r}=await $g(e,{block:c,chain:s,request:l});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<r)throw new jg({maxPriorityFeePerGas:r});l.maxPriorityFeePerGas=r,l.maxFeePerGas=n}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new Ng;const{gasPrice:n}=await $g(e,{block:c,chain:s,request:l,type:"legacy"});l.gasPrice=n}return void 0===r&&(l.gas=await Wg(e,{...l,account:{address:o.address,type:"json-rpc"}})),(0,Ig.F)(l),l}async function Kg(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]})}async function Vg(e,t){const{account:n=e.account,chain:s=e.chain,accessList:r,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d,...f}=t;if(!n)throw new kg({docsPath:"/docs/actions/wallet/sendTransaction"});const p=(0,lg.T)(n);try{let n;if((0,Ig.F)(t),null!==s&&(n=await mg(e),(0,Tp.qg)({currentChainId:n,chain:s})),"local"===p.type){const t=await qg(e,{account:p,accessList:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d,...f});n||(n=await mg(e));const g=s?.serializers?.transaction,m=await p.signTransaction({...t,chainId:n},{serializer:g});return await Kg(e,{serializedTransaction:m})}const g=s?.formatters?.transactionRequest?.format||Sg.tG,m=g({...(0,xg.K)(f,{format:g}),accessList:r,data:i,from:p.address,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d});return await e.request({method:"eth_sendTransaction",params:[m]})}catch(e){throw function(e,{docsPath:t,...n}){const s=(()=>{const t=(0,Cg.k)(e,n);return t instanceof _g.cj?e:t})();return new Pg.mk(s,{docsPath:t,...n})}(e,{...t,account:p,chain:t.chain||void 0})}}var Jg=n(5102),Qg=n(6070),Yg=n(6087),Xg=n(9321),Zg=n(9135);const em=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,tm=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function nm({domain:e,message:t,primaryType:n,types:s}){const r=s,i=(e,t)=>{for(const n of e){const{name:e,type:s}=n,a=s,o=t[e],c=a.match(tm);if(c&&("number"==typeof o||"bigint"==typeof o)){const[e,t,n]=c;(0,yg.eC)(o,{signed:"int"===t,size:parseInt(n)/8})}if("address"===a&&"string"==typeof o&&!(0,Xg.U)(o))throw new Yg.b({address:o});const l=a.match(em);if(l){const[e,t]=l;if(t&&(0,Zg.d)(o)!==parseInt(t))throw new bg.KY({expectedSize:parseInt(t),givenSize:(0,Zg.d)(o)})}const u=r[a];u&&i(u,o)}};if(r.EIP712Domain&&e&&i(r.EIP712Domain,e),"EIP712Domain"!==n){const e=r[n];i(e,t)}}function sm({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}var rm=n(7799);function im(e){return{addChain:t=>async function(e,{chain:t}){const{id:n,name:s,nativeCurrency:r,rpcUrls:i,blockExplorers:a}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:(0,yg.eC)(n),chainName:s,nativeCurrency:r,rpcUrls:i.default.http,blockExplorerUrls:a?Object.values(a).map((({url:e})=>e)):void 0}]})}(e,t),deployContract:t=>function(e,{abi:t,args:n,bytecode:s,...r}){return Vg(e,{...r,data:Eg({abi:t,args:n,bytecode:s})})}(e,t),getAddresses:()=>async function(e){return(await e.request({method:"eth_accounts"})).map((e=>(0,Dp.x)(e)))}(e),getChainId:()=>mg(e),getPermissions:()=>async function(e){return await e.request({method:"wallet_getPermissions"})}(e),prepareTransactionRequest:t=>qg(e,t),requestAddresses:()=>async function(e){return(await e.request({method:"eth_requestAccounts"})).map((e=>(0,Dp.K)(e)))}(e),requestPermissions:t=>async function(e,t){return e.request({method:"wallet_requestPermissions",params:[t]})}(e,t),sendRawTransaction:t=>Kg(e,t),sendTransaction:t=>Vg(e,t),signMessage:t=>async function(e,{account:t=e.account,message:n}){if(!t)throw new kg({docsPath:"/docs/actions/wallet/signMessage"});const s=(0,lg.T)(t);if("local"===s.type)return s.signMessage({message:n});const r="string"==typeof n?(0,yg.$G)(n):n.raw instanceof Uint8Array?(0,yg.NC)(n.raw):n.raw;return e.request({method:"personal_sign",params:[r,s.address]})}(e,t),signTransaction:t=>async function(e,t){const{account:n=e.account,chain:s=e.chain,...r}=t;if(!n)throw new kg({docsPath:"/docs/actions/wallet/signTransaction"});const i=(0,lg.T)(n);(0,Ig.F)({account:i,...t});const a=await mg(e);null!==s&&(0,Tp.qg)({currentChainId:a,chain:s});const o=s?.formatters||e.chain?.formatters,c=o?.transactionRequest?.format||Sg.tG;return"local"===i.type?i.signTransaction({chainId:a,...r},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(r),chainId:(0,yg.eC)(a),from:i.address}]})}(e,t),signTypedData:t=>async function(e,{account:t=e.account,domain:n,message:s,primaryType:r,types:i}){if(!t)throw new kg({docsPath:"/docs/actions/wallet/signTypedData"});const a=(0,lg.T)(t),o={EIP712Domain:sm({domain:n}),...i};if(nm({domain:n,message:s,primaryType:r,types:o}),"local"===a.type)return a.signTypedData({domain:n,primaryType:r,types:o,message:s});const c=(0,Qg.P)({domain:n??{},primaryType:r,types:o,message:s},((e,t)=>(0,Jg.v)(t)?t.toLowerCase():t));return e.request({method:"eth_signTypedData_v4",params:[a.address,c]})}(e,t),switchChain:t=>async function(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,yg.eC)(t)}]})}(e,t),watchAsset:t=>async function(e,t){return await e.request({method:"wallet_watchAsset",params:t})}(e,t),writeContract:t=>async function(e,{abi:t,address:n,args:s,dataSuffix:r,functionName:i,...a}){const o=(0,rm.R)({abi:t,args:s,functionName:i});return await Vg(e,{data:`${o}${r?r.replace("0x",""):""}`,to:n,...a})}(e,t)}}function am(e){const{key:t="wallet",name:n="Wallet Client",transport:s}=e;return pg({...e,key:t,name:n,transport:e=>s({...e,retryCount:0}),type:"walletClient"}).extend(im)}async function om(e){return new Promise((t=>setTimeout(t,e)))}function cm(e,{delay:t=100,retryCount:n=2,shouldRetry:s=(()=>!0)}={}){return new Promise(((r,i)=>{const a=async({count:o=0}={})=>{try{const t=await e();r(t)}catch(e){if(o<n&&await s({count:o,error:e}))return(async({error:e})=>{const n="function"==typeof t?t({count:o,error:e}):t;n&&await om(n),a({count:o+1})})({error:e});i(e)}};a()}))}const lm=e=>"code"in e?-1!==e.code&&-32004!==e.code&&-32005!==e.code&&-32042!==e.code&&-32603!==e.code:!!(e instanceof $p.Gg&&e.status)&&(403!==e.status&&408!==e.status&&413!==e.status&&429!==e.status&&500!==e.status&&502!==e.status&&503!==e.status&&504!==e.status);function um(e,{retryDelay:t=150,retryCount:n=3}={}){return async s=>cm((async()=>{try{return await e(s)}catch(e){const t=e;switch(t.code){case Wp.code:throw new Wp(t);case zp.code:throw new zp(t);case qp.code:throw new qp(t);case Kp.code:throw new Kp(t);case Vp.code:throw new Vp(t);case Jp.code:throw new Jp(t);case Qp.code:throw new Qp(t);case Yp.code:throw new Yp(t);case Xp.code:throw new Xp(t);case Zp.code:throw new Zp(t);case eg.code:throw new eg(t);case tg.code:throw new tg(t);case ng.code:throw new ng(t);case sg.code:throw new sg(t);case rg.code:throw new rg(t);case ig.code:throw new ig(t);case ag.code:throw new ag(t);case og.code:throw new og(t);case 5e3:throw new ng(t);default:if(e instanceof Fp.G)throw e;throw new cg(t)}}}),{delay:({count:e,error:n})=>{if(n&&n instanceof $p.Gg){const e=n?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*parseInt(e)}return~~(1<<e)*t},retryCount:n,shouldRetry:({error:e})=>!lm(e)})}function hm({key:e,name:t,request:n,retryCount:s=3,retryDelay:r=150,timeout:i,type:a},o){return{config:{key:e,name:t,request:n,retryCount:s,retryDelay:r,timeout:i,type:a},request:um(n,{retryCount:s,retryDelay:r}),value:o}}function dm(e,t={}){const{key:n="custom",name:s="Custom Provider",retryDelay:r}=t;return({retryCount:i})=>hm({key:n,name:s,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:r,type:"custom"})}var fm,pm=class extends Mp{constructor({chains:e,options:t}={}){const n={shimDisconnect:!0,getProvider(){if("undefined"==typeof window)return;const e=window.ethereum;return e?.providers?e.providers[0]:e},...t};super({chains:e,options:n}),this.id="injected",Lp(this,fm,void 0),this.shimDisconnectKey=`${this.id}.shimDisconnect`,this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,Dp.K)(e[0])})},this.onChainChanged=e=>{const t=Sp(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=async e=>{if(1013===e.code){if(await this.getProvider()){if(await this.getAccount())return}}this.emit("disconnect"),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey)};const s=n.getProvider();if("string"==typeof n.name)this.name=n.name;else if(s){const e=function(e){if(!e)return"Injected";const t=e=>e.isApexWallet?"Apex Wallet":e.isAvalanche?"Core Wallet":e.isBackpack?"Backpack":e.isBifrost?"Bifrost Wallet":e.isBitKeep?"BitKeep":e.isBitski?"Bitski":e.isBlockWallet?"BlockWallet":e.isBraveWallet?"Brave Wallet":e.isCoin98?"Coin98 Wallet":e.isCoinbaseWallet?"Coinbase Wallet":e.isDawn?"Dawn Wallet":e.isDefiant?"Defiant":e.isDesig?"Desig Wallet":e.isEnkrypt?"Enkrypt":e.isExodus?"Exodus":e.isFordefi?"Fordefi":e.isFrame?"Frame":e.isFrontier?"Frontier Wallet":e.isGamestop?"GameStop Wallet":e.isHaqqWallet?"HAQQ Wallet":e.isHyperPay?"HyperPay Wallet":e.isImToken?"ImToken":e.isHaloWallet?"Halo Wallet":e.isKuCoinWallet?"KuCoin Wallet":e.isMathWallet?"MathWallet":e.isNovaWallet?"Nova Wallet":e.isOkxWallet||e.isOKExWallet?"OKX Wallet":e.isOneInchIOSWallet||e.isOneInchAndroidWallet?"1inch Wallet":e.isOpera?"Opera":e.isPhantom?"Phantom":e.isPortal?"Ripio Portal":e.isRabby?"Rabby Wallet":e.isRainbow?"Rainbow":e.isStatus?"Status":e.isSubWallet?"SubWallet":e.isTalisman?"Talisman":e.isTally?"Taho":e.isTokenPocket?"TokenPocket":e.isTokenary?"Tokenary":e.isTrust||e.isTrustWallet?"Trust Wallet":e.isTTWallet?"TTWallet":e.isXDEFI?"XDEFI Wallet":e.isZeal?"Zeal":e.isZerion?"Zerion":e.isMetaMask?"MetaMask":void 0;if(e.providers?.length){const n=new Set;let s=1;for(const r of e.providers){let e=t(r);e||(e=`Unknown Wallet #${s}`,s+=1),n.add(e)}const r=[...n];return r.length?r:r[0]??"Injected"}return t(e)??"Injected"}(s);n.name?this.name=n.name(e):this.name="string"==typeof e?e:e[0]}else this.name="Injected";this.ready=!!s}async connect({chainId:e}={}){try{const t=await this.getProvider();if(!t)throw new xp;t.on&&(t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect)),this.emit("message",{type:"connecting"});const n=await t.request({method:"eth_requestAccounts"}),s=(0,Dp.K)(n[0]);let r=await this.getChainId(),i=this.isChainUnsupported(r);if(e&&r!==e){r=(await this.switchChain(e)).id,i=this.isChainUnsupported(r)}return this.options.shimDisconnect&&this.storage?.setItem(this.shimDisconnectKey,!0),{account:s,chain:{id:r,unsupported:i}}}catch(e){if(this.isUserRejectedRequestError(e))throw new ng(e);if(-32002===e.code)throw new Yp(e);throw e}}async disconnect(){const e=await this.getProvider();e?.removeListener&&(e.removeListener("accountsChanged",this.onAccountsChanged),e.removeListener("chainChanged",this.onChainChanged),e.removeListener("disconnect",this.onDisconnect),this.options.shimDisconnect&&this.storage?.removeItem(this.shimDisconnectKey))}async getAccount(){const e=await this.getProvider();if(!e)throw new xp;const t=await e.request({method:"eth_accounts"});return(0,Dp.K)(t[0])}async getChainId(){const e=await this.getProvider();if(!e)throw new xp;return e.request({method:"eth_chainId"}).then(Sp)}async getProvider(){const e=this.options.getProvider();return e&&Bp(this,fm,e),Up(this,fm)}async getWalletClient({chainId:e}={}){const[t,n]=await Promise.all([this.getProvider(),this.getAccount()]),s=this.chains.find((t=>t.id===e));if(!t)throw new Error("provider is required.");return am({account:n,chain:s,transport:dm(t)})}async isAuthorized(){try{if(this.options.shimDisconnect&&!this.storage?.getItem(this.shimDisconnectKey))return!1;if(!await this.getProvider())throw new xp;return!!await this.getAccount()}catch{return!1}}async switchChain(e){const t=await this.getProvider();if(!t)throw new xp;const n=(0,yg.eC)(e);try{return await Promise.all([t.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]}),new Promise((t=>this.on("change",(({chain:n})=>{n?.id===e&&t()}))))]),this.chains.find((t=>t.id===e))??{id:e,name:`Chain ${n}`,network:`${n}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}}}catch(s){const r=this.chains.find((t=>t.id===e));if(!r)throw new Cp({chainId:e,connectorId:this.id});if(4902===s.code||4902===s?.data?.originalError?.code)try{await t.request({method:"wallet_addEthereumChain",params:[{chainId:n,chainName:r.name,nativeCurrency:r.nativeCurrency,rpcUrls:[r.rpcUrls.public?.http[0]??""],blockExplorerUrls:this.getBlockExplorerUrls(r)}]});if(await this.getChainId()!==e)throw new ng(new Error("User rejected switch after adding network."));return r}catch(e){throw new ng(e)}if(this.isUserRejectedRequestError(s))throw new ng(s);throw new og(s)}}async watchAsset({address:e,decimals:t=18,image:n,symbol:s}){const r=await this.getProvider();if(!r)throw new xp;return r.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e,decimals:t,image:n,symbol:s}}})}isUserRejectedRequestError(e){return 4001===e.code}};fm=new WeakMap;var gm=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},mm=(e,t,n)=>(gm(e,t,"read from private field"),n?n.call(e):t.get(e)),ym=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},bm=(e,t,n,s)=>(gm(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),wm=n(6693),vm=n(7210),Am=n(1836),Em=n(1746),km=n(5980);function _m(e,t){if(!(e instanceof Fp.G))return!1;const n=e.walk((e=>e instanceof km.Lu));return n instanceof km.Lu&&("ResolverNotFound"===n.data?.errorName||("ResolverWildcardNotSupported"===n.data?.errorName||(!!n.reason?.includes("Wildcard on non-extended resolvers is not supported")||"reverse"===t&&n.reason===Em.$[50])))}var Pm=n(1187),Cm=n(4813);function xm(e){if(66!==e.length)return null;if(0!==e.indexOf("["))return null;if(65!==e.indexOf("]"))return null;const t=`0x${e.slice(1,65)}`;return(0,Jg.v)(t)?t:null}function Sm(e){let t=new Uint8Array(32).fill(0);if(!e)return(0,yg.ci)(t);const n=e.split(".");for(let e=n.length-1;e>=0;e-=1){const s=xm(n[e]),r=s?(0,Pm.O0)(s):(0,Cm.w)((0,Pm.qX)(n[e]),"bytes");t=(0,Cm.w)((0,wg.zo)([t,r]),"bytes")}return(0,yg.ci)(t)}function Im(e){return`[${e.slice(2)}]`}function Tm(e){const t=new Uint8Array(32).fill(0);return e?xm(e)||(0,Cm.w)((0,Pm.qX)(e)):(0,yg.ci)(t)}function Om(e){const t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);const n=new Uint8Array((0,Pm.qX)(t).byteLength+2);let s=0;const r=t.split(".");for(let e=0;e<r.length;e++){let t=(0,Pm.qX)(r[e]);t.byteLength>255&&(t=(0,Pm.qX)(Im(Tm(r[e])))),n[s]=t.length,n.set(t,s+1),s+=t.length+1}return n.byteLength!==s+1?n.slice(0,s+1):n}const Nm=3;function jm(e,{abi:t,address:n,args:s,docsPath:r,functionName:i,sender:a}){const{code:o,data:c,message:l,shortMessage:u}=e instanceof km.VQ?e:e instanceof Fp.G?e.walk((e=>"data"in e))||e.walk():{},h=e instanceof bg.wb?new km.Dk({functionName:i}):[Nm,Vp.code].includes(o)&&(c||l||u)?new km.Lu({abi:t,data:"object"==typeof c?c.data:c,functionName:i,message:u??l}):e;return new km.uq(h,{abi:t,args:s,contractAddress:n,docsPath:r,functionName:i,sender:a})}var Um=n(6143);async function Lm(e,{abi:t,address:n,args:s,functionName:r,...i}){const a=(0,rm.R)({abi:t,args:s,functionName:r});try{const{data:o}=await(0,Um.R)(e,{data:a,to:n,...i});return(0,vm.k)({abi:t,args:s,functionName:r,data:o||"0x"})}catch(e){throw jm(e,{abi:t,address:n,args:s,docsPath:"/docs/contract/readContract",functionName:r})}}class Bm extends Fp.G{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class Rm extends Fp.G{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class Mm extends Fp.G{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class Dm extends Fp.G{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const Fm=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,$m=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Gm=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Hm=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;function Wm(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function zm({uri:e,gatewayUrls:t}){const n=Gm.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const s=Wm(t?.ipfs,"https://ipfs.io"),r=Wm(t?.arweave,"https://arweave.net"),i=e.match(Fm),{protocol:a,subpath:o,target:c,subtarget:l=""}=i?.groups||{},u="ipns:/"===a||"ipns/"===o,h="ipfs:/"===a||"ipfs/"===o||$m.test(e);if(e.startsWith("http")&&!u&&!h){let n=e;return t?.arweave&&(n=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:n,isOnChain:!1,isEncoded:!1}}if((u||h)&&c)return{uri:`${s}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if("ar:/"===a&&c)return{uri:`${r}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let d=e.replace(Hm,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new Mm({uri:e})}function qm(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Bm({data:e});return e.image||e.image_url||e.image_data}async function Km({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:s}=zm({uri:t,gatewayUrls:e});if(s)return n;const r=await async function(e){try{const t=await fetch(e,{method:"HEAD"});if(200===t.status){const e=t.headers.get("content-type");return e?.startsWith("image/")}return!1}catch(t){return("object"!=typeof t||void 0===t.response)&&!!globalThis.hasOwnProperty("Image")&&new Promise((t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e}))}}(n);if(r)return n;throw new Mm({uri:t})}async function Vm(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?async function(e,{gatewayUrls:t,record:n}){const s=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,s,r]=t.split("/"),[i,a]=n.split(":"),[o,c]=s.split(":");if(!i||"eip155"!==i.toLowerCase())throw new Rm({reason:"Only EIP-155 supported"});if(!a)throw new Rm({reason:"Chain ID not found"});if(!c)throw new Rm({reason:"Contract address not found"});if(!r)throw new Rm({reason:"Token ID not found"});if(!o)throw new Rm({reason:"ERC namespace not found"});return{chainID:parseInt(a),namespace:o.toLowerCase(),contractAddress:c,tokenID:r}}(n),r=await async function(e,{nft:t}){if("erc721"===t.namespace)return Lm(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return Lm(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Dm({namespace:t.namespace})}(e,{nft:s}),{uri:i,isOnChain:a,isEncoded:o}=zm({uri:r,gatewayUrls:t});if(a&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const e=o?atob(i.replace("data:application/json;base64,","")):i;return Km({uri:qm(JSON.parse(e)),gatewayUrls:t})}let c=s.tokenID;"erc1155"===s.namespace&&(c=c.replace("0x","").padStart(64,"0"));return async function({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then((e=>e.json()));return await Km({gatewayUrls:e,uri:qm(n)})}catch{throw new Mm({uri:t})}}({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,c)})}(e,{gatewayUrls:t,record:n}):Km({uri:n,gatewayUrls:t})}async function Jm(e,{blockNumber:t,blockTag:n,name:s,key:r,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=(0,Tp.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=await Lm(e,{address:a,abi:wm.k3,functionName:"resolve",args:[(0,yg.NC)(Om(s)),(0,rm.R)({abi:wm.nZ,functionName:"text",args:[Sm(s),r]})],blockNumber:t,blockTag:n});if("0x"===i[0])return null;const o=(0,vm.k)({abi:wm.nZ,functionName:"text",data:i[0]});return""===o?null:o}catch(e){if(_m(e,"resolve"))return null;throw e}}function Qm(e,{method:t}){const n={};return"fallback"===e.transport.type&&e.transport.onResponse?.((({method:e,response:s,status:r,transport:i})=>{"success"===r&&t===e&&(n[s]=i.request)})),t=>n[t]||e.request}class Ym extends Fp.G{constructor(e){super(`Filter type "${e}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}var Xm=n(4092),Zm=n(522),ey=n(840);function ty({abi:e,eventName:t,args:n}){let s=e[0];if(t&&(s=(0,ey.m)({abi:e,args:n,name:t}),!s))throw new bg.mv(t,{docsPath:"/docs/contract/encodeEventTopics"});if("event"!==s.type)throw new bg.mv(void 0,{docsPath:"/docs/contract/encodeEventTopics"});const r=(0,Zm.t)(s),i=(0,Xm.e)(r);let a=[];if(n&&"inputs"in s){const e=s.inputs?.filter((e=>"indexed"in e&&e.indexed)),t=Array.isArray(n)?n:Object.values(n).length>0?e?.map((e=>n[e.name]))??[]:[];t.length>0&&(a=e?.map(((e,n)=>Array.isArray(t[n])?t[n].map(((s,r)=>ny({param:e,value:t[n][r]}))):t[n]?ny({param:e,value:t[n]}):null))??[])}return[i,...a]}function ny({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,Cm.w)((0,Pm.O0)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new Ym(e.type);return(0,vg.E)([e],[t])}async function sy(e,{address:t,abi:n,args:s,eventName:r,fromBlock:i,strict:a,toBlock:o}){const c=Qm(e,{method:"eth_newFilter"}),l=r?ty({abi:n,args:s,eventName:r}):void 0,u=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?(0,yg.eC)(i):i,toBlock:"bigint"==typeof o?(0,yg.eC)(o):o,topics:l}]});return{abi:n,args:s,eventName:r,id:u,request:c(u),strict:a,type:"event"}}async function ry(e,{address:t,args:n,event:s,events:r,fromBlock:i,strict:a,toBlock:o}={}){const c=r??(s?[s]:void 0),l=Qm(e,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap((e=>ty({abi:[e],eventName:e.name,args:n})))],s&&(u=u[0]));const h=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?(0,yg.eC)(i):i,toBlock:"bigint"==typeof o?(0,yg.eC)(o):o,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:s?s.name:void 0,fromBlock:i,id:h,request:l(h),strict:a,toBlock:o,type:"event"}}async function iy(e){const t=Qm(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}const ay=new Map,oy=new Map;async function cy(e,{cacheKey:t,cacheTime:n=1/0}){const s=function(e){const t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:n=>t.set(e,n)}),n=t(e,ay),s=t(e,oy);return{clear:()=>{n.clear(),s.clear()},promise:n,response:s}}(t),r=s.response.get();if(r&&n>0){if((new Date).getTime()-r.created.getTime()<n)return r.data}let i=s.promise.get();i||(i=e(),s.promise.set(i));try{const e=await i;return s.response.set({created:new Date,data:e}),e}finally{s.promise.clear()}}const ly=e=>`blockNumber.${e}`;async function uy(e,{cacheTime:t=e.cacheTime,maxAge:n}={}){const s=await cy((()=>e.request({method:"eth_blockNumber"})),{cacheKey:ly(e.uid),cacheTime:n??t});return BigInt(s)}var hy=n(4450);const dy="/docs/contract/decodeEventLog";function fy({abi:e,data:t,strict:n,topics:s}){const r=n??!0,[i,...a]=s;if(!i)throw new bg.FM({docsPath:dy});const o=e.find((e=>"event"===e.type&&i===(0,Xm.e)((0,Zm.t)(e))));if(!o||!("name"in o)||"event"!==o.type)throw new bg.lC(i,{docsPath:dy});const{name:c,inputs:l}=o,u=l?.some((e=>!("name"in e&&e.name)));let h=u?[]:{};const d=l.filter((e=>"indexed"in e&&e.indexed));if(a.length>0)for(let e=0;e<d.length;e++){const t=d[e],n=a[e];if(!n)throw new bg.Gy({abiItem:o,param:t});h[t.name||e]=py({param:t,value:n})}const f=l.filter((e=>!("indexed"in e&&e.indexed)));if(f.length>0)if(t&&"0x"!==t)try{const e=(0,hy.r)(f,t);if(e)if(u)h=[...h,...e];else for(let t=0;t<f.length;t++)h[f[t].name]=e[t]}catch(e){if(r){if(e instanceof bg.xB)throw new bg.SM({abiItem:o,data:e.data,params:e.params,size:e.size});throw e}}else if(r)throw new bg.SM({abiItem:o,data:"0x",params:f,size:0});return{eventName:c,args:Object.values(h).length>0?h:void 0}}function py({param:e,value:t}){if("string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))return t;return((0,hy.r)([e],t)||[])[0]}function gy(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function my(e,{address:t,blockHash:n,fromBlock:s,toBlock:r,event:i,events:a,args:o,strict:c}={}){const l=c??!1,u=a??(i?[i]:void 0);let h,d=[];return u&&(d=[u.flatMap((e=>ty({abi:[e],eventName:e.name,args:o})))],i&&(d=d[0])),h=n?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof s?(0,yg.eC)(s):s,toBlock:"bigint"==typeof r?(0,yg.eC)(r):r}]}),h.map((e=>{try{const{eventName:t,args:n}=u?fy({abi:u,data:e.data,topics:e.topics,strict:l}):{eventName:void 0,args:void 0};return gy(e,{args:n,eventName:t})}catch(t){let n,s;if(t instanceof bg.SM||t instanceof bg.Gy){if(l)return;n=t.abiItem.name,s=t.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return gy(e,{args:s?[]:{},eventName:n})}})).filter(Boolean)}async function yy(e,{abi:t,address:n,args:s,blockHash:r,eventName:i,fromBlock:a,toBlock:o,strict:c}){const l=i?(0,ey.m)({abi:t,name:i}):void 0;return my(e,{address:n,args:s,blockHash:r,event:l,events:l?void 0:t.filter((e=>"event"===e.type)),fromBlock:a,toBlock:o,strict:c})}async function by(e,{blockCount:t,blockNumber:n,blockTag:s="latest",rewardPercentiles:r}){const i=n?(0,yg.eC)(n):void 0;return function(e){return{baseFeePerGas:e.baseFeePerGas.map((e=>BigInt(e))),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map((e=>e.map((e=>BigInt(e)))))}}(await e.request({method:"eth_feeHistory",params:[(0,yg.eC)(t),i||s,r]}))}async function wy(e,{filter:t}){const n="strict"in t&&t.strict;return(await t.request({method:"eth_getFilterChanges",params:[t.id]})).map((e=>{if("string"==typeof e)return e;try{const{eventName:s,args:r}="abi"in t&&t.abi?fy({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return gy(e,{args:r,eventName:s})}catch(n){let s,r;if(n instanceof bg.SM||n instanceof bg.Gy){if("strict"in t&&t.strict)return;s=n.abiItem.name,r=n.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return gy(e,{args:r?[]:{},eventName:s})}})).filter(Boolean)}async function vy(e,{blockHash:t,blockNumber:n,blockTag:s,hash:r,index:i}){const a=s||"latest",o=void 0!==n?(0,yg.eC)(n):void 0;let c=null;if(r?c=await e.request({method:"eth_getTransactionByHash",params:[r]}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,(0,yg.eC)(i)]}):(o||a)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||a,(0,yg.eC)(i)]})),!c)throw new Pg.Bh({blockHash:t,blockNumber:n,blockTag:a,hash:r,index:i});return(e.chain?.formatters?.transaction?.format||Bg)(c)}const Ay={"0x0":"reverted","0x1":"success"};function Ey(e){return{...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>gy(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?(0,gg.ly)(e.transactionIndex):null,status:e.status?Ay[e.status]:null,type:e.type?Lg[e.type]||e.type:null}}async function ky(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]});if(!n)throw new Pg.Yb({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Ey)(n)}async function _y(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}const Py="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";BigInt(0),BigInt(1),BigInt(2);async function Cy(e,{address:t,hash:n,signature:s,...r}){const i=(0,Jg.v)(s)?s:(0,yg.NC)(s);try{const{data:s}=await(0,Um.R)(e,{data:Eg({abi:wm.$o,args:[t,n,i],bytecode:Py}),...r});return a=s??"0x0",o="0x1",function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}((0,Jg.v)(a)?(0,Pm.O0)(a):a,(0,Jg.v)(o)?(0,Pm.O0)(o):o)}catch(e){if(e instanceof km.cg)return!1;throw e}var a,o}async function xy(e,{address:t,message:n,signature:s,...r}){const i=function(e,t){const n="string"==typeof e?(0,Pm.qX)(e):e.raw instanceof Uint8Array?e.raw:(0,Pm.O0)(e.raw),s=(0,Pm.qX)(`Ethereum Signed Message:\n${n.length}`);return(0,Cm.w)((0,wg.zo)([s,n]),t)}(n);return Cy(e,{address:t,hash:i,signature:s,...r})}function Sy({domain:e,message:t,primaryType:n,types:s}){const r=void 0===e?{}:e,i={EIP712Domain:sm({domain:r}),...s};nm({domain:r,message:t,primaryType:n,types:i});const a=["0x1901"];return r&&a.push(function({domain:e,types:t}){return Iy({data:e,primaryType:"EIP712Domain",types:t})}({domain:r,types:i})),"EIP712Domain"!==n&&a.push(Iy({data:t,primaryType:n,types:i})),(0,Cm.w)((0,wg.zo)(a))}function Iy({data:e,primaryType:t,types:n}){const s=Ty({data:e,primaryType:t,types:n});return(0,Cm.w)(s)}function Ty({data:e,primaryType:t,types:n}){const s=[{type:"bytes32"}],r=[Oy({primaryType:t,types:n})];for(const i of n[t]){const[t,a]=jy({types:n,name:i.name,type:i.type,value:e[i.name]});s.push(t),r.push(a)}return(0,vg.E)(s,r)}function Oy({primaryType:e,types:t}){const n=(0,yg.NC)(function({primaryType:e,types:t}){let n="";const s=Ny({primaryType:e,types:t});s.delete(e);const r=[e,...Array.from(s).sort()];for(const e of r)n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return n}({primaryType:e,types:t}));return(0,Cm.w)(n)}function Ny({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u),r=s?.[0];if(n.has(r)||void 0===t[r])return n;n.add(r);for(const e of t[r])Ny({primaryType:e.type,types:t},n);return n}function jy({types:e,name:t,type:n,value:s}){if(void 0!==e[n])return[{type:"bytes32"},(0,Cm.w)(Ty({data:s,primaryType:n,types:e}))];if("bytes"===n){return s=`0x${(s.length%2?"0":"")+s.slice(2)}`,[{type:"bytes32"},(0,Cm.w)(s)]}if("string"===n)return[{type:"bytes32"},(0,Cm.w)((0,yg.NC)(s))];if(n.lastIndexOf("]")===n.length-1){const r=n.slice(0,n.lastIndexOf("[")),i=s.map((n=>jy({name:t,type:r,types:e,value:n})));return[{type:"bytes32"},(0,Cm.w)((0,vg.E)(i.map((([e])=>e)),i.map((([,e])=>e))))]}return[{type:n},s]}const Uy=new Map,Ly=new Map;let By=0;function Ry(e,t,n){const s=++By,r=()=>Uy.get(e)||[],i=()=>{const t=Ly.get(e);1===r().length&&t&&t(),(()=>{const t=r();Uy.set(e,t.filter((e=>e.id!==s)))})()},a=r();if(Uy.set(e,[...a,{id:s,fns:t}]),a&&a.length>0)return i;const o={};for(const e in t)o[e]=(...t)=>{const n=r();0!==n.length&&n.forEach((n=>n.fns[e]?.(...t)))};const c=n(o);return"function"==typeof c&&Ly.set(e,c),i}function My(e,{emitOnBegin:t,initialWaitTime:n,interval:s}){let r=!0;const i=()=>r=!1;return(async()=>{let a;t&&(a=await e({unpoll:i}));const o=await(n?.(a))??s;await om(o);const c=async()=>{r&&(await e({unpoll:i}),await om(s),c())};c()})(),i}function Dy(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:s,onError:r,poll:i,pollingInterval:a=e.pollingInterval}){let o;return(void 0!==i?i:"webSocket"!==e.transport.type)?Ry((0,Qg.P)(["watchBlockNumber",e.uid,t,n,a]),{onBlockNumber:s,onError:r},(s=>My((async()=>{try{const t=await uy(e,{cacheTime:0});if(o){if(t===o)return;if(t-o>1&&n)for(let e=o+1n;e<t;e++)s.onBlockNumber(e,o),o=e}(!o||t>o)&&(s.onBlockNumber(t,o),o=t)}catch(e){s.onError?.(e)}}),{emitOnBegin:t,interval:a}))):(()=>{let t=!0,n=()=>t=!1;return(async()=>{try{const{unsubscribe:i}=await e.transport.subscribe({params:["newHeads"],onData(e){if(!t)return;const n=(0,gg.y_)(e.result?.number);s(n,o),o=n},onError(e){r?.(e)}});n=i,t||n()}catch(e){r?.(e)}})(),n})()}function Fy(e){return{call:t=>(0,Um.R)(e,t),createBlockFilter:()=>async function(e){const t=Qm(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}(e),createContractEventFilter:t=>sy(e,t),createEventFilter:t=>ry(e,t),createPendingTransactionFilter:()=>iy(e),estimateContractGas:t=>async function(e,{abi:t,address:n,args:s,functionName:r,...i}){const a=(0,rm.R)({abi:t,args:s,functionName:r});try{return await Wg(e,{data:a,to:n,...i})}catch(e){const a=i.account?(0,lg.T)(i.account):void 0;throw jm(e,{abi:t,address:n,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:r,sender:a?.address})}}(e,t),estimateGas:t=>Wg(e,t),getBalance:t=>async function(e,{address:t,blockNumber:n,blockTag:s="latest"}){const r=n?(0,yg.eC)(n):void 0,i=await e.request({method:"eth_getBalance",params:[t,r||s]});return BigInt(i)}(e,t),getBlock:t=>Mg(e,t),getBlockNumber:t=>uy(e,t),getBlockTransactionCount:t=>async function(e,{blockHash:t,blockNumber:n,blockTag:s="latest"}={}){const r=void 0!==n?(0,yg.eC)(n):void 0;let i;return i=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[r||s]}),(0,gg.ly)(i)}(e,t),getBytecode:t=>async function(e,{address:t,blockNumber:n,blockTag:s="latest"}){const r=void 0!==n?(0,yg.eC)(n):void 0,i=await e.request({method:"eth_getCode",params:[t,r||s]});if("0x"!==i)return i}(e,t),getChainId:()=>mg(e),getContractEvents:t=>yy(e,t),getEnsAddress:t=>async function(e,{blockNumber:t,blockTag:n,coinType:s,name:r,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=(0,Tp.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=(0,rm.R)({abi:wm.X$,functionName:"addr",...null!=s?{args:[Sm(r),BigInt(s)]}:{args:[Sm(r)]}}),o=await Lm(e,{address:a,abi:wm.k3,functionName:"resolve",args:[(0,yg.NC)(Om(r)),i],blockNumber:t,blockTag:n});if("0x"===o[0])return null;const c=(0,vm.k)({abi:wm.X$,args:null!=s?[Sm(r),BigInt(s)]:void 0,functionName:"addr",data:o[0]});return"0x"===c||"0x00"===(0,Am.f)(c)?null:c}catch(e){if(_m(e,"resolve"))return null;throw e}}(e,t),getEnsAvatar:t=>async function(e,{blockNumber:t,blockTag:n,gatewayUrls:s,name:r,universalResolverAddress:i}){const a=await Jm(e,{blockNumber:t,blockTag:n,key:"avatar",name:r,universalResolverAddress:i});if(!a)return null;try{return await Vm(e,{record:a,gatewayUrls:s})}catch{return null}}(e,t),getEnsName:t=>async function(e,{address:t,blockNumber:n,blockTag:s,universalResolverAddress:r}){let i=r;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=(0,Tp.LI)({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const a=`${t.toLowerCase().substring(2)}.addr.reverse`;try{return(await Lm(e,{address:i,abi:wm.du,functionName:"reverse",args:[(0,yg.NC)(Om(a))],blockNumber:n,blockTag:s}))[0]}catch(e){if(_m(e,"reverse"))return null;throw e}}(e,t),getEnsResolver:t=>async function(e,{blockNumber:t,blockTag:n,name:s,universalResolverAddress:r}){let i=r;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=(0,Tp.LI)({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[a]=await Lm(e,{address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,yg.NC)(Om(s))],blockNumber:t,blockTag:n});return a}(e,t),getEnsText:t=>Jm(e,t),getFeeHistory:t=>by(e,t),estimateFeesPerGas:t=>async function(e,t){return $g(e,t)}(e,t),getFilterChanges:e=>wy(0,e),getFilterLogs:e=>async function(e,{filter:t}){const n=t.strict??!1;return(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map((e=>{try{const{eventName:s,args:r}="abi"in t&&t.abi?fy({abi:t.abi,data:e.data,topics:e.topics,strict:n}):{eventName:void 0,args:void 0};return gy(e,{args:r,eventName:s})}catch(n){let s,r;if(n instanceof bg.SM||n instanceof bg.Gy){if("strict"in t&&t.strict)return;s=n.abiItem.name,r=n.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}return gy(e,{args:r?[]:{},eventName:s})}})).filter(Boolean)}(0,e),getGasPrice:()=>Dg(e),getLogs:t=>my(e,t),estimateMaxPriorityFeePerGas:t=>async function(e,t){return Fg(e,t)}(e,t),getStorageAt:t=>async function(e,{address:t,blockNumber:n,blockTag:s="latest",slot:r}){const i=void 0!==n?(0,yg.eC)(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,r,i||s]})}(e,t),getTransaction:t=>vy(e,t),getTransactionConfirmations:t=>async function(e,{hash:t,transactionReceipt:n}){const[s,r]=await Promise.all([uy(e),t?vy(e,{hash:t}):void 0]),i=n?.blockNumber||r?.blockNumber;return i?s-i+1n:0n}(e,t),getTransactionCount:t=>zg(e,t),getTransactionReceipt:t=>ky(e,t),multicall:t=>async function(e,t){const{allowFailure:n=!0,batchSize:s,blockNumber:r,blockTag:i,contracts:a,multicallAddress:o}=t,c=s??("object"==typeof e.batch?.multicall&&e.batch.multicall.batchSize||1024);let l=o;if(!l){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");l=(0,Tp.LI)({blockNumber:r,chain:e.chain,contract:"multicall3"})}const u=[[]];let h=0,d=0;for(let e=0;e<a.length;e++){const{abi:t,address:s,args:r,functionName:i}=a[e];try{const e=(0,rm.R)({abi:t,args:r,functionName:i});d+=(e.length-2)/2,c>0&&d>c&&u[h].length>0&&(h++,d=(e.length-2)/2,u[h]=[]),u[h]=[...u[h],{allowFailure:!0,callData:e,target:s}]}catch(e){const a=jm(e,{abi:t,address:s,args:r,docsPath:"/docs/contract/multicall",functionName:i});if(!n)throw a;u[h]=[...u[h],{allowFailure:!0,callData:"0x",target:s}]}}const f=await Promise.allSettled(u.map((t=>Lm(e,{abi:wm.F8,address:l,args:[t],blockNumber:r,blockTag:i,functionName:"aggregate3"})))),p=[];for(let e=0;e<f.length;e++){const t=f[e];if("rejected"===t.status){if(!n)throw t.reason;for(let n=0;n<u[e].length;n++)p.push({status:"failure",error:t.reason,result:void 0});continue}const s=t.value;for(let t=0;t<s.length;t++){const{returnData:r,success:i}=s[t],{callData:o}=u[e][t],{abi:c,address:l,functionName:h,args:d}=a[p.length];try{if("0x"===o)throw new bg.wb;if(!i)throw new km.VQ({data:r});const e=(0,vm.k)({abi:c,args:d,data:r,functionName:h});p.push(n?{result:e,status:"success"}:e)}catch(e){const t=jm(e,{abi:c,address:l,args:d,docsPath:"/docs/contract/multicall",functionName:h});if(!n)throw t;p.push({error:t,result:void 0,status:"failure"})}}}if(p.length!==a.length)throw new Fp.G("multicall results mismatch");return p}(e,t),prepareTransactionRequest:t=>qg(e,t),readContract:t=>Lm(e,t),sendRawTransaction:t=>Kg(e,t),simulateContract:t=>async function(e,{abi:t,address:n,args:s,dataSuffix:r,functionName:i,...a}){const o=a.account?(0,lg.T)(a.account):void 0,c=(0,rm.R)({abi:t,args:s,functionName:i});try{const{data:o}=await(0,Um.R)(e,{batch:!1,data:`${c}${r?r.replace("0x",""):""}`,to:n,...a});return{result:(0,vm.k)({abi:t,args:s,functionName:i,data:o||"0x"}),request:{abi:t,address:n,args:s,dataSuffix:r,functionName:i,...a}}}catch(e){throw jm(e,{abi:t,address:n,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:o?.address})}}(e,t),verifyMessage:t=>xy(e,t),verifyTypedData:t=>async function(e,{address:t,signature:n,message:s,primaryType:r,types:i,domain:a,...o}){return Cy(e,{address:t,hash:Sy({message:s,primaryType:r,types:i,domain:a}),signature:n,...o})}(e,t),uninstallFilter:e=>_y(0,e),waitForTransactionReceipt:t=>async function(e,{confirmations:t=1,hash:n,onReplaced:s,pollingInterval:r=e.pollingInterval,timeout:i}){const a=(0,Qg.P)(["waitForTransactionReceipt",e.uid,n]);let o,c,l,u=!1;return new Promise(((h,d)=>{i&&setTimeout((()=>d(new Pg.mc({hash:n}))),i);const f=Ry(a,{onReplaced:s,resolve:h,reject:d},(s=>{const i=Dy(e,{emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:r,async onBlockNumber(r){if(u)return;let a=r;const h=e=>{i(),e(),f()};try{if(l){if(t>1&&(!l.blockNumber||a-l.blockNumber+1n<t))return;return void h((()=>s.resolve(l)))}if(o||(u=!0,await cm((async()=>{o=await vy(e,{hash:n}),o.blockNumber&&(a=o.blockNumber)}),{delay:({count:e})=>200*~~(1<<e),retryCount:6}),u=!1),l=await ky(e,{hash:n}),t>1&&(!l.blockNumber||a-l.blockNumber+1n<t))return;h((()=>s.resolve(l)))}catch(n){if(o&&(n instanceof Pg.Bh||n instanceof Pg.Yb))try{c=o;const n=(await Mg(e,{blockNumber:a,includeTransactions:!0})).transactions.find((({from:e,nonce:t})=>e===c.from&&t===c.nonce));if(!n)return;if(l=await ky(e,{hash:n.hash}),t>1&&(!l.blockNumber||a-l.blockNumber+1n<t))return;let r="replaced";n.to===c.to&&n.value===c.value?r="repriced":n.from===n.to&&0n===n.value&&(r="cancelled"),h((()=>{s.onReplaced?.({reason:r,replacedTransaction:c,transaction:n,transactionReceipt:l}),s.resolve(l)}))}catch(e){h((()=>s.reject(e)))}else h((()=>s.reject(n)))}}})}))}))}(e,t),watchBlocks:t=>function(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:s=!1,onBlock:r,onError:i,includeTransactions:a,poll:o,pollingInterval:c=e.pollingInterval}){const l=void 0!==o?o:"webSocket"!==e.transport.type,u=a??!1;let h;return l?Ry((0,Qg.P)(["watchBlocks",e.uid,n,s,u,c]),{onBlock:r,onError:i},(r=>My((async()=>{try{const s=await Mg(e,{blockTag:t,includeTransactions:u});if(s.number&&h?.number){if(s.number===h.number)return;if(s.number-h.number>1&&n)for(let t=h?.number+1n;t<s.number;t++){const n=await Mg(e,{blockNumber:t,includeTransactions:u});r.onBlock(n,h),h=n}}(!h?.number||"pending"===t&&!s?.number||s.number&&s.number>h.number)&&(r.onBlock(s,h),h=s)}catch(e){r.onError?.(e)}}),{emitOnBegin:s,interval:c}))):(()=>{let t=!0,n=()=>t=!1;return(async()=>{try{const{unsubscribe:s}=await e.transport.subscribe({params:["newHeads"],onData(n){if(!t)return;const s=(e.chain?.formatters?.block?.format||Rg)(n.result);r(s,h),h=s},onError(e){i?.(e)}});n=s,t||n()}catch(e){i?.(e)}})(),n})()}(e,t),watchBlockNumber:t=>Dy(e,t),watchContractEvent:t=>function(e,{abi:t,address:n,args:s,batch:r=!0,eventName:i,onError:a,onLogs:o,poll:c,pollingInterval:l=e.pollingInterval,strict:u}){return(void 0!==c?c:"webSocket"!==e.transport.type)?(()=>{const c=(0,Qg.P)(["watchContractEvent",n,s,r,e.uid,i,l]),h=u??!1;return Ry(c,{onLogs:o,onError:a},(a=>{let o,c,u=!1;const d=My((async()=>{if(u)try{let i;if(c)i=await wy(0,{filter:c});else{const r=await uy(e);i=o&&o!==r?await yy(e,{abi:t,address:n,args:s,fromBlock:o+1n,toBlock:r,strict:h}):[],o=r}if(0===i.length)return;r?a.onLogs(i):i.forEach((e=>a.onLogs([e])))}catch(e){c&&e instanceof Jp&&(u=!1),a.onError?.(e)}else{try{c=await sy(e,{abi:t,address:n,args:s,eventName:i,strict:h})}catch{}u=!0}}),{emitOnBegin:!0,interval:l});return async()=>{c&&await _y(0,{filter:c}),d()}}))})():(()=>{let r=!0,c=()=>r=!1;return(async()=>{try{const l=i?ty({abi:t,eventName:i,args:s}):[],{unsubscribe:h}=await e.transport.subscribe({params:["logs",{address:n,topics:l}],onData(e){if(!r)return;const n=e.result;try{const{eventName:e,args:s}=fy({abi:t,data:n.data,topics:n.topics,strict:u}),r=gy(n,{args:s,eventName:e});o([r])}catch(e){let t,s;if(e instanceof bg.SM||e instanceof bg.Gy){if(u)return;t=e.abiItem.name,s=e.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}const r=gy(n,{args:s?[]:{},eventName:t});o([r])}},onError(e){a?.(e)}});c=h,r||c()}catch(e){a?.(e)}})(),c})()}(e,t),watchEvent:t=>function(e,{address:t,args:n,batch:s=!0,event:r,events:i,onError:a,onLogs:o,poll:c,pollingInterval:l=e.pollingInterval,strict:u}){const h=void 0!==c?c:"webSocket"!==e.transport.type,d=u??!1;return h?Ry((0,Qg.P)(["watchEvent",t,n,s,e.uid,r,l]),{onLogs:o,onError:a},(a=>{let o,c,u=!1;const h=My((async()=>{if(u)try{let l;if(c)l=await wy(0,{filter:c});else{const s=await uy(e);l=o&&o!==s?await my(e,{address:t,args:n,event:r,events:i,fromBlock:o+1n,toBlock:s}):[],o=s}if(0===l.length)return;s?a.onLogs(l):l.forEach((e=>a.onLogs([e])))}catch(e){c&&e instanceof Jp&&(u=!1),a.onError?.(e)}else{try{c=await ry(e,{address:t,args:n,event:r,events:i,strict:d})}catch{}u=!0}}),{emitOnBegin:!0,interval:l});return async()=>{c&&await _y(0,{filter:c}),h()}})):(()=>{let s=!0,c=()=>s=!1;return(async()=>{try{const l=i??(r?[r]:void 0);let h=[];l&&(h=[l.flatMap((e=>ty({abi:[e],eventName:e.name,args:n})))],r&&(h=h[0]));const{unsubscribe:f}=await e.transport.subscribe({params:["logs",{address:t,topics:h}],onData(e){if(!s)return;const t=e.result;try{const{eventName:e,args:n}=fy({abi:l,data:t.data,topics:t.topics,strict:d}),s=gy(t,{args:n,eventName:e});o([s])}catch(e){let n,s;if(e instanceof bg.SM||e instanceof bg.Gy){if(u)return;n=e.abiItem.name,s=e.abiItem.inputs?.some((e=>!("name"in e&&e.name)))}const r=gy(t,{args:s?[]:{},eventName:n});o([r])}},onError(e){a?.(e)}});c=f,s||c()}catch(e){a?.(e)}})(),c})()}(e,t),watchPendingTransactions:t=>function(e,{batch:t=!0,onError:n,onTransactions:s,poll:r,pollingInterval:i=e.pollingInterval}){return(void 0!==r?r:"webSocket"!==e.transport.type)?Ry((0,Qg.P)(["watchPendingTransactions",e.uid,t,i]),{onTransactions:s,onError:n},(n=>{let s;const r=My((async()=>{try{if(!s)try{return void(s=await iy(e))}catch(e){throw r(),e}const i=await wy(0,{filter:s});if(0===i.length)return;t?n.onTransactions(i):i.forEach((e=>n.onTransactions([e])))}catch(e){n.onError?.(e)}}),{emitOnBegin:!0,interval:i});return async()=>{s&&await _y(0,{filter:s}),r()}})):(()=>{let t=!0,r=()=>t=!1;return(async()=>{try{const{unsubscribe:i}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!t)return;const n=e.result;s([n])},onError(e){n?.(e)}});r=i,t||r()}catch(e){n?.(e)}})(),r})()}(e,t)}}function $y(e){const{key:t="public",name:n="Public Client"}=e;return pg({...e,key:t,name:n,type:"publicClient"}).extend(Fy)}function Gy(e,t={}){const{key:n="fallback",name:s="Fallback",rank:r=!1,retryCount:i,retryDelay:a}=t;return({chain:t,pollingInterval:o=4e3,timeout:c})=>{let l=e,u=()=>{};const h=hm({key:n,name:s,async request({method:e,params:n}){const s=async(r=0)=>{const i=l[r]({chain:t,retryCount:0,timeout:c});try{const t=await i.request({method:e,params:n});return u({method:e,params:n,response:t,transport:i,status:"success"}),t}catch(t){if(u({error:t,method:e,params:n,transport:i,status:"error"}),lm(t))throw t;if(r===l.length-1)throw t;return s(r+1)}};return s()},retryCount:i,retryDelay:a,type:"fallback"},{onResponse:e=>u=e,transports:l.map((e=>e({chain:t,retryCount:0})))});if(r){const e="object"==typeof r?r:{};!function({chain:e,interval:t=4e3,onTransports:n,sampleCount:s=10,timeout:r=1e3,transports:i,weights:a={}}){const{stability:o=.7,latency:c=.3}=a,l=[],u=async()=>{const a=await Promise.all(i.map((async t=>{const n=t({chain:e,retryCount:0,timeout:r}),s=Date.now();let i,a;try{await n.request({method:"net_listening"}),a=1}catch{a=0}finally{i=Date.now()}return{latency:i-s,success:a}})));l.push(a),l.length>s&&l.shift();const h=Math.max(...l.map((e=>Math.max(...e.map((({latency:e})=>e)))))),d=i.map(((e,t)=>{const n=l.map((e=>e[t].latency)),s=1-n.reduce(((e,t)=>e+t),0)/n.length/h,r=l.map((e=>e[t].success)),i=r.reduce(((e,t)=>e+t),0)/r.length;return 0===i?[0,t]:[c*s+o*i,t]})).sort(((e,t)=>t[0]-e[0]));n(d.map((([,e])=>i[e]))),await om(t),u()};u()}({chain:t,interval:e.interval??o,onTransports:e=>l=e,sampleCount:e.sampleCount,timeout:e.timeout,transports:l,weights:e.weights})}return h}}class Hy extends Fp.G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}var Wy=n(2357),zy=null;"undefined"!=typeof WebSocket?zy=WebSocket:"undefined"!=typeof MozWebSocket?zy=MozWebSocket:void 0!==n.g?zy=n.g.WebSocket||n.g.MozWebSocket:"undefined"!=typeof window?zy=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(zy=self.WebSocket||self.MozWebSocket);const qy=zy;function Ky(e,{errorInstance:t,timeout:n,signal:s}){return new Promise(((r,i)=>{(async()=>{let a;try{const o=new AbortController;n>0&&(a=setTimeout((()=>{s?o.abort():i(t)}),n)),r(await e({signal:o?.signal}))}catch(e){"AbortError"===e.name&&i(t),i(e)}finally{clearTimeout(a)}})()}))}let Vy=0;const Jy=new Map;async function Qy(e){let t=Jy.get(e);if(t)return t;const{schedule:n}=(0,Wy.S)({id:e,fn:async()=>{let n=qy;qy.constructor||(n=qy.WebSocket);const s=new n(e),r=new Map,i=new Map,a=({data:e})=>{const t=JSON.parse(e),n="eth_subscription"===t.method,s=n?t.params.subscription:t.id,a=n?i:r,o=a.get(s);o&&o({data:e}),n||a.delete(s)},o=()=>{Jy.delete(e),s.removeEventListener("close",o),s.removeEventListener("message",a)};return s.addEventListener("close",o),s.addEventListener("message",a),s.readyState===qy.CONNECTING&&await new Promise(((e,t)=>{s&&(s.onopen=e,s.onerror=t)})),t=Object.assign(s,{requests:r,subscriptions:i}),Jy.set(e,t),[t]}}),[s,[r]]=await n();return r}const Yy={http:async function(e,{body:t,fetchOptions:n={},timeout:s=1e4}){const{headers:r,method:i,signal:a}=n;try{const o=await Ky((async({signal:o})=>await fetch(e,{...n,body:Array.isArray(t)?(0,Qg.P)(t.map((e=>({jsonrpc:"2.0",id:e.id??Vy++,...e})))):(0,Qg.P)({jsonrpc:"2.0",id:t.id??Vy++,...t}),headers:{...r,"Content-Type":"application/json"},method:i||"POST",signal:a||(s>0?o:void 0)})),{errorInstance:new $p.W5({body:t,url:e}),timeout:s,signal:!0});let c;if(c=o.headers.get("Content-Type")?.startsWith("application/json")?await o.json():await o.text(),!o.ok)throw new $p.Gg({body:t,details:(0,Qg.P)(c.error)||o.statusText,headers:o.headers,status:o.status,url:e});return c}catch(n){if(n instanceof $p.Gg)throw n;if(n instanceof $p.W5)throw n;throw new $p.Gg({body:t,details:n.message,url:e})}},webSocket:function(e,{body:t,onResponse:n}){if(e.readyState===e.CLOSED||e.readyState===e.CLOSING)throw new $p.c9({body:t,url:e.url,details:"Socket is closed."});const s=Vy++,r=({data:i})=>{const a=JSON.parse(i);"number"==typeof a.id&&s!==a.id||(n?.(a),"eth_subscribe"===t.method&&"string"==typeof a.result&&e.subscriptions.set(a.result,r),"eth_unsubscribe"===t.method&&e.subscriptions.delete(t.params?.[0]))};return e.requests.set(s,r),e.send(JSON.stringify({jsonrpc:"2.0",...t,id:s})),e},webSocketAsync:async function(e,{body:t,timeout:n=1e4}){return Ky((()=>new Promise((n=>Yy.webSocket(e,{body:t,onResponse:n})))),{errorInstance:new $p.W5({body:t,url:e.url}),timeout:n})}};var Xy=n(4192);const Zy=e=>(t,n,s)=>{const r=s.subscribe;s.subscribe=(e,t,n)=>{let i=e;if(t){const r=(null==n?void 0:n.equalityFn)||Object.is;let a=e(s.getState());i=n=>{const s=e(n);if(!r(a,s)){const e=a;t(a=s,e)}},(null==n?void 0:n.fireImmediately)&&t(a,a)}return r(i)};return e(t,n,s)};function eb(e,t){let n;try{n=e()}catch(e){return}const s={getItem:e=>{var s;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(s=n.getItem(e))?s:null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,s)=>n.setItem(e,JSON.stringify(s,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)};return s}const tb=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>tb(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>tb(t)(e)}}},nb=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),((e,t)=>(n,s,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},a=!1;const o=new Set,c=new Set;let l;try{l=i.getStorage()}catch(e){}if(!l)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...e)}),s,r);const u=tb(i.serialize),h=()=>{const e=i.partialize({...s()});let t;const n=u({state:e,version:i.version}).then((e=>l.setItem(i.name,e))).catch((e=>{t=e}));if(t)throw t;return n},d=r.setState;r.setState=(e,t)=>{d(e,t),h()};const f=e(((...e)=>{n(...e),h()}),s,r);let p;const g=()=>{var e;if(!l)return;a=!1,o.forEach((e=>e(s())));const t=(null==(e=i.onRehydrateStorage)?void 0:e.call(i,s()))||void 0;return tb(l.getItem.bind(l))(i.name).then((e=>{if(e)return i.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return p=i.merge(e,null!=(t=s())?t:f),n(p,!0),h()})).then((()=>{null==t||t(p,void 0),a=!0,c.forEach((e=>e(p)))})).catch((e=>{null==t||t(void 0,e)}))};return r.persist={setOptions:e=>{i={...i,...e},e.getStorage&&(l=e.getStorage())},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},g(),p||f})(e,t)):((e,t)=>(n,s,r)=>{let i={storage:eb((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},a=!1;const o=new Set,c=new Set;let l=i.storage;if(!l)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...e)}),s,r);const u=()=>{const e=i.partialize({...s()});return l.setItem(i.name,{state:e,version:i.version})},h=r.setState;r.setState=(e,t)=>{h(e,t),u()};const d=e(((...e)=>{n(...e),u()}),s,r);let f;const p=()=>{var e,t;if(!l)return;a=!1,o.forEach((e=>{var t;return e(null!=(t=s())?t:d)}));const r=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=s())?e:d))||void 0;return tb(l.getItem.bind(l))(i.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return f=i.merge(e,null!=(t=s())?t:d),n(f,!0),u()})).then((()=>{null==r||r(f,void 0),f=s(),a=!0,c.forEach((e=>e(f)))})).catch((e=>{null==r||r(void 0,e)}))};return r.persist={setOptions:e=>{i={...i,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>a,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},i.skipHydration||p(),f||d})(e,t),sb=e=>{let t;const n=new Set,s=(e,s)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=s?s:"object"!=typeof r)?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,i={setState:s,getState:r,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(s,r,i),i},rb=e=>e?sb(e):sb;var ib=n(5229);function ab(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,s]of e)if(!Object.is(s,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!Object.is(e[n[s]],t[n[s]]))return!1;return!0}function ob(e,t,{batch:n={multicall:{wait:32}},pollingInterval:s=4e3,rank:r,retryCount:i,retryDelay:a,stallTimeout:o}={}){if(!e.length)throw new Error("must have at least one chain");let c=[];const l={},u={};for(const n of e){let e=!1;for(const s of t){const t=s(n);t&&(e=!0,c.some((({id:e})=>e===n.id))||(c=[...c,t.chain]),l[n.id]=[...l[n.id]||[],...t.rpcUrls.http],t.rpcUrls.webSocket&&(u[n.id]=[...u[n.id]||[],...t.rpcUrls.webSocket]))}if(!e)throw new Error([`Could not find valid provider configuration for chain "${n.name}".\n`,"You may need to add `jsonRpcProvider` to `configureChains` with the chain's RPC URLs.","Read more: https://wagmi.sh/core/providers/jsonRpc"].join("\n"))}return{chains:c,publicClient:({chainId:t})=>{const u=c.find((e=>e.id===t))??e[0],h=l[u.id];if(!h||!h[0])throw new Error(`No providers configured for chain "${u.id}"`);const d=$y({batch:n,chain:u,transport:Gy(h.map((e=>function(e,t={}){const{batch:n,fetchOptions:s,key:r="http",name:i="HTTP JSON-RPC",retryDelay:a}=t;return({chain:o,retryCount:c,timeout:l})=>{const{batchSize:u=1e3,wait:h=0}="object"==typeof n?n:{},d=t.retryCount??c,f=l??t.timeout??1e4,p=e||o?.rpcUrls.default.http[0];if(!p)throw new Hy;return hm({key:r,name:i,async request({method:t,params:r}){const i={method:t,params:r},{schedule:a}=(0,Wy.S)({id:`${e}`,wait:h,shouldSplitBatch:e=>e.length>u,fn:e=>Yy.http(p,{body:e,fetchOptions:s,timeout:f})}),[{error:o,result:c}]=await(async e=>n?a(e):[await Yy.http(p,{body:e,fetchOptions:s,timeout:f})])(i);if(o)throw new $p.bs({body:i,error:o,url:p});return c},retryCount:d,retryDelay:a,timeout:f,type:"http"},{url:e})}}(e,{timeout:o}))),{rank:r,retryCount:i,retryDelay:a}),pollingInterval:s});return Object.assign(d,{chains:c})},webSocketPublicClient:({chainId:t})=>{const l=c.find((e=>e.id===t))??e[0],h=u[l.id];if(!h||!h[0])return;const d=$y({batch:n,chain:l,transport:Gy(h.map((e=>function(e,t={}){const{key:n="webSocket",name:s="WebSocket JSON-RPC",retryDelay:r}=t;return({chain:i,retryCount:a,timeout:o})=>{const c=t.retryCount??a,l=o??t.timeout??1e4,u=e||i?.rpcUrls.default.webSocket?.[0];if(!u)throw new Hy;return hm({key:n,name:s,async request({method:e,params:t}){const n={method:e,params:t},s=await Qy(u),{error:r,result:i}=await Yy.webSocketAsync(s,{body:n,timeout:l});if(r)throw new $p.bs({body:n,error:r,url:u});return i},retryCount:c,retryDelay:r,timeout:l,type:"webSocket"},{getSocket:()=>Qy(u),async subscribe({params:e,onData:t,onError:n}){const s=await Qy(u),{result:r}=await new Promise(((r,i)=>Yy.webSocket(s,{body:{method:"eth_subscribe",params:e},onResponse(e){if(e.error)return i(e.error),void n?.(e.error);"number"!=typeof e.id?"eth_subscription"===e.method&&t(e.params):r(e)}})));return{subscriptionId:r,unsubscribe:async()=>new Promise((e=>Yy.webSocket(s,{body:{method:"eth_unsubscribe",params:[r]},onResponse:e})))}}})}}(e,{timeout:o}))),{rank:r,retryCount:i,retryDelay:a}),pollingInterval:s});return Object.assign(d,{chains:c})}}}var cb=class extends Error{constructor({chainId:e,connectorId:t}){super(`Chain "${e}" not configured${t?` for connector "${t}"`:""}.`),this.name="ChainNotConfigured"}},lb=class extends Error{constructor(){super(...arguments),this.name="ConnectorAlreadyConnectedError",this.message="Connector already connected"}},ub=class extends Error{constructor(){super(...arguments),this.name="ConfigChainsNotFound",this.message="No chains were found on the wagmi config. Some functions that require a chain may not work."}},hb=class extends Error{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),this.name="SwitchChainNotSupportedError"}};var db=(e,{find:t,replace:n})=>e&&t(e)?n(e):"object"!=typeof e?e:Array.isArray(e)?e.map((e=>db(e,{find:t,replace:n}))):e instanceof Object?Object.entries(e).reduce(((e,[s,r])=>({...e,[s]:db(r,{find:t,replace:n})})),{}):e;function fb(e){const t=JSON.parse(e),n=db(t,{find:e=>"string"==typeof e&&e.startsWith("#bigint."),replace:e=>BigInt(e.replace("#bigint.",""))});return n}function pb(e){return"number"==typeof e?e:"wei"===e?0:Math.abs(Xy.Bd[e])}function gb(e,t){return e.slice(0,t).join(".")||"."}function mb(e,t){const{length:n}=e;for(let s=0;s<n;++s)if(e[s]===t)return s+1;return 0}function yb(e,t,n,s){return JSON.stringify(e,function(e,t){const n="function"==typeof e,s="function"==typeof t,r=[],i=[];return function(a,o){if("object"==typeof o)if(r.length){const e=mb(r,this);0===e?r[r.length]=this:(r.splice(e),i.splice(e)),i[i.length]=a;const n=mb(r,o);if(0!==n)return s?t.call(this,a,o,gb(i,n)):`[ref=${gb(i,n)}]`}else r[0]=o,i[0]=a;return n?e.call(this,a,o):o}}(((e,n)=>{const s="bigint"==typeof n?`#bigint.${n.toString()}`:n;return t?.(e,s)||s}),s),n??void 0)}var bb={getItem:e=>"",setItem:(e,t)=>null,removeItem:e=>null};function wb({deserialize:e=fb,key:t="wagmi",serialize:n=yb,storage:s}){return{...s,getItem:(n,r=null)=>{const i=s.getItem(`${t}.${n}`);try{return i?e(i):r}catch(e){return console.warn(e),r}},setItem:(e,r)=>{if(null===r)s.removeItem(`${t}.${e}`);else try{s.setItem(`${t}.${e}`,n(r))}catch(e){console.error(e)}},removeItem:e=>s.removeItem(`${t}.${e}`)}}var vb,Ab,Eb,kb,_b,Pb="store",Cb=class{constructor({autoConnect:e=!1,connectors:t=[new pm],publicClient:n,storage:s=wb({storage:"undefined"!=typeof window?window.localStorage:bb}),logger:r={warn:console.warn},webSocketPublicClient:i}){ym(this,Eb),this.publicClients=new Map,this.webSocketPublicClients=new Map,ym(this,vb,void 0),ym(this,Ab,void 0),this.args={autoConnect:e,connectors:t,logger:r,publicClient:n,storage:s,webSocketPublicClient:i};let a,o="disconnected";if(e)try{const e=s.getItem(Pb),t=e?.state?.data;o=t?.account?"reconnecting":"connecting",a=t?.chain?.id}catch(e){}const c="function"==typeof t?t():t;var l,u,h;c.forEach((e=>e.setStorage(s))),this.store=rb(Zy(nb((()=>({connectors:c,publicClient:this.getPublicClient({chainId:a}),status:o,webSocketPublicClient:this.getWebSocketPublicClient({chainId:a})})),{name:Pb,storage:s,partialize:t=>({...e&&{data:{account:t?.data?.account,chain:t?.data?.chain}},chains:t?.chains}),version:2}))),this.storage=s,bm(this,Ab,s?.getItem("wallet")),(l=this,u=Eb,h=kb,gm(l,u,"access private method"),h).call(this),e&&"undefined"!=typeof window&&setTimeout((async()=>await this.autoConnect()),0)}get chains(){return this.store.getState().chains}get connectors(){return this.store.getState().connectors}get connector(){return this.store.getState().connector}get data(){return this.store.getState().data}get error(){return this.store.getState().error}get lastUsedChainId(){return this.data?.chain?.id}get publicClient(){return this.store.getState().publicClient}get status(){return this.store.getState().status}get subscribe(){return this.store.subscribe}get webSocketPublicClient(){return this.store.getState().webSocketPublicClient}setState(e){const t="function"==typeof e?e(this.store.getState()):e;this.store.setState(t,!0)}clearState(){this.setState((e=>({...e,chains:void 0,connector:void 0,data:void 0,error:void 0,status:"disconnected"})))}async destroy(){this.connector&&await(this.connector.disconnect?.()),bm(this,vb,!1),this.clearState(),this.store.destroy()}async autoConnect(){if(mm(this,vb))return;bm(this,vb,!0),this.setState((e=>({...e,status:e.data?.account?"reconnecting":"connecting"})));const e=mm(this,Ab)?[...this.connectors].sort((e=>e.id===mm(this,Ab)?-1:1)):this.connectors;let t=!1;for(const n of e){if(!n.ready||!n.isAuthorized)continue;if(!await n.isAuthorized())continue;const e=await n.connect();this.setState((t=>({...t,connector:n,chains:n?.chains,data:e,status:"connected"}))),t=!0;break}return t||this.setState((e=>({...e,data:void 0,status:"disconnected"}))),bm(this,vb,!1),this.data}setConnectors(e){this.args={...this.args,connectors:e};const t="function"==typeof e?e():e;t.forEach((e=>e.setStorage(this.args.storage))),this.setState((e=>({...e,connectors:t})))}getPublicClient({chainId:e}={}){let t=this.publicClients.get(-1);if(t&&t?.chain.id===e)return t;if(t=this.publicClients.get(e??-1),t)return t;const{publicClient:n}=this.args;return t="function"==typeof n?n({chainId:e}):n,this.publicClients.set(e??-1,t),t}setPublicClient(e){const t=this.data?.chain?.id;this.args={...this.args,publicClient:e},this.publicClients.clear(),this.setState((e=>({...e,publicClient:this.getPublicClient({chainId:t})})))}getWebSocketPublicClient({chainId:e}={}){let t=this.webSocketPublicClients.get(-1);if(t&&t?.chain.id===e)return t;if(t=this.webSocketPublicClients.get(e??-1),t)return t;const{webSocketPublicClient:n}=this.args;return t="function"==typeof n?n({chainId:e}):n,t&&this.webSocketPublicClients.set(e??-1,t),t}setWebSocketPublicClient(e){const t=this.data?.chain?.id;this.args={...this.args,webSocketPublicClient:e},this.webSocketPublicClients.clear(),this.setState((e=>({...e,webSocketPublicClient:this.getWebSocketPublicClient({chainId:t})})))}setLastUsedConnector(e=null){this.storage?.setItem("wallet",e)}};function xb(){if(!_b)throw new Error("No wagmi config found. Ensure you have set up a config: https://wagmi.sh/react/config");return _b}async function Sb({chainId:e,connector:t}){const n=xb(),s=n.connector;if(s&&t.id===s.id)throw new lb;try{n.setState((e=>({...e,status:"connecting"})));const s=await t.connect({chainId:e});return n.setLastUsedConnector(t.id),n.setState((e=>({...e,connector:t,chains:t?.chains,data:s,status:"connected"}))),n.storage.setItem("connected",!0),{...s,connector:t}}catch(e){throw n.setState((e=>({...e,status:e.connector?"connected":"disconnected"}))),e}}async function Ib(){const e=xb();e.connector&&await e.connector.disconnect(),e.clearState(),e.storage.removeItem("connected")}vb=new WeakMap,Ab=new WeakMap,Eb=new WeakSet,kb=function(){const e=e=>{this.setState((t=>({...t,data:{...t.data,...e}})))},t=()=>{this.clearState()},n=e=>{this.setState((t=>({...t,error:e})))};this.store.subscribe((({connector:e})=>e),((s,r)=>{r?.off?.("change",e),r?.off?.("disconnect",t),r?.off?.("error",n),s&&(s.on?.("change",e),s.on?.("disconnect",t),s.on?.("error",n))}));const{publicClient:s,webSocketPublicClient:r}=this.args;("function"==typeof s||"function"==typeof r)&&this.store.subscribe((({data:e})=>e?.chain?.id),(e=>{this.setState((t=>({...t,publicClient:this.getPublicClient({chainId:e}),webSocketPublicClient:this.getWebSocketPublicClient({chainId:e})})))}))};var Tb=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Ob=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{name:"",type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];function Nb({chainId:e}={}){const t=xb();return e&&t.getPublicClient({chainId:e})||t.publicClient}async function jb({chainId:e}={}){const t=xb();return await(t.connector?.getWalletClient?.({chainId:e}))||null}async function Ub({chainId:e,contracts:t,blockNumber:n,blockTag:s,...r}){const i=Nb({chainId:e});if(!i.chains)throw new ub;if(e&&i.chain.id!==e)throw new cb({chainId:e});return i.multicall({allowFailure:r.allowFailure??!0,blockNumber:n,blockTag:s,contracts:t})}async function Lb({address:e,account:t,chainId:n,abi:s,args:r,functionName:i,blockNumber:a,blockTag:o}){return Nb({chainId:n}).readContract({abi:s,address:e,account:t,functionName:i,args:r,blockNumber:a,blockTag:o})}async function Bb({contracts:e,blockNumber:t,blockTag:n,...s}){const{allowFailure:r=!0}=s;try{const s=Nb(),i=e.reduce(((e,t,n)=>{const r=t.chainId??s.chain.id;return{...e,[r]:[...e[r]||[],{contract:t,index:n}]}}),{}),a=()=>Object.entries(i).map((([e,s])=>Ub({allowFailure:r,chainId:parseInt(e),contracts:s.map((({contract:e})=>e)),blockNumber:t,blockTag:n}))),o=(await Promise.all(a())).flat(),c=Object.values(i).flatMap((e=>e.map((({index:e})=>e))));return o.reduce(((e,t,n)=>(e&&(e[c[n]]=t),e)),[])}catch(s){if(s instanceof km.uq)throw s;const i=()=>e.map((e=>Lb({...e,blockNumber:t,blockTag:n})));return r?(await Promise.allSettled(i())).map((e=>"fulfilled"===e.status?{result:e.value,status:"success"}:{error:e.reason,result:void 0,status:"failure"})):await Promise.all(i())}}async function Rb({address:e,chainId:t,formatUnits:n,token:s}){const r=xb(),i=Nb({chainId:t});if(s){const r=async({abi:r})=>{const i={abi:r,address:s,chainId:t},[a,o,c]=await Bb({allowFailure:!1,contracts:[{...i,functionName:"balanceOf",args:[e]},{...i,functionName:"decimals"},{...i,functionName:"symbol"}]});return{decimals:o,formatted:(0,ib.b)(a??"0",pb(n??o)),symbol:c,value:a}};try{return await r({abi:Tb})}catch(e){if(e instanceof km.uq){const{symbol:e,...t}=await r({abi:Ob});return{symbol:(0,gg.rR)((0,Am.f)(e,{dir:"right"})),...t}}throw e}}const a=[...r.publicClient.chains||[],...r.chains??[]],o=await i.getBalance({address:e}),c=a.find((e=>e.id===i.chain.id));return{decimals:c?.nativeCurrency.decimals??18,formatted:(0,ib.b)(o??"0",pb(n??18)),symbol:c?.nativeCurrency.symbol??"ETH",value:o}}function Mb(){const{data:e,connector:t,status:n}=xb();switch(n){case"connected":return{address:e?.account,connector:t,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:n};case"reconnecting":return{address:e?.account,connector:t,isConnected:!!e?.account,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:n};case"connecting":return{address:e?.account,connector:t,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:n};case"disconnected":return{address:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:n}}}function Db(){const e=xb(),t=e.data?.chain?.id,n=e.chains??[],s=[...e.publicClient?.chains||[],...n].find((e=>e.id===t))??{id:t,name:`Chain ${t}`,network:`${t}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}};return{chain:t?{...s,...e.data?.chain,id:t}:void 0,chains:n}}async function Fb({chainId:e}){const{connector:t}=xb();if(!t)throw new xp;if(!t.switchChain)throw new hb({connector:t});return t.switchChain(e)}function $b(e,{selector:t=(e=>e)}={}){const n=xb().subscribe((({data:e,connector:n,status:s})=>t({address:e?.account,connector:n,status:s})),(()=>e(Mb())),{equalityFn:ab});return n}function Gb(e,{selector:t=(e=>e)}={}){const n=xb().subscribe((({data:e,chains:n})=>t({chainId:e?.chain?.id,chains:n})),(()=>e(Db())),{equalityFn:ab});return n}async function Hb({name:e,chainId:t}){const{normalize:s}=await n.e(546).then(n.bind(n,9546)),r=Nb({chainId:t});return await r.getEnsAvatar({name:s(e)})}async function Wb({address:e,chainId:t}){return Nb({chainId:t}).getEnsName({address:(0,Dp.K)(e)})}class zb extends vp{#U;constructor(e,t){super(t,{batchMaxCount:1}),this.#U=async(t,n)=>{const s={method:t,params:n};this.emit("debug",{action:"sendEip1193Request",payload:s});try{const t=await e.request(s);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(e){const t=new Error(e.message);throw t.code=e.code,t.data=e.data,t.payload=s,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}}}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){ni(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#U(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter((t=>t.toLowerCase()===e)).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#U("eth_requestAccounts",[])}catch(e){const t=e.payload;throw this.getRpcError(t,{id:t.id,error:e})}return await super.getSigner(e)}}const qb=new class extends a{store=new r("cached-follows");constructor(){super(),this.addAllowedEvents("follow","unfollow")}async fetchSignedUserFollows(){const{data:e,error:t}=await Dr.client.from("follows").select().eq("follower_id",Nw.userId);if(t)throw t;const n=new Set(Object.keys(this.store.getAll()));for(const t of e){const e=t.followee_id;n.has(e)||this._follow(e),n.delete(e)}for(const e of n)this._unfollow(e)}clearCache(){this.store.clear()}_follow(e){this.store.set(e,!0),this.fireEvent("follow",e)}async follow(e){const t=this.isFollowing(e);this._follow(e);const{error:n}=await Dr.client.from("follows").insert({followee_id:e});if(n)throw t||this._unfollow(e),n}_unfollow(e){this.store.delete(e),this.fireEvent("unfollow",e)}async unfollow(e){const t=this.isFollowing(e);this._unfollow(e);const{error:n}=await Dr.client.from("follows").delete().eq("follower_id",Nw.userId).eq("followee_id",e);if(n)throw t&&this._follow(e),n}isFollowing(e){return!0===this.store.get(e)}},Kb={user_id:"",total_earned_trading_fees:"0",follower_count:0,following_count:0,blocked:!1,created_at:"-infinity"},Vb="*, total_earned_trading_fees::text",Jb=(e,t)=>$r(e.user_id)===$r(t.user_id)&&$r(e.wallet_address)===$r(t.wallet_address)&&$r(e.total_earned_trading_fees)===$r(t.total_earned_trading_fees)&&$r(e.display_name)===$r(t.display_name)&&$r(e.profile_image)===$r(t.profile_image)&&$r(e.x_username)===$r(t.x_username)&&(e.metadata,t.metadata,!0)&&$r(e.follower_count)===$r(t.follower_count)&&$r(e.following_count)===$r(t.following_count)&&$r(e.blocked)===$r(t.blocked);const Qb=new class extends a{store=new r("cached-user-details");constructor(){super(),this.addAllowedEvents("update")}init(){Dr.client.channel("user-details-changes").on("postgres_changes",{event:"*",schema:"public",table:"user_details"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.user_id)})).subscribe()}cache(e,t){Jb(t,this.get(e))||(this.store.set(e,t,!0),this.fireEvent("update",t))}get(e){const t=this.store.get(e);return t||{...Kb,user_id:e}}async refresh(e){const{data:t,error:n}=await Dr.client.from("user_details").select(Vb).eq("user_id",e);if(n)throw n;const s=t?.[0];s&&!Jb(s,this.get(e))&&this.cache(e,s)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing user details:",e))),t}getByXUsername(e){const t=Object.values(this.store.getAll()).find((t=>t.x_username===e));return t||{...Kb,x_username:e}}async refreshByXUsername(e){const{data:t,error:n}=await Dr.client.from("user_details").select(Vb).eq("x_username",e);if(n)throw n;const s=t?.[0];s&&(Jb(s,this.getByXUsername(e))||this.cache(s.user_id,s))}getAndRefreshByXUsername(e){const t=this.getByXUsername(e);return this.refreshByXUsername(e).catch((e=>console.error("Error refreshing user details:",e))),t}getByWalletAddress(e){const t=Object.values(this.store.getAll()).find((t=>t.wallet_address===e));return t||{...Kb,wallet_address:e}}async refreshByWalletAddress(e){const{data:t,error:n}=await Dr.client.from("user_details").select(Vb).eq("wallet_address",e);if(n)throw n;const s=t?.[0];s&&(Jb(s,this.getByWalletAddress(e))||this.cache(s.user_id,s))}getAndRefreshByWalletAddress(e){const t=this.getByWalletAddress(e);return this.refreshByWalletAddress(e).catch((e=>console.error("Error refreshing user details:",e))),t}cacheMultiple(e){for(const t of e)this.cache(t.user_id,t)}},Yb=(0,Tp.ax)({id:43114,name:"Avalanche",network:"avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]},public:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://snowtrace.io"},default:{name:"SnowTrace",url:"https://snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}}),Xb=(0,Tp.ax)({id:43113,name:"Avalanche Fuji",network:"avalanche-fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]},public:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://testnet.snowtrace.io"},default:{name:"SnowTrace",url:"https://testnet.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7096959}},testnet:!0});var Zb,ew,tw,nw,sw,rw,iw,aw,ow,cw,lw,uw,hw,dw,fw,pw,gw,mw,yw,bw,ww=n(9795),vw="eip155",Aw="requestedChains",Ew="wallet_addEthereumChain",kw=class extends Mp{constructor(e){super({...e,options:{isNewChainsStale:!0,...e.options}}),Lp(this,tw),Lp(this,sw),Lp(this,iw),Lp(this,ow),Lp(this,lw),Lp(this,hw),Lp(this,fw),Lp(this,gw),Lp(this,yw),this.id="walletConnect",this.name="WalletConnect",this.ready=!0,Lp(this,Zb,void 0),Lp(this,ew,void 0),this.onAccountsChanged=e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:(0,Dp.K)(e[0])})},this.onChainChanged=e=>{const t=Number(e),n=this.isChainUnsupported(t);this.emit("change",{chain:{id:t,unsupported:n}})},this.onDisconnect=()=>{Rp(this,hw,dw).call(this,[]),this.emit("disconnect")},this.onDisplayUri=e=>{this.emit("message",{type:"display_uri",data:e})},this.onConnect=()=>{this.emit("connect",{})},Rp(this,tw,nw).call(this)}async connect({chainId:e,pairingTopic:t}={}){try{let n=e;if(!n){const e=this.storage?.getItem("store"),t=e?.state?.data?.chain?.id;n=t&&!this.isChainUnsupported(t)?t:this.chains[0]?.id}if(!n)throw new Error("No chains found on connector.");const s=await this.getProvider();Rp(this,ow,cw).call(this);const r=Rp(this,iw,aw).call(this);if(s.session&&r&&await s.disconnect(),!s.session||r){const e=this.chains.filter((e=>e.id!==n)).map((e=>e.id));this.emit("message",{type:"connecting"}),await s.connect({pairingTopic:t,chains:[n],optionalChains:e.length?e:void 0}),Rp(this,hw,dw).call(this,this.chains.map((({id:e})=>e)))}const i=await s.enable(),a=(0,Dp.K)(i[0]),o=await this.getChainId();return{account:a,chain:{id:o,unsupported:this.isChainUnsupported(o)}}}catch(e){if(/user rejected/i.test(e?.message))throw new ng(e);throw e}}async disconnect(){const e=await this.getProvider();try{await e.disconnect()}catch(e){if(!/No matching key/i.test(e.message))throw e}finally{Rp(this,lw,uw).call(this),Rp(this,hw,dw).call(this,[])}}async getAccount(){const{accounts:e}=await this.getProvider();return(0,Dp.K)(e[0])}async getChainId(){const{chainId:e}=await this.getProvider();return e}async getProvider({chainId:e}={}){return Up(this,Zb)||await Rp(this,tw,nw).call(this),e&&await this.switchChain(e),Up(this,Zb)}async getWalletClient({chainId:e}={}){const[t,n]=await Promise.all([this.getProvider({chainId:e}),this.getAccount()]),s=this.chains.find((t=>t.id===e));if(!t)throw new Error("provider is required.");return am({account:n,chain:s,transport:dm(t)})}async isAuthorized(){try{const[e,t]=await Promise.all([this.getAccount(),this.getProvider()]),n=Rp(this,iw,aw).call(this);if(!e)return!1;if(n&&t.session){try{await t.disconnect()}catch{}return!1}return!0}catch{return!1}}async switchChain(e){const t=this.chains.find((t=>t.id===e));if(!t)throw new og(new Error("chain not found on connector."));try{const n=await this.getProvider(),s=Rp(this,gw,mw).call(this),r=Rp(this,yw,bw).call(this);if(!s.includes(e)&&r.includes(Ew)){await n.request({method:Ew,params:[{chainId:(0,yg.eC)(t.id),blockExplorerUrls:[t.blockExplorers?.default?.url],chainName:t.name,nativeCurrency:t.nativeCurrency,rpcUrls:[...t.rpcUrls.default.http]}]});const s=Rp(this,fw,pw).call(this);s.push(e),Rp(this,hw,dw).call(this,s)}return await n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,yg.eC)(e)}]}),t}catch(e){if(/user rejected request/i.test("string"==typeof e?e:e?.message))throw new ng(e);throw new og(e)}}};Zb=new WeakMap,ew=new WeakMap,tw=new WeakSet,nw=async function(){return Up(this,ew)||"undefined"==typeof window||Bp(this,ew,Rp(this,sw,rw).call(this)),Up(this,ew)},sw=new WeakSet,rw=async function(){const{EthereumProvider:e,OPTIONAL_EVENTS:t,OPTIONAL_METHODS:s}=await n.e(979).then(n.bind(n,7979)),[r,...i]=this.chains.map((({id:e})=>e));if(r){const{projectId:n,showQrModal:a=!0,qrModalOptions:o,metadata:c,relayUrl:l}=this.options;Bp(this,Zb,await e.init({showQrModal:a,qrModalOptions:o,projectId:n,optionalMethods:s,optionalEvents:t,chains:[r],optionalChains:i.length?i:void 0,rpcMap:Object.fromEntries(this.chains.map((e=>[e.id,e.rpcUrls.default.http[0]]))),metadata:c,relayUrl:l}))}},iw=new WeakSet,aw=function(){if(Rp(this,yw,bw).call(this).includes(Ew))return!1;if(!this.options.isNewChainsStale)return!1;const e=Rp(this,fw,pw).call(this),t=this.chains.map((({id:e})=>e)),n=Rp(this,gw,mw).call(this);return!(n.length&&!n.some((e=>t.includes(e))))&&!t.every((t=>e.includes(t)))},ow=new WeakSet,cw=function(){Up(this,Zb)&&(Rp(this,lw,uw).call(this),Up(this,Zb).on("accountsChanged",this.onAccountsChanged),Up(this,Zb).on("chainChanged",this.onChainChanged),Up(this,Zb).on("disconnect",this.onDisconnect),Up(this,Zb).on("session_delete",this.onDisconnect),Up(this,Zb).on("display_uri",this.onDisplayUri),Up(this,Zb).on("connect",this.onConnect))},lw=new WeakSet,uw=function(){Up(this,Zb)&&(Up(this,Zb).removeListener("accountsChanged",this.onAccountsChanged),Up(this,Zb).removeListener("chainChanged",this.onChainChanged),Up(this,Zb).removeListener("disconnect",this.onDisconnect),Up(this,Zb).removeListener("session_delete",this.onDisconnect),Up(this,Zb).removeListener("display_uri",this.onDisplayUri),Up(this,Zb).removeListener("connect",this.onConnect))},hw=new WeakSet,dw=function(e){this.storage?.setItem(Aw,e)},fw=new WeakSet,pw=function(){return this.storage?.getItem(Aw)??[]},gw=new WeakSet,mw=function(){if(!Up(this,Zb))return[];const e=Up(this,Zb).session?.namespaces;if(!e)return[];const t=(0,ww.fK)(e),n=t[vw]?.chains?.map((e=>parseInt(e.split(":")[1]||"")));return n??[]},yw=new WeakSet,bw=function(){if(!Up(this,Zb))return[];const e=Up(this,Zb).session?.namespaces;if(!e)return[];const t=(0,ww.fK)(e),n=t[vw]?.methods;return n??[]};class _w{constructor(e,t){this.wagmi={},this.chains=[],this.namespace="eip155",this.disconnect=Ib,this.getAccount=Mb,this.watchAccount=$b,this.fetchBalance=Rb,this.getNetwork=Db,this.watchNetwork=Gb,this.switchNetwork=Fb,this.fetchEnsName=Wb,this.fetchEnsAvatar=Hb,this.wagmi=e,this.chains=t}getWalletConnectConnector(){const e=this.wagmi.connectors.find((e=>"walletConnect"===e.id));if(!e)throw new Error("WalletConnectConnector is required");return e}async connectWalletConnectProvider(e,t){return await e.getProvider(),new Promise((n=>{e.once("message",(e=>{"display_uri"===e.type&&(t(e.data),n())}))}))}getConnectorById(e){const t=this.wagmi.connectors.find((t=>t.id===e));if(!t)throw new Error(`Connector for id ${e} was not found`);return t}getConnectors(){return this.wagmi.connectors.filter((e=>!e.id.includes("walletConnect")))}async connectWalletConnect(e,t){const n=this.getWalletConnectConnector(),s={connector:n};return t&&(s.chainId=t),Promise.all([Sb(s),this.connectWalletConnectProvider(n,e)])}async connectConnector(e,t){const n={connector:this.getConnectorById(e)};return t&&(n.chainId=t),await Sb(n)}isInjectedProviderInstalled(){return typeof window.ethereum<"u"}safeCheckInjectedProvider(e){var t;try{const n=String(e);return Boolean(null==(t=window.ethereum)?void 0:t[n])}catch(e){return console.error(e),!1}}async getConnectedChainIds(){var e,t,n;const s=null==(t=null==(e=(await this.getWalletConnectConnector().getProvider()).signer)?void 0:e.session)?void 0:t.namespaces,r=null==(n=s?.[this.namespace])?void 0:n.methods;if(null!=r&&r.includes("wallet_addEthereumChain"))return"ALL";if(s){const e=[];return Object.keys(s).forEach((t=>{t.includes(this.namespace)&&e.push(...s[t].accounts)})),e?.map((e=>e.split(":")[1]))}return"ALL"}}function Pw({projectId:e}){return function({rpc:e}){return function(t){const n=e(t);return n&&""!==n.http?{chain:{...t,rpcUrls:{...t.rpcUrls,default:{http:[n.http]}}},rpcUrls:{http:[n.http],webSocket:n.webSocket?[n.webSocket]:void 0}}:null}}({rpc:t=>{var n;return[1,3,4,5,10,42,56,69,97,100,137,280,324,420,42161,42220,43114,80001,421611,421613,1313161554,1313161555].includes(t.id)?{http:`https://rpc.walletconnect.com/v1/?chainId=eip155:${t.id}&projectId=${e}`}:{http:t.rpcUrls.default.http[0],webSocket:null==(n=t.rpcUrls.default.webSocket)?void 0:n[0]}}})}function Cw({chains:e,projectId:t}){return[new kw({chains:e,options:{projectId:t,showQrModal:!1}}),new pm({chains:e,options:{shimDisconnect:!0}})]}var xw=n(9015);class Sw{constructor(e,t){this.openModal=xw.jb.open,this.closeModal=xw.jb.close,this.subscribeModal=xw.jb.subscribe,this.setTheme=xw.ThemeCtrl.setThemeConfig,this.setDefaultChain=xw.OptionsCtrl.setSelectedChain,this.subscribeEvents=xw.uA.subscribe,xw.ThemeCtrl.setThemeConfig(e),xw.Id.setEthereumClient(t),xw.ConfigCtrl.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.all([n.e(152),n.e(968)]).then(n.bind(n,7968));const e=document.createElement("w3m-modal");document.body.insertAdjacentElement("beforeend",e),xw.OptionsCtrl.setIsUiLoaded(!0)}}}const Iw=new class extends a{web3modal;_resolveConnection;connected=!1;get address(){return Mb().address}constructor(){super(),this.addAllowedEvents("accountChanged")}init(e){const t=[Yb,Xb],{publicClient:n}=ob(t,[Pw({projectId:e})]),s=function(e){const t=new Cb(e);return _b=t,t}({autoConnect:!0,connectors:Cw({projectId:e,chains:t}),publicClient:n}),r=new _w(s,t);this.web3modal=new Sw({projectId:e,themeMode:"light",themeVariables:{"--w3m-accent-color":"#5585FF","--w3m-background-color":"#5585FF","--w3m-z-index":"999999"}},r),this.connected=void 0!==this.address;let i=this.address;$b((e=>{this.connected=void 0!==e.address,this.connected&&this._resolveConnection&&this._resolveConnection(),i!==e.address&&(this.fireEvent("accountChanged"),i=e.address)}))}async signMessage(e){if(!this.address)throw new Error("Wallet is not connected");return await async function(e){const t=await jb();if(!t)throw new xp;return await t.signMessage({message:e.message})}({message:e})}async connect(){return void 0!==this.address&&(this.connected=!0,this.fireEvent("accountChanged")),new Promise((e=>{this._resolveConnection=e,this.web3modal.openModal()}))}async getBalance(){if(!this.address)throw new Error("Wallet is not connected");return(await Rb({address:this.address})).value}};const Tw=new class{messageForWalletLinking;init(e){this.messageForWalletLinking=e}async link(){const e=Iw.address;if(!e)throw new Error("Wallet is not connected");const{data:t,error:n}=await Dr.client.functions.invoke("new-wallet-linking-nonce",{body:{walletAddress:e}});if(n)throw n;const s=await Iw.signMessage(`${this.messageForWalletLinking}\n\nNonce: ${t.nonce}`),{error:r}=await Dr.client.functions.invoke("link-wallet-to-user",{body:{walletAddress:e,signedMessage:s}});if(r)throw r;Nw.userId&&Qb.refresh(Nw.userId)}};class Ow extends w{content;linkButton;constructor(){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.link-wallet-popup",m("header",m("h1","Link Wallet")),m("main",m("p","To link your wallet to account, please follow the steps below:"),m("ol",m("li","Ensure your crypto wallet is connected.",m("w3m-core-button")),m("li",'Click the "Link Wallet" button below.'))),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"}),this.linkButton=new v({tag:".link-wallet-button",click:async(e,t)=>{try{t.disable().title="Linking...",await Tw.link(),this.delete()}catch(e){console.error(e),t.enable().title="Link Wallet"}},title:"Link Wallet"})))),this.checkWallet(),this.onDelegate(Iw,"accountChanged",(()=>this.checkWallet()))}checkWallet(){Iw.connected?this.linkButton.enable():this.linkButton.disable()}}const Nw=new class extends a{user;get userId(){return this.user?.id}get name(){return this.user?.user_metadata.full_name}get xUsername(){if("twitter"===this.user?.app_metadata.provider)return this.user.user_metadata.user_name}get avatarUrl(){return this.user?.user_metadata.avatar_url}get signed(){return void 0!==this.user}get walletAddress(){if(this.user)return Qb.get(this.user.id).wallet_address}get walletLinked(){return void 0!==this.walletAddress}constructor(){super(),this.addAllowedEvents("userFetched")}async fetchUserOnInit(){const{data:e,error:t}=await Dr.client.auth.getSession();if(t)throw t;this.user=e?.session?.user,this.user&&(this.fireEvent("userFetched"),this.onDelegate(Qb,"update",(e=>{e.user_id===this.user?.id&&this.fireEvent("userFetched")})),Qb.refresh(this.user.id).then((()=>{this.walletLinked||new C({title:"Wallet Link Required",message:"You must link your wallet to access all features of Igloo. Would you like to link your wallet now?",confirmTitle:"Link Wallet",cancelTitle:"Later"},(()=>{new Ow}))})),qb.fetchSignedUserFollows())}async signIn(){await Dr.client.auth.signInWithOAuth({provider:"twitter",options:_p.dev?{redirectTo:"http://localhost:8413/"}:void 0})}linkWallet(){new Ow}async signOut(){const{error:e}=await Dr.client.auth.signOut();if(e)throw e;qb.clearCache(),location.reload()}async getContractSigner(){if(!this.user)throw new Error("User not signed in");if(!0!==Iw.connected)throw new Error("Wallet not connected");if(!this.walletAddress)throw new Error("Wallet not linked");const e=await jb();if(!e)throw new Error("Wallet not connected");const{account:t,transport:n}=e;if(t.address!==this.walletAddress)throw new Error("Wallet address mismatch");const{chain:s}=Db();if(!s)throw new Error("Chain not found");if(s.id!==_p.avaxChainId)throw new Error("Wrong chain");if(s&&t&&n)return new bp(new zb(n,{chainId:s.id,name:s.name,ensAddress:s.contracts?.ensRegistry?.address}),t.address)}};class jw extends c{welcomeMessage="Welcome to Igloo!";logo;backButton;titleDisplay;loginButton;signedUser;settingsButton;constructor(){super(".mobile-title-bar"),this.append(this.logo=m("h1",m("img",{src:"/images/logo.png"}),{click:()=>f.go("/")}),this.backButton=m("button.back",new b("arrow_back"),{click:()=>history.back()}),this.titleDisplay=m("p"),this.loginButton=m("button.login",new b("login"),{click:()=>Nw.signIn()}),this.signedUser=m("a.signed-user",{click:()=>f.go(`/${Nw.xUsername}`)}),this.settingsButton=m("button.settings",new b("settings"),{click:()=>f.go("/settings")})),this.checkSigned(),this.onDelegate(Nw,"userFetched",(()=>this.checkSigned()))}checkSigned(){this.showLoginOrSignedUser(),this.titleDisplay.text=this.welcomeMessage=Nw.signed?"Hello, "+Nw.name+"!":"Welcome to Igloo!",Nw.signed&&this.signedUser.style({backgroundImage:`url(${Nw.avatarUrl})`})}showLogo(){this.logo.deleteClass("hidden"),this.backButton.addClass("hidden")}showBackButton(){this.logo.addClass("hidden"),this.backButton.deleteClass("hidden")}hideAllButtons(){[this.loginButton,this.signedUser,this.settingsButton].forEach((e=>e.addClass("hidden")))}showLoginOrSignedUser(){Nw.signed?this.showSignedUser():this.showLoginButton()}showLoginButton(){this.hideAllButtons(),this.loginButton.deleteClass("hidden")}showSignedUser(){this.hideAllButtons(),this.signedUser.deleteClass("hidden")}showSettingsButton(){this.hideAllButtons(),this.settingsButton.deleteClass("hidden")}set uri(e){""===e||"chats"===e||e.startsWith("chats/")||"explore"===e||"notifications"===e||"settings"===e?(this.titleDisplay.text=""===e?this.welcomeMessage:Fr.toTitleCase(e),this.showLogo(),this.showLoginOrSignedUser()):e.startsWith("post/")?(this.titleDisplay.text="Post",this.showBackButton(),this.showLoginOrSignedUser()):(this.titleDisplay.text="@"+e,this.showBackButton(),Nw.xUsername===e?this.showSettingsButton():this.showLoginOrSignedUser())}}class Uw extends c{currentActiveButton;loginButton;signedUser;constructor(){super(".nav-bar"),this.append(m("h1",m("img",{src:"/images/logo.png"}),{click:()=>f.go("/")}),m("button.home",new b("home"),{click:()=>f.go("/")}),m("button.chats",new b("chat"),{click:()=>f.go("/chats")}),m("button.explore",new b("search"),{click:()=>f.go("/explore")}),m("button.notifications",new b("notifications"),{click:()=>f.go("/notifications")}),m("button.settings",new b("settings"),{click:()=>f.go("/settings")}),this.loginButton=m("button.login-button",new b("login"),{click:()=>Nw.signIn()}),this.signedUser=m("a.signed-user",{click:()=>f.go(`/${Nw.xUsername}`)})),this.checkSigned(),this.onDelegate(Nw,"userFetched",(()=>this.checkSigned()))}checkSigned(){Nw.signed?this.showSignedUser():this.showLoginButton(),Nw.signed&&this.signedUser.style({backgroundImage:`url(${Nw.avatarUrl})`})}showLoginButton(){this.loginButton.addClass("show"),this.signedUser.deleteClass("show")}showSignedUser(){this.loginButton.deleteClass("show"),this.signedUser.addClass("show")}activeButton(e){this.currentActiveButton&&this.currentActiveButton.deleteClass("active"),this.currentActiveButton=this.children.find((t=>t.hasClass(e))),this.currentActiveButton?.addClass("active")}}const Lw={subject:"",last_fetched_key_price:"0",total_trading_key_volume:"0",total_earned_trading_fees:"0",last_message_sent_at:"",key_holder_count:0,last_key_purchased_at:"-infinity",owned_key_count:0,created_at:"-infinity"},Bw="*, last_fetched_key_price::text, total_trading_key_volume::text, total_earned_trading_fees::text",Rw=(e,t)=>$r(e.subject)===$r(t.subject)&&$r(e.last_fetched_key_price)===$r(t.last_fetched_key_price)&&$r(e.total_trading_key_volume)===$r(t.total_trading_key_volume)&&$r(e.total_earned_trading_fees)===$r(t.total_earned_trading_fees)&&$r(e.is_key_price_up)===$r(t.is_key_price_up)&&$r(e.last_message)===$r(t.last_message)&&$r(e.last_message_sent_at)===$r(t.last_message_sent_at)&&$r(e.key_holder_count)===$r(t.key_holder_count)&&$r(e.last_key_purchased_at)===$r(t.last_key_purchased_at)&&$r(e.owned_key_count)===$r(t.owned_key_count);const Mw=new class extends a{store=new r("cached-subject-details");constructor(){super(),this.addAllowedEvents("update")}init(){Dr.client.channel("subject-details-changes").on("postgres_changes",{event:"*",schema:"public",table:"subject_details"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.subject)})).subscribe()}cache(e){Rw(e,this.get(e.subject))||(this.store.set(e.subject,e,!0),this.fireEvent("update",e))}get(e){const t=this.store.get(e);return t||{...Lw,subject:e}}async refresh(e){const{data:t,error:n}=await Dr.client.from("subject_details").select(Bw).eq("subject",e);if(n)throw n;const s=t?.[0];s&&!Rw(s,this.get(e))&&this.cache(s)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing subject details:",e))),t}cacheMultiple(e){for(const t of e)this.cache(t)}};class Dw{static LIMIT=50;async fetchById(e){const{data:t,error:n}=await Dr.client.from("user_details").select(Vb).eq("user_id",e);if(n)throw n;return t[0]}async fetchByIds(e){const{data:t,error:n}=await Dr.client.from("user_details").select(Vb).in("user_id",e);if(n)throw n;return t}async fetchByWalletAddresses(e){const{data:t,error:n}=await Dr.client.from("user_details").select(Vb).in("wallet_address",e);if(n)throw n;return t}async fetchFollowers(e,t){const{data:n,error:s}=await Dr.client.from("follows").select("follower_id, followed_at").eq("followee_id",e).lt("followed_at",t??"infinity").order("followed_at",{ascending:!1}).limit(Dw.LIMIT);if(s)throw s;const{data:r,error:i}=await Dr.client.from("user_details").select(Vb).in("user_id",n.map((e=>e.follower_id)));if(i)throw i;return{userDetailsSet:r,lastFetchedFollowedAt:n[n.length-1]?.followed_at}}async fetchFollowing(e,t){const{data:n,error:s}=await Dr.client.from("follows").select("followee_id, followed_at").eq("follower_id",e).lt("followed_at",t??"infinity").order("followed_at",{ascending:!1}).limit(Dw.LIMIT);if(s)throw s;const{data:r,error:i}=await Dr.client.from("user_details").select(Vb).in("user_id",n.map((e=>e.followee_id)));if(i)throw i;return{userDetailsSet:r,lastFetchedFollowedAt:n[n.length-1]?.followed_at}}async fetchHoldings(e){const{data:t,error:n}=await Dr.client.from("subject_key_holders").select().eq("wallet_address",e).gt("last_fetched_balance",0);if(n)throw n;const s=t.map((e=>e.subject));return await this.fetchByWalletAddresses(s)}async fetchHolders(e){const{data:t,error:n}=await Dr.client.from("subject_key_holders").select().eq("subject",e).gt("last_fetched_balance",0);if(n)throw n;const s=t.map((e=>e.wallet_address));return await this.fetchByWalletAddresses(s)}async fetchNewUsers(){const{data:e,error:t}=await Dr.client.from("user_details").select(Vb).order("created_at",{ascending:!1}).limit(Dw.LIMIT);if(t)throw t;return e}async fetchTopUsers(){const{data:e,error:t}=await Dr.client.from("subject_details").select(Bw).order("last_fetched_key_price",{ascending:!1}).limit(Dw.LIMIT);if(t)throw t;Mw.cacheMultiple(e);const n=e.map((e=>e.subject)),s=await this.fetchByWalletAddresses(n);return s.sort(((t,n)=>{const s=e.find((e=>e.subject===t.wallet_address))?.last_fetched_key_price??0;return(e.find((e=>e.subject===n.wallet_address))?.last_fetched_key_price??0)-s})),s}async fetchTrendingUsers(){const{data:e,error:t}=await Dr.client.from("subject_details").select(Bw).order("last_key_purchased_at",{ascending:!1}).limit(Dw.LIMIT);if(t)throw t;Mw.cacheMultiple(e);const n=e.map((e=>e.subject)),s=await this.fetchByWalletAddresses(n);return s.sort(((t,n)=>{const s=e.find((e=>e.subject===t.wallet_address))?.last_key_purchased_at??0;return(e.find((e=>e.subject===n.wallet_address))?.last_key_purchased_at??0)-s})),s}}const Fw=new Dw,$w=BigInt(-1),Gw=BigInt(0),Hw=BigInt(1),Ww=BigInt(5),zw={};let qw="0000";for(;qw.length<80;)qw+=qw;function Kw(e){let t=qw;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function Vw(e,t,n){const s=BigInt(t.width);if(t.signed){const t=Hw<<s-Hw;ti(null==n||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=e>Gw?vi(Ei(e,s),s):-vi(Ei(-e,s),s)}else{const t=Hw<<s;ti(null==n||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%t+t)%t&t-Hw}return e}function Jw(e){"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,n=128,s=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const r=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ni(r,"invalid fixed format","format",e),t="u"!==r[1],n=parseInt(r[2]),s=parseInt(r[3])}else if(e){const r=e,i=(e,t,n)=>null==r[e]?n:(ni(typeof r[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,r[e]),r[e]);t=i("signed","boolean",t),n=i("width","number",n),s=i("decimals","number",s)}ni(n%8==0,"invalid FixedNumber width (not byte aligned)","format.width",n),ni(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);return{signed:t,width:n,decimals:s,name:(t?"":"u")+"fixed"+String(n)+"x"+String(s)}}class Qw{format;#Ze;#et;#tt;_value;constructor(e,t,n){ii(e,zw,"FixedNumber"),this.#et=t,this.#Ze=n;const s=function(e,t){let n="";e<Gw&&(n="-",e*=$w);let s=e.toString();if(0===t)return n+s;for(;s.length<=t;)s=qw+s;const r=s.length-t;for(s=s.substring(0,r)+"."+s.substring(r);"0"===s[0]&&"."!==s[1];)s=s.substring(1);for(;"0"===s[s.length-1]&&"."!==s[s.length-2];)s=s.substring(0,s.length-1);return n+s}(t,n.decimals);Qr(this,{format:n.name,_value:s}),this.#tt=Kw(n.decimals)}get signed(){return this.#Ze.signed}get width(){return this.#Ze.width}get decimals(){return this.#Ze.decimals}get value(){return this.#et}#nt(e){ni(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#st(e,t){return e=Vw(e,this.#Ze,t),new Qw(zw,e,this.#Ze)}#rt(e,t){return this.#nt(e),this.#st(this.#et+e.#et,t)}addUnsafe(e){return this.#rt(e)}add(e){return this.#rt(e,"add")}#it(e,t){return this.#nt(e),this.#st(this.#et-e.#et,t)}subUnsafe(e){return this.#it(e)}sub(e){return this.#it(e,"sub")}#at(e,t){return this.#nt(e),this.#st(this.#et*e.#et/this.#tt,t)}mulUnsafe(e){return this.#at(e)}mul(e){return this.#at(e,"mul")}mulSignal(e){this.#nt(e);const t=this.#et*e.#et;return ti(t%this.#tt===Gw,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#st(t/this.#tt,"mulSignal")}#ot(e,t){return ti(e.#et!==Gw,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#nt(e),this.#st(this.#et*this.#tt/e.#et,t)}divUnsafe(e){return this.#ot(e)}div(e){return this.#ot(e,"div")}divSignal(e){ti(e.#et!==Gw,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#nt(e);const t=this.#et*this.#tt;return ti(t%e.#et===Gw,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#st(t/e.#et,"divSignal")}cmp(e){let t=this.value,n=e.value;const s=this.decimals-e.decimals;return s>0?n*=Kw(s):s<0&&(t*=Kw(-s)),t<n?-1:t>n?1:0}eq(e){return 0===this.cmp(e)}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#et;return this.#et<Gw&&(e-=this.#tt-Hw),e=this.#et/this.#tt*this.#tt,this.#st(e,"floor")}ceiling(){let e=this.#et;return this.#et>Gw&&(e+=this.#tt-Hw),e=this.#et/this.#tt*this.#tt,this.#st(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=Ww*Kw(t-1);let s=this.value+n;const r=Kw(t);return s=s/r*r,Vw(s,this.#Ze,"round"),new Qw(zw,s,this.#Ze)}isZero(){return this.#et===Gw}isNegative(){return this.#et<Gw}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Qw.fromString(this.toString(),e)}static fromValue(e,t,n){const s=null==t?0:xi(t),r=Jw(n);let i=ki(e,"value");const a=s-r.decimals;if(a>0){const t=Kw(a);ti(i%t===Gw,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),i/=t}else a<0&&(i*=Kw(-a));return Vw(i,r,"fromValue"),new Qw(zw,i,r)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);ni(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const s=Jw(t);let r=n[2]||"0",i=n[3]||"";for(;i.length<s.decimals;)i+=qw;ti(i.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),i=i.substring(0,s.decimals);const a=BigInt(n[1]+r+i);return Vw(a,s,"fromString"),new Qw(zw,a,s)}static fromBytes(e,t){let n=Ci(oi(e,"value"));const s=Jw(t);return s.signed&&(n=vi(n,s.width)),Vw(n,s,"fromBytes"),new Qw(zw,n,s)}}const Yw=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Xw(e){return function(e,t){let n=18;if("string"==typeof t){const e=Yw.indexOf(t);ni(e>=0,"invalid unit","unit",t),n=3*e}else null!=t&&(n=xi(t,"unit"));return Qw.fromValue(e,n,{decimals:n,width:512}).toString()}(e,18)}class Zw extends c{userDetails;constructor(e){super(".user-list-item"),this.userDetails=e,this.render(),this.onDelegate(Qb,"update",(e=>{e.user_id===this.userDetails.user_id&&(this.userDetails=e,this.render())})),this.onDom("click",(()=>f.go(`/${this.userDetails.x_username}`)))}render(){const e=this.userDetails.wallet_address?Mw.get(this.userDetails.wallet_address):void 0;this.empty().append(m(".info-container",m(".profile-image",{style:{backgroundImage:`url(${this.userDetails.profile_image})`}}),m(".info",m(".name",this.userDetails.display_name),this.userDetails.x_username?m(".x-username",`@${this.userDetails.x_username}`):void 0)),m(".metric-container",m("section.price",m(".icon-container",new b("group")),m(".metric",m("h3","Holders"),m(".value",e?String(e.key_holder_count):"0"))),m("section.price",m(".icon-container",new b("sell")),m(".metric",m("h3","Price"),m(".value",e?Xw(e.last_fetched_key_price):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))))}}class ev extends c{emptyMessage;contentFetched=!1;emptyMessageDisplay;constructor(e,t){super(e+".user-list"),this.emptyMessage=t,this.showEmptyMessage()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addUserDetails(e){this.emptyMessageDisplay?.delete(),this.append(new Zw(e))}show(){return this.deleteClass("hidden"),this.contentFetched||(this.fetchContent(),this.contentFetched=!0),this}hide(){this.addClass("hidden")}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class tv extends ev{store=new r("top-user-list");isContentFromCache=!0;constructor(){super(".top-user-list","No users yet");const e=this.store.get("cached-users");if(e)for(const t of e)this.addUserDetails(t)}async fetchContent(){const e=await Fw.fetchTopUsers();if(Qb.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-users",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}class nv extends c{constructor(){super(".top-user-section"),this.append(m("h2","Top Users"),(new tv).show())}hide(){this.addClass("hidden")}show(){this.deleteClass("hidden")}}class sv extends ev{isContentFromCache=!0;store=new r("trending-user-list");constructor(){super(".trending-user-list","No users yet");const e=this.store.get("cached-users");if(e)for(const t of e)this.addUserDetails(t)}async fetchContent(){const e=await Fw.fetchTrendingUsers();if(Qb.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-users",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}class rv extends c{searchInput;constructor(){super(".trend-section"),this.append(m("form.search-bar",new b("search"),this.searchInput=m("input",{placeholder:"Search"}),{submit:e=>{e.preventDefault(),f.go(`/search?q=${this.searchInput.domElement.value}`)}}),(new sv).show())}hide(){this.addClass("hidden")}show(){this.deleteClass("hidden")}}class iv extends Gr{static current;static append(e){iv.current.content.append(e)}container;mobileTitleBar;navBar;content;trendSection;topUserSection;constructor(e,t){super(),iv.current=this,l.append(this.container=m(".layout",this.mobileTitleBar=new jw,this.navBar=new Uw,this.content=m("main"),this.trendSection=new rv,this.topUserSection=new nv)),this.activeNavBarButton(t)}changeParams(e,t){this.activeNavBarButton(t)}activeNavBarButton(e){this.navBar.activeButton(""===e?"home":e.substring(0,-1===e.indexOf("/")?e.length:e.indexOf("/"))),"explore"===e||"search"===e||"chats"===e||e.startsWith("chats/")?this.trendSection.hide():this.trendSection.show(),"explore"===e||"search"===e?this.topUserSection.show():this.topUserSection.hide(),this.mobileTitleBar.uri=e}close(){this.container.delete(),super.close()}}class av extends Gr{container;constructor(e,t){super(),iv.append(this.container=m(t+".chat-room-view"))}close(){this.container.delete(),super.close()}}class ov extends c{uploadInput;uploadButton;messageInput;constructor(e){super(e+".chat-message-form"),this.append(this.uploadInput=m("input.upload",{type:"file",accept:"image/*",change:e=>{const t=e.target.files?.[0];t&&this._upload(t)}}),this.uploadButton=m("button.upload",new b("image"),{click:()=>this.uploadInput.domElement.click()}),m("form",this.messageInput=m("input"),new v({tag:".send",title:"Send"}),{submit:e=>{e.preventDefault();const t=this.messageInput.domElement.value;t&&this.sendMessage(t),this.messageInput.domElement.value=""}})),this.on("visible",(()=>this.messageInput.domElement.focus()))}async _upload(e){this.uploadButton.domElement.disabled=!0,this.uploadButton.empty().addClass("loading"),await this.upload(e),this.uploadInput.domElement.value="",this.uploadButton.domElement.disabled=!1,this.uploadButton.deleteClass("loading"),this.uploadButton.empty().append(new b("image"))}getOptimisticData(e,t,n){if(!Nw.signed)throw new Error("User is not signed");return{id:-1,author:Nw.userId,author_name:Nw.name,author_avatar_url:Nw.avatarUrl,message_type:e,message:t,rich:n,created_at:(new Date).toISOString()}}}var cv;!function(e){e[e.MESSAGE=0]="MESSAGE",e[e.FILE_UPLOAD=1]="FILE_UPLOAD",e[e.POST_REF=2]="POST_REF"}(cv||(cv={}));const lv={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let uv;const hv=new Uint8Array(16);function dv(){if(!uv&&(uv="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!uv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uv(hv)}const fv=[];for(let e=0;e<256;++e)fv.push((e+256).toString(16).slice(1));function pv(e,t=0){return fv[e[t+0]]+fv[e[t+1]]+fv[e[t+2]]+fv[e[t+3]]+"-"+fv[e[t+4]]+fv[e[t+5]]+"-"+fv[e[t+6]]+fv[e[t+7]]+"-"+fv[e[t+8]]+fv[e[t+9]]+"-"+fv[e[t+10]]+fv[e[t+11]]+fv[e[t+12]]+fv[e[t+13]]+fv[e[t+14]]+fv[e[t+15]]}const gv=function(e,t,n){if(lv.randomUUID&&!t&&!e)return lv.randomUUID();const s=(e=e||{}).random||(e.rng||dv)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return pv(s)};const mv=new class{async uploadFile(e,t,n){const{data:s,error:r}=await Dr.client.storage.from(e).upload(`${t}/${gv()}_${n.name}`,n);if(r)throw r;return s.path}async createSignedUrl(e,t,n){const{data:s,error:r}=await Dr.client.storage.from(e).createSignedUrl(t,n);if(r)throw r;return s.signedUrl}async uploadImage(e,t,n,s,r){const i=await this.uploadFile(e,t,n),a=await this.createSignedUrl(e,i,s),{data:o,error:c}=await Dr.client.storage.from(e).createSignedUrl(i,s,{transform:r});if(c)throw c;return{url:a,thumbnailUrl:o.signedUrl}}};class yv{static FETCH_MESSAGE_LIMIT=100;async sendMessage(e,t){const{data:n,error:s}=await Dr.client.from("subject_chat_messages").insert({subject:e,message_type:cv.MESSAGE,message:t}).select().single();if(s)throw s;return n.id}async uploadImage(e,t){if(!Nw.userId)throw new Error("User not signed in");const n=await mv.uploadImage("subject_chat_upload_files",Nw.userId,t,2592e3,{width:256,height:256}),s={url:n.url,thumbnailUrl:n.thumbnailUrl,fileName:t.name,fileType:t.type,fileSize:t.size},{data:r,error:i}=await Dr.client.from("subject_chat_messages").insert({subject:e,message_type:cv.FILE_UPLOAD,rich:{files:[s]}}).select().single();if(i)throw i;return r.id}async fetchLatestMessages(e){const{data:t,error:n}=await Dr.client.from("subject_chat_messages").select().eq("subject",e).order("created_at",{ascending:!1}).limit(yv.FETCH_MESSAGE_LIMIT);if(n)throw n;return t}}const bv=new yv;class wv extends ov{messageList;constructor(e){super(".subject-chat-message-form"),this.messageList=e}async sendMessage(e){const t={subject:this.messageList.subject,...this.getOptimisticData(cv.MESSAGE,e)},n=this.messageList.addMessage(t).wait(),s=await bv.sendMessage(this.messageList.subject,e);this.messageList.findMessageItem(s)?.delete(),n.message.id=s,n.done()}async upload(e){await bv.uploadImage(this.messageList.subject,e)}}class vv extends c{message;constructor(e){super(".chat-message-list-item"),this.message=e,this.addAllowedEvents("imageLoaded"),this.render(),this.onDelegate(Nw,"userFetched",(()=>this.render()))}render(){this.empty().deleteClass("owner"),Nw.signed&&this.message.author===Nw.userId?this.append(m("main",m("header",m(".author",m(".name",this.message.author_name,{click:()=>f.go(`/${this.message.author_x_username}`)}))),this.message.message?m("p.message",this.message.message):void 0,this.message.rich?this.getRich(this.message.rich):void 0,m(".date",Wr()(this.message.created_at).fromNow())),m(".author-profile-image",{style:{backgroundImage:`url(${this.message.author_avatar_url})`},click:()=>f.go(`/${this.message.author_x_username}`)})).addClass("owner"):this.append(m(".author-profile-image",{style:{backgroundImage:`url(${this.message.author_avatar_url})`},click:()=>f.go(`/${this.message.author_x_username}`)}),m("main",m("header",m(".author",m(".name",this.message.author_name,{click:()=>f.go(`/${this.message.author_x_username}`)}))),this.message.message?m("p.message",this.message.message):void 0,this.message.rich?this.getRich(this.message.rich):void 0,m(".date",Wr()(this.message.created_at).fromNow())))}getRich(e){if(e.files)return m(".files",...e.files.map((e=>m(".file",e.thumbnailUrl?m(".image-container",m("a",m("img",{src:e.thumbnailUrl,load:()=>{this.deleted||this.fireEvent("imageLoaded")}}),{href:e.url,target:"_blank"})):void 0))))}wait(){return this.addClass("waiting"),this}done(){return this.deleteClass("waiting"),this}}class Av extends c{emptyMessage;emptyMessageDisplay;constructor(e,t){super(e+".chat-message-list"),this.emptyMessage=t,this.showEmptyMessage(),this.on("visible",(()=>{this.scrollToBottom(),setTimeout((()=>{this.deleted||this.scrollToBottom()}))}))}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addMessage(e){this.emptyMessageDisplay?.delete();const t=new vv(e);return t.on("imageLoaded",(()=>this.scrollToBottom())),this.append(t),this.scrollToBottom(),t}findMessageItem(e){return this.children.find((t=>t instanceof vv&&t.message.id===e))}scrollToBottom(){this.domElement.scrollTo(0,this.domElement.scrollHeight)}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class Ev extends Av{subject;store;isContentFromCache=!0;channel;constructor(e){super(".subject-chat-message-list","No messages yet."),this.subject=e,this.store=new r(`subject-${this.subject}-chat-message-list`);const t=this.store.get("cached-messages");if(t)for(const e of t)this.addMessage(e);this.fetchMessages(),this.channel=Dr.client.channel(`subject-${e}-chat-message-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"subject_chat_messages",filter:"subject=eq."+e},(e=>{this.findMessageItem(e.new.id)?.delete();const t=this.store.get("cached-messages")??[];t.push(e.new),this.store.set("cached-messages",t,!0),this.addMessage(e.new)})).subscribe()}async fetchMessages(){const e=(await bv.fetchLatestMessages(this.subject)).reverse();if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-messages",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addMessage(t)}delete(){this.channel.unsubscribe(),super.delete()}}class kv extends c{constructor(e){super(e+".chat-room-header")}}class _v extends kv{subject;subjectDetails;userDetails;constructor(e){super(".subject-chat-room-header"),this.subject=e,this.subjectDetails=Mw.getAndRefresh(e),this.userDetails=Qb.getAndRefreshByWalletAddress(e),this.render(),this.onDelegate(Mw,"update",(e=>{e.subject===this.subject&&(this.subjectDetails=e,this.render())})),this.onDelegate(Qb,"update",(e=>{e.wallet_address===this.subject&&(this.userDetails=e,this.render())}))}render(){this.empty().append(m("header",m("button.back",new b("arrow_back"),{click:()=>history.back()}),m(".subject-owner-profile-image",{style:{backgroundImage:`url(${this.userDetails.profile_image})`},click:()=>f.go(`/${this.userDetails.x_username}`)}),m(".subject-owner-info",m(".name",this.userDetails.display_name,{click:()=>f.go(`/${this.userDetails.x_username}`)}),this.userDetails.x_username?m(".x-username",`@${this.userDetails.x_username}`,{click:()=>f.go(`/${this.userDetails.x_username}`)}):void 0)),m("footer"))}}class Pv extends av{subject;messageList;constructor(e){super(e,".subject-chat-room-view"),this.subject="0x"+e.subject,this.render()}changeParams(e,t){this.subject="0x"+e.subject,this.render()}render(){const e=Ia(this.subject);this.container.empty().append(new _v(e),this.messageList=new Ev(e),new wv(this.messageList))}}class Cv{static FETCH_MESSAGE_LIMIT=100;async sendMessage(e,t){const{data:n,error:s}=await Dr.client.from("topic_chat_messages").insert({topic:e,message_type:cv.MESSAGE,message:t}).select().single();if(s)throw s;return n.id}async uploadImage(e,t){if(!Nw.userId)throw new Error("User not signed in");const n=await mv.uploadImage("topic_chat_upload_files",Nw.userId,t,2592e3,{width:256,height:256}),s={url:n.url,thumbnailUrl:n.thumbnailUrl,fileName:t.name,fileType:t.type,fileSize:t.size},{data:r,error:i}=await Dr.client.from("topic_chat_messages").insert({topic:e,message_type:cv.FILE_UPLOAD,rich:{files:[s]}}).select().single();if(i)throw i;return r.id}async fetchLatestMessages(e){const{data:t,error:n}=await Dr.client.from("topic_chat_messages").select().eq("topic",e).order("created_at",{ascending:!1}).limit(Cv.FETCH_MESSAGE_LIMIT);if(n)throw n;return t}}const xv=new Cv;class Sv extends ov{messageList;constructor(e){super(".topic-chat-message-form"),this.messageList=e}async sendMessage(e){const t={topic:this.messageList.topic,...this.getOptimisticData(cv.MESSAGE,e)},n=this.messageList.addMessage(t).wait(),s=await xv.sendMessage(this.messageList.topic,e);this.messageList.findMessageItem(s)?.delete(),n.message.id=s,n.done()}async upload(e){await xv.uploadImage(this.messageList.topic,e)}}class Iv extends Av{topic;store;isContentFromCache=!0;channel;constructor(e){super(".topic-chat-message-list","No messages yet."),this.topic=e,this.store=new r(`topic-${e}-chat-message-list`);const t=this.store.get("cached-messages");if(t)for(const e of t)this.addMessage(e);this.fetchMessages(),this.channel=Dr.client.channel(`topic-${e}-chat-message-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"topic_chat_messages",filter:"topic=eq."+e},(e=>{this.findMessageItem(e.new.id)?.delete();const t=this.store.get("cached-messages")??[];t.push(e.new),this.store.set("cached-messages",t,!0),this.addMessage(e.new)})).subscribe()}async fetchMessages(){const e=(await xv.fetchLatestMessages(this.topic)).reverse();if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-messages",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addMessage(t)}delete(){this.channel.unsubscribe(),super.delete()}}class Tv extends kv{constructor(e){super(".topic-chat-room-header"),this.append(m("header",m("button.back",new b("arrow_back"),{click:()=>history.back()}),m("h1",e)),m("footer"))}}class Ov extends av{topic;messageList;constructor(e){super(e,".topic-chat-room-view"),this.topic=e.topic,this.render()}changeParams(e,t){this.topic=e.topic,this.render()}render(){this.container.deleteClass("mobile-hidden"),this.topic||this.container.addClass("mobile-hidden");const e=this.topic?this.topic.toLowerCase():"general";this.container.empty().append(new Tv(e),this.messageList=new Iv(e),new Sv(this.messageList))}}const Nv=new class{async fetchSubject(e){const{data:t,error:n}=await Dr.client.from("subject_details").select(Bw).eq("subject",e);if(n)throw n;return t?.[0]}async fetchHoldingSubjects(e){const{data:t,error:n}=await Dr.client.from("subject_key_holders").select("subject").eq("wallet_address",e).gt("last_fetched_balance",0);if(n)throw n;const s=t.map((e=>e.subject)),{data:r,error:i}=await Dr.client.from("subject_details").select(Bw).in("subject",s);if(i)throw i;return r}async fetchFollowingSubjects(e){const{data:t,error:n}=await Dr.client.from("follows").select("followee_id").eq("follower_id",e).order("followed_at",{ascending:!1});if(n)throw n;const s=t.map((e=>e.followee_id)),{data:r,error:i}=await Dr.client.from("user_details").select().in("user_id",s);if(i)throw i;const a=r.map((e=>e.wallet_address)),{data:o,error:c}=await Dr.client.from("subject_details").select(Bw).in("subject",a);if(c)throw c;return o}};class jv extends c{emptyMessage;emptyMessageDisplay;constructor(e,t){super(e+".chat-room-list"),this.emptyMessage=t,this.showEmptyMessage()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class Uv extends c{constructor(e){super(e+".chat-room-list-item")}}class Lv extends Uv{subjectDetails;userDetails;constructor(e){super(".subject-list-item"),this.subjectDetails=e,this.userDetails=Qb.getByWalletAddress(e.subject),this.render(),this.onDelegate(Mw,"update",(e=>{e.subject===this.subjectDetails.subject&&(this.subjectDetails=e,this.render())})),this.onDelegate(Qb,"update",(e=>{e.wallet_address===this.subjectDetails.subject&&(this.userDetails=e,this.render())})),this.onDom("click",(()=>f.go(`/chats/${e.subject}`)))}render(){this.empty().append(m(".subject-owner-profile-image",{style:{backgroundImage:`url(${this.userDetails.profile_image})`}}),m(".subject-owner-info",m(".name",this.userDetails.display_name),this.userDetails.x_username?m(".x-username",`@${this.userDetails.x_username}`):void 0))}}class Bv extends jv{constructor(e,t){super(e+".subject-list",t)}addSubjectDetails(e){this.emptyMessageDisplay?.delete(),this.append(new Lv(e))}async fetchUsers(e){const t=e.map((e=>e.subject)),n=await Fw.fetchByWalletAddresses(t);Qb.cacheMultiple(n)}}class Rv extends Bv{store=new r("hoding-subject-list");constructor(){if(super(".holding-subject-list","No holding subjects yet."),Nw.walletAddress&&Nw.walletAddress===this.store.get("cached-wallet-address")){const e=this.store.get("cached-holding-subjects");if(e)for(const t of e)this.addSubjectDetails(t)}this.fetchSubjects()}async fetchSubjects(){if(Nw.walletAddress){this.store.set("cached-wallet-address",Nw.walletAddress,!0);const e=await Nv.fetchHoldingSubjects(Nw.walletAddress);if(this.store.set("cached-holding-subjects",e,!0),Mw.cacheMultiple(e),await this.fetchUsers(e),!this.deleted)if(this.empty(),0===e.length)this.showEmptyMessage();else for(const t of e)this.addSubjectDetails(t)}}}class Mv extends Bv{store=new r("my-subject-list");constructor(){if(super(".my-subject-list","No my subjects yet."),Nw.walletAddress&&Nw.walletAddress===this.store.get("cached-wallet-address")){const e=this.store.get("cached-my-subjects");if(e)for(const t of e)this.addSubjectDetails(t)}this.fetchSubjects()}async fetchSubjects(){if(Nw.walletAddress){this.store.set("cached-wallet-address",Nw.walletAddress,!0);const e=await Nv.fetchSubject(Nw.walletAddress);e&&(this.store.set("cached-my-subjects",[e],!0),Mw.cache(e),await this.fetchUsers([e]),this.deleted||(this.empty(),this.addSubjectDetails(e)))}}}class Dv extends Uv{constructor(e){super(".topic-list-item"),this.append(m("h3",e)),this.onDom("click",(()=>f.go(`/chats/${e}`)))}}class Fv extends jv{constructor(e,t){super(e+".topic-list",t)}addTopic(e){this.emptyMessageDisplay?.delete(),this.append(new Dv(e))}}class $v extends Fv{constructor(){super(".general-topic-list","No general topics yet."),this.addTopic("general")}}class Gv extends c{constructor(){super(".login-required"),this.append(m("p","This page requires login. Would you like to login?"),m("button","Login with ",{click:()=>Nw.signIn()}))}}class Hv extends Gr{container;constructor(e){super(),iv.append(this.container=m(".chats-view")),this.render(),this.container.onDelegate(Nw,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("h1","Chats")),Nw.signed?this.container.append(m("main",m("section.chat",m("h2","General"),new $v),m("section.chat",m("h2","My"),new Mv),m("section.chat",m("h2","Holding"),new Rv))):this.container.append(m("main",m("section.chat",m("h2","General"),new $v),new Gv))}close(){this.container.delete(),super.close()}}class Wv extends w{content;constructor(){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.switch-to-avax-popup",m("header",m("h1","Switch to Avalanche for Igloo")),m("main",m("img.banner",{src:"/images/avax-banner.jpg"}),m("p","Igloo operates on Avalanche. To utilize Igloo, please change your wallet's chain to Avalanche."),m("p",m("a","What is Avalanche?",{href:"https://www.avax.network/",target:"_blank"}))),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>{new P({title:"Warning",message:"If you do not switch to Avalanche, Igloo may not function properly. Ensure you change the chain for a seamless experience.",confirmTitle:"Understood"}),this.delete()},title:"Later"}),new v({tag:".switch-button",click:async()=>{await Fb({chainId:_p.avaxChainId}),this.delete()},title:"Switch Now"}))))}}class zv extends a{abi;viewContract;address;constructor(e){super(),this.abi=e}init(e){this.address=e,this.viewContract=new Cl(this.address,this.abi,new Ap(_p.avaxRpc))}async getWriteContract(){if(!Nw.signed)return void new C({title:"Not signed in",message:"You need to sign in to perform this action",confirmTitle:"Sign in"},(()=>Nw.signIn()));!0!==Iw.connected&&await Iw.connect();const e=await jb();if(!e)return void new x({title:"No wallet connected",message:"You need to connect a wallet to perform this action"});if(!Nw.walletAddress)return void new C({title:"No wallet linked",message:"You need to link a wallet to perform this action",confirmTitle:"Link wallet"},(()=>Nw.linkWallet()));const{account:t}=e;if(t.address!==Nw.walletAddress)return void new x({title:"Wallet address mismatch",message:"The wallet address associated with your account and the current crypto wallet address do not match. Please change the crypto wallet address."});const{chain:n}=Db();if(!n)return void new x({title:"Invalid network",message:"You need to be on the Avalanche network to perform this action"});if(n.id!==_p.avaxChainId)return void new Wv;const s=await Nw.getContractSigner();return s?new Cl(this.address,this.abi,s):void 0}}const qv=JSON.parse('{"Mt":[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"token","type":"address"}],"name":"SetMembershipToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"weight","type":"uint256"}],"name":"SetMembershipWeight","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"destination","type":"address"}],"name":"SetProtocolFeeDestination","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"percent","type":"uint256"}],"name":"SetProtocolFeePercent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"percent","type":"uint256"}],"name":"SetSubjectFeePercent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"trader","type":"address"},{"indexed":true,"internalType":"address","name":"subject","type":"address"},{"indexed":true,"internalType":"bool","name":"isBuy","type":"bool"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"protocolFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"subjectFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"supply","type":"uint256"}],"name":"Trade","type":"event"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"buyKeys","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"subject","type":"address"}],"name":"calculateAdditionalFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getBuyPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getBuyPriceAfterFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"supply","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getSellPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"getSellPriceAfterFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address payable","name":"_protocolFeeDestination","type":"address"},{"internalType":"uint256","name":"_protocolFeePercent","type":"uint256"},{"internalType":"uint256","name":"_subjectFeePercent","type":"uint256"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"keysBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"keysSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"membershipToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"membershipWeight","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeeDestination","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"subject","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"sellKeys","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_token","type":"address"}],"name":"setMembershipToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_weight","type":"uint256"}],"name":"setMembershipWeight","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_feeDestination","type":"address"}],"name":"setProtocolFeeDestination","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_feePercent","type":"uint256"}],"name":"setProtocolFeePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_feePercent","type":"uint256"}],"name":"setSubjectFeePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"subjectFeePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]}');const Kv=new class extends zv{constructor(){super(qv.Mt)}async getBuyPrice(e,t){return this.viewContract.getBuyPrice(e,t)}async getSellPrice(e,t){return this.viewContract.getSellPrice(e,t)}async getBuyPriceAfterFee(e,t){return this.viewContract.getBuyPriceAfterFee(e,t)}async getSellPriceAfterFee(e,t){return this.viewContract.getSellPriceAfterFee(e,t)}async getKeysBalance(e,t){return this.viewContract.keysBalance(e,t)}async buyKeys(e,t,n){const s=await this.getWriteContract();if(!s)throw new Error("No signer");return(await s.buyKeys(e,t,{value:n})).wait()}async sellKeys(e,t){const n=await this.getWriteContract();if(!n)throw new Error("No signer");return(await n.sellKeys(e,t)).wait()}};class Vv extends c{constructor(e){super(".activity-list-item");const t=Qb.getByWalletAddress(e.wallet_address),n=Qb.getByWalletAddress(e.subject),s="true"===e.args[2],r=e.args[3],i=Xw(e.args[4]);this.append(m("header",m(".trader-profile-image",{style:{backgroundImage:`url(${t.profile_image})`},click:()=>f.go(`/${t.x_username}`)}),m(".owner-profile-image",{style:{backgroundImage:`url(${n.profile_image})`},click:()=>f.go(`/${n.x_username}`)})),m("p.description",m("a",t.display_name,{click:()=>f.go(`/${t.x_username}`)}),(s?" bought ":" sold ")+r+" ",m("a",n.display_name,{click:()=>f.go(`/${n.x_username}`)})," key for ",i," AVAX."),m(".date",Wr()(Pp.blockToTime(e.block_number)).fromNow(!0)))}}class Jv extends c{store=new r("activity-list");isContentFromCache=!0;contentFetched=!1;emptyMessageDisplay;channel;constructor(){super(".activity-list"),this.showEmptyMessage();const e=this.store.get("cached-subject-trade-events");if(e)for(const t of e)this.addSubjectContractEvent(t);this.channel=Dr.client.channel("activity-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"subject_trade_events"},(e=>{const t=this.store.get("cached-subject-trade-events")??[];t.push(e.new),this.store.set("cached-subject-trade-events",t,!0),this.addSubjectContractEvent(e.new)})).subscribe()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message","No activities yet"),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addSubjectContractEvent(e){this.emptyMessageDisplay?.delete(),this.append(new Vv(e))}async fetchActivities(){const{data:e,error:t}=await Dr.client.from("subject_trade_events").select().order("block_number",{ascending:!1}).order("log_index",{ascending:!1});if(t)throw t;if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-subject-trade-events",e,!0),await this.fetchUsers(e),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addSubjectContractEvent(t)}async fetchUsers(e){const t=new Set;for(const n of e)t.add(n.wallet_address),t.add(n.subject);const n=await Fw.fetchByWalletAddresses(Array.from(t));Qb.cacheMultiple(n)}show(){this.deleteClass("hidden"),this.contentFetched||(this.fetchActivities(),this.contentFetched=!0)}hide(){this.addClass("hidden")}delete(){this.channel.unsubscribe(),super.delete()}}class Qv extends ev{store=new r("new-user-list");isContentFromCache=!0;constructor(){super(".new-user-list","No users yet");const e=this.store.get("cached-users");if(e)for(const t of e)this.addUserDetails(t)}async fetchContent(){const e=await Fw.fetchNewUsers();if(Qb.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-users",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}class Yv extends Gr{container;tabs;searchInput;trendingUserList;topUserList;newUsersList;activityList;constructor(e){super(),iv.append(this.container=m(".explore-view",m("h1","Explorer"),m("form.search-bar",new b("search"),this.searchInput=m("input",{placeholder:"Search"}),{submit:e=>{e.preventDefault(),f.go(`/search?q=${this.searchInput.domElement.value}`)}}),this.tabs=new I("explore",[{id:"trending",label:"Trending"},{id:"top",label:"Top"},{id:"new",label:"New"},{id:"activity",label:"Activity"}]),this.trendingUserList=new sv,this.topUserList=new tv,this.newUsersList=new Qv,this.activityList=new Jv)),this.tabs.on("select",(e=>{[this.trendingUserList,this.topUserList,this.newUsersList,this.activityList].forEach((e=>e.hide())),"trending"===e?this.trendingUserList.show():"top"===e?this.topUserList.show():"new"===e?this.newUsersList.show():"activity"===e&&this.activityList.show()})).init()}close(){this.container.delete(),super.close()}}class Xv extends Gr{container;searchInput;constructor(e){super(),iv.append(this.container=m(".search-view",m("h1","Search"),m("form.search-bar",new b("search"),this.searchInput=m("input",{placeholder:"Search",value:new URLSearchParams(location.search).get("q")??""}),{submit:e=>{e.preventDefault(),f.go(`/search?q=${this.searchInput.domElement.value}`)}}))),this.fetchSearchResults()}changeParams(e,t){this.fetchSearchResults()}async fetchSearchResults(){console.log(new URLSearchParams(location.search).get("q"))}close(){this.container.delete(),super.close()}}var Zv;!function(e){e[e.EVERYONE=0]="EVERYONE",e[e.KEY_HOLDERS=1]="KEY_HOLDERS"}(Zv||(Zv={}));const eA=(e,t)=>$r(e?.id)===$r(t?.id)&&$r(e?.guild_id)===$r(t?.guild_id)&&$r(e?.target)===$r(t?.target)&&$r(e?.author)===$r(t?.author)&&$r(e?.author_name)===$r(t?.author_name)&&$r(e?.author_avatar_url)===$r(t?.author_avatar_url)&&$r(e?.author_x_username)===$r(t?.author_x_username)&&$r(e?.message)===$r(t?.message)&&((e,t)=>e.files?.length===t.files?.length&&(e.files?.every(((e,n)=>{const s=t.files?.[n];return $r(e.url)===$r(s?.url)&&$r(e.thumbnailUrl)===$r(s?.thumbnailUrl)&&$r(e.fileName)===$r(s?.fileName)&&$r(e.fileType)===$r(s?.fileType)&&$r(e.fileSize)===$r(s?.fileSize)}))??!1))(e?.rich??{},t?.rich??{})&&$r(e?.post_ref)===$r(t?.post_ref)&&$r(e?.comment_count)===$r(t?.comment_count)&&$r(e?.repost_count)===$r(t?.repost_count)&&$r(e?.like_count)===$r(t?.like_count);const tA=new class extends a{store=new r("cached-posts");constructor(){super(),this.addAllowedEvents("update","delete")}init(){Dr.client.channel("posts-changes").on("postgres_changes",{event:"*",schema:"public",table:"posts"},(e=>{"INSERT"===e.eventType||"UPDATE"===e.eventType?this.refresh(e.new.id):"DELETE"===e.eventType&&this.deleteCache(e.old.id)})).subscribe()}deleteCache(e){this.store.delete(String(e)),this.fireEvent("delete",e)}cache(e,t){t?eA(t,this.get(e))||(this.store.set(String(e),t,!0),this.fireEvent("update",t)):this.deleteCache(e)}get(e){const t=this.store.get(String(e));if(t)return t}async refresh(e){const{data:t,error:n}=await Dr.client.from("posts").select().eq("id",e);if(n)throw n;const s=t?.[0];this.cache(e,s)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing post:",e))),t}cachePosts(e){for(const t of e)this.cache(t.id,t)}};class nA{static LIMIT=50;async post(e,t,n){const{data:s,error:r}=await Dr.client.from("posts").insert({target:e,message:t,rich:n?{files:[n]}:void 0}).select().single();if(r)throw r;return s.id}async comment(e,t,n){const{data:s,error:r}=await Dr.client.from("posts").insert({message:t,post_ref:e,rich:n?{files:[n]}:void 0}).select().single();if(r)throw r;return s.id}async repost(e){const{error:t}=await Dr.client.from("reposts").insert({post_id:e});if(t)throw t}async unrepost(e){const{error:t}=await Dr.client.from("reposts").delete().eq("post_id",e);if(t)throw t}async checkRepost(e,t){const{data:n,error:s}=await Dr.client.from("reposts").select("post_id").eq("post_id",e).eq("user_id",t);if(s)throw s;return void 0!==n?.[0]}async checkMultipleRepost(e,t){const{data:n,error:s}=await Dr.client.from("reposts").select("post_id").in("post_id",e).eq("user_id",t);if(s)throw s;return n?n.map((e=>e.post_id)):[]}async like(e){const{error:t}=await Dr.client.from("post_likes").insert({post_id:e});if(t)throw t}async unlike(e){const{error:t}=await Dr.client.from("post_likes").delete().eq("post_id",e);if(t)throw t}async checkLike(e,t){const{data:n,error:s}=await Dr.client.from("post_likes").select("post_id").eq("post_id",e).eq("user_id",t);if(s)throw s;return void 0!==n?.[0]}async checkMultipleLike(e,t){const{data:n,error:s}=await Dr.client.from("post_likes").select("post_id").in("post_id",e).eq("user_id",t);if(s)throw s;return n?n.map((e=>e.post_id)):[]}async deletePost(e){const{error:t}=await Dr.client.from("posts").delete().eq("id",e);if(t)throw t}async fetchPost(e){const{data:t,error:n}=await Dr.client.from("posts").select().eq("id",e);if(n)throw n;return t?.[0]}async fetchGlobalPosts(e){const{data:t,error:n}=await Dr.client.from("posts").select().lt("id",e??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(nA.LIMIT);if(n)throw n;return t}async fetchUserPosts(e,t){const{data:n,error:s}=await Dr.client.from("posts").select().eq("author",e).is("post_ref",null).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(nA.LIMIT);if(s)throw s;return n}async fetchUserCommentPosts(e,t){const{data:n,error:s}=await Dr.client.from("posts").select().eq("author",e).not("post_ref","is",null).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(nA.LIMIT);if(s)throw s;return n}async fetchUserLikedPosts(e,t){const{data:n,error:s}=await Dr.client.from("post_likes").select().eq("user_id",e).gt("created_at",t??"1970-01-01T00:00:00.000Z");if(s)throw s;const r=n.map((e=>e.post_id)),{data:i,error:a}=await Dr.client.from("posts").select().in("id",r).order("created_at",{ascending:!1});if(a)throw a;return i.map((e=>({post:e,likedAt:n.find((t=>t.post_id===e.id))?.created_at})))}async fetchFollowingPosts(e,t){const{data:n,error:s}=await Dr.client.from("follows").select().eq("follower_id",e).order("followed_at",{ascending:!1});if(s)throw s;const r=n.map((e=>e.followee_id)),{data:i,error:a}=await Dr.client.from("posts").select().in("author",r).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(nA.LIMIT);if(a)throw a;return{followeeIds:r,posts:i}}async fetchKeyHeldPosts(e,t){const{data:n,error:s}=await Dr.client.from("subject_key_holders").select().eq("wallet_address",e);if(s)throw s;const r=n.map((e=>e.subject)),{data:i,error:a}=await Dr.client.from("user_details").select().in("wallet_address",r);if(a)throw a;const o=i.map((e=>e.user_id)),{data:c,error:l}=await Dr.client.from("posts").select().in("author",o).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(nA.LIMIT);if(l)throw l;return{keyOwnerIds:o,posts:c}}async fetchComments(e,t){const{data:n,error:s}=await Dr.client.from("posts").select().eq("post_ref",e).lt("id",t??Number.MAX_SAFE_INTEGER).order("created_at",{ascending:!1}).limit(nA.LIMIT);if(s)throw s;return n}async upload(e){if(!Nw.userId)throw new Error("User not signed in");const t=await mv.uploadImage("post_upload_files",Nw.userId,e,2592e3,{width:256,height:256});return{url:t.url,thumbnailUrl:t.thumbnailUrl,fileName:e.name,fileType:e.type,fileSize:e.size}}}const sA=new nA;class rA extends w{sourcePost;content;commentTextarea;uploadInput;uploadButton;commentButton;uploadedFile;constructor(e){super({barrierDismissible:!0}),this.sourcePost=e,this.append(this.content=new g(".popup.post-comment-popup",m(".source",m(".author-profile-image",{style:{backgroundImage:`url(${this.sourcePost.author_avatar_url})`}}),m("main",m("header",m(".author",m(".name",this.sourcePost.author_name),this.sourcePost.author_x_username?m(".x-username",`@${this.sourcePost.author_x_username}`):void 0),m("button",new b("close"),{click:()=>this.delete()})),m("p.message",this.sourcePost.message))),m(".form-wrapper",m(".signed-user",{style:{backgroundImage:`url(${Nw.avatarUrl})`}}),m(".form",m("main",this.commentTextarea=m("textarea",{placeholder:"What's on your mind?"})),m("footer",this.uploadInput=m("input.upload",{type:"file",accept:"image/*",change:e=>{const t=e.target.files?.[0];t&&this.upload(t)}}),this.uploadButton=m("button.icon-button",new b("image"),{click:()=>this.uploadInput.domElement.click()}),this.commentButton=new v({tag:".post-button",click:()=>this.postComment(),title:"Post"})))))),this.commentTextarea.domElement.focus()}async upload(e){this.uploadButton.domElement.disabled=!0,this.uploadButton.addClass("loading"),this.uploadedFile=await sA.upload(e),this.uploadButton.empty().append(m("img",{src:this.uploadedFile.thumbnailUrl??this.uploadedFile.url})),this.uploadInput.domElement.value="",this.uploadButton.domElement.disabled=!1,this.uploadButton.deleteClass("loading")}async postComment(){this.commentButton.disable().text="Posting...";try{const e=await sA.comment(this.sourcePost.id,this.commentTextarea.domElement.value,this.uploadedFile);new k({message:"Your post has been successfully published.",action:{title:"View",click:()=>f.go(`/post/${e}`)}}),this.delete()}catch(e){console.error(e),this.uploadButton.empty().append(new b("image")),this.commentButton.enable().text="Post"}}}class iA extends c{post;reposted;liked;repostCountDisplay;likeCountDisplay;constructor(e,t,n){super(".post-list-item"),this.post=e,this.reposted=t,this.liked=n,this.onDom("click",(()=>f.go(`/post/${e.id}`))),t&&this.addClass("reposted"),n&&this.addClass("liked"),this.render(),this.onDelegate(tA,"update",(e=>{e.id===this.post.id&&(this.post=e,this.render())})),this.onDelegate(tA,"delete",(e=>{e===this.post.id&&this.delete()})),this.checkSigned(),this.onDelegate(Nw,"userFetched",(()=>this.checkSigned()))}render(){this.empty().append(m(".author-profile-image",{style:{backgroundImage:`url(${this.post.author_avatar_url})`},click:e=>this.goAuthorProfile(e)}),m("main",m("header",m(".author",m(".name",this.post.author_name,{click:e=>this.goAuthorProfile(e)}),this.post.author_x_username?m(".x-username",`@${this.post.author_x_username}`,{click:e=>this.goAuthorProfile(e)}):void 0),m("button.owner-menu",new b("more_vert"),{click:(e,t)=>{e.stopPropagation();const n=t.rect;new y({left:n.right-160,top:n.top,items:[{title:"Delete",click:()=>{new C({title:"Delete Post",message:"Are you sure you want to delete this post?",confirmTitle:"Delete",loadingTitle:"Deleting..."},(()=>sA.deletePost(this.post.id)))}}]})}})),m("p.message",this.post.message),this.post.rich?this.getRich(this.post.rich):void 0,m(".date",Wr()(this.post.created_at).fromNow()),m("footer",m("button.comment",new b("comment"),String(this.post.comment_count),{click:e=>{e.stopPropagation(),new rA(this.post)}}),m("button.repost",new b("repeat"),this.repostCountDisplay=m("span",String(this.post.repost_count)),{click:e=>{e.stopPropagation(),this.reposted?(sA.unrepost(this.post.id),this.post.repost_count-=1,this.repostCountDisplay.text=String(this.post.repost_count),this.reposted=!1,this.deleteClass("reposted")):(sA.repost(this.post.id),this.post.repost_count+=1,this.repostCountDisplay.text=String(this.post.repost_count),this.reposted=!0,this.addClass("reposted"))}}),m("button.like",new b("favorite_border"),this.likeCountDisplay=m("span",String(this.post.like_count)),{click:e=>{e.stopPropagation(),this.liked?(sA.unlike(this.post.id),this.post.like_count-=1,this.likeCountDisplay.text=String(this.post.like_count),this.liked=!1,this.deleteClass("liked")):(sA.like(this.post.id),this.post.like_count+=1,this.likeCountDisplay.text=String(this.post.like_count),this.liked=!0,this.addClass("liked"))}}))))}getRich(e){if(e.files)return m(".files",...e.files.map((e=>m(".file",e.thumbnailUrl?m(".image-container",m("a",m("img",{src:e.thumbnailUrl}),{href:e.url,target:"_blank",click:e=>e.stopPropagation()})):void 0))))}checkSigned(){this.post.author===Nw.userId&&this.addClass("owned")}goAuthorProfile(e){e.stopPropagation(),f.go(`/${this.post.author_x_username}`)}}class aA extends c{emptyMessage;contentFetched=!1;emptyMessageDisplay;lastFetchedPostId;constructor(e,t){super(e+".post-list"),this.emptyMessage=t,this.showEmptyMessage()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message",this.emptyMessage),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addPost(e,t,n){this.emptyMessageDisplay?.delete(),new iA(e,t,n).appendTo(this,0)}show(){return this.deleteClass("hidden"),this.contentFetched||(this.fetchContent(),this.contentFetched=!0),this}hide(){return this.addClass("hidden"),this}empty(){return super.empty(),this.deleted||this.showEmptyMessage(),this}}class oA extends aA{userId;store=new r("following-post-list");isContentFromCache=!0;channel;constructor(e){super(".following-post-list","No posts from followed users yet"),this.userId=e;const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id))}async fetchContent(){const e=await sA.fetchFollowingPosts(this.userId,this.lastFetchedPostId),t=e.posts.reverse();tA.cachePosts(t),this.lastFetchedPostId=t[t.length-1]?.id;const n=t.map((e=>e.id)),s=Nw.userId?await sA.checkMultipleRepost(n,Nw.userId):[],r=Nw.userId?await sA.checkMultipleLike(n,Nw.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",t,!0),this.store.set("cached-reposted-post-ids",s,!0),this.store.set("cached-liked-post-ids",r,!0),this.deleted||this.empty()),!this.deleted)if(0===t.length)this.showEmptyMessage();else for(const e of t)this.addPost(e,s.includes(e.id),r.includes(e.id));this.channel?.unsubscribe(),this.channel=Dr.client.channel(`following-${this.userId}-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"author=in.("+e.followeeIds.join(",")+")"},(e=>{const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}delete(){this.channel?.unsubscribe(),super.delete()}}class cA extends aA{store=new r("global-post-list");isContentFromCache=!0;channel;constructor(){super(".global-post-list","No posts yet");const e=this.store.get("cached-posts"),t=this.store.get("cached-reposted-post-ids")??[],n=this.store.get("cached-liked-post-ids")??[];if(e)for(const s of e)this.addPost(s,t.includes(s.id),n.includes(s.id));this.channel=Dr.client.channel("global-post-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},(e=>{const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}async fetchContent(){const e=(await sA.fetchGlobalPosts(this.lastFetchedPostId)).reverse();tA.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id;const t=e.map((e=>e.id)),n=Nw.userId?await sA.checkMultipleRepost(t,Nw.userId):[],s=Nw.userId?await sA.checkMultipleLike(t,Nw.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",e,!0),this.store.set("cached-reposted-post-ids",n,!0),this.store.set("cached-liked-post-ids",s,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addPost(t,n.includes(t.id),s.includes(t.id))}delete(){this.channel.unsubscribe(),super.delete()}}class lA extends aA{walletAddress;store=new r("key-held-post-list");isContentFromCache=!0;channel;constructor(e){super(".key-held-post-list","No posts from users you hold ices for yet"),this.walletAddress=e;const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id))}async fetchContent(){const e=await sA.fetchKeyHeldPosts(this.walletAddress,this.lastFetchedPostId),t=e.posts.reverse();tA.cachePosts(t),this.lastFetchedPostId=t[t.length-1]?.id;const n=t.map((e=>e.id)),s=Nw.userId?await sA.checkMultipleRepost(n,Nw.userId):[],r=Nw.userId?await sA.checkMultipleLike(n,Nw.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",t,!0),this.store.set("cached-reposted-post-ids",s,!0),this.store.set("cached-liked-post-ids",r,!0),this.deleted||this.empty()),!this.deleted)if(0===t.length)this.showEmptyMessage();else for(const e of t)this.addPost(e,s.includes(e.id),r.includes(e.id));this.channel?.unsubscribe(),this.channel=Dr.client.channel(`key-held-${this.walletAddress}-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"author=in.("+e.keyOwnerIds.join(",")+")"},(e=>{const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}delete(){this.channel?.unsubscribe(),super.delete()}}class uA extends w{content;targetSelect;textarea;uploadInput;uploadButton;postButton;uploadedFile;constructor(){super({barrierDismissible:!0}),this.append(this.content=new g(".popup.post-popup",m(".signed-user",{style:{backgroundImage:`url(${Nw.avatarUrl})`}}),m(".form",m("header",this.targetSelect=m("select",m("option",{value:"0"},"Everyone"),m("option",{value:"1"},"Key Holders")),m("button",new b("close"),{click:()=>this.delete()})),m("main",this.textarea=m("textarea",{placeholder:"What's on your mind?"})),m("footer",this.uploadInput=m("input.upload",{type:"file",accept:"image/*",change:e=>{const t=e.target.files?.[0];t&&this.upload(t)}}),this.uploadButton=m("button.icon-button",new b("image"),{click:()=>this.uploadInput.domElement.click()}),this.postButton=new v({tag:".post-button",click:()=>this.post(),title:"Post"}))))),this.textarea.domElement.focus()}async upload(e){this.uploadButton.domElement.disabled=!0,this.uploadButton.addClass("loading"),this.uploadedFile=await sA.upload(e),this.uploadButton.empty().append(m("img",{src:this.uploadedFile.thumbnailUrl??this.uploadedFile.url})),this.uploadInput.domElement.value="",this.uploadButton.domElement.disabled=!1,this.uploadButton.deleteClass("loading")}async post(){this.postButton.disable().text="Posting...";try{const e=await sA.post(parseInt(this.targetSelect.domElement.value),this.textarea.domElement.value,this.uploadedFile);new k({message:"Your post has been successfully published.",action:{title:"View",click:()=>f.go(`/post/${e}`)}}),this.delete()}catch(e){console.error(e),this.uploadButton.empty().append(new b("image")),this.postButton.enable().text="Post"}}}class hA extends Gr{container;tabs;globalPostList;followingPostList;keyHeldPostList;constructor(e){super(),iv.append(this.container=m(".home-view")),this.render(),this.container.onDelegate(Nw,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("main",m("h1","Home"),Nw.signed?this.tabs=new I("home-view-tabs",Nw.walletLinked?[{id:"global",label:"Global"},{id:"following",label:"Following"},{id:"held",label:"Held"}]:[{id:"global",label:"Global"},{id:"following",label:"Following"}]):void 0,this.globalPostList=new cA,Nw.userId?this.followingPostList=new oA(Nw.userId):void 0,Nw.walletAddress?this.keyHeldPostList=new lA(Nw.walletAddress):void 0),m("button.post",new b("add"),{click:()=>new uA})),this.tabs?this.tabs.on("select",(e=>{[this.globalPostList,this.followingPostList,this.keyHeldPostList].forEach((e=>e.hide())),"global"===e?this.globalPostList.show():"following"===e?this.followingPostList.show():"held"===e&&this.keyHeldPostList.show()})).init():this.globalPostList.show()}close(){this.container.delete(),super.close()}}var dA;!function(e){e[e.BUY_KEY=0]="BUY_KEY",e[e.SELL_KEY=1]="SELL_KEY",e[e.FOLLOW=2]="FOLLOW",e[e.POST_LIKE=3]="POST_LIKE",e[e.REPOST=4]="REPOST",e[e.POST_COMMENT=5]="POST_COMMENT",e[e.POST_TAG=6]="POST_TAG"}(dA||(dA={}));class fA extends c{constructor(e,t,n){super(".notification-list-item"),this.append(m(".triggerer-profile-image",{style:{backgroundImage:`url(${t.profile_image})`},click:e=>{e.stopPropagation(),f.go(`/${t.x_username}`)}})),e.type===dA.BUY_KEY?this.addClass("buy-key").append(m("main",m("header",m("b",t.display_name)," purchased "+e.amount+" ice(s)"),m(".date",Wr()(e.created_at).fromNow(!0)))):e.type===dA.SELL_KEY?this.addClass("sell-key").append(m("main",m("header",m("b",t.display_name)," sold "+e.amount+" ice(s)"),m(".date",Wr()(e.created_at).fromNow(!0)))):e.type===dA.FOLLOW?this.addClass("follow").append(m("main",m("header",m("b",t.display_name)," started following you"),m(".date",Wr()(e.created_at).fromNow(!0)))):e.type===dA.POST_LIKE?this.addClass("post-like").append(m("main",m("header",m("b",t.display_name)," liked your post"),m("p",n?.message),m(".date",Wr()(e.created_at).fromNow(!0)))).onDom("click",(()=>f.go(`/post/${n?.id}`))):e.type===dA.REPOST?this.addClass("repost").append(m("main",m("header",m("b",t.display_name)," reposted your post"),m("p",n?.message),m(".date",Wr()(e.created_at).fromNow(!0)))).onDom("click",(()=>f.go(`/post/${n?.id}`))):e.type===dA.POST_COMMENT?this.addClass("post-comment").append(m("main",m("header",m("b",t.display_name)," commented on your post"),m("p",n?.message),m(".date",Wr()(e.created_at).fromNow(!0)))).onDom("click",(()=>f.go(`/post/${n?.id}`))):e.type===dA.POST_TAG&&this.addClass("post-tag").append(m("main",m("header",m("b",t.display_name)," tagged you in a post"),m("p",n?.message),m(".date",Wr()(e.created_at).fromNow(!0)))).onDom("click",(()=>f.go(`/post/${n?.id}`)))}}class pA extends c{userId;store=new r("notification-list");isContentFromCache=!0;emptyMessageDisplay;channel;checkNotiIsPost(e){return e.type===dA.POST_LIKE||e.type===dA.REPOST||e.type===dA.POST_COMMENT||e.type===dA.POST_TAG}constructor(e){super(".notification-list"),this.userId=e,this.showEmptyMessage();const t=this.store.get("cached-notifications"),n=this.store.get("cached-user-details")??[],s=this.store.get("cached-posts")??[];if(t)for(const e of t){const t=n.find((t=>t.user_id===e.triggered_by));if(this.checkNotiIsPost(e)){const n=s.find((t=>t.id===e.source_id));this.addNotification(e,t,n)}else this.addNotification(e,t)}this.fetchNotifications(),this.channel=Dr.client.channel("notification-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:"user_id=eq."+e},(async e=>{const t=this.store.get("cached-notifications")??[];t.push(e.new),this.store.set("cached-notifications",t,!0);const n=this.store.get("cached-user-details")??[];let s=n.find((t=>t.user_id===e.new.triggered_by));s||(s=await Fw.fetchById(e.new.triggered_by)),n.push(s),this.store.set("cached-user-details",n,!0);const r=this.store.get("cached-posts")??[];let i=r.find((t=>t.id===e.new.source_id));!i&&this.checkNotiIsPost(e.new)&&(i=await sA.fetchPost(e.new.source_id)),i&&(r.push(i),this.store.set("cached-posts",r,!0)),this.addNotification(e.new,s,i)})).subscribe()}showEmptyMessage(){this.emptyMessageDisplay?.delete(),this.emptyMessageDisplay=m("p.empty-message","No notifications yet"),this.emptyMessageDisplay.on("delete",(()=>this.emptyMessageDisplay=void 0)),this.append(this.emptyMessageDisplay)}addNotification(e,t,n){this.emptyMessageDisplay?.delete(),this.append(new fA(e,t,n))}async fetchNotifications(){const{data:e,error:t}=await Dr.client.from("notifications").select().eq("user_id",this.userId).order("created_at",{ascending:!1});if(t)throw t;const n=e.map((e=>e.triggered_by)),{data:s,error:r}=await Dr.client.from("user_details").select().in("user_id",n);if(r)throw r;const i=e.filter((e=>this.checkNotiIsPost(e))).map((e=>e.source_id)),{data:a,error:o}=await Dr.client.from("posts").select().in("id",i);if(o)throw o;if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-notifications",e,!0),this.store.set("cached-user-details",s,!0),this.store.set("cached-posts",a,!0),await this.fetchUsers(e),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e){const e=s.find((e=>e.user_id===t.triggered_by));if(this.checkNotiIsPost(t)){const n=a.find((e=>e.id===t.source_id));this.addNotification(t,e,n)}else this.addNotification(t,e)}}async fetchUsers(e){const t=[];for(const n of e)t.includes(n.user_id)||t.push(n.user_id),t.includes(n.triggered_by)||t.push(n.triggered_by);const n=await Fw.fetchByIds(t);Qb.cacheMultiple(n)}delete(){this.channel.unsubscribe(),super.delete()}}class gA extends Gr{container;constructor(e){super(),iv.append(this.container=m(".notifications-view")),this.render(),this.container.onDelegate(Nw,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("h1","Notifications")),Nw.userId?this.container.append(new pA(Nw.userId)):this.container.append(new Gv)}close(){this.container.delete(),super.close()}}class mA extends aA{postId;store;isContentFromCache=!0;channel;constructor(e){super(".post-comment-list","No comments yet"),this.postId=e,this.store=new r(`post-${e}-comment-list`);const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id));this.channel=Dr.client.channel(`post-${e}-comment-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"post_req=eq."+e},(t=>{const n=this.store.get(`post-${e}-cached-posts`)??[];n.push(t.new),this.store.set(`post-${e}-cached-posts`,n,!0),this.addPost(t.new,!1,!1)})).subscribe()}async fetchContent(){const e=(await sA.fetchComments(this.postId,this.lastFetchedPostId)).reverse();tA.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id;const t=e.map((e=>e.id)),n=Nw.userId?await sA.checkMultipleRepost(t,Nw.userId):[],s=Nw.userId?await sA.checkMultipleLike(t,Nw.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",e,!0),this.store.set("cached-reposted-post-ids",n,!0),this.store.set("cached-liked-post-ids",s,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addPost(t,n.includes(t.id),s.includes(t.id))}delete(){this.channel.unsubscribe(),super.delete()}}class yA extends Gr{container;postContainer;commentContainer;commentTextarea;uploadInput;uploadButton;commentButton;repostCountDisplay;likeCountDisplay;post;uploadedFile;reposted=!1;liked=!1;constructor(e){super(),iv.append(this.container=m(".post-view",this.postContainer=m(".post-container"),m(".form-wrapper",m(".signed-user",{style:{backgroundImage:`url(${Nw.avatarUrl})`}}),m(".form",m("main",this.commentTextarea=m("textarea",{placeholder:"What's on your mind?"})),m("footer",this.uploadInput=m("input.upload",{type:"file",accept:"image/*",change:e=>{const t=e.target.files?.[0];t&&this.upload(t)}}),this.uploadButton=m("button.icon-button",new b("image"),{click:()=>this.uploadInput.domElement.click()}),this.commentButton=new v({tag:".post-button",click:()=>this.postComment(),title:"Post"})))),this.commentContainer=m(".comment-container"))),this.renderPost(parseInt(e.postId)),this.checkSigned(),this.container.onDelegate(Nw,"userFetched",(()=>this.checkSigned()))}checkSigned(){Nw.signed&&this.container.addClass("signed"),this.post?.author===Nw.userId&&this.container.addClass("owned")}changeParams(e,t){this.renderPost(parseInt(e.postId))}renderPost(e){this.container.offDelegate(tA),this.post=tA.getAndRefresh(e),this.render(),this.container.onDelegate(tA,"update",(e=>{this.post&&e.id===this.post.id&&(this.post=e,this.render())})),this.checkRepost(),this.checkLike()}async checkRepost(){this.post&&Nw.userId&&await sA.checkRepost(this.post.id,Nw.userId)?(this.reposted=!0,this.container.addClass("reposted")):(this.reposted=!1,this.container.deleteClass("reposted"))}async checkLike(){this.post&&Nw.userId&&await sA.checkLike(this.post.id,Nw.userId)?(this.liked=!0,this.container.addClass("liked")):(this.liked=!1,this.container.deleteClass("liked"))}render(){this.postContainer.empty().append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","Post"))),this.commentContainer.empty(),this.post?(this.postContainer.append(m("main",m("header",m(".author-profile-image",{style:{backgroundImage:`url(${this.post.author_avatar_url})`},click:()=>f.go(`/${this.post?.author_x_username}`)}),m(".author",m(".name",this.post.author_name,{click:()=>f.go(`/${this.post?.author_x_username}`)}),this.post.author_x_username?m(".x-username",`@${this.post.author_x_username}`,{click:()=>f.go(`/${this.post?.author_x_username}`)}):void 0),m("button.owner-menu",new b("more_vert"),{click:(e,t)=>{e.stopPropagation();const n=t.rect;new y({left:n.right-160,top:n.top,items:[{title:"Delete",click:()=>{new C({title:"Delete Post",message:"Are you sure you want to delete this post?",confirmTitle:"Delete",loadingTitle:"Deleting..."},(()=>{this.post&&sA.deletePost(this.post.id)}))}}]})}})),m("p.message",this.post.message),this.post.rich?this.getRich(this.post.rich):void 0,m(".actions",m("button.comment",new b("comment"),String(this.post.comment_count),{click:()=>{this.post&&new rA(this.post)}}),m("button.repost",new b("repeat"),this.repostCountDisplay=m("span",String(this.post.repost_count)),{click:()=>{this.post&&(this.reposted?(sA.unrepost(this.post.id),this.post.repost_count-=1,this.repostCountDisplay.text=String(this.post.repost_count),this.reposted=!1,this.container.deleteClass("reposted")):(sA.repost(this.post.id),this.post.repost_count+=1,this.repostCountDisplay.text=String(this.post.repost_count),this.reposted=!0,this.container.addClass("reposted")))}}),m("button.like",new b("favorite_border"),this.likeCountDisplay=m("span",String(this.post.like_count)),{click:()=>{this.post&&(this.liked?(sA.unlike(this.post.id),this.post.like_count-=1,this.likeCountDisplay.text=String(this.post.like_count),this.liked=!1,this.container.deleteClass("liked")):(sA.like(this.post.id),this.post.like_count+=1,this.likeCountDisplay.text=String(this.post.like_count),this.liked=!0,this.container.addClass("liked")))}})))),this.commentContainer.append(new mA(this.post.id).show())):this.postContainer.append(m("main",m("p.empty-message","Post not found")))}getRich(e){if(e.files)return m(".files",...e.files.map((e=>m(".file",e.thumbnailUrl?m(".image-container",m("a",m("img",{src:e.thumbnailUrl}),{href:e.url,target:"_blank",click:e=>e.stopPropagation()})):void 0))))}async upload(e){this.uploadButton.domElement.disabled=!0,this.uploadButton.addClass("loading"),this.uploadedFile=await sA.upload(e),this.uploadButton.empty().append(m("img",{src:this.uploadedFile.thumbnailUrl??this.uploadedFile.url})),this.uploadInput.domElement.value="",this.uploadButton.domElement.disabled=!1,this.uploadButton.deleteClass("loading")}async postComment(){if(this.post){this.commentButton.disable().text="Posting...";try{await sA.comment(this.post.id,this.commentTextarea.domElement.value,this.uploadedFile),new k({message:"Your post has been successfully published."}),this.commentTextarea.domElement.value="",this.uploadButton.empty().append(new b("image"))}catch(e){console.error(e)}this.commentButton.enable().text="Post"}}close(){this.container.delete(),super.close()}}class bA extends Gr{container;constructor(e){super(),iv.append(this.container=m(".settings-view")),this.render(),this.container.onDelegate(Nw,"userFetched",(()=>this.render()))}render(){this.container.empty().append(m("h1","Settings"),m("main",m("section.x"),m("section.actions",Nw.signed?m("section.link-wallet",m("h2","Link Wallet"),Nw.walletLinked?m("p.linked","Linked: ",m("a",Nw.walletAddress,{href:`https://snowtrace.io/address/${Nw.walletAddress}`,target:"_blank"})):m("p","You can link your wallet to use Igloo."),m("button","Link Wallet",{click:()=>Nw.linkWallet()})):void 0,Nw.signed?m("section.logout",m("h2","Log Out"),m("p","You can log out from this device."),m("button","Log Out",{click:()=>Nw.signOut()})):m("section.login",m("h2","Login"),m("p","You can login to this device."),m("button","Login with ",{click:()=>Nw.signIn()})))))}close(){this.container.delete(),super.close()}}class wA extends Gr{container;xUsername;constructor(e){super(),iv.append(this.container=m(".followers-view")),this.xUsername=e.xUsername,this.render()}render(){this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)))}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class vA extends Gr{container;xUsername;constructor(e){super(),iv.append(this.container=m(".following-view")),this.xUsername=e.xUsername,this.render()}render(){this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)))}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class AA extends Gr{container;xUsername;constructor(e){super(),iv.append(this.container=m(".holders-view")),this.xUsername=e.xUsername,this.render()}render(){this.container.append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1","@"+this.xUsername)))}changeParams(e,t){this.xUsername=e.xUsername,this.render()}close(){this.container.delete(),super.close()}}class EA extends aA{userId;store;isContentFromCache=!0;channel;constructor(e){super(".user-post-list","No comments from this user yet"),this.userId=e,this.store=new r(`user-${e}-comment-post-list`);const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id));this.channel=Dr.client.channel(`user-${e}-comment-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:`author=eq.${e}`},(e=>{if(!e.new.post_ref)return;const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}async fetchContent(){const e=(await sA.fetchUserCommentPosts(this.userId,this.lastFetchedPostId)).reverse();tA.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id;const t=e.map((e=>e.id)),n=Nw.userId?await sA.checkMultipleRepost(t,Nw.userId):[],s=Nw.userId?await sA.checkMultipleLike(t,Nw.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",e,!0),this.store.set("cached-reposted-post-ids",n,!0),this.store.set("cached-liked-post-ids",s,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addPost(t,n.includes(t.id),s.includes(t.id))}delete(){this.channel.unsubscribe(),super.delete()}}class kA extends aA{userId;store;isContentFromCache=!0;lastLikedAt="-infinity";constructor(e){super(".user-post-list","No likes from this user yet"),this.userId=e,this.store=new r(`user-${e}-liked-post-list`);const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id))}async fetchContent(){const e=(await sA.fetchUserLikedPosts(this.userId,this.lastLikedAt)).reverse(),t=e.map((e=>e.post));tA.cachePosts(t),this.lastLikedAt=e[e.length-1]?.likedAt??"-infinity";const n=t.map((e=>e.id)),s=Nw.userId?await sA.checkMultipleRepost(n,Nw.userId):[],r=Nw.userId?await sA.checkMultipleLike(n,Nw.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",t,!0),this.store.set("cached-reposted-post-ids",s,!0),this.store.set("cached-liked-post-ids",r,!0),this.deleted||this.empty()),!this.deleted)if(0===t.length)this.showEmptyMessage();else for(const e of t)this.addPost(e,s.includes(e.id),r.includes(e.id))}}class _A extends aA{userId;store;isContentFromCache=!0;channel;constructor(e){super(".user-post-list","No posts from this user yet"),this.userId=e,this.store=new r(`user-${e}-post-list`);const t=this.store.get("cached-posts"),n=this.store.get("cached-reposted-post-ids")??[],s=this.store.get("cached-liked-post-ids")??[];if(t)for(const e of t)this.addPost(e,n.includes(e.id),s.includes(e.id));this.channel=Dr.client.channel(`user-${e}-post-changes`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:`author=eq.${e}`},(e=>{if(e.new.post_ref)return;const t=this.store.get("cached-posts")??[];t.push(e.new),this.store.set("cached-posts",t,!0),this.addPost(e.new,!1,!1)})).subscribe()}async fetchContent(){const e=(await sA.fetchUserPosts(this.userId,this.lastFetchedPostId)).reverse();tA.cachePosts(e),this.lastFetchedPostId=e[e.length-1]?.id;const t=e.map((e=>e.id)),n=Nw.userId?await sA.checkMultipleRepost(t,Nw.userId):[],s=Nw.userId?await sA.checkMultipleLike(t,Nw.userId):[];if(this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-posts",e,!0),this.store.set("cached-reposted-post-ids",n,!0),this.store.set("cached-liked-post-ids",s,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addPost(t,n.includes(t.id),s.includes(t.id))}delete(){this.channel.unsubscribe(),super.delete()}}const PA=new class extends a{store=new r("cached-total-subject-key-balances");constructor(){super(),this.addAllowedEvents("update")}init(){Dr.client.channel("total-subject-key-balances-changes").on("postgres_changes",{event:"*",schema:"public",table:"total_subject_key_balances"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.wallet_address)})).subscribe()}cache(e,t){t!==this.get(e)&&(this.store.set(e,t,!0),this.fireEvent("update",{walletAddress:e,totalKeyBalance:t}))}get(e){const t=this.store.get(e);return t||0}async refresh(e){const{data:t,error:n}=await Dr.client.from("total_subject_key_balances").select("*, total_key_balance::text").eq("wallet_address",e);if(n)throw n;const s=t?.[0];s&&s.total_key_balance!==this.get(e)&&this.cache(e,s.total_key_balance)}getAndRefresh(e){const t=this.get(e);return this.refresh(e).catch((e=>console.error("Error refreshing total subject key balance details:",e))),t}};class CA extends ev{userId;store;isContentFromCache=!0;lastFetchedFollowedAt;constructor(e){super(".follower-list","No followers yet"),this.userId=e,this.store=new r(`user-${e}-follower-list`);const t=this.store.get("cached-followers");if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await Fw.fetchFollowers(this.userId,this.lastFetchedFollowedAt);if(Qb.cacheMultiple(e.userDetailsSet),this.lastFetchedFollowedAt=e.lastFetchedFollowedAt,this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-followers",e.userDetailsSet,!0),this.deleted||this.empty()),!this.deleted)if(0===e.userDetailsSet.length)this.showEmptyMessage();else for(const t of e.userDetailsSet)this.addUserDetails(t)}}class xA extends ev{userId;store;isContentFromCache=!0;lastFetchedFollowedAt;constructor(e){super(".following-list","Not following anyone yet"),this.userId=e,this.store=new r(`user-${e}-following-list`);const t=this.store.get("cached-following");if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await Fw.fetchFollowing(this.userId,this.lastFetchedFollowedAt);if(Qb.cacheMultiple(e.userDetailsSet),this.lastFetchedFollowedAt=e.lastFetchedFollowedAt,this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-following",e.userDetailsSet,!0),this.deleted||this.empty()),!this.deleted)if(0===e.userDetailsSet.length)this.showEmptyMessage();else for(const t of e.userDetailsSet)this.addUserDetails(t)}}class SA extends ev{walletAddress;store;isContentFromCache=!0;constructor(e){super(".holder-list","No holders yet"),this.walletAddress=e,this.store=new r(`subject-${e}-holder-list`);const t=this.store.get("cached-holders");if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await Fw.fetchHolders(this.walletAddress);if(Qb.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-holders",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}class IA extends ev{walletAddress;store;isContentFromCache=!0;constructor(e){super(".holding-list","No holdings"),this.walletAddress=e,this.store=new r(`subject-${e}-holding-list`);const t=this.store.get("cached-holdings");if(t)for(const e of t)this.addUserDetails(e)}async fetchContent(){const e=await Fw.fetchHoldings(this.walletAddress);if(Qb.cacheMultiple(e),this.isContentFromCache&&(this.isContentFromCache=!1,this.store.set("cached-holdings",e,!0),this.deleted||this.empty()),!this.deleted)if(0===e.length)this.showEmptyMessage();else for(const t of e)this.addUserDetails(t)}}const TA=new class extends a{store=new r("cached-subject-key-balances");constructor(){super(),this.addAllowedEvents("update")}init(){Dr.client.channel("subject-key-balances-changes").on("postgres_changes",{event:"*",schema:"public",table:"subject_key_holders"},(e=>{"INSERT"!==e.eventType&&"UPDATE"!==e.eventType||this.refresh(e.new.subject,e.new.wallet_address)})).subscribe()}cache(e,t,n){n!==this.get(e,t)&&(this.store.set(`${e}-${t}`,n,!0),this.fireEvent("update",{subject:e,walletAddress:t,balance:n}))}get(e,t){try{const n=this.store.get(`${e}-${t}`);return n||0}catch(e){return 0}}async refresh(e,t){const{data:n,error:s}=await Dr.client.from("subject_key_holders").select("*, last_fetched_balance::text").eq("subject",e).eq("wallet_address",t);if(s)throw s;const r=n?.[0];r&&r.last_fetched_balance!==this.get(e,t)&&this.cache(e,t,r.last_fetched_balance)}getAndRefresh(e,t){const n=this.get(e,t);return this.refresh(e,t).catch((e=>console.error("Error refreshing subject key balance details:",e))),n}increaseKeyBalanceInstantly(e,t){const n=this.get(t,e);this.cache(t,e,n+1)}decreaseKeyBalanceInstantly(e,t){const n=this.get(t,e);this.cache(t,e,n-1)}};const OA=new class{async buyKey(e,t){await Kv.buyKeys(e,1n,t),Dr.client.functions.invoke("track-subject-events"),Dr.client.functions.invoke("track-subject-price-and-balance",{body:{subjects:[e]}}),TA.increaseKeyBalanceInstantly(Nw.userId,e)}async sellKey(e){await Kv.sellKeys(e,1n),Dr.client.functions.invoke("track-subject-events"),Dr.client.functions.invoke("track-subject-price-and-balance",{body:{subjects:[e]}}),TA.decreaseKeyBalanceInstantly(Nw.userId,e)}};class NA extends w{userDetails;content;priceDisplay;totalPriceDisplay;buyButton;constructor(e){super({barrierDismissible:!0}),this.userDetails=e,this.append(this.content=new g(".popup.buy-subject-key-popup",m("header",m("h1",`Buy 1 ${e.display_name}'s Ice`)),m("main",m(".owner-profile-image-wrapper",m(".owner-profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m(".price-info",m(".price",m("label","Price"),m(".value",this.priceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))),m(".price",m("label","Total (including fee)"),m(".value",this.totalPriceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"}),this.buyButton=new v({type:E.Contained,tag:".buy-token-button",click:()=>this.buyKey(),title:`Buy 1 ${e.display_name}'s Ice`})))),this.fetchPrice(),this.fetchTotalPrice()}async fetchPrice(){const e=await Kv.getBuyPrice(this.userDetails.wallet_address,1n);this.priceDisplay.text=`${Xw(e)}`}async fetchTotalPrice(){const e=await Kv.getBuyPriceAfterFee(this.userDetails.wallet_address,1n);this.totalPriceDisplay.text=`${Xw(e)}`}async buyKey(){this.buyButton.disable().title="Buying...";try{const e=this.userDetails.wallet_address;if(Iw.connected||await Iw.connect(),Iw.address!==Nw.walletAddress)throw new x({title:"Wrong wallet",message:"You are connected to the wrong wallet. Linked wallet address: "+Nw.walletAddress}),new Error("Wrong wallet");const[t,n]=await Promise.all([Iw.getBalance(),Kv.getBuyPriceAfterFee(e,1n)]);if(t<n)throw new x({title:"Insufficient balance",message:`You need at least ${Xw(n)} AVAX to buy this ice.`}),new Error("Insufficient balance");await OA.buyKey(e,n),this.delete()}catch(e){console.error(e),this.buyButton.enable().title=`Buy 1 ${this.userDetails.display_name}'s Ice`}}}class jA extends w{userDetails;content;priceDisplay;totalPriceDisplay;sellButton;constructor(e){super({barrierDismissible:!0}),this.userDetails=e,this.append(this.content=new g(".popup.sell-subject-key-popup",m("header",m("h1",`Sell 1 ${e.display_name}'s Ice`)),m("main",m(".owner-profile-image-wrapper",m(".owner-profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m(".price-info",m(".price",m("label","Price"),m(".value",this.priceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))),m(".price",m("label","Total (including fee)"),m(".value",this.totalPriceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"}),this.sellButton=new v({type:E.Contained,tag:".sell-token-button",click:()=>this.sellKey(),title:`Sell 1 ${e.display_name}'s Ice`})))),this.fetchPrice(),this.fetchTotalPrice()}async fetchPrice(){const e=await Kv.getSellPrice(this.userDetails.wallet_address,1n);this.priceDisplay.text=`${Xw(e)}`}async fetchTotalPrice(){const e=await Kv.getSellPriceAfterFee(this.userDetails.wallet_address,1n);this.totalPriceDisplay.text=`${Xw(e)}`}async sellKey(){this.sellButton.disable().title="Selling...";try{const e=this.userDetails.wallet_address;if(Iw.connected||await Iw.connect(),!Iw.address||Iw.address!==Nw.walletAddress)throw new x({title:"Wrong wallet",message:"You are connected to the wrong wallet. Linked wallet address: "+Nw.walletAddress}),new Error("Wrong wallet");if(await Kv.getKeysBalance(e,Iw.address)<1n)throw new x({title:"Insufficient balance",message:"You need at least 1 ice to sell."}),new Error("Insufficient balance");await OA.sellKey(e),this.delete()}catch(e){console.error(e),this.sellButton.enable().title=`Sell 1 ${this.userDetails.display_name}'s Ice`}}}class UA extends w{userDetails;content;priceDisplay;constructor(e){super({barrierDismissible:!0}),this.userDetails=e,this.append(this.content=new g(".popup.trade-subject-key-popup",m("header",m("h1",`Buy 1 ${e.display_name}'s Ice`)),m("main",m(".owner-profile-image-wrapper",m(".owner-profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m(".price-info",m(".price",m("label","Price"),m(".value",this.priceDisplay=m("span","..."),m("img.avax-symbol",{src:"/images/avax-symbol.svg"})))),new v({type:E.Contained,tag:".buy-key",click:()=>{new NA(e),this.delete()},title:`Buy 1 ${e.display_name}'s Ice`}),new v({type:E.Contained,tag:".sell-key",click:()=>{new jA(e),this.delete()},title:`Sell 1 ${e.display_name}'s Ice`})),m("footer",new v({type:E.Text,tag:".cancel-button",click:()=>this.delete(),title:"Cancel"})))),this.fetchPrice()}async fetchPrice(){const e=await Kv.getBuyPrice(this.userDetails.wallet_address,1n);this.priceDisplay.text=`${Xw(e)}`}}class LA extends c{userDetails;settingsButton;followButton;constructor(e,t,n){super(".user-profile-display"),this.userDetails=e,this.append(m(".profile",m(".profile-image-wrapper",m(".profile-image",{style:{backgroundImage:`url(${e.profile_image?.replace("_normal","")})`}})),m("h2",e.display_name),m("h3",m("a","@"+e.x_username,{href:`https://x.com/${e.x_username}`,target:"_blank"})),m(".socials",m("a",m("img.x-symbol",{src:"/images/x-symbol.svg"}),{href:`https://x.com/${e.x_username}`,target:"_blank"}))),m(".trading-metrics",m("section.trading-volume",m(".icon-container",new b("analytics")),m(".metric",m("h3","Volume"),m(".value",t?Xw(t.total_trading_key_volume):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"})))),m("section.earned",m(".icon-container",new b("savings")),m(".metric",m("h3","Fees Earned"),m(".value",e?Xw(e.total_earned_trading_fees):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"})))),m("section.price",m(".icon-container",new b("sell")),m(".metric",m("h3","Price"),m(".value",t?Xw(t.last_fetched_key_price):"0",m("img.avax-symbol",{src:"/images/avax-symbol.svg"}))))),m(".action-buttons",this.followButton=m("button.follow","Follow",{click:()=>{Nw.userId?qb.isFollowing(e.user_id)?qb.unfollow(e.user_id):qb.follow(e.user_id):new C({title:"Login Required",message:"You must be logged in to follow users.",confirmTitle:"Login"},(()=>Nw.signIn()))}}),m("button.buy-key"+(e.wallet_address?"":".disabled"),"Buy Ice",{click:()=>{Nw.userId?Nw.walletLinked?e.wallet_address?new NA(e):new x({title:"No wallet address",message:"This user has not linked a wallet."}):new C({title:"Wallet Required",message:"You must link a wallet to buy ices.",confirmTitle:"Link Wallet"},(()=>Nw.linkWallet())):new C({title:"Login Required",message:"You must be logged in to buy ices.",confirmTitle:"Login"},(()=>Nw.signIn()))}}),m("button.trade-key"+(e.wallet_address?"":".disabled"),"Trade Ice",{click:()=>{Nw.userId?Nw.walletLinked?e.wallet_address?new UA(e):new x({title:"No wallet address",message:"This user has not linked a wallet."}):new C({title:"Wallet Required",message:"You must link a wallet to buy ices.",confirmTitle:"Link Wallet"},(()=>Nw.linkWallet())):new C({title:"Login Required",message:"You must be logged in to buy ices.",confirmTitle:"Login"},(()=>Nw.signIn()))}}),this.settingsButton=m("button.settings","Settings",{click:()=>f.go("/settings")})),m(".social-metrics",m("section.holdings",m("a",m("span.value",String(n)),m("span","Holdings"),{click:()=>f.go(`/${e.x_username}/holdings`)})),m("section.holders",m("a",m("span.value",t?String(t.key_holder_count):"0"),m("span","Holders"),{click:()=>f.go(`/${e.x_username}/holders`)})),m("section.following",m("a",m("span.value",String(e.following_count)),m("span","Following"),{click:()=>f.go(`/${e.x_username}/following`)})),m("section.followers",m("a",m("span.value",String(e.follower_count)),m("span","Followers"),{click:()=>f.go(`/${e.x_username}/followers`)})))),this.checkSignedUser(),this.onDelegate(Nw,"userFetched",(()=>{this.checkSignedUser(),this.checkHolder()})),this.checkFollowing(),this.onDelegate(qb,["follow","unfollow"],(t=>{t===e.user_id&&this.checkFollowing()})),this.checkHolder(),this.onDelegate(TA,"update",(t=>{t.subject===e.wallet_address&&t.walletAddress===Nw.walletAddress&&this.checkHolder()}))}checkSignedUser(){Nw.userId===this.userDetails.user_id?this.followButton.addClass("hidden"):this.settingsButton.addClass("hidden")}checkFollowing(){qb.isFollowing(this.userDetails.user_id)?this.followButton.text="Unfollow":this.followButton.text="Follow"}checkHolder(){if(this.userDetails.wallet_address&&Nw.walletAddress){TA.getAndRefresh(this.userDetails.wallet_address,Nw.walletAddress)>0?this.addClass("holder"):this.deleteClass("holder")}}}class BA extends Gr{container;xUsername;userDetails;subjectDetails;holdingCount=0;userConnectionTabs;holdingList;holderList;followingList;followerList;postTabs;userPostList;userCommentPostList;userLikedPostList;constructor(e){super(),iv.append(this.container=m(".user-view")),this.xUsername=e.xUsername,this.render(),this.container.onDelegate(Qb,"update",(e=>{e.x_username===this.xUsername&&(this.userDetails=e,this.render())})),this.container.onDelegate(Mw,"update",(e=>{e.subject===this.userDetails.wallet_address&&(this.subjectDetails=e,this.render())})),this.container.onDelegate(PA,"update",(({walletAddress:e,totalKeyBalance:t})=>{e===this.userDetails.wallet_address&&(this.holdingCount=t,this.render())})),this.trackPriceAndBalance()}render(){this.userDetails=Qb.getAndRefreshByXUsername(this.xUsername),this.subjectDetails=this.userDetails.wallet_address?Mw.getAndRefresh(this.userDetails.wallet_address):void 0,this.holdingCount=this.userDetails.wallet_address?PA.getAndRefresh(this.userDetails.wallet_address):0,this.container.empty().append(m("header",m("button",new b("arrow_back"),{click:()=>history.back()}),m("h1",`${this.userDetails.display_name}'s Igloo`)),m("section.profile",new LA(this.userDetails,this.subjectDetails,this.holdingCount),m(".user-connections",this.userConnectionTabs=new I("user-connections",(()=>{const e=this.userDetails.wallet_address?[{id:"holdings",label:[m("span.value",String(this.holdingCount)),"Holdings"]},{id:"holders",label:[m("span.value",this.subjectDetails?String(this.subjectDetails.key_holder_count):"0"),"Holders"]}]:[];return e.push({id:"following",label:[m("span.value",String(this.userDetails.following_count)),"Following"]},{id:"followers",label:[m("span.value",String(this.userDetails.follower_count)),"Followers"]}),e})()),this.userDetails.wallet_address?this.holdingList=new IA(this.userDetails.wallet_address):void 0,this.userDetails.wallet_address?this.holderList=new SA(this.userDetails.wallet_address):void 0,this.followingList=new xA(this.userDetails.user_id),this.followerList=new CA(this.userDetails.user_id))),this.postTabs=new I("user-posts",[{id:"user-posts",label:"Posts"},{id:"user-replies",label:"Replies"},{id:"user-likes",label:"Likes"}]),this.userPostList=new _A(this.userDetails.user_id),this.userCommentPostList=new EA(this.userDetails.user_id),this.userLikedPostList=new kA(this.userDetails.user_id)),this.userConnectionTabs.on("select",(e=>{[this.holdingList,this.holderList,this.followingList,this.followerList].forEach((e=>e?.hide())),"holdings"===e?this.holdingList?.show():"holders"===e?this.holderList?.show():"following"===e?this.followingList.show():"followers"===e&&this.followerList.show()})).init(),this.postTabs.on("select",(e=>{[this.userPostList,this.userCommentPostList,this.userLikedPostList].forEach((e=>e.hide())),"user-posts"===e?this.userPostList.show():"user-replies"===e?this.userCommentPostList.show():"user-likes"===e&&this.userLikedPostList.show()})).init()}changeParams(e,t){this.xUsername=e.xUsername,this.render(),this.trackPriceAndBalance()}trackPriceAndBalance(){this.userDetails.wallet_address&&Dr.client.functions.invoke("track-subject-price-and-balance",{body:{subjects:[this.userDetails.wallet_address]}})}close(){this.container.delete(),super.close()}}async function RA(e){_p.dev=e.dev,_p.avaxRpc=e.avaxRpc,_p.avaxChainId=e.avaxChainId,sessionStorage.__spa_path&&(f.goNoHistory(sessionStorage.__spa_path),sessionStorage.removeItem("__spa_path")),Dr.connect(e.supabaseUrl,e.supabaseAnonKey),[Qb,Mw,tA].forEach((e=>e.init())),Iw.init(e.walletConnectProjectId),Tw.init(e.messageForWalletLinking),Kv.init(e.iglooSubjectAddress);const t=new _(m("img",{src:"/images/igloo-character.png"}));await Promise.all([Nw.fetchUserOnInit(),En.loadYAMLs({en:["/locales/en.yml"]}),Pp.init()]),t.delete(),f.route("**",iv),f.route("",hA),f.route(["chats","chats/{topic}"],Hv),f.route("chats/0x{subject}",Pv),f.route(["chats","chats/{topic}"],Ov,["chats/0x{subject}"]),f.route("explore",Yv),f.route("search",Xv),f.route("notifications",gA),f.route("settings",bA),f.route("post/{postId}",yA),f.route("{xUsername}",BA,["chats","explore","search","notifications","settings","post/{postId}","{xUsername}/holders","{xUsername}/following","{xUsername}/followers"]),f.route("{xUsername}/holders",AA,["post/{postId}"]),f.route("{xUsername}/following",vA,["post/{postId}"]),f.route("{xUsername}/followers",wA,["post/{postId}"])}Wr().extend(qr())},1831:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var s=n(2765);await(0,s.Z)({dev:!1,supabaseUrl:"https://gslqborrkoraysvsopjv.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdzbHFib3Jya29yYXlzdnNvcGp2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTgwMzM0MjksImV4cCI6MjAxMzYwOTQyOX0.A1pCWncoOjXlpT73mH5tFJjpbBEuPMVGBXmVIig_jhQ",walletConnectProjectId:"53ce7f51ed886a719bf634b25061f424",messageForWalletLinking:"Link Wallet to Igloo",avaxRpc:"https://api.avax.network/ext/bc/C/rpc",avaxChainId:43114,iglooSubjectAddress:"0xa6940B0A43B4832dbfD6Db8a57bb441B905D6dAC"}),t()}catch(e){t(e)}}),1)},5856:()=>{},5883:()=>{},9015:(e,t,n)=>{"use strict";n.d(t,{AccountCtrl:()=>_,Id:()=>g,ConfigCtrl:()=>A,zv:()=>f,uA:()=>y,ExplorerCtrl:()=>G,jb:()=>q,OptionsCtrl:()=>w,AV:()=>d,ThemeCtrl:()=>Z,ToastCtrl:()=>te,WcConnectionCtrl:()=>W});var s=n(2478);const r=e=>"object"==typeof e&&null!==e,i=new WeakMap,a=new WeakSet,o=(e=Object.is,t=((e,t)=>new Proxy(e,t)),n=(e=>r(e)&&!a.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)),o=(e=>e.configurable&&e.enumerable&&e.writable),c=(e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}}),l=new WeakMap,u=((e,t,n=c)=>{const r=l.get(e);if((null==r?void 0:r[0])===t)return r[1];const o=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return(0,s.jc)(o,!0),l.set(e,[t,o]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(o,t))return;const r=Reflect.get(e,t),c={value:r,enumerable:!0,configurable:!0};if(a.has(r))(0,s.jc)(r,!1);else if(r instanceof Promise)delete c.value,c.get=()=>n(r);else if(i.has(r)){const[e,t]=i.get(r);c.value=u(e,t(),n)}Object.defineProperty(o,t,c)})),Object.preventExtensions(o)}),h=new WeakMap,d=[1,1],f=(c=>{if(!r(c))throw new Error("object required");const l=h.get(c);if(l)return l;let p=d[0];const g=new Set,m=(e,t=++d[0])=>{p!==t&&(p=t,g.forEach((n=>n(e,t))))};let y=d[1];const b=e=>(t,n)=>{const s=[...t];s[1]=[e,...s[1]],m(s,n)},w=new Map,v=e=>{var t;const n=w.get(e);n&&(w.delete(e),null==(t=n[1])||t.call(n))},A=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),E=(t,o,c,l,u)=>{if(t&&(e(o,l)||h.has(l)&&e(o,h.get(l))))return;v(c),r(l)&&(l=(0,s.o5)(l)||l);let d=l;if(l instanceof Promise)l.then((e=>{l.status="fulfilled",l.value=e,m(["resolve",[c],e])})).catch((e=>{l.status="rejected",l.reason=e,m(["reject",[c],e])}));else{!i.has(l)&&n(l)&&(d=f(l));const e=!a.has(d)&&i.get(d);e&&((e,t)=>{if(w.has(e))throw new Error("prop listener already exists");if(g.size){const n=t[3](b(e));w.set(e,[t,n])}else w.set(e,[t])})(c,e)}u(d),m(["set",[c],l,o])},k=t(A,{deleteProperty(e,t){const n=Reflect.get(e,t);v(t);const s=Reflect.deleteProperty(e,t);return s&&m(["delete",[t],n]),s},set(e,t,n,s){const r=Reflect.has(e,t),i=Reflect.get(e,t,s);return E(r,i,t,n,(n=>{Reflect.set(e,t,n,s)})),!0},defineProperty(e,t,n){if(o(n)){const s=Reflect.getOwnPropertyDescriptor(e,t);if(!s||o(s))return E(!!s&&"value"in s,null==s?void 0:s.value,t,n.value,(s=>{Reflect.defineProperty(e,t,{...n,value:s})})),!0}return Reflect.defineProperty(e,t,n)}});h.set(c,k);const _=[A,(e=++d[1])=>(y===e||g.size||(y=e,w.forEach((([t])=>{const n=t[1](e);n>p&&(p=n)}))),p),u,e=>{g.add(e),1===g.size&&w.forEach((([e,t],n)=>{if(t)throw new Error("remove already exists");const s=e[3](b(n));w.set(n,[e,s])}));return()=>{g.delete(e),0===g.size&&w.forEach((([e,t],n)=>{t&&(t(),w.set(n,[e]))}))}}];return i.set(k,_),Reflect.ownKeys(c).forEach((e=>{const t=Object.getOwnPropertyDescriptor(c,e);"value"in t&&(k[e]=c[e],delete t.value,delete t.writable),Object.defineProperty(A,e,t)})),k}))=>[f,i,a,e,t,n,o,c,l,u,h,d],[c]=o();function l(e={}){return c(e)}function u(e,t,n){const s=i.get(e);let r;s||console.warn("Please use proxy object");const a=[],o=s[3];let c=!1;const l=o((e=>{a.push(e),n?t(a.splice(0)):r||(r=Promise.resolve().then((()=>{r=void 0,c&&t(a.splice(0))})))}));return c=!0,()=>{c=!1,l()}}const h=l({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),d={state:h,subscribe:e=>u(h,(()=>e(h))),push(e,t){e!==h.view&&(h.view=e,t&&(h.data=t),h.history.push(e))},reset(e){h.view=e,h.history=[e]},replace(e){h.history.length>1&&(h.history[h.history.length-1]=e,h.view=e)},goBack(){if(h.history.length>1){h.history.pop();const[e]=h.history.slice(-1);h.view=e}},setData(e){h.data=e}},f={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",W3M_VERSION:"W3M_VERSION",W3M_PREFER_INJECTED_URL_FLAG:"w3mPreferInjected",RECOMMENDED_WALLET_AMOUNT:9,isMobile:()=>typeof window<"u"&&Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)),isAndroid:()=>f.isMobile()&&navigator.userAgent.toLowerCase().includes("android"),isIos(){const e=navigator.userAgent.toLowerCase();return f.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),isArray:e=>Array.isArray(e)&&e.length>0,formatNativeUrl(e,t,n){if(f.isHttpUrl(e))return this.formatUniversalUrl(e,t,n);let s=e;s.includes("://")||(s=e.replaceAll("/","").replaceAll(":",""),s=`${s}://`),s.endsWith("/")||(s=`${s}/`),this.setWalletConnectDeepLink(s,n);return`${s}wc?uri=${encodeURIComponent(t)}`},formatUniversalUrl(e,t,n){if(!f.isHttpUrl(e))return this.formatNativeUrl(e,t,n);let s=e;s.endsWith("/")||(s=`${s}/`),this.setWalletConnectDeepLink(s,n);return`${s}wc?uri=${encodeURIComponent(t)}`},wait:async e=>new Promise((t=>{setTimeout(t,e)})),openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(f.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(f.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(f.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setWeb3ModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(f.W3M_VERSION,"2.7.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=null==(e=d.state.data)?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t},getSwitchNetworkRouterData(){var e;const t=null==(e=d.state.data)?void 0:e.SwitchNetwork;if(!t)throw new Error('Missing "SwitchNetwork" view data');return t},isPreferInjectedFlag:()=>typeof location<"u"&&new URLSearchParams(location.search).has(f.W3M_PREFER_INJECTED_URL_FLAG)};let p;const g={ethereumClient:void 0,setEthereumClient(e){p=e},client(){if(p)return p;throw new Error("ClientCtrl has no client set")}},m=l({enabled:typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),userSessionId:"",events:[],connectedWalletId:void 0}),y={state:m,subscribe:e=>u(m.events,(()=>e(function(e,t){const n=i.get(e);n||console.warn("Please use proxy object");const[s,r,a]=n;return a(s,r(),t)}(m.events[m.events.length-1])))),initialize(){m.enabled&&typeof(null==crypto?void 0:crypto.randomUUID)<"u"&&(m.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){m.connectedWalletId=e},click(e){if(m.enabled){const t={type:"CLICK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},track(e){if(m.enabled){const t={type:"TRACK",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}},view(e){if(m.enabled){const t={type:"VIEW",name:e.name,userSessionId:m.userSessionId,timestamp:Date.now(),data:e};m.events.push(t)}}},b=l({selectedChain:void 0,chains:void 0,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,isPreferInjected:!1}),w={state:b,subscribe:e=>u(b,(()=>e(b))),setChains(e){b.chains=e},getSelectedChain(){const e=g.client().getNetwork().chain;return e&&(b.selectedChain=e),b.selectedChain},setSelectedChain(e){b.selectedChain=e},setIsCustomDesktop(e){b.isCustomDesktop=e},setIsCustomMobile(e){b.isCustomMobile=e},setIsDataLoaded(e){b.isDataLoaded=e},setIsUiLoaded(e){b.isUiLoaded=e},setIsPreferInjected(e){b.isPreferInjected=e}},v=l({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,tokenContracts:void 0,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,defaultChain:void 0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),A={state:v,subscribe:e=>u(v,(()=>e(v))),setConfig(e){var t,n;y.initialize(),w.setIsCustomMobile(Boolean(null==(t=e.mobileWallets)?void 0:t.length)),w.setIsCustomDesktop(Boolean(null==(n=e.desktopWallets)?void 0:n.length)),w.setChains(g.client().chains),w.setIsPreferInjected(g.client().isInjectedProviderInstalled()&&f.isPreferInjectedFlag()),e.defaultChain&&w.setSelectedChain(e.defaultChain),f.setWeb3ModalVersionInStorage(),Object.assign(v,e)}},E={async getIdentity(e,t){const{projectId:n}=A.state,s=`https://rpc.walletconnect.com/v1/identity/${e}?chainId=${`eip155:${t}`}&projectId=${n}`;return(await fetch(s)).json()}},k=l({address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1}),_={state:k,subscribe:e=>u(k,(()=>e(k))),getAccount(){const e=g.client().getAccount();k.address=e.address,k.isConnected=e.isConnected},async fetchProfile(e,t){var n;try{k.profileLoading=!0,k.profileName=null,k.profileAvatar=null;const s=t??k.address,r=1,i=null==(n=w.state.chains)?void 0:n.find((e=>e.id===r));if(s&&i){try{const e=await E.getIdentity(s,r);k.profileName=e.name,k.profileAvatar=e.avatar}catch{const e=await g.client().fetchEnsName({address:s,chainId:r});if(k.profileName=e,e){const t=await g.client().fetchEnsAvatar({name:e,chainId:r});k.profileAvatar=t}}k.profileAvatar&&await e(k.profileAvatar)}}finally{k.profileLoading=!1}},async fetchBalance(e){try{const{chain:t}=g.client().getNetwork(),{tokenContracts:n}=A.state;let s;t&&n&&(s=n[t.id]),k.balanceLoading=!0;const r=e??k.address;if(r){const e=await g.client().fetchBalance({address:r,token:s});k.balance={amount:e.formatted,symbol:e.symbol}}}finally{k.balanceLoading=!1}},setAddress(e){k.address=e},setIsConnected(e){k.isConnected=e},resetBalance(){k.balance=void 0},resetAccount(){k.address=void 0,k.isConnected=!1,k.profileName=void 0,k.profileAvatar=void 0,k.balance=void 0}};var P=Object.defineProperty,C=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,I=(e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const T="https://explorer-api.walletconnect.com",O="w3m",N="js-2.7.1";async function j(e,t){const n=((e,t)=>{for(var n in t||(t={}))x.call(t,n)&&I(e,n,t[n]);if(C)for(var n of C(t))S.call(t,n)&&I(e,n,t[n]);return e})({sdkType:O,sdkVersion:N},t),s=new URL(e,T);return s.searchParams.append("projectId",A.state.projectId),Object.entries(n).forEach((([e,t])=>{t&&s.searchParams.append(e,String(t))})),(await fetch(s)).json()}const U={getDesktopListings:async e=>j("/w3m/v1/getDesktopListings",e),getMobileListings:async e=>j("/w3m/v1/getMobileListings",e),getInjectedListings:async e=>j("/w3m/v1/getInjectedListings",e),getAllListings:async e=>j("/w3m/v1/getAllListings",e),getWalletImageUrl:e=>`${T}/w3m/v1/getWalletImage/${e}?projectId=${A.state.projectId}&sdkType=${O}&sdkVersion=${N}`,getAssetImageUrl:e=>`${T}/w3m/v1/getAssetImage/${e}?projectId=${A.state.projectId}&sdkType=${O}&sdkVersion=${N}`};var L=Object.defineProperty,B=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,D=(e,t,n)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const F=f.isMobile(),$=l({wallets:{listings:[],total:0,page:1},injectedWallets:[],search:{listings:[],total:0,page:1},recomendedWallets:[]}),G={state:$,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=A.state;if("NONE"===e||"ALL"===t&&!e)return $.recomendedWallets;if(f.isArray(e)){const t={recommendedIds:e.join(",")},{listings:n}=await U.getAllListings(t),s=Object.values(n);s.sort(((t,n)=>e.indexOf(t.id)-e.indexOf(n.id))),$.recomendedWallets=s}else{const e=f.isArray(t),n={page:1,entries:f.RECOMMENDED_WALLET_AMOUNT,version:2,excludedIds:e?t.join(","):void 0},{listings:s}=F?await U.getMobileListings(n):await U.getDesktopListings(n);$.recomendedWallets=Object.values(s)}return $.recomendedWallets},async getWallets(e){const t=((e,t)=>{for(var n in t||(t={}))R.call(t,n)&&D(e,n,t[n]);if(B)for(var n of B(t))M.call(t,n)&&D(e,n,t[n]);return e})({},e),{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:s}=A.state,{recomendedWallets:r}=$;if("ALL"===s)return $.wallets;r.length?t.excludedIds=r.map((e=>e.id)).join(","):f.isArray(n)&&(t.excludedIds=n.join(",")),f.isArray(s)&&(t.excludedIds=[t.excludedIds,s].filter(Boolean).join(","));const{page:i,search:a}=e,{listings:o,total:c}=F?await U.getMobileListings(t):await U.getDesktopListings(t),l=Object.values(o),u=a?"search":"wallets";return $[u]={listings:[...$[u].listings,...l],total:c,page:i??1},{listings:l,total:c}},async getInjectedWallets(){const{listings:e}=await U.getInjectedListings({}),t=Object.values(e);return $.injectedWallets=t,$.injectedWallets},getWalletImageUrl:e=>U.getWalletImageUrl(e),getAssetImageUrl:e=>U.getAssetImageUrl(e),resetSearch(){$.search={listings:[],total:0,page:1}}},H=l({pairingEnabled:!1,pairingUri:"",pairingError:!1}),W={state:H,subscribe:e=>u(H,(()=>e(H))),setPairingUri(e){H.pairingUri=e},setPairingError(e){H.pairingError=e},setPairingEnabled(e){H.pairingEnabled=e}},z=l({open:!1}),q={state:z,subscribe:e=>u(z,(()=>e(z))),open:async e=>new Promise((t=>{const{isUiLoaded:n,isDataLoaded:s,isPreferInjected:r,selectedChain:i}=w.state,{isConnected:a}=_.state,{enableNetworkView:o}=A.state;if(W.setPairingEnabled(!0),a||f.removeWalletConnectDeepLink(),null!=e&&e.route)d.reset(e.route);else if(a)d.reset("Account");else if(o)d.reset("SelectNetwork");else{if(r)return g.client().connectConnector("injected",i?.id).catch((e=>console.error(e))),void t();d.reset("ConnectWallet")}const{pairingUri:c}=W.state;if(n&&s&&(c||a))z.open=!0,t();else{const e=setInterval((()=>{const n=w.state,s=W.state;n.isUiLoaded&&n.isDataLoaded&&(s.pairingUri||a)&&(clearInterval(e),z.open=!0,t())}),200)}})),close(){z.open=!1}};var K=Object.defineProperty,V=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,Y=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const X=l({themeMode:typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),Z={state:X,subscribe:e=>u(X,(()=>e(X))),setThemeConfig(e){const{themeMode:t,themeVariables:n}=e;t&&(X.themeMode=t),n&&(X.themeVariables=((e,t)=>{for(var n in t||(t={}))J.call(t,n)&&Y(e,n,t[n]);if(V)for(var n of V(t))Q.call(t,n)&&Y(e,n,t[n]);return e})({},n))}},ee=l({open:!1,message:"",variant:"success"}),te={state:ee,subscribe:e=>u(ee,(()=>e(ee))),openToast(e,t){ee.open=!0,ee.message=e,ee.variant=t},closeToast(){ee.open=!1}}},3160:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var s=n(6867);function r(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?(0,s.P)(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}},605:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var s=n(3160),r=n(6867);function i(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const n=(0,s.E)(t);let i=0;for(const t of e)n.set(t,i),i+=t.length;return(0,r.P)(n)}},2217:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var s=n(5114),r=n(6867);function i(e,t="utf8"){const n=s.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):(0,r.P)(globalThis.Buffer.from(e,"utf-8"))}},7466:(e,t,n)=>{"use strict";n.d(t,{BB:()=>i.B,mL:()=>r.m,zo:()=>s.z});var s=n(605),r=n(2217),i=n(2263)},2263:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var s=n(5114);function r(e,t="utf8"){const n=s.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},6867:(e,t,n)=>{"use strict";function s(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}n.d(t,{P:()=>s})},5114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>We});var s={};n.r(s),n.d(s,{identity:()=>S});var r={};n.r(r),n.d(r,{base2:()=>I});var i={};n.r(i),n.d(i,{base8:()=>T});var a={};n.r(a),n.d(a,{base10:()=>O});var o={};n.r(o),n.d(o,{base16:()=>N,base16upper:()=>j});var c={};n.r(c),n.d(c,{base32:()=>U,base32hex:()=>M,base32hexpad:()=>F,base32hexpadupper:()=>$,base32hexupper:()=>D,base32pad:()=>B,base32padupper:()=>R,base32upper:()=>L,base32z:()=>G});var l={};n.r(l),n.d(l,{base36:()=>H,base36upper:()=>W});var u={};n.r(u),n.d(u,{base58btc:()=>z,base58flickr:()=>q});var h={};n.r(h),n.d(h,{base64:()=>K,base64pad:()=>V,base64url:()=>J,base64urlpad:()=>Q});var d={};n.r(d),n.d(d,{base256emoji:()=>ee});var f={};n.r(f),n.d(f,{sha256:()=>Pe,sha512:()=>Ce});var p={};n.r(p),n.d(p,{identity:()=>Se});var g={};n.r(g),n.d(g,{code:()=>Te,decode:()=>Ne,encode:()=>Oe,name:()=>Ie});var m={};n.r(m),n.d(m,{code:()=>Be,decode:()=>Me,encode:()=>Re,name:()=>Le});var y=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),a=i.charCodeAt(0);if(255!==n[a])throw new TypeError(i+" is ambiguous");n[a]=r}var o=e.length,c=e.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var s=0,r=0;e[t]===c;)s++,t++;for(var i=(e.length-t)*l+1>>>0,a=new Uint8Array(i);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=i-1;(0!==u||h<r)&&-1!==d;d--,h++)u+=o*a[d]>>>0,a[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");r=h,t++}if(" "!==e[t]){for(var f=i-r;f!==i&&0===a[f];)f++;for(var p=new Uint8Array(s+(i-f)),g=s;f!==i;)p[g++]=a[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,s=0,r=0,i=t.length;r!==i&&0===t[r];)r++,n++;for(var a=(i-r)*u+1>>>0,l=new Uint8Array(a);r!==i;){for(var h=t[r],d=0,f=a-1;(0!==h||d<s)&&-1!==f;f--,d++)h+=256*l[f]>>>0,l[f]=h%o>>>0,h=h/o>>>0;if(0!==h)throw new Error("Non-zero carry");s=d,r++}for(var p=a-s;p!==a&&0===l[p];)p++;for(var g=c.repeat(n);p<a;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:h,decode:function(e){var n=h(e);if(n)return n;throw new Error(`Non-${t} character`)}}};const b=y,w=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class v{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class A{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return k(this,e)}}class E{constructor(e){this.decoders=e}or(e){return k(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const k=(e,t)=>new E({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class _{constructor(e,t,n,s){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new v(e,t,n),this.decoder=new A(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const P=({name:e,prefix:t,encode:n,decode:s})=>new _(e,t,n,s),C=({prefix:e,name:t,alphabet:n})=>{const{encode:s,decode:r}=b(n,t);return P({prefix:e,name:t,encode:s,decode:e=>w(r(e))})},x=({name:e,prefix:t,bitsPerChar:n,alphabet:s})=>P({prefix:t,name:e,encode:e=>((e,t,n)=>{const s="="===t[t.length-1],r=(1<<n)-1;let i="",a=0,o=0;for(let s=0;s<e.length;++s)for(o=o<<8|e[s],a+=8;a>n;)a-=n,i+=t[r&o>>a];if(a&&(i+=t[r&o<<n-a]),s)for(;i.length*n&7;)i+="=";return i})(e,s,n),decode:t=>((e,t,n,s)=>{const r={};for(let e=0;e<t.length;++e)r[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,l=0;for(let t=0;t<i;++t){const i=r[e[t]];if(void 0===i)throw new SyntaxError(`Non-${s} character`);c=c<<n|i,o+=n,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a})(t,s,n,e)}),S=P({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),I=x({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),T=x({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),O=C({prefix:"9",name:"base10",alphabet:"0123456789"}),N=x({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),j=x({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),U=x({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),L=x({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),B=x({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),R=x({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),M=x({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),D=x({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),F=x({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$=x({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G=x({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),H=C({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),W=C({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),z=C({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),q=C({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),K=x({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),V=x({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),J=x({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Q=x({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Y=Array.from(""),X=Y.reduce(((e,t,n)=>(e[n]=t,e)),[]),Z=Y.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);const ee=P({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=X[t]),"")},decode:function(e){const t=[];for(const n of e){const e=Z[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var te=function e(t,n,s){n=n||[];var r=s=s||0;for(;t>=re;)n[s++]=255&t|ne,t/=128;for(;t&se;)n[s++]=255&t|ne,t>>>=7;return n[s]=0|t,e.bytes=s-r+1,n},ne=128,se=-128,re=Math.pow(2,31);var ie=function e(t,n){var s,r=0,i=0,a=n=n||0,o=t.length;do{if(a>=o)throw e.bytes=0,new RangeError("Could not decode varint");s=t[a++],r+=i<28?(s&oe)<<i:(s&oe)*Math.pow(2,i),i+=7}while(s>=ae);return e.bytes=a-n,r},ae=128,oe=127;var ce=Math.pow(2,7),le=Math.pow(2,14),ue=Math.pow(2,21),he=Math.pow(2,28),de=Math.pow(2,35),fe=Math.pow(2,42),pe=Math.pow(2,49),ge=Math.pow(2,56),me=Math.pow(2,63);const ye={encode:te,decode:ie,encodingLength:function(e){return e<ce?1:e<le?2:e<ue?3:e<he?4:e<de?5:e<fe?6:e<pe?7:e<ge?8:e<me?9:10}},be=(e,t,n=0)=>(ye.encode(e,t,n),t),we=e=>ye.encodingLength(e),ve=(e,t)=>{const n=t.byteLength,s=we(e),r=s+we(n),i=new Uint8Array(r+n);return be(e,i,0),be(n,i,s),i.set(t,r),new Ae(e,n,t,i)};class Ae{constructor(e,t,n,s){this.code=e,this.size=t,this.digest=n,this.bytes=s}}const Ee=({name:e,code:t,encode:n})=>new ke(e,t,n);class ke{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ve(this.code,t):t.then((e=>ve(this.code,e)))}throw Error("Unknown type, must be binary type")}}const _e=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Pe=Ee({name:"sha2-256",code:18,encode:_e("SHA-256")}),Ce=Ee({name:"sha2-512",code:19,encode:_e("SHA-512")}),xe=w,Se={code:0,name:"identity",encode:xe,digest:e=>ve(0,xe(e))},Ie="raw",Te=85,Oe=e=>w(e),Ne=e=>w(e),je=new TextEncoder,Ue=new TextDecoder,Le="json",Be=512,Re=e=>je.encode(JSON.stringify(e)),Me=e=>JSON.parse(Ue.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const De={...s,...r,...i,...a,...o,...c,...l,...u,...h,...d};var Fe=n(3160);function $e(e,t,n,s){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:s}}}const Ge=$e("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),He=$e("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{e=e.substring(1);const t=(0,Fe.E)(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),We={utf8:Ge,"utf-8":Ge,hex:De.base16,latin1:He,ascii:He,binary:He,...De}},4503:(e,t,n)=>{"use strict";function s(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}n.d(t,{T:()=>s})},6143:(e,t,n)=>{"use strict";n.d(t,{R:()=>w});var s=n(4503),r=n(6693);const i="0x82ad56cb";var a=n(2027),o=n(377),c=n(5980),l=n(7210),u=n(7799),h=n(2676),d=n(2106),f=n(6445),p=n(7469);var g=n(1163),m=n(4688),y=n(2357),b=n(7531);async function w(e,t){const{account:w=e.account,batch:v=Boolean(e.batch?.multicall),blockNumber:A,blockTag:E="latest",accessList:k,data:_,gas:P,gasPrice:C,maxFeePerGas:x,maxPriorityFeePerGas:S,nonce:I,to:T,value:O,...N}=t,j=w?(0,s.T)(w):void 0;try{(0,b.F)(t);const n=(A?(0,d.eC)(A):void 0)||E,s=e.chain?.formatters?.transactionRequest?.format||m.tG,a=s({...(0,g.K)(N,{format:s}),from:j?.address,accessList:k,data:_,gas:P,gasPrice:C,maxFeePerGas:x,maxPriorityFeePerGas:S,nonce:I,to:T,value:O});if(v&&function({request:e}){const{data:t,to:n,...s}=e;return!!t&&(!t.startsWith(i)&&(!!n&&!(Object.values(s).filter((e=>void 0!==e)).length>0)))}({request:a}))try{return await async function(e,t){const{batchSize:n=1024,wait:s=0}="object"==typeof e.batch?.multicall?e.batch.multicall:{},{blockNumber:i,blockTag:a="latest",data:f,multicallAddress:p,to:g}=t;let m=p;if(!m){if(!e.chain)throw new o.pZ;m=(0,h.LI)({blockNumber:i,chain:e.chain,contract:"multicall3"})}const b=i?(0,d.eC)(i):void 0,w=b||a,{schedule:v}=(0,y.S)({id:`${e.uid}.${w}`,wait:s,shouldSplitBatch(e){const t=e.reduce(((e,{data:t})=>e+(t.length-2)),0);return t>2*n},fn:async t=>{const n=t.map((e=>({allowFailure:!0,callData:e.data,target:e.to}))),s=(0,u.R)({abi:r.F8,args:[n],functionName:"aggregate3"}),i=await e.request({method:"eth_call",params:[{data:s,to:m},w]});return(0,l.k)({abi:r.F8,args:[n],functionName:"aggregate3",data:i||"0x"})}}),[{returnData:A,success:E}]=await v({data:f,to:g});if(!E)throw new c.VQ({data:A});return"0x"===A?{data:void 0}:{data:A}}(e,{...a,blockNumber:A,blockTag:E})}catch(e){if(!(e instanceof o.pZ||e instanceof o.mm))throw e}const f=await e.request({method:"eth_call",params:n?[a,n]:[a]});return"0x"===f?{data:void 0}:{data:f}}catch(s){const r=function(e){if(!(e instanceof a.G))return;const t=e.walk();return"object"==typeof t.data?t.data.data:t.data}(s),{offchainLookup:i,offchainLookupSignature:o}=await n.e(770).then(n.bind(n,9770));if(r?.slice(0,10)===o&&T)return{data:await i(e,{data:r,to:T})};throw function(e,{docsPath:t,...n}){const s=(()=>{const t=(0,p.k)(e,n);return t instanceof f.cj?e:t})();return new c.cg(s,{docsPath:t,...n})}(s,{...t,account:j,chain:e.chain})}}},6693:(e,t,n)=>{"use strict";n.d(t,{$o:()=>l,F8:()=>s,X$:()=>c,du:()=>a,k3:()=>i,nZ:()=>o});const s=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],r=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"}],i=[...r,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],a=[...r,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],o=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],c=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],l=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}]},1746:(e,t,n)=>{"use strict";n.d(t,{$:()=>s,Up:()=>r,hZ:()=>i});const s={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},r={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},i={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}},4192:(e,t,n)=>{"use strict";n.d(t,{Bd:()=>i,Zn:()=>r,ez:()=>s});const s={gwei:9,wei:18},r={ether:-9,wei:9},i={ether:-18,gwei:-9}},7412:(e,t,n)=>{"use strict";n.d(t,{CI:()=>k,FM:()=>p,Gy:()=>A,KY:()=>w,M4:()=>h,MX:()=>b,SM:()=>v,cO:()=>o,dh:()=>E,fM:()=>a,fs:()=>d,gr:()=>u,hn:()=>_,lC:()=>g,mv:()=>m,wM:()=>P,wb:()=>l,xB:()=>c,xL:()=>y,yP:()=>f});var s=n(522),r=n(9135),i=n(2027);class a extends i.G{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class o extends i.G{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class c extends i.G{constructor({data:e,params:t,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${(0,s.h)(t,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=n}}class l extends i.G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class u extends i.G{constructor({expectedLength:e,givenLength:t,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class h extends i.G{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${(0,r.d)(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class d extends i.G{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class f extends i.G{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class p extends i.G{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class g extends i.G{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class m extends i.G{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class y extends i.G{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class b extends i.G{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class w extends i.G{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class v extends i.G{constructor({abiItem:e,data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for non-indexed event parameters.`].join("\n"),{metaMessages:[`Params: (${(0,s.h)(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=n,this.size=r}}class A extends i.G{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${(0,s.t)(e,{includeName:!0})}".`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class E extends i.G{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class k extends i.G{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class _ extends i.G{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class P extends i.G{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}},6087:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var s=n(2027);class r extends s.G{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}},2027:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});var s=n(8673);class r extends Error{constructor(e,t={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:(0,s.bo)()});const n=t.cause instanceof r?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof r&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: https://viem.sh${i}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return i(this,e)}}function i(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e?i(e.cause,t):t?null:e}},377:(e,t,n)=>{"use strict";n.d(t,{Bk:()=>a,Yl:()=>i,mm:()=>r,pZ:()=>o});var s=n(2027);class r extends s.G{constructor({blockNumber:e,chain:t,contract:n}){super(`Chain "${t.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class i extends s.G{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class a extends s.G{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class o extends s.G{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}},5980:(e,t,n)=>{"use strict";n.d(t,{cg:()=>m,uq:()=>y,Lu:()=>b,Dk:()=>w,VQ:()=>v});var s=n(4503),r=n(1746),i=n(6899),a=n(522),o=n(6070);function c({abiItem:e,args:t,includeFunctionName:n=!0,includeName:s=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map(((e,n)=>`${s&&e.name?`${e.name}: `:""}${"object"==typeof t[n]?(0,o.P)(t[n]):t[n]}`)).join(", ")})`}var l=n(840),u=n(9625),h=n(7795),d=n(7412),f=n(2027),p=n(3639),g=n(8673);class m extends f.G{constructor(e,{account:t,docsPath:n,chain:r,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:d,to:f,value:g}){const m=t?(0,s.T)(t):void 0,y=(0,p.xr)({from:m?.address,to:f,value:void 0!==g&&`${(0,u.d)(g)} ${r?.nativeCurrency.symbol||"ETH"}`,data:i,gas:a,gasPrice:void 0!==o&&`${(0,h.o)(o)} gwei`,maxFeePerGas:void 0!==c&&`${(0,h.o)(c)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${(0,h.o)(l)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",y].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=e}}class y extends f.G{constructor(e,{abi:t,args:n,contractAddress:s,docsPath:r,functionName:i,sender:o}){const u=(0,l.m)({abi:t,args:n,name:i}),h=u?c({abiItem:u,args:n,includeFunctionName:!1,includeName:!1}):void 0,d=u?(0,a.t)(u,{includeName:!0}):void 0,f=(0,p.xr)({address:s&&(0,g.CR)(s),function:d,args:h&&"()"!==h&&`${[...Array(i?.length??0).keys()].map((()=>" ")).join("")}${h}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Contract Call:",f].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=t,this.args=n,this.cause=e,this.contractAddress=s,this.functionName=i,this.sender=o}}class b extends f.G{constructor({abi:e,data:t,functionName:n,message:s}){let o,l,u,h,f;if(t&&"0x"!==t)try{l=(0,i.p)({abi:e,data:t});const{abiItem:n,errorName:s,args:o}=l;if("Error"===s)h=o[0];else if("Panic"===s){const[e]=o;h=r.$[e]}else{const e=n?(0,a.t)(n,{includeName:!0}):void 0,t=n&&o?c({abiItem:n,args:o,includeFunctionName:!1,includeName:!1}):void 0;u=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(s?.length??0).keys()].map((()=>" ")).join("")}${t}`:""]}}catch(e){o=e}else s&&(h=s);o instanceof d.yP&&(f=o.signature,u=[`Unable to decode signature "${f}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${f}.`]),super(h&&"execution reverted"!==h||f?[`The contract function "${n}" reverted with the following ${f?"signature":"reason"}:`,h||f].join("\n"):`The contract function "${n}" reverted.`,{cause:o,metaMessages:u}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=l,this.reason=h,this.signature=f}}class w extends f.G{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class v extends f.G{constructor({data:e,message:t}){super(t||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}},9760:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,m:()=>r});var s=n(2027);class r extends s.G{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class i extends s.G{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}},7788:(e,t,n)=>{"use strict";n.d(t,{Cd:()=>i,J5:()=>r,M6:()=>a});var s=n(2027);class r extends s.G{constructor({max:e,min:t,signed:n,size:s,value:r}){super(`Number "${r}" is not in safe ${s?`${8*s}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class i extends s.G{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}class a extends s.G{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}},6445:(e,t,n)=>{"use strict";n.d(t,{C_:()=>h,G$:()=>o,Hh:()=>a,M_:()=>i,WF:()=>d,ZI:()=>c,cj:()=>m,cs:()=>g,dR:()=>f,pZ:()=>p,se:()=>u,vU:()=>l});var s=n(7795),r=n(2027);class i extends r.G{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class a extends r.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,s.o)(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class o extends r.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,s.o)(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class c extends r.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class l extends r.G{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class u extends r.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class h extends r.G{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class d extends r.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class f extends r.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class p extends r.G{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class g extends r.G{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${(0,s.o)(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${(0,s.o)(n)} gwei`:""}).`].join("\n"),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(g,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class m extends r.G{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}},8863:(e,t,n)=>{"use strict";n.d(t,{Gg:()=>a,W5:()=>l,bs:()=>c,c9:()=>o});var s=n(6070),r=n(2027),i=n(8673);class a extends r.G{constructor({body:e,details:t,headers:n,status:r,url:a}){super("HTTP request failed.",{details:t,metaMessages:[r&&`Status: ${r}`,`URL: ${(0,i.Gr)(a)}`,e&&`Request body: ${(0,s.P)(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=r,this.url=a}}class o extends r.G{constructor({body:e,details:t,url:n}){super("WebSocket request failed.",{details:t,metaMessages:[`URL: ${(0,i.Gr)(n)}`,`Request body: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class c extends r.G{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${(0,i.Gr)(n)}`,`Request body: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class l extends r.G{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,i.Gr)(t)}`,`Request body: ${(0,s.P)(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}},3639:(e,t,n)=>{"use strict";n.d(t,{Bh:()=>u,Yb:()=>h,j3:()=>c,mc:()=>d,mk:()=>l,xY:()=>o,xr:()=>a});var s=n(9625),r=n(7795),i=n(2027);function a(e){const t=Object.entries(e).map((([e,t])=>void 0===t||!1===t?null:[e,t])).filter(Boolean),n=t.reduce(((e,[t])=>Math.max(e,t.length)),0);return t.map((([e,t])=>`  ${`${e}:`.padEnd(n+1)}  ${t}`)).join("\n")}class o extends i.G{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class c extends i.G{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",a(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class l extends i.G{constructor(e,{account:t,docsPath:n,chain:i,data:o,gas:c,gasPrice:l,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:d,to:f,value:p}){const g=a({chain:i&&`${i?.name} (id: ${i?.id})`,from:t?.address,to:f,value:void 0!==p&&`${(0,s.d)(p)} ${i?.nativeCurrency.symbol||"ETH"}`,data:o,gas:c,gasPrice:void 0!==l&&`${(0,r.o)(l)} gwei`,maxFeePerGas:void 0!==u&&`${(0,r.o)(u)} gwei`,maxPriorityFeePerGas:void 0!==h&&`${(0,r.o)(h)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",g].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}class u extends i.G{constructor({blockHash:e,blockNumber:t,blockTag:n,hash:s,index:r}){let i="Transaction";n&&void 0!==r&&(i=`Transaction at block time "${n}" at index "${r}"`),e&&void 0!==r&&(i=`Transaction at block hash "${e}" at index "${r}"`),t&&void 0!==r&&(i=`Transaction at block number "${t}" at index "${r}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class h extends i.G{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class d extends i.G{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}},8673:(e,t,n)=>{"use strict";n.d(t,{CR:()=>s,Gr:()=>r,bo:()=>i});const s=e=>e,r=e=>e,i=()=>"viem@1.15.3"},4450:(e,t,n)=>{"use strict";n.d(t,{r:()=>u});var s=n(7412),r=n(5775),i=n(9135),a=n(3972),o=n(1836),c=n(5946),l=n(5444);function u(e,t){if("0x"===t&&e.length>0)throw new s.wb;if((0,i.d)(t)&&(0,i.d)(t)<32)throw new s.xB({data:t,params:e,size:(0,i.d)(t)});return function({data:e,params:t}){const n=[];let r=0;for(let a=0;a<t.length;a++){if(r>=(0,i.d)(e))throw new s.xB({data:e,params:t,size:(0,i.d)(e)});const o=t[a],{consumed:c,value:l}=h({data:e,param:o,position:r});n.push(l),r+=c}return n}({data:t,params:e})}function h({data:e,param:t,position:n}){const i=(0,l.S)(t.type);if(i){const[s,r]=i;return function(e,{param:t,length:n,position:s}){if(!n){const n=(0,c.ly)((0,a.tP)(e,s,s+32,{strict:!0})),r=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0}));let i=0;const o=[];for(let s=0;s<r;++s){const s=h({data:(0,a.tP)(e,n+32),param:t,position:i});i+=s.consumed,o.push(s.value)}return{value:o,consumed:32}}if(d(t)){const r=(0,l.S)(t.type),i=!r?.[0];let o=0;const u=[];for(let r=0;r<n;++r){const n=(0,c.ly)((0,a.tP)(e,s,s+32,{strict:!0})),l=h({data:(0,a.tP)(e,n),param:t,position:i?o:32*r});o+=l.consumed,u.push(l.value)}return{value:u,consumed:32}}let r=0;const i=[];for(let a=0;a<n;++a){const n=h({data:e,param:t,position:s+r});r+=n.consumed,i.push(n.value)}return{value:i,consumed:r}}(e,{length:s,param:{...t,type:r},position:n})}if("tuple"===t.type)return function(e,{param:t,position:n}){const s=0===t.components.length||t.components.some((({name:e})=>!e)),r=s?[]:{};let i=0;if(d(t)){const o=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0}));for(let n=0;n<t.components.length;++n){const c=t.components[n],l=h({data:(0,a.tP)(e,o),param:c,position:i});i+=l.consumed,r[s?n:c?.name]=l.value}return{consumed:32,value:r}}for(let a=0;a<t.components.length;++a){const o=t.components[a],c=h({data:e,param:o,position:n+i});i+=c.consumed,r[s?a:o?.name]=c.value}return{consumed:i,value:r}}(e,{param:t,position:n});if("string"===t.type)return function(e,{position:t}){const n=(0,c.ly)((0,a.tP)(e,t,t+32,{strict:!0})),s=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0}));if(0===s)return{consumed:32,value:""};const r=(0,c.rR)((0,o.f)((0,a.tP)(e,n+32,n+32+s,{strict:!0})));return{consumed:32,value:r}}(e,{position:n});if(t.type.startsWith("bytes"))return function(e,{param:t,position:n}){const[s,r]=t.type.split("bytes");if(!r){const t=(0,c.ly)((0,a.tP)(e,n,n+32,{strict:!0})),s=(0,c.ly)((0,a.tP)(e,t,t+32,{strict:!0}));if(0===s)return{consumed:32,value:"0x"};return{consumed:32,value:(0,a.tP)(e,t+32,t+32+s,{strict:!0})}}const i=(0,a.tP)(e,n,n+parseInt(r),{strict:!0});return{consumed:32,value:i}}(e,{param:t,position:n});const u=(0,a.tP)(e,n,n+32,{strict:!0});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,{param:t}){const n=t.type.startsWith("int"),s=parseInt(t.type.split("int")[1]||"256");return{consumed:32,value:s>48?(0,c.y_)(e,{signed:n}):(0,c.ly)(e,{signed:n})}}(u,{param:t});if("address"===t.type)return function(e){return{consumed:32,value:(0,r.x)((0,a.tP)(e,-20))}}(u);if("bool"===t.type)return function(e){return{consumed:32,value:(0,c.XA)(e)}}(u);throw new s.CI(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function d(e){const{type:t}=e;if("string"===t)return!0;if("bytes"===t)return!0;if(t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(d);const n=(0,l.S)(e.type);return!(!n||!d({...e,type:n[1]}))}},6899:(e,t,n)=>{"use strict";n.d(t,{p:()=>l});var s=n(1746),r=n(7412),i=n(3972),a=n(552),o=n(4450),c=n(522);function l({abi:e,data:t}){const n=(0,i.tP)(t,0,4);if("0x"===n)throw new r.wb;const l=[...e||[],s.Up,s.hZ].find((e=>"error"===e.type&&n===(0,a.o)((0,c.t)(e))));if(!l)throw new r.yP(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:l,args:"inputs"in l&&l.inputs&&l.inputs.length>0?(0,o.r)(l.inputs,(0,i.tP)(t,4)):void 0,errorName:l.name}}},7210:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var s=n(7412),r=n(4450),i=n(840);const a="/docs/contract/decodeFunctionResult";function o({abi:e,args:t,functionName:n,data:o}){let c=e[0];if(n&&(c=(0,i.m)({abi:e,args:t,name:n}),!c))throw new s.xL(n,{docsPath:a});if("function"!==c.type)throw new s.xL(void 0,{docsPath:a});if(!c.outputs)throw new s.MX(c.name,{docsPath:a});const l=(0,r.r)(c.outputs,o);return l&&l.length>1?l:l&&1===l.length?l[0]:void 0}},5444:(e,t,n)=>{"use strict";n.d(t,{E:()=>h,S:()=>p});var s=n(7412),r=n(6087),i=n(9321),a=n(7040),o=n(1769),c=n(9135),l=n(3972),u=n(2106);function h(e,t){if(e.length!==t.length)throw new s.fs({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let s=0;s<e.length;s++)n.push(d({param:e[s],value:t[s]}));return n}({params:e,values:t}),r=f(n);return 0===r.length?"0x":r}function d({param:e,value:t}){const n=p(e.type);if(n){const[r,i]=n;return function(e,{length:t,param:n}){const r=null===t;if(!Array.isArray(e))throw new s.hn(e);if(!r&&e.length!==t)throw new s.gr({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let i=!1;const o=[];for(let t=0;t<e.length;t++){const s=d({param:n,value:e[t]});s.dynamic&&(i=!0),o.push(s)}if(r||i){const e=f(o);if(r){const t=(0,u.eC)(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?(0,a.zo)([t,e]):t}}if(i)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:(0,a.zo)(o.map((({encoded:e})=>e)))}}(t,{length:r,param:{...e,type:i}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const s=[];for(let r=0;r<t.components.length;r++){const i=t.components[r],a=d({param:i,value:e[Array.isArray(e)?r:i.name]});s.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?f(s):(0,a.zo)(s.map((({encoded:e})=>e)))}}(t,{param:e});if("address"===e.type)return function(e){if(!(0,i.U)(e))throw new r.b({address:e});return{dynamic:!1,encoded:(0,o.gc)(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){return{dynamic:!1,encoded:(0,o.gc)((0,u.C4)(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){return function(e,{signed:t}){return{dynamic:!1,encoded:(0,u.eC)(e,{size:32,signed:t})}}(t,{signed:e.type.startsWith("int")})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),r=(0,c.d)(e);if(!n){let t=e;return r%32!=0&&(t=(0,o.gc)(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:(0,a.zo)([(0,o.gc)((0,u.eC)(r,{size:32})),t])}}if(r!==parseInt(n))throw new s.M4({expectedSize:parseInt(n),value:e});return{dynamic:!1,encoded:(0,o.gc)(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=(0,u.$G)(e),n=Math.ceil((0,c.d)(t)/32),s=[];for(let e=0;e<n;e++)s.push((0,o.gc)((0,l.tP)(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:(0,a.zo)([(0,o.gc)((0,u.eC)((0,c.d)(t),{size:32})),...s])}}(t);throw new s.dh(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function f(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:s,encoded:r}=e[n];t+=s?32:(0,c.d)(r)}const n=[],s=[];let r=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push((0,u.eC)(t+r,{size:32})),s.push(o),r+=(0,c.d)(o)):n.push(o)}return(0,a.zo)([...n,...s])}function p(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}},7799:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var s=n(7412),r=n(7040),i=n(552),a=n(5444),o=n(522),c=n(840);function l({abi:e,args:t,functionName:n}){let l=e[0];if(n&&(l=(0,c.m)({abi:e,args:t,name:n}),!l))throw new s.xL(n,{docsPath:"/docs/contract/encodeFunctionData"});if("function"!==l.type)throw new s.xL(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const u=(0,o.t)(l),h=(0,i.o)(u),d="inputs"in l&&l.inputs?(0,a.E)(l.inputs,t??[]):void 0;return(0,r.SM)([h,d??"0x"])}},522:(e,t,n)=>{"use strict";n.d(t,{h:()=>i,t:()=>r});var s=n(7412);function r(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new s.wM(e.type);return`${e.name}(${i(e.inputs,{includeName:t})})`}function i(e,{includeName:t=!1}={}){return e?e.map((e=>function(e,{includeName:t}){if(e.type.startsWith("tuple"))return`(${i(e.components,{includeName:t})})${e.type.slice(5)}`;return e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}},840:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var s=n(5102),r=n(4092),i=n(552),a=n(9321);function o({abi:e,args:t=[],name:n}){const a=(0,s.v)(n,{strict:!1}),o=e.filter((e=>a?"function"===e.type?(0,i.o)(e)===n:"event"===e.type&&(0,r.e)(e)===n:"name"in e&&e.name===n));if(0!==o.length){if(1===o.length)return o[0];for(const e of o){if(!("inputs"in e))continue;if(!t||0===t.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==t.length)continue;if(t.every(((t,n)=>{const s="inputs"in e&&e.inputs[n];return!!s&&c(t,s)})))return e}return o[0]}}function c(e,t){const n=typeof e,s=t.type;switch(s){case"address":return(0,a.U)(e);case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===s&&"components"in t?Object.values(t.components).every(((t,n)=>c(Object.values(e)[n],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)&&(Array.isArray(e)&&e.every((e=>c(e,{...t,type:s.replace(/(\[[0-9]{0,}\])$/,"")}))))}}},5775:(e,t,n)=>{"use strict";n.d(t,{K:()=>c,x:()=>o});var s=n(6087),r=n(1187),i=n(4813),a=n(9321);function o(e,t){const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),s=(0,i.w)((0,r.qX)(n),"bytes"),a=(t?n.substring(`${t}0x`.length):n).split("");for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&a[e]&&(a[e]=a[e].toUpperCase()),(15&s[e>>1])>=8&&a[e+1]&&(a[e+1]=a[e+1].toUpperCase());return`0x${a.join("")}`}function c(e,t){if(!(0,a.U)(e))throw new s.b({address:e});return o(e,t)}},9321:(e,t,n)=>{"use strict";n.d(t,{U:()=>r});const s=/^0x[a-fA-F0-9]{40}$/;function r(e){return s.test(e)}},2676:(e,t,n)=>{"use strict";n.d(t,{LI:()=>a,ax:()=>i,qg:()=>r});var s=n(377);function r({chain:e,currentChainId:t}){if(!e)throw new s.Bk;if(t!==e.id)throw new s.Yl({chain:e,currentChainId:t})}function i(e,t={}){const{fees:n=e.fees,formatters:s=e.formatters,serializers:r=e.serializers}=t;return{...e,fees:n,formatters:s,serializers:r}}function a({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new s.mm({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new s.mm({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}},7040:(e,t,n)=>{"use strict";function s(e){return"string"==typeof e[0]?r(e):function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let s=0;for(const t of e)n.set(t,s),s+=t.length;return n}(e)}function r(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}n.d(t,{SM:()=>r,zo:()=>s})},5102:(e,t,n)=>{"use strict";function s(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}n.d(t,{v:()=>s})},1769:(e,t,n)=>{"use strict";n.d(t,{gc:()=>i,vk:()=>r});var s=n(9760);function r(e,{dir:t,size:n=32}={}){return"string"==typeof e?i(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new s.$({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i="right"===t;r[i?s:n-s-1]=e[i?s:e.length-s-1]}return r}(e,{dir:t,size:n})}function i(e,{dir:t,size:n=32}={}){if(null===n)return e;const r=e.replace("0x","");if(r.length>2*n)throw new s.$({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r["right"===t?"padEnd":"padStart"](2*n,"0")}`}},9135:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var s=n(5102);function r(e){return(0,s.v)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},3972:(e,t,n)=>{"use strict";n.d(t,{tP:()=>a});var s=n(9760),r=n(5102),i=n(9135);function a(e,t,n,{strict:s}={}){return(0,r.v)(e,{strict:!1})?function(e,t,n,{strict:s}={}){o(e,t);const r=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;s&&c(r,t,n);return r}(e,t,n,{strict:s}):function(e,t,n,{strict:s}={}){o(e,t);const r=e.slice(t,n);s&&c(r,t,n);return r}(e,t,n,{strict:s})}function o(e,t){if("number"==typeof t&&t>0&&t>(0,i.d)(e)-1)throw new s.m({offset:t,position:"start",size:(0,i.d)(e)})}function c(e,t,n){if("number"==typeof t&&"number"==typeof n&&(0,i.d)(e)!==n-t)throw new s.m({offset:n,position:"end",size:(0,i.d)(e)})}},1836:(e,t,n)=>{"use strict";function s(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,s=0;for(let e=0;e<n.length-1&&"0"===n["left"===t?e:n.length-e-1].toString();e++)s++;return n="left"===t?n.slice(s):n.slice(0,n.length-s),"string"==typeof e?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}n.d(t,{f:()=>s})},5946:(e,t,n)=>{"use strict";n.d(t,{XA:()=>l,Yf:()=>o,ly:()=>u,rR:()=>h,y_:()=>c});var s=n(7788),r=n(9135),i=n(1836),a=n(1187);function o(e,{size:t}){if((0,r.d)(e)>t)throw new s.M6({givenSize:(0,r.d)(e),maxSize:t})}function c(e,t={}){const{signed:n}=t;t.size&&o(e,{size:t.size});const s=BigInt(e);if(!n)return s;const r=(e.length-2)/2;return s<=(1n<<8n*BigInt(r)-1n)-1n?s:s-BigInt(`0x${"f".padStart(2*r,"f")}`)-1n}function l(e,t={}){let n=e;if(t.size&&(o(n,{size:t.size}),n=(0,i.f)(n)),"0x00"===(0,i.f)(n))return!1;if("0x01"===(0,i.f)(n))return!0;throw new s.Cd(n)}function u(e,t={}){return Number(c(e,t))}function h(e,t={}){let n=(0,a.nr)(e);return t.size&&(o(n,{size:t.size}),n=(0,i.f)(n,{dir:"right"})),(new TextDecoder).decode(n)}},1187:(e,t,n)=>{"use strict";n.d(t,{O0:()=>l,nr:()=>d,qX:()=>f});var s=n(2027),r=n(5102),i=n(1769),a=n(5946),o=n(2106);const c=new TextEncoder;function l(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const n=(0,o.eC)(e,t);return d(n)}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);if(n[0]=Number(e),"number"==typeof t.size)return(0,a.Yf)(n,{size:t.size}),(0,i.vk)(n,{size:t.size});return n}(e,t):(0,r.v)(e)?d(e,t):f(e,t)}const u={zero:48,nine:57,A:65,F:70,a:97,f:102};function h(e){return e>=u.zero&&e<=u.nine?e-u.zero:e>=u.A&&e<=u.F?e-(u.A-10):e>=u.a&&e<=u.f?e-(u.a-10):void 0}function d(e,t={}){let n=e;t.size&&((0,a.Yf)(n,{size:t.size}),n=(0,i.vk)(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const o=r.length/2,c=new Uint8Array(o);for(let e=0,t=0;e<o;e++){const n=h(r.charCodeAt(t++)),i=h(r.charCodeAt(t++));if(void 0===n||void 0===i)throw new s.G(`Invalid byte sequence ("${r[t-2]}${r[t-1]}" in "${r}").`);c[e]=16*n+i}return c}function f(e,t={}){const n=c.encode(e);return"number"==typeof t.size?((0,a.Yf)(n,{size:t.size}),(0,i.vk)(n,{dir:"right",size:t.size})):n}},2106:(e,t,n)=>{"use strict";n.d(t,{$G:()=>d,C4:()=>c,NC:()=>o,ci:()=>l,eC:()=>u});var s=n(7788),r=n(1769),i=n(5946);const a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function o(e,t={}){return"number"==typeof e||"bigint"==typeof e?u(e,t):"string"==typeof e?d(e,t):"boolean"==typeof e?c(e,t):l(e,t)}function c(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?((0,i.Yf)(n,{size:t.size}),(0,r.vk)(n,{size:t.size})):n}function l(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=a[e[t]];const s=`0x${n}`;return"number"==typeof t.size?((0,i.Yf)(s,{size:t.size}),(0,r.vk)(s,{dir:"right",size:t.size})):s}function u(e,t={}){const{signed:n,size:i}=t,a=BigInt(e);let o;i?o=n?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(o=BigInt(Number.MAX_SAFE_INTEGER));const c="bigint"==typeof o&&n?-o-1n:0;if(o&&a>o||a<c){const t="bigint"==typeof e?"n":"";throw new s.J5({max:o?`${o}${t}`:void 0,min:`${c}${t}`,signed:n,size:i,value:`${e}${t}`})}const l=`0x${(n&&a<0?(1n<<BigInt(8*i))+BigInt(a):a).toString(16)}`;return i?(0,r.vk)(l,{size:i}):l}const h=new TextEncoder;function d(e,t={}){return l(h.encode(e),t)}},7469:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var s=n(2027),r=n(6445);function i(e,t){const n=(e.details||"").toLowerCase(),i=e.walk((e=>e.code===r.M_.code));return i instanceof s.G?new r.M_({cause:e,message:i.details}):r.M_.nodeMessage.test(n)?new r.M_({cause:e,message:e.details}):r.Hh.nodeMessage.test(n)?new r.Hh({cause:e,maxFeePerGas:t?.maxFeePerGas}):r.G$.nodeMessage.test(n)?new r.G$({cause:e,maxFeePerGas:t?.maxFeePerGas}):r.ZI.nodeMessage.test(n)?new r.ZI({cause:e,nonce:t?.nonce}):r.vU.nodeMessage.test(n)?new r.vU({cause:e,nonce:t?.nonce}):r.se.nodeMessage.test(n)?new r.se({cause:e,nonce:t?.nonce}):r.C_.nodeMessage.test(n)?new r.C_({cause:e}):r.WF.nodeMessage.test(n)?new r.WF({cause:e,gas:t?.gas}):r.dR.nodeMessage.test(n)?new r.dR({cause:e,gas:t?.gas}):r.pZ.nodeMessage.test(n)?new r.pZ({cause:e}):r.cs.nodeMessage.test(n)?new r.cs({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new r.cj({cause:e})}},1163:(e,t,n)=>{"use strict";function s(e,{format:t}){if(!t)return{};return Object.keys(t({})).reduce(((t,n)=>(e?.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}n.d(t,{K:()=>s})},4688:(e,t,n)=>{"use strict";n.d(t,{tG:()=>i});var s=n(2106);const r={legacy:"0x0",eip2930:"0x1",eip1559:"0x2"};function i(e){return{...e,gas:void 0!==e.gas?(0,s.eC)(e.gas):void 0,gasPrice:void 0!==e.gasPrice?(0,s.eC)(e.gasPrice):void 0,maxFeePerGas:void 0!==e.maxFeePerGas?(0,s.eC)(e.maxFeePerGas):void 0,maxPriorityFeePerGas:void 0!==e.maxPriorityFeePerGas?(0,s.eC)(e.maxPriorityFeePerGas):void 0,nonce:void 0!==e.nonce?(0,s.eC)(e.nonce):void 0,type:void 0!==e.type?r[e.type]:void 0,value:void 0!==e.value?(0,s.eC)(e.value):void 0}}},4092:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var s=n(1187),r=n(4154);var i=n(4813);const a=e=>{return t=(e=>(0,r.r)(e))(e),(0,i.w)((0,s.O0)(t));var t}},552:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});var s=n(3972),r=n(1187),i=n(4154),a=n(4813);const o=e=>{return(0,s.tP)((t=(0,i.r)(e),(0,a.w)((0,r.O0)(t))),0,4);var t}},4154:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var s=n(522);const r=/((function|event)\s)?(.*)(\((.*)\))/;function i(e){const t=e.match(r),n=t?.[2]||void 0,s=t?.[3];return{type:n,name:s,params:t?.[5]||void 0}}const a=e=>{if("string"==typeof e){const t=i(e).name,n=function(e){const t=i(e).params,n=t?.split(",").map((e=>e.trim().split(" ")));return n?.map((e=>({type:e[0],name:"indexed"===e[1]?e[2]:e[1],..."indexed"===e[1]?{indexed:!0}:{}})))}(e)||[];return`${t}(${n.map((({type:e})=>e)).join(",")})`}return(0,s.t)(e)}},4813:(e,t,n)=>{"use strict";function s(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){r(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}n.d(t,{w:()=>R});const o=BigInt(2**32-1),c=BigInt(32);function l(e,t=!1){return t?{h:Number(e&o),l:Number(e>>c&o)}:{h:0|Number(e>>c&o),l:0|Number(e&o)}}function u(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:a}=l(e[r],t);[n[r],s[r]]=[i,a]}return[n,s]}const h=(e,t,n)=>e<<n|t>>>32-n,d=(e,t,n)=>t<<n|e>>>32-n,f=(e,t,n)=>t<<n-32|e>>>64-n,p=(e,t,n)=>e<<n-32|t>>>64-n;const g=e=>e instanceof Uint8Array;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function m(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!g(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class y{clone(){return this._cloneInto()}}const[b,w,v]=[[],[],[]],A=BigInt(0),E=BigInt(1),k=BigInt(2),_=BigInt(7),P=BigInt(256),C=BigInt(113);for(let e=0,t=E,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],b.push(2*(5*s+n)),w.push((e+1)*(e+2)/2%64);let r=A;for(let e=0;e<7;e++)t=(t<<E^(t>>_)*C)%P,t&k&&(r^=E<<(E<<BigInt(e))-E);v.push(r)}const[x,S]=u(v,!0),I=(e,t,n)=>n>32?f(e,t,n):h(e,t,n),T=(e,t,n)=>n>32?p(e,t,n):d(e,t,n);class O extends y{constructor(e,t,n,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,s(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,r=(t+2)%10,i=n[r],a=n[r+1],o=I(i,a,1)^n[s],c=T(i,a,1)^n[s+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],r=e[3];for(let n=0;n<24;n++){const s=w[n],i=I(t,r,s),a=T(t,r,s),o=b[n];t=e[o],r=e[o+1],e[o]=i,e[o+1]=a}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)n[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=x[s],e[1]^=S[s]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){i(this);const{blockLen:t,state:n}=this,s=(e=m(e)).length;for(let r=0;r<s;){const i=Math.min(t-this.pos,s-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,0!=(128&t)&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){i(this,!1),r(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,r=e.length;s<r;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,r-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return s(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(a(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:r,enableXOF:i}=this;return e||(e=new O(t,n,s,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}}const N=(e,t,n)=>function(e){const t=t=>e().update(m(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}((()=>new O(t,e,n))),j=N(1,136,32);var U=n(5102),L=n(1187),B=n(2106);function R(e,t){const n=t||"hex",s=j((0,U.v)(e,{strict:!1})?(0,L.O0)(e):e);return"bytes"===n?s:(0,B.NC)(s)}},2357:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});const s=new Map;function r({fn:e,id:t,shouldSplitBatch:n,wait:r=0}){const i=async()=>{const t=o();a();const n=t.map((({args:e})=>e));0!==n.length&&e(n).then((e=>{t.forEach((({pendingPromise:t},n)=>t.resolve?.([e[n],e])))})).catch((e=>{t.forEach((({pendingPromise:t})=>t.reject?.(e)))}))},a=()=>s.delete(t),o=()=>s.get(t)||[],c=e=>s.set(t,[...o(),e]);return{flush:a,async schedule(e){const t={},s=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),a=n?.([...o().map((({args:e})=>e)),e]);a&&i();return o().length>0?(c({args:e,pendingPromise:t}),s):(c({args:e,pendingPromise:t}),setTimeout(i,r),s)}}}},6070:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});const s=(e,t,n)=>JSON.stringify(e,((e,n)=>{const s="bigint"==typeof n?n.toString():n;return"function"==typeof t?t(e,s):s}),n)},7531:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});var s=n(4503),r=n(6087),i=n(6445),a=n(3639),o=n(9321);function c(e){const{account:t,gasPrice:n,maxFeePerGas:c,maxPriorityFeePerGas:l,to:u}=e,h=t?(0,s.T)(t):void 0;if(h&&!(0,o.U)(h.address))throw new r.b({address:h.address});if(u&&!(0,o.U)(u))throw new r.b({address:u});if(void 0!==n&&(void 0!==c||void 0!==l))throw new a.xY;if(c&&c>2n**256n-1n)throw new i.Hh({maxFeePerGas:c});if(l&&c&&l>c)throw new i.cs({maxFeePerGas:c,maxPriorityFeePerGas:l})}},9625:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var s=n(4192),r=n(5229);function i(e,t="wei"){return(0,r.b)(e,s.ez[t])}},7795:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var s=n(4192),r=n(5229);function i(e,t="wei"){return(0,r.b)(e,s.Zn[t])}},5229:(e,t,n)=>{"use strict";function s(e,t){let n=e.toString();const s=n.startsWith("-");s&&(n=n.slice(1)),n=n.padStart(t,"0");let[r,i]=[n.slice(0,n.length-t),n.slice(n.length-t)];return i=i.replace(/(0+)$/,""),`${s?"-":""}${r||"0"}${i?`.${i}`:""}`}n.d(t,{b:()=>s})},2284:e=>{"use strict";e.exports={version:"1.0.34"}}},c={};function l(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=o,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",s=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(r,i,a)=>{var o;a&&((o=[]).d=-1);var c,l,u,h=new Set,d=r.exports,f=new Promise(((e,t)=>{u=t,l=e}));f[t]=d,f[e]=e=>(o&&e(o),h.forEach(e),f.catch((e=>{}))),r.exports=f,i((r=>{var i;c=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var i=[];i.d=0,r.then((e=>{a[t]=e,s(i)}),(e=>{a[n]=e,s(i)}));var a={};return a[e]=e=>e(i),a}}var o={};return o[e]=e=>{},o[t]=r,o})))(r);var a=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(i=()=>t(a)).r=0;var n=e=>e!==o&&!h.has(e)&&(h.add(e),e&&!e.d&&(i.r++,e.push(i)));c.map((t=>t[e](n)))}));return i.r?l:a()}),(e=>(e?u(f[n]=e):l(d),s(o)))),o&&o.d<0&&(o.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var s={};r=r||[null,i({}),i([]),i(i)];for(var a=2&t&&e;"object"==typeof a&&!~r.indexOf(a);a=i(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,l.d(n,s),n},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".js",l.miniCssF=e=>{},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},l.l=(e,t,n,s)=>{if(a[e])a[e].push(t);else{var r,i;if(void 0!==n)for(var o=document.getElementsByTagName("script"),c=0;c<o.length;c++){var u=o[c];if(u.getAttribute("src")==e){r=u;break}}r||(i=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.src=e),a[e]=[t];var h=(t,n)=>{r.onerror=r.onload=null,clearTimeout(d);var s=a[e];if(delete a[e],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((e=>e(n))),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),i&&document.head.appendChild(r)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&!e;)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={296:0};l.f.j=(t,n)=>{var s=l.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var r=new Promise(((n,r)=>s=e[t]=[n,r]));n.push(s[2]=r);var i=l.p+l.u(t),a=new Error;l.l(i,(n=>{if(l.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",a.name="ChunkLoadError",a.type=r,a.request=i,s[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var s,r,[i,a,o]=n,c=0;if(i.some((t=>0!==e[t]))){for(s in a)l.o(a,s)&&(l.m[s]=a[s]);if(o)o(l)}for(t&&t(n);c<i.length;c++)r=i[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();l(1831)})();